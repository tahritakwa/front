webpackJsonp([2],{"5ZBu":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("OGqM"),o={},r=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;o[void 0]=function(e){return e},t.getter=function(e,t){var n=e+t;if(o[n])return o[n];var a=[];return e.replace(r,function(e,t,n,o){a.push(i.isPresent(t)?t:n||o)}),o[n]=function(e){for(var n=e,o=0;o<a.length;o++)if(!i.isPresent(n=n[a[o]])&&t)return n;return n},o[n]}},"6jty":function(e,t,n){"use strict";var i=n("TToO").__decorate,o=n("TToO").__metadata;Object.defineProperty(t,"__esModule",{value:!0});var r=n("WT6e"),a=n("Xjw4"),l=n("7DMc");t.TOGGLEBUTTON_VALUE_ACCESSOR={provide:l.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return s}),multi:!0};var s=function(){function e(){this.onLabel="Yes",this.offLabel="No",this.onChange=new r.EventEmitter,this.checked=!1,this.focus=!1,this.onModelChange=function(){},this.onModelTouched=function(){}}return e.prototype.ngAfterViewInit=function(){this.checkbox=this.checkboxViewChild.nativeElement},e.prototype.getIconClass=function(){return"ui-button-icon-left ui-togglebutton-icon fa fa-fw "+(this.checked?this.onIcon:this.offIcon)},e.prototype.toggle=function(e){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:e,checked:this.checked}),this.checkbox.focus())},e.prototype.onFocus=function(){this.focus=!0},e.prototype.onBlur=function(){this.focus=!1,this.onModelTouched()},e.prototype.writeValue=function(e){this.checked=e},e.prototype.registerOnChange=function(e){this.onModelChange=e},e.prototype.registerOnTouched=function(e){this.onModelTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},Object.defineProperty(e.prototype,"hasOnLabel",{get:function(){return this.onLabel&&this.onLabel.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasOffLabel",{get:function(){return this.onLabel&&this.onLabel.length>0},enumerable:!0,configurable:!0}),i([r.Input(),o("design:type",String)],e.prototype,"onLabel",void 0),i([r.Input(),o("design:type",String)],e.prototype,"offLabel",void 0),i([r.Input(),o("design:type",String)],e.prototype,"onIcon",void 0),i([r.Input(),o("design:type",String)],e.prototype,"offIcon",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"disabled",void 0),i([r.Input(),o("design:type",Object)],e.prototype,"style",void 0),i([r.Input(),o("design:type",String)],e.prototype,"styleClass",void 0),i([r.Input(),o("design:type",String)],e.prototype,"inputId",void 0),i([r.Input(),o("design:type",Number)],e.prototype,"tabindex",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onChange",void 0),i([r.ViewChild("checkbox"),o("design:type",r.ElementRef)],e.prototype,"checkboxViewChild",void 0),i([r.Component({selector:"p-toggleButton",template:'\n        <div [ngClass]="{\'ui-button ui-togglebutton ui-widget ui-state-default ui-corner-all\': true, \'ui-button-text-only\': (!onIcon&&!offIcon), \n                \'ui-button-text-icon-left\': (onIcon&&offIcon&&hasOnLabel&&hasOffLabel), \'ui-button-icon-only\': (onIcon&&offIcon&&!hasOnLabel&&!hasOffLabel),\n                \'ui-state-active\': checked,\'ui-state-focus\':focus,\'ui-state-disabled\':disabled}" [ngStyle]="style" [class]="styleClass" \n                (click)="toggle($event)">\n            <div class="ui-helper-hidden-accessible">\n                <input #checkbox type="checkbox" [attr.id]="inputId" [checked]="checked" (focus)="onFocus()" (blur)="onBlur()" [attr.tabindex]="tabindex">\n            </div>\n            <span *ngIf="onIcon||offIcon" [class]="getIconClass()"></span>\n            <span class="ui-button-text ui-unselectable-text">{{checked ? hasOnLabel ? onLabel : \'ui-btn\' : hasOffLabel ? offLabel : \'ui-btn\'}}</span>\n        </div>\n    ',providers:[t.TOGGLEBUTTON_VALUE_ACCESSOR]})],e)}();t.ToggleButton=s,t.ToggleButtonModule=function(){return i([r.NgModule({imports:[a.CommonModule],exports:[s],declarations:[s]})],function(){})}()},UH8o:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("OGqM"),o=n("5ZBu");t.groupCombinator=function(e){var t=o.getter(e,!0),n=0;return function(o,r){o[e]=o[e]||{};var a=t(r),l=function(e){return(e=i.isPresent(e)&&e.getTime?e.getTime():e)+""}(a),s=o[e][l]||{__position:n++,aggregates:{},items:[],value:a};return s.items.push(r),o[e][l]=s,o}},t.expandAggregates=function(e){return void 0===e&&(e={}),Object.keys(e).forEach(function(t){var n=e[t];Object.keys(n).forEach(function(e){n[e]=n[e].result()})}),e},t.aggregatesCombinator=function(e){var t=e.map(function(e){var t=o.getter(e.field,!0),n=(e.aggregate||"").toLowerCase(),r=o.getter(n,!0);return function(o,a){var l=o[e.field]||{},s=r(l)||{average:function(){var e=0,t=0;return{calc:function(n){i.isNumeric(n)?(e+=n,t++):e=n},result:function(){return i.isNumeric(e)?e/t:e}}},count:function(){var e=0;return{calc:function(){return e++},result:function(){return e}}},max:function(){var e=Number.NEGATIVE_INFINITY;return{calc:function(t){(e=i.isNumeric(e)||i.isDate(e)?e:t)<t&&(i.isNumeric(t)||i.isDate(t))&&(e=t)},result:function(){return e}}},min:function(){var e=Number.POSITIVE_INFINITY;return{calc:function(t){(e=i.isNumeric(e)||i.isDate(e)?e:t)>t&&(i.isNumeric(t)||i.isDate(t))&&(e=t)},result:function(){return e}}},sum:function(){var e=0;return{calc:function(t){t=i.isPresent(t)?t:0,e+=t},result:function(){return e}}}}[n]();return s.calc(t(a)),l[e.aggregate]=s,o[e.field]=l,o}});return function(e,n){return t.reduce(function(e,t){return t(e,n)},e)}},t.concat=function(e,t){return e.push(t),e},t.map=function(e){return function(t){return function(n,i,o){return t(n,e(i,o))}}},t.filter=function(e){return function(t){return function(n,i){return e(i)?t(n,i):n}}},t.isTransformerResult=function(e){return i.isPresent(e.__value)};var r=function(e){return t.isTransformerResult(e)?e:{__value:e,reduced:!0}};t.take=function(e){return function(t){return function(n,i){return e-- >0?t(n,i):r(n)}}},t.takeWhile=function(e){return function(t){return function(n,i){return e(i)?t(n,i):r(n)}}},t.skip=function(e){return function(t){return function(n,i){return e--<=0?t(n,i):n}}},t.exec=function(e,n,i){for(var o=n,r=0,a=i.length;r<a;r++)if(o=e(o,i[r],r),t.isTransformerResult(o)){o=o.__value;break}return o}},YNws:function(e,t,n){"use strict";var i=n("TToO").__decorate,o=n("TToO").__metadata;Object.defineProperty(t,"__esModule",{value:!0});var r=n("WT6e"),a=n("Xjw4"),l=n("55Fp"),s=function(){function e(e,t,n){this.el=e,this.domHandler=t,this.zone=n,this.onDragStart=new r.EventEmitter,this.onDragEnd=new r.EventEmitter,this.onDrag=new r.EventEmitter}return e.prototype.ngAfterViewInit=function(){this.bindMouseListeners()},e.prototype.bindDragListener=function(){var e=this;this.dragListener||this.zone.runOutsideAngular(function(){e.dragListener=e.drag.bind(e),e.el.nativeElement.addEventListener("drag",e.dragListener)})},e.prototype.unbindDragListener=function(){var e=this;this.dragListener&&this.zone.runOutsideAngular(function(){e.el.nativeElement.removeEventListener("drag",e.dragListener),e.dragListener=null})},e.prototype.bindMouseListeners=function(){var e=this;this.mouseDownListener||this.mouseUpListener||this.zone.runOutsideAngular(function(){e.mouseDownListener=e.mousedown.bind(e),e.mouseUpListener=e.mouseup.bind(e),e.el.nativeElement.addEventListener("mousedown",e.mouseDownListener),e.el.nativeElement.addEventListener("mouseup",e.mouseUpListener)})},e.prototype.unbindMouseListeners=function(){var e=this;this.mouseDownListener&&this.mouseUpListener&&this.zone.runOutsideAngular(function(){e.el.nativeElement.removeEventListener("mousedown",e.mouseDownListener),e.el.nativeElement.removeEventListener("mouseup",e.mouseUpListener),e.mouseDownListener=null,e.mouseUpListener=null})},e.prototype.drag=function(e){this.onDrag.emit(e)},e.prototype.dragStart=function(e){this.allowDrag()?(this.dragEffect&&(e.dataTransfer.effectAllowed=this.dragEffect),e.dataTransfer.setData("text",this.scope),this.onDragStart.emit(e),this.bindDragListener()):e.preventDefault()},e.prototype.dragEnd=function(e){this.onDragEnd.emit(e),this.unbindDragListener()},e.prototype.mousedown=function(e){this.handle=e.target},e.prototype.mouseup=function(e){this.handle=null},e.prototype.allowDrag=function(){return!this.dragHandle||!this.handle||this.domHandler.matches(this.handle,this.dragHandle)},e.prototype.ngOnDestroy=function(){this.unbindDragListener(),this.unbindMouseListeners()},i([r.Input("pDraggable"),o("design:type",String)],e.prototype,"scope",void 0),i([r.Input(),o("design:type",String)],e.prototype,"dragEffect",void 0),i([r.Input(),o("design:type",String)],e.prototype,"dragHandle",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onDragStart",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onDragEnd",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onDrag",void 0),i([r.HostListener("dragstart",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"dragStart",null),i([r.HostListener("dragend",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"dragEnd",null),i([r.Directive({selector:"[pDraggable]",host:{"[draggable]":"true"},providers:[l.DomHandler]})],e)}();t.Draggable=s;var d=function(){function e(e,t,n){this.el=e,this.domHandler=t,this.zone=n,this.onDragEnter=new r.EventEmitter,this.onDragLeave=new r.EventEmitter,this.onDrop=new r.EventEmitter}return e.prototype.ngAfterViewInit=function(){this.bindDragOverListener()},e.prototype.bindDragOverListener=function(){var e=this;this.dragOverListener||this.zone.runOutsideAngular(function(){e.dragOverListener=e.dragOver.bind(e),e.el.nativeElement.addEventListener("dragover",e.dragOverListener)})},e.prototype.unbindDragOverListener=function(){var e=this;this.dragOverListener&&this.zone.runOutsideAngular(function(){e.el.nativeElement.removeEventListener("dragover",e.dragOverListener),e.dragOverListener=null})},e.prototype.dragOver=function(e){e.preventDefault()},e.prototype.drop=function(e){this.allowDrop(e)&&(e.preventDefault(),this.onDrop.emit(e))},e.prototype.dragEnter=function(e){e.preventDefault(),this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect),this.onDragEnter.emit(e)},e.prototype.dragLeave=function(e){e.preventDefault(),this.onDragLeave.emit(e)},e.prototype.allowDrop=function(e){var t=e.dataTransfer.getData("text");if("string"==typeof this.scope&&t==this.scope)return!0;if(this.scope instanceof Array)for(var n=0;n<this.scope.length;n++)if(t==this.scope[n])return!0;return!1},e.prototype.ngOnDestroy=function(){this.unbindDragOverListener()},i([r.Input("pDroppable"),o("design:type",Object)],e.prototype,"scope",void 0),i([r.Input(),o("design:type",String)],e.prototype,"dropEffect",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onDragEnter",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onDragLeave",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onDrop",void 0),i([r.HostListener("drop",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"drop",null),i([r.HostListener("dragenter",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"dragEnter",null),i([r.HostListener("dragleave",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"dragLeave",null),i([r.Directive({selector:"[pDroppable]",providers:[l.DomHandler]})],e)}();t.Droppable=d,t.DragDropModule=function(){return i([r.NgModule({imports:[a.CommonModule],exports:[s,d],declarations:[s,d]})],function(){})}()},bSSL:function(module,__webpack_exports__,__webpack_require__){"use strict";if(__webpack_require__.d(__webpack_exports__,"a",function(){return DayPilot}),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){function e(e){var t=DayPilot.Date.Cache.Ticks;if(t[e])return DayPilot.Stats.cacheHitsTicks+=1,t[e];var n,i=new Date(e),o=i.getUTCMilliseconds();n=0===o?"":o<10?".00"+o:o<100?".0"+o:"."+o;var r=i.getUTCSeconds();r<10&&(r="0"+r);var a=i.getUTCMinutes();a<10&&(a="0"+a);var l=i.getUTCHours();l<10&&(l="0"+l);var s=i.getUTCDate();s<10&&(s="0"+s);var d=i.getUTCMonth()+1;d<10&&(d="0"+d);var c=i.getUTCFullYear();if(c<=0)throw"The minimum year supported is 1.";c<10?c="000"+c:c<100?c="00"+c:c<1e3&&(c="0"+c);var u=c+"-"+d+"-"+s+"T"+l+":"+a+":"+r+n;return t[e]=u,u}function t(e,t){return!DayPilot.Util.isNullOrUndefined(e)&&!DayPilot.Util.isNullOrUndefined(t)&&e.toLocaleLowerCase()===t.toLocaleLowerCase()}function n(e){e=Math.min(e,255);var t=(e=Math.max(e,0)).toString(16);return e<16?"0"+t:t}if("undefined"==typeof DayPilot.$){DayPilot.$=function(e){return document.getElementById(e)},DayPilot.isKhtml=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("KHTML"),DayPilot.isIE=navigator&&navigator.userAgent&&(-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")),DayPilot.isIEQuirks=DayPilot.isIE&&document.compatMode&&"BackCompat"===document.compatMode,DayPilot.browser={},DayPilot.browser.ff=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Firefox"),DayPilot.browser.chrome=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Chrome"),DayPilot.browser.ie=DayPilot.isIE,DayPilot.browser.edge=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Edge"),DayPilot.browser.webkit=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("WebKit"),DayPilot.browser.hover=!window.matchMedia("(any-hover: none)").matches,DayPilot.browser.passiveEvents=!1,function(){try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){DayPilot.browser.passiveEvents=!0}}))}catch(e){}}(),DayPilot.libs={},DayPilot.libs.angularjs="object"==typeof angularjs,DayPilot.touch={},DayPilot.touch.start=window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",DayPilot.touch.move=window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",DayPilot.touch.end=window.navigator.msPointerEnabled?"MSPointerUp":"touchend",DayPilot.mo2=function(e,t){if("undefined"!=typeof t.offsetX){var n={x:t.offsetX+1,y:t.offsetY+1};if(!e)return n;for(var i=t.srcElement;i&&i!==e;)"SPAN"!==i.tagName&&(n.x+=i.offsetLeft,i.offsetTop>0&&(n.y+=i.offsetTop-i.scrollTop)),i=i.offsetParent;return i?n:null}if("undefined"!=typeof t.layerX){if(n={x:t.layerX,y:t.layerY,src:t.target},!e)return n;for(i=t.target;i&&"absolute"!==i.style.position&&"relative"!==i.style.position;)i=i.parentNode,DayPilot.isKhtml&&(n.y+=i.scrollTop);for(;i&&i!==e;)n.x+=i.offsetLeft,n.y+=i.offsetTop-i.scrollTop,i=i.offsetParent;return i?n:null}return null},DayPilot.mo3=function(e,t){var n,i=DayPilot.page(t);if(i)if(e){var o=DayPilot.abs(e);if(!o)throw new Error("no abs");n={x:i.x-o.x,y:i.y-o.y}}else n={x:i.x,y:i.y};else if(!(n=DayPilot.mo2(e,t)))return null;return n.shift=t.shiftKey,n.meta=t.metaKey,n.ctrl=t.ctrlKey,n.alt=t.altKey,n},DayPilot.mc=function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},DayPilot.Stats={},DayPilot.Stats.eventObjects=0,DayPilot.Stats.dateObjects=0,DayPilot.Stats.cacheHitsCtor=0,DayPilot.Stats.cacheHitsParsing=0,DayPilot.Stats.cacheHitsTicks=0,DayPilot.list=function(e,t){if(e&&e.isDayPilotList&&!t)return e;var n=DayPilot.isArray(e)||"[object NodeList]"===Object.prototype.toString.call(e),i=!n&&!DayPilot.Util.isNullOrUndefined(e),o=[];if(o.isDayPilotList=!0,o.clone=function(){var e=DayPilot.list();return o.forEach(function(t){e.push(t)}),e},o.each=function(e){if(e){if(o.forEach)return void o.forEach(e);for(var t=0;t<this.length;t++)e(o[t],t,o)}},o.addProps=function(e){var t=o.clone();if(e)for(var n in e)t[n]=e[n];return t},o.last=function(){return 0===o.length?null:o[o.length-1]},o.first=function(){return 0===o.length?null:o[0]},o.add=function(e){var t=o.clone();return t.push(e),t},o.map=function(e){if("function"!=typeof e)throw"DayPilot.list().map(f): Function expected";var t=DayPilot.list();return o.forEach(function(n,i,o){t.push(e(n,i,o))}),t},o.filter=function(e){var t=DayPilot.list();if("function"!=typeof e)throw"DayPilot.list().filter(f): Function expected";return o.forEach(function(n,i,o){e(n,i,o)&&t.push(n)}),t},o.concat=function(e){if(!e)return o;for(var t=o.clone(),n=0;n<e.length;n++)t.push(e[n]);return t},o.find||(o.find=function(e){if("function"!=typeof e)throw"DayPilot.list().find(f): Function expected";for(var t=0;t<this.length;t++)if(e(o[t]))return o[t]}),o.findIndex||(o.findIndex=function(e){if("function"!=typeof e)throw"DayPilot.list().findIndex(f): Function expected";for(var t=0;t<this.length;t++)if(e(o[t]))return t;return-1}),o.some||(o.some=function(e){if("function"!=typeof e)throw"DayPilot.list().some(f): Function expected";for(var t=0;t<this.length;t++)if(e(o[t]))return!0;return!1}),o.reduce||(o.reduce=function(e,t){if("function"!=typeof e)throw"DayPilot.list().reduce(f): Function expected";var n,i=0;if("undefined"!=typeof t)n=t;else{if(i=1,0===o.length)throw"DayPilot.list().reduce(f): No initial value and empty list";n=o[0]}for(var r=i;r<this.length;r++)n=e(n,o[r],r,this);return n}),o.isEmpty=function(){return 0===o.length},n)for(var r=0;r<e.length;r++)o[r]=e[r];else i&&(o[0]=e);return o},DayPilot.list.for=function(e,t){for(var n=DayPilot.list(),i=0;i<e;i++)n.push("function"==typeof t?t(i):i);return n},DayPilot.line=function(e,t,n,i,o){o=o||{};var r=t,a=n,l=i;if(DayPilot.deg(e,t,n,i),t<i){var s=t;t=i,i=s,s=e,e=n,n=s}var d=DayPilot.deg(e,t,n,i),c={x:e,y:t},u={x:n,y:i},h=function(){var o=Math.abs(e-n),r=Math.abs(t-i);return(e+n)/2-Math.sqrt(o*o+r*r)/2}(),p=(t+i)/2,f=DayPilot.distance(c,u),g=document.createElement("div");g.setAttribute("style","width:"+f+"px;height:0px;-moz-transform:rotate("+d+"deg);-webkit-transform:rotate("+d+"deg);-ms-transform:rotate("+d+"deg);transform:rotate("+d+"deg);position:absolute;top:"+p+"px;left:"+h+"px;"),o.cssClass&&(g.className=o.cssClass);var m=document.createElement("div");if(m.appendChild(g),o.arrow){var v,y=l-5,b=a-5;d=d,l>r&&(d-=180),(v=document.createElement("div")).style.borderColor="black",v.style.width="10px",v.style.height="10px",v.style.borderRadius="10px",v.style.position="absolute",v.style.left=b+"px",v.style.top=y+"px",o.cssClass?v.className=o.cssClass+"_circle":v.style.backgroundColor="black",m.appendChild(v)}return m},DayPilot.deg=function(e,t,n,i){var o,r=Math.abs(e-n),a=Math.abs(t-i),l=(e+n)/2,s=(t+i)/2,d=Math.sqrt(r*r+a*a),c=l-d/2,u=s;return r=d/2,o=Math.abs(l-c),a=Math.sqrt(Math.abs(e-c)*Math.abs(e-c)+Math.abs(t-u)*Math.abs(t-u)),180*Math.acos((a*a-r*r-o*o)/(2*r*o))/Math.PI},DayPilot.complete=function(e){return"complete"===document.readyState?void e():(DayPilot.complete.list||(DayPilot.complete.list=[],DayPilot.re(document,"readystatechange",function(){if("complete"===document.readyState){for(var e=0;e<DayPilot.complete.list.length;e++)(0,DayPilot.complete.list[e])();DayPilot.complete.list=[]}})),void DayPilot.complete.list.push(e))},DayPilot.page=function(e){var t=e.changedTouches&&e.changedTouches[0]?e.changedTouches[0]:e;return"undefined"==typeof t.pageX||DayPilot.browser.ie?"undefined"!=typeof e.clientX&&document.body&&document.documentElement?{x:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:e.clientY+document.body.scrollTop+document.documentElement.scrollTop}:null:{x:t.pageX,y:t.pageY}},DayPilot.rel=function(e,t){var n=DayPilot.abs(e),i=DayPilot.abs(t);return{x:n.x-i.x,y:n.y-i.y,w:e.offsetWidth,h:e.offsetHeight}},DayPilot.abs=function(e,t){if(!e)return null;if(e.getBoundingClientRect){var n=DayPilot.absBoundingClientBased(e);if(t){var i=DayPilot.absOffsetBased(e,!1);t=DayPilot.absOffsetBased(e,!0),n.x+=t.x-i.x,n.y+=t.y-i.y,n.w=t.w,n.h=t.h}return n}return DayPilot.absOffsetBased(e,t)},DayPilot.absBoundingClientBased=function(e){var t=e.getBoundingClientRect();return{x:t.left+window.pageXOffset,y:t.top+window.pageYOffset,w:e.clientWidth,h:e.clientHeight,toString:function(){return"x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h}}},DayPilot.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},DayPilot.absOffsetBased=function(e,t){for(var n={x:e.offsetLeft,y:e.offsetTop,w:e.clientWidth,h:e.clientHeight,toString:function(){return"x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h}};DayPilot.op(e);)e=DayPilot.op(e),n.x-=e.scrollLeft,n.y-=e.scrollTop,t&&(n.x<0&&(n.w+=n.x,n.x=0),n.y<0&&(n.h+=n.y,n.y=0),e.scrollLeft>0&&n.x+n.w>e.clientWidth&&(n.w-=n.x+n.w-e.clientWidth),e.scrollTop&&n.y+n.h>e.clientHeight&&(n.h-=n.y+n.h-e.clientHeight)),n.x+=e.offsetLeft,n.y+=e.offsetTop;var i=DayPilot.pageOffset();return n.x+=i.x,n.y+=i.y,n},DayPilot.wd=function(){var e=DayPilot.isIEQuirks,t=document.documentElement.clientHeight;e&&(t=document.body.clientHeight);var n=document.documentElement.clientWidth;e&&(n=document.body.clientWidth);var i=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft,r={};return r.width=n,r.height=t,r.scrollTop=i,r.scrollLeft=o,r},DayPilot.op=function(e){try{return e.offsetParent}catch(e){return document.body}},DayPilot.distance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},DayPilot.doc=function(){var e=document.documentElement;return e&&e.clientHeight?e:document.body},DayPilot.pageOffset=function(){if("undefined"!=typeof window.pageXOffset)return{x:window.pageXOffset,y:window.pageYOffset};var e=DayPilot.doc();return{x:e.scrollLeft,y:e.scrollTop}},DayPilot.ac=function(e,t){t||(t=[]);for(var n=0;e.children&&n<e.children.length;n++)t.push(e.children[n]),DayPilot.ac(e.children[n],t);return t},DayPilot.indexOf=function(e,t,n){if(!e||!e.length)return-1;for(var i=0;i<e.length;i++)if(n){if(n(e[i],t))return i}else if(e[i]===t)return i;return-1},DayPilot.contains=function(e,t){if(2!==arguments.length)throw new DayPilot.Exception("DayPilot.contains() requires two arguments.");return!!e&&(e===t&&!DayPilot.isArray(e)||-1!==DayPilot.indexOf(e,t))},DayPilot.rfa=function(e,t){var n=DayPilot.indexOf(e,t);-1!==n&&e.splice(n,1)},DayPilot.sheet=function(e){var t=(e=e||window.document).createElement("style");t.setAttribute("type","text/css"),t.styleSheet||t.appendChild(e.createTextNode("")),(e.head||e.getElementsByTagName("head")[0]).appendChild(t);var n=!!t.styleSheet,i={rules:[],commit:function(){try{n&&(t.styleSheet.cssText=this.rules.join("\n"))}catch(e){}},add:function(e,o,r){if(!n){if(t.sheet.insertRule)"undefined"==typeof r&&(r=t.sheet.cssRules.length),t.sheet.insertRule(e+"{"+o+"}",r);else{if(!t.sheet.addRule)throw"No CSS registration method found";t.sheet.addRule(e,o,r)}return i}this.rules.push(e+"{"+o+"}")}};return i},DayPilot.Args=function(e){var t=this;this.isArgs=!0,this.preventDefault=function(){e&&e.preventDefault(),t.preventDefault.value=!0}},DayPilot.Debug=function(e){var t=this;this.printToBrowserConsole=!1,this.enabled=!1,this.messages=[],this.target=null,this.c=null,this.clear=function(){this.messages=[],t.c&&(t.c.innerHTML="")},this.hide=function(){DayPilot.de(t.c),t.c=null},this.show=function(){t.c&&t.hide();var n=e.nav.top,i=document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.style.backgroundColor="black",i.style.color="#ccc",i.style.overflow="auto",i.style.webkitUserSelect="auto",i.style.MozUserSelect="all",i.onclick=function(){t.hide()};for(var o=0;o<this.messages.length;o++){var r=t.messages[o].f();i.appendChild(r)}this.c=i,n.appendChild(i)},this.log=function(){if(t.target){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);var i=e.join(" ");t.target.style.whiteSpace="pre",t.target.innerText+=i+"\n"}},this.message=function(e,t){if(this.enabled){var n={};n.time=new DayPilot.Date,n.level=t||"debug",n.text=DayPilot.Util.escapeHtml(e),n.f=function(){var e=document.createElement("div");switch(e.innerHTML=n.time+" ("+n.level+"): "+n.text,n.level){case"error":e.style.color="red";break;case"warning":e.style.color="orange";break;case"info":e.style.color="white"}return e},this.messages.push(n),this.printToBrowserConsole&&"undefined"!=typeof console&&console.log(n)}}},DayPilot.re=function(e,t,n){n&&e&&e.addEventListener(t,n,!1)},DayPilot.ue=function(e,t,n){e.removeEventListener(t,n,!1)},DayPilot.ds=function(e){return DayPilot.Date.toStringSortable(e)},DayPilot.gs=function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)||""},DayPilot.StyleReader=function(e){this.get=function(t){return e?DayPilot.gs(e,t):null},this.getPx=function(e){var t=this.get(e);return-1===t.indexOf("px")?void 0:parseInt(t,10)},this.getFont=function(){var e=this.get("font-weight"),t="italic"===this.get("font-style")?"italic":"";return{family:this.get("font-family"),size:this.get("font-size"),style:t+" "+e,asString:function(){return DayPilot.Util.fontString(this)}}},this.getBackColor=function(e){"undefined"==typeof e&&(e="white");var t=this.get("background-color");return DayPilot.Util.isTransparentColor(t)?e:t}},DayPilot.he=function(e){var t=e.replace(/&/g,"&amp;");return(t=(t=t.replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")},DayPilot.he2=function(e){var t=document.createTextNode(e),n=document.createElement("div");return n.appendChild(t),n.innerHTML},DayPilot.us=function(e){if(e){e.setAttribute("unselectable","on"),e.style.userSelect="none",e.style.MozUserSelect="none",e.style.KhtmlUserSelect="none",e.style.webkitUserSelect="none";for(var t=0;t<e.childNodes.length;t++)1===e.childNodes[t].nodeType&&DayPilot.us(e.childNodes[t])}},DayPilot.pu=function(e){var t,n,i,o=e.attributes;if(o)for(n=o.length,t=0;t<n;t+=1)o[t]&&"function"==typeof e[i=o[t].name]&&(e[i]=null);if(o=e.childNodes)for(n=o.length,t=0;t<n;t+=1)DayPilot.pu(e.childNodes[t])},DayPilot.puc=function(e){var t,n=e.childNodes;if(n){var i=n.length;for(t=0;t<i;t+=1)DayPilot.pu(e.childNodes[t])}},DayPilot.de=function(e){if(e)if(DayPilot.isArray(e))for(var t=0;t<e.length;t++)DayPilot.de(e[t]);else e.parentNode&&e.parentNode.removeChild(e)},DayPilot.fade=function(e,t,n){if(e){clearTimeout(e.messageTimeout);var i="none"!==e.style.display,o=t>0,r=t<0;if(0!==t){if(o?e.status="in":r&&(e.status="out"),o&&!i)e.target=parseFloat(e.style.opacity),e.opacity=0,e.style.opacity=0,e.style.display="";else if(r&&!e.target)e.target=e.style.opacity;else{var a=Math.floor(10*(e.opacity+t))/10;o&&a>e.target&&(a=e.target),r&&a<0&&(a=0),e.opacity=a,e.style.opacity=a}o&&(e.opacity>=e.target||e.opacity>=1)||r&&e.opacity<=0?(e.target=null,r&&(e.style.opacity=e.target,e.opacity=e.target,e.style.display="none"),n&&"function"==typeof n&&(e.status=null,n())):e.messageTimeout=setTimeout(function(){DayPilot.fade(e,t,n)},50)}}},DayPilot.sw=function(e){return e?e.offsetWidth-e.clientWidth:0},DayPilot.swa=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px",e.style.width="200px",e.style.height="100px",e.style.overflow="auto";var t=document.createElement("div");t.style.width="300px",t.style.height="300px",e.appendChild(t),document.body.appendChild(e);var n=DayPilot.sw(e);return document.body.removeChild(e),n},DayPilot.sh=function(e){return e?e.offsetHeight-e.clientHeight:0},DayPilot.guid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},DayPilot.ua=function(e){if(!DayPilot.isArray(e))throw new DayPilot.Exception("DayPilot.ua() - array required");var t=[];return e.forEach(function(e){DayPilot.contains(t,e)||t.push(e)}),t},DayPilot.am=function(){return"undefined"==typeof angular?null:(DayPilot.am.cached||(DayPilot.am.cached=angular.module("daypilot",[])),DayPilot.am.cached)},DayPilot.pop=function(e,t){var n={w:e.offsetWidth,h:e.offsetHeight,x:parseInt(e.style.left),y:parseInt(e.style.top)};n.height=e.style.height,n.width=e.style.width,n.top=e.style.top,n.left=e.style.left,n.toString=function(){return"w: "+this.w+" h:"+this.h};var i={finished:null,vertical:"center",horizontal:"center"};if(t)for(var o in t)i[o]=t[o];e.style.visibility="hidden",e.style.display="";var r=function(e){var t={fast:function(){var e=[];e.time=10;for(var t=.1;t<=1;t+=.08)e.push(t);return e},slow:function(){var e=[];e.time=10;for(var t=.1;t<=1;t+=.04)e.push(t);return e},jump:function(){var e=[];e.time=10;for(var t,n=.08,i=t=.1;i<1.2;i+=n)e.push(i),t=i;for(n=.03,i=t;i>.8;i-=n)e.push(i),t=i;for(i=t;i<=1;i+=n)e.push(i),t=i;return e}};return t[e]||(e="fast"),t[e]()}(t.animation||"fast");r.div=e,r.i=0,r.target=n,r.config=i,function e(t){var n,i=t.div,o=t[t.i],r=o*t.target.h;switch(t.config.vertical){case"center":n=t.target.y-(r-t.target.h)/2;break;case"top":n=t.target.y;break;case"bottom":n=t.target.y-(r-t.target.h);break;default:throw"Unexpected 'vertical' value."}var a,l=o*t.target.w;switch(t.config.horizontal){case"left":a=t.target.x;break;case"center":a=t.target.x-(l-t.target.w)/2;break;case"right":a=t.target.x-(l-t.target.w);break;default:throw"Unexpected 'horizontal' value."}i.style.height=r+"px",i.style.top=n+"px",i.style.width=l+"px",i.style.left=a+"px",i.style.visibility="visible",t.i++,t.i<t.length-1?setTimeout(function(t){return function(){e(t)}}(t),t.time):(i.style.width=t.target.width,i.style.height=t.target.height,i.style.top=t.target.top,i.style.left=t.target.left,"function"==typeof t.config.finished&&t.config.finished())}(r)},DayPilot.Util={},DayPilot.Util.addClass=function(e,t){if(t&&e)if(DayPilot.isArray(e))for(var n=0;n<e.length;n++)DayPilot.Util.addClass(e[n],t);else{if(!e.className)return void(e.className=t);new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)||(e.className=e.className+" "+t)}},DayPilot.Util.normalizeColor=function(e){return 0===e.indexOf("rgb")?function(e){return"#"+((1<<24)+(+(e=e.replace(/[^\d,]/g,"").split(","))[0]<<16)+(+e[1]<<8)+ +e[2]).toString(16).slice(1)}(e):e},DayPilot.Util.addClassToString=function(e,t){return e?new RegExp("(^|\\s)"+t+"($|\\s)").test(e)?e:e+" "+t:t},DayPilot.Util.removeClassFromString=function(e,t){if(!e)return"";var n=new RegExp("(^|\\s)"+t+"($|\\s)");return e.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},DayPilot.Util.removeClass=function(e,t){if(e)if(DayPilot.isArray(e))for(var n=0;n<e.length;n++)DayPilot.Util.removeClass(e[n],t);else if(e.className){var i=new RegExp("(^|\\s)"+t+"($|\\s)");e.className=e.className.replace(i," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}},DayPilot.Util.props=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t.join("-")},DayPilot.Util.propArray=function(e,t,n){return DayPilot.list(e).map(function(e){return e[t]?e[t]:n})},DayPilot.Util.updatePropsFromArray=function(e,t,n){for(var i=0;i<n.length;i++)e[i][t]=n[i]},DayPilot.Util.copyProps=function(e,t,n){if(t||(t={}),!e)return t;if("undefined"==typeof n)for(var i in e)e.hasOwnProperty(i)&&"undefined"!=typeof e[i]&&(t[i]=e[i]);else for(var o=0;o<n.length;o++)"undefined"!=typeof e[i=n[o]]&&(t[i]=e[i]);return t},DayPilot.Util.ownPropsAsArray=function(e){var t=[];if(!e)return t;for(var n in e)if(e.hasOwnProperty(n)){var i={};i.key=n,i.val=e[n],t.push(i)}return t},DayPilot.Util.firstPropValue=function(e){for(var t in e)return e[t]},DayPilot.Util.isOnlyProperty=function(e,t){if(!e)return!1;for(var n in e)if(e.hasOwnProperty(n)&&n!==t)return!1;return!0},DayPilot.Util.createArrayCopy=function(e,t){if(!DayPilot.isArray(e))return[];for(var n=[],i=0;i<e.length;i++){var o={};DayPilot.Util.copyProps(e[i],o,t),n.push(o)}return n},DayPilot.Util.atLeast=function(e,t){return Math.max(e,t)},DayPilot.Util.avg=function(e,t){return(e+t)/2},DayPilot.Util.div=function(e,t,n,i,o){var r=document.createElement("div");return(t||n||i||o)&&(i<0&&(t+=i,i*=-1),o<0&&(n+=o,o*=-1),r.style.position="absolute","number"==typeof t?r.style.left=t+"px":"string"==typeof t&&(r.style.left=t),"number"==typeof n?r.style.top=n+"px":"string"==typeof n&&(r.style.top=n),"number"==typeof i?r.style.width=i+"px":"string"==typeof i&&(r.style.width=i),"number"==typeof o?r.style.height=o+"px":"string"==typeof o&&(r.style.height=o)),e&&e.appendChild(r),r},DayPilot.Util.overlaps=function(e,t,n,i){return!(t<=n||e>=i)},DayPilot.Util.isMouseEvent=function(e){return!(!navigator.msPointerEnabled||!e.pointerType||"mouse"!==e.pointerType&&4!==e.pointerType)},DayPilot.Util.mouseButton=function(e){var t={};switch(e.button){case 0:t.left=!0;break;case 1:t.middle=!0;break;case 2:t.right=!0}return t},DayPilot.Util.membersPlain=function(e){var t=DayPilot.Util.members(e,2),n=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.name;n.obsolete&&(i+=" (obsolete)"),n.noCssOnly&&(i+=" (!cssOnly)"),n.aspnet&&(i+=" (ASP.NET)"),n.mvc&&(i+="(MVC)"),e[t]=i}};return n(t.events),n(t.methods),n(t.properties),t},DayPilot.Util.shouldApply=function(e){if(!e)return!1;var t=e.toLowerCase();return!(t.indexOf("before")>=0||t.indexOf("after")>=0||"onrowfilter"===t||"oneventfilter"===t)},DayPilot.Util.safeApply=function(e,t){var n=e.$root.$$phase;"$apply"===n||"$digest"===n?e.$eval(t):e.$apply(t)},DayPilot.Util.members=function(e,t){var n=DayPilot.list(),i=DayPilot.list(),o=DayPilot.list(),r=e&&e.members?e.members.obsolete:[],a=e&&e.members?e.members.noCssOnly:[],l=e&&e.members?e.members.ignore:[],s=e&&e.members&&e.members.ignoreFilter?e.members.ignoreFilter:function(){return!1};for(var d in e)if(0!==d.indexOf("$")&&0!==d.indexOf("_")&&0!==d.indexOf("number")&&0!==d.indexOf("is")&&"v"!==d&&!DayPilot.contains(l,d)&&!s(d))if(0!==d.indexOf("on"))if("function"!=typeof e[d])if("object"!=typeof e[d])o.push(d);else{var c=e[d];if(0===t){o.push(d);continue}if(c&&c.nodeType>0){o.push(d);continue}if(c instanceof DayPilot.Bubble){o.push(d);continue}if(c instanceof DayPilot.Date){o.push(d);continue}if(c instanceof DayPilot.Menu){o.push(d);continue}if(c instanceof DayPilot.Scheduler){o.push(d);continue}if(DayPilot.isArray(c)){o.push(d);continue}null===c&&o.push(d);var u=null;"number"==typeof t&&(u=t-1);for(var h=DayPilot.Util.members(c,u),p=0;p<h.events.length;p++)n.push(d+"."+h.events[p].name);for(p=0;p<h.methods.length;p++)i.push(d+"."+h.methods[p].name);for(p=0;p<h.properties.length;p++)o.push(d+"."+h.properties[p].name)}else i.push(d);else n.push(d);n.sort(),i.sort(),o.sort();var f=function(e){for(var t=0;t<e.length;t++){var n=e[t],i={};i.name=n,e[t]=i,DayPilot.contains(r,n)&&(i.obsolete=!0),DayPilot.contains(a,n)&&(i.noCssOnly=!0),-1!==n.indexOf("CallBack")&&(i.aspnet=!0,i.mvc=!0),-1!==n.indexOf("PostBack")&&(i.aspnet=!0),-1!==n.indexOf("Notify")&&(i.aspnet=!0,i.mvc=!0)}};return f(n),f(i),f(o),{events:n,methods:i,properties:o}},DayPilot.Util.replaceCharAt=function(e,t,n){return e.substr(0,t)+n+e.substr(t+n.length)},DayPilot.Util.evalVariable=function(e,t){if(t=t||["object"],null===e||"undefined"==typeof e)return null;if(-1!==DayPilot.indexOf(t,typeof e))return e;if("string"!=typeof e)throw"Unable to resolve a variable name (not a string).";if(!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e))throw"Invalid variable name: "+e;return eval(e)},DayPilot.Util.evalFunction=function(e){if(null===e)return null;if("function"==typeof e)return e;if("string"!=typeof e)throw"Unable to resolve a function (not a string).";if(!/^\(?function/.test(e))throw"Invalid function string";return eval("("+e+")")},DayPilot.Util.isNullOrUndefined=function(e){return null===e||"undefined"==typeof e},DayPilot.Util.log=function(e){window.console&&window.console.log&&window.console.log(e)},DayPilot.Util.workerFrom=function(e){var t=e.toString(),n=t.slice(t.indexOf("{")+1,t.lastIndexOf("}")),i=new Blob([n]),o=window.URL.createObjectURL(i);return new Worker(o)},DayPilot.Util.dataUriToBlob=function(e){if("string"!=typeof e)throw"DayPilot.Util.dataUriToBlob(): dataURI string expected";for(var t=e.split(","),n=t[0],i=t[1],o=-1!==n.indexOf("base64")?atob:decodeURI,r=n.split(":")[1].split(";")[0],a=o(i),l=new window.Uint8Array(a.length),s=0;s<a.length;s++)l[s]=a.charCodeAt(s);return new Blob([l],{type:r})},DayPilot.Util.downloadDataUri=function(e,t){var n=DayPilot.Util.dataUriToBlob(e);DayPilot.Util.downloadBlob(n,t)},DayPilot.Util.downloadBlob=function(e,t){if(t=t||"download",window.navigator.msSaveBlob)window.navigator.msSaveBlob(e,t);else{var n=window.URL.createObjectURL(e),i=document.createElement("a");i.download=t,i.href=n,i.style.display="none",document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(n)})}},DayPilot.Util.monitor=function(e,t,n){var i=e[t];e[t]=function(){n.apply(e,arguments),i.apply(e,arguments)}},DayPilot.Util.isTransparentColor=function(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e},DayPilot.Util.stripTags=function(e){if(DayPilot.Util.isNullOrUndefined(e))return e;if("string"==typeof e)return e.replace(/<(?:.|\n)*?>/gm,"");throw new DayPilot.Exception("Unable to strip tags from a non-string")},DayPilot.Util.escapeHtml=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML},DayPilot.Util.escapeTextHtml=function(e,t){return DayPilot.Util.isNullOrUndefined(t)?DayPilot.Util.isNullOrUndefined(e)?"":DayPilot.Util.escapeHtml(e):t},DayPilot.Util.isSameEvent=function(e,t){return!(!e||!t||(e=e instanceof DayPilot.Event?e.data:e)!==(t=t instanceof DayPilot.Event?t.data:t)&&(DayPilot.Util.isNullOrUndefined(e.id)||e.id!==t.id)&&(!DayPilot.Util.isNullOrUndefined(e.id)||DayPilot.Util.isNullOrUndefined(e.recurrentMasterId)||e.recurrentMasterId!==t.recurrentMasterId||new DayPilot.Date(e.start)!==new DayPilot.Date(t.start)))},DayPilot.Util.isReactComponent=function(e){return e&&e.$$typeof===("function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)},DayPilot.Util.fontString=function(e){return(e.style+" "+e.size+" "+e.family).trim()},DayPilot.Util.fontHeight=function(e){var t=DayPilot.Util.fontString(e);if("number"!=typeof DayPilot.Util.fontHeight.cache[t]){var n=document.createElement("div");n.style.position="fixed",n.style.left="-2000px;",n.style.top="-2000px",n.style.padding="0px",n.style.font=t,n.innerText="X",document.body.appendChild(n),DayPilot.Util.fontHeight.cache[t]=new DayPilot.StyleReader(n).getPx("height"),document.body.removeChild(n)}return DayPilot.Util.fontHeight.cache[t]},DayPilot.Util.fontHeight.cache={},DayPilot.Areas={},DayPilot.Areas.attach=function(e,t,n){var o=(n=n||{}).areas,r=n.allowed||function(){return!0},a=n.offsetX||0;(o=i(t,o))&&DayPilot.isArray(o)&&0!==o.length&&(DayPilot.re(e,"mousemove",function(i){e.active||e.areasDisabled||!r()||DayPilot.Areas.showAreas(e,t,i,o,{offsetX:a,eventDiv:n.eventDiv})}),DayPilot.re(e,"mouseleave",function(t){DayPilot.Areas.hideAreas(e,t)}),DayPilot.list(o).forEach(function(i){if(DayPilot.Areas.isVisible(i)){var o=DayPilot.Areas.createArea(e,t,i,{offsetX:a,eventDiv:n.eventDiv});e.appendChild(o)}}))},DayPilot.Areas.disable=function(e){e.areasDisabled=!0,DayPilot.list(e.childNodes).filter(function(e){return e.isActiveArea&&!e.area.start}).forEach(function(e){e.style.display="none"})},DayPilot.Areas.enable=function(e){e.areasDisabled=!1,DayPilot.list(e.childNodes).filter(function(e){return e.isActiveArea&&!e.area.start}).forEach(function(e){e.style.display=""})},DayPilot.Areas.remove=function(e){var t=DayPilot.list(e.childNodes).filter(function(e){return e.isActiveArea});DayPilot.de(t)},DayPilot.Areas.isVisible=function(e){var t=e.visibility||e.v||"Visible";return"Visible"===t||"TouchVisible"===t&&!DayPilot.browser.hover},DayPilot.Areas.copy=function(e){return DayPilot.isArray(e)?e.map(function(e){return DayPilot.Util.copyProps(e,{})}):[]},DayPilot.Areas.resolvePosition=function(e,t,n,i){var o=DayPilot.Areas.copy(e),r=t;return o.forEach(function(e){e.start&&(e.left=r.getPixels(new DayPilot.Date(e.start)).left-n),"number"==typeof e.offsetX&&(e.left+=e.offsetX),e.end&&(e.right=n+i-r.getPixels(new DayPilot.Date(e.end)).left)}),o};var i=function(e,t){return DayPilot.isArray(t)||(t=e.areas)||(e.cache?t=e.cache.areas:e.data&&(t=e.data.areas)),t};DayPilot.Areas.showAreas=function(e,t,n,i,o){if(!DayPilot.Global.resizing&&!DayPilot.Global.moving&&!DayPilot.Global.selecting&&!e.active&&DayPilot.browser.hover){if(DayPilot.Areas.all&&DayPilot.Areas.all.length>0)for(var r=0;r<DayPilot.Areas.all.length;r++){var a=DayPilot.Areas.all[r];a!==e&&DayPilot.Areas.hideAreas(a,n)}if(e.active={},DayPilot.isArray(i)||(i=t.areas)||(t.cache?i=t.cache.areas:t.data&&(i=t.data.areas)),i&&0!==i.length&&!(e.areas&&e.areas.length>0)){for(e.areas=[],r=0;r<i.length;r++){var l=i[r];if(!DayPilot.Areas.isVisible(l)){var s=DayPilot.Areas.createArea(e,t,l,o);e.areas.push(s),e.appendChild(s),DayPilot.Areas.all.push(e)}}e.active.children=DayPilot.ac(e)}}},DayPilot.Areas.createArea=function(e,t,n,i){function o(e,t,n){var i={};return i.area=e,i.source=t,i.originalEvent=n,i.preventDefault=function(){i.preventDefault.value=!0},"function"==typeof e.onClick&&e.onClick(i),i}function r(e,t,n,i){DayPilot.Menu&&DayPilot.Menu.touchPosition(i);var o=n.contextMenu||n.menu;o instanceof DayPilot.Menu||("string"==typeof o?o=DayPilot.Util.evalVariable(o):t.isEvent&&t.client.contextMenu()?o=t.client.contextMenu():t.isEvent&&t.calendar.contextMenu?o=DayPilot.Util.evalVariable(t.calendar.contextMenu):t.isRow&&t.calendar.contextMenuResource&&(o=DayPilot.Util.evalVariable(t.calendar.contextMenuResource))),o&&o.show&&o.show(t,{initiator:{type:"area",div:e,e:t,area:n,a:s}})}var a=(i=i||{}).offsetX||0,l=i.eventDiv||e,s=document.createElement("div");s.isActiveArea=!0,s.area=n,s.setAttribute("unselectable","on");var d=n.w||n.width,c=n.h||n.height,u=n.cssClass||n.css||n.className;if("undefined"!=typeof n.style&&s.setAttribute("style",n.style),s.style.position="absolute","undefined"!=typeof d&&(s.style.width=d+"px"),"undefined"!=typeof c&&(s.style.height=c+"px"),"undefined"!=typeof n.right&&(s.style.right=n.right+"px"),"undefined"!=typeof n.top&&(s.style.top=n.top+"px"),"undefined"!=typeof n.left&&(s.style.left=n.left+a+"px"),"undefined"!=typeof n.bottom&&(s.style.bottom=n.bottom+"px"),"undefined"!=typeof n.html||"undefined"!=typeof n.text)s.innerHTML=DayPilot.Util.escapeTextHtml(n.text,n.html);else if(n.icon){var h=document.createElement("i");h.className=n.icon,s.appendChild(h)}else if(n.image){var p=document.createElement("img");p.src=n.image,s.appendChild(p)}else if(n.symbol){var f="http://www.w3.org/2000/svg",g=document.createElementNS(f,"svg");g.setAttribute("width","100%"),g.setAttribute("height","100%");var m=document.createElementNS(f,"use");m.setAttribute("href",n.symbol),g.appendChild(m),s.appendChild(g)}if(u&&(s.className=u),n.toolTip&&s.setAttribute("title",n.toolTip),n.backColor&&(s.style.background=n.backColor),n.background&&(s.style.background=n.background),n.fontColor&&(s.style.color=n.fontColor),n.padding&&(s.style.padding=n.padding+"px",s.style.boxSizing="border-box"),n.verticalAlignment)switch(s.style.display="flex",n.verticalAlignment){case"center":s.style.alignItems="center";break;case"top":s.style.alignItems="flex-start";break;case"bottom":s.style.alignItems="flex-end"}if(n.horizontalAlignment)switch(s.style.display="flex",n.horizontalAlignment){case"right":s.style.justifyContent="flex-end";break;case"left":s.style.justifyContent="flex-start";break;case"center":s.style.justifyContent="center"}if("ResizeEnd"===n.action||"ResizeStart"===n.action||"Move"===n.action){if(t.calendar.isCalendar)switch(n.action){case"ResizeEnd":n.cursor="s-resize",n.dpBorder="bottom";break;case"ResizeStart":n.cursor="n-resize",n.dpBorder="top";break;case"Move":n.cursor="move"}if(t.calendar.isScheduler||t.calendar.isMonth)switch(n.action){case"ResizeEnd":n.cursor="e-resize",n.dpBorder="right";break;case"ResizeStart":n.cursor="w-resize",n.dpBorder="left";break;case"Move":n.cursor="move"}s.onmousemove=function(e,t,n){return function(i){t.calendar.internal&&t.calendar.internal.dragInProgress&&t.calendar.internal.dragInProgress()||(i.cancelBubble=!0,e.style.cursor=n.cursor,n.dpBorder&&(e.dpBorder=n.dpBorder))}}(l,t,n),s.onmouseout=function(e,t,n){return function(t){e.style.cursor=""}}(l)}if(("ResizeEnd"===n.action||"ResizeStart"===n.action)&&t.isEvent&&t.calendar.internal.touch){var v=function(e,t,n){return function(i){i.cancelBubble=!0;var o=t.calendar.internal.touch,r=i.touches?i.touches[0]:i,a={x:r.pageX,y:r.pageY};t.calendar.coords=o.relativeCoords(i),o.preventEventTap=!0,t.calendar.isScheduler?o.startResizing(e,"ResizeEnd"===n.action?"right":"left"):t.calendar.isCalendar&&o.startResizing(e,"ResizeEnd"===n.action?"bottom":"top",a)}}(l,t,n);DayPilot.re(s,DayPilot.touch.start,v)}if("ContextMenu"===n.action&&t.isEvent&&t.calendar.internal.touch){v=function(e,t,n){return function(i){i.cancelBubble=!0,i.preventDefault(),r(e,t,n,i),t.calendar.internal.touch.preventEventTap=!0}}(l,t,n);var y=function(e){e.cancelBubble=!0,e.preventDefault()};DayPilot.re(s,DayPilot.touch.start,v),DayPilot.re(s,DayPilot.touch.end,y)}return"Bubble"===n.action&&t.isEvent&&t.calendar.internal.touch&&(v=function(e,t,n){return function(e){e.cancelBubble=!0,e.preventDefault();var i=o(n,t,e);i.preventDefault.value||(function(e,t,n){DayPilot.Bubble&&DayPilot.Bubble.touchPosition(n),e.calendar.bubble&&e.calendar.bubble.showEvent(e,!0)}(t,0,e),t.calendar.internal.touch.preventEventTap=!0,"function"==typeof n.onClicked&&n.onClicked(i))}}(0,t,n),y=function(e){e.cancelBubble=!0,e.preventDefault()},DayPilot.re(s,DayPilot.touch.start,v),DayPilot.re(s,DayPilot.touch.end,y)),"Move"===n.action&&t.isEvent&&t.calendar.internal.touch&&(v=function(e,t,n){return function(n){n.cancelBubble=!0;var i=t.calendar.internal.touch,o=n.touches?n.touches[0]:n,r={x:o.pageX,y:o.pageY};t.calendar.coords=i.relativeCoords(n),DayPilot.Global&&DayPilot.Global.touch&&(DayPilot.Global.touch.active=!0),i.preventEventTap=!0,i.startMoving(e,r)}}(l,t),DayPilot.re(s,DayPilot.touch.start,v)),"Bubble"===n.action&&t.isEvent&&(s.onmousemove=function(e,t,n){return function(e){n.bubble?n.bubble.showEvent(t,!0):t.calendar.bubble&&t.calendar.bubble.showEvent(t,!0)}}(0,t,n),s.onmouseout=function(e,t,n){return function(e){"undefined"!=typeof DayPilot.Bubble&&(n.bubble?n.bubble.hideOnMouseOut():t.calendar.bubble&&t.calendar.bubble.hideOnMouseOut())}}(0,t,n)),"Bubble"===n.action&&t.isRow&&(s.onmousemove=function(e,t,n){return function(e){n.bubble?n.bubble.showResource(t,!0):t.calendar.resourceBubble&&t.calendar.resourceBubble.showResource(t,!0)}}(0,t,n),s.onmouseout=function(e,t,n){return function(e){"undefined"!=typeof DayPilot.Bubble&&(n.bubble?n.bubble.hideOnMouseOut():t.calendar.resourceBubble&&t.calendar.resourceBubble.hideOnMouseOut())}}(0,t,n)),"HoverMenu"===n.action&&(s.onmousemove=function(e,t,n){return function(e){var i=n.menu;"string"==typeof i&&(i=DayPilot.Util.evalVariable(i)),i&&i.show&&(i.visible?i.source&&"undefined"!=typeof i.source.id&&i.source.id!==t.id&&i.show(t):i.show(t),i.cancelHideTimeout())}}(0,t,n),s.onmouseout=function(e,t,n){return function(e){var t=n.menu;"string"==typeof t&&(t=DayPilot.Util.evalVariable(t)),t&&t.hideOnMouseOver&&t.delayedHide()}}(0,0,n)),"JavaScript"===n.action&&(v=function(e,t,n){return function(e){DayPilot.Util.isMouseEvent(e)||(e.cancelBubble=!0,e.preventDefault(),t.calendar.internal.touch.start=!0)}}(0,t),y=function(e,t,n){return function(e){if(!DayPilot.Util.isMouseEvent(e)){e.cancelBubble=!0,e.preventDefault(),t.calendar.internal.touch.start=!1;var i=n.js;"string"==typeof i&&(i=DayPilot.Util.evalFunction(n.js)),"function"==typeof i&&i.call(this,n.target||t)}}}(0,t,n),DayPilot.re(s,DayPilot.touch.start,v),DayPilot.re(s,DayPilot.touch.end,y)),"None"===n.action&&(v=function(e,t,n){return function(e){var i=o(n,t,e);"function"==typeof n.onClicked&&n.onClicked(i),e.preventDefault(),e.stopPropagation()}}(0,t,n),DayPilot.re(s,DayPilot.touch.start,v)),s.onmousedown=function(e,t,n){return function(i){if("function"==typeof n.onmousedown&&n.onmousedown(i),"function"==typeof n.mousedown){var o={};o.area=n,o.div=e,o.originalEvent=i,o.source=t,n.mousedown(o)}"Move"===n.action&&t.isRow&&(0,t.calendar.internal.rowStartMoving)(t.$.row),"undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),"Move"===n.action&&(DayPilot.Global.movingAreaData=n.data),"Move"===n.action&&t.isEvent&&t.calendar.internal&&t.calendar.internal.startMoving&&t.calendar.internal.startMoving(e,i),"Move"!==n.action&&"ResizeEnd"!==n.action&&"ResizeStart"!==n.action&&n.action&&"Default"!==n.action&&(i.preventDefault(),i.cancelBubble=!0)}}(e,t,n),s.onclick=function(e,t,n){return function(i){var a=o(n,t,i);if(!a.preventDefault.value){switch(n.action){case"JavaScript":var l=n.js;"string"==typeof l&&(l=DayPilot.Util.evalFunction(n.js)),"function"==typeof l&&l.call(this,n.target||t),i.cancelBubble=!0;break;case"ContextMenu":r(e,t,n,i),i.cancelBubble=!0;break;case"CallBack":alert("callback not implemented yet, id: "+n.id),i.cancelBubble=!0;break;case"None":i.cancelBubble=!0}"function"==typeof n.onClicked&&n.onClicked(a)}}}(e,t,n),"function"==typeof n.onMouseEnter&&s.addEventListener("mouseenter",function(e,t,n){return function(e){var i={};i.area=n,i.source=t,i.originalEvent=e,n.onMouseEnter(i)}}(0,t,n)),"function"==typeof n.onMouseLeave&&s.addEventListener("mouseleave",function(e,t,n){return function(e){var i={};i.area=n,i.source=t,i.originalEvent=e,n.onMouseLeave(i)}}(0,t,n)),s},DayPilot.Areas.all=[],DayPilot.Areas.hideAreas=function(e,t){if(e&&e&&e.active){var n=e.active,i=e.areas;if(n&&n.children&&t&&~DayPilot.indexOf(n.children,t.toElement||t.relatedTarget))return;if(!i||0===i.length)return void(e.active=null);DayPilot.de(i),e.active=null,e.areas=[],DayPilot.rfa(DayPilot.Areas.all,e),n.children=null}},DayPilot.Areas.hideAll=function(e){if(DayPilot.Areas.all&&0!==DayPilot.Areas.all.length)for(var t=0;t<DayPilot.Areas.all.length;t++)DayPilot.Areas.hideAreas(DayPilot.Areas.all[t],e)},DayPilot.Action=function(e,t,n,i){var o=this;this.calendar=e,this.isAction=!0,this.action=t,this.params=n,this.data=i,this.notify=function(){o.calendar.internal.invokeEvent("Immediate",this.action,this.params,this.data)},this.auto=function(){o.calendar.internal.invokeEvent("Notify",this.action,this.params,this.data)},this.queue=function(){o.calendar.queue.add(this)},this.toJSON=function(){var e={};return e.name=this.action,e.params=this.params,e.data=this.data,e}},DayPilot.Selection=function(e,t,n,i){this.menuType="selection",this.start=new DayPilot.Date(e),this.end=new DayPilot.Date(t),this.resource=n,this.root=i,this.calendar=i,this.toJSON=function(e){var t={};return t.start=this.start,t.end=this.end,t.resource=this.resource,t}},DayPilot.Link=function(e,t){this.isLink=!0,this.data=e,this.calendar=t,this.to=function(){return this.data.to},this.from=function(){return this.data.from},this.type=function(){return this.data.type},this.id=function(){return this.data.id},this.toJSON=function(){var e={};return e.from=this.data.from,e.to=this.data.to,e.id=this.data.id,e.type=this.data.type,e}},DayPilot.Event=function(e,t,n){var i=this;this.calendar=t,this.data=e||{},this.part=n||{},"undefined"==typeof this.data.id&&(this.data.id=this.data.value);var o={},r=["id","text","start","end","resource"];this.isEvent=!0,DayPilot.Stats.eventObjects+=1,this.temp=function(){if(o.dirty)return o;for(var e=0;e<r.length;e++)o[r[e]]=i.data[r[e]];return o.dirty=!0,o},this.copy=function(){var e={};return DayPilot.Util.copyProps(i.data,e),e},this.commit=function(){if(o.dirty){for(var e=0;e<r.length;e++)i.data[r[e]]=o[r[e]];"function"==typeof i.data.commitCallback&&i.data.commitCallback(),o.dirty=!1}},this.dirty=function(){return o.dirty},this.id=function(e){return"undefined"==typeof e?i.data.id:void(this.temp().id=e)},this.value=function(e){return"undefined"==typeof e?i.id():void i.id(e)},this.text=function(e){if("undefined"==typeof e)return i.data.text;this.temp().text=e;var t=DayPilot.Util.escapeHtml(e);this.client.innerHTML(t)},this.start=function(e){return"undefined"==typeof e?new DayPilot.Date(i.data.start):void(this.temp().start=new DayPilot.Date(e))},this.end=function(e){return"undefined"==typeof e?t&&t.internal.adjustEndNormalize?t.internal.adjustEndNormalize(new DayPilot.Date(i.data.end)):new DayPilot.Date(i.data.end):void(this.temp().end=new DayPilot.Date(e))},this.duration=function(){return new DayPilot.Duration(this.start(),this.end())},this.rawend=function(e){if("undefined"==typeof e)return t&&t.internal.adjustEndIn?t.internal.adjustEndIn(new DayPilot.Date(i.data.end)):new DayPilot.Date(i.data.end);throw new DayPilot.Exception("DayPilot.Event.rawend() is readonly")},this.partStart=function(){return new DayPilot.Date(this.part.start)},this.partEnd=function(){return new DayPilot.Date(this.part.end)},this.row=function(){return this.resource()},this.allday=function(){return"undefined"==typeof val?i.data.allday:void(this.temp().allday=val)},this.isAllDay=this.allday,this.resource=function(e){return"undefined"==typeof e?i.data.resource:void(this.temp().resource=e)},this.recurrent=function(){return i.data.recurrent},this.recurrentMasterId=function(){return i.data.recurrentMasterId},this.useBox=function(){return this.part.box},this.staticBubbleHTML=function(){return this.bubbleHtml()},this.bubbleHtml=function(){return i.cache&&i.cache.bubbleHtml||i.data.bubbleHtml},this.tag=function(e){if(i.data.tags)return i.data.tags[e];var t=i.data.tag;if(!t)return null;if("undefined"==typeof e)return i.data.tag;for(var n=i.calendar.tagFields,o=-1,r=0;r<n.length;r++)e===n[r]&&(o=r);if(-1===o)throw"Field name not found.";return t[o]},this.client={},this.client.innerHTML=function(e){if("undefined"==typeof e){var t=i.cache||i.data,n=i.calendar&&i.calendar.internal&&i.calendar.internal.xssTextHtml;return n?n(t.text,t.html):DayPilot.Util.escapeTextHtml(t.text,t.html)}i.data.html=e,i.cache&&(i.cache.html=e)},this.client.html=this.client.innerHTML,this.client.header=function(e){return"undefined"==typeof e?i.data.header:void(i.data.header=e)},this.client.cssClass=function(e){return"undefined"==typeof e?i.data.cssClass:void(i.data.cssClass=e)},this.client.toolTip=function(e){if("undefined"==typeof e)return i.cache&&"undefined"!=typeof i.cache.toolTip?i.cache.toolTip:"undefined"!=typeof i.data.toolTip?i.data.toolTip:i.data.text;i.data.toolTip=e},this.client.backColor=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.backColor?i.cache.backColor:"undefined"!=typeof i.data.backColor?i.data.backColor:i.calendar.eventBackColor:void(i.data.backColor=e)},this.client.borderColor=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.borderColor?i.cache.borderColor:"undefined"!=typeof i.data.borderColor?i.data.borderColor:i.calendar.eventBorderColor:void(i.data.borderColor=e)},this.client.barColor=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.barColor?i.cache.barColor:"undefined"!=typeof i.data.barColor?i.data.barColor:i.calendar.durationBarColor:void(i.data.barColor=e)},this.client.barVisible=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.barHidden?!i.cache.barHidden:i.calendar.durationBarVisible&&!i.data.barHidden:void(i.data.barHidden=!e)},this.client.contextMenu=function(e){if("undefined"==typeof e){if(i.oContextMenu)return i.oContextMenu;var t=i.cache?i.cache.contextMenu:i.data.contextMenu;return t?DayPilot.Util.evalVariable(t):null}i.oContextMenu=e},this.client.moveEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.moveDisabled?!i.cache.moveDisabled:"Disabled"!==i.calendar.eventMoveHandling&&!i.data.moveDisabled:void(i.data.moveDisabled=!e)},this.client.resizeEnabled=function(e){return"undefined"==typeof e?"Milestone"!==i.data.type&&(i.cache&&"undefined"!=typeof i.cache.resizeDisabled?!i.cache.resizeDisabled:"Disabled"!==i.calendar.eventResizeHandling&&!i.data.resizeDisabled):void(i.data.resizeDisabled=!e)},this.client.rightClickEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.rightClickDisabled?!i.cache.rightClickDisabled:"Disabled"!==i.calendar.eventRightClickHandling&&!i.data.rightClickDisabled:void(i.data.rightClickDisabled=!e)},this.client.clickEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.clickDisabled?!i.cache.clickDisabled:"Disabled"!==i.calendar.eventClickHandling&&!i.data.clickDisabled:void(i.data.clickDisabled=!e)},this.client.deleteEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.deleteDisabled?!i.cache.deleteDisabled:"Disabled"!==i.calendar.eventDeleteHandling&&!i.data.deleteDisabled:void(i.data.deleteDisabled=!e)},this.client.doubleClickEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.doubleClickDisabled?!i.cache.doubleClickDisabled:"Disabled"!==i.calendar.eventDoubleClickHandling&&!i.data.doubleClickDisabled:void(i.data.doubleClickDisabled=!e)},this.client.deleteClickEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.deleteDisabled?!i.cache.deleteDisabled:"Disabled"!==i.calendar.eventDeleteHandling&&!i.data.deleteDisabled:void(i.data.deleteDisabled=!e)},this.toJSON=function(e){var t={};if(t.value=this.id(),t.id=this.id(),t.text=this.text(),t.start=this.start().toJSON(),t.end=this.end().toJSON(),t.resource=this.resource(),t.isAllDay=!1,t.recurrentMasterId=this.recurrentMasterId(),t.join=this.data.join,t.tag={},i.data.tags)for(var n in i.data.tags)i.data.tags.hasOwnProperty(n)&&(t.tag[n]=""+i.data.tags[n]);else if(i.calendar&&i.calendar.tagFields)for(var o=i.calendar.tagFields,r=0;r<o.length;r++)t.tag[o[r]]=this.tag(o[r]);return t}},DayPilot.Task=function(e,t){if(!e)throw"Trying to initialize DayPilot.Task with null data parameter";var n=this,i=null;if(e instanceof DayPilot.Event)i=e,this.data=e.data.task;else{if(e instanceof DayPilot.Task)return e;this.data=e.isTaskWrapper?e.data:e}var o={},r=["id","text","start","end","complete","type"];this.isTask=!0,this.calendar=t,this.temp=function(){if(o.dirty)return o;for(var e=0;e<r.length;e++)o[r[e]]=n.data[r[e]];return o.dirty=!0,o},this.copy=function(){var e={};return DayPilot.Util.copyProps(n.data,e),e},this.commit=function(){if(o.dirty){for(var e=0;e<r.length;e++)n.data[r[e]]=o[r[e]];o.dirty=!1}},this.dirty=function(){return o.dirty},this.id=function(e){return"undefined"==typeof e?n.data.id:void(this.temp().id=e)},this.text=function(e){if("undefined"==typeof e)return n.data.text;this.temp().text=e;var t=DayPilot.Util.escapeHtml(e);this.client.innerHTML(t)},this.start=function(e){return"undefined"==typeof e?new DayPilot.Date(n.data.start):void(this.temp().start=new DayPilot.Date(e))},this.duration=function(){return new DayPilot.Duration(this.start(),this.end())},this.end=function(e){return"undefined"==typeof e?t&&"Date"===t.eventEndSpec?new DayPilot.Date(n.data.end).getDatePart().addDays(1):new DayPilot.Date(n.data.end):void(this.temp().end=new DayPilot.Date(e))},this.type=function(e){return"undefined"==typeof e?i?i.data.type||"Task":n.data.type:void(this.temp().type=e)},this.complete=function(e){return"undefined"==typeof e?n.data.complete?n.data.complete:0:void(this.temp().complete=e)},this.children=function(){var e=[];e.add=function(e){var t=new DayPilot.Task(e);this.data.children||(this.data.children=[]),this.children.push(t.data)};for(var n=0;this.data.children&&n<this.data.children.length;n++)e.push(new DayPilot.Task(this.data.children[n],t));return e},this.toJSON=function(e){var t={};return t.id=this.id(),t.text=this.text(),t.start=this.start().toJSON(),t.end=this.end().toJSON(),t.type=this.type(),t.tags={},DayPilot.Util.copyProps(this.data.tags,t.tags),t},this.row={};var a=this.row;a.expanded=function(e){return"undefined"==typeof e?!n.data.row||!n.data.row.collapsed:(n.data.row||(n.data.row={}),!!n.data.row.collapsed!=!e&&t.internal.rowObjectForTaskData(n.data).toggle(),void(n.data.row.collapsed=!e))},a.expand=function(){a.expanded(!0)},a.collapse=function(){a.expanded(!1)},a.toggle=function(){a.expanded(!a.expanded())}},DayPilot.request=function(e,t,n,i){var o=DayPilot.createXmlHttp();o&&(o.open("POST",e,!0),o.setRequestHeader("Content-type","text/plain"),o.onreadystatechange=function(){if(4===o.readyState)return 200!==o.status&&304!==o.status?void(i?i(o):window.console&&console.log("HTTP error "+o.status)):void t(o)},4!==o.readyState&&("object"==typeof n&&(n=JSON.stringify(n)),o.send(n)))},DayPilot.ajax=function(e){if(!e)throw new DayPilot.Exception("Parameter object required.");if("string"!=typeof e.url)throw new DayPilot.Exception("The parameter object must have 'url' property.");var t=DayPilot.createXmlHttp();if(!t)throw new DayPilot.Exception("Unable to create XMLHttpRequest object");var n="object"==typeof e.data,i=e.data,o=e.success||function(){},r=e.error||function(){},a=e.contentType||(n?"application/json":"text/plain"),l=e.headers||{};t.open(e.method||(e.data?"POST":"GET"),e.url,!0),t.setRequestHeader("Content-type",a),DayPilot.Util.ownPropsAsArray(l).forEach(function(e){t.setRequestHeader(e.key,e.val)}),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status||201===t.status||204===t.status||304===t.status)(e={}).request=t,t.responseText&&(e.data=JSON.parse(t.responseText)),o(e);else if(r){var e;(e={}).request=t,r(e)}else window.console&&console.log("HTTP error "+t.status)},4!==t.readyState&&(n&&(i=JSON.stringify(i)),t.send(i))},DayPilot.createXmlHttp=function(){return new XMLHttpRequest},DayPilot.Http={},DayPilot.Http.ajax=function(e){DayPilot.ajax(e)},DayPilot.Http.get=function(e,t){return t=t||{},new Promise(function(n,i){var o={};o.url=e,o.method="GET",o.success=function(e){n(e)},o.error=function(e){i(e)},o.contentType=t.contentType,o.headers=t.headers,DayPilot.ajax(o)})},DayPilot.Http.post=function(e,t,n){return n=n||{},new Promise(function(i,o){var r={};r.url=e,r.method="POST",r.data=t,r.success=function(e){i(e)},r.error=function(e){o(e)},r.contentType=n.contentType,r.headers=n.headers,DayPilot.ajax(r)})},DayPilot.Http.put=function(e,t,n){return n=n||{},new Promise(function(i,o){var r={};r.url=e,r.method="PUT",r.data=t,r.success=function(e){i(e)},r.error=function(e){o(e)},r.contentType=n.contentType,r.headers=n.headers,DayPilot.ajax(r)})},DayPilot.Http.delete=function(e,t){return t=t||{},new Promise(function(n,i){var o={};o.url=e,o.method="DELETE",o.success=function(e){n(e)},o.error=function(e){i(e)},o.contentType=t.contentType,o.headers=t.headers,DayPilot.ajax(o)})},DayPilot.Duration=function(e){var t=this,n=36e5;if(2===arguments.length){var i=arguments[0],o=arguments[1];if(!(i instanceof DayPilot.Date)&&"string"!=typeof i)throw"DayPilot.Duration(): Invalid start argument, DayPilot.Date expected";if(!(o instanceof DayPilot.Date)&&"string"!=typeof o)throw"DayPilot.Duration(): Invalid end argument, DayPilot.Date expected";"string"==typeof i&&(i=new DayPilot.Date(i)),"string"==typeof o&&(o=new DayPilot.Date(o)),e=o.getTime()-i.getTime()}return this.ticks=e||0,DayPilot.Date.Cache.DurationCtor[""+e]?DayPilot.Date.Cache.DurationCtor[""+e]:(DayPilot.Date.Cache.DurationCtor[""+e]=this,this.toString=function(e){if(!e)return t.days()+"."+t.hours()+":"+t.minutes()+":"+t.seconds()+"."+t.milliseconds();var n=t.minutes();return e.replace("mm",n=(n<10?"0":"")+n).replace("m",t.minutes()).replace("H",t.hours()).replace("h",t.hours()).replace("d",t.days()).replace("s",t.seconds())},this.totalHours=function(){return t.ticks/n},this.totalDays=function(){return t.ticks/864e5},this.totalMinutes=function(){return t.ticks/6e4},this.totalSeconds=function(){return t.ticks/1e3},this.totalMilliseconds=function(){return t.ticks},this.days=function(){return Math.floor(t.totalDays())},this.hours=function(){var e=t.ticks-864e5*t.days();return Math.floor(e/n)},this.minutes=function(){var e=t.ticks-Math.floor(t.totalHours())*n;return Math.floor(e/6e4)},this.seconds=function(){var e=t.ticks-6e4*Math.floor(t.totalMinutes());return Math.floor(e/1e3)},this.milliseconds=function(){return t.ticks%1e3},void(this.add=function(e){return new DayPilot.Duration(t.ticks+e.ticks)}))},DayPilot.Duration.ofWeeks=function(e){return new DayPilot.Duration(1e3*e*60*60*24*7)},DayPilot.Duration.ofDays=function(e){return new DayPilot.Duration(1e3*e*60*60*24)},DayPilot.Duration.ofHours=function(e){return new DayPilot.Duration(1e3*e*60*60)},DayPilot.Duration.ofMinutes=function(e){return new DayPilot.Duration(1e3*e*60)},DayPilot.Duration.ofSeconds=function(e){return new DayPilot.Duration(1e3*e)},DayPilot.Duration.weeks=function(e){return DayPilot.Duration.ofWeeks(e)},DayPilot.Duration.days=function(e){return DayPilot.Duration.ofDays(e)},DayPilot.Duration.hours=function(e){return DayPilot.Duration.ofHours(e)},DayPilot.Duration.minutes=function(e){return DayPilot.Duration.ofMinutes(e)},DayPilot.Duration.seconds=function(e){return DayPilot.Duration.ofSeconds(e)},DayPilot.TimeSpan=function(){throw"Please use DayPilot.Duration class instead of DayPilot.TimeSpan."};try{DayPilot.TimeSpan.prototype=Object.create(DayPilot.Duration.prototype)}catch(e){}DayPilot.Date=function(t,n){if(t instanceof DayPilot.Date)return t;var i;DayPilot.Util.isNullOrUndefined(t)&&(t=i=DayPilot.DateUtil.fromLocal().getTime());var o=DayPilot.Date.Cache.Ctor;if(o[t])return DayPilot.Stats.cacheHitsCtor+=1,o[t];var r=!1;if("string"==typeof t){try{i=DayPilot.DateUtil.fromStringSortable(t,n).getTime()}catch(e){throw new DayPilot.Exception("DayPilot.Date - Unable to parse ISO8601 date/time string: "+t)}r=!0}else if("number"==typeof t){if(isNaN(t))throw"Cannot create DayPilot.Date from NaN";i=t}else{if(!(t instanceof Date))throw"Unrecognized parameter: use Date, number or string in ISO 8601 format";i=n?DayPilot.DateUtil.fromLocal(t).getTime():t.getTime()}var a=e(i);return o[a]?o[a]:(o[a]=this,o[i]=this,r&&a!==t&&DayPilot.DateUtil.hasTzSpec(t)&&(o[t]=this),Object.defineProperty?(Object.defineProperty(this,"ticks",{get:function(){return i}}),Object.defineProperty(this,"value",{value:a,writable:!1,enumerable:!0})):(this.ticks=i,this.value=a),DayPilot.Date.Config.legacyShowD&&(this.d=new Date(i)),void(DayPilot.Stats.dateObjects+=1))},DayPilot.Date.Config={},DayPilot.Date.Config.legacyShowD=!1,DayPilot.Date.Cache={},DayPilot.Date.Cache.Parsing={},DayPilot.Date.Cache.Ctor={},DayPilot.Date.Cache.Ticks={},DayPilot.Date.Cache.DurationCtor={},DayPilot.Date.Cache.clear=function(){DayPilot.Date.Cache.Parsing={},DayPilot.Date.Cache.Ctor={},DayPilot.Date.Cache.Ticks={},DayPilot.Date.Cache.DurationCtor={}},DayPilot.Date.prototype.addDays=function(e){return e?new DayPilot.Date(this.ticks+24*e*60*60*1e3):this},DayPilot.Date.prototype.addHours=function(e){return e?this.addTime(60*e*60*1e3):this},DayPilot.Date.prototype.addMilliseconds=function(e){return e?this.addTime(e):this},DayPilot.Date.prototype.addMinutes=function(e){return e?this.addTime(60*e*1e3):this},DayPilot.Date.prototype.addMonths=function(e){if(!e)return this;var t=new Date(this.ticks),n=t.getUTCFullYear(),i=t.getUTCMonth()+1;if(e>0){for(;e>=12;)e-=12,n++;e>12-i?(n++,i=e-(12-i)):i+=e}else{for(;e<=-12;)e+=12,n--;i+e<=0?(n--,i=12+i+e):i+=e}var o=new Date(t.getTime());o.setUTCDate(1),o.setUTCFullYear(n),o.setUTCMonth(i-1);var r=new DayPilot.Date(o).daysInMonth();return o.setUTCDate(Math.min(r,t.getUTCDate())),new DayPilot.Date(o)},DayPilot.Date.prototype.addSeconds=function(e){return e?this.addTime(1e3*e):this},DayPilot.Date.prototype.addTime=function(e){return e?(e instanceof DayPilot.Duration&&(e=e.ticks),new DayPilot.Date(this.ticks+e)):this},DayPilot.Date.prototype.addYears=function(e){var t=new Date(this.ticks),n=new Date(this.ticks),i=this.getYear()+e,o=this.getMonth();n.setUTCDate(1),n.setUTCFullYear(i),n.setUTCMonth(o);var r=new DayPilot.Date(n).daysInMonth();return n.setUTCDate(Math.min(r,t.getUTCDate())),new DayPilot.Date(n)},DayPilot.Date.prototype.dayOfWeek=function(){return new Date(this.ticks).getUTCDay()},DayPilot.Date.prototype.dayOfWeekISO=function(){return new Date(this.ticks).getUTCDay()||7},DayPilot.Date.prototype.getDayOfWeek=function(){return new Date(this.ticks).getUTCDay()},DayPilot.Date.prototype.getDayOfYear=function(){var e=this.firstDayOfYear();return DayPilot.DateUtil.daysDiff(e,this)+1},DayPilot.Date.prototype.daysInMonth=function(){var e=new Date(this.ticks),t=e.getUTCMonth()+1,n=e.getUTCFullYear(),i=[31,28,31,30,31,30,31,31,30,31,30,31];return 2!==t?i[t-1]:n%4!=0?i[1]:n%100==0&&n%400!=0?i[1]:i[1]+1},DayPilot.Date.prototype.daysInYear=function(){var e=this.getYear();return e%4!=0?365:e%100==0&&e%400!=0?365:366},DayPilot.Date.prototype.dayOfYear=function(){return Math.ceil((this.getDatePart().getTime()-this.firstDayOfYear().getTime())/864e5)+1},DayPilot.Date.prototype.equals=function(e){if(null===e)return!1;if(e instanceof DayPilot.Date)return this===e;throw"The parameter must be a DayPilot.Date object (DayPilot.Date.equals())"},DayPilot.Date.prototype.firstDayOfMonth=function(){var e=new Date;return e.setUTCFullYear(this.getYear(),this.getMonth(),1),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),new DayPilot.Date(e)},DayPilot.Date.prototype.firstDayOfYear=function(){var e=this.getYear(),t=new Date;return t.setUTCFullYear(e,0,1),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),new DayPilot.Date(t)},DayPilot.Date.prototype.firstDayOfWeek=function(e){var t=this;e=e instanceof DayPilot.Locale?e.weekStarts:"string"==typeof e&&DayPilot.Locale.find(e)?DayPilot.Locale.find(e).weekStarts:e||0;for(var n=t.dayOfWeek();n!==e;)n=(t=t.addDays(-1)).dayOfWeek();return new DayPilot.Date(t)},DayPilot.Date.prototype.getDay=function(){return new Date(this.ticks).getUTCDate()},DayPilot.Date.prototype.getDatePart=function(){var e=new Date(this.ticks);return e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),new DayPilot.Date(e)},DayPilot.Date.prototype.getYear=function(){return new Date(this.ticks).getUTCFullYear()},DayPilot.Date.prototype.getHours=function(){return new Date(this.ticks).getUTCHours()},DayPilot.Date.prototype.getMilliseconds=function(){return new Date(this.ticks).getUTCMilliseconds()},DayPilot.Date.prototype.getMinutes=function(){return new Date(this.ticks).getUTCMinutes()},DayPilot.Date.prototype.getMonth=function(){return new Date(this.ticks).getUTCMonth()},DayPilot.Date.prototype.getSeconds=function(){return new Date(this.ticks).getUTCSeconds()},DayPilot.Date.prototype.getTotalTicks=function(){return this.getTime()},DayPilot.Date.prototype.getTime=function(){return this.ticks},DayPilot.Date.prototype.getTimePart=function(){var e=this.getDatePart();return DayPilot.DateUtil.diff(this,e)},DayPilot.Date.prototype.lastDayOfMonth=function(){var e=new Date(this.firstDayOfMonth().getTime()),t=this.daysInMonth();return e.setUTCDate(t),new DayPilot.Date(e)},DayPilot.Date.prototype.weekNumber=function(){var e=this.firstDayOfYear(),t=(this.getTime()-e.getTime())/864e5;return Math.ceil((t+e.dayOfWeek()+1)/7)},DayPilot.Date.prototype.weekNumberISO=function(){var e=!1,t=this.dayOfYear(),n=this.firstDayOfYear().dayOfWeek(),i=this.firstDayOfYear().addYears(1).addDays(-1).dayOfWeek();0===n&&(n=7),0===i&&(i=7);var o=8-n;4!==n&&4!==i||(e=!0);var r=Math.ceil((t-o)/7);return o>=4&&(r+=1),r>52&&!e&&(r=1),0===r&&(r=this.firstDayOfYear().addDays(-1).weekNumberISO()),r},DayPilot.Date.prototype.toDateLocal=function(){var e=new Date(this.ticks),t=new Date;return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours()),t.setMinutes(e.getUTCMinutes()),t.setSeconds(e.getUTCSeconds()),t.setMilliseconds(e.getUTCMilliseconds()),t},DayPilot.Date.prototype.toDate=function(){return new Date(this.ticks)},DayPilot.Date.prototype.toJSON=function(){return this.value},DayPilot.Date.prototype.toString=function(e,t){return e?new r(e,t).print(this):this.toStringSortable()},DayPilot.Date.prototype.toStringSortable=function(){return e(this.ticks)},DayPilot.Date.parse=function(e,t,n){return new r(t,n).parse(e)};var a=0;DayPilot.Date.today=function(){return new DayPilot.Date(DayPilot.DateUtil.localToday(),!0)},DayPilot.Date.now=function(){return new DayPilot.Date},DayPilot.Date.fromYearMonthDay=function(e,t,n){t=t||1,n=n||1;var i=new Date(0);return i.setUTCFullYear(e),i.setUTCMonth(t-1),i.setUTCDate(n),new DayPilot.Date(i)},DayPilot.DateUtil={},DayPilot.DateUtil.fromStringSortable=function(e,t){var n=new DayPilot.Exception("Invalid string format (use '2010-12-31' or '2010-12-31T23:50:00'): "+e);if(!e)throw"Can't create DayPilot.Date from an empty string";var i=e.length,o=10===i,r=19===i;if(!(o||r||i>19))throw n;if(DayPilot.Date.Cache.Parsing[e]&&!t)return DayPilot.Stats.cacheHitsParsing+=1,DayPilot.Date.Cache.Parsing[e];var a=e.substring(0,4);if(isNaN(a))throw n;var l=e.substring(5,7);if(isNaN(l))throw n;var s=e.substring(8,10);if(isNaN(s))throw n;var d=new Date(0);if(d.setUTCFullYear(a,l-1,s),o)return DayPilot.Date.Cache.Parsing[e]=d,d;var c=e.substring(11,13);if(isNaN(c))throw n;var u=e.substring(14,16);if(isNaN(u))throw n;var h=e.substring(17,19);if(isNaN(h))throw n;if(d.setUTCHours(c),d.setUTCMinutes(u),d.setUTCSeconds(h),r)return DayPilot.Date.Cache.Parsing[e]=d,d;var p=0;if("."===e[19]){var f=parseInt(e.substring(20,23));if(isNaN(f))throw n;d.setUTCMilliseconds(f),p=DayPilot.DateUtil.getTzOffsetMinutes(e.substring(23))}else p=DayPilot.DateUtil.getTzOffsetMinutes(e.substring(19));var g=new DayPilot.Date(d);return t||(g=g.addMinutes(-p)),d=g.toDate(),DayPilot.Date.Cache.Parsing[e]=d,d},DayPilot.DateUtil.getTzOffsetMinutes=function(e){if(DayPilot.Util.isNullOrUndefined(e)||""===e)return 0;if("Z"===e)return 0;var t=e[0],n=60*parseInt(e.substring(1,3))+parseInt(e.substring(4));if("-"===t)return-n;if("+"===t)return n;throw"Invalid timezone spec: "+e},DayPilot.DateUtil.hasTzSpec=function(e){return!!e.indexOf("+")||!!e.indexOf("-")},DayPilot.DateUtil.daysDiff=function(e,t){if(e&&t||function(){throw"two parameters required"}(),e=new DayPilot.Date(e),t=new DayPilot.Date(t),e.getTime()>t.getTime())return null;for(var n=0,i=e.getDatePart(),o=t.getDatePart();i<o;)i=i.addDays(1),n++;return n},DayPilot.DateUtil.daysSpan=function(e,t){if(e&&t||function(){throw"two parameters required"}(),(e=new DayPilot.Date(e))===(t=new DayPilot.Date(t)))return 0;var n=DayPilot.DateUtil.daysDiff(e,t);return t==t.getDatePart()&&n--,n},DayPilot.DateUtil.diff=function(e,t){if(!(e&&t&&e.getTime&&t.getTime))throw"Both compared objects must be Date objects (DayPilot.Date.diff).";return e.getTime()-t.getTime()},DayPilot.DateUtil.fromLocal=function(e){e||(e=new Date);var t=new Date;return t.setUTCFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t.setUTCHours(e.getHours()),t.setUTCMinutes(e.getMinutes()),t.setUTCSeconds(e.getSeconds()),t.setUTCMilliseconds(e.getMilliseconds()),t},DayPilot.DateUtil.localToday=function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},DayPilot.DateUtil.hours=function(e,t){var n=e.getUTCMinutes();n<10&&(n="0"+n);var i=e.getUTCHours();if(t){var o=i<12;return 0==(i%=12)&&(i=12),i+":"+n+" "+(o?"AM":"PM")}return i+":"+n},DayPilot.DateUtil.max=function(e,t){return e.getTime()>t.getTime()?e:t},DayPilot.DateUtil.min=function(e,t){return e.getTime()<t.getTime()?e:t};var r=function(e,n){"string"==typeof n&&(n=DayPilot.Locale.find(n)),n=n||DayPilot.Locale.US;var i=[{seq:"yyyy",expr:"[0-9]{4,4}",str:function(e){return e.getYear()}},{seq:"yy",expr:"[0-9]{2,2}",str:function(e){return e.getYear()%100},transform:function(e){return parseInt(e)+2e3}},{seq:"mm",expr:"[0-9]{2,2}",str:function(e){var t=e.getMinutes();return t<10?"0"+t:t}},{seq:"m",expr:"[0-9]{1,2}",str:function(e){return e.getMinutes()}},{seq:"HH",expr:"[0-9]{2,2}",str:function(e){var t=e.getHours();return t<10?"0"+t:t}},{seq:"H",expr:"[0-9]{1,2}",str:function(e){return e.getHours()}},{seq:"hh",expr:"[0-9]{2,2}",str:function(e){var t;return 0==(t=(t=e.getHours())%12)&&(t=12),t<10?"0"+t:t}},{seq:"h",expr:"[0-9]{1,2}",str:function(e){var t;return 0==(t=(t=e.getHours())%12)&&(t=12),t}},{seq:"ss",expr:"[0-9]{2,2}",str:function(e){var t=e.getSeconds();return t<10?"0"+t:t}},{seq:"s",expr:"[0-9]{1,2}",str:function(e){return e.getSeconds()}},{seq:"MMMM",expr:"[^\\s0-9]*",str:function(e){return n.monthNames[e.getMonth()]},transform:function(e){var i=DayPilot.indexOf(n.monthNames,e,t);return i<0?null:i+1}},{seq:"MMM",expr:"[^\\s0-9]*",str:function(e){return n.monthNamesShort[e.getMonth()]},transform:function(e){var i=DayPilot.indexOf(n.monthNamesShort,e,t);return i<0?null:i+1}},{seq:"MM",expr:"[0-9]{2,2}",str:function(e){var t=e.getMonth()+1;return t<10?"0"+t:t}},{seq:"M",expr:"[0-9]{1,2}",str:function(e){return e.getMonth()+1}},{seq:"dddd",expr:"[^\\s0-9]*",str:function(e){return n.dayNames[e.getDayOfWeek()]}},{seq:"ddd",expr:"[^\\s0-9]*",str:function(e){return n.dayNamesShort[e.getDayOfWeek()]}},{seq:"dd",expr:"[0-9]{2,2}",str:function(e){var t=e.getDay();return t<10?"0"+t:t}},{seq:"%d",expr:"[0-9]{1,2}",str:function(e){return e.getDay()}},{seq:"d",expr:"[0-9]{1,2}",str:function(e){return e.getDay()}},{seq:"tt",expr:"(AM|PM|am|pm)",str:function(e){return e.getHours()<12?"AM":"PM"},transform:function(e){return e.toUpperCase()}}];this.init=function(){this.year=this.findSequence("yyyy")||this.findSequence("yy"),this.month=this.findSequence("MMMM")||this.findSequence("MMM")||this.findSequence("MM")||this.findSequence("M"),this.day=this.findSequence("dd")||this.findSequence("d"),this.hours=this.findSequence("HH")||this.findSequence("H"),this.minutes=this.findSequence("mm")||this.findSequence("m"),this.seconds=this.findSequence("ss")||this.findSequence("s"),this.ampm=this.findSequence("tt"),this.hours12=this.findSequence("hh")||this.findSequence("h")},this.findSequence=function(t){function n(e){return parseInt(e)}return-1===e.indexOf(t)?null:{findValue:function(o){for(var r=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e),a=null,l=0;l<i.length;l++){var s=i[l].expr;t===i[l].seq&&(s="("+s+")",a=i[l].transform),r=r.replace(i[l].seq,s)}r="^"+r+"$";try{var d=new RegExp(r).exec(o);return d?(a=a||n)(d[1]):null}catch(e){throw"unable to create regex from: "+r}}}},this.print=function(t){for(var n=function(e){for(var t=0;t<i.length;t++)if(i[t]&&i[t].seq===e)return i[t];return null},o=e.length<=0,r=0,a=[];!o;){var l=e.substring(r),s=/%?(.)\1*/.exec(l);if(s&&s.length>0){var d=s[0],c=n(d);a.push(c||d),o=e.length<=(r+=d.length)}else o=!0}for(var u=0;u<a.length;u++){var h=a[u];"string"!=typeof h&&(a[u]=h.str(t))}return a.join("")},this.parse=function(e){var t=this.year.findValue(e);if(!t)return null;var n=this.month.findValue(e);if(DayPilot.Util.isNullOrUndefined(n))return null;if(n>12||n<1)return null;var i=this.day.findValue(e),o=DayPilot.Date.fromYearMonthDay(t,n).daysInMonth();if(i<1||i>o)return null;var r=this.hours?this.hours.findValue(e):0,a=this.minutes?this.minutes.findValue(e):0,l=this.seconds?this.seconds.findValue(e):0,s=this.ampm?this.ampm.findValue(e):null;if(this.ampm&&this.hours12){var d=this.hours12.findValue(e);if(d<1||d>12)return null;r="PM"===s?12===d?12:d+12:12===d?0:d}if(r<0||r>23)return null;if(a<0||a>59)return null;if(l<0||l>59)return null;var c=new Date;return c.setUTCFullYear(t,n-1,i),c.setUTCHours(r),c.setUTCMinutes(a),c.setUTCSeconds(l),c.setUTCMilliseconds(0),new DayPilot.Date(c)},this.init()};DayPilot.ColorUtil={},DayPilot.ColorUtil.hexToRgb=function(e){if(!/^#[0-9a-f]{6}$/i.test(e))throw new DayPilot.Exception("Invalid color, only full hex color string accepted, eg. '#ffaaff'.");return e=e.replace("#",""),{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},DayPilot.ColorUtil.rgbToHex=function(e){return"#"+n(e.r)+n(e.g)+n(e.b)},DayPilot.ColorUtil.adjustLuminance=function(e,t){return{r:e.r+t,g:e.g+t,b:e.b+t}},DayPilot.ColorUtil.darker=function(e,t){var n=DayPilot.ColorUtil.hexToRgb(e),i=DayPilot.ColorUtil.adjustLuminance(n,-17*(t=t||1));return DayPilot.ColorUtil.rgbToHex(i)},DayPilot.Canvas=function(e,t,n,i,r){i=i||1;var a=document.createElement("canvas");a.width=e*i,a.height=t*i;var l=a.getContext("2d");l.scale(i,i),this.defaultFileName="image.png","image/jpeg"===n&&(this.defaultFileName="image.jpg",r=r||.92),this.groupStart=function(e){},this.groupEnd=function(){},this.fillRect=function(e,t){l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.fillRect(e.x,e.y,e.w,e.h),l.restore()},this.rect=function(e,t){l.save(),l.strokeStyle=t,l.beginPath(),l.rect(e.x+.5,e.y+.5,e.w-1,e.h-1),l.stroke(),l.restore()},this.diamond=function(e,t){l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.beginPath(),l.moveTo(e.x+e.w/2,e.y+.5),l.lineTo(e.x+e.w-.5,e.y+e.h/2),l.lineTo(e.x+e.w/2,e.y+e.h-.5),l.lineTo(e.x+.5,e.y+e.h/2),l.closePath(),l.fill(),l.restore()},this.triangle=function(e,t,n){for(n=n||0;n<0;)n+=360;for(;n>=360;)n-=360;switch(l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.beginPath(),n){case 0:l.moveTo(e.x+e.w/3,e.y+.5),l.lineTo(e.x+e.w+.5,e.y+e.h/2),l.lineTo(e.x+e.w/3,e.y+e.h-.5);break;case 90:l.moveTo(e.x-.5,e.y+e.h/3),l.lineTo(e.x+e.w+.5,e.y+e.h/3),l.lineTo(e.x+e.w/2,e.y+e.h+.5);break;case 180:l.moveTo(e.x+2*e.w/3,e.y+.5),l.lineTo(e.x+2*e.w/3,e.y+e.h),l.lineTo(e.x,e.y+e.h/2);break;case 270:l.moveTo(e.x+e.w/2,e.y+e.w/2+.5),l.lineTo(e.x+e.w-.5,e.y+2*e.h/3),l.lineTo(e.x,e.y+2*e.h/3);break;default:throw new DayPilot.Exception("Unsupported rotation angle")}l.closePath(),l.fill(),l.restore()},this.upperLeftCorner=function(e,t){l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x+e.w,e.y),l.lineTo(e.x,e.y+e.h),l.closePath(),l.fill(),l.restore()},this.upperRightCorner=function(e,t){l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x+e.w,e.y),l.lineTo(e.x+e.w,e.y+e.h),l.closePath(),l.fill(),l.restore()},this.textWidth=function(e,t){l.save(),l.font=t.style+" "+t.size+" "+t.family;var n=l.measureText(e).width+1;return l.restore(),n},this.text=function(e,t,n,i,o,r,a){if(t){if("number"==typeof t&&(t=""+t),"string"!=typeof t)throw"String expected, supplied: "+typeof t;o=o||"left",r=r||0,i=i||"#000",a=a||"top",l.save();var s=DayPilot.Util.fontHeight(n),d=DayPilot.browser.ff?3:0;d+=.2*s,d+=DayPilot.browser.chrome?1:0,d+=DayPilot.browser.ie?1:0,l.beginPath(),l.rect(e.x+.5+r,e.y+.5+r,e.w-1-r,e.h-1-r),l.clip(),l.fillStyle=i,l.font=n.style+" "+n.size+" "+n.family,l.textBaseline="top",l.textAlign=o;var c=e.x;switch(o){case"left":c+=r;break;case"center":c+=e.w/2;break;case"right":c+=e.w-r}var u=1.2*s,h=t.split("\n"),p=[];DayPilot.list(h).forEach(function(t){var n=function(e,t,n){for(var i=t.split(" "),o=[],r=i[0],a=1;a<i.length;a++){var l=i[a];e.measureText(r+" "+l).width<n?r+=" "+l:(o.push(r),r=l)}return o.push(r),o}(l,t,e.w);DayPilot.list(n).forEach(function(e){p.push(e)})});var f=u*p.length-(u-s),g=e.h-2*r,m=e.y+r;switch(a){case"top":m+=d;break;case"center":m+=(g-f)/2+.1*s;break;case"bottom":m+=g-f}for(var v=0;v<p.length;v++)l.fillText(p[v],c,m),m+=u;l.restore()}},this.line=function(e,t,n,i,o){l.save(),l.lineWidth=1,l.strokeStyle=o,l.beginPath(),l.moveTo(e+.5,t+.5),l.lineTo(n+.5,i+.5),l.stroke(),l.restore()},this.image=function(e,t){if(t){if("string"==typeof t){var n=t;return t=document.createElement("img"),n.indexOf("data:"),t.onload=function(){l.save(),l.drawImage(t,e.x,e.y),l.restore()},void(t.src=n)}l.save(),l.drawImage(t,e.x,e.y),l.restore()}},this.symbol=function(e,t,n){var i="http://www.w3.org/2000/svg",r=document.createElementNS(i,"svg"),a=this,l=(n=n||{}).color;new o(t).j().then(function(t){if(l){var n=document.createElementNS(i,"style");n.innerHTML="svg { color: "+l+"; }",r.appendChild(n)}r.setAttribute("viewBox",t.getAttribute("viewBox")),r.setAttribute("width",e.w),r.setAttribute("height",e.h);var o=document.createElementNS(i,"g");o.innerHTML=t.innerHTML,r.appendChild(o);var s=(new XMLSerializer).serializeToString(r),d="data:image/svg+xml;base64,"+btoa(s);a.image(e,d)})},this.getWidth=function(){return a.width},this.getHeight=function(){return a.height},this.getElement=function(){return a},this.getSource=function(){return"<img src='"+a.toDataURL(n,r)+"' />"},this.getDataUri=function(){return a.toDataURL(n,r)},this.getDefaultFileName=function(){return this.defaultFileName},this.getBlob=function(){return a.msToBlob?a.msToBlob():DayPilot.Util.dataUriToBlob(this.getDataUri())}},DayPilot.Svg=function(e,t){var n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg"),r=this;this.k=i,this.groups=[],i.outerHTML&&i.setAttribute("xmlns",n),i.setAttribute("viewBox","0 0 "+e+" "+t);var a=document.createElementNS(n,"defs");i.appendChild(a),r.defs=a,function(e,t){var o=document.createElementNS(n,"clipPath");o.id="clip"+DayPilot.guid();var a=document.createElementNS(n,"rect");a.setAttribute("x",0),a.setAttribute("y",0),a.setAttribute("width",e),a.setAttribute("height",t),o.appendChild(a),r.defs.appendChild(o);var l=document.createElementNS(n,"g");l.setAttribute("clip-path","url(#"+o.id+")"),i.appendChild(l),i=l}(e,t),this.defaultFileName="image.svg",this.groupStart=function(e){var t=document.createElementNS(n,"g");for(var o in e)t.setAttribute("data-"+o,e[o]);i=t,this.group&&this.groups.push(this.group),this.group=t},this.groupEnd=function(){if(!this.group)throw new DayPilot.Exception("SVG export = group not open");var e=this.group;this.group=this.groups.pop(),(i=this.group)||(i=this.k),i.appendChild(e)},this.fillRect=function(e,t){var o=document.createElementNS(n,"rect");o.setAttribute("x",e.x),o.setAttribute("y",e.y),o.setAttribute("width",e.w),o.setAttribute("height",e.h),o.setAttribute("fill",t),i.appendChild(o)},this.diamond=function(e,t){var o=document.createElementNS(n,"path"),r="";r+="M "+(e.x+e.w/2)+" "+e.y,r+=" ",r+="L "+(e.x+e.w)+" "+(e.y+e.h/2),r+=" ",r+="L "+(e.x+e.w/2)+" "+(e.y+e.h),r+=" ",r+="L "+e.x+" "+(e.y+e.h/2),o.setAttribute("d",r+=" Z"),o.setAttribute("fill",t),i.appendChild(o)},this.triangle=function(e,t,o){var r=document.createElementNS(n,"path"),a="";a+="M "+(e.x+e.w/3)+" "+e.y,a+=" ",a+="L "+(e.x+e.w)+" "+(e.y+e.h/2),a+=" ",a+="L "+(e.x+e.w/3)+" "+(e.y+e.h),r.setAttribute("d",a+=" Z"),r.setAttribute("fill",t),"number"==typeof o&&r.setAttribute("transform","rotate("+o+","+(e.x+e.w/2)+","+(e.y+e.h/2)+")"),i.appendChild(r)},this.upperLeftCorner=function(e,t){var o=document.createElementNS(n,"path"),r="";r+="M "+e.x+" "+e.y,r+=" ",r+="L "+(e.x+e.w)+" "+e.y,r+=" ",r+="L "+e.x+" "+(e.y+e.h),o.setAttribute("d",r+=" Z"),o.setAttribute("fill",t),i.appendChild(o)},this.upperRightCorner=function(e,t){var o=document.createElementNS(n,"path"),r="";r+="M "+e.x+" "+e.y,r+=" ",r+="L "+(e.x+e.w)+" "+e.y,r+=" ",r+="L "+(e.x+e.w)+" "+(e.y+e.h),o.setAttribute("d",r+=" Z"),o.setAttribute("fill",t),i.appendChild(o)},this.rect=function(e,t){var o=document.createElementNS(n,"rect");o.setAttribute("x",e.x+.5),o.setAttribute("y",e.y+.5),o.setAttribute("width",e.w-1),o.setAttribute("height",e.h-1),o.setAttribute("stroke",t),o.setAttribute("stroke-width","1"),o.setAttribute("fill","transparent"),i.appendChild(o)},this.text=function(e,t,o,a,l,s,d){function c(e,t,r){var l=document.createElementNS(n,"text");l.setAttribute("fill",a),l.setAttribute("font-family",o.family),l.setAttribute("font-size",o.size),l.setAttribute("font-style",u),l.setAttribute("font-weight",h),l.setAttribute("x",t),l.setAttribute("y",r),l.setAttribute("dy","0.8em"),l.setAttribute("text-anchor",g),l.setAttribute("clip-path","url(#"+m.id+")");var s=document.createTextNode(e);l.appendChild(s),i.appendChild(l)}if(t){if("number"==typeof t&&(t=""+t),"string"!=typeof t)throw"String expected, supplied: "+typeof t;l=l||"left",s=s||0,d=d||"top";var u=o.style;-1!==u.indexOf("italic")&&(u="bold");var h=o.style;if(o.style)var p=3;var f=e.x,g="start";switch(l){case"center":f+=e.w/2,g="middle";break;case"right":f+=e.w,g="end"}var m=document.createElementNS(n,"clipPath");m.id="clip"+DayPilot.guid();var v=document.createElementNS(n,"rect");v.setAttribute("x",e.x),v.setAttribute("y",e.y),v.setAttribute("width",e.w),v.setAttribute("height",e.h),m.appendChild(v),r.defs.appendChild(m);var y=DayPilot.Util.fontHeight(o),b=1.2*y,w=t.split("\n"),C=b*w.length-(b-y),x=e.h-2*s,S=e.y+s;switch(d){case"top":S+=p;break;case"center":S+=(x-C)/2+.1*y;break;case"bottom":S+=x-C}for(var T=0;T<w.length;T++)c(w[T],f+s,S),S+=b}},this.line=function(e,t,o,r,a){var l=document.createElementNS(n,"line");l.setAttribute("x1",e+.5),l.setAttribute("y1",t+.5),l.setAttribute("x2",o+.5),l.setAttribute("y2",r+.5),l.setAttribute("stroke",a),i.appendChild(l)},this.image=function(e,t){var o=document.createElementNS(n,"g");i.appendChild(o),function(e,t){var n=null;if(e){if("string"==typeof e){if(0===e.indexOf("data:")){var i={};i.dataUri=e,t(i)}n=e}else n=e.src;(e=document.createElement("img")).onload=function(){var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(this,0,0);var n={};n.dataUri=e.toDataURL("image/png"),t(n)},e.src=n}}(t,function(t){var i=document.createElementNS(n,"image");i.setAttribute("href",t.dataUri),i.setAttribute("x",e.x),i.setAttribute("y",e.y),i.setAttribute("width",e.w),i.setAttribute("height",e.h),o.appendChild(i)})},this.symbol=function(e,t,n){var r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"symbol"),l=this,s=(n=n||{}).color;new o(t).j().then(function(t){if(s){var n=document.createElementNS(r,"style");n.innerHTML="svg { color: "+s+"; }",a.appendChild(n)}var o=DayPilot.guid();a.setAttribute("viewBox",t.getAttribute("viewBox")),a.setAttribute("width",e.w),a.setAttribute("height",e.h),a.setAttribute("id",o);var d=document.createElementNS(r,"g");d.innerHTML=t.innerHTML,a.appendChild(d),l.k.appendChild(a);var c=document.createElementNS(r,"use");c.setAttribute("href","#"+o),c.setAttribute("x",e.x),c.setAttribute("y",e.y),i.appendChild(c)})},this.l={},this.textWidth=function(e,t){var n="#"+e+"#"+JSON.stringify(t),i=this.l[n];if("number"==typeof i)return i;var o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg");r.style.position="absolute",r.style.left="-10000px",r.style.width="100px",r.outerHTML&&r.setAttribute("xmlns",o),r.setAttribute("viewBox","0 0 100 100");var a=document.createElementNS(o,"text");a.setAttribute("font-family",t.family),a.setAttribute("font-size",t.size),a.setAttribute("font-style",t.style),a.setAttribute("x",0),a.setAttribute("y",0),a.setAttribute("dy","1em");var l=document.createTextNode(e);a.appendChild(l),r.appendChild(a),document.body.appendChild(r);var s=a.getComputedTextLength();return this.l[n]=s,document.body.removeChild(r),s},this.getWidth=function(){return e},this.getHeight=function(){return t},this.getElement=function(){return this.k},this.getSource=function(){if(this.k.outerHTML)return this.k.outerHTML;var e=document.createElement("div"),t=this.k.cloneNode(!0);return e.appendChild(t),e.innerHTML},this.getDataUri=function(){return"data:application/octet-stream,"+encodeURIComponent(this.getSource())},this.getDefaultFileName=function(){return this.defaultFileName},this.getBlob=function(){return new Blob([this.getSource()])}},DayPilot.Excel=function(){var e=this,t=null,n=null,i=null,o="urn:schemas-microsoft-com:office:spreadsheet";this.init=function(){(t=document.implementation.createDocument("urn:schemas-microsoft-com:office:spreadsheet","Workbook",null)).documentElement.setAttribute("xmlns:o","urn:schemas-microsoft-com:office:office"),t.documentElement.setAttribute("xmlns:x","urn:schemas-microsoft-com:office:excel"),t.documentElement.setAttribute("xmlns:ss",o),t.documentElement.setAttribute("xmlns:html","http://www.w3.org/TR/REC-html40");var r=t.createElement("x:ExcelWorkbook");t.documentElement.appendChild(r),n=t.createElement("ss:Styles"),t.documentElement.appendChild(n),(i=e.styles.create()).setId("Default"),i.setName("Normal")},this.worksheets=[],this.worksheets.create=function(t){var n=e.el(o,"Worksheet"),i=new r(n);return i.setName(t),this.push(i),i},this.styles=[],this.styles.create=function(e){var i=t.createElement("ss:Style");n.appendChild(i);var o=new a(i);return this.push(o),o},this.styles.getDefault=function(){return i},this.el=function(e,n){var i=t.createElementNS(e,n);return t.documentElement.appendChild(i),i},this.getSource=function(){return'<?xml version="1.0"?>'+(new XMLSerializer).serializeToString(t)},this.getDataUri=function(){return"data:application/vnd.ms-excel,"+encodeURIComponent(this.getSource())},this.getElement=function(){return t},this.getDefaultFileName=function(){return"spreadsheet.xls"},this.getBlob=function(){return new Blob([this.getSource()])};var r=function(e){var n=t.createElement("Table");e.appendChild(n);var i=t.createElement("x:WorksheetOptions");e.appendChild(i),this.rows=[],this.setName=function(t){e.setAttribute("ss:Name",t)},this.cell=function(e,i){for(;i>=this.rows.length;){var r=t.createElement("Row");n.appendChild(r),this.rows.push(new o(r))}return this.rows[i].cell(e)},this.enableGridlines=function(e){var n=DayPilot.list(i.childNodes).find(function(e){return"x:DoNotDisplayGridlines"===e.tagName});if(!n&&!e){var o=t.createElement("x:DoNotDisplayGridlines");i.appendChild(o)}n&&e&&i.removeChild(n)};var o=function(e){this.cells=[],this.getElement=function(){return e},this.cell=function(i){for(;i>=this.cells.length;){var o=t.createElement("Cell");e.appendChild(o),this.cells.push(new n(o))}return this.cells[i]};var n=function(e){this.setText=function(n){var i=t.createElement("Data");i.setAttribute("ss:Type","String");var o=t.createTextNode(n);for(i.appendChild(o);e.firstChild;)e.removeChild(e.firstChild);return e.appendChild(i),this},this.setColspan=function(t){return t>1?e.setAttribute("ss:MergeAcross",t-1):e.removeAttribute("ss:MergeAcross"),this},this.setRowspan=function(t){return t>1?e.setAttribute("ss:MergeDown",t-1):e.removeAttribute("ss:MergeDown"),this},this.setStyle=function(t){if(!(t instanceof a))throw"Invalid argument, Style expected";return e.setAttribute("ss:StyleID",t.getId()),this}}}},a=function(e){var n=DayPilot.guid();e.setAttribute("ss:ID",n);var i=t.createElement("ss:Alignment");e.appendChild(i);var o=t.createElement("ss:Interior");e.appendChild(o);var r=t.createElement("ss:Borders");e.appendChild(r),this.setHorizontalAlignment=function(e){i.setAttribute("ss:Horizontal",e)},this.setVerticalAlignment=function(e){i.setAttribute("ss:Vertical",e)},this.setBackColor=function(e){var t=DayPilot.Util.normalizeColor(e);o.setAttribute("ss:Color",t),o.setAttribute("ss:Pattern","Solid")},this.setBorderColor=function(e){function n(e,n){var i=t.createElement("ss:Border");return i.setAttribute("ss:Position",e),i.setAttribute("ss:LineStyle","Continuous"),i.setAttribute("ss:Color",DayPilot.Util.normalizeColor(n)),i}this.clearBorders();var i=n("Left",e);r.appendChild(i);var o=n("Right",e);r.appendChild(o);var a=n("Top",e);r.appendChild(a);var l=n("Bottom",e);r.appendChild(l)},this.clearBorders=function(){for(;r.firstChild;)r.removeChild(r.firstChild)},this.getId=function(){return n},this.setId=function(t){e.setAttribute("ss:ID",n=t)},this.setName=function(t){e.setAttribute("ss:Name",t)}};this.init()},DayPilot.Export=function(e){this.toElement=function(){return e.getElement()},this.dimensions=function(){return{width:e.getWidth(),height:e.getHeight()}},this.toHtml=function(){return e.getSource()},this.toDataUri=function(){return e.getDataUri()},this.toBlob=function(){return e.getBlob()},this.print=function(t){(t=t||{}).orientation=t.orientation||"portrait";var n=document.createElement("iframe");n.setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("frameborder",0),n.setAttribute("src","about:blank"),n.onload=function(){var i=n.contentWindow.document;if(i.body.appendChild(e.getElement()),"landscape"===t.orientation){var o=DayPilot.sheet(i);o.add("@page","size: landscape;"),o.commit()}n.contentWindow.document.execCommand("print",!1,null)||(n.contentWindow.focus(),n.contentWindow.print()),setTimeout(function(){document.body.removeChild(n)},10)},document.body.appendChild(n)},this.download=function(t){t=t||e.getDefaultFileName();var n=e.getBlob();DayPilot.Util.downloadBlob(n,t)}},DayPilot.Exception=function(e){return new Error(e)},DayPilot.Locale=function(e,t){if(this.id=e,this.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.dayNamesShort=["Su","Mo","Tu","We","Th","Fr","Sa"],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.monthNamesShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.datePattern="M/d/yyyy",this.timePattern="H:mm",this.dateTimePattern="M/d/yyyy H:mm",this.timeFormat="Clock12Hours",this.weekStarts=0,t)for(var n in t)this[n]=t[n]},DayPilot.Locale.all={},DayPilot.Locale.find=function(e){if(!e)return null;var t=e.toLowerCase();return t.length>2&&(t=DayPilot.Util.replaceCharAt(t,2,"-")),DayPilot.Locale.all[t]},DayPilot.Locale.register=function(e){DayPilot.Locale.all[e.id]=e},DayPilot.Locale.register(new DayPilot.Locale("ca-es",{dayNames:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],dayNamesShort:["dg","dl","dt","dc","dj","dv","ds"],monthNames:["gener","febrer","mar\xe7","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre",""],monthNamesShort:["gen.","febr.","mar\xe7","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des.",""],timePattern:"H:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("cs-cz",{dayNames:["ned\u011ble","pond\u011bl\xed","\xfater\xfd","st\u0159eda","\u010dtvrtek","p\xe1tek","sobota"],dayNamesShort:["ne","po","\xfat","st","\u010dt","p\xe1","so"],monthNames:["leden","\xfanor","b\u0159ezen","duben","kv\u011bten","\u010derven","\u010dervenec","srpen","z\xe1\u0159\xed","\u0159\xedjen","listopad","prosinec",""],monthNamesShort:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""],timePattern:"H:mm",datePattern:"d. M. yyyy",dateTimePattern:"d. M. yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("da-dk",{dayNames:["s\xf8ndag","mandag","tirsdag","onsdag","torsdag","fredag","l\xf8rdag"],dayNamesShort:["s\xf8","ma","ti","on","to","fr","l\xf8"],monthNames:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december",""],monthNamesShort:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""],timePattern:"HH:mm",datePattern:"dd-MM-yyyy",dateTimePattern:"dd-MM-yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("de-at",{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["J\xe4nner","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],monthNamesShort:["J\xe4n","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("de-ch",{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],monthNamesShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("de-de",{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],monthNamesShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("de-lu",{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],monthNamesShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("en-au",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"h:mm tt",datePattern:"d/MM/yyyy",dateTimePattern:"d/MM/yyyy h:mm tt",timeFormat:"Clock12Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("en-ca",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"h:mm tt",datePattern:"yyyy-MM-dd",dateTimePattern:"yyyy-MM-dd h:mm tt",timeFormat:"Clock12Hours",weekStarts:0})),DayPilot.Locale.register(new DayPilot.Locale("en-gb",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("en-us",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"h:mm tt",datePattern:"M/d/yyyy",dateTimePattern:"M/d/yyyy h:mm tt",timeFormat:"Clock12Hours",weekStarts:0})),DayPilot.Locale.register(new DayPilot.Locale("es-es",{dayNames:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],dayNamesShort:["D","L","M","X","J","V","S"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],monthNamesShort:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic.",""],timePattern:"H:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("es-mx",{dayNames:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],dayNamesShort:["do.","lu.","ma.","mi.","ju.","vi.","s\xe1."],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],monthNamesShort:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic.",""],timePattern:"hh:mm tt",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy hh:mm tt",timeFormat:"Clock12Hours",weekStarts:0})),DayPilot.Locale.register(new DayPilot.Locale("eu-es",{dayNames:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],dayNamesShort:["ig","al","as","az","og","or","lr"],monthNames:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua",""],monthNamesShort:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe.",""],timePattern:"H:mm",datePattern:"yyyy/MM/dd",dateTimePattern:"yyyy/MM/dd H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("fi-fi",{dayNames:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],dayNamesShort:["su","ma","ti","ke","to","pe","la"],monthNames:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kes\xe4kuu","hein\xe4kuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu",""],monthNamesShort:["tammi","helmi","maalis","huhti","touko","kes\xe4","hein\xe4","elo","syys","loka","marras","joulu",""],timePattern:"H:mm",datePattern:"d.M.yyyy",dateTimePattern:"d.M.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("fr-be",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"dd-MM-yy",dateTimePattern:"dd-MM-yy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("fr-ca",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"yyyy-MM-dd",dateTimePattern:"yyyy-MM-dd HH:mm",timeFormat:"Clock24Hours",weekStarts:0})),DayPilot.Locale.register(new DayPilot.Locale("fr-ch",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("fr-fr",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("fr-lu",{dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["di","lu","ma","me","je","ve","sa"],monthNames:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre",""],monthNamesShort:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c.",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("gl-es",{dayNames:["domingo","luns","martes","m\xe9rcores","xoves","venres","s\xe1bado"],dayNamesShort:["do","lu","ma","m\xe9","xo","ve","s\xe1"],monthNames:["xaneiro","febreiro","marzo","abril","maio","xu\xf1o","xullo","agosto","setembro","outubro","novembro","decembro",""],monthNamesShort:["xan","feb","mar","abr","maio","xu\xf1o","xul","ago","set","out","nov","dec",""],timePattern:"H:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("it-it",{dayNames:["domenica","luned\xec","marted\xec","mercoled\xec","gioved\xec","venerd\xec","sabato"],dayNamesShort:["do","lu","ma","me","gi","ve","sa"],monthNames:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],monthNamesShort:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("it-ch",{dayNames:["domenica","luned\xec","marted\xec","mercoled\xec","gioved\xec","venerd\xec","sabato"],dayNamesShort:["do","lu","ma","me","gi","ve","sa"],monthNames:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],monthNamesShort:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("ja-jp",{dayNames:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],dayNamesShort:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],monthNames:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12",""],timePattern:"H:mm",datePattern:"yyyy/MM/dd",dateTimePattern:"yyyy/MM/dd H:mm",timeFormat:"Clock24Hours",weekStarts:0})),DayPilot.Locale.register(new DayPilot.Locale("ko-kr",{dayNames:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"],dayNamesShort:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],monthNames:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12",""],timePattern:"tt h:mm",datePattern:"yyyy-MM-dd",dateTimePattern:"yyyy-MM-dd tt h:mm",timeFormat:"Clock12Hours",weekStarts:0})),DayPilot.Locale.register(new DayPilot.Locale("nb-no",{dayNames:["s\xf8ndag","mandag","tirsdag","onsdag","torsdag","fredag","l\xf8rdag"],dayNamesShort:["s\xf8","ma","ti","on","to","fr","l\xf8"],monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("nl-nl",{dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zo","ma","di","wo","do","vr","za"],monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""],timePattern:"HH:mm",datePattern:"d-M-yyyy",dateTimePattern:"d-M-yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("nl-be",{dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zo","ma","di","wo","do","vr","za"],monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""],timePattern:"H:mm",datePattern:"d/MM/yyyy",dateTimePattern:"d/MM/yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("nn-no",{dayNames:["s\xf8ndag","m\xe5ndag","tysdag","onsdag","torsdag","fredag","laurdag"],dayNamesShort:["s\xf8","m\xe5","ty","on","to","fr","la"],monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""],timePattern:"HH:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("pt-br",{dayNames:["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"],dayNamesShort:["D","S","T","Q","Q","S","S"],monthNames:["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],monthNamesShort:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:0})),DayPilot.Locale.register(new DayPilot.Locale("pl-pl",{dayNames:["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],dayNamesShort:["N","Pn","Wt","\u015ar","Cz","Pt","So"],monthNames:["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017adziernik","listopad","grudzie\u0144",""],monthNamesShort:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru",""],timePattern:"HH:mm",datePattern:"yyyy-MM-dd",dateTimePattern:"yyyy-MM-dd HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("pt-pt",{dayNames:["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"],dayNamesShort:["D","S","T","Q","Q","S","S"],monthNames:["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],monthNamesShort:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""],timePattern:"HH:mm",datePattern:"dd/MM/yyyy",dateTimePattern:"dd/MM/yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:0})),DayPilot.Locale.register(new DayPilot.Locale("ro-ro",{dayNames:["duminic\u0103","luni","mar\u021bi","miercuri","joi","vineri","s\xe2mb\u0103t\u0103"],dayNamesShort:["D","L","Ma","Mi","J","V","S"],monthNames:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie",""],monthNamesShort:["ian.","feb.","mar.","apr.","mai.","iun.","iul.","aug.","sep.","oct.","nov.","dec.",""],timePattern:"H:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("ru-ru",{dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c",""],monthNamesShort:["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a",""],timePattern:"H:mm",datePattern:"dd.MM.yyyy",dateTimePattern:"dd.MM.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("sk-sk",{dayNames:["nede\u013ea","pondelok","utorok","streda","\u0161tvrtok","piatok","sobota"],dayNamesShort:["ne","po","ut","st","\u0161t","pi","so"],monthNames:["janu\xe1r","febru\xe1r","marec","apr\xedl","m\xe1j","j\xfan","j\xfal","august","september","okt\xf3ber","november","december",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12",""],timePattern:"H:mm",datePattern:"d.M.yyyy",dateTimePattern:"d.M.yyyy H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("sv-se",{dayNames:["s\xf6ndag","m\xe5ndag","tisdag","onsdag","torsdag","fredag","l\xf6rdag"],dayNamesShort:["s\xf6","m\xe5","ti","on","to","fr","l\xf6"],monthNames:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december",""],monthNamesShort:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""],timePattern:"HH:mm",datePattern:"yyyy-MM-dd",dateTimePattern:"yyyy-MM-dd HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("tr-tr",{dayNames:["Pazar","Pazartesi","Sal\u0131","\xc7ar\u015famba","Per\u015fembe","Cuma","Cumartesi"],dayNamesShort:["Pz","Pt","Sa","\xc7a","Pe","Cu","Ct"],monthNames:["Ocak","\u015eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011fustos","Eyl\xfcl","Ekim","Kas\u0131m","Aral\u0131k",""],monthNamesShort:["Oca","\u015eub","Mar","Nis","May","Haz","Tem","A\u011fu","Eyl","Eki","Kas","Ara",""],timePattern:"HH:mm",datePattern:"d.M.yyyy",dateTimePattern:"d.M.yyyy HH:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("zh-cn",{dayNames:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayNamesShort:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],monthNames:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708",""],monthNamesShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708",""],timePattern:"H:mm",datePattern:"yyyy/M/d",dateTimePattern:"yyyy/M/d H:mm",timeFormat:"Clock24Hours",weekStarts:1})),DayPilot.Locale.US=DayPilot.Locale.find("en-us"),DayPilot.Switcher=function(e){function t(e,t,i){var o={};o.start=e,o.end=t,o.day=i,o.target=n.active.control,o.preventDefault=function(){this.preventDefault.value=!0};var r=n.s;r&&r.start===o.start&&r.end===o.end&&r.day===o.day&&r.target===o.target||(n.s=o,"function"==typeof n.onChange&&(n.onChange(o),o.preventDefault.value)||"function"==typeof n.onTimeRangeSelect&&(n.onTimeRangeSelect(o),o.preventDefault.value)||(n.active.sendNavigate(n.day),"function"==typeof n.onChanged&&n.onChanged(o),"function"==typeof n.onTimeRangeSelected&&n.onTimeRangeSelected(o)))}var n=this;this.views=[],this.triggers=[],this.navigator={},this.selectedClass=null,this.active=null,this.day=DayPilot.Date.today(),this.onChange=null,this.onChanged=null,this.navigator.updateMode=function(e){var t=n.navigator.control;t&&(t.selectMode=e,t.select(n.day))},this.addView=function(e,t){var i;if("string"==typeof e){if(!(i=document.getElementById(e)))throw"Element not found: "+e}else i=e;var o=i,r={isView:!0};return r.id=o.id,r.control=o,r.options=t||{},r.hide=function(){o.hide?o.hide():o.nav&&o.nav.top?o.nav.top.style.display="none":o.style.display="none"},r.sendNavigate=function(e){o.backendUrl||"function"==typeof WebForm_DoCallback&&o.uniqueID?o.commandCallBack&&o.commandCallBack("navigate",{day:e}):(o.startDate=e,o.update())},r.show=function(){n.m(),o.show?o.show():o.nav&&o.nav.top?o.nav.top.style.display="":o.style.display=""},r.selectMode=function(){if(r.options.navigatorSelectMode)return r.options.navigatorSelectMode;if(o.isCalendar)switch(o.viewType){case"Day":return"day";case"Week":case"WorkWeek":return"week";default:return"day"}else if(o.isMonth)switch(o.viewType){case"Month":return"month";case"Weeks":return"week";default:return"day"}return"day"},this.views.push(r),r},this.addTrigger=function(e,t){var i;if("string"==typeof e){if(!(i=document.getElementById(e)))throw"Element not found: "+e}else i=e;var o=this.n(t);o||(o=this.addView(t));var r={isTrigger:!0};return r.element=i,r.id=i.id,r.view=o,r.onClick=function(e){n.show(r),n.p(r),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},DayPilot.re(i,"click",r.onClick),this.triggers.push(r),r},this.addButton=this.addTrigger,this.select=function(e){var t=this.q(e);t?t.onClick():this.triggers.length>0&&this.triggers[0].onClick()},this.q=function(e){for(var t=0;t<this.triggers.length;t++){var n=this.triggers[t];if(n.id===e)return n}return null},this.p=function(e){if(this.selectedClass){for(var t=0;t<this.triggers.length;t++)DayPilot.Util.removeClass(this.triggers[t].element,this.selectedClass);DayPilot.Util.addClass(e.element,this.selectedClass)}},this.addNavigator=function(e){n.navigator.control=e,e.timeRangeSelectedHandling="JavaScript",e.onTimeRangeSelected=function(){var i,o,r;if(1===e.api)i=arguments[0],o=arguments[1],r=arguments[2];else{var a=arguments[0];i=a.start,o=a.end,r=a.day}n.day=r,t(i,o,r)}},this.show=function(e){var i,o;if(e.isTrigger)i=(o=e).view;else if(i=e.isView?e:this.n(e),this.active===i)return;if(n.onSelect){var r={};r.source=o?o.element:null,r.target=i.control,n.onSelect(r)}this.active=i,i.show();var a=i.selectMode();n.navigator.updateMode(a),t(n.navigator.control.selectionStart,n.navigator.control.selectionEnd.addDays(1),n.navigator.control.selectionDay)},this.n=function(e){for(var t=0;t<this.views.length;t++)if(this.views[t].control===e)return this.views[t];return null},this.m=function(){for(var e=0;e<this.views.length;e++)this.views[e].hide()},this.events={},this.events.load=function(e,t,i){if(!n.active||!n.active.control)throw"DayPilot.Switcher.events.load(): Active view not found";n.active.control.events.load(e,t,i)},this.s=null,this.t=function(){if(e)for(var t in e)"triggers"===t?DayPilot.list(e.triggers).forEach(function(e){n.addTrigger(e.id,e.view)}):"navigator"===t?n.addNavigator(e.navigator):n[t]=e[t]},this.t()},function(){if(!DayPilot.Global.defaultCss){var e=DayPilot.sheet();e.add(".bubble_default_main","cursor: default; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"),e.add(".bubble_default_main_inner",'border-radius: 5px; padding: 4px;color: #666;background: #eeeeee; background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");border: 1px solid #ccc;-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;-moz-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);-webkit-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);'),e.add(".calendar_default_main","border: 1px solid #c0c0c0; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"),e.add(".calendar_default_main *, .calendar_default_main *:before, .calendar_default_main *:after","box-sizing: content-box;"),e.add(".calendar_default_rowheader_inner,.calendar_default_cornerright_inner,.calendar_default_corner_inner,.calendar_default_colheader_inner,.calendar_default_alldayheader_inner","color: #333;background: #f3f3f3;"),e.add(".calendar_default_cornerright_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;\tborder-bottom: 1px solid #c0c0c0;"),e.add(".calendar_default_direction_rtl .calendar_default_cornerright_inner","border-right: 1px solid #c0c0c0;"),e.add(".calendar_default_rowheader_inner","font-size: 16pt;text-align: right; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0; padding: 3px;"),e.add(".calendar_default_direction_rtl .calendar_default_rowheader_inner","border-right: none;"),e.add(".calendar_default_corner_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"),e.add(".calendar_default_direction_rtl .calendar_default_corner_inner","border-right: none;"),e.add(".calendar_default_rowheader_minutes","font-size:10px;vertical-align: super;padding-left: 2px;padding-right: 2px;"),e.add(".calendar_default_colheader_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0; display: flex; align-items: center; justify-content: center;"),e.add(".calendar_default_cell_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #ddd;border-bottom: 1px solid #ddd; background: #f9f9f9;"),e.add(".calendar_default_cell_business .calendar_default_cell_inner","background: #fff"),e.add(".calendar_default_alldayheader_inner","text-align: center;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"),e.add(".calendar_default_message","opacity: 0.9; padding: 10px; color: #ffffff;background: #ffa216;"),e.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner","color: #666; border: 1px solid #999;"),e.add(".calendar_default_event_bar","top: 0px;bottom: 0px;left: 0px;width: 4px;background-color: #9dc8e8;"),e.add(".calendar_default_event_bar_inner","position: absolute;width: 4px;background-color: #1066a8;"),e.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".calendar_default_selected .calendar_default_event_inner","background: #ddd;"),e.add(".calendar_default_alldayevent_inner","position: absolute;top: 2px;bottom: 2px;left: 2px;right: 2px;overflow:hidden;padding: 2px;margin-right: 1px;"),e.add(".calendar_default_event_withheader .calendar_default_event_inner","padding-top: 15px;"),e.add(".calendar_default_event","cursor: default;"),e.add(".calendar_default_event_inner","position: absolute;overflow: hidden;top: 0px;bottom: 0px;left: 0px;right: 0px;padding: 2px 2px 2px 6px;"),e.add(".calendar_default_shadow_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;background-color: #666666; opacity: 0.5;"),e.add(".calendar_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),e.add(".calendar_default_event_delete:hover","opacity: 1;-ms-filter: none;"),e.add(".calendar_default_scroll_up","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAB3RJTUUH2wESDiYcrhwCiQAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAARnQU1BAACxjwv8YQUAAACcSURBVHjaY2AgF9wWsTW6yGMlhi7OhC7AyMDQzMnBXIpFHAFuCtuaMTP+P8nA8P/b1x//FfW/HHuF1UQmxv+NUP1c3OxMVVhNvCVi683E8H8LXOY/w9+fTH81tF8fv4NiIpBRj+YoZtZ/LDUoJmKYhsVUpv0MDiyMDP96sIYV0FS2/8z9ICaLlOhvS4b/jC//MzC8xBG0vJeF7GQBlK0xdiUzCtsAAAAASUVORK5CYII=);"),e.add(".calendar_default_scroll_down","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAACqSURBVChTY7wpam3L9J+xmQEP+PGPKZZxP4MDi4zI78uMDIwa2NT+Z2DYovrmiC+TI8OBP/8ZmEqwGvif4e8vxr+FIDkmEKH25vBWBgbG0+iK/zEwLtF+ffwOXCGI8Y+BoRFFIdC030x/WmBiYBNhpgLdswNJ8RSYaSgmgk39z1gPUfj/29ef/9rwhQTDHRHbrbdEbLvRFcGthkkAra/9/uMvhkK8piNLAgCRpTnNn4AEmAAAAABJRU5ErkJggg==);"),e.add(".calendar_default_now","background-color: red;"),e.add(".calendar_default_now:before","content: ''; top: -5px; border-width: 5px; border-color: transparent transparent transparent red; border-style: solid; width: 0px; height:0px; position: absolute; -moz-transform: scale(.9999);"),e.add(".calendar_default_shadow_forbidden .calendar_default_shadow_inner","background-color: red;"),e.add(".calendar_default_shadow_top",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".calendar_default_shadow_bottom",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".calendar_default_crosshair_vertical, .calendar_default_crosshair_horizontal, .calendar_default_crosshair_left, .calendar_default_crosshair_top","background-color: gray; opacity: 0.2;"),e.add(".calendar_default_loading","background-color: orange; color: white; padding: 2px;"),e.add(".calendar_default_scroll","background-color: #f3f3f3;"),e.add(".calendar_default_event_moving_source","opacity: 0.5;"),e.add(".menu_default_main","user-select:none; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;font-size: 13px;border: 1px solid #dddddd;background-color: white;padding: 0px;cursor: default;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAABCAIAAABG0om7AAAAKXRFWHRDcmVhdGlvbiBUaW1lAHBvIDEwIDUgMjAxMCAyMjozMzo1OSArMDEwMGzy7+IAAAAHdElNRQfaBQoUJAesj4VUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAABGdBTUEAALGPC/xhBQAAABVJREFUeNpj/P//PwO1weMnT2RlZAAYuwX/4oA3BgAAAABJRU5ErkJggg==);background-repeat: repeat-y;xborder-radius: 5px;-moz-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);-webkit-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);"),e.add(".menu_default_main, .menu_default_main *, .menu_default_main *:before, .menu_default_main *:after","box-sizing: content-box;"),e.add(".menu_default_title","background-color: #f2f2f2;border-bottom: 1px solid gray;padding: 4px 4px 4px 37px;"),e.add(".menu_default_main a","padding: 2px 2px 2px 35px;color: black;text-decoration: none;cursor: default;"),e.add(".menu_default_main a img","margin-left: 6px;margin-top: 2px;"),e.add(".menu_default_item_text","display: block;height: 20px;line-height: 20px; overflow:hidden;padding-left: 2px;padding-right: 20px; white-space: nowrap;"),e.add(".menu_default_main a:hover","background-color: #f3f3f3;"),e.add(".menu_default_main div div","border-top: 1px solid #dddddd;margin-top: 2px;margin-bottom: 2px;margin-left: 28px;"),e.add(".menu_default_main a.menu_default_item_disabled","color: #ccc"),e.add(".menu_default_item_haschildren.menu_default_item_haschildren_active",'background: #eeeeee;background: -webkit-gradient(linear, left top, left bottom, from(#efefef), to(#e6e6e6));background: -webkit-linear-gradient(top, #efefef 0%, #e6e6e6);background: -moz-linear-gradient(top, #efefef 0%, #e6e6e6);background: -ms-linear-gradient(top, #efefef 0%, #e6e6e6);background: -o-linear-gradient(top, #efefef 0%, #e6e6e6);background: linear-gradient(top, #efefef 0%, #e6e6e6);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#efefef", endColorStr="#e6e6e6");'),e.add(".menu_default_item_haschildren a:before","content: ''; border-width: 6px; border-color: transparent transparent transparent black; border-style: solid; width: 0px; height:0px; position: absolute; right: 5px; margin-top: 4px;"),e.add(".menu_default_item_icon","position: absolute; top:0px; left: 0px; padding: 2px 2px 2px 8px;"),e.add(".menu_default_item a i","height: 20px;line-height: 20px;"),e.add(".menubar_default_main","border-bottom: 1px solid #ccc; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px; user-select:none;"),e.add(".menubar_default_item","display: inline-block;  padding: 6px 10px; cursor: default;"),e.add(".menubar_default_item:hover","background-color: #f2f2f2;"),e.add(".menubar_default_item_active","background-color: #f2f2f2;"),e.add(".month_default_main","border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;color: #333;"),e.add(".month_default_main *, .month_default_main *:before, .month_default_main *:after","box-sizing: content-box;"),e.add(".month_default_cell_inner","border-right: 1px solid #ddd;border-bottom: 1px solid #ddd;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;background-color: #f9f9f9;"),e.add(".month_default_cell_business .month_default_cell_inner","background-color: #fff;"),e.add(".month_default_cell_header","text-align: right; padding: 4px; box-sizing: border-box;"),e.add(".month_default_header_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;cursor: default;color: #333;background: #f3f3f3; overflow:hidden; display: flex; align-items: center; justify-content: center;"),e.add(".month_default_message","padding: 10px;opacity: 0.9; color: #ffffff;background: #ffa216;"),e.add(".month_default_event_inner","position: absolute;top: 0px;bottom: 0px;left: 1px;right: 1px;overflow:hidden;padding: 2px;padding-left: 5px;color: #333;background: #fff;background: linear-gradient(to bottom, #ffffff 0%, #eeeeee);border: 1px solid #999;border-radius: 0px;display: flex; align-items: center;"),e.add(".month_default_event_continueright .month_default_event_inner","border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-right-style: dotted;"),e.add(".month_default_event_continueleft .month_default_event_inner","border-top-left-radius: 0px;border-bottom-left-radius: 0px;border-left-style: dotted;"),e.add(".month_default_selected .month_default_event_inner","background: #ddd;"),e.add(".month_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;"),e.add(".month_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),e.add(".month_default_event_delete:hover","opacity: 1;-ms-filter: none;"),e.add(".month_default_event_timeleft","color: #ccc; font-size: 8pt"),e.add(".month_default_event_timeright","color: #ccc; font-size: 8pt; text-align: right;"),e.add(".month_default_loading","background-color: orange; color: white; padding: 2px;"),e.add(".navigator_default_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"),e.add(".navigator_default_main *, .navigator_default_main *:before, .navigator_default_main *:after","box-sizing: content-box;"),e.add(".navigator_default_month","font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 12px;"),e.add(".navigator_default_day","color: black;"),e.add(".navigator_default_weekend","background-color: #f0f0f0;"),e.add(".navigator_default_dayheader","color: black;"),e.add(".navigator_default_line","border-bottom: 1px solid #c0c0c0;"),e.add(".navigator_default_dayother","color: gray;"),e.add(".navigator_default_todaybox","border: 1px solid red;"),e.add(".navigator_default_title, .navigator_default_titleleft, .navigator_default_titleright","border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"),e.add(".navigator_default_busy","font-weight: bold;"),e.add(".navigator_default_cell","text-align: center;"),e.add(".navigator_default_select .navigator_default_cell_box","background-color: #FFE794; opacity: 0.5;"),e.add(".navigator_default_title","text-align: center;"),e.add(".navigator_default_titleleft, .navigator_default_titleright","text-align: center;"),e.add(".navigator_default_dayheader","text-align: center;"),e.add(".navigator_default_weeknumber","text-align: center;"),e.add(".navigator_default_cell_text","cursor: pointer;"),e.add(".scheduler_default_main *, .scheduler_default_main *:before, .scheduler_default_main *:after","box-sizing: content-box;"),e.add(".scheduler_default_main","box-sizing: content-box; border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"),e.add(".scheduler_default_selected .scheduler_default_event_inner","background: #ddd;"),e.add(".scheduler_default_timeheader_scroll","background: #f3f3f3;"),e.add(".scheduler_default_message","opacity: 0.9; padding: 10px; color: #ffffff; background: #ffa216;"),e.add(".scheduler_default_timeheadergroup,.scheduler_default_timeheadercol","color: #333;background: #f3f3f3;"),e.add(".scheduler_default_rowheader,.scheduler_default_corner","color: #333;background: #f3f3f3;"),e.add(".scheduler_default_rowheader.scheduler_default_rowheader_selected","background-color: #aaa; background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent); background-size: 20px 20px;"),e.add(".scheduler_default_rowheader_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e0e0e0;padding: 7px;display: flex; align-items: center;"),e.add(".scheduler_default_timeheadergroup_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"),e.add(".scheduler_default_timeheadercol_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"),e.add(".scheduler_default_timeheader_float","display: flex; align-items: center; justify-content: center;"),e.add(".scheduler_default_divider, .scheduler_default_splitter","background-color: #c0c0c0;"),e.add(".scheduler_default_divider_horizontal","background-color: #c0c0c0;"),e.add(".scheduler_default_matrix_vertical_line","background-color: #eee;"),e.add(".scheduler_default_matrix_vertical_break","background-color: #999;"),e.add(".scheduler_default_matrix_horizontal_line","background-color: #eee;"),e.add(".scheduler_default_resourcedivider","background-color: #c0c0c0;"),e.add(".scheduler_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;"),e.add(".scheduler_default_event","font-size:13px;color:#333;"),e.add(".scheduler_default_event_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px 2px 2px 2px;overflow:hidden;border:1px solid #ccc; display: flex; align-items: center;"),e.add(".scheduler_default_event_bar","top:0px;left:0px;right:0px;height:4px;background-color:#9dc8e8;"),e.add(".scheduler_default_event_bar_inner","position:absolute;height:4px;background-color:#1066a8;"),e.add(".scheduler_default_event_inner",'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".scheduler_default_event_float","display: flex; align-items: center;"),e.add(".scheduler_default_event_float_inner","padding:2px 2px 2px 8px; position: relative;"),e.add(".scheduler_default_event_float_inner:after",'content:"";border-color: transparent #666 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:4px;left:-4px;'),e.add(".scheduler_default_event_focus","outline: red 2px solid; z-index: 100; opacity: 0.5;"),e.add(".scheduler_default_columnheader_inner","font-weight: bold;"),e.add(".scheduler_default_columnheader_splitter","box-sizing: border-box; border-right: 1px solid #c0c0c0;"),e.add(".scheduler_default_columnheader_splitter:hover","background-color: #c0c0c0;"),e.add(".scheduler_default_columnheader_cell_inner","position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; padding: 2px; display: flex; align-items: center;"),e.add(".scheduler_default_cell","background-color: #f9f9f9;"),e.add(".scheduler_default_cell.scheduler_default_cell_business","background-color: #fff;"),e.add(".scheduler_default_cell.scheduler_default_cell_business.scheduler_default_cell_selected,.scheduler_default_cell.scheduler_default_cell_selected","background-color: #ccc; background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent); background-size: 20px 20px;"),e.add(".scheduler_default_tree_image_no_children",""),e.add(".scheduler_default_tree_image_expand","background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J00gMS41IDAuNSBMIDYuNSA1IEwgMS41IDkuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6Izk5OTk5OTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=);"),e.add(".scheduler_default_tree_image_collapse","background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMS41IEwgNSA2LjUgTCA5LjUgMS41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==);"),e.add(".scheduler_default_event_delete","background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTInIGhlaWdodD0nMTInIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgMTEuNSAxMS41IE0gMC41IDExLjUgTCAxMS41IDAuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6IzQ2NDY0NjtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=) no-repeat center center; opacity: 0.6; cursor: pointer;"),e.add(".scheduler_default_event_delete:hover","opacity: 1;"),e.add(".scheduler_default_rowmove_handle","background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),e.add(".scheduler_default_rowmove_source","background-color: black; opacity: 0.2;"),e.add(".scheduler_default_rowmove_position_before, .scheduler_default_rowmove_position_after","background-color: #999; height: 2px;"),e.add(".scheduler_default_rowmove_position_child","margin-left: 10px; background-color: #999; height: 2px;"),e.add(".scheduler_default_rowmove_position_child:before","content: '+'; color: #999; position: absolute; top: -8px; left: -10px;"),e.add(".scheduler_default_rowmove_position_forbidden","background-color: red; height: 2px; margin-left: 10px;"),e.add(".scheduler_default_rowmove_position_forbidden:before","content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"),e.add(".scheduler_default_link_horizontal","border-bottom-style: solid; border-bottom-color: #cc0000"),e.add(".scheduler_default_link_vertical","border-right-style: solid; border-right-color: #cc0000"),e.add(".scheduler_default_link_arrow_right:before","content: ''; border-width: 6px; border-color: transparent transparent transparent #cc0000; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".scheduler_default_link_arrow_left:before","content: ''; border-width: 6px; border-color: transparent #cc0000 transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".scheduler_default_link_arrow_down:before","content: ''; border-width: 6px; border-color: #cc0000 transparent transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".scheduler_default_link_arrow_up:before","content: ''; border-width: 6px; border-color: transparent transparent #cc0000 transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".scheduler_default_shadow_overlap .scheduler_default_shadow_inner","background-color: red;"),e.add(".scheduler_default_block","background-color: #808080; opacity: 0.5;"),e.add(".scheduler_default_main .scheduler_default_event_group","box-sizing: border-box; font-size:13px; color:#666; padding:2px; overflow:hidden; border:1px solid #ccc; background-color: #fff; display: flex; align-items: center; white-space: nowrap;"),e.add(".scheduler_default_main .scheduler_default_header_icon","box-sizing: border-box; border: 1px solid #c0c0c0; background-color: #f5f5f5; color: #000;"),e.add(".scheduler_default_header_icon:hover","background-color: #ccc;"),e.add(".scheduler_default_header_icon_hide:before","content: '\\00AB';"),e.add(".scheduler_default_header_icon_show:before","content: '\\00BB';"),e.add(".scheduler_default_row_new .scheduler_default_rowheader_inner","padding-left: 10px; color: #666; cursor: text; background-position: 0px 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"),e.add(".scheduler_default_row_new .scheduler_default_rowheader_inner:hover","background: white; color: white;"),e.add(".scheduler_default_rowheader textarea","padding: 3px;"),e.add(".scheduler_default_rowheader_scroll","cursor: default; background: #f3f3f3;"),e.add(".scheduler_default_shadow_forbidden .scheduler_default_shadow_inner","background-color: red;"),e.add(".scheduler_default_shadow_invalid .scheduler_default_shadow_inner","background-color: red;"),e.add(".scheduler_default_event_moving_source","opacity: 0.5;"),e.add(".scheduler_default_linkpoint","background-color: white; border: 1px solid gray; border-radius: 5px;"),e.add(".scheduler_default_linkpoint.scheduler_default_linkpoint_hover","background-color: black;"),e.add(".scheduler_default_event.scheduler_default_event_version .scheduler_default_event_inner","overflow:hidden; background-color: #cfdde8;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".scheduler_default_crosshair_vertical, .scheduler_default_crosshair_horizontal, .scheduler_default_crosshair_left, .scheduler_default_crosshair_top","background-color: gray; opacity: 0.2;"),e.add(".scheduler_default_link_dot","border-radius: 10px; background-color: #cc0000"),e.add(".scheduler_default_task_milestone .scheduler_default_event_inner","position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: #38761d; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"),e.add(".scheduler_default_event_left","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;"),e.add(".scheduler_default_event_right","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;"),e.add(".scheduler_default_main:focus","outline: none;"),e.add(".scheduler_default_cell_focus","outline: red 2px solid; outline-offset: -2px; z-index: 100; opacity: 0.5;"),e.add(".scheduler_default_cell_focus.scheduler_default_cell_focus_top","border-top: 4px solid red;"),e.add(".scheduler_default_cell_focus.scheduler_default_cell_focus_bottom","border-bottom: 4px solid red;"),e.add(".scheduler_default_selectionrectangle","background-color: #0000ff; border: 1px solid #000033; opacity: 0.4;"),e.add(".scheduler_default_link_shadow","border:1px solid black;"),e.add(".scheduler_default_link_shadow_circle","background-color:black;"),e.add(".scheduler_default_event_move_left","box-sizing: border-box; padding: 2px; border: 1px solid #ccc; background: #fff; background: linear-gradient(to bottom, #ffffff 0%, #eeeeee); display: flex; align-items: center;"),e.add(".scheduler_default_event_move_right","box-sizing: border-box; padding: 2px; border: 1px solid #ccc; background: #fff; background: linear-gradient(to bottom, #ffffff 0%, #eeeeee); display: flex; align-items: center;"),e.add(".scheduler_default_link_hover","box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"),e.add(".scheduler_default_sorticon","opacity: 0.2;background-position: center center; background-repeat: no-repeat; cursor: pointer;"),e.add(".scheduler_default_sorticon.scheduler_default_sorticon_asc","background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBvbHlnb24gcG9pbnRzPSI1IDEuNSwgMTAgMTAsIDAgMTAiLz48L3N2Zz4=');"),e.add(".scheduler_default_sorticon.scheduler_default_sorticon_desc","background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBvbHlnb24gcG9pbnRzPSI1IDguNSwgMCAwLCAxMCAwIi8+PC9zdmc+');"),e.add(".scheduler_default_sorticon.scheduler_default_sorticon_active","opacity: 1;"),e.add(".scheduler_default_loading","background-color: orange; color: white; padding: 2px;"),e.add(".gantt_default_selected .gantt_default_event_inner","background: #ddd;"),e.add(".gantt_default_main","border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"),e.add(".gantt_default_main *, .gantt_default_main *:before, .gantt_default_main *:after","box-sizing: content-box;"),e.add(".gantt_default_timeheader","cursor: default;color: #666;"),e.add(".gantt_default_message","opacity: 0.9;padding: 10px; color: #ffffff;background: #ffa216;"),e.add(".gantt_default_timeheadergroup,.gantt_default_timeheadercol","color: #333;background: #f3f3f3;"),e.add(".gantt_default_rowheader,.gantt_default_corner","color: #333;background: #f3f3f3;"),e.add(".gantt_default_rowheader.gantt_default_rowheader_selected","background-color: #aaa;background-image: -webkit-gradient(linear, 0 100%, 100% 0,color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".gantt_default_rowheader_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e0e0e0;padding: 7px;display: flex; align-items: center;"),e.add(".gantt_default_timeheadergroup_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"),e.add(".gantt_default_timeheadercol_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"),e.add(".gantt_default_timeheader_float","display: flex; align-items: center; justify-content: center;"),e.add(".gantt_default_divider, .gantt_default_splitter","background-color: #c0c0c0;"),e.add(".gantt_default_divider_horizontal","background-color: #c0c0c0;"),e.add(".gantt_default_matrix_vertical_line","background-color: #eee;"),e.add(".gantt_default_matrix_vertical_break","background-color: #000;"),e.add(".gantt_default_matrix_horizontal_line","background-color: #eee;"),e.add(".gantt_default_resourcedivider","background-color: #c0c0c0;"),e.add(".gantt_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;"),e.add(".gantt_default_event","color:#666;"),e.add(".gantt_default_event_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px 2px 2px 2px;overflow:hidden;border:1px solid #ccc; display: flex; align-items: center;"),e.add(".gantt_default_event_bar","top:0px;left:0px;right:0px;height:4px;background-color:#9dc8e8;"),e.add(".gantt_default_event_bar_inner","position:absolute;height:4px;background-color:#1066a8;"),e.add(".gantt_default_event_inner",'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".gantt_default_event_float_inner","padding:6px 2px 2px 8px;"),e.add(".gantt_default_event_float_inner:after",'content:"";border-color: transparent #666 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:8px;left:-4px;'),e.add(".gantt_default_columnheader_inner","font-weight: bold;"),e.add(".gantt_default_columnheader_splitter","background-color: #666;opacity: 0.5;"),e.add(".gantt_default_columnheader_cell_inner","position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; padding: 2px; display: flex; align-items: center;"),e.add(".gantt_default_cell","background-color: #f9f9f9;"),e.add(".gantt_default_cell.gantt_default_cell_business","background-color: #fff;"),e.add(".gantt_default_cell.gantt_default_cell_business.gantt_default_cell_selected,.gantt_default_cell.gantt_default_cell_selected","background-color: #ccc;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".gantt_default_tree_image_no_children",""),e.add(".gantt_default_tree_image_expand","background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J00gMS41IDAuNSBMIDYuNSA1IEwgMS41IDkuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6Izk5OTk5OTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=);"),e.add(".gantt_default_tree_image_collapse","background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMS41IEwgNSA2LjUgTCA5LjUgMS41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==);"),e.add(".gantt_default_event_move_left",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".gantt_default_event_move_right",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".gantt_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),e.add(".gantt_default_event_delete:hover","opacity: 1;-ms-filter: none;"),e.add(".gantt_default_rowmove_handle","background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),e.add(".gantt_default_rowmove_source","background-color: black; opacity: 0.2;"),e.add(".gantt_default_rowmove_position_before, .gantt_default_rowmove_position_after","background-color: #999; height: 2px;"),e.add(".gantt_default_rowmove_position_child","margin-left: 10px; background-color: #999; height: 2px;"),e.add(".gantt_default_rowmove_position_child:before","content: '+'; color: #999; position: absolute; top: -8px; left: -10px;"),e.add(".gantt_default_rowmove_position_forbidden","background-color: red; height: 2px; margin-left: 10px;"),e.add(".gantt_default_rowmove_position_forbidden:before","content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"),e.add(".gantt_default_task_group .gantt_default_event_inner","position:absolute;top:5px;left:0px;right:0px;bottom:6px;overflow:hidden; background: #0b5394; filter: none; border: 0px none;"),e.add(".gantt_default_task_group.gantt_default_event:before","content:''; border-color: transparent transparent transparent #0b5394; border-style: solid; border-width: 6px; position: absolute; bottom: 0px;"),e.add(".gantt_default_task_group.gantt_default_event:after","content:''; border-color: transparent #0b5394 transparent transparent; border-style: solid; border-width: 6px; position: absolute; bottom: 0px; right: 0px;"),e.add(".gantt_default_task_milestone .gantt_default_event_inner","position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: #38761d; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"),e.add(".gantt_default_browser_ie8 .gantt_default_task_milestone .gantt_default_event_inner","-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476);\""),e.add(".gantt_default_event_left","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;  display: flex; align-items: center;"),e.add(".gantt_default_event_right","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;  display: flex; align-items: center;"),e.add(".gantt_default_link_horizontal","border-bottom-style: solid; border-bottom-color: #cc0000;"),e.add(".gantt_default_link_vertical","border-right-style: solid; border-right-color: #cc0000;"),e.add(".gantt_default_link_arrow_right:before","content: ''; border-width: 6px; border-color: transparent transparent transparent #cc0000; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".gantt_default_link_arrow_left:before","content: ''; border-width: 6px; border-color: transparent #cc0000 transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".gantt_default_link_arrow_down:before","content: ''; border-width: 6px; border-color: #cc0000 transparent transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".gantt_default_link_arrow_up:before","content: ''; border-width: 6px; border-color: transparent transparent #cc0000 transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".gantt_default_shadow_overlap .gantt_default_shadow_inner","background-color: red;"),e.add(".gantt_default_block","background-color: gray; opacity: 0.5;"),e.add(".gantt_default_link_hover","box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"),e.add(".gantt_default_main .gantt_default_header_icon","box-sizing: border-box; border: 1px solid #aaa; background-color: #f5f5f5; color: #000;"),e.add(".gantt_default_header_icon:hover","background-color: #ccc;"),e.add(".gantt_default_header_icon_hide:before","content: '\\00AB';"),e.add(".gantt_default_header_icon_show:before","content: '\\00BB';"),e.add(".gantt_default_row_new .gantt_default_rowheader_inner","cursor: text; background-position: 0 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"),e.add(".gantt_default_row_new .gantt_default_rowheader_inner:hover","background: white;"),e.add(".gantt_default_rowheader textarea","padding: 5px;"),e.add(".gantt_default_rowheader_scroll","cursor: default;"),e.add(".gantt_default_shadow_forbidden .gantt_default_shadow_inner","background-color: red;"),e.add(".gantt_default_event_moving_source","opacity: 0.5;"),e.add(".gantt_default_event.gantt_default_event_version .gantt_default_event_inner","background-color: #cfdde8;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".gantt_default_task_group.gantt_default_event_continueleft.gantt_default_event:before","border:0;"),e.add(".gantt_default_task_group.gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner:before",'content:"";border-color: transparent #fff transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:2px;left:-4px;'),e.add(".gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner","padding-left: 8px;"),e.add(".gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner:before",'content:"";border-color: transparent #000 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:7px;left:-4px;'),e.add(".gantt_default_task_group.gantt_default_event_continueright.gantt_default_event:after","border:0;"),e.add(".gantt_default_task_group.gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner:after",'content:"";border-color: transparent transparent transparent #fff;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:2px;right:-2px;'),e.add(".gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner","padding-right: 8px;"),e.add(".gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner:after",'content:"";border-color: transparent transparent transparent #000;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:7px;right:-2px;'),e.add(".gantt_default_linkpoint","background-color: white; border: 1px solid gray; border-radius: 5px;"),e.add(".gantt_default_linkpoint.gantt_default_linkpoint_hover","background-color: black;"),e.add(".gantt_default_crosshair_vertical, .gantt_default_crosshair_horizontal, .gantt_default_crosshair_left, .gantt_default_crosshair_top","background-color: gray; opacity: 0.2; "),e.add(".gantt_default_selectionrectangle","background-color: #0000ff; border: 1px solid #000033; opacity: 0.4;"),e.add(".gantt_default_link_shadow","border:1px solid black;"),e.add(".gantt_default_link_shadow_circle","background-color:black;"),e.add(".gantt_default_link_hover","box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"),e.add(".kanban_default_main *, .kanban_default_main *:before, .kanban_default_main *:after","box-sizing: content-box;"),e.add(".kanban_default_main","box-sizing: content-box; border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"),e.add(".kanban_default_selected .kanban_default_event_inner","background: #ddd;"),e.add(".kanban_default_timeheader","cursor: default;color: #333;"),e.add(".kanban_default_message","opacity: 0.9;padding: 10px; color: #ffffff;background: #ffa216;"),e.add(".kanban_default_colheadercell","color: #333;background: #f3f3f3;"),e.add(".kanban_default_rowheader,.kanban_default_corner","color: #333;background: #f3f3f3;"),e.add(".kanban_default_rowheader.kanban_default_rowheader_selected","background-color: #aaa;background-image: -webkit-gradient(linear, 0 100%, 100% 0,color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".kanban_default_rowheader_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #f3f3f3;padding: 2px;"),e.add(".kanban_default_colheadercell","text-align: center;"),e.add(".kanban_default_colheadercell_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;"),e.add(".kanban_default_divider, .kanban_default_splitter","background-color: #c0c0c0;"),e.add(".kanban_default_divider_horizontal","background-color: #c0c0c0;"),e.add(".kanban_default_matrix_vertical_line","background-color: #eee;"),e.add(".kanban_default_matrix_vertical_break","background-color: #000;"),e.add(".kanban_default_matrix_horizontal_line","background-color: #eee;"),e.add(".kanban_default_rowheaderdivider","background-color: #c0c0c0;"),e.add(".kanban_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;"),e.add(".kanban_default_card","color:#333;"),e.add(".kanban_default_card_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:5px 2px 2px 2px;overflow:hidden;border:1px solid #ccc;"),e.add(".kanban_default_card_inner",'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".kanban_default_cell","background-color: #fff;"),e.add(".kanban_default_cell.kanban_default_cell_selected","background-color: #ccc;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".kanban_default_tree_image_no_children","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLzEyzsCJAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAADBJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeSxAaA4E1A7VjmgOL31MeLxHwCeXUT0WkFMKAAAAABJRU5ErkJggg==);"),e.add(".kanban_default_tree_image_expand","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLyUoFBT0AAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAAFJJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeRhgJGREc4GijMBtTNgA0BxFog+uA4IA2gmUJwFog/IgUhAGBB9KPYhA3T74Jog+hjx+A8A1KRQ+AN5vcwAAAAASUVORK5CYII=);"),e.add(".kanban_default_tree_image_collapse","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLxB+p9DXAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAAENJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeSxAaA4E1A7VjmgOAtEHyMjI7IE0EygOAtEH5CDqY9c+xjx+A8ANndK9WaZlP4AAAAASUVORK5CYII=);"),e.add(".kanban_default_card_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),e.add(".kanban_default_card_delete:hover","opacity: 1;-ms-filter: none;"),e.add(".kanban_default_rowmove_source","background-color: black; opacity: 0.2;"),e.add(".kanban_default_rowmove_position_before, .kanban_default_rowmove_position_after","background-color: #999; height: 2px;"),e.add(".kanban_default_rowmove_position_forbidden","background-color: red; height: 2px; margin-left: 10px;"),e.add(".kanban_default_rowmove_position_forbidden:before","content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"),e.add(".kanban_default_block","background-color: gray; opacity: 0.5;"),e.add(".kanban_default_main .kanban_default_header_icon","box-sizing: border-box; border: 1px solid #aaa; background-color: #f5f5f5; color: #000;"),e.add(".kanban_default_header_icon:hover","background-color: #ccc;"),e.add(".kanban_default_header_icon_hide:before","content: '\\00AB';"),e.add(".kanban_default_header_icon_show:before","content: '\\00BB';"),e.add(".kanban_default_row_new .kanban_default_rowheader_inner","cursor: text; background-position: 0px 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"),e.add(".kanban_default_row_new .kanban_default_rowheader_inner:hover","background: white;"),e.add(".kanban_default_rowheader textarea","padding: 3px;"),e.add(".kanban_default_rowheader_scroll","cursor: default;"),e.add(".kanban_default_card_moving_source","opacity: 0.5;"),e.add(".kanban_default_card .kanban_default_card_inner","padding: 5px 5px 5px 10px;"),e.add(".kanban_default_cell","background-color: #fff;"),e.add(".kanban_default_rowmove_handle","opacity: 0.5; background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),e.add(".kanban_default_card_header","font-size: 120%; font-weight: bold;"),e.add(".kanban_default_card_bar","background-color: #cc0000; cursor:move;"),e.add(".kanban_default_cell.kanban_default_collapsed","background-color: #eee;"),e.add(".kanban_default_swimlane_collapse","cursor:pointer; border: 1px solid #ccc; text-align:center;"),e.add(".kanban_default_swimlane_collapse:before","content: '^';"),e.add(".kanban_default_swimlane_expand","cursor:pointer; border: 1px solid #ccc; text-align:center;"),e.add(".kanban_default_swimlane_expand:before","content: '>';"),e.add(".kanban_default_columnmove_handle","opacity: 0.5; background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),e.add(".kanban_default_columnmove_position","background-color: #333;"),e.add(".kanban_default_crosshair_vertical, .kanban_default_crosshair_horizontal, .kanban_default_crosshair_left, .kanban_default_crosshair_top","background-color: gray; opacity: 0.2;"),e.add(".queue_default_main","min-width: 100px; border: 1px solid #ccc; padding: 5px; min-height: 200px; overflow-y: auto; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"),e.add(".queue_default_event_bar","left: 0px; top: 0px; bottom: 0px; width: 5px; background-color: #1066a8;"),e.add(".queue_default_event_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px 2px 2px 10px;overflow:hidden;border:1px solid #ccc; display: flex; align-items: center;"),e.add(".queue_default_event_inner","background:#fff; background: linear-gradient(to bottom, #ffffff 0%, #eeeeee);"),e.add(".queue_default_selected .queue_default_event_inner","background: #ddd;"),e.add(".queue_default_shadow","background-color: #ccc;"),e.commit(),DayPilot.Global.defaultCss=!0}}();var o=function(e){var t=this;this.j=function(){return function(){var t=new URL(e,location.href);return t.origin+t.pathname!==location.origin+location.pathname}()?fetch(e).then(function(e){return e.text()}).then(function(e){var n=document.createElement("div");return n.innerHTML=e,new Promise(function(e,i){e(n.querySelector(t.u()))})}):new Promise(function(e,n){e(document.querySelector(t.u()))})},this.u=function(){return new URL(e,location.href).hash}},s=function(e){var t=this;this.id=e,this.widths=[],this.titles=[],this.data=[],this.height=null,this.splitterWidth=3,this.css={},this.css.title=null,this.css.titleInner=null,this.css.splitter=null,this.enabled=!0,this.blocks=[],this.drag={},this.updated=function(){},this.updating=function(){};var n=function(){return t.enabled?t.splitterWidth:1};this.init=function(){var i;if(!e)throw"error: id not provided";if("string"==typeof e)i=document.getElementById(e);else{if(!e.appendChild)throw"error: invalid object provided";i=e}this.div=i,this.blocks=[];for(var o=0;o<this.widths.length;o++){var r=document.createElement("div");r.style.display="inline-block",r.style.height=null!==t.height?t.height+"px":"100%",r.style.width=this.widths[o]-n()+"px",r.style.overflow="hidden",r.style.position="relative",r.setAttribute("unselectable","on"),r.className=this.css.title,i.appendChild(r);var a=this.titles[o],l=null,s=[],d=null;"object"==typeof a&&(l=a.html,s=a.areas,d=a.cssClass),d&&DayPilot.Util.addClass(r,d);var c=document.createElement("div");c.innerHTML=l,c.setAttribute("unselectable","on"),c.className=this.css.titleInner,r.appendChild(c),DayPilot.Areas.attach(r,t.data[o],{areas:s});var u=document.createElement("div");u.style.display="inline-block",u.style.height=null!==t.height?t.height+"px":"100%",u.style.width=n()+"px",u.style.position="relative",u.appendChild(document.createElement("div")),t.enabled&&(u.style.cursor="col-resize"),u.setAttribute("unselectable","on"),u.className=this.css.splitter;var h={};h.index=o,h.width=this.widths[o],u.data=h,u.onmousedown=function(e){if(t.enabled){var n=DayPilot.page(e);n&&(t.drag.start=n,t.drag.data=this.data,t.div.style.cursor="col-resize",e.preventDefault?e.preventDefault():e.returnValue=!1)}},i.appendChild(u);var p={};p.section=r,p.handle=u,this.blocks.push(p)}this.registerGlobalHandlers()},this.updateWidths=function(){for(var e=0;e<this.blocks.length;e++)this.blocks[e].handle.data.width=this.widths[e],this.z(e)},this.z=function(e){this.blocks[e].section.style.width=this.widths[e]-n()+"px"},this.totalWidth=function(){for(var e=0,t=0;t<this.widths.length;t++)e+=this.widths[t];return e},this.gMouseMove=function(e){if(t.drag.start){var n=t.drag.data,i=DayPilot.page(e);if(i){var o=n.index;t.widths[o]=Math.max(5,n.width+(i.x-t.drag.start.x)),t.z(o);var r={};r.widths=this.widths,r.index=n.index,t.updating(r)}}},this.gMouseUp=function(e){if(t.drag.start){t.drag.start=null,document.body.style.cursor="",t.div.style.cursor="";var n=t.drag.data;n.width=t.widths[n.index];var i={};i.widths=this.widths,i.index=n.index,t.updated(i)}},this.dispose=function(){DayPilot.list(this.blocks).forEach(function(e){e.handle.onmousedown=null,DayPilot.de(e.section),DayPilot.de(e.handle)}),this.unregisterGlobalHandlers()},this.registerGlobalHandlers=function(){DayPilot.re(document,"mousemove",this.gMouseMove),DayPilot.re(document,"mouseup",this.gMouseUp)},this.unregisterGlobalHandlers=function(){DayPilot.ue(document,"mousemove",this.gMouseMove),DayPilot.ue(document,"mouseup",this.gMouseUp)}};DayPilot.Splitter=s}}(DayPilot),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded(),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){if("undefined"==typeof e.Bubble){var t={mouseMove:function(e){"undefined"!=typeof t&&(t.mouse=t.mousePosition(e))},touchPosition:function(e){if(!e||!e.touches)return null;var t=e.touches[0],n={};return n.x=t.pageX,n.y=t.pageY,n.clientX=t.clientX,n.clientY=t.clientY,n},mousePosition:function(t){var n=e.mo3(null,t);return t&&(n.clientY=t.clientY,n.clientX=t.clientX),n}};e.Bubble=function(n){this.v="2021.3.5046";var i=this,o={};if(this.hideAfter=500,this.loadingText="Loading...",this.animated=!0,this.animation="fast",this.position="Above",this.hideOnClick=!0,this.hideOnHover=!1,this.showAfter=500,this.showLoadingLabel=!0,this.zIndex=10,this.theme="bubble_default",this.onLoad=null,this.onBeforeDomAdd=null,this.onBeforeDomRemove=null,this.A=function(){},this.callBack=function(e){this.aspnet()?WebForm_DoCallback(this.uniqueID,JSON.stringify(e),this.updateView,this,this.callbackError,!0):e.calendar.internal.bubbleCallBack?e.calendar.internal.bubbleCallBack(e,this):e.calendar.bubbleCallBack(e,this)},this.callbackError=function(e,t){alert(e)},this.updateView=function(n,r){if(i!==r)throw"Callback object mismatch (internal error)";if(n){var a=null,l=null,s=null;if("string"==typeof n?l=n:"object"==typeof n&&(a=n,l=n.html,s=n.element),t.active=i,i){var d=!1;if(o.div){if(s){if(o.div.firstChild.innerHTML="",e.Util.isReactComponent(s)){var c=i.C.calendar&&i.C.calendar.internal.reactRefs().reactDOM;if(!c)throw new e.Exception("Can't reach ReactDOM");c.render(s,o.div.firstChild)}else o.div.firstChild.appendChild(s);d=!0}else l&&(o.div.firstChild.innerHTML=l,d=!0);o.div.domArgs=a}d&&i.D()}}else i.B()},this.init=function(){},this.aspnet=function(){return"undefined"!=typeof WebForm_DoCallback},this.showEvent=function(e,n){var i=new t.CallBackArgs(e.calendar||e.root,"Event",e,e.bubbleHtml?e.bubbleHtml():null);n?this.show(i):this.showOnMouseOver(i)},this.showCell=function(e){t.cancelShowing();var n=new t.CallBackArgs(e.calendar||e.root,"Cell",e,e.staticBubbleHTML?e.staticBubbleHTML():null);this.showOnMouseOver(n)},this.showLink=function(e){t.cancelShowing();var n=new t.CallBackArgs(e.calendar||e.root,"Cell",e,e.data&&e.data.bubbleHtml);this.showOnMouseOver(n)},this.showTime=function(e){var n=new t.CallBackArgs(e.calendar||e.root,"Time",e,e.staticBubbleHTML?e.staticBubbleHTML():null);this.showOnMouseOver(n)},this.showResource=function(e,n){var i={};i.calendar=e.calendar,i.id=e.id,i.name=e.name,i.start=e.start,e.bubbleHtml?i.bubbleHtml=function(){return e.bubbleHtml}:e.data&&e.data.bubbleHtml&&(i.bubbleHtml=function(){return e.data.bubbleHtml}),i.toJSON=function(){var e={};return e.id=this.id,e};var o=new t.CallBackArgs(i.calendar||i.root,"Resource",i,i.bubbleHtml?i.bubbleHtml():null);o.div=e.div,n?this.show(o):this.showOnMouseOver(o)},this.showHtml=function(e,n){var i=new t.CallBackArgs(null,"Html",null,e);i.div=n,this.show(i)},this.hide=function(){t.active===this&&e.Bubble.hide()},this.toJSON=function(){return null},this.show=function(n){if(i.E(n)){var r=this.animated;if(this.A.showPosition=t.mouse,t.showing=null,!t.mouse)return void setTimeout(function(){i.show(n)},100);var a=t.mouse;a.h=0,a.w=0;var l,s=this.getDiv(n);if("Above"===i.F()&&s){var d=e.abs(s,!0);if(!d)return;a.x=d.x,a.y=d.y,a.h=d.h+2,a.w=d.w}this.A.mouse=a;try{l=JSON.stringify(n.object)}catch(e){return}if(!(t.active===this&&this.A.sourceId===l||"undefined"!=typeof e.Menu&&e.Menu.active)){t.hideActive(),t.active=this,this.A.sourceId=l;var c=document.createElement("div");c.setAttribute("unselectable","on"),c.style.position="absolute",this.showLoadingLabel||(c.style.display="none"),c.className=this.G("_main"),c.style.top="-3000px",c.style.left="-3000px",c.style.zIndex=this.zIndex+1,r&&(c.style.visibility="hidden"),this.hideOnClick&&(c.onclick=function(){t.hideActive()}),c.onmousemove=function(e){i.hideOnHover&&t.hideActive(),t.cancelShowing(),t.cancelHiding(),(e=e||window.event).cancelBubble=!0},c.oncontextmenu=function(){return!1},c.onmouseout=function(){i.delayedHide()};var u=document.createElement("div");c.appendChild(u),u.className=this.G("_main_inner"),u.innerHTML=this.loadingText,document.body.appendChild(c),o.div=c,i.C=function(){},i.C.calendar=n.calendar;var h={};h.source=n.object,h.async=!1,h.html=n.staticHTML,h.loaded=function(){this.async&&i.H(h)},this.showLoadingLabel&&!r&&this.D(),n.staticHTML&&"function"!=typeof this.onLoad?i.H(h):"function"==typeof this.onLoad?(this.onLoad(h),h.async||i.H(h)):"function"==typeof i.onDomAdd||"function"==typeof i.onBeforeDomAdd?i.H(h):this.I(n)&&this.callBack(n)}}},this.E=function(e){return!!e.staticHTML||"function"==typeof this.onLoad||"function"==typeof i.onDomAdd||"function"==typeof i.onBeforeDomAdd||!!this.I(e)},this.H=function(e){var t={};t.source=e.source,t.html=e.html,t.element=null,"function"==typeof i.onDomAdd&&i.onDomAdd(t),"function"==typeof i.onBeforeDomAdd&&i.onBeforeDomAdd(t),i.updateView(t,i)},this.getDiv=function(e){return e.div?e.div:"Event"===e.type&&e.calendar&&e.calendar.internal.findEventDiv?e.calendar.internal.findEventDiv(e.object):void 0},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.F=function(){var t=i.position;if(!t)return"Above";if("eventtop"===t.toLowerCase())return"Above";if("above"===t.toLowerCase())return"Above";if("mouse"===t.toLowerCase())return"Mouse";throw new e.Exception("Unrecognized DayPilot.Bubble.position value: "+t)},this.D=function(){var n=this.animated,r=i.F();if(o.div&&this.A.mouse){if(!this.A.mouse.x||!this.A.mouse.y)return void t.hideActive();var a=o.div;a.style.display="";var l=a.offsetHeight,s=a.offsetWidth;a.style.display="none";var d=e.wd(),c=d.width,u="bottom",h="left";if("Mouse"===r){var p=0;"number"==typeof(p=this.A.mouse.clientY>d.height-l+10?this.A.mouse.y-l-10:this.A.mouse.y+22)&&(a.style.top=Math.max(p,0)+"px"),a.style.left=this.A.mouse.clientX>c-s+10?this.A.mouse.x-(this.A.mouse.clientX-(c-s)+10)+"px":this.A.mouse.x+"px"}else if("Above"===r){(p=this.A.mouse.y-l-2)<d.scrollTop&&(p=this.A.mouse.y+this.A.mouse.h+2,u="top"),"number"==typeof p&&(a.style.top=Math.max(p,0)+"px");var f=this.A.mouse.x;this.A.mouse.x+s+10>c&&(f=c-s-10,h="right"),a.style.left=f+"px"}if(a.style.display="",n){a.style.display="";var g={};g.color=a.firstChild.style.color,g.overflow=a.style.overflow,a.firstChild.style.color="transparent",a.style.overflow="hidden",e.pop(a,{finished:function(){a.firstChild.style.color=g.color,a.style.overflow=g.overflow},vertical:u,horizontal:h,animation:i.animation})}}},this.delayedHide=function(){t.showing===this&&t.cancelShowing();var e=t.active;e===this&&(t.cancelHiding(),e.hideAfter>0)&&(t.timeoutHide=window.setTimeout(t.hideActive,e.hideAfter))},this.showOnMouseOver=function(e){t.active===this&&t.cancelHiding(),clearTimeout(t.timeoutShow),t.timeoutShow=window.setTimeout(function(e){return function(){i.show(e)}}(e),this.showAfter),t.showing=this},this.hideOnMouseOut=function(){this.delayedHide()},this.I=function(e){return!!e.calendar.backendUrl||!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.B=function(){if(o.div){var t=o.div.domArgs;if(o.div.domArgs=null,t&&("function"==typeof i.onDomRemove&&i.onDomRemove(t),"function"==typeof i.onBeforeDomRemove&&i.onBeforeDomRemove(t),"function"==typeof i.onDomAdd||"function"==typeof i.onBeforeDomAdd)){var n=o.div.firstChild;if(n&&e.Util.isReactComponent(t.element)){var r=i.C.calendar&&i.C.calendar.internal.reactRefs().reactDOM;if(!r)throw new e.Exception("Can't reach ReactDOM");r.unmountComponentAtNode(n)}}document.body.removeChild(o.div),o.div=null}},n)for(var r in n)this[r]=n[r];this.init()},e.Bubble.touchPosition=function(e){e.touches&&(t.mouse=t.touchPosition(e))},t.cancelShowing=function(){t.showing=null,t.timeoutShow&&(window.clearTimeout(t.timeoutShow),t.timeoutShow=null)},t.cancelHiding=function(){t.timeoutHide&&window.clearTimeout(t.timeoutHide)},t.hideActive=function(){t.cancelHiding();var e=t.active;e&&e.B(),t.active=null},t.CallBackArgs=function(e,t,n,i){this.calendar=e,this.type=t,this.object=n,this.staticHTML=i,this.toJSON=function(){var e={};return e.uid=this.calendar.uniqueID,e.type=this.type,e.object=n,e}},e.re(document,"mousemove",t.mouseMove),e.Bubble.hideActive=t.hideActive,e.Bubble.cancelShowing=t.cancelShowing,e.Bubble.hide=function(n){if((n=n||{}).calendar){var i=t.active;i&&i.C.calendar===n.calendar&&e.Bubble.hide()}else t.hideActive()},e.Bubble.getActive=function(){return t.active},"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){if("undefined"==typeof e.Calendar){e.Calendar=function(n,i){this.v="2021.3.5046";var o=!1;if(this instanceof e.Calendar&&!this.J&&(o=!0,this.J=!0),!o)throw new e.Exception("DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'");var r=this;this.uniqueID=null,this.clientName=n,this.id=n,this.isCalendar=!0,this.allDayEnd="DateTime",this.allDayEventHeight=25,this.allowEventOverlap=!0,this.allowMultiSelect=!0,this.api=2,this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.autoScroll="Drag",this.backendUrl=null,this.bubble="function"==typeof e.Bubble?new e.Bubble:null,this.cellBubble=null,this.columnBubble=null,this.businessBeginsHour=9,this.businessEndsHour=18,this.cellHeight=30,this.cellDuration=30,this.clientState={},this.columnMarginRight=5,this.columnWidth=200,this.columnWidthSpec="Auto",this.columnsLoadMethod="GET",this.contextMenu=null,this.contextMenuSelection=null,this.cornerText="",this.cornerHtml=null,this.crosshairType="Header",this.cssOnly=!0,this.dayBeginsHour=0,this.dayEndsHour=24,this.days=1,this.doubleClickTimeout=300,this.durationBarVisible=!0,this.dynamicEventRendering="Disabled",this.dynamicEventRenderingMarginX=0,this.dynamicEventRenderingMarginY=0,this.eventArrangement="Cascade",this.eventsLoadMethod="GET",this.headerHeight=30,this.headerHeightAutoFit=!1,this.headerLevels=1,this.height=300,this.heightSpec="BusinessHours",this.hideFreeCells=!1,this.hideUntilInit=!0,this.headerDateFormat=null,this.hourWidth=60,this.initEventEnabled=!1,this.initScrollPos=null,this.loadingLabelText="Loading...",this.loadingLabelHtml=null,this.loadingLabelVisible=!0,this.locale="en-us",this.messageHideAfter=5e3,this.moveBy="Full",this.notifyCommit="Immediate",this.rtl=!1,this.scrollDelayCells=0,this.scrollDelayEvents=10,this.scrollLabelsVisible=!1,this.showToolTip=!0,this.showAllDayEvents=!1,this.showEventStartEnd=!1,this.showHeader=!0,this.showHours=!0,this.showCurrentTime=!0,this.showCurrentTimeMode="Day",this.showCurrentTimeOffset=0,this.startDate=e.Date.today(),this.cssClassPrefix="calendar_default",this.tapAndHoldTimeout=300,this.theme=null,this.timeFormat="Auto",this.timeHeaderCellDuration=60,this.timeRangeSelectingStartEndEnabled=!1,this.timeRangeSelectingStartEndFormat="Auto",this.eventMovingStartEndEnabled=!1,this.eventMovingStartEndFormat="Auto",this.eventResizingStartEndEnabled=!1,this.eventResizingStartEndFormat="Auto",this.useEventBoxes="Always",this.viewType="Days",this.visible=!0,this.watchWidthChanges=!0,this.weekStarts="Auto",this.width=null,this.xssProtection="Enabled",this.eventClickHandling="Enabled",this.eventDoubleClickHandling="Disabled",this.eventRightClickHandling="ContextMenu",this.eventDeleteHandling="Disabled",this.eventEditHandling="Update",this.eventHoverHandling="Bubble",this.eventResizeHandling="Update",this.eventMoveHandling="Update",this.eventSelectHandling="Update",this.eventTapAndHoldHandling="Move",this.headerClickHandling="Enabled",this.timeRangeTapAndHoldHandling="Select",this.timeRangeSelectedHandling="Enabled",this.timeRangeDoubleClickHandling="Disabled",this.timeRangeRightClickHandling="ContextMenu",this.onAutoRefresh=null,this.onColumnFilter=null,this.onTimeRangeRightClick=null,this.onTimeRangeRightClicked=null,this.onTimeRangeDoubleClick=null,this.onTimeRangeDoubleClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.onTimeRangeSelecting=null,this.onEventFilter=null,this.onEventMove=null,this.onEventMoved=null,this.onEventMoving=null,this.onEventResize=null,this.onEventResized=null,this.onEventResizing=null,this.onEventSelect=null,this.onEventSelected=null,this.onEventEdit=null,this.onEventEdited=null,this.onEventDelete=null,this.onEventDeleted=null,this.onHeaderClick=null,this.onHeaderClicked=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onEventDoubleClick=null,this.onEventDoubleClicked=null,this.onEventClick=null,this.onEventClicked=null,this.onBeforeEventRender=null,this.onBeforeEventExport=null,this.onBeforeEventDomAdd=null,this.onBeforeEventDomRemove=null,this.onAfterEventRender=null,this.onBeforeCellRender=null,this.onBeforeCellExport=null,this.onBeforeCornerDomAdd=null,this.onBeforeCornerDomRemove=null,this.onBeforeCornerRender=null,this.onBeforeHeaderRender=null,this.onBeforeHeaderExport=null,this.onBeforeTimeHeaderRender=null,this.K=!0,this.L=10,this.M=!0,this.N=!0,this.O=!0,this.P={},this.P.pixels={},this.P.events=[],this.P.drawArea=null,this.P.Q=null,this.elements={},this.elements.events=[],this.elements.separators=[],this.elements.selection=[],this.elements.cells={},this.elements.crosshair=[],this.elements.timeHeaders=[],this.events={},this.events.list=[],this.nav={},this.R=0,this.S=!1,this.T=!1,this.members={},this.members.obsolete=["Init","cleanSelection","cssClassPrefix","cssOnly","clientName","uniqueID"],this.members.ignore=["internal","nav","debug","temp","elements","members","onCallbackError"],this.members.noCssOnly=[],this.U="javasc",this.V={},this.V.ie=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("MSIE"),this.V.ff=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Firefox"),this.clearSelection=function(){return this.selectedCells?(t.topSelectedCell=null,t.bottomSelectedCell=null,e.Global.selecting=null,this.W(),void(this.selectedCells=[])):void(this.selectedCells=[])},this.W=function(){this.selectedCells&&(e.de(r.elements.selection),r.elements.selection=[],r.nav.activeSelection=null)},this.cleanSelection=this.clearSelection,this.X=function(){if(r.P.drawArea)return r.P.drawArea;var e=r.Y();if(!e)return null;var t={pixels:{}};t.pixels.left=e.scrollLeft,t.pixels.right=e.scrollLeft+e.clientWidth,t.pixels.top=e.scrollTop,t.pixels.bottom=e.scrollTop+e.clientHeight,t.pixels.width=e.scrollWidth;var n=r.dynamicEventRenderingMarginX;n&&(t.pixels.left-=n,t.pixels.right+=n,t.pixels.left<0&&(t.pixels.left=0),t.pixels.right>t.pixels.width&&(t.pixels.right=t.pixels.width));var i=r.dynamicEventRenderingMarginY;if(i){t.pixels.top-=i,t.pixels.bottom+=i;var o=r.Z();t.pixels.top<0&&(t.pixels.top=0),t.pixels.bottom>o&&(t.pixels.bottom=o)}for(var a=r._(),l=null,s=null,d=0;d<a.length;d++){var c=a[d],u=c.left+c.width;if(null===l&&u>t.pixels.left&&(l=d),null!==l&&null===s&&(u>=t.pixels.right||d===a.length-1)){s=d;break}}var h=Math.floor(t.pixels.top/r.cellHeight),p=Math.ceil(t.pixels.bottom/r.cellHeight);return t.xStart=l,t.xEnd=s,t.yStart=h,t.yEnd=p,r.P.drawArea=t,t},this.aa=function(e){return r.P.Q||(r.P.Q=r._()),r.P.Q[e]},this.ba=function(){r.P.drawArea=null,r.P.Q=null},this.ca=function(t,n){return r.ea.da()?e.Util.escapeTextHtml(t,n):e.Util.isNullOrUndefined(n)?e.Util.isNullOrUndefined(t)?"":t:n},this.fa=function(e,t,n){var i={};i.action=e,i.parameters=n,i.data=t,i.header=this.ga();var o="JSON"+JSON.stringify(i);__doPostBack(r.uniqueID,o)},this.ha=function(t,n,i,o){if(this.I()){"undefined"==typeof o&&(o="CallBack"),r.ia();var a={};a.action=t,a.type=o,a.parameters=n,a.data=i,a.header=this.ga();var l="JSON"+JSON.stringify(a);this.backendUrl?e.request(this.backendUrl,this.ja,l,this.ka):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,l,this.la,this.clientName,this.onCallbackError,!0)}else r.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning")},this.I=function(){return"javasc"!==r.U&&-1===r.U.indexOf("DCODE")||r.devsb},this.ma=function(){return!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.ka=function(e){if("function"==typeof r.onAjaxError){var t={};t.request=e,r.onAjaxError(t)}else"function"==typeof r.ajaxError&&r.ajaxError(e)},this.dispose=function(){var n=r;n.S&&!n.T&&(n.T=!0,n.na&&n.na.disconnect(),n.oa(),n.pa(),n.nav.messageClose&&(n.nav.messageClose.onclick=null),n.nav.hourTable&&(n.nav.hourTable.oncontextmenu=null,n.nav.hourTable.onmousemove=null),n.nav.header&&(n.nav.header.oncontextmenu=null),n.nav.corner&&(n.nav.corner.oncontextmenu=null),n.nav.zoom&&(n.nav.zoom.onmousemove=null,n.nav.zoom.oncontextmenu=null),n.nav.scroll&&(n.nav.scroll.onscroll=null,n.nav.scroll.root=null),e.pu(n.nav.loading),n.qa(),n.ra(),n.sa(),n.ta(),n.nav.select=null,n.nav.cornerRight=null,n.nav.scrollable=null,n.nav.bottomLeft=null,n.nav.bottomRight=null,n.nav.allday=null,n.nav.zoom=null,n.nav.loading=null,n.nav.events=null,n.nav.header=null,n.nav.hourTable=null,n.nav.scrolltop=null,n.nav.scroll=null,n.nav.vsph=null,n.nav.main=null,n.nav.message=null,n.nav.messageClose=null,n.nav.top.removeAttribute("style"),n.nav.top.removeAttribute("class"),n.nav.top.removeEventListener("mouseleave",r.va),!(r.wa.reactDOM&&e.browser.ie)&&(n.nav.top.innerHTML=""),n.nav.top.dp=null,n.nav.top=null,e.ue(window,"resize",n.xa),t.unregister(n),"undefined"!=typeof e.Bubble&&(e.Bubble.cancelShowing(),e.Bubble.hide({calendar:n})),"undefined"!=typeof e.Menu&&e.Menu.hide({calendar:n}))},this.ya=function(){this.nav.top.dispose=this.dispose},this.ja=function(e){r.la(e.responseText)},this.ga=function(){var e={};return e.v=this.v,e.control="dpc",e.id=this.id,e.clientState=r.clientState,e.columns=this.za(),e.days=r.days,e.startDate=r.startDate,e.cellDuration=r.cellDuration,e.cssClassPrefix=r.cssClassPrefix,e.heightSpec=r.heightSpec,e.businessBeginsHour=r.businessBeginsHour,e.businessEndsHour=r.businessEndsHour,e.viewType=r.viewType,e.dayBeginsHour=r.dayBeginsHour,e.dayEndsHour=r.dayEndsHour,e.headerLevels=r.headerLevels,e.eventHeaderVisible=r.eventHeaderVisible,e.timeFormat=r.timeFormat,e.timeHeaderCellDuration=r.timeHeaderCellDuration,e.locale=r.locale,e.scrollY=r.scrollPos,e.showAllDayEvents=r.showAllDayEvents,e.tagFields=r.tagFields,e.weekStarts=r.weekStarts,e.selected=r.multiselect.events(),e.hashes=r.hashes,e},this.Aa=function(){r.Ba(),r.Ca=null},this.za=function(){var e=[];if(e.ignoreToJSON=!0,!this.Da)return e;for(var t=0;t<this.Da.length;t++){var n=this.Ea(this.Da[t]);e.push(n)}return e},this.Ea=function(e){var t={};return t.Value=e.id,t.Name=e.name,t.ToolTip=e.toolTip,t.Date=e.start,t.Children=this.Fa(e.children),t},this.Fa=function(e){var t=[];if(t.ignoreToJSON=!0,!e)return t;for(var n=0;n<e.length;n++)t.push(this.Ea(e[n]));return t},this.la=function(t,n){if((t=JSON.parse(t)).BubbleGuid){var i=t.BubbleGuid,o=this.bubbles[i];return delete this.bubbles[i],r.Ga(),void("undefined"!=typeof t.Result.BubbleHTML&&o.updateView(t.Result.BubbleHTML,o))}if(t.CallBackRedirect)document.location.href=t.CallBackRedirect;else{if("undefined"!=typeof t.ClientState&&(r.clientState=t.ClientState),"None"===t.UpdateType)return r.Ga(),r.Ha(t.CallBackData,!0),void(t.Message&&r.message(t.Message));if(r.ba(),t.VsUpdate){var a=document.createElement("input");a.type="hidden",a.name=r.id+"_vsupdate",a.id=a.name,a.value=t.VsUpdate,r.nav.vsph.innerHTML="",r.nav.vsph.appendChild(a)}if(r.pa(),r.multiselect.clear(!0),r.multiselect.Ia=t.SelectedEvents,"undefined"!=typeof t.TagFields&&(r.tagFields=t.TagFields),"undefined"!=typeof t.SortDirections&&(r.sortDirections=t.SortDirections),"Full"===t.UpdateType&&(r.colors=t.Colors,r.palette=t.Palette,r.dirtyColors=t.DirtyColors,r.cellProperties=t.CellProperties,r.cellConfig=t.CellConfig,r.Ja()===r.columns?r.columns=t.Columns:r.columns.list=t.Columns,r.days=t.Days,r.startDate=new e.Date(t.StartDate).getDatePart(),r.cellDuration=t.CellDuration,r.heightSpec=t.HeightSpec?t.HeightSpec:r.heightSpec,r.businessBeginsHour=t.BusinessBeginsHour?t.BusinessBeginsHour:r.businessBeginsHour,r.businessEndsHour=t.BusinessEndsHour?t.BusinessEndsHour:r.businessEndsHour,r.viewType=t.ViewType,r.headerLevels=t.HeaderLevels,r.backColor=t.BackColor?t.BackColor:r.backColor,r.nonBusinessBackColor=t.NonBusinessBackColor?t.NonBusinessBackColor:r.nonBusinessBackColor,r.eventHeaderVisible=t.EventHeaderVisible?t.EventHeaderVisible:r.eventHeaderVisible,r.timeFormat=t.TimeFormat?t.TimeFormat:r.timeFormat,r.timeHeaderCellDuration="undefined"!=typeof t.TimeHeaderCellDuration?t.TimeHeaderCellDuration:r.timeHeaderCellDuration,r.locale=t.Locale?t.Locale:r.locale,r.dayBeginsHour="undefined"!=typeof t.DayBeginsHour?t.DayBeginsHour:r.dayBeginsHour,r.dayEndsHour="undefined"!=typeof t.DayEndsHour?t.DayEndsHour:r.dayEndsHour,r.cornerHtml=t.CornerHTML,r.hours=t.Hours,r.Ka(),r.La()),t.Hashes)for(var l in t.Hashes)r.hashes[l]=t.Hashes[l];if(r.Ma(t.Events),r.Na(),("Full"===t.UpdateType||r.hideFreeCells)&&(r.Oa(),r.Pa(),r.Qa(),r.Ra(),r.Sa(),r.Ta(),r.Ua(),r.Va(),r.clearSelection(),r.Wa(),r.scrollToY("undefined"!=typeof t.ScrollY?t.ScrollY:r.initScrollPos)),r.Xa(),r.Ya(),r.Za(),r.$a(),"Parent100Pct"===r.heightSpec&&r._a(),"HoldForever"!==r.timeRangeSelectedHandling&&r.clearSelection(),r.ab(),r.todo&&r.todo.del){var s=r.todo.del;s.parentNode.removeChild(s),r.todo.del=null}r.Ha(t.CallBackData,!0),r.Ga(),r.bb(),t.Message&&r.message(t.Message)}},this.Ha=function(e,t){window.setTimeout(function(e,t){return function(){if(r.cb()){if("function"==typeof r.onAfterRender){var n={};n.isCallBack=t,n.data=e,r.onAfterRender(n)}}else r.afterRender&&r.afterRender(e,t)}}(e,t),0)},this.db=function(e,t){var n=r.nav.events,i=n.rows[0].cells.length,o=Math.floor(r.coords.x/(n.clientWidth/i));o<0&&(o=0),o>=i&&(o=i-1),r.rtl&&(o=r.eb.length-o-1);var a=n.rows[0].cells[o],l=0,s=0;if("undefined"!=typeof e.duration){var d=e.duration;s=Math.floor((r.coords.y-0+r.cellHeight/2)/r.cellHeight)*r.cellHeight+0,l=d*r.cellHeight/(60*r.cellDuration),l=Math.max(l,r.cellHeight)}else{var c=e.event;l=c.part.height,s=c.part.top}var u=document.createElement("div");u.setAttribute("unselectable","on"),u.style.position="absolute",u.style.width="100%",u.style.height=l+"px",u.style.left="0px",u.style.top=s+"px",u.style.zIndex=r.L,u.exclude=!0;var h=document.createElement("div");return u.appendChild(h),u.className=r.G("_shadow"),h.className=this.G("_shadow_inner"),a.events.appendChild(u),u},this.fb=function(){return this.gb()/36e5},this.hb=function(){return this.businessBeginsHour>this.businessEndsHour?24-this.businessBeginsHour+this.businessEndsHour:this.businessEndsHour-this.businessBeginsHour},this.ib=function(){return this.dayBeginsHour>=this.dayEndsHour?24-this.dayBeginsHour+this.dayEndsHour:this.dayEndsHour-this.dayBeginsHour},this.gb=function(e){var t=0;if("BusinessHoursNoScroll"===this.heightSpec)t=this.hb();else if(this.hideFreeCells&&!e){var n=Math.ceil((this.jb-1)*this.cellDuration/this.cellHeight/60);t=Math.max(this.dayBeginsHour+n,this.businessBeginsHour>this.businessEndsHour?this.businessEndsHour+24:this.businessEndsHour)-this.kb()}else t=this.ib();return 60*t*60*1e3},this.message=function(t,n){if(null!==t&&r.S){var i,o,a={};i="object"==typeof arguments[1]?(a=arguments[1]).delay:n,o=a.rawHtml?t:e.Util.escapeHtml(t),i=i||this.messageHideAfter||2e3;var l,s=this.lb(),d=this.showHours?this.hourWidth:0,c=e.sw(r.mb());if(r.rtl){var u=d;d=c,c=u}if(this.nav.message)l=r.nav.message,this.nav.message.style.top=s+"px";else{(l=document.createElement("div")).style.position="absolute",l.style.left=d+"px",l.style.top=s+"px",l.style.right="0px",l.style.display="none",l.onmousemove=function(){l.messageTimeout&&!l.status&&clearTimeout(l.messageTimeout)},l.onmouseout=function(){"none"!==r.nav.message.style.display&&(l.messageTimeout=setTimeout(r.nb,500))};var h=document.createElement("div");h.onclick=function(){r.nav.message.style.display="none"},h.className=this.G("_message"),l.appendChild(h);var p=document.createElement("div");p.style.position="absolute",p.className=this.G("_message_close"),p.onclick=function(){r.nav.message.style.display="none"},l.appendChild(p),this.nav.top.insertBefore(l,this.nav.loading),this.nav.message=l,this.nav.messageClose=p}this.nav.message.style.right=this.nav.cornerRight?c+"px":"0px";var f=function(){if(r.nav.message){var t=r.nav.message.firstChild;t.className=r.G("_message"),a.cssClass&&e.Util.addClass(t,a.cssClass),t.innerHTML=o,e.fade(r.nav.message,.2,function(){l.messageTimeout=setTimeout(r.nb,i)})}};clearTimeout(l.messageTimeout),"none"!==this.nav.message.style.display?e.fade(r.nav.message,-.2,f):f()}},this.message.show=function(e){r.message(e)},this.message.hide=function(){r.nb()},this.nb=function(){e.fade(r.nav.message,-.2,function(){r.nav.message.style.display="none"})},this.Ra=function(){this.nav.message&&(this.nav.message.style.top=this.lb()+"px")},this.ob=function(){return this.gb()/(6e4*this.cellDuration)},this.eventClickPostBack=function(e,t){this.fa("EventClick",t,e)},this.eventClickCallBack=function(e,t){this.ha("EventClick",e,t)},this.pb=function(t){var n=(t=t||window.event).ctrlKey,i=t.metaKey;if("undefined"!=typeof e.Bubble&&e.Bubble.hideActive(),"Disabled"!==r.eventDoubleClickHandling){if(r.timeouts){for(var o in r.timeouts)window.clearTimeout(r.timeouts[o]);r.timeouts=[]}else r.timeouts=[];r.timeouts.push(window.setTimeout(function(e,t,n,i){return function(){r.qb(e,t,n,i)}}(this,n,i,t),r.doubleClickTimeout))}else r.qb(this,n,i,t)},this.qb=function(e,t,n,i){var o=e.event;if(o.client.clickEnabled())if(r.cb()){var a={};if(a.e=o,a.control=r,a.ctrl=t,a.meta=n,a.originalEvent=i,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventClick&&(r.onEventClick(a),a.preventDefault.value))return;switch(r.eventClickHandling){case"PostBack":r.eventClickPostBack(o);break;case"CallBack":r.eventClickCallBack(o);break;case"Edit":r.rb(e);break;case"Select":r.sb(e,o,t,n);break;case"Bubble":r.bubble&&r.bubble.showEvent(o);break;case"ContextMenu":(l=o.client.contextMenu())?l.show(o):r.contextMenu&&r.contextMenu.show(o)}"function"==typeof r.onEventClicked&&r.onEventClicked(a)}else switch(r.eventClickHandling){case"PostBack":r.eventClickPostBack(o);break;case"CallBack":r.eventClickCallBack(o);break;case"JavaScript":r.onEventClick(o);break;case"Edit":r.rb(e);break;case"Select":r.sb(e,o,t,n);break;case"Bubble":r.bubble&&r.bubble.showEvent(o);break;case"ContextMenu":var l;(l=o.client.contextMenu())?l.show(o):r.contextMenu&&r.contextMenu.show(o)}},this.eventDoubleClickPostBack=function(e,t){this.fa("EventDoubleClick",t,e)},this.eventDoubleClickCallBack=function(e,t){this.ha("EventDoubleClick",e,t)},this.tb=function(t){if("undefined"!=typeof e.Bubble&&e.Bubble.hideActive(),r.timeouts){for(var n in r.timeouts)window.clearTimeout(r.timeouts[n]);r.timeouts=null}var i=this.event;if(t=t||window.event,r.cb()){var o={};if(o.e=i,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventDoubleClick&&(r.onEventDoubleClick(o),o.preventDefault.value))return;switch(r.eventDoubleClickHandling){case"PostBack":r.eventDoubleClickPostBack(i);break;case"CallBack":r.eventDoubleClickCallBack(i);break;case"Edit":i.allday()||r.rb(this);break;case"Select":i.allday()||r.sb(this,i,t.ctrlKey);break;case"Bubble":r.bubble&&r.bubble.showEvent(i)}"function"==typeof r.onEventDoubleClicked&&r.onEventDoubleClicked(o)}else switch(r.eventDoubleClickHandling){case"PostBack":r.eventDoubleClickPostBack(i);break;case"CallBack":r.eventDoubleClickCallBack(i);break;case"JavaScript":r.onEventDoubleClick(i);break;case"Edit":i.allday()||r.rb(this);break;case"Select":i.allday()||r.sb(this,i,t.ctrlKey);break;case"Bubble":r.bubble&&r.bubble.showEvent(i)}},this.eventRightClickPostBack=function(e,t){this.fa("EventRightClick",t,e)},this.eventRightClickCallBack=function(e,t){this.ha("EventRightClick",e,t)},this.ub=function(e){var t=this.event;if(e.stopPropagation&&e.stopPropagation(),!t.client.rightClickEnabled())return!1;if(r.cb()){var n={};if(n.e=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventRightClick&&(r.onEventRightClick(n),n.preventDefault.value))return!1;switch(r.eventRightClickHandling){case"PostBack":r.eventRightClickPostBack(t);break;case"CallBack":r.eventRightClickCallBack(t);break;case"ContextMenu":(i=t.client.contextMenu())?i.show(t):r.contextMenu&&r.contextMenu.show(this.event);break;case"Bubble":r.bubble&&r.bubble.showEvent(t)}"function"==typeof r.onEventRightClicked&&r.onEventRightClicked(n)}else switch(r.eventRightClickHandling){case"PostBack":r.eventRightClickPostBack(t);break;case"CallBack":r.eventRightClickCallBack(t);break;case"JavaScript":r.onEventRightClick(t);break;case"ContextMenu":var i;(i=t.client.contextMenu())?i.show(t):r.contextMenu&&r.contextMenu.show(this.event);break;case"Bubble":r.bubble&&r.bubble.showEvent(t)}return e.preventDefault&&e.preventDefault(),!1},this.vb=function(t){return new e.Column(t,r)},this.headerClickPostBack=function(e,t){this.fa("HeaderClick",t,e)},this.headerClickCallBack=function(e,t){this.ha("HeaderClick",e,t)},this.wb=function(e){var t=this.data,n=r.vb(t);if(r.cb()){var i={header:{}};if(i.header.id=t.id,i.header.name=t.name,i.header.start=t.start,i.column=n,i.originalEvent=e,i.shift=e.shiftKey,i.ctrl=e.ctrlKey,i.meta=e.metaKey,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onHeaderClick&&(r.onHeaderClick(i),i.preventDefault.value))return;switch(r.headerClickHandling){case"PostBack":r.headerClickPostBack(n);break;case"CallBack":r.headerClickCallBack(n)}"function"==typeof r.onHeaderClicked&&r.onHeaderClicked(i)}else switch(r.headerClickHandling){case"PostBack":r.headerClickPostBack(n);break;case"CallBack":r.headerClickCallBack(n);break;case"JavaScript":r.onHeaderClick(n)}},this.xb=function(){if("undefined"!=typeof e.Bubble&&r.columnBubble)if("Resources"===r.viewType){var t={};t.calendar=r,t.start=this.data.start,t.name=this.data.name,t.id=this.data.id,t.toJSON=function(){var e={};return e.id=this.id,e.start=this.start,e.name=this.name,e},r.columnBubble.showResource(t)}else{var n=new e.Date(this.data.start),i=n.addDays(1),o={};o.calendar=r,o.start=n,o.end=i,o.toJSON=function(){var e={};return e.start=this.start,e.end=this.end,e},r.columnBubble.showTime(o)}var a=this,l=a.firstChild;if(!l.active){var s=r.vb(a.data);s.areas=a.data.areas,e.Areas.showAreas(l,s)}},this.yb=function(t){"undefined"!=typeof e.Bubble&&r.columnBubble&&r.columnBubble.hideOnMouseOut(),e.Areas.hideAreas(this.firstChild,t)},this.eventDeletePostBack=function(e,t){this.fa("EventDelete",t,e)},this.eventDeleteCallBack=function(e,t){this.ha("EventDelete",e,t)},this.zb=function(t){var n;if(n=t&&t.isEvent?t:t.parentNode.parentNode.event,"undefined"!=typeof e.Bubble&&(e.Bubble.hideActive(),e.Bubble.cancelShowing()),r.cb()){var i={};if(i.e=n,i.control=r,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventDelete&&(r.onEventDelete(i),i.preventDefault.value))return;switch(r.eventDeleteHandling){case"PostBack":r.eventDeletePostBack(n);break;case"CallBack":r.eventDeleteCallBack(n);break;case"Update":r.events.remove(n)}"function"==typeof r.onEventDeleted&&r.onEventDeleted(i)}else switch(r.eventDeleteHandling){case"PostBack":r.eventDeletePostBack(n);break;case"CallBack":r.eventDeleteCallBack(n);break;case"JavaScript":r.onEventDelete(n)}},this.eventResizePostBack=function(e,t,n,i){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var o={};o.e=e,o.newStart=t,o.newEnd=n,this.fa("EventResize",i,o)},this.eventResizeCallBack=function(e,t,n,i){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var o={};o.e=e,o.newStart=t,o.newEnd=n,this.ha("EventResize",o,i)},this.Ab=function(t,n,i,o){if("PostBack"===t)r.postBack2(n,i,o);else if("CallBack"===t)r.ha(n,i,o,"CallBack");else if("Immediate"===t)r.ha(n,i,o,"Notify");else if("Queue"===t)r.queue.add(new e.Action(this,n,i,o));else{if("Notify"!==t)throw new e.Exception("Invalid event invocation type");"Notify"===l.notifyType()?r.ha(n,i,o,"Notify"):r.queue.add(new e.Action(r,n,i,o))}},this.kb=function(e){if("BusinessHoursNoScroll"===this.heightSpec)return this.businessBeginsHour;if(this.hideFreeCells&&!e){var t=Math.floor(this.Bb*this.cellDuration/this.cellHeight/60);return t=Math.max(0,t),Math.min(this.dayBeginsHour+t,this.businessBeginsHour)}return this.dayBeginsHour},this.visibleStart=function(){if("Resources"===r.viewType){if(r.eb.isEmpty())return e.Date.today();var t=e.list(r.eb).map(function(e){return e.start.getTime()}),n=Math.min.apply(null,t);return new e.Date(n)}return this.eb[0].start},this.visibleEnd=function(){if("Resources"===r.viewType){if(r.eb.isEmpty())return e.Date.today().addDays(1);var t=e.list(r.eb).map(function(e){return e.start.getTime()}),n=Math.max.apply(null,t);return new e.Date(n).addDays(1)}var i=this.eb;return i[n=i.length-1].start.addDays(1)},this.cb=function(){return 2===r.api},this.Cb=function(e,t){var n=(e.start(),r.eb[e.part.dayIndex].start),i=Math.floor(t/r.cellHeight)*r.cellDuration*60*1e3,o=60*r.kb()*60*1e3;return n.addTime(i+o)},this.Db=function(e,t){var n=Math.floor(t/r.cellHeight)*r.cellDuration*60*1e3,i=60*r.kb()*60*1e3;return r.eb[e.part.dayIndex].start.addTime(n+i)},this.Eb=function(e,t,n,i){var o,a;if("Disabled"!==this.eventResizeHandling)if("top"===i?(o=r.Cb(e,n),a=e.end()):"bottom"===i&&(o=e.start(),a=r.Db(e,n+t)),r.cb()){var l={},s=function(){if(l.loaded=function(){},r.Fb(),!l.preventDefault.value){switch(r.eventResizeHandling){case"PostBack":r.eventResizePostBack(e,o,a);break;case"CallBack":r.eventResizeCallBack(e,o,a);break;case"Notify":r.eventResizeNotify(e,o,a);break;case"Update":e.start(o),e.end(a),r.events.update(e)}"function"==typeof r.onEventResized&&r.onEventResized(l)}};if(l.e=e,l.control=r,l.newStart=o,l.newEnd=a,l.preventDefault=function(){this.preventDefault.value=!0},l.async=!1,l.hideShadow=function(){r.Fb()},l.loaded=function(){s()},"function"==typeof r.onEventResize&&(r.onEventResize(l),l.preventDefault.value))return void r.Fb();l.async||s()}else switch(r.Fb(),r.eventResizeHandling){case"PostBack":r.eventResizePostBack(e,o,a);break;case"CallBack":r.eventResizeCallBack(e,o,a);break;case"JavaScript":r.onEventResize(e,o,a);break;case"Notify":r.eventResizeNotify(e,o,a)}},this.eventResizeNotify=function(t,n,i,o){var a=new e.Event(t.copy(),this);t.start(n),t.end(i),t.commit(),r.update(),this.Gb("Notify",a,n,i,o)},this.Gb=function(e,t,n,i,o){var r={};r.e=t,r.newStart=n,r.newEnd=i,this.Ab(e,"EventResize",r,o)},this.eventMovePostBack=function(e,t,n,i,o){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var r={};r.e=e,r.newStart=t,r.newEnd=n,r.newResource=i,this.fa("EventMove",o,r)},this.eventMoveCallBack=function(e,t,n,i,o){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var r={};r.e=e,r.newStart=t,r.newEnd=n,r.newResource=i,this.ha("EventMove",r,o)},this.Hb=function(t,n,i){var o=Math.floor((i-0)/r.cellHeight),a=r.cellDuration,l=o*a*60*1e3,s=t.start(),d=t.end(),c=new Date;s instanceof e.Date&&(s=s.toDate()),c.setTime(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()));var u="Never"!==r.useEventBoxes?s.getTime()-(c.getTime()+3600*s.getUTCHours()*1e3+Math.floor(s.getUTCMinutes()/a)*a*60*1e3):0,h=d.getTime()-s.getTime(),p=3600*r.kb()*1e3;"undefined"==typeof n&&(n=t.part.dayIndex);var f=this.eb[n],g=f.start.getTime(),m=new Date;m.setTime(g+l+u+p);var v=new e.Date(m);return{start:v,end:v.addTime(h),resource:f.id}},this.Ib=function(t,n,i,o,a){if("Disabled"!==r.eventMoveHandling){var l=r.Hb(t,n,i),s=l.start,d=l.end,c=l.resource,u=!!a;if(r.cb()){var h={},p=function(){if(h.loaded=function(){},r.Jb(),!h.preventDefault.value){switch(r.eventMoveHandling){case"PostBack":r.eventMovePostBack(t,s,d,c);break;case"CallBack":r.eventMoveCallBack(t,s,d,c);break;case"Notify":r.eventMoveNotify(t,s,d,c);break;case"Update":t.start(s),t.end(d),t.resource(c),u?(t.commit(),r.events.add(t)):r.events.update(t),r.Kb()}"function"==typeof r.onEventMoved&&r.onEventMoved(h)}};if(h.e=t,h.control=r,h.newStart=l.start,h.newEnd=l.end,h.newResource=l.resource,h.external=u,h.areaData=e.Global.movingAreaData,h.ctrl=!1,o&&(h.ctrl=o.ctrlKey),h.shift=!1,o&&(h.shift=o.shiftKey),h.preventDefault=function(){this.preventDefault.value=!0},h.async=!1,h.hideShadow=function(){r.Jb()},h.loaded=function(){p()},"function"==typeof r.onEventMove&&(r.onEventMove(h),h.preventDefault.value))return void r.Jb();h.async||p()}else switch(r.Jb(),r.eventMoveHandling){case"PostBack":r.eventMovePostBack(t,s,d,c);break;case"CallBack":r.eventMoveCallBack(t,s,d,c);break;case"JavaScript":r.onEventMove(t,s,d,c,u,!!o&&o.ctrlKey,!!o&&o.shiftKey);break;case"Notify":r.eventMoveNotify(t,s,d,c,null)}}},this.eventMoveNotify=function(t,n,i,o,a){var l=new e.Event(t.copy(),this);t.start(n),t.end(i),t.resource(o),t.commit(),r.update(),this.Lb("Notify",l,n,i,o,a)},this.Lb=function(e,t,n,i,o,r){var a={};a.e=t,a.newStart=n,a.newEnd=i,a.newResource=o,this.Ab(e,"EventMove",a,r)},this.Kb=function(){if(r.todo&&r.todo.del){var e=r.todo.del;e.parentNode.removeChild(e),r.todo.del=null}},this.Mb=function(e,t){var n=r.Nb(t),i={};i.args=e,i.guid=n,r.ha("Bubble",i)},this.Nb=function(t){var n=e.guid();return this.bubbles||(this.bubbles=[]),this.bubbles[n]=t,n},this.eventMenuClickPostBack=function(e,t,n){var i={};i.e=e,i.command=t,this.fa("EventMenuClick",n,i)},this.eventMenuClickCallBack=function(e,t,n){var i={};i.e=e,i.command=t,this.ha("EventMenuClick",i,n)},this.Ob=function(e,t,n){switch(n){case"PostBack":r.eventMenuClickPostBack(t,e);break;case"CallBack":r.eventMenuClickCallBack(t,e)}},this.timeRangeMenuClickPostBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.fa("TimeRangeMenuClick",n,i)},this.timeRangeMenuClickCallBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.ha("TimeRangeMenuClick",i,n)},this.Pb=function(e,t,n){switch(n){case"PostBack":r.timeRangeMenuClickPostBack(t,e);break;case"CallBack":r.timeRangeMenuClickCallBack(t,e)}},this.timeRangeSelectedPostBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.resource=n,this.fa("TimeRangeSelected",i,o)},this.timeRangeSelectedCallBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.resource=n,this.ha("TimeRangeSelected",o,i)},this.Qb=function(t,n,i){t=new e.Date(t),n=new e.Date(n);var o=i;if(r.cb()){var a={};if(a.start=t,a.end=n,a.resource=o,a.control=r,a.preventDefault=function(){this.preventDefault.value=!0},a.toJSON=function(){return e.Util.copyProps(a,{},["start","end","resource"])},"function"==typeof r.onTimeRangeSelect&&(r.onTimeRangeSelect(a),a.preventDefault.value))return;switch(r.timeRangeSelectedHandling){case"PostBack":r.timeRangeSelectedPostBack(t,n,o);break;case"CallBack":r.timeRangeSelectedCallBack(t,n,o)}"function"==typeof r.onTimeRangeSelected&&r.onTimeRangeSelected(a)}else switch(r.timeRangeSelectedHandling){case"PostBack":r.timeRangeSelectedPostBack(t,n,i);break;case"CallBack":r.timeRangeSelectedCallBack(t,n,i);break;case"JavaScript":r.onTimeRangeSelected(t,n,i)}},this.timeRangeDoubleClickPostBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.resource=n,this.fa("TimeRangeDoubleClick",i,o)},this.timeRangeDoubleClickCallBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.resource=n,this.ha("TimeRangeDoubleClick",o,i)},this.Rb=function(e,t,n){if(r.cb()){var i=n,o={};if(o.start=e,o.end=t,o.resource=i,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onTimeRangeDoubleClick&&(r.onTimeRangeDoubleClick(o),o.preventDefault.value))return;switch(r.timeRangeDoubleClickHandling){case"PostBack":r.timeRangeDoubleClickPostBack(e,t,i);break;case"CallBack":r.timeRangeDoubleClickCallBack(e,t,i)}"function"==typeof r.onTimeRangeDoubleClicked&&r.onTimeRangeDoubleClicked(o)}else switch(r.timeRangeDoubleClickHandling){case"PostBack":r.timeRangeDoubleClickPostBack(e,t,n);break;case"CallBack":r.timeRangeDoubleClickCallBack(e,t,n);break;case"JavaScript":r.onTimeRangeDoubleClick(e,t,n)}},this.eventEditPostBack=function(e,t,n){var i={};i.e=e,i.newText=t,this.fa("EventEdit",n,i)},this.eventEditCallBack=function(e,t,n){var i={};i.e=e,i.newText=t,this.ha("EventEdit",i,n)},this.Sb=function(e,t){if(r.cb()){var n={};if(n.control=r,n.e=e,n.newText=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventEdit&&(r.onEventEdit(n),n.preventDefault.value))return;switch(r.eventEditHandling){case"PostBack":r.eventEditPostBack(e,n.newText);break;case"CallBack":r.eventEditCallBack(e,n.newText);break;case"Update":e.text(n.newText),r.events.update(e)}if("function"==typeof r.onEventEdited&&(r.onEventEdited(n),n.preventDefault.value))return}else switch(r.eventEditHandling){case"PostBack":r.eventEditPostBack(e,t);break;case"CallBack":r.eventEditCallBack(e,t);break;case"JavaScript":r.onEventEdit(e,t)}},this.eventSelectPostBack=function(e,t,n){var i={};i.e=e,i.change=t,this.fa("EventSelect",n,i)},this.eventSelectCallBack=function(e,t,n){var i={};i.e=e,i.change=t,this.ha("EventSelect",i,n)},this.Tb=function(e,t,n,i){var o=r.multiselect,a=o.isSelected(t);if(n||i||!a||1!==o.Ub.length)if(r.cb()){o.previous=o.events();var l={};if(l.e=t,l.selected=o.isSelected(t),l.ctrl=n,l.meta=i,l.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventSelect&&(r.onEventSelect(l),l.preventDefault.value))return;switch(r.eventSelectHandling){case"PostBack":r.eventSelectPostBack(t,s);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),r.eventSelectCallBack(t,s);break;case"Update":o.Xb(e,n)}"function"==typeof r.onEventSelected&&(l.change=o.isSelected(t)?"selected":"deselected",l.selected=o.isSelected(t),r.onEventSelected(l))}else{o.previous=o.events(),o.Xb(e,n);var s=o.isSelected(t)?"selected":"deselected";switch(r.eventSelectHandling){case"PostBack":r.eventSelectPostBack(t,s);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),r.eventSelectCallBack(t,s);break;case"JavaScript":r.onEventSelect(t,s)}}},this.commandCallBack=function(e,t){this.oa();var n={};n.command=e,this.ha("Command",n,t)},this.Yb=function(n){if(!a.active&&!a.using&&(clearTimeout(t.selectedTimeout),!e.Global.selecting)){if(t.editing)return void t.editing.blur();if(r.selectedCells&&"Disabled"!==r.timeRangeDoubleClickHandling)for(var i=0;i<r.selectedCells.length;i++)if(this===r.selectedCells[i])return;if("Disabled"!==r.timeRangeSelectedHandling&&e.Util.mouseButton(n).left){var o=r.Zb(r.coords.x,!0);t.firstMousePos=r.coords,t.firstMousePos.calendar=r,r.clearSelection(),t.topSelectedCell=this,t.bottomSelectedCell=this,t.column=o,r.selectedCells.push(this),t.firstSelected=this,e.Global.selecting={calendar:r},r.$b()}}},this.$b=function(){this.getSelection()&&r.selectedCells&&function(){var n=t.topSelectedCell,i=t.bottomSelectedCell,o=function(){if(n.data)return n.data.x;for(var e=n.parentNode.cells,t=0;t<e.length;t++)if(e[t]===n)return t;return-1}(),a=r.timeRangeSelectingStartEndFormat;"Auto"===a&&(a="Clock24Hours"===l.timeFormat()?"H:mm":"h:mm tt");var s=r.eb[o];if(s){var d={};d.start=n.start,d.end=i.end,d.duration=new e.Duration(d.start,d.end),d.resource=s.id,d.allowed=!0,d.html=null,d.cssClass=null,d.top={},d.top.width=null,d.top.space=5,d.top.html=d.start.toString(a,l.locale()),d.top.enabled=r.timeRangeSelectingStartEndEnabled,d.bottom={},d.bottom.width=null,d.bottom.space=5,d.bottom.html=d.end.toString(a,l.locale()),d.bottom.enabled=r.timeRangeSelectingStartEndEnabled;var c=e.Global.selecting&&e.Global.selecting.args;if(!c||c.start!==d.start||c.end!==d.end||c.resource!=d.resource){r.allowEventOverlap||r.events._b({id:null,start:d.start,end:d.end,resource:d.resource})&&(d.allowed=!1),r.bc(d.start,d.end,d.resource)&&(d.allowed=!1),"function"==typeof r.onTimeRangeSelecting&&d.allowed&&r.onTimeRangeSelecting(d),e.Global.selecting&&(e.Global.selecting.args=d);var u=r.cc(n.start,s.start).boxTop-r.dc(),h=r.cc(i.end,s.start).boxBottom-r.dc()-u,p=function(){if(r.nav.activeSelection)return r.nav.activeSelection;var e=document.createElement("div");e.setAttribute("unselectable","on"),e.style.zIndex=r.L,e.style.position="absolute",e.style.left="0px",e.style.width="100%",e.ondblclick=function(e){if("Disabled"!==r.timeRangeDoubleClickHandling){clearTimeout(r.ec);var t=r.getSelection();t&&r.Rb(t.start,t.end,t.resource)}};var t=document.createElement("div");return t.setAttribute("unselectable","on"),t.className=r.G("_shadow_inner"),e.appendChild(t),r.nav.events.rows[0].cells[o].selection.appendChild(e),r.elements.selection.push(e),r.nav.activeSelection=e,e}();p.className=r.G("_shadow"),p.firstChild.innerHTML="",p.style.top=u+"px",p.style.height=h+"px",d.html&&(p.firstChild.innerHTML=d.html),d.cssClass&&e.Util.addClass(p,d.cssClass),d.allowed||e.Util.addClass(p,r.G("_shadow_forbidden")),r.fc(p,o,d)}}}()},this.Jb=function(){r.gc(t.movingShadow),t.movingShadow=null},this.Fb=function(){r.gc(t.resizingShadow),t.resizingShadow=null},this.gc=function(t){e.de(t),e.de(r.nav.indicatorTop),e.de(r.nav.indicatorBottom)},this.fc=function(t,n,i){var o=r.nav.events.rows[0].cells,a=o[n].events,l=n===o.length-1;if(e.de(r.nav.indicatorTop),e.de(r.nav.indicatorBottom),i.top.enabled){var s=document.createElement("div");s.style.zIndex=r.L,s.style.position="absolute",s.style.top=t.offsetTop+"px",l?s.style.right="0px":s.style.left=t.offsetWidth+i.top.space+"px",i.top.width?s.style.width=i.top.width+"px":s.style.whiteSpace="nowrap",i.top.html&&(s.innerHTML=i.top.html),s.className=r.G("_shadow_top"),a.appendChild(s),r.elements.selection.push(s),r.nav.indicatorTop=s}if(i.bottom.enabled){var d=document.createElement("div");d.style.zIndex=r.L,d.style.position="absolute",d.style.top=t.offsetTop+t.offsetHeight+"px",l?d.style.right="0px":d.style.left=t.offsetWidth+i.bottom.space+"px",i.bottom.width?d.style.width=i.bottom.width+"px":d.style.whiteSpace="nowrap",i.bottom.html&&(d.innerHTML=i.bottom.html),d.className=r.G("_shadow_bottom"),a.appendChild(d),d.style.top=t.offsetTop+t.offsetHeight-d.offsetHeight+"px",r.elements.selection.push(d),r.nav.indicatorBottom=d}},this.hc=function(t){"undefined"!=typeof e.Bubble&&r.cellBubble&&r.cellBubble.hideOnMouseOut()},this.ic=function(n){if("undefined"!=typeof t&&!a.active&&!a.using&&"undefined"!=typeof e.Bubble&&r.cellBubble){var i=t.getColumn(this),o=r.eb[i].id,l={};l.calendar=r,l.start=this.start,l.end=this.end,l.resource=o,l.toJSON=function(){var e={};return e.start=this.start,e.end=this.end,e.resource=this.resource,e},r.cellBubble.showCell(l)}},this.getSelection=function(){return t.topSelectedCell&&t.bottomSelectedCell?new e.Selection(t.topSelectedCell.start,t.bottomSelectedCell.end,t.topSelectedCell.resource,r):null},this.jc=function(e){},this.kc=function(e){if("Fixed"===r.columnWidthSpec||r.M){if(!r.nav.bottomLeft)return;r.nav.bottomLeft.scrollTop=r.nav.bottomRight.scrollTop,r.nav.upperRight&&(r.nav.upperRight.scrollLeft=r.nav.bottomRight.scrollLeft),r.nav.scrollLayer.scrollLeft=r.nav.bottomRight.scrollLeft}var t=r.Y();r.scrollPos=t.scrollTop,r.lc=t.clientHeight,r.nav.scrollpos.value=r.scrollPos,r.ab(),r.ba(),"Progressive"===r.dynamicEventRendering&&(clearTimeout(r.nc),0===r.scrollDelayEvents?r.oc():r.nc=setTimeout(function(){r.oc()},r.scrollDelayEvents)),"Fixed"===r.columnWidthSpec&&(clearTimeout(r.pc),0===r.scrollDelayCells?r.qc():r.pc=setTimeout(function(){r.qc()},r.scrollDelayCells))},this.ab=function(){if(this.scrollLabelsVisible&&this.rc&&this.nav&&this.nav.main&&this.nav.main.rows&&this.nav.main.rows.length>0&&this.nav.main.rows[0].cells.length>0){for(var e=this.showHours?this.hourWidth:0,t=this.nav.main.rows[0].cells[0].clientWidth,n=0;n<this.nav.scrollUp.length;n++){var i=this.nav.scrollUp[n],o=this.nav.scrollDown[n],a=Math.floor(e+n*t+t/2-5+1);a<0&&(a=0),a-=r.nav.bottomRight.scrollLeft,i&&i.style&&(i.style.left=a+"px"),o&&o.style&&(o.style.left=a+"px")}var l=this.dc();for(n=0;n<this.nav.scrollUp.length;n++){var s=this.nav.scrollUp[n],d=this.nav.scrollDown[n],c=this.rc[n].maxStart-l;s&&d&&(this.rc[n].minEnd-l<=r.scrollPos&&parseInt(s.style.left)>=r.hourWidth?(s.style.top=this.lb()+"px",s.style.display=""):s.style.display="none",c>=r.scrollPos+r.lc&&parseInt(d.style.left)>=r.hourWidth?(d.style.top=this.lb()+this.lc-10+"px",d.style.display=""):d.style.display="none")}}},this.sc=function(t){var n=t.parentNode,i=0,o=t.offsetTop,r=t.parentNode.offsetWidth,a=t.offsetHeight;t.event.allday()&&(i=t.offsetLeft,r=t.offsetWidth);var l=document.createElement("textarea");l.style.boxSizing="border-box",l.style.position="absolute",l.style.width=r+"px",l.style.height=a+"px";var s=e.gs(t,"fontFamily");s||(s=e.gs(t,"font-family")),l.style.fontFamily=s;var d=e.gs(t,"fontSize");return d||(d=e.gs(t,"font-size")),l.style.fontSize=d,l.style.left=i+"px",l.style.top=o+"px",l.style.border="1px solid black",l.style.padding="0px",l.style.marginTop="0px",l.style.backgroundColor="white",l.value=(t.event.text()||"").trim(),l.event=t.event,n.appendChild(l),l},this.sb=function(e,t,n,i){r.Tb(e,t,n,i)},this.multiselect={},this.multiselect.Ia=[],this.multiselect.Ub=[],this.multiselect.tc=[],this.multiselect.uc=[],this.multiselect.vc=function(){return JSON.stringify(r.multiselect.events())},this.multiselect.events=function(){var e=r.multiselect,t=[];t.ignoreToJSON=!0;for(var n=0;n<e.Ub.length;n++)t.push(e.Ub[n]);return t},this.multiselect.wc=function(){r.nav.select.value=r.multiselect.vc()},this.multiselect.Xb=function(e,t){var n=r.multiselect;if(n.isSelected(e.event))if(r.allowMultiSelect)if(t)n.remove(e.event,!0);else{var i=n.Ub.length;n.clear(!0),i>1&&n.add(e.event,!0)}else n.clear(!0);else r.allowMultiSelect&&t?n.add(e.event,!0):(n.clear(!0),n.add(e.event,!0));n.redraw(),n.wc()},this.multiselect.xc=function(e){var t=r.multiselect;return t.yc(e,t.Ia)},this.multiselect.zc=function(){for(var e=r.multiselect,t=[],n=0;n<e.Ub.length;n++)t.push(e.Ub[n].value());alert(t.join("\n"))},this.multiselect.add=function(e,t){var n=r.multiselect;-1===n.Ac(e)&&n.Ub.push(e),n.wc(),t||n.redraw()},this.multiselect.remove=function(e,t){var n=r.multiselect,i=n.Ac(e);-1!==i&&n.Ub.splice(i,1),n.wc(),t||n.redraw()},this.multiselect.clear=function(e){var t=r.multiselect;t.Ub=[],t.wc(),e||t.redraw()},this.multiselect.redraw=function(){for(var e=r.multiselect,t=0;t<r.elements.events.length;t++){var n=r.elements.events[t];e.isSelected(n.event)?e.Bc(n):e.Cc(n)}},this.multiselect.Bc=function(t){var n=r.multiselect,i=r.G("_selected"),o=n.Dc(t);e.Util.addClass(o,i),n.tc.push(t)},this.multiselect.Dc=function(e){return e},this.multiselect.Ec=function(){for(var e=r.multiselect,t=0;t<e.tc.length;t++)e.Cc(e.tc[t],!0);e.tc=[]},this.multiselect.Cc=function(t,n){var i=r.multiselect,o=r.G("_selected"),a=i.Dc(t);if(e.Util.removeClass(a,o),!n){var l=e.indexOf(i.tc,t);-1!==l&&i.tc.splice(l,1)}},this.multiselect.isSelected=function(e){return r.multiselect.yc(e,r.multiselect.Ub)},this.multiselect.Ac=function(e){for(var t=e.data,n=0;n<r.multiselect.Ub.length;n++)if(r.Fc(r.multiselect.Ub[n].data,t))return n;return-1},this.multiselect.yc=function(e,t){if(!t)return!1;for(var n=0;n<t.length;n++)if(r.Fc(e,t[n]))return!0;return!1},this.rb=function(n){if(t.editing)t.editing.blur();else{var i=this.sc(n);t.editing=i,e.re(i,e.touch.start,function(e){e.stopPropagation()}),i.onblur=function(){if(n.event){var o=n.event.text(),a=i.value;t.editing=null,i.onblur=null,e.de(i),o!==a&&(n.style.display="none",r.Sb(n.event,a))}},i.onkeypress=function(e){if(13===(window.event?event.keyCode:e.keyCode))return this.onblur(),e.preventDefault(),!1},i.onkeyup=function(e){return 27===(window.event?event.keyCode:e.keyCode)&&(i.onblur=null,i.parentNode&&i.parentNode.removeChild(i),t.editing=!1),!0},i.select(),i.focus()}},this.Gc=function(){return!("Resources"===r.viewType||r.Ja()&&r.I())},this.Ja=function(){return e.isArray(r.columns)?r.columns:r.columns.list},this.columns={},this.columns.list=[],this.columns.Hc=!1,this.columns.filter=function(e){r.Ic.params=e,r.S&&r.Jc()},this.columns.find=function(t,n){var i="Resources"===r.viewType;t=new e.Date(t);var o=r.eb.find(function(e){var o=!i||e.id===n,r=e.start.addDays(1);return!!(o&&e.start<=t&&t<r)});return o?r.vb(o,r):null},this.columns.load=function(t,n,i){if(!t)throw new e.Exception("columns.load(): 'url' parameter required");var o=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},a=function(t){var i,a=t.request;try{i=JSON.parse(a.responseText)}catch(t){var l={};return l.exception=t,void o(l)}if(e.isArray(i)){var s={preventDefault:function(){this.preventDefault.value=!0}};if(s.data=i,"function"==typeof n&&n(s),s.preventDefault.value)return;r.columns.list=i,r.S&&r.update()}};r.columnsLoadMethod&&"POST"===r.columnsLoadMethod.toUpperCase()?e.ajax({method:"POST",url:t,success:a,error:o}):e.ajax({method:"GET",url:t,success:a,error:o})},this.Ka=function(){if(r.Gc()){var e=this.Kc();this.eb=this.Lc(e)}else this.Da=this.Lc(this.Ja()||[]),this.eb=this.Mc(this.headerLevels,!0)},this.Nc=function(){var e=this.startDate.getDatePart(),t=this.days;switch(this.viewType){case"Day":t=1;break;case"Week":t=7,e=e.firstDayOfWeek(l.weekStarts());break;case"WorkWeek":for(t=5,e=e.firstDayOfWeek(l.weekStarts());1!==e.dayOfWeek();)e=e.addDays(1)}var n=e.addDays(t),i={};return i.start=e,i.end=n,i.days=t,i},this.Kc=function(){for(var e=[],t=this.Nc(),n=t.start,i=t.days,o=0;o<i;o++){var a={};a.start=n.addDays(o);var s=l.locale().datePattern;r.headerDateFormat&&(s=r.headerDateFormat),a.name=a.start.toString(s,l.locale()),a.html=a.name,e.push(a)}return e},this.Ic={},this.Oc=function(t,n){var i={};if(i.id=t.id,i.start=new e.Date(t.start||r.startDate).getDatePart(),i.name=t.name,i.html=t.html||t.name,i.toolTip=t.toolTip,i.backColor=t.backColor,i.areas=t.areas,i.parent=n,"function"==typeof r.onColumnFilter&&r.Ic.params)if(t.children&&0!==t.children.length)i.hidden=!0;else{n=i.parent;var o={visible:!0};o.column={id:t.id,name:t.name,start:t.start,data:t},o.filter=r.Ic.params,r.onColumnFilter(o),o.visible?n&&n.Pc():i.hidden=!0}return i.Pc=function(){i.hidden=!1,i.parent&&i.parent.Pc()},i.getChildren=function(e,t){var n=[];if(e<=1)return this.hidden||n.push(this),n;if(!this.children||0===this.children.length)return t?this.hidden||n.push(this):n.push("empty"),n;for(var i=0;i<this.children.length;i++)for(var o=this.children[i].getChildren(e-1,t),r=0;r<o.length;r++)n.push(o[r]);return n},i.getChildrenCount=function(e){var t=0;if(!this.children||this.children.length<=0||e<=1)return this.hidden?0:1;for(var n=0;n<this.children.length;n++)t+=this.children[n].getChildrenCount(e-1);return t},i.putIntoBlock=function(e){for(var t=0;t<this.blocks.length;t++)if((n=this.blocks[t]).overlapsWith(e.part.top,e.part.height))return n.events.push(e),n.min=Math.min(n.min,e.part.top),n.max=Math.max(n.max,e.part.top+e.part.height),t;var n;return(n=[]).lines=[],n.events=[],n.overlapsWith=function(e,t){return!(e+t-1<this.min||e>this.max-1)},n.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++)if((n=this.lines[t]).isFree(e.part.top,e.part.height))return n.push(e),t;var n;return(n=[]).isFree=function(e,t){for(var n=e+t-1,i=this.length,o=0;o<i;o++){var r=this[o];if(!(n<r.part.top||e>r.part.top+r.part.height-1))return!1}return!0},n.push(e),this.lines.push(n),this.lines.length-1},n.events.push(e),n.min=e.part.top,n.max=e.part.top+e.part.height,this.blocks.push(n),this.blocks.length-1},i.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++)if((n=this.lines[t]).isFree(e.part.top,e.part.height))return n.push(e),t;var n;return(n=[]).isFree=function(e,t){for(var n=e+t-1,i=this.length,o=0;o<i;o++){var r=this[o];if(!(n<r.part.top||e>r.part.top+r.part.height-1))return!1}return!0},n.push(e),this.lines.push(n),this.lines.length-1},i.visibleStart=function(){return i.start.addHours(r.kb(!0))},i.visibleEnd=function(){var e=r.gb(!0);return i.visibleStart().addTime(e)},t.children&&(i.children=this.Lc(t.children,i)),i},this.Lc=function(t,n){var i=e.list();return e.list(t).forEach(function(e){var t=r.Oc(e,n);i.push(t)}),i},this.Mc=function(t,n){for(var i=this.Gc()?this.eb:this.Da,o=e.list(),r=0;r<i.length;r++)for(var a=i[r].getChildren(t,n),l=0;l<a.length;l++)o.push(a[l]);return o},this.$a=function(){if(this.showAllDayEvents){var t=this.nav.header;if(t){t.style.display="none";for(var n=this.eb.length,i=0;i<this.Qc.lines.length;i++)for(var o=this.Qc.lines[i],a=0;a<o.length;a++){var s=o[a],d=s.cache||s.data,c=document.createElement("div");c.event=s,c.setAttribute("unselectable","on"),c.style.position="absolute",r.rtl?c.style.right=100*s.part.colStart/n+"%":c.style.left=100*s.part.colStart/n+"%",c.style.width=100*s.part.colWidth/n+"%",c.style.height=l.allDayEventHeight()+"px",c.className=this.G("_alldayevent"),c.style.top=this.headerLevels*l.headerHeight()+i*l.allDayEventHeight()+"px",d.cssClass&&e.Util.addClass(c,d.cssClass),c.style.textAlign="left",c.style.lineHeight="1.2",s.client.clickEnabled()&&(c.onclick=this.pb),s.client.doubleClickEnabled()&&(c.ondblclick=this.tb),c.style.cursor=s.client.clickEnabled()||s.client.doubleClickEnabled()?"pointer":"default",e.re(c,"contextmenu",this.ub),c.onmousemove=function(t){var n=this,i=n.event,o=i.cache||i.data;if(!n.active){var a=[];i.client.deleteEnabled()&&a.push({action:"JavaScript",v:"Hover",w:17,h:17,top:3,right:3,css:r.G("_event_delete"),js:function(e){r.zb(e)}});var l=o.areas;l&&l.length>0&&(a=a.concat(l)),e.Areas.showAreas(n,i,null,a),e.Util.addClass(n,r.G("_alldayevent_hover"))}"undefined"!=typeof e.Bubble&&r.bubble&&"Disabled"!==r.eventHoverHandling&&r.bubble.showEvent(this.event)},c.onmouseout=function(t){e.Util.removeClass(this,r.G("_alldayevent_hover")),e.Areas.hideAreas(this,t),r.bubble&&r.bubble.hideOnMouseOut()},this.showToolTip&&!this.bubble&&c.setAttribute("title",s.client.toolTip());var u=s.start().getTime()===s.part.start.getTime(),h=s.end().getTime()===s.part.end.getTime(),p=d.backColor,f=document.createElement("div");if(f.setAttribute("unselectable","on"),f.className=this.G("_alldayevent_inner"),p&&(f.style.background=p),d.fontColor&&(f.style.color=d.fontColor),f.style.borderColor="darker"===d.borderColor&&d.backColor?e.ColorUtil.darker(d.backColor,2):d.borderColor,r.rtl?(u||e.Util.addClass(c,this.G("_alldayevent_continueright")),h||e.Util.addClass(c,this.G("_alldayevent_continueleft"))):(u||e.Util.addClass(c,this.G("_alldayevent_continueleft")),h||e.Util.addClass(c,this.G("_alldayevent_continueright"))),c.appendChild(f),e.isArray(d.areas)&&d.areas.filter(function(t){return e.Areas.isVisible(t)}).forEach(function(t){var n=e.Areas.createArea(c,s,t);c.appendChild(n)}),r.cb()){if("function"==typeof r.onAfterEventRender){var g={};g.e=c.event,g.div=c,r.onAfterEventRender(g)}}else r.afterEventRender&&r.afterEventRender(c.event,c);!function(){var t={};if(t.control=r,t.e=s,t.element=null,c.domArgs=t,"function"==typeof r.onBeforeEventDomAdd&&r.onBeforeEventDomAdd(t),t.element){var n=f;if(n)if(t.Rc=n,e.Util.isReactComponent(t.element)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(t.element,n)}else n.appendChild(t.element)}else f.innerHTML=s.client.innerHTML()}(),this.nav.allday.appendChild(c),this.elements.events.push(c)}t.style.display=""}}},this.pa=function(e){if(r.multiselect.Ec(),this.elements.events)for(var t=0;t<this.elements.events.length;t++){var n=this.elements.events[t],i=n.event;i&&e&&!i.allday()||r.Sc(n)}this.elements.events=[]},this.Sc=function(t){var n=t.event,i=t.domArgs;if(t.domArgs=null,i&&"function"==typeof r.onBeforeEventDomRemove&&r.onBeforeEventDomRemove(i),i&&"function"==typeof r.onBeforeEventDomAdd&&r.wa.reactDOM){var o=i&&i.Rc;if(o&&e.Util.isReactComponent(i.element)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.unmountComponentAtNode(o)}}if(n&&(n.div=null,n.root=null,n.rendered=!1),t.onclick=null,t.onclickSave=null,t.ondblclick=null,t.oncontextmenu=null,t.onmouseover=null,t.onmouseout=null,t.onmousemove=null,t.onmousedown=null,t.firstChild&&t.firstChild.firstChild&&t.firstChild.firstChild.tagName&&"IMG"===t.firstChild.firstChild.tagName.toUpperCase()){var a=t.firstChild.firstChild;a.onmousedown=null,a.onmousemove=null,a.onclick=null}t!==e.Global.moving&&(t.helper=null,t.event=null),e.de(t)},this.Tc=function(e){var t=r.aa(e.part.dayIndex),n=this.X(),i=n.pixels.left,o=n.pixels.right,a=n.pixels.top,l=n.pixels.bottom,s=e.part.left+t.left,d=s+e.part.width/100*t.width,c=e.part.top-this.dc();return!(o<=s||i>=d||l<=c||a>=c+e.part.height)},this.Uc=function(t){var n=this.nav.events,i=t.cache||t.data;if(!t.rendered){var o=r.multiselect.xc(t),a=r.Tc(t);if(o||"Progressive"!==r.dynamicEventRendering||"Fixed"!==r.columnWidthSpec||a){var l=document.createElement("div");l.setAttribute("unselectable","on"),l.style.MozUserSelect="none",l.style.KhtmlUserSelect="none",l.style.WebkitUserSelect="none",l.style.position="absolute",l.className=this.G("_event"),l.style.left=t.part.left+"%",l.style.top=t.part.top-this.dc()+"px",l.style.width=t.part.width+"%",l.style.height=Math.max(t.part.height,2)+"px",l.style.overflow="hidden",l.isFirst=t.part.start.getTime()===t.start().getTime(),l.isLast=t.part.end.getTime()===t.end().getTime(),t.client.clickEnabled()&&(l.onclick=this.pb),t.client.doubleClickEnabled()&&(l.ondblclick=this.tb),e.re(l,"contextmenu",this.ub),l.onmousemove=this.Vc,l.onmouseout=this.Wc,l.onmousedown=this.Xc,e.re(l,e.touch.start,this.Yc.onEventTouchStart),e.re(l,e.touch.move,this.Yc.onEventTouchMove),e.re(l,e.touch.end,this.Yc.onEventTouchEnd),i.cssClass&&e.Util.addClass(l,i.cssClass),this.showToolTip&&!this.bubble&&l.setAttribute("title",t.client.toolTip());var s=document.createElement("div");if(s.setAttribute("unselectable","on"),s.className=r.G("_event_inner"),i.fontColor&&(s.style.color=i.fontColor),i.backColor&&(s.style.background=i.backColor),i.borderColor&&(s.style.borderColor="darker"===i.borderColor&&i.backColor?e.ColorUtil.darker(i.backColor,2):i.borderColor),i.backgroundImage&&(s.style.backgroundImage="url("+i.backgroundImage+")",i.backgroundRepeat&&(s.style.backgroundRepeat=i.backgroundRepeat)),l.appendChild(s),t.client.barVisible()){var d=t.part.height-2,c=100*t.part.barTop/d,u=Math.ceil(100*t.part.barHeight/d);"PercentComplete"===this.durationBarMode&&(c=0,u=i.complete);var h=document.createElement("div");h.setAttribute("unselectable","on"),h.className=this.G("_event_bar"),h.style.position="absolute",i.barBackColor&&(h.style.backgroundColor=i.barBackColor);var p=document.createElement("div");p.setAttribute("unselectable","on"),p.className=this.G("_event_bar_inner"),p.style.top=c+"%",p.style.height=0<u&&u<=1?"1px":u+"%",i.barColor&&(p.style.backgroundColor=i.barColor),h.appendChild(p),l.appendChild(h)}var f=i.areas?e.Areas.copy(i.areas):[],g=r.eb[t.part.dayIndex];if(f.forEach(function(n){n.start&&(n.top=r.cc(new e.Date(n.start),g.start).top-t.part.top-r.dc()),n.end&&(n.bottom=t.part.top+t.part.height-r.cc(new e.Date(n.end),g.start).top-r.dc())}),t.client.deleteEnabled()&&f.push({action:"JavaScript",v:"Hover",w:17,h:17,top:2,right:2,css:r.G("_event_delete"),js:function(e){r.zb(e)}}),e.Areas.attach(l,t,{areas:f}),function(){var n={};if(n.control=r,n.e=t,n.element=null,l.domArgs=n,"function"==typeof r.onBeforeEventDomAdd&&r.onBeforeEventDomAdd(n),n.element){var i=s;if(i)if(n.Rc=i,e.Util.isReactComponent(n.element)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(n.element,i)}else i.appendChild(n.element)}else s.innerHTML=t.client.innerHTML()}(),n.rows[0].cells[t.part.dayIndex]){if(n.rows[0].cells[t.part.dayIndex].events.appendChild(l),r.Zc(l),l.event=t,r.multiselect.xc(t)&&r.multiselect.add(l.event,!0),t.rendered=!0,r.cb()){if("function"==typeof r.onAfterEventRender){var m={};m.e=l.event,m.div=l,r.onAfterEventRender(m)}}else r.afterEventRender&&r.afterEventRender(l.event,l);r.elements.events.push(l)}}}},this.Zc=function(e){for(var t=e&&e.childNodes?e.childNodes.length:0,n=0;n<t;n++)try{var i=e.childNodes[n];1===i.nodeType&&(i.setAttribute("unselectable","on"),this.Zc(i))}catch(e){}},this.Za=function(){for(var e=new Date,t=0;t<this.eb.length;t++){var n=this.eb[t];if(n.blocks)for(var i=0;i<n.blocks.length;i++)for(var o=n.blocks[i],r=0;r<o.lines.length;r++)for(var a=o.lines[r],l=0;l<a.length;l++){var s=a[l];s.part.width=100/o.lines.length,s.part.left=s.part.width*r,"Cascade"===this.eventArrangement&&(r===o.lines.length-1||(s.part.width=1.5*s.part.width)),"Full"===this.eventArrangement&&(s.part.left=s.part.left/2,s.part.width=100-s.part.left),s.allday()||this.Uc(s)}}this.multiselect.redraw(),(new Date).getTime(),e.getTime()},this.oc=function(){r.elements.events.forEach(function(e){e.event&&!r.Tc(e.event)&&r.Sc(e)}),r.P.$c.forEach(function(e){r.Uc(e)}),r.elements.events=r.elements.events.filter(function(e){return!!e.event})},this.qc=function(){for(var e=r.X(),t=e.xStart;t<=e.xEnd;t++)for(var n=e.yStart;n<=e.yEnd;n++)r._c(t,n);r.ad()},r.ad=function(){for(var e=r.X(),t=this.ob(),n=r.eb.length,i=0;i<n;i++){var o=!0;e.xStart<=i&&i<=e.xEnd&&(o=!1);for(var a=0;a<t;a++){var l=!0;e.yStart<=a&&a<=e.yEnd&&(l=!1);var s=r.elements.cells[i+"_"+a];s&&(l||o)&&(s.remove(),r.elements.cells[i+"_"+a]=null)}}},this.bd=function(){this.multiselect.Ub=[];for(var e=0;e<this.eb.length;e++)for(var t=this.eb[e],n=0;n<t.lines.length;n++)for(var i=t.lines[n],o=0;o<i.length;o++){var r=i[o];r.part.width=100/t.lines.length,r.part.left=r.Width*n,r.allday()||this.Uc(r)}},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.cd=function(){switch(r.U){case"aspnet":if(!this.ma())throw new e.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");break;case"netmvc":if(!this.backendUrl)throw new e.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");break;case"javaxx":if(!this.backendUrl)throw new e.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/")}},this.Ya=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.dd=function(){var e=this.lb()+this.ed();return r.debug.message("Getting totalHeight, headerHeight: "+this.lb()+" scrollable: "+this.ed()),e<0?0:e},this.va=function(){r.Aa()},this.fd=function(){if(this.nav.top.dp=this,this.nav.top.innerHTML="",this.nav.top.style.MozUserSelect="none",this.nav.top.style.KhtmlUserSelect="none",this.nav.top.style.WebkitUserSelect="none",this.nav.top.style.WebkitTapHighlightColor="rgba(0,0,0,0)",this.nav.top.style.WebkitTouchCallout="none",this.nav.top.style.position="relative",this.width&&(this.nav.top.style.width=this.width),this.rtl&&(this.nav.top.style.direction="rtl"),this.nav.top.style.height="Parent100Pct"===this.heightSpec?"100%":this.dd()+"px",this.hideUntilInit&&(this.nav.top.style.visibility="hidden"),this.visible||(this.nav.top.style.display="none"),this.nav.top.addEventListener("mouseleave",r.va),this.nav.scroll=document.createElement("div"),this.nav.scroll.style.height=this.ed()+"px",e.Util.addClass(this.nav.top,this.G("_main")),r.rtl&&e.Util.addClass(this.nav.top,this.G("_direction_rtl")),this.nav.scroll.style.position="relative",this.showHeader){var t=this.gd();this.nav.top.appendChild(t)}this.nav.scroll.style.zoom=1,this.nav.scroll.style.position="absolute",this.nav.scroll.style.left="0px",this.nav.scroll.style.right="0px",this.nav.scroll.style.top=this.lb()+"px",this.nav.scroll.className=r.G("_scroll");var n=this.hd();this.nav.scrollable=n.firstChild,this.nav.scroll.appendChild(n),this.nav.top.appendChild(this.nav.scroll),this.nav.vsph=document.createElement("div"),this.nav.vsph.style.display="none",this.nav.top.appendChild(this.nav.vsph),this.nav.scrollpos=document.createElement("input"),this.nav.scrollpos.type="hidden",this.nav.scrollpos.id=r.id+"_scrollpos",this.nav.scrollpos.name=this.nav.scrollpos.id,this.nav.top.appendChild(this.nav.scrollpos),this.nav.select=document.createElement("input"),this.nav.select.type="hidden",this.nav.select.id=r.id+"_select",this.nav.select.name=this.nav.select.id,this.nav.select.value=null,this.nav.top.appendChild(this.nav.select),this.nav.scrollLayer=document.createElement("div"),this.nav.scrollLayer.style.position="absolute",this.nav.scrollLayer.style.top="0px",this.nav.scrollLayer.style.left="0px",this.nav.top.appendChild(this.nav.scrollLayer),this.nav.scrollUp=[],this.nav.scrollDown=[],this.nav.loading=document.createElement("div"),this.nav.loading.style.position="absolute",this.nav.loading.style.top="0px",this.nav.loading.style.left=this.hourWidth+5+"px",this.nav.loading.className=r.G("_loading"),this.nav.loading.innerHTML=r.ca(this.loadingLabelText,this.loadingLabelHtml),this.nav.loading.style.display="none",this.nav.top.appendChild(this.nav.loading)},this.jd=function(){for(var e="Fixed"===this.columnWidthSpec,t=this.nav.header&&this.nav.header.rows[this.nav.header.rows.length-1],n=this.nav.events.rows[0],i=0;i<r.eb.length;i++){var o=t&&t.cells[i],a=n.cells[i],l=o&&o.firstChild,s=r.eb[i];if(e){var d=s.width?s.width:r.columnWidth;l&&(l.style.width=d+"px"),a&&(a.style.width=d+"px")}else r.N||(l&&(l.style.width=null),a&&(a.style.width=null))}},this.mb=function(){return this.M?r.nav.bottomRight:r.nav.scroll},this.Wa=function(){var t="Fixed"===this.columnWidthSpec;if(!t){var n=r.mb();"Fixed"===this.heightSpec?n.style.overflowY="scroll":n.style.overflow="BusinessHours"===this.heightSpec&&this.fb()<=this.businessEndsHour-this.businessBeginsHour?"hidden":"Full"!==this.heightSpec&&"BusinessHoursNoScroll"!==this.heightSpec?"auto":"hidden"}if(t){var i=0,o=this.eb.length*this.columnWidth;o>r.Y().clientWidth&&(i=e.sw(r.nav.bottomRight)),r.nav.headerParent&&(r.nav.headerParent.style.width=o+i+"px"),r.nav.main.style.width=o+"px",r.nav.events.style.width=o+"px",r.nav.crosshair.style.width=o+"px"}else r.nav.headerParent&&(r.nav.headerParent.style.width="100%"),r.nav.main.style.width="100%",r.nav.events.style.width="100%",r.nav.crosshair.style.width="100%";this.jd()},this.Ta=function(){this.O?this.qa():e.pu(this.nav.hourTable),this.nav.hoursPlaceholder&&(this.nav.hoursPlaceholder.innerHTML="",this.nav.hourTable=this.kd(),this.nav.hoursPlaceholder.appendChild(this.nav.hourTable))},this.qa=function(){if(this.nav.hourTable){r.elements.timeHeaders.forEach(function(t){var n=t.domArgs;if(t.domArgs=null,"function"==typeof r.onBeforeTimeHeaderDomRemove&&r.onBeforeTimeHeaderDomRemove(n),"function"==typeof r.onBeforeTimeHeaderDomAdd&&r.wa.reactDOM){var i=n&&n.Rc;if(i&&e.Util.isReactComponent(n.element)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.unmountComponentAtNode(i)}}});for(var t=0;t<this.nav.hourTable.rows.length;t++){var n=this.nav.hourTable.rows[t].cells[0].firstChild;n.data=null,n.onmousemove=null,n.onmouseout=null}r.elements.timeHeaders=[]}},this.hd=function(){var t=document.createElement("div");t.style.zoom=1,t.style.position="relative",t.onmousemove=this.ld,t.oncontextmenu=this.md,e.re(t,e.touch.start,this.Yc.onMainTouchStart),e.re(t,e.touch.move,this.Yc.onMainTouchMove),e.re(t,e.touch.end,this.Yc.onMainTouchEnd),e.re(t,"contextmenu",function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1}),navigator.msPointerEnabled&&(t.style.msTouchAction="none",t.style.touchAction="none"),t.daypilotMainD=!0,t.calendar=this;var n=null,i=null;if(this.showHours){var o=document.createElement("div");o.style.cssFloat="left",r.rtl&&(o.style.cssFloat="right"),o.style.width=this.hourWidth+"px",o.style.height=this.ed()+"px",o.style.overflow="hidden",o.style.position="relative",t.appendChild(o),n=o;var a=r.Z()+30;(i=document.createElement("div")).style.height=a+"px",o.appendChild(i)}var l=document.createElement("div");l.style.height=this.ed()+"px",this.showHours&&(r.rtl?l.style.marginRight=this.hourWidth+"px":l.style.marginLeft=this.hourWidth+"px"),l.style.position="relative",l.style.overflow="auto",t.appendChild(l),i&&(this.nav.hourTable=this.kd(),i.appendChild(this.nav.hourTable));var s=document.createElement("div");s.style.height="0px",s.style.position="relative",s.appendChild(this.nd());var d=document.createElement("div");return d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style.width="100%",d.style.height="0px",s.appendChild(d),this.nav.crosshair=d,s.appendChild(this.od()),l.appendChild(s),this.nav.grid=s,this.nav.zoom=t,this.nav.bottomLeft=n,this.nav.bottomRight=l,this.nav.hoursPlaceholder=i,t},this.nd=function(){if(r.N){var e=document.createElement("div");return r.nav.main=e,e}var t=document.createElement("table");return t.cellPadding="0",t.cellSpacing="0",t.border="0","Fixed"===this.columnWidthSpec||(t.style.width="100%"),t.style.border="0px none",t.style.margin="0px",t.style.tableLayout="fixed",this.nav.main=t,t},this.pd=function(){if("Fixed"===this.columnWidthSpec){for(var e=0,t=0;t<r.eb.length;t++){var n=r.eb[t];e+=n.width?n.width:r.columnWidth}return e+"px"}return"100%"},this.od=function(){if(r.N){var e=document.createElement("div");return e.style.userSelect="none",e.style.position="absolute",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.height="0px",r.nav.events=e,e}var t=document.createElement("table");t.style.position="absolute",t.style.top="0px",t.cellPadding="0",t.cellSpacing="0",t.border="0",t.style.width=r.pd(),t.style.border="0px none",t.style.margin="0px",t.style.tableLayout="fixed",this.nav.events=t;for(var n=this.eb.length,i=t.insertRow(-1),o=0;o<n;o++){var a=i.insertCell(-1);a.style.padding="0px",a.style.border="0px none",a.style.height="0px",a.style.overflow="visible",r.rtl||(a.style.textAlign="left"),r.qd(a)}return t},this.rd=function(){var e=document.createElement("table");e.cellSpacing="0",e.cellPadding="0",e.border="0",e.style.margin="0px",e.style.border="0px none",e.style.width=this.hourWidth+"px",e.oncontextmenu=function(){return!1},e.onmousemove=function(){r.Ba()};for(var t=r.sd(),n=0;n<t;n++)this.td(e,n);return e},this.kd=function(){var e=document.createElement("div");e.style.width=this.hourWidth+"px",e.style.position="relative",e.oncontextmenu=function(){return!1},e.onmousemove=function(){r.Ba()},e.rows=[];for(var t=r.sd(),n=0;n<t;n++)this.ud(e,n);return e},this.sd=function(){return this.gb()/(60*this.timeHeaderCellDuration*1e3)},this.vd=function(){return 60*this.cellHeight/this.cellDuration/(60/this.timeHeaderCellDuration)},this.xd=function(){return(this.kb()-this.kb(!0))*(60/this.cellDuration)},this.yd=function(){return this.kb()-this.kb(!0)},this.dc=function(){return this.xd()*this.cellHeight},this.td=function(t,n){var i=r.vd(),o=t.insertRow(-1);o.style.height=i+"px";var a=o.insertCell(-1);a.valign="bottom",a.setAttribute("unselectable","on"),a.style.padding="0px",a.style.border="0px none";var l=document.createElement("div");l.className=this.G("_rowheader"),l.style.position="relative",l.style.width=this.hourWidth+"px",l.style.height=i+"px",l.style.overflow="hidden",l.setAttribute("unselectable","on");var s=document.createElement("div");s.className=this.G("_rowheader_inner"),s.setAttribute("unselectable","on");var d=r.zd(n),c=d.html,u=d.data;u&&(l.data=u,l.onmousemove=r.Ad,l.onmouseout=r.Bd);var h=null,p={};if(p.header=u,"function"==typeof r.onBeforeTimeHeaderDomAdd&&(p.element=null,r.onBeforeTimeHeaderDomAdd(p),h=p.element),l.domArgs=p,h){var f=s;if(p.Rc=f,e.Util.isReactComponent(h)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(h,f)}else f.appendChild(h)}else s.innerHTML=c;l.appendChild(s),r.elements.timeHeaders.push(l),a.appendChild(l)},this.ud=function(t,n){var i=r.vd(),o=document.createElement("div");o.style.position="absolute",o.style.top=n*i+"px",o.style.height=i+"px",t.rows[n]=o;var a=document.createElement("div");o.appendChild(a),o.cells=[a];var l=document.createElement("div");l.className=this.G("_rowheader"),l.style.position="relative",l.style.width=this.hourWidth+"px",l.style.height=i+"px",l.style.overflow="hidden",l.setAttribute("unselectable","on");var s=document.createElement("div");s.className=this.G("_rowheader_inner"),s.setAttribute("unselectable","on");var d=r.zd(n),c=d.html,u=d.data;u&&(l.data=u,l.onmousemove=r.Ad,l.onmouseout=r.Bd);var h=null,p={};if(p.header=u,"function"==typeof r.onBeforeTimeHeaderDomAdd&&(p.element=null,r.onBeforeTimeHeaderDomAdd(p),h=p.element),l.domArgs=p,h){var f=s;if(p.Rc=f,e.Util.isReactComponent(h)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(h,f)}else f.appendChild(h)}else s.innerHTML=c;l.appendChild(s),r.elements.timeHeaders.push(l),a.appendChild(l),t.appendChild(o)},this.zd=function(t){var n,i;if(this.hours){var o=t+this.yd();n=(i=this.hours[o]).html}var a,l=this.startDate.addMinutes(this.timeHeaderCellDuration*t+60*this.kb()),s=l.getHours(),d=s<12;if(a="Clock12Hours"===this.ea.timeFormat()?d?"AM":"PM":"00",!n){var c=document.createElement("div");if(c.setAttribute("unselectable","on"),"Clock12Hours"===this.ea.timeFormat()&&0==(s%=12)&&(s=12),60!==this.timeHeaderCellDuration&&(s+=":"+l.toString("mm")),c.innerHTML=s,60===this.timeHeaderCellDuration){var u=document.createElement("span");u.setAttribute("unselectable","on"),u.className=this.G("_rowheader_minutes"),u.innerHTML=a,c.appendChild(u)}n=c.outerHTML}var h={header:{}};h.header.hours=l.getHours(),h.header.minutes=l.getMinutes(),h.header.start=l.toString("HH:mm"),h.header.html=n,h.header.areas=i?i.areas:null,h.header.time=new e.Duration(l.getTimePart()),"function"==typeof r.onBeforeTimeHeaderRender&&(r.onBeforeTimeHeaderRender(h),null!==h.header.html&&(n=h.header.html)),i=h.header;var p={};return p.start=l,p.hour=s,p.html=n,p.data=i,p.sup=a,p},this.Ad=function(t){r.Ba();var n=this;n.active||e.Areas.showAreas(n,n.data)},this.Bd=function(t){e.Areas.hideAreas(this,t)},this.ed=function(){switch(this.heightSpec){case"Fixed":case"Parent100Pct":return this.height;case"Full":return this.Z();case"BusinessHours":case"BusinessHoursNoScroll":return this.hb()*this.cellHeight*60/this.cellDuration;default:throw new e.Exception("DayPilot.Calendar: Unexpected 'heightSpec' value.")}},this.Z=function(){return r.gb()*this.cellHeight/(6e4*r.cellDuration)},this.lb=function(){if(!this.showHeader)return 0;var e=this.headerLevels*l.headerHeight();return this.showAllDayEvents&&l.allDayHeaderHeight()?e+l.allDayHeaderHeight():e},this.Pa=function(){if(this.headerHeightAutoFit){for(var e=0,t=0;t<this.nav.header.rows.length;t++)for(var n=this.nav.header.rows[t],i=0;i<n.cells.length;i++){var o=n.cells[i].firstChild,r=o.firstChild,a=o.style.height;o.style.height="auto",r.style.position="static";var l=o.offsetHeight;o.style.height=a,r.style.position="",e=Math.max(e,l)}e>this.headerHeight&&(this.P.headerHeight=e,this.Na(),this.Oa())}},this.Cd=function(){return e.sw(this.M?r.nav.bottomRight:r.nav.scroll)>0},this.gd=function(){var e=document.createElement("div");"Fixed"===this.columnWidthSpec||(e.style.overflow="auto"),e.style.position="absolute",e.style.left="0px",e.style.right="0px";var t=document.createElement("div");t.style.position="relative",t.style.zoom="1";var n=null;if("Fixed"===this.columnWidthSpec||this.M){var i=document.createElement("div");if(i.style.cssFloat="left",r.rtl&&(i.style.cssFloat="right"),i.style.width=this.hourWidth+"px",this.showHours){var o=this.Dd();this.nav.corner=o,i.appendChild(o),t.appendChild(i),this.nav.upperLeft=i}var a=document.createElement("div");this.showHours&&(r.rtl?a.style.marginRight=this.hourWidth+"px":a.style.marginLeft=this.hourWidth+"px"),a.style.position="relative",a.style.overflow="hidden",a.style.height=this.lb()+"px",t.appendChild(a),this.nav.upperRight=a,(n=document.createElement("div")).style.position="relative",a.appendChild(n)}else{var l=document.createElement("table");l.cellPadding="0",l.cellSpacing="0",l.border="0",l.style.margin="0px",l.style.width="100%",l.style.borderCollapse="separate",l.style.border="0px none";var s=l.insertRow(-1);if(this.nav.fullHeader=l,this.showHours){var d=s.insertCell(-1);d.style.padding="0px",d.style.border="0px none",o=this.Dd(),d.appendChild(o),this.nav.corner=o}(d=s.insertCell(-1)).style.width="100%",d.valign="top",d.style.position="relative",d.style.padding="0px",d.style.border="0px none",(n=document.createElement("div")).style.position="relative",n.style.height=this.lb()+"px",n.style.overflow="hidden",d.appendChild(n),this.nav.mid=n,t.appendChild(l)}return this.nav.headerParent=n,this.nav.headerParent.onmousemove=function(e){e.insideMainD=!0},this.Ed(),this.Cd()&&!("Fixed"===this.columnWidthSpec)&&this.Fd(),e.appendChild(t),e},this.Ed=function(){this.nav.unifiedCornerRight=null,r.N?(this.nav.header=document.createElement("div"),this.nav.header.style.position="relative"):(this.nav.header=document.createElement("table"),this.nav.header.style.margin="0px",this.nav.header.cellPadding="0",this.nav.header.cellSpacing="0","Fixed"===this.columnWidthSpec||(this.nav.header.width="100%"),this.nav.header.style.tableLayout="fixed",this.nav.header.oncontextmenu=function(){return!1}),this.nav.header.setAttribute("dp-id","header"),this.nav.headerParent.appendChild(this.nav.header),this.nav.header.onmousemove=function(){r.Ba()},this.nav.allday&&e.de(this.nav.allday);var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.height="0px",t.setAttribute("dp-id","allday"),"Fixed"===this.columnWidthSpec?t.style.width=this.eb.length*this.columnWidth+"px":(t.style.left="0px",t.style.right="0px"),this.nav.allday=t,this.nav.headerParent.appendChild(t)},this.Fd=function(){if(this.nav.fullHeader){var e=this.nav.fullHeader.rows[0].insertCell(-1);e.style.padding="0px",e.style.verticalAlign="top",e.setAttribute("unselectable","on");var t=document.createElement("div");t.setAttribute("unselectable","on"),t.className=this.G("_cornerright"),t.style.overflow="hidden",t.style.position="relative",t.style.width="16px",t.style.height=this.lb()+"px";var n=document.createElement("div");n.className=this.G("_cornerright_inner"),t.appendChild(n),e.appendChild(t),this.nav.cornerRight=t}},this.Dd=function(){var t=document.createElement("div");t.style.position="relative",t.className=this.G("_corner"),t.style.width=this.hourWidth+"px",t.style.height=this.lb()+"px",t.style.overflow="hidden",t.oncontextmenu=function(){return!1};var n=document.createElement("div");n.className=this.G("_corner_inner"),n.setAttribute("unselectable","on"),t.appendChild(n);var i=document.createElement("div");return i.style.position="absolute",i.style.padding="2px",i.style.top="0px",i.style.left="1px",i.style.backgroundColor="#FF6600",i.style.color="white",i.innerHTML="DEMO",i.setAttribute("unselectable","on"),e.Util.isNullOrUndefined(void 0)&&t.appendChild(i),t},this.ta=function(){if(r.nav.corner&&r.nav.corner.firstChild){var t=r.nav.corner.firstChild,n=t.domArgs;if(t.domArgs=null,n&&("function"==typeof r.onBeforeCornerDomRemove&&r.onBeforeCornerDomRemove(n),"function"==typeof r.onBeforeCornerDomAdd&&r.wa.reactDOM&&t)&&e.Util.isReactComponent(n.element)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.unmountComponentAtNode(t)}}},this.ra=function(){var t=this.nav.main;t.root=null,t.onmouseup=null;for(var n=0;n<t.rows.length;n++)for(var i=t.rows[n],o=0;o<i.cells.length;o++){var r=i.cells[o];r.root=null,r.onmousedown=null,r.onmousemove=null,r.onmouseout=null,r.onmouseup=null,r.onclick=null,r.ondblclick=null,r.oncontextmenu=null}this.O||e.pu(t)},this.Qa=function(){for(var e=0;this.nav.scrollUp&&e<this.nav.scrollUp.length;e++)this.nav.scrollLayer.removeChild(this.nav.scrollUp[e]);for(e=0;this.nav.scrollDown&&e<this.nav.scrollDown.length;e++)this.nav.scrollLayer.removeChild(this.nav.scrollDown[e]);this.nav.scrollUp=[],this.nav.scrollDown=[]},this.qd=function(e){var t=document.createElement("div");t.style.marginRight=r.columnMarginRight+"px",t.style.position="relative",t.style.height="1px",t.style.marginTop="-1px",e.events=t;var n=document.createElement("div");n.style.position="relative",n.style.height="1px",n.style.marginTop="-1px",e.separators=n;var i=document.createElement("div");i.style.position="relative",i.style.height="1px",i.style.marginTop="-1px",e.selection=i,e.appendChild(n),e.appendChild(i),e.appendChild(t)},this.Sa=function(){r.N?r.Gd():r.Hd()},this.Id=function(){if(this.scrollLabelsVisible)for(var e=this.eb,t=this.showHours?this.hourWidth:0,n=(this.nav.scroll.clientWidth-t)/e.length,i=0;i<e.length;i++){var o=document.createElement("div");o.style.position="absolute",o.style.top="0px",o.style.left=t+2+i*n+n/2+"px",o.style.display="none",(r=document.createElement("div")).style.height="10px",r.style.width="10px",r.className=this.G("_scroll_up"),o.appendChild(r),this.nav.scrollLayer.appendChild(o),this.nav.scrollUp.push(o);var r,a=document.createElement("div");a.style.position="absolute",a.style.top="0px",a.style.left=t+2+i*n+n/2+"px",a.style.display="none",(r=document.createElement("div")).style.height="10px",r.style.width="10px",r.className=this.G("_scroll_down"),a.appendChild(r),this.nav.scrollLayer.appendChild(a),this.nav.scrollDown.push(a)}},this.Jd=function(){var e=this.nav.events;e.innerHTML="",e.rows=[{cells:[]}],r._().forEach(function(t,n){var i=document.createElement("div");i.style.height="1px",i.style.overflow="visible",i.style.position="absolute",i.style.left=t.left+t.unit,i.style.right=t.left+t.unit,i.style.width=t.width+t.unit,r.qd(i),e.appendChild(i),e.rows[0].cells.push(i)})},this._=function(){var t=r.eb,n="Fixed"===this.columnWidthSpec,i=0;return e.list.for(t.length,function(o){var a={},l=0,s="";return n?(s="px",l=t[o].width?t[o].width:r.columnWidth):(s="%",l=function(t){return e.browser.ie||e.browser.edge?Math.floor(100*t)/100:t}(100/t.length)),a.left=i,a.width=l,a.unit=s,i+=l,a})},this.Gd=function(){var t=this.nav.main,n=this.ob(),i=(this.yd(),r.eb);r.elements.cells={},r.nav.main.innerHTML="",r.nav.main.rows=[],this.nav.scrollable.daypilotMainD=!0,this.nav.scrollable.calendar=this,r.Id(),r.Jd();for(var o=0;o<n;o++)if(r.nav.main.rows.push({cells:[]}),e.browser.ie)for(var a=i.length-1;a>=0;a--)r._c(a,o);else for(a=0;a<i.length;a++)r._c(a,o);t.style.height=n*r.cellHeight+"px"},r.Kd=function(e,t){var n={},i=r.aa(e),o=t*r.cellHeight;return n.left=i.left,n.width=i.width,n.right=n.left+n.width,n.top=o,n.height=r.cellHeight,n.bottom=n.top+n.height,n},r._c=function(n,i){if(!r.elements.cells[n+"_"+i]){if("Fixed"===r.columnWidthSpec&&!e.browser.ie){var o=r.Kd(n,i),a=r.X();if(a.pixels.right<=o.left||a.pixels.left>=o.right||a.pixels.bottom<=o.top||a.pixels.top>=o.bottom)return}var l=r.aa(n),s=60*this.cellDuration*1e3,d=i*r.cellHeight,c=r.eb[n],u=document.createElement("div");u.style.position="absolute",u.style.left=l.left+l.unit,u.style.right=l.left+l.unit,u.style.width=l.width+l.unit,u.style.top=d+"px",u.start=c.start.addTime(i*s).addHours(r.kb()),u.end=u.start.addTime(s),u.resource=c.id,u.data={},u.data.x=n,u.data.y=i,u.data.start=u.start,u.data.end=u.end,u.data.resource=u.resource,u.data.calendar=r,r.cellProperties||(r.cellProperties={});var h={};h.resource=u.resource,h.start=u.start,h.end=u.end;var p=n+"_"+i;if(h.cssClass=null,h.html=null,h.backImage=null,h.backRepeat=null,h.backColor=null,h.business=r.Ld(u.start,u.end),r.cellProperties[p]&&e.Util.copyProps(r.cellProperties[p],h,["cssClass","html","backImage","backRepeat","backColor","business","areas","disabled"]),"function"==typeof r.onBeforeCellRender){var f={};f.cell=h,r.onBeforeCellRender(f)}r.cellProperties[p]=h;var g,m=r.Md(n,i);u.root=r,u.setAttribute("unselectable","on"),(g=document.createElement("div")).className=r.G("_cell"),g.style.position="relative",g.style.height=r.cellHeight+"px",g.style.overflow="hidden",g.setAttribute("unselectable","on");var v=document.createElement("div");v.className=r.G("_cell_inner"),g.appendChild(v),u.appendChild(g),u.onmousedown=r.Yb,u.onmousemove=r.ic,u.onmouseout=r.hc,e.re(u,e.touch.end,r.Yc.onCellTouchEnd),u.oncontextmenu=function(){return this.selected||(r.clearSelection(),t.column=n,r.selectedCells.push(this),t.firstSelected=this,t.topSelectedCell=this,t.bottomSelectedCell=this,r.$b()),!1};var y=r.Nd(n,i);g=u.firstChild,"Fixed"===r.columnWidthSpec&&(g.style.width=c.width?c.width+"px":r.columnWidth+"px"),y&&(g.firstChild.style.background=y),(m?m.business:r.Ld(u.start,u.end))&&e.Util.addClass(g,r.G("_cell_business"));var b=g.firstChild;if(b&&(b.innerHTML=""),g.style.backgroundImage="",g.style.backgroundRepeat="",m&&(m.html&&(b.innerHTML=m.html),m.cssClass&&e.Util.addClass(g,m.cssClass),m.backImage&&(g.style.backgroundImage="url('"+m.backImage+"')"),m.backRepeat&&(g.style.backgroundRepeat=m.backRepeat),m.areas)){var w={};w.start=u.start,w.end=u.end,w.resource=u.resource;var C=e.list(m.areas).filter(function(t){return!(t.end&&new e.Date(t.end)<=u.start||t.start&&new e.Date(t.start)>=u.end)});C.forEach(function(t){if(t.start||t.end){if(t.start){var n=new e.Date(t.start).getTime()-u.start.getTime();t.top=r.Od(n)}if(t.end){var i=new e.Date(t.end).getTime()-u.start.getTime();t.height=r.Od(i)-t.top}}}),e.Areas.attach(g,w,{areas:C})}r.nav.main.appendChild(u),r.nav.main.rows[i].cells[n]=u,r.elements.cells[n+"_"+i]=u}},this.Hd=function(){var n=this.nav.main,i=60*this.cellDuration*1e3,o=this.ob(),a=(this.yd(),r.eb),l=0;for(n&&(l=r.Y().scrollTop,this.ra()),this.nav.scrollable.daypilotMainD=!0,this.nav.scrollable.calendar=this;n&&n.rows&&n.rows.length>0;)this.O||e.pu(n.rows[0]),n.deleteRow(0);if(this.Pd=!0,this.scrollLabelsVisible){a=this.eb;for(var s=this.showHours?this.hourWidth:0,d=(this.nav.scroll.clientWidth-s)/a.length,c=0;c<a.length;c++){var u=document.createElement("div");u.style.position="absolute",u.style.top="0px",u.style.left=s+2+c*d+d/2+"px",u.style.display="none",(h=document.createElement("div")).style.height="10px",h.style.width="10px",h.className=this.G("_scroll_up"),u.appendChild(h),this.nav.scrollLayer.appendChild(u),this.nav.scrollUp.push(u);var h,p=document.createElement("div");p.style.position="absolute",p.style.top="0px",p.style.left=s+2+c*d+d/2+"px",p.style.display="none",(h=document.createElement("div")).style.height="10px",h.style.width="10px",h.className=this.G("_scroll_down"),p.appendChild(h),this.nav.scrollLayer.appendChild(p),this.nav.scrollDown.push(p)}}var f=a.length;if(this.cssOnly||this.K){for(var g=this.nav.events;g&&g.rows&&g.rows.length>0;)this.O||e.pu(g.rows[0]),g.deleteRow(0);for(var m=g.insertRow(-1),v=0;v<f;v++)(b=m.insertCell(-1)).style.padding="0px",b.style.border="0px none",b.style.height="1px",b.style.overflow="visible","Fixed"===this.columnWidthSpec&&(b.style.width=a[v].width?a[v].width+"px":this.columnWidth+"px"),r.rtl||(b.style.textAlign="left"),r.qd(b)}for(c=0;c<o;c++){var y=c;for((m=n.insertRow(-1)).style.MozUserSelect="none",m.style.KhtmlUserSelect="none",m.style.WebkitUserSelect="none",v=0;v<f;v++){var b,w=this.eb[v];(b=m.insertCell(-1)).start=w.start.addTime(y*i).addHours(this.kb()),b.end=b.start.addTime(i),b.resource=w.id,this.cellProperties||(this.cellProperties={});var C={};C.resource=b.resource,C.start=b.start,C.end=b.end;var x=v+"_"+y;if(C.cssClass=null,C.html=null,C.backImage=null,C.backRepeat=null,C.backColor=null,C.business=this.Ld(b.start,b.end),this.cellProperties[x]&&e.Util.copyProps(this.cellProperties[x],C,["cssClass","html","backImage","backRepeat","backColor","business","areas","disabled"]),"function"==typeof this.onBeforeCellRender){var S={};S.cell=C,this.onBeforeCellRender(S)}this.cellProperties[x]=C;var T,E=r.Md(v,y);b.root=this,b.setAttribute("unselectable","on"),(T=document.createElement("div")).className=r.G("_cell"),T.style.position="relative",T.style.height=r.cellHeight+"px",T.style.overflow="hidden",T.setAttribute("unselectable","on");var _=document.createElement("div");_.className=r.G("_cell_inner"),T.appendChild(_),b.appendChild(T),b.onmousedown=this.Yb,b.onmousemove=this.ic,b.onmouseout=this.hc,e.re(b,e.touch.end,this.Yc.onCellTouchEnd),b.oncontextmenu=function(){return this.selected||(r.clearSelection(),t.column=t.getColumn(this),r.selectedCells.push(this),t.firstSelected=this,t.topSelectedCell=this,t.bottomSelectedCell=this,r.$b()),!1};var k=r.Nd(v,y);T=b.firstChild,"Fixed"===this.columnWidthSpec&&(T.style.width=w.width?w.width+"px":this.columnWidth+"px"),k&&(T.firstChild.style.background=k),(E?E.business:this.Ld(b.start,b.end))&&e.Util.addClass(T,r.G("_cell_business"));var D=T.firstChild;if(D&&(D.innerHTML=""),T.style.backgroundImage="",T.style.backgroundRepeat="",E&&(E.html&&(D.innerHTML=E.html),E.cssClass&&e.Util.addClass(T,E.cssClass),E.backImage&&(T.style.backgroundImage="url('"+E.backImage+"')"),E.backRepeat&&(T.style.backgroundRepeat=E.backRepeat),E.areas)){var A={};A.start=b.start,A.end=b.end,A.resource=b.resource;var O=e.list(E.areas).filter(function(t){return!(t.end&&new e.Date(t.end)<=b.start||t.start&&new e.Date(t.start)>=b.end)});O.forEach(function(t){if(t.start||t.end){if(t.start){var n=new e.Date(t.start).getTime()-b.start.getTime();t.top=r.Od(n)}if(t.end){var i=new e.Date(t.end).getTime()-b.start.getTime();t.height=r.Od(i)-t.top}}}),e.Areas.attach(T,A,{areas:O})}}}n.onmouseup=this.jc,n.root=this,n.style.height=o*r.cellHeight+"px",r.nav.scrollable.style.display="",r.Y().scrollTop=l},this.md=function(e){if(!a.detected){var t=r.getSelection();if(t){var n={};if(n.start=t.start,n.end=t.end,n.resource=t.resource,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onTimeRangeRightClick&&(r.onTimeRangeRightClick(n),n.preventDefault.value))return!1;"ContextMenu"===r.timeRangeRightClickHandling&&r.contextMenuSelection&&r.contextMenuSelection.show(r.getSelection()),"function"==typeof r.onTimeRangeRightClicked&&r.onTimeRangeRightClicked(n)}}},this.Ld=function(e,t){return this.businessBeginsHour<this.businessEndsHour?!(e.getHours()<this.businessBeginsHour||e.getHours()>=this.businessEndsHour||6===e.getDayOfWeek()||0===e.getDayOfWeek()):e.getHours()>=this.businessBeginsHour||e.getHours()<this.businessEndsHour},this.ld=function(n){(n=n||window.event).insideMainD=!0,window.event&&window.event.srcElement&&(window.event.srcElement.inside=!0);for(var i=0;i<t.registered.length;i++){var o=t.registered[i];o!==r&&o.Aa&&o.Aa()}t.activeCalendar=this,r.coords=e.mo3(r.nav.main,n);var a=e.mc(n),s=r.crosshairType&&"Disabled"!==r.crosshairType;if(e.Global.moving||e.Global.resizing||e.Global.selecting?r.Ba():s&&r.Qd(),e.Global.resizing)r.Rd(a);else if(e.Global.moving){if(!e.Global.moving.helper)return e.de(t.movingShadow),void(t.movingShadow=null);if(!t.movingShadow){if(!(e.distance(a,t.originalMouse)>3))return;t.movingShadow=r.db(e.Global.moving,!r.V.ie),t.movingShadow.style.width=t.movingShadow.parentNode.offsetWidth+1+"px"}if(!r.coords)return;e.Util.addClass(e.Global.moving,r.G("_event_moving_source"));var d=r.cellHeight,c=t.moveOffsetY;c||(c=d/2),"Top"===this.moveBy&&(c=0);var u=Math.floor((r.coords.y-c-0+d/2)/d)*d+0;u<0&&(u=0);var h=r.nav.main,p=r.N?r.ob()*r.cellHeight:h.clientHeight,f=parseInt(t.movingShadow.style.height);u+f>p&&(u=p-f);var g=Math.floor(r.coords.x/(h.clientWidth/r.eb.length));g<0&&(g=0),g>=r.eb.length&&(g=r.eb.length-1),r.rtl&&(g=r.eb.length-g-1);var m=t.movingShadow,v=e.Global.moving.event,y=r.Hb(v,g,u),b=r.eventMovingStartEndFormat;"Auto"===b&&(b="Clock24Hours"===l.timeFormat()?"H:mm":"h:mm tt");var w={};w.e=v,w.start=y.start,w.end=y.end,w.resource=y.resource,w.html=null,w.cssClass=null,w.allowed=!0,w.areaData=e.Global.movingAreaData,w.top={},w.top.width=null,w.top.space=5,w.top.html=w.start.toString(b,l.locale()),w.top.enabled=r.eventMovingStartEndEnabled,w.bottom={},w.bottom.width=null,w.bottom.space=5,w.bottom.html=w.end.toString(b,l.locale()),w.bottom.enabled=r.eventMovingStartEndEnabled,w.external=!!t.drag,function(){var n=r.Ca;if(!n||n.start.getTime()!==y.start.getTime()||n.end.getTime()!==y.end.getTime()||n.resource!==y.resource){if(m.className=r.G("_shadow"),m.firstChild.innerHTML="",r.Ca=w,m.args=w,!r.allowEventOverlap){var i={id:v.id(),start:w.start,end:w.end,resource:w.resource};r.events._b(i)&&(e.Util.addClass(m,r.G("_shadow_forbidden")),w.allowed=!1)}r.bc(w.start,w.end,w.resource)&&(e.Util.addClass(m,r.G("_shadow_forbidden")),w.allowed=!1),e.Util.removeClass(m,r.G("_shadow_forbidden")),"function"==typeof r.onEventMoving&&w.allowed&&r.onEventMoving(w),w.html&&(m.firstChild.innerHTML=w.html),w.cssClass&&e.Util.addClass(m,w.cssClass),w.allowed||e.Util.addClass(m,r.G("_shadow_forbidden")),t.movingShadow.style.top=u+"px";var o=r.nav.events;g<o.rows[0].cells.length&&g>=0&&t.movingShadow.column!==g&&(t.movingShadow.column=g,t.moveShadow(o.rows[0].cells[g])),r.fc(m,g,w)}}()}else if(t.firstMousePos){var C=r.Zb(r.coords.x,!0),x=Math.floor(r.coords.y/r.cellHeight),S=r.nav.main.rows[x].cells[C];if(!e.Global.selecting){var T=t.firstMousePos;T.x===(_=r.coords).x&&T.y===_.y||(e.Global.selecting={calendar:r})}if(!e.Global.selecting)return;a=r.coords,C!==t.column&&(S=r.nav.main.rows[x].cells[t.column]);var E=e.Global.selecting;if(E.last&&E.last.x===C&&E.last.y===x)return;E.last={x:C,y:x},a.y<t.firstMousePos.y?(r.selectedCells=t.getCellsBelow(S),t.topSelectedCell=r.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(r.selectedCells=t.getCellsAbove(S),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=r.selectedCells[0]),r.$b()}if(t.drag){if(t.gShadow&&document.body.removeChild(t.gShadow),t.gShadow=null,!t.movingShadow&&r.coords&&(m=r.db(t.drag,!1))){t.movingShadow=m;var _=e.Date.today(),k=(n={id:t.drag.id,start:_,end:_.addSeconds(t.drag.duration),text:t.drag.text},t.drag.data);if(k){var D=["duration","element","remove","id","text"];for(var A in k)e.contains(D,A)||(n[A]=k[A])}var O=new e.Event(n,r);O.external=!0,e.Global.moving={},e.Global.moving.event=O,e.Global.moving.helper={}}n.cancelBubble=!0}r.Sd(r.coords)},this.Td=function(e){},this.bc=function(e,t,n){return r.Ud(e,t,n).some(function(e){return e.disabled})},this.Ud=function(t,n,i){var o=[];for(var a in r.cellProperties){var l=r.cellProperties[a];(!i||i===l.resource)&&e.Util.overlaps(t,n,l.start,l.end)&&o.push(l)}return o},this.Rd=function(n){if(!e.Global.resizing.event)return e.Global.resizing=null,e.de(t.resizingShadow),void(t.resizingShadow=null);t.resizingShadow||(t.resizingShadow=r.db(e.Global.resizing,!1));var i=e.Global.resizing.event.calendar.cellHeight,o=n.y-t.originalMouse.y,a=e.Global.resizing.event,s=a.start(),d=a.end();if("bottom"===e.Global.resizing.dpBorder){(u=Math.floor((t.originalHeight+t.originalTop+o+i/2)/i)*i-t.originalTop+0)<i&&(u=i);var c=r.N?r.ob()*r.cellHeight:r.nav.main.clientHeight;t.originalTop+u>c&&(u=c-t.originalTop),t.resizingShadow.style.height=u+"px",d=r.Db(a,t.originalTop+u)}else if("top"===e.Global.resizing.dpBorder){var u,h=Math.floor((t.originalTop+o-0+i/2)/i)*i+0;h<0&&(h=0),h>t.originalTop+t.originalHeight-i&&(h=t.originalTop+t.originalHeight-i),(u=t.originalHeight-(h-t.originalTop))<i?u=i:t.resizingShadow.style.top=h+"px",t.resizingShadow.style.height=u+"px",s=r.Cb(a,h)}var p=t.resizingShadow,f=r.eventResizingStartEndFormat;"Auto"===f&&(f="Clock24Hours"===l.timeFormat()?"H:mm":"h:mm tt");var g={};if(g.e=a,g.start=s,g.end=d,g.resource=a.resource(),g.allowed=!0,g.html=null,g.cssClass=null,g.top={},g.top.width=null,g.top.space=5,g.top.html=g.start.toString(f,l.locale()),g.top.enabled=r.eventResizingStartEndEnabled,g.bottom={},g.bottom.width=null,g.bottom.space=5,g.bottom.html=g.end.toString(f,l.locale()),g.bottom.enabled=r.eventResizingStartEndEnabled,p.args=g,p.firstChild.innerHTML="",p.className=r.G("_shadow"),!r.allowEventOverlap){var m={id:a.id(),start:g.start,end:g.end,resource:g.resource};r.events._b(m)&&(e.Util.addClass(p,r.G("_shadow_forbidden")),g.allowed=!1)}r.bc(g.start,g.end,g.resource)&&(e.Util.addClass(p,r.G("_shadow_forbidden")),g.allowed=!1),"function"==typeof r.onEventResizing&&g.allowed&&r.onEventResizing(g),g.html&&(p.firstChild.innerHTML=g.html),g.cssClass&&e.Util.addClass(p,g.cssClass),g.allowed||e.Util.addClass(p,r.G("_shadow_forbidden")),r.fc(p,a.part.dayIndex,g)},this.temp={},this.temp.getPosition=function(){var t=r.Vd.getCellCoords();if(!t)return null;var n=r.eb[t.x],i={};return i.resource=n.id,i.start=new e.Date(n.start).addHours(r.kb(!0)).addMinutes(t.y*r.cellDuration),i.end=i.start.addMinutes(r.cellDuration),i},this.Vd={},this.Vd.getCellCoords=function(){var e={x:0,y:0};if(!r.coords)return null;e.x=r.Zb(r.coords.x);var t=Math.floor((r.coords.y-0)/r.cellHeight);return e.y=t,e.x<0?null:e},this.Vd.col=function(t,n){var i={left:0,width:0};if(!t)return null;if(!t.rows)return null;if(0===t.rows.length)return null;if(0==t.rows[0].cells.length)return null;var o=t.rows[0].cells[n];if(!o)return null;var r=e.abs(t),a=e.abs(o);return i.left=a.x-r.x,i.width=o.offsetWidth,i},this.Qd=function(){this.Ba(),this.elements.crosshair||(this.elements.crosshair=[]);var t=this.Vd.getCellCoords();if(t){var n=t.x;if(null!==n){var i=Math.floor(t.y/(60/r.cellDuration)*(60/r.timeHeaderCellDuration));if(!(i<0)){if(this.nav.hourTable){if(i>=this.nav.hourTable.rows.length)return;var o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.right="0px",o.style.top="0px",o.style.bottom="0px",o.className=r.G("_crosshair_left"),this.nav.hourTable.rows[i].cells[0].firstChild.appendChild(o),this.elements.crosshair.push(o)}if(this.nav.header){var a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.right="0px",a.style.top="0px",a.style.bottom="0px",a.className=r.G("_crosshair_top");var l=this.nav.header.rows[this.headerLevels-1];l.cells[n]&&(l.cells[n].firstChild.appendChild(a),this.elements.crosshair.push(a))}if("Header"!==this.crosshairType){var s=this.nav.crosshair,d=Math.floor((r.coords.y-0)/r.cellHeight)*r.cellHeight+0,c=r.cellHeight,u=document.createElement("div");u.style.position="absolute",u.style.left="0px",u.style.right="0px",u.style.top=d+"px",u.style.height=c+"px",u.className=r.G("_crosshair_horizontal"),u.onmousedown=this.Wd,s.appendChild(u),this.elements.crosshair.push(u);var h=n;e.browser.ie&&(h=r.eb.length-1-n);var p=this.Vd.col(this.nav.main,h);if(c=r.Z(),p){var f=document.createElement("div");f.style.position="absolute",f.style.left=p.left+"px",f.style.width=p.width+"px",f.style.top="0px",f.style.height=c+"px",f.className=r.G("_crosshair_vertical"),f.onmousedown=this.Wd,s.appendChild(f),this.elements.crosshair.push(f)}}}}}},this.Wd=function(t){var n=r.nav.main;r.Ba(),r.coords=e.mo3(n,t);var i=r.Vd.getCellCoords(),o=i.x;e.browser.ie&&(o=r.eb.length-1-i.x),r.Yb.apply(n.rows[i.y+0].cells[o],[t])},this.Ba=function(){if(this.elements.crosshair&&0!==this.elements.crosshair.length){for(var e=0;e<this.elements.crosshair.length;e++){var t=this.elements.crosshair[e];t&&t.parentNode&&t.parentNode.removeChild(t)}this.elements.crosshair=[]}},this.La=function(){if(this.cellConfig){var e=this.cellConfig;if(e.vertical)for(var t=0;t<e.x;t++)for(var n=this.cellProperties[t+"_0"],i=1;i<e.y;i++)this.cellProperties[t+"_"+i]=n;if(e.horizontal)for(i=0;i<e.y;i++)for(n=this.cellProperties["0_"+i],t=1;t<e.x;t++)this.cellProperties[t+"_"+i]=n;if(e.default)for(n=e.default,i=0;i<e.y;i++)for(t=0;t<e.x;t++)this.cellProperties[t+"_"+i]||(this.cellProperties[t+"_"+i]=n)}},this.Md=function(e,t){return this.cellProperties?this.cellProperties[e+"_"+t]:null},this.Xd=function(e,t){var n=e+"_"+t;return!(!this.cellProperties||!this.cellProperties[n])&&this.cellProperties[n].business},this.Nd=function(e,t){var n=e+"_"+t;return this.cellProperties&&this.cellProperties[n]?this.cellProperties[n].backColor:null},this.sa=function(){var t=this.nav.header;if(t&&t.rows)for(var n=0;n<t.rows.length;n++)for(var i=t.rows[n],o=0;o<i.cells.length;o++){var a=i.cells[o];a.onclick=null,a.onmousemove=null,a.onmouseout=null;var l=a.domArgs;if(a.domArgs=null,"function"==typeof r.onBeforeHeaderDomRemove&&r.onBeforeHeaderDomRemove(l),"function"==typeof r.onBeforeHeaderDomAdd&&r.wa.reactDOM){var s=l&&l.Rc;if(s&&e.Util.isReactComponent(l.element)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.unmountComponentAtNode(s)}}}t&&(this.O||e.pu(t),t.innerHTML="",t.rows=[])},this.Yd=function(t){var n=t+1,i=n===r.headerLevels,o=this.Mc(n),a=0,l=0,s=r._(),d=[];if(!i)for(var c=0;c<o.length;c++){var u=o[c],h=s[c],p=u.getChildren?u.getChildrenCount(r.headerLevels-n+1):1,f=h.width;e.list.for(p-1,function(){f+=s[c+a].width,a+=1}),d.push({left:l,width:f}),l+=f}return d},this.Zd=function(t){function n(t){var n=o[t],i=d[t],a={header:{}};a.column=r.vb(n,r);var p=null;r.cb()&&"function"==typeof r.onBeforeHeaderRender&&(e.Util.copyProps(n,a.header,["id","start","name","html","backColor","toolTip","areas","children"]),r.onBeforeHeaderRender(a),e.Util.copyProps(a.header,n,["html","backColor","toolTip","areas"]));var f=!!n.getChildren,g=i.width,m=i.left;s||(m=h[t].left,g=h[t].width);var v=document.createElement("div");v.style.position="absolute",v.style.top=c+"px",v.style.left=m+i.unit,v.style.right=m+i.unit,v.style.width=g+i.unit,v.data=n,u.push(v),f&&(v.onclick=r.wb,v.onmousemove=r.xb,v.onmouseout=r.yb,n.toolTip&&(v.title=n.toolTip)),v.style.overflow="hidden",v.style.height=l.headerHeight()+"px";var y=document.createElement("div");y.setAttribute("unselectable","on"),y.style.userSelect="none",y.style.position="relative",y.style.height=l.headerHeight()+"px",y.className=r.G("_colheader");var b=document.createElement("div");if(b.className=r.G("_colheader_inner"),n.backColor&&(b.style.background=n.backColor),y.appendChild(b),v.appendChild(y),r.$d(y,n),"function"==typeof r.onBeforeHeaderDomAdd&&(a.element=null,r.onBeforeHeaderDomAdd(a),p=a.element),v.domArgs=a,p){var w=b;if(a.Rc=w,e.Util.isReactComponent(p)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(p,w)}else w.appendChild(p)}else f&&(y.firstChild.innerHTML=n.html||"");r.nav.header.appendChild(v)}var i=t+1,o=this.Mc(i),a=o.length,s=i===r.headerLevels,d=r._(),c=t*l.headerHeight(),u=[];r.nav.header.rows.push({cells:u});var h=r.Yd(t);if(e.browser.ie)for(var p=a-1;p>=0;p--)n(p);else for(p=0;p<a;p++)n(p)},this._d=function(t,n){for(var i=n?this.nav.header.insertRow(-1):this.nav.header.rows[t-1],o=this.Mc(t),a=o.length,s=t===r.headerLevels,d=0;d<a;d++){var c=o[d];if(r.cb()&&"function"==typeof r.onBeforeHeaderRender){var u={header:{}};e.Util.copyProps(c,u.header,["id","start","name","html","backColor","toolTip","areas","children"]),this.onBeforeHeaderRender(u),e.Util.copyProps(u.header,c,["html","backColor","toolTip","areas"])}var h=!!c.getChildren,p=n?i.insertCell(-1):i.cells[d];if(p.data=c,s);else{var f=1;h&&(f=c.getChildrenCount(r.headerLevels-t+1)),p.colSpan=f}h&&(p.onclick=this.wb,p.onmousemove=this.xb,p.onmouseout=this.yb,c.toolTip&&(p.title=c.toolTip)),p.style.overflow="hidden",p.style.padding="0px",p.style.border="0px none",p.style.height=l.headerHeight()+"px";var g=n?document.createElement("div"):p.firstChild;if(n){g.setAttribute("unselectable","on"),g.style.MozUserSelect="none",g.style.KhtmlUserSelect="none",g.style.WebkitUserSelect="none",g.style.position="relative",g.style.height=l.headerHeight()+"px",g.className=r.G("_colheader");var m=document.createElement("div");m.className=r.G("_colheader_inner"),c.backColor&&(m.style.background=c.backColor),g.appendChild(m),p.appendChild(g)}else g.style.height=l.headerHeight()+"px";this.$d(g,c),h&&(g.firstChild.innerHTML=c.html)}},this.$d=function(t,n){for(var i=[],o=0;o<t.childNodes.length;o++)(a=t.childNodes[o]).isActiveArea&&i.push(a);for(o=0;o<i.length;o++){var a;e.de(a=i[o])}if(n.areas){var l=n.areas;for(o=0;o<l.length;o++){var s=l[o];if(e.Areas.isVisible(s)){var d=r.vb(n),c=e.Areas.createArea(t,d,s);t.appendChild(c)}}}},this.Oa=function(){r.N?r.ae():r.be()},this.ae=function(){var t=r.nav.header;if(r.sa(),this.showHeader){var n=this.Mc(r.headerLevels,!0),i=n.length;this.ce=!0;var o=r.nav.corner;if(o){this.O||e.pu(o.firstChild);var a={};a.html=r.ca(r.cornerText,r.cornerHtml);var s=null;if(r.ta(),"function"==typeof r.onBeforeCornerRender&&r.onBeforeCornerRender(a),"function"==typeof r.onBeforeCornerDomAdd&&(a.element=null,r.onBeforeCornerDomAdd(a),s=a.element),s){var d=o.firstChild;if(d.domArgs=a,e.Util.isReactComponent(s)){if(!r.wa.reactDOM)throw new e.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(s,d)}else d.appendChild(s)}else o.firstChild.innerHTML=a.html||""}for(var c=0;c<r.headerLevels;c++)this.Zd(c);if(this.showAllDayEvents){var u=[];r.nav.header.rows.push({cells:u});for(var h=r._(),p=r.headerLevels*l.headerHeight(),f=0;f<i;f++){var g=n[f],m=h[f],v=document.createElement("div");v.data=g,v.style.overflow="hidden",v.style.position="absolute",v.style.left=m.left+m.unit,v.style.right=m.left+m.unit,v.style.width=m.width+m.unit,v.style.top=p+"px";var y=document.createElement("div");y.setAttribute("unselectable","on"),y.style.userSelect="none",y.style.overflow="hidden",y.style.position="relative",y.style.height=l.allDayHeaderHeight()+"px",y.className=this.G("_alldayheader");var b=document.createElement("div");b.className=this.G("_alldayheader_inner"),y.appendChild(b),v.appendChild(y),y.style.height=l.allDayHeaderHeight()+"px",u.push(v),t.appendChild(v)}}}},this.be=function(){if(this.showHeader){var t=this.nav.header,n=this.Mc(r.headerLevels,!0),i=n.length;for(e.de(this.nav.header),this.Ed();this.ce&&t&&t.rows&&t.rows.length>0;)this.O||e.pu(t.rows[0]),t.deleteRow(0);this.ce=!0;var o=r.nav.corner;if(o){this.O||e.pu(o.firstChild);var a={};a.html=r.ca(r.cornerText,r.cornerHtml),"function"==typeof r.onBeforeCornerRender&&r.onBeforeCornerRender(a),o.firstChild.innerHTML=a.html?a.html:""}for(var s=0;s<r.headerLevels;s++)this._d(s+1,!0);if(this.showAllDayEvents){var d=this.nav.header.insertRow(-1);for(s=0;s<i;s++){var c=n[s],u=d.insertCell(-1);u.data=c,u.style.padding="0px",u.style.border="0px none",u.style.overflow="hidden";var h=document.createElement("div");h.setAttribute("unselectable","on"),h.style.MozUserSelect="none",h.style.KhtmlUserSelect="none",h.style.WebkitUserSelect="none",h.style.overflow="hidden",h.style.position="relative",h.style.height=l.allDayHeaderHeight()+"px",h.className=this.G("_alldayheader");var p=document.createElement("div");p.className=this.G("_alldayheader_inner"),h.appendChild(p),u.appendChild(h),h.style.height=l.allDayHeaderHeight()+"px"}}}},this.ia=function(e){var t=e?0:100;this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.callbackTimeout=window.setTimeout(function(){r.loadingLabelVisible&&r.nav.loading&&(r.nav.loading.innerHTML=r.ca(this.loadingLabelText,this.loadingLabelHtml),r.nav.loading.style.top=r.lb()+5+"px",r.nav.loading.style.display="")},t)},this.Ga=function(){this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.nav.loading&&(this.nav.loading.style.display="none")},this.ee=function(e){var t=r.kb(!0);return e<t&&(e+=24),60/r.cellDuration*(e-t)*r.cellHeight},this.fe=function(){var e=this.Y(),t=this.initScrollPos;t||(t=r.ee(this.businessBeginsHour)),e.root=this,e.onscroll=this.kc,r.ba(),0===e.scrollTop?e.scrollTop=t-this.dc():this.kc()},this.ge=function(){var e=r.nav.top;return!!e&&e.offsetWidth>0&&e.offsetHeight>0},this.je=function(){var e=r.ge;return e()?void r.ke():void(r.le||(r.le=setInterval(function(){e()&&(clearInterval(r.le),r.fe(),r.Va(),r.ke())},100)))},this.scrollToY=function(e){this.Y().scrollTop=e},this.scrollToHour=function(e){var t=r.ee(e);this.Y().scrollTop=t-this.dc()},this.Y=function(){return"Fixed"===this.columnWidthSpec||this.M?this.nav.bottomRight:this.nav.scroll},this.onCallbackError=function(e,t){alert("Error!\r\nResult: "+e+"\r\nContext:"+t)},this.Va=function(){if(r.showHeader){var t=this.Cd(),n=!!this.nav.cornerRight;if(this.M){this.nav.unifiedCornerRight&&e.de(this.nav.unifiedCornerRight);var i=(r.Y(),r.nav.main.getBoundingClientRect().width),o=r.pd();if("100%"!=o&&parseInt(o)<i)return;var a=e.sw(this.nav.bottomRight);r.N?((d=document.createElement("div")).style.position="absolute",d.style.left=i+"px",d.style.right=i+"px",d.style.height=r.lb()+"px",r.nav.headerParent.appendChild(d),r.nav.unifiedCornerRight=d,r.nav.header.style.width=i+"px"):(this.nav.unifiedCornerRight=this.nav.header.rows[0].insertCell(-1),(d=this.nav.unifiedCornerRight).rowSpan=this.nav.header.rows.length),d.style.width=a+"px";var l=document.createElement("div");l.className=r.G("_cornerright"),l.setAttribute("unselectable","on"),l.style.overflow="hidden",l.style.height=this.lb()+"px",l.style.position="relative";var s=document.createElement("div");return s.className=r.G("_cornerright_inner"),l.appendChild(s),d.appendChild(l),void(!("Fixed"===this.columnWidthSpec)&&this.nav.allday&&(r.rtl?this.nav.allday.style.left=a+"px":this.nav.allday.style.right=a+"px"))}if(t!==n)if(t)this.Fd();else{var d;this.nav.fullHeader&&3===this.nav.fullHeader.rows[0].cells.length&&(d=this.nav.fullHeader.rows[0].cells[2]).parentNode&&d.parentNode.removeChild(d),this.nav.cornerRight=null}var c=this.nav.cornerRight;if(c)return a=e.sw(r.mb()),c&&(c.style.width=a+"px"),a}},this.bb=function(t){if(t&&(this.autoRefreshEnabled=!0),this.autoRefreshEnabled&&!(this.R>=this.autoRefreshMaxCount)){this.oa();var n=this.autoRefreshInterval;if(!n||n<10)throw new e.Exception("The minimum autoRefreshInterval is 10 seconds");this.autoRefreshTimeout=window.setTimeout(function(){r.me()},1e3*this.autoRefreshInterval)}},this.oa=function(){this.autoRefreshTimeout&&window.clearTimeout(this.autoRefreshTimeout)},this.me=function(){if(!(e.Global.resizing||e.Global.moving||t.drag||e.Global.selecting)){var n=!1;if("function"==typeof this.onAutoRefresh){var i={};i.i=this.R,i.preventDefault=function(){this.preventDefault.value=!0},r.onAutoRefresh(i),i.preventDefault.value&&(n=!0)}!n&&this.I()&&this.commandCallBack(this.autoRefreshCommand),this.R++}this.R<this.autoRefreshMaxCount&&(this.autoRefreshTimeout=window.setTimeout(function(){r.me()},1e3*this.autoRefreshInterval))},this.xa=function(){r._a()},this._a=function(){r.Ua(),"Parent100Pct"===r.heightSpec&&r.setHeight(parseInt(r.nav.top.clientHeight,10)),r.Va(),r.ab(),r.ba()},this.ne=null,this.oe=null,r.na=null,this.ke=function(){var e=function(){r._a(),r.kc()};if(r.watchWidthChanges){if("function"==typeof ResizeObserver){if(r.na)return;var t=new ResizeObserver(e);return t.observe(r.nav.top),void(r.na=t)}if(!r.oe){var n=function(){return r.nav&&r.nav.top?r.ne?(r.ne.width!==r.nav.top.offsetWidth&&(r.ne.changed=!0,r.ne.counter=0,r.ne.width=r.nav.top.offsetWidth),r.ne.changed&&(r.ne.counter+=1),void(r.ne.changed&&r.ne.counter>0&&(r.ne.changed=!1,e()))):(r.ne={},r.ne.counter=0,r.ne.changed=!1,void(r.ne.width=r.nav.top.offsetWidth)):void clearInterval(r.oe)};this.oe=setInterval(n,200),n()}}},this.pe=function(){t.globalHandlers||(t.globalHandlers=!0,e.re(document,"mousemove",t.gMouseMove),e.re(document,"mouseup",t.gMouseUp),e.re(document,e.touch.move,t.gTouchMove),e.re(document,e.touch.end,t.gTouchEnd)),e.re(window,"resize",this.xa)},this.Xc=function(n){if(!a.active&&!a.using){n=n||window.event;var i=e.Util.mouseButton(n);if(t.editing)return void t.editing.blur();if("undefined"!=typeof e.Bubble&&(e.Bubble.hideActive(),e.Bubble.cancelShowing()),"n-resize"!==this.style.cursor&&"s-resize"!==this.style.cursor||!i.left){if(("move"===this.style.cursor||"Full"===r.moveBy&&this.event.client.moveEnabled())&&i.left){e.Global.moving=this,(e.Global.moving.helper={}).oldColumn=r.eb[this.event.part.dayIndex].id,t.originalMouse=e.mc(n),t.originalTop=this.offsetTop;var o=e.mo3(this,n);t.moveOffsetY=o?o.y:0,r.nav.top.style.cursor=this.style.cursor}}else e.Global.resizing=this,t.originalMouse=e.mc(n),t.originalHeight=this.offsetHeight,t.originalTop=this.offsetTop,r.nav.top.style.cursor=this.style.cursor;return!1}},this.qe=function(e){var t=this.P.events,n=this.events.list[e],i={};for(var o in n)i[o]=n[o];if(r.showEventStartEnd){var a=n.start.getDatePart().getTime()===n.end.getDatePart().getTime()?l.locale().timePattern:l.locale().dateTimePattern,s=n.start.toString(a),d=n.end.toString(a);i.html=r.ca(i.text)+" ("+s+" - "+d+")"}if("function"==typeof this.onBeforeEventRender){var c={};c.e=i,c.data=i,this.onBeforeEventRender(c)}t[e]=i},this.se=null,this.Sd=function(t){function n(e,t){return 1-e/t}if("Always"===r.autoScroll||"Drag"===r.autoScroll&&(e.Global.moving||e.Global.resizing||e.Global.selecting)){var i=r.nav.bottomRight;t.x-=i.scrollLeft,t.y-=i.scrollTop;var o=i.clientWidth,a=i.clientHeight,l=30,s=t.x<l?t.x:0,d=o-t.x<l?o-t.x:0,c=t.y<l?t.y:0,u=a-t.y<l?a-t.y:0,h=0,p=0;s&&(h=-50*n(s,l)),d&&(h=50*n(d,l)),c&&(p=-50*n(c,l)/2),u&&(p=50*n(c,l)/2),h||p?r.te(h,p):r.ve()}},this.te=function(e,t){this.ve(),this.we(e,t)},this.xe=function(e){if(!e)return!1;var t=r.nav.bottomRight,n=t.scrollLeft;return!(e<0&&n<=0||e>0&&n+t.clientWidth>=t.scrollWidth||(t.scrollLeft+=e,r.coords.x+=e,r.ye(),0))},this.ze=function(e){if(!e)return!1;var t=r.nav.bottomRight,n=t.scrollTop;return!(e<0&&n<=0||e>0&&n+t.clientHeight>=t.scrollHeight||(t.scrollTop+=e,r.coords.y+=e,r.ye(),0))},this.ye=function(){},this.we=function(e,t){(this.xe(e)||this.ze(t))&&(this.Ae=window.setTimeout(function(e,t){return function(){r.we(e,t)}}(e,t),200))},this.ve=function(){r.Ae&&(window.clearTimeout(r.Ae),r.Ae=null)},this.Yc={};var a=r.Yc;a.active=!1,a.start=null,a.timeout=null,a.startcell=null,this.Yc.getCellCoords=function(t){var n,i;t.touches?(n=t.touches[0].pageX,i=t.touches[0].pageY):(n=t.pageX,i=t.pageY);var o=e.abs(r.nav.main),a=i-o.y;return{pageX:n,pageY:i,x:Math.floor((n-o.x)/(r.nav.main.clientWidth/r.eb.length)),y:Math.floor(a/r.cellHeight),toString:function(){return"x: "+this.x+" y:"+this.y}}},this.Yc.startSelecting=function(n){var i=r.nav.main.rows[n.y].cells[n.x];a.startcell=n,r.clearSelection(),t.column=n.x,r.selectedCells.push(i),t.firstSelected=i,t.topSelectedCell=i,t.bottomSelectedCell=i,e.Global.selecting={calendar:r},r.$b()},this.Yc.extendSelection=function(n){var i=r.nav.main.rows[n.y].cells[n.x];r.clearSelection(),e.Global.selecting={calendar:r},n.y<a.startcell.y?(r.selectedCells=t.getCellsBelow(i),t.topSelectedCell=r.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(r.selectedCells=t.getCellsAbove(i),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=r.selectedCells[0]),r.$b()},this.Yc.detected=!1,this.Yc.onMainTouchStart=function(t){if(!(e.Util.isMouseEvent(t)||(a.start=!0,a.detected=!0,a.active||t.touches.length>1))){a.using=!0;var n=a.getCellCoords(t);a.startCoords=n,a.timeout=window.setTimeout(function(){switch(t.preventDefault(),a.active=!0,a.start=!1,r.timeRangeTapAndHoldHandling){case"Select":a.startSelecting(n);break;case"ContextMenu":a.startSelecting(n),a.active=!1,r.contextMenuSelection&&r.contextMenuSelection.show(r.getSelection())}},r.tapAndHoldTimeout)}},this.Yc.onCellTouchMove=function(e){},this.Yc.onCellTouchEnd=function(e){if(!a.active)return window.clearTimeout(a.timeout),void(a.start&&function(e){if("Disabled"!==r.timeRangeSelectedHandling){r.clearSelection(),r.selectedCells=[e],t.topSelectedCell=e,t.bottomSelectedCell=e,r.$b();var n=r.getSelection();n.toString=function(){return"start: "+this.start+"\nend: "+this.end},setTimeout(function(){r.Qb(n.start,n.end,n.resource)},10)}}(this));e.preventDefault(),e.stopPropagation(),a.startcell=null,a.start=!1;var n=r.getSelection();n.toString=function(){return"start: "+this.start+"\nend: "+this.end},r.Qb(n.start,n.end,n.resource),window.setTimeout(function(){a.active=!1},500)},this.Yc.startMoving=function(n,i){e.Global.moving=n,(e.Global.moving.helper={}).oldColumn=r.eb[n.event.part.dayIndex].id,t.originalMouse=i,t.originalTop=this.offsetTop;var o=e.abs(n);t.moveOffsetY=i.y-o.y,t.movingShadow||(t.movingShadow=r.db(e.Global.moving,!r.V.ie),t.movingShadow.style.width=t.movingShadow.parentNode.offsetWidth+1+"px")},this.Yc.startResizing=function(n,i,o){e.Global.resizing=n,n.dpBorder=i,t.originalMouse=o,t.originalHeight=n.offsetHeight,t.originalTop=n.offsetTop},this.Yc.updateResizing=function(e){r.Rd(e)},this.Yc.updateMoving=function(){var e=r.coords,n=r.cellHeight,i=t.moveOffsetY;i||(i=n/2);var o=Math.floor((e.y-i-0+n/2)/n)*n+0;o<0&&(o=0);var a=r.nav.main,l=r.Z(),s=parseInt(t.movingShadow.style.height);o+s>l&&(o=l-s),t.movingShadow.style.top=o+"px",t.movingShadow.allowed=!0;var d=Math.floor(e.x/(a.clientWidth/a.rows[0].cells.length));d<0&&(d=0);var c=r.nav.events;d<c.rows[0].cells.length&&d>=0&&t.movingShadow.column!==d&&(t.movingShadow.column=d,t.moveShadow(c.rows[0].cells[d]))},this.Yc.onEventTouchStart=function(t){if(!a.active&&!e.Util.isMouseEvent(t)){t.stopPropagation(),a.preventEventTap=!1,a.using=!0,a.startCoords=a.getCellCoords(t);var n=this,i={x:t.touches?t.touches[0].pageX:t.pageX,y:t.touches?t.touches[0].pageY:t.pageY,div:this};r.coords=a.relativeCoords(t),a.timeout=window.setTimeout(function(){var o=n.event;switch(a.active=!0,r.eventTapAndHoldHandling){case"Move":o.client.moveEnabled()&&a.startMoving(n,i);break;case"ContextMenu":var l=o.client.contextMenu();e.Menu&&e.Menu.touchPosition(t),l?l.show(o):r.contextMenu&&r.contextMenu.show(o)}},r.tapAndHoldTimeout)}},this.Yc.onMainTouchMove=function(n){if(!e.Util.isMouseEvent(n)){if(a.start=!1,a.timeout&&(o=a.getCellCoords(n))&&a.startCoords&&(o.pageX===a.startCoords.pageX&&o.pageY===a.startCoords.pageY||window.clearTimeout(r.Yc.timeout)),e.Global.moving&&t.movingShadow)return n.preventDefault(),r.coords=a.relativeCoords(n),void a.updateMoving();if(e.Global.resizing){n.preventDefault();var i=n.touches?n.touches[0]:n;return void a.updateResizing(o={x:i.pageX,y:i.pageY})}if(a.startcell){if(n.preventDefault(),!a.active)return void window.clearTimeout(a.timeout);var o=a.getCellCoords(n);a.extendSelection(o)}a.preventEventTap=!0}},this.Yc.relativeCoords=function(t){var n=t.touches?t.touches[0].pageX:t.pageX,i=t.touches?t.touches[0].pageY:t.pageY,o=e.abs(r.nav.main);return{x:n-o.x,y:i-o.y,toString:function(){return"x: "+this.x+", y:"+this.y}}},this.Yc.onMainTouchEnd=function(n){if(!e.Util.isMouseEvent(n))if(e.Global.moving){a.active=!1,n.preventDefault(),n.stopPropagation();var i=t.movingShadow.offsetTop,o=e.Global.moving.event,r=o.calendar;r.gc(t.movingShadow);var l=t.movingShadow.column,s=t.movingShadow;if(e.Util.removeClass(e.Global.moving,r.G("_event_moving_source")),e.Global.moving=null,t.movingShadow=null,!s.allowed)return void r.Jb();o.calendar.Ib(o,l,i,n,t.drag)}else if(a.startcell){if(!a.active)return void window.clearTimeout(a.timeout);n.preventDefault(),a.startcell=null;var d=r.getSelection();d.toString=function(){return"start: "+this.start+"\nend: "+this.end},r.Qb(d.start,d.end,d.resource),window.setTimeout(function(){a.active=!1},500)}},this.Yc.onEventTouchMove=function(e){a.preventEventTap=!0},this.Yc.onEventTouchEnd=function(t){if(!e.Util.isMouseEvent(t)){if(!a.active){if(a.preventEventTap)return;return window.clearTimeout(a.timeout),void r.qb(this,!1,!1,t)}return a.active=!1,a.timeout?void window.clearTimeout(a.timeout):void 0}},this.Vc=function(n){var i="Top"===r.moveBy;if("undefined"!=typeof t){var o=e.mo3(this,n);if(o&&(r.eventOffset=o,this.active||e.Util.addClass(this,r.G("_event_hover")),!e.Global.resizing&&!e.Global.moving)){var a=this.isFirst,l=this.isLast;"Disabled"===r.moveBy||"None"===r.moveBy||(!i&&o.x<=10&&this.event.client.moveEnabled()?this.style.cursor=a?"move":"not-allowed":!i&&o.y<=5&&this.event.client.resizeEnabled()?a?(this.style.cursor="n-resize",this.dpBorder="top"):this.style.cursor="not-allowed":i&&o.y<=10&&this.event.client.moveEnabled()?this.style.cursor="move":this.offsetHeight-o.y<=5&&this.event.client.resizeEnabled()?l?(this.style.cursor="s-resize",this.dpBorder="bottom"):this.style.cursor="not-allowed":e.Global.resizing||e.Global.moving||(this.style.cursor=this.event.client.clickEnabled()?"pointer":"default"),"undefined"==typeof e.Bubble||!r.bubble||"Disabled"===r.eventHoverHandling||"default"!==this.style.cursor&&"pointer"!==this.style.cursor)||this.Be&&o.x===this.Be.x&&o.y===this.Be.y||(this.Be=o,r.bubble.showEvent(this.event))}}},this.Wc=function(t){e.Util.removeClass(this,r.G("_event_hover")),r.bubble&&r.bubble.hideOnMouseOut(),e.Areas.hideAreas(this,t)},this.Ce=null,this.Xa=function(){if(this.showCurrentTime){this.De();var t=(new e.Date).addMinutes(r.showCurrentTimeOffset);if("Full"===r.showCurrentTimeMode)this.Ee(t);else{if("Day"!==r.showCurrentTimeMode)throw new e.Exception("Invalid DayPilot.Calendar.showCurrentTimeMode value: "+r.showCurrentTimeMode);this.Fe(t)}this.nav.events&&!this.Ce&&(this.Ce=setTimeout(function(){r.Ce=null,r.Xa()},3e4))}},this.De=function(){e.de(r.elements.separators),r.elements.separators=[]},this.Fe=function(t){var n=t.getTime(),i=r.nav.events;if(i)for(var o=0;o<r.eb.length;o++){var a=r.eb[o],l=r.gb(!0),s=new e.Date(a.start).addHours(this.kb(!0)),d=s.getTime(),c=s.addTime(l).getTime();if(d<=n&&n<=c){var u=this.cc(t,a.start).top-1-r.dc(),h=i.rows[0].cells[o].separators,p=document.createElement("div");p.style.position="absolute",p.style.top=u+"px",p.style.height="1px",p.style.left="0px",p.style.right="0px",p.className=r.G("_now"),h.insertBefore(p,h.firstChild),r.elements.separators.push(p)}}},this.Ee=function(t){var n=t.getTime();if(r.nav.events&&(l=r.eb[0]))for(var i=l.start.getDatePart().addTime(t.getTimePart()),o=this.cc(i,l.start).top-1,a=0;a<r.eb.length;a++){var l=r.eb[a],s=r.gb(!0),d=new e.Date(l.start).addHours(this.kb(!0)),c=d.getTime(),u=d.addTime(s).getTime();if(c<=n&&n<=u){var h=document.createElement("div");return h.style.position="absolute",h.style.top=o+"px",h.style.height="1px",h.style.left="0px",h.style.right="0px",h.className=r.G("_now"),r.nav.events.appendChild(h),void r.elements.separators.push(h)}}},this.Ma=function(t){if(t?this.events.list=t:t=this.events.list,t){this.Qc={},this.Qc.events=[],this.Qc.lines=[];var n=t.length,i=this.gb(!0);this.P.pixels={},this.P.$c=[];var o=[];this.rc=[],this.Bb=1e4,this.jb=0,this.startDate=new e.Date(this.startDate);for(var a=0;a<n;a++){if("object"!=typeof(y=t[a]))throw new e.Exception("Event data item must be an object");if(!y.start)throw new e.Exception("Event data item must specify 'start' property");y.start=new e.Date(y.start),y.end=new e.Date(y.end)}if("function"==typeof this.onBeforeEventRender||r.showEventStartEnd)for(a=0;a<n;a++)this.qe(a);var s="Resources"===this.viewType,d=this.Nc(),c=d.start,u=d.end;for(a=0;a<this.eb.length;a++){var h={minEnd:1e6,maxStart:-1};this.rc.push(h),(P=this.eb[a]).events=[],P.lines=[],P.blocks=[];var p=new e.Date(P.start).addHours(this.kb(!0)),f=p.getTime(),g=p.addTime(i),m=g.getTime();s&&(c=p.getDatePart(),u=p.addDays(1));for(var v=0;v<n;v++)if(!o[v]){var y=t[v],b=null;if("function"==typeof r.onBeforeEventRender&&(b=r.P.events[v]),b){if(b.hidden)continue}else if(y.hidden)continue;var w=y.end,C=(_=y.start).getTime(),x=w.getTime();if(!(x<C))if(y.allday){var S=!1;if(S=C===x?!(x<c.getTime()||C>=u.getTime()):"Date"===r.allDayEnd?!(x<c.getTime()||C>=u.getTime()):!(x<=c.getTime()||C>=u.getTime()),s&&(S=S&&(y.resource===P.id||"*"===P.id)),S){if((T=new e.Event(y,this)).part.start=c.getTime()<C?_:c,T.part.end=u.getTime()>x?w:u,T.part.colStart=e.DateUtil.daysDiff(c,T.part.start),T.part.colWidth=e.DateUtil.daysSpan(T.part.start,T.part.end)+1,s&&(T.part.colStart=a,T.part.colWidth=1),"function"==typeof r.onEventFilter&&r.events.Ge&&((E={}).filter=r.events.Ge,E.visible=!0,E.e=T,r.onEventFilter(E),!E.visible))continue;this.Qc.events.push(T),("function"==typeof this.onBeforeEventRender||r.showEventStartEnd)&&(T.cache=this.P.events[v]),o[v]=!0,!s||T.part.start.getTime()===C&&T.part.end.getTime()===x||(o[v]=!1)}}else{if(b=null,"function"==typeof r.onBeforeEventRender&&(b=r.P.events[v]),b){if(b.hidden)continue}else if(y.hidden)continue;if(S=!1,S=s?P.id===y.resource&&!(x<=f||C>=m):!(x<=f||C>=m)||x===C&&C===f){var T;(T=new e.Event(y,r)).part.dayIndex=a,T.part.start=f<C?_:p,T.part.end=m>x?w:g;var E,_,k=this.cc(T.part.start,P.start),D=this.cc(T.part.end,P.start),A=k.top,O=D.top;if(A===O&&(k.cut||D.cut))continue;if(T.part.box=l.useBox(x-C),T.part.box){var I=D.boxBottom;T.part.top=Math.floor(A/this.cellHeight)*this.cellHeight+0,T.part.height=Math.max(Math.ceil(I/this.cellHeight)*this.cellHeight-T.part.top,this.cellHeight-1),T.part.barTop=Math.max(A-T.part.top-1,0),T.part.barHeight=Math.max(O-A-2,1)}else T.part.top=A+0,T.part.height=Math.max(O-A,0),T.part.barTop=0,T.part.barHeight=Math.max(O-A-2,1);if("function"==typeof r.onEventFilter&&r.events.Ge&&((E={}).filter=r.events.Ge,E.visible=!0,E.e=T,r.onEventFilter(E),!E.visible))continue;w=T.part.top+T.part.height,(_=T.part.top)>h.maxStart&&(h.maxStart=_),w<h.minEnd&&(h.minEnd=w),_<this.Bb&&(this.Bb=_),w>this.jb&&(this.jb=w),P.events.push(T),("function"==typeof this.onBeforeEventRender||r.showEventStartEnd)&&(T.cache=this.P.events[v]),T.part.start.getTime()===C&&T.part.end.getTime()===x&&(o[v]=!0),r.P.$c.push(T)}}}}for(a=0;a<this.eb.length;a++){var P;for((P=this.eb[a]).events.sort(this.He),v=0;v<P.events.length;v++)P.putIntoBlock(y=P.events[v]);for(v=0;v<P.blocks.length;v++){var R=P.blocks[v];R.events.sort(this.Ie);for(var M=0;M<R.events.length;M++)R.putIntoLine(y=R.events[M])}}for(this.Qc.events.sort(this.Ie),this.Qc.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++)if((n=this.lines[t]).isFree(e.part.colStart,e.part.colWidth))return n.push(e),t;var n;return(n=[]).isFree=function(e,t){for(var n=e+t-1,i=this.length,o=0;o<i;o++){var r=this[o];if(!(n<r.part.colStart||e>r.part.colStart+r.part.colWidth-1))return!1}return!0},n.push(e),this.lines.push(n),this.lines.length-1},a=0;a<this.Qc.events.length;a++)this.Qc.putIntoLine(y=this.Qc.events[a]);var N=Math.max(this.Qc.lines.length,1);this.P.allDayHeaderHeight=N*(l.allDayEventHeight()+2)+2}},this.He=function(e,t){if(!(e&&t&&e.start&&t.start))return 0;var n=e.start().ticks-t.start().ticks;return 0!==n?n:t.end().ticks-e.end().ticks},this.Ie=function(e,t){if(!e||!t)return 0;if(!(e.data&&t.data&&e.data.sort&&t.data.sort&&0!==e.data.sort.length&&0!==t.data.sort.length))return r.He(e,t);for(var n=0,i=0;0===n&&"undefined"!=typeof e.data.sort[i]&&"undefined"!=typeof t.data.sort[i];)n=e.data.sort[i]===t.data.sort[i]?0:"number"==typeof e.data.sort[i]&&"number"==typeof t.data.sort[i]?e.data.sort[i]-t.data.sort[i]:r.Je(e.data.sort[i],t.data.sort[i],r.sortDirections[i]),i++;return n},this.Je=function(e,t,n){var i="desc"!==n?-1:1,o=-i;if(null===e&&null===t)return 0;if(null===t)return o;if(null===e)return i;var r=[];return r[0]=e,r[1]=t,r.sort(),e===r[0]?i:o},this.Ke=function(e){for(var t=0;t<r.elements.events.length;t++){var n=r.elements.events[t];if(n.event===e||n.event.data===e.data)return n}return null},this.events.find=function(t){if(!r.events.list||"undefined"==typeof r.events.list.length)return null;for(var n=r.events.list.length,i=0;i<n;i++)if(r.events.list[i].id===t)return new e.Event(r.events.list[i],r);return null},this.events.findRecurrent=function(t,n){if(!r.events.list||"undefined"==typeof r.events.list.length)return null;for(var i=r.events.list.length,o=0;o<i;o++)if(r.events.list[o].recurrentMasterId===t&&r.events.list[o].start.getTime()===n.getTime())return new e.Event(r.events.list[o],r);return null},this.events.all=function(){for(var t=[],n=0;n<r.events.list.length;n++){var i=new e.Event(r.events.list[n],r);t.push(i)}return e.list(t)},this.events.edit=function(e){!function(){var t=r.Ke(e);t&&r.rb(t)}()},this.events.update=function(t,n){if("object"==typeof t&&!(t instanceof e.Event)){var i=r.events.find(t.id);if(!i)throw new e.Exception("The event to be updated was not found");return r.events.remove(i),void r.events.add(t)}var o={};o.oldEvent=new e.Event(t.copy(),r),o.newEvent=new e.Event(t.temp(),r);var a=new e.Action(r,"EventUpdate",o,n);return t.commit(),r.S&&r.Jc({eventsOnly:!0}),r.Le.notify(),a},this.events.remove=function(t,n){if("string"!=typeof t&&"number"!=typeof t){var i={};i.e=new e.Event(t.data,r);var o=new e.Action(r,"EventRemove",i,n),a=e.indexOf(r.events.list,t.data);return r.events.list.splice(a,1),r.S&&r.Jc({eventsOnly:!0}),r.Le.notify(),o}var l=r.events.find(t);if(!l)throw new e.Exception("The event to be removed was not found");r.events.remove(l)},this.events.add=function(t,n){t instanceof e.Event||(t=new e.Event(t)),t.calendar=r,r.events.list||(r.events.list=[]),r.events.list.push(t.data);var i={};i.e=t;var o=new e.Action(r,"EventAdd",i,n);return r.S&&r.Jc({eventsOnly:!0}),r.Le.notify(),o},this.events.filter=function(e){r.events.Ge=e,r.Jc({eventsOnly:!0})},this.events.load=function(t,n,i){var o=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},a=function(t){var i,a=t.request;try{i=JSON.parse(a.responseText)}catch(t){var l={};return l.exception=t,void o(l)}if(e.isArray(i)){var s={preventDefault:function(){this.preventDefault.value=!0}};if(s.data=i,"function"==typeof n&&n(s),s.preventDefault.value)return;r.events.list=i,r.S&&r.Jc({eventsOnly:!0})}};if(r.eventsLoadMethod&&"POST"===r.eventsLoadMethod.toUpperCase())e.ajax({method:"POST",data:{start:r.visibleStart().toString(),end:r.visibleEnd().toString()},url:t,success:a,error:o});else{var l=t,s="start="+r.visibleStart().toString()+"&end="+r.visibleEnd().toString();l+=l.indexOf("?")>-1?"&"+s:"?"+s,e.ajax({method:"GET",url:l,success:a,error:o})}},this.events.forRange=function(t,n){return t=new e.Date(t),n=new e.Date(n),e.list(r.events.list).filter(function(i){var o=new e.Date(i.start),r=new e.Date(i.end);return e.Util.overlaps(t,n,o,r)}).map(function(t){return new e.Event(t,r)})},this.events._b=function(t){if(!t)throw new e.Exception("Error checking overlap for null (internal error)");var n=t instanceof e.Event?t.data:t,i=new e.Date(n.start),o=new e.Date(n.end);return!!e.list(r.events.list).find(function(t){if(r.Fc(n,t))return!1;if("Resources"==r.viewType&&n.resource!==t.resource)return!1;if(t.allday)return!1;var a=new e.Date(t.start),l=new e.Date(t.end);return e.Util.overlaps(i,o,a,l)})},this.Fc=function(t,n){return e.Util.isSameEvent(t,n)},this.wa={},this.wa.reactDOM=null,this.wa.react=null,this.queue={},this.queue.list=[],this.queue.list.ignoreToJSON=!0,this.queue.add=function(t){if(t){if(!t.isAction)throw new e.Exception("DayPilot.Action object required for queue.add()");r.queue.list.push(t)}},this.queue.notify=function(e){var t={};t.actions=r.queue.list,r.ha("Notify",t,e,"Notify"),r.queue.list=[]},this.queue.clear=function(){r.queue.list=[]},this.queue.pop=function(){return r.queue.list.pop()},this.Jc=function(e){if(this.S&&this.eb){var t=!(e=e||{}).eventsOnly;r.cssOnly||(r.cssOnly=!0),r.ba(),t?(this.I()||(r.cellProperties={}),r.ea.clearCache(),r.pa(),r.Me(),r.Ka(),r.Ma(),r.Oa(),r.Pa(),r.Na(),r.Qa(),r.Ra(),r.W(),r.Sa(),r.$b(),r.Ta(),r.Ua(),r.Va(),r.Wa(),r.Ne(),r.Za(),r.$a(),r.Xa(),r.ab()):(r.pa(),r.Ma(),r.Na(),r.Za(),r.$a(),r.ab()),this.visible?this.show():this.hide()}},this.update=function(t){if(!r.S)throw new e.Exception("You are trying to update a DayPilot.Calendar instance that hasn't been initialized yet.");if(r.T)throw new e.Exception("You are trying to update a DayPilot.Calendar instance that has been disposed.");if(r.S){if(e.Util.isOnlyProperty(t,"events"))return r.events.list=t.events,void r.Jc({eventsOnly:!0});this.Oe(t),this.Jc(),"function"==typeof r.onAfterRender&&r.onAfterRender({isUpdate:!0,data:null})}else r.Oe(t)},this.Ne=function(){if(r.nav.top.className!==r.G("_main")){r.nav.top.className=r.G("_main");var e=r.nav.corner;e.className=r.G("_corner"),e.firstChild.className=r.G("_corner_inner");var t=r.nav.unifiedCornerRight;t&&(t.firstChild.className=r.G("_cornerright"),t.firstChild.firstChild.className=r.G("_cornerright_inner"))}},this.show=function(){r.visible=!0,r.nav.top.style.display="",r._a(),r.kc()},this.hide=function(){r.visible=!1,r.nav.top.style.display="none"},this.Le={},this.Le.scope=null,this.Le.notify=function(){r.Le.scope&&r.Le.scope.$apply()},this.debug=new e.Debug(this),this.Zb=function(t,n){if(t<0)return null;r.rtl&&(t=r.nav.main.offsetWidth-t);var i=0,o=r.nav.events.rows[0].cells;if(e.browser.ie&&!n){for(var a=o.length-1;a>=0;a--)if(t<(i+=o[a].offsetWidth))return a}else for(a=0;a<o.length;a++)if(t<(i+=o[a].offsetWidth))return a;return null},this.cc=function(e,t){t||(t=this.startDate);var n=t.getTime(),i=e.getTime(),o=this.P.pixels[i+"_"+n];if(o)return o;this.kb(!0),n=t.addHours(this.kb(!0)).getTime();var r=60*this.cellDuration*1e3,a=i-n,l=a%r,s=a-l,d=s+r;0===l&&(d=s);var c={cut:!1};return c.top=this.Od(a),c.boxTop=this.Od(s),c.boxBottom=this.Od(d),this.P.pixels[i+"_"+n]=c,c},this.Od=function(e){return Math.floor(this.cellHeight*e/(6e4*this.cellDuration))},this.Me=function(){this.startDate=new e.Date(this.startDate).getDatePart(),this.Pe=l.allDayEventHeight()+4},this.Na=function(){var e=this.lb(),t=this.dd();if(this.nav.corner&&(this.nav.corner.style.height=e+"px"),this.nav.cornerRight&&(this.nav.cornerRight.style.height=e+"px"),this.nav.mid&&(this.nav.mid.style.height=e+"px"),this.showAllDayEvents&&this.nav.header)for(var n=this.nav.header.rows[this.nav.header.rows.length-1],i=0;i<n.cells.length;i++)n.cells[i].firstChild.style.height=l.allDayHeaderHeight()+"px";this.nav.upperRight&&(this.nav.upperRight.style.height=e+"px"),this.nav.scroll.style.top=e+"px",this.nav.top.style.height=t+"px"},this.Ua=function(){var e=this.ed();this.nav.scroll&&e>0&&(this.nav.scroll.style.height=e+"px",this.lc=r.nav.scroll.clientHeight,this.nav.bottomLeft&&(this.nav.bottomLeft.style.height=e+"px"),this.nav.bottomRight&&(this.nav.bottomRight.style.height=e+"px")),this.nav.top.style.height="Parent100Pct"===this.heightSpec?"100%":this.dd()+"px"},this.setHeight=function(e){"Parent100Pct"!==this.heightSpec&&(this.heightSpec="Fixed"),this.height=e-this.lb(),this.Ua()},this.Qe=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.className=this.G(e),document.body.appendChild(t);var n=t.offsetHeight,i=t.offsetWidth;document.body.removeChild(t);var o={};return o.height=n,o.width=i,o},this.ea={};var l=this.ea;l.da=function(){return"Disabled"!==r.xssProtection},l.locale=function(){return e.Locale.find(r.locale)},l.weekStarts=function(){return"number"==typeof r.weekStarts?r.weekStarts:l.locale().weekStarts},l.timeFormat=function(){return"Auto"!==r.timeFormat?r.timeFormat:this.locale().timeFormat},l.useBox=function(e){return"Always"===r.useEventBoxes||"Never"!==r.useEventBoxes&&e<60*r.cellDuration*1e3},l.notifyType=function(){var t;if("Immediate"===r.notifyCommit)t="Notify";else{if("Queue"!==r.notifyCommit)throw new e.Exception("Invalid notifyCommit value: "+r.notifyCommit);t="Queue"}return t},l.clearCache=function(){delete r.P.allDayEventHeight,delete r.P.allDayHeaderHeight,delete r.P.headerHeight},l.allDayEventHeight=function(){if(r.P.allDayEventHeight)return r.P.allDayEventHeight;var e=r.Qe("_alldayevent_height").height;return e||(e=r.allDayEventHeight),r.P.allDayEventHeight=e,e},l.allDayHeaderHeight=function(){if(r.P.allDayHeaderHeight)return r.P.allDayHeaderHeight;var e=r.Pe;return r.P.allDayHeaderHeight=e,e},l.headerHeight=function(){if(r.P.headerHeight)return r.P.headerHeight;var e=r.Qe("_header_height").height;return e||(e=r.headerHeight),r.P.headerHeight=e,e},this.exportAs=function(t,n){if(!r.ge())throw new e.Exception("DayPilot.Calendar.exportAs(): The instance must be visible during export.");var i=s.generate(t,n);return new e.Export(i)},this.Re={};var s=this.Re;s.Se=null,s.Te=null,s.generate=function(t,n){"object"==typeof t&&(n=t,t=null),n=n||{},t=t||n.format||"svg";var i=n.scale||1;if("config"!==t){"jpg"===t.toLowerCase()&&(t="jpeg");var o=n.area||"viewport";s.Se=n,s.Te=o;var a,d=s.getWidth(),c=s.getHeight();switch(t.toLowerCase()){case"svg":a=new e.Svg(d,c);break;case"png":a=new e.Canvas(d,c,"image/png",i);break;case"jpeg":a=new e.Canvas(d,c,"image/jpeg",i,n.quality);break;default:throw new e.Exception("Export format not supported: "+t)}var u=s.getRectangles(),h=new e.StyleReader(r.nav.top).getBackColor(),p=new e.StyleReader(r.nav.top).get("border-top-color");"0px"!==new e.StyleReader(r.nav.top).get("border-top-width")||(p="white");var f=new e.StyleReader(r.nav.corner.firstChild).getBackColor(h),g=r.nav.hourTable.rows[0].cells[0].firstChild.firstChild,m=new e.StyleReader(g).get("border-right-color"),v=new e.StyleReader(g).getBackColor(h),y=new e.StyleReader(g).getFont(),b=new e.StyleReader(g.firstChild.childNodes[1]).getFont(),w=new e.StyleReader(g.firstChild.childNodes[1]).getPx("padding-right"),C=new e.StyleReader(g).get("color"),x=r.nav.header.rows[0].cells[0].firstChild.firstChild,S=new e.StyleReader(x).getBackColor(h),T=new e.StyleReader(x).getFont(),E=new e.StyleReader(x).get("color"),_=new e.StyleReader(x).get("border-right-color"),k=r.nav.header.rows[r.nav.header.rows.length-1].cells[0].firstChild,D=k.firstChild,A=new e.StyleReader(k).getBackColor(h),O=new e.StyleReader(D).getBackColor(A),I=new e.StyleReader(r.nav.main.rows[0].cells[0].firstChild.firstChild).get("border-right-color"),P=s.fakeCell(),R=new e.StyleReader(P.firstChild).getBackColor();e.Util.addClass(P,r.G("_cell_business"));var M=new e.StyleReader(P.firstChild).getBackColor();e.de(P);var N,L=s.getViewportOffsetTop();N="Fixed"===r.columnWidthSpec?r.columnWidth:u.gridContent.w/r.eb.length,a.fillRect(u.main,"white"),a.fillRect(u.main,h);var H=u.corner.h-L;e.list.for(r.sd(),function(e){return r.zd(e)}).forEach(function(e){var t=r.vd(),n=e.sup,i=e.hour,o={x:0,y:H,w:u.grid.x+1,h:t+1},l={x:0,y:H,w:u.grid.x+1-20,h:t+1},s={x:l.w,y:H,w:20-w-1,h:t+1};a.fillRect(o,v),a.text(l,i,y,C,"right"),a.text(s,n,b,C,"right"),a.rect(o,m),H+=t});var B=60*r.cellDuration*1e3,j=u.grid.x;e.list(r.eb).forEach(function(t,n){var i=N,o=u.grid.y-L;e.list.for(r.ob()).forEach(function(l,d){var c=r.Md(n,d)||{},u=null;if(c.cssClass){var h=s.fakeCell();e.Util.addClass(h,c.cssClass),u=new e.StyleReader(h.firstChild).getBackColor(),e.de(h)}var p=r.cellHeight,f={x:j,y:o,w:i+1,h:p+1},g=c.business,m={cell:{}};m.cell.start=t.start.addTime(d*B).addHours(r.kb()),m.cell.end=m.cell.start.addTime(B),m.cell.resource=t.id,e.Util.copyProps(c,m.cell,["cssClass","html","backImage","backRepeat","backColor","business"]),m.backColor=u||(g?M:R),"function"==typeof r.onBeforeCellExport&&r.onBeforeCellExport(m),a.fillRect(f,m.backColor),a.rect(f,I),o+=p}),j+=i});var z=u.grid.x;e.list(r.eb).forEach(function(t){e.list(t.events).forEach(function(t){var n=t.cache||t.data,i=s.fakeEvent();i.className+=" "+n.cssClass;var o=i.firstChild,l=i.childNodes[1],d=new e.StyleReader(o).getBackColor(),c=new e.StyleReader(o.firstChild).getBackColor(),h=new e.StyleReader(o.firstChild).getPx("width"),p=new e.StyleReader(l).get("border-right-color"),f=new e.StyleReader(l).getFont(),g=new e.StyleReader(l).get("color"),m=new e.StyleReader(l).getBackColor(),v={};v.left=new e.StyleReader(l).getPx("padding-left"),v.right=new e.StyleReader(l).getPx("padding-right"),v.top=new e.StyleReader(l).getPx("padding-top"),v.bottom=new e.StyleReader(l).getPx("padding-bottom"),e.de(i);var y=z+N*t.part.left/100,b=(N-r.columnMarginRight)*t.part.width/100,w=t.part.top+u.grid.y-r.dc()-L,C=t.part.height,x=n.backColor||m,S=n.barColor||c,T=n.barBackColor||d,E={};E.e=t,E.text=t.text?t.text():t.client.html(),E.fontSize=f.size,E.fontFamily=f.family,E.fontStyle=f.style,E.fontColor=g,E.backColor=x,E.borderColor=p,E.horizontalAlignment="left",E.barWidth=h,E.barColor=S,E.barBackColor=T,"function"==typeof r.onBeforeEventExport&&r.onBeforeEventExport(E);var _={x:y,y:w,w:b+1,h:C+1},k=e.Util.copyProps(_);t.client.barVisible()&&(k.x+=h,k.w-=h);var D=e.Util.copyProps(k);if(D.x+=v.left,D.w-=v.left+v.right,D.y+=v.top,D.h-=v.top+v.bottom,a.fillRect(_,E.backColor),t.client.barVisible()){var A={x:_.x,y:_.y+1+t.part.barTop,w:E.barWidth,h:t.part.barHeight+1};a.fillRect({x:_.x,y:_.y,w:E.barWidth,h:_.h},E.barBackColor),a.fillRect(A,E.barColor)}a.text(D,E.text,{size:E.fontSize,family:E.fontFamily,style:E.fontStyle},E.fontColor,E.horizontalAlignment),a.rect(_,E.borderColor),y=_.x;var O=_.x+_.w-2;w=_.y,e.list(n.areas).forEach(function(n){if(e.Areas.isVisible(n)){var i=n.left;n.start&&(i=r.getPixels(new e.Date(n.start)).left-t.part.left);var o=n.width||n.w,l=n.height||n.h;i||(i=O-o-y),n.right?o=t.part.width-n.right-i:n.end&&(o=r.getPixels(new e.Date(n.end)).left-n.left-t.part.left+1);var s=n.top;"number"==typeof n.bottom&&(l=t.part.height-n.bottom-s);var d={x:y+i,y:w+s,w:o,h:l};if(n.backColor&&a.fillRect(d,n.backColor),n.image){var c=new Image;c.src=n.image,a.image(d,c)}else n.html&&a.text(d,n.html,{size:E.fontSize,family:E.fontFamily,style:E.fontStyle},n.fontColor||E.fontColor,null,n.padding)}})}),z+=N}),a.fillRect(u.corner,f);var U=1;return"Fixed"!==r.columnWidthSpec&&(U=u.gridContent.w/100),e.list.for(r.headerLevels).forEach(function(t){var n=u.gridContent.x,i=r.headerHeight*t,o=r.Mc(t+1),l=r.Yd(t);e.list(o).forEach(function(o,s){var d={};d.text=e.Util.stripTags(o.html),d.horizontalAlignment="center",d.verticalAlignment="center",d.backColor=o.backColor||S,d.fontSize=T.size,d.fontFamily=T.family,d.fontStyle=T.style,d.fontColor=E,d.header={},d.header.level=t,e.Util.copyProps(o,d.header,["id","start","name","html","backColor"]),"function"==typeof r.onBeforeHeaderExport&&r.onBeforeHeaderExport(d);var c=0===l.length,u={x:c?n:n+l[s].left*U,y:i,w:(c?N:l[s].width*U)+1,h:r.headerHeight+1};a.fillRect(u,d.backColor),a.rect(u,_),a.text(u,d.text,{size:d.fontSize,family:d.fontFamily,style:d.fontStyle},d.fontColor,d.horizontalAlignment,0,d.verticalAlignment),c&&(n+=N)})}),function(){if(r.showAllDayEvents){var t=r.headerHeight*r.headerLevels,n=u.gridContent.x;e.list(r.eb).forEach(function(e){var i=N,o=l.allDayHeaderHeight(),r={x:n,y:t,w:i+1,h:o+1};a.fillRect(r,O),a.rect(r,_),n+=N}),e.list(r.Qc.lines).forEach(function(t,n){e.list(t).forEach(function(t){var i=s.fakeEvent("alldayevent");i.className+=" "+t.data.cssClass;var o=i.firstChild,d=new e.StyleReader(o).get("border-right-color"),c=new e.StyleReader(o).getFont(),h=new e.StyleReader(o).get("color"),p=new e.StyleReader(o).getBackColor(),f={};f.left=new e.StyleReader(o).getPx("padding-left"),f.right=new e.StyleReader(o).getPx("padding-right"),f.top=new e.StyleReader(o).getPx("padding-top"),f.bottom=new e.StyleReader(o).getPx("padding-bottom"),e.de(i);var g=(t.cache||t.data).backColor||p,m={};m.e=t,m.text=t.text?t.text():t.client.html(),m.fontSize=c.size,m.fontFamily=c.family,m.fontStyle=c.style,m.fontColor=h,m.backColor=g,m.borderColor=d,m.horizontalAlignment="left","function"==typeof r.onBeforeEventExport&&r.onBeforeEventExport(m);var v=t.part.colStart*N+u.gridContent.x+2,y=t.part.colWidth*N-4,b=l.allDayEventHeight()-1,w={x:v,y:r.headerLevels*l.headerHeight()+n*l.allDayEventHeight()+2,w:y,h:b},C=e.Util.copyProps(w);C.x+=f.left,C.w-=f.left+f.right,C.y+=f.top,C.h-=f.top+f.bottom,a.fillRect(w,m.backColor),a.text(C,m.text,{size:m.fontSize,family:m.fontFamily,style:m.fontStyle},m.fontColor,m.horizontalAlignment),a.rect(w,m.borderColor)})})}}(),a.rect(u.main,p),a.line(u.grid.x,0,u.grid.x,u.main.h,m),a.line(0,u.grid.y,u.main.w,u.grid.y,m),a}},s.fakeCell=function(){var e=document.createElement("div");e.style.display="none",e.className=r.G("_cell"),e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px";var t=document.createElement("div");return t.className=r.G("_cell_inner"),e.appendChild(t),r.nav.bottomRight.appendChild(e),e},s.fakeEvent=function(e){e=e||"event";var t=document.createElement("div");if(t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.style.display="none",t.className=r.G("_"+e),"event"===e){var n=document.createElement("div");n.className=r.G("_event_bar");var i=document.createElement("div");i.className=r.G("_event_bar_inner"),n.appendChild(i),t.appendChild(n)}var o=document.createElement("div");o.className=r.G("_"+e+"_inner"),t.appendChild(o);var a=r.nav.events.rows[0].cells[0].events;return"alldayevent"===e&&(a=r.nav.allday),a.appendChild(t),t},s.getViewportOffsetTop=function(){switch(s.Te){case"full":return 0;case"viewport":case"range":return r.Y().scrollTop}},s.getWidth=function(){var t=s.Te,n=r.eb.length,i=Math.floor((r.nav.top.clientWidth-r.hourWidth)/n)*n+r.hourWidth;switch(t){case"viewport":case"full":case"range":return"number"==typeof s.Se.width?s.Se.width:i;default:throw new e.Exception("Unsupported export mode: "+t)}},s.getHeight=function(){var t=s.Te;switch(t){case"full":return r.Z()+r.lb();case"viewport":return r.nav.top.offsetHeight-e.sh(r.nav.scroll)-1;default:throw new e.Exception("Unsupported export mode: "+t)}},s.getRectangles=function(){var e=s.getRowHeaderWidth(),t=r.lb(),n={};n.main={x:0,y:0,w:s.getWidth(),h:s.getHeight()},n.corner={x:0,y:0,w:e,h:t},n.grid={x:e,y:t,w:s.getWidth()-e,h:s.getHeight()-t};var i=s.innerWidth(),o=r.Z();return n.gridContent={x:e,y:t,w:i,h:o},n},s.getRowHeaderWidth=function(){return r.hourWidth},s.innerWidth=function(){var e=r.Y().offsetWidth,t=r.eb.length;return Math.floor(e/t)*t},this.Ue=function(){return!!this.backendUrl},this.Ve=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw new e.Exception("DayPilot.Calendar() constructor requires the target element or its ID as a parameter");if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw new e.Exception("DayPilot.Calendar: The placeholder element not found: '"+n+"'.")}!function(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push(e.charCodeAt(o)-1);new Function("t","u",String.fromCharCode.apply(this,i))(t,n)}("wbs!mi>mpdbujpo/iptuobnf<jg)mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2*tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<",this,this.nav.top)},this.We=function(){this.Ve(),this.Me(),this.Ka(),this.fd(),this.Oa(),this.Pa(),this.Sa(),this.Va(),this.fe(),this.pe(),this.ya(),this.Wa(),t.register(this),this._a(),this.Xa(),this.je(),this.bb(),this.ha("Init")},this.init=function(){if(this.S)throw new e.Exception("This instance is already initialized. Use update() to change properties.");if(this.Ve(),this.nav.top.dp){if(this.nav.top.dp===r)return r;if(this.ma())return r;throw new e.Exception("The target placeholder was already initialized by another DayPilot component instance.")}this.cd();var n=this.Ue();return r.cssOnly||(r.cssOnly=!0,e.Util.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")),n?(this.We(),this.S=!0,this):(this.Me(),this.Ka(),this.La(),this.events.list||(this.events.list=[]),this.Ma(),this.fd(),this.Oa(),this.Pa(),this.Sa(),this.Ya(),this.Wa(),this.Va(),this.fe(),this.pe(),this.ya(),t.register(this),this.Na(),this.Za(),this.$a(),this._a(),this.messageHTML&&window.setTimeout(function(){r.message(r.messageHTML)},0),this.Xa(),this.Ha(null,!1),r.initEventEnabled&&setTimeout(function(){r.ha("Init")}),this.je(),this.bb(),this.S=!0,this.Xe(),this)},this.Ye=null,this.Oe=function(t){if(t){var n={events:{preInit:function(){var t=this.data;t&&(r.events.list=e.isArray(t.list)?t.list:t)}},columns:{preInit:function(){r.Ja()===r.columns?r.columns=this.data:r.columns.list=this.data}},scrollToHour:{postInit:function(){"undefined"!=typeof this.data&&r.scrollToHour(this.data)}}};for(var i in this.Ye=n,t)if(n[i]){var o=n[i];o.data=t[i],o.preInit&&o.preInit()}else r[i]=t[i]}},this.Xe=function(){var e=this.Ye;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.internal={},this.internal.initialized=function(){return r.S},this.internal.invokeEvent=this.Ab,this.internal.eventMenuClick=this.Ob,this.internal.timeRangeMenuClick=this.Pb,this.internal.bubbleCallBack=this.Mb,this.internal.findEventDiv=this.Ke,this.internal.eventDeleteDispatch=this.zb,this.internal.xssTextHtml=r.ca,this.internal.touch=this.Yc,this.internal.enableReact=function(e,t){r.wa.react=e,r.wa.reactDOM=t},this.internal.reactRefs=function(){return e.Util.copyProps(r.wa,{},["react","reactDOM"])},this.Init=this.init,this.Oe(i)};var t={topSelectedCell:null,bottomSelectedCell:null,column:null,firstSelected:null,firstMousePos:null,originalMouse:null,originalHeight:null,originalTop:null,globalHandlers:!1,editing:!1,originalText:null,register:function(e){t.registered||(t.registered=[]);for(var n=t.registered,i=0;i<n.length;i++)if(n[i]===e)return;n.push(e)},unregister:function(n){var i=t.registered;if(i){var o=e.indexOf(i,n);-1!==o&&i.splice(o,1),0===i.length&&(i=null)}i||(e.ue(document,"mousemove",t.gMouseMove),e.ue(document,"mouseup",t.gMouseUp),e.ue(document,"touchmove",t.gTouchMove),e.ue(document,"touchend",t.gTouchEnd),t.globalHandlers=!1)},getCellsAbove:function(e){if(e.data&&e.data.calendar.N){for(var n=e.data.calendar,i=[],o=e.data.x,r=t.firstSelected.data.y,a=e.data.y;a>=r;a--)i.push(n.nav.main.rows[a].cells[o]);return i}i=[];for(var l=t.getColumn(e),s=e.parentNode,d=null;s&&d!==t.firstSelected;)for(d=s.getElementsByTagName("td")[l],i.push(d),s=s.previousSibling;s&&"TR"!==s.tagName;)s=s.previousSibling;return i},getCellsBelow:function(e){if(e.data&&e.data.calendar.N){for(var n=e.data.calendar,i=[],o=e.data.x,r=t.firstSelected.data.y,a=e.data.y;a<=r;a++)i.push(n.nav.main.rows[a].cells[o]);return i}i=[];for(var l=t.getColumn(e),s=e.parentNode,d=null;s&&d!==t.firstSelected;)for(d=s.getElementsByTagName("td")[l],i.push(d),s=s.nextSibling;s&&"TR"!==s.tagName;)s=s.nextSibling;return i},getColumn:function(e){var t=0;if(!e)return null;for(;e.previousSibling;)"TD"===(e=e.previousSibling).tagName&&t++;return t},gTouchMove:function(n){if(!e.Util.isMouseEvent(n)&&t.drag){n.preventDefault();var i=n.touches?n.touches[0].pageY:n.pageY,o={};o.x=n.touches?n.touches[0].pageX:n.pageX,o.y=i;var r=function(){for(var e=document.elementFromPoint(n.touches?n.touches[0].clientX:n.clientX,n.touches?n.touches[0].clientY:n.clientY);e&&e.parentNode;)if((e=e.parentNode).daypilotMainD)return e.calendar;return!1}();if(r){if(t.gShadow&&document.body.removeChild(t.gShadow),t.gShadow=null,r.coords=r.Yc.relativeCoords(n),!t.movingShadow&&r.coords&&(s=r.db(t.drag,!1))){t.movingShadow=s;var a=e.Date.today(),l=(n={value:t.drag.id,start:a,end:a.addSeconds(t.drag.duration),text:t.drag.text},new e.Event(n,r));l.external=!0,e.Global.moving={},e.Global.moving.event=l,e.Global.moving.helper={}}e.Global.moving&&r.Yc.updateMoving()}else{var s;e.de(t.movingShadow),e.Util.removeClass(e.Global.moving,r.G("_event_moving_source")),e.Global.moving=null,t.movingShadow=null,t.gShadow||(t.gShadow=t.createGShadow(t.drag.shadowType)),(s=t.gShadow).style.left=o.x+"px",s.style.top=o.y+"px"}}},gTouchEnd:function(n){e.Util.isMouseEvent(n)||t.gMouseUp(n)},gMouseMove:function(n){if("undefined"!=typeof t&&!(n.insideMainD||n.srcElement&&n.srcElement.inside)){var i=e.mc(n);if(t.drag){var o=t.drag.data,r="move";"string"==typeof o.externalCursor&&(r=o.externalCursor),document.body.style.cursor=r,t.gShadow||(t.gShadow=t.createGShadow(t.drag.shadowType));var a=t.gShadow,l=i.y-5;a.style.left=i.x-5+"px",a.style.top=l+"px",a.style.cursor=r,o.externalHtml&&(a.innerHTML=o.externalHtml),o.externalCssClass&&e.Util.addClass(a,o.externalCssClass),e.Global.moving=null,e.de(t.movingShadow),t.movingShadow=null}for(var s=0;s<t.registered.length;s++)t.registered[s].Aa&&t.registered[s].Aa()}},gUnload:function(e){if(t.registered)for(var n=t.registered,i=0;i<n.length;i++)t.unregister(n[i])},gMouseUp:function(n){if(n=n||window.event,e.Global.resizing){if(!t.resizingShadow)return e.Global.resizing.style.cursor="default",e.Global.resizing.event.calendar.nav.top.style.cursor="auto",void(e.Global.resizing=null);var i=e.Global.resizing.dpBorder,o=t.resizingShadow.clientHeight,r=t.resizingShadow.offsetTop,a=t.resizingShadow.args,l=(s=e.Global.resizing.event).calendar;if(e.Global.resizing.style.cursor="default",l.nav.top.style.cursor="auto",e.Global.resizing.onclick=null,e.Global.resizing=null,!a.allowed)return void l.Fb();s.calendar.Eb(s,o,r,i)}else if(e.Global.moving){var s,d=function(){e.Global.movingAreaData=null;var n=e.Global.moving&&e.Global.moving.event&&e.Global.moving.event.calendar;n&&e.Util.removeClass(e.Global.moving,n.G("_event_moving_source")),e.Global.moving=null,e.de(t.movingShadow),t.movingShadow=null};if(!e.Global.moving.helper)return void d();if(!t.movingShadow)return e.Global.moving.event.calendar.nav.top.style.cursor="auto",void d();r=t.movingShadow.offsetTop,(l=(s=e.Global.moving.event).calendar).Ca=a;var c=t.movingShadow.column,u=t.drag;if(e.Global.moving.event.calendar.nav.top.style.cursor="auto",a=t.movingShadow.args,u&&(s.calendar.todo||(s.calendar.todo={}),s.calendar.todo.del=u.element),!a.allowed)return l.Jb(),void d();var h=n||window.event;s.calendar.Ib(s,c,r,h,u),d()}else if(e.Global.selecting){var p=function(){var n=e.Global.selecting,i=e.Global.selecting.calendar;if(t.firstMousePos=null,e.Global.selecting=null,n.args.allowed)if("Disabled"==i.timeRangeDoubleClickHandling){var o=i.getSelection();i.Qb(o.start,o.end,o.resource)}else i.ec=setTimeout(function(){var e=i.getSelection();i.Qb(e.start,e.end,e.resource)},i.doubleClickTimeout);else i.clearSelection()};e.Global.selecting&&null!==t.topSelectedCell?p():t.selectedTimeout=setTimeout(p,100)}else if(t.firstMousePos){if(l=t.firstMousePos.calendar,e.Global.selecting={},e.Global.selecting.calendar=l,l.$b(),!e.Global.selecting.args.allowed)return;if(t.firstMousePos=null,e.Global.selecting=null,"Disabled"==l.timeRangeDoubleClickHandling){var f=l.getSelection();l.Qb(f.start,f.end,f.resource)}else l.ec=setTimeout(function(){var e=l.getSelection();l.Qb(e.start,e.end,e.resource)},l.doubleClickTimeout)}t.drag&&(t.drag=null,document.body.style.cursor=""),t.gShadow&&(document.body.removeChild(t.gShadow),t.gShadow=null),t.moveOffsetY=null},dragStart:function(n,i,o,r,a){e.us(n);var l=t.drag={};return l.element=n,l.duration=i,l.text=r,l.id=o,l.shadowType=a||"Fill",l.data={id:o,text:r,duration:i,externalHtml:r},!1}};e.Calendar.makeDraggable=function(n){function i(){var e=t.drag={};e.element=r,e.id=n.id,e.duration=n.duration||60,e.text=n.text||"",e.data=n,e.shadowType="Fill"}var o=n.element,r=n.keepElement?null:o;navigator.msPointerEnabled&&(o.style.msTouchAction="none",o.style.touchAction="none");var a=function(e){i();var t=e.target||e.srcElement;if(t.tagName){var n=t.tagName.toLowerCase();if("textarea"===n||"select"===n||"input"===n)return!1}return e.preventDefault&&e.preventDefault(),!1},l=function(n){e.Util.isMouseEvent(n)||(window.setTimeout(function(){i(),t.gTouchMove(n),n.preventDefault()},0),n.preventDefault())};e.us(o),e.re(o,"mousedown",a),e.re(o,e.touch.start,l),o.cancelDraggable=function(){e.ue(o,"mousedown",a),e.ue(o,e.touch.start,l),delete o.cancelDraggable}},t.createGShadow=function(e){var t=document.createElement("div");return t.setAttribute("unselectable","on"),t.style.position="absolute",t.style.width="100px",t.style.height="20px",t.style.border="2px dotted #666666",t.style.zIndex=10,t.style.pointerEvents="none","Fill"===e&&(t.style.backgroundColor="#aaaaaa",t.style.opacity=.5,t.style.filter="alpha(opacity=50)",t.style.border="2px solid #aaaaaa"),document.body.appendChild(t),t},t.moveShadow=function(e){var n=t.movingShadow;n.parentNode&&n.parentNode.removeChild(n),e.firstChild.appendChild(n),n.style.left="0px",n.style.width="",n.style.right="0px"},e.Column=function(t,n){var i=this;i.id=t.id,i.name=t.name,i.date=new e.Date(t.start),i.calendar=n,i.events={},i.events.all=function(){for(var n=e.list(),i=0;i<t.events.length;i++)n.push(t.events[i]);return n},i.events.isEmpty=function(){return 0===t.events.length},i.events.forRange=function(n,o){n=new e.Date(n),o=o?new e.Date(o):t.visibleEnd();for(var r=e.list(),a=0;a<i.events.length;a++){var l=i.events[a];e.Util.overlaps(l.start(),l.end(),n,o)&&r.push(l)}return r},i.events.totalDuration=function(){var t=0;return i.events.all().forEach(function(e){t+=e.part.end.getTime()-e.part.start.getTime()}),new e.Duration(t)},i.value=t.id,i.toJSON=function(){var e={};return e.id=this.id,this.date&&(e.date=this.date.toString()),e.name=this.name,e.value=this.value,e}},"undefined"!=typeof jQuery&&(jQuery.fn.daypilotCalendar=function(t){var n=null,i=this.each(function(){if(!this.daypilot){var i=new e.Calendar(this.id,t);i.init(),this.daypilot=i,n||(n=i)}});return 1===this.length?n:i}),function(){var t=e.am();t&&t.directive("daypilotCalendar",["$parse",function(t){return{restrict:"E",template:"<div id='{{id}}'></div>",compile:function(n,i){return n.replaceWith(this.template.replace("{{id}}",i.id)),function(n,i,o){var r=new e.Calendar(i[0]);r.Le.scope=n,r.init();var a=o.id;a&&(n[a]=r);var l=o.publishAs;for(var s in l&&(0,t(l).assign)(n,r),o)0===s.indexOf("on")&&(e.Util.shouldApply(s)?function(e){r[e]=function(i){var r=t(o[e]);n.$apply(function(){r(n,{args:i})})}}(s):function(e){r[e]=function(i){t(o[e])(n,{args:i})}}(s));var d=n.$watch,c=o.events||o.daypilotEvents;d.call(n,o.config||o.daypilotConfig,function(e,t){for(var n in e)r[n]=e[n];r.update()},!0),d.call(n,c,function(e){r.events.list=e,r.Jc({eventsOnly:!0})},!0)}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){"undefined"==typeof e.DatePicker&&(e.DatePicker=function(t){this.v="2021.3.5046";var n="navigator_"+(new Date).getTime(),i=this;this.onShow=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.prepare=function(){if(this.locale="en-us",this.target=null,this.targetAlignment="left",this.resetTarget=!0,this.pattern=this.ea.locale().datePattern,this.theme="navigator_default",this.patterns=[],this.zIndex=null,t)for(var e in t)this[e]=t[e]},this.init=function(){this.date=new e.Date(this.date);var t=this.Ze();this.resetTarget&&!t?this.$e(this.date):this.resetTarget||(i.date=t);var n=this._e();return n&&n.addEventListener("input",function(){i.date=i.Ze(),i.date&&i.navigator.select(i.date,{dontNotify:!0})}),document.addEventListener("mousedown",function(){i.close()}),this},this.close=function(){this.ge&&(this.ge=!1,this.navigator&&this.navigator.dispose(),this.div.innerHTML="",this.div&&this.div.parentNode===document.body&&document.body.removeChild(this.div))},this.setDate=function(t){this.date=new e.Date(t),this.$e(this.date)},this.Ze=function(){var t,n=this._e();if(!n)return this.date;if(!(t="INPUT"===n.tagName?n.value:n.innerText))return null;for(var o=e.Date.parse(t,i.pattern),r=0;r<i.patterns.length;r++){if(o)return o;o=e.Date.parse(t,i.patterns[r])}return o},this.$e=function(e){var t=this._e();if(t){var n=e.toString(i.pattern,i.locale);"INPUT"===t.tagName?t.value=n:t.innerHTML=n}},this.ea={},this.ea.locale=function(){return e.Locale.find(i.locale)},this._e=function(){var e=this.target;return e&&e.nodeType&&1===e.nodeType?e:document.getElementById(e)},Object.defineProperty(this,"visible",{get:function(){return i.ge}}),this.show=function(){if(!this.ge){var t=this._e(),o=this.navigator;(o=new e.Navigator(n)).api=2,o.cssOnly=!0,o.theme=i.theme,o.weekStarts="Auto",o.locale=i.locale,o.onTimeRangeSelected=function(e){i.date=e.start;var t=e.start.addTime(o.af),n=t.toString(i.pattern,i.locale);(e={}).start=t,e.date=t,e.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onTimeRangeSelect&&(i.onTimeRangeSelect(e),e.preventDefault.value)||(i.$e(n),i.close(),"function"==typeof i.onTimeRangeSelected&&i.onTimeRangeSelected(e))},this.navigator=o;var r=e.abs(t),a=t.offsetHeight,l=i.targetAlignment,s=document.createElement("div");s.style.position="absolute","left"===l&&(s.style.left=r.x+"px"),s.style.top=r.y+a+"px",i.zIndex&&(s.style.zIndex=i.zIndex);var d=document.createElement("div");d.id=n,s.appendChild(d),s.addEventListener("mousedown",function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}),document.body.appendChild(s),this.div=s;var c=i.Ze()||(new e.Date).getDatePart();o.startDate=c,o.af=c.getTimePart(),o.selectionDay=c.getDatePart(),o.init(),"right"===l&&(s.style.left=r.x+t.offsetWidth-o.nav.top.offsetWidth+"px"),this.ge=!0,this.onShow&&this.onShow()}},this.prepare(),this.init()})}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){"undefined"==typeof e.Gantt&&(e.Gantt=function(t,n){this.v="2021.3.5046";var i=this;this.id=t,this.isGantt=!0;var o=new e.Scheduler(t);this.scheduler=o,o.viewType="Resources",o.onCallBackHeader=function(e){e.header.taskGroupMode=i.taskGroupMode,e.header.rowHeaderColumns=i.columns,e.header.clientState=i.clientState},o.onGetNodeState=function(e){e.result=function(e){var t=e.task,n={};return n.start=t.start,n.end=t.end,n.id=t.id,n.complete=t.complete,n.text=t.text,n.type=t.type,n.expanded=e.expanded,n.loaded=e.loaded,n.tags=function(e){var t={};if(e.tags)for(var n in e.tags)t[n]=""+e.tags[n];return t}(t),n.versions=t.versions,n.children=o.internal.getNodeChildren(e.children),n}(e.row),e.preventDefault()},o.bf=function(e){},o.onCallBackResult=function(t){var n=t.result;t.preventDefault();var r=function(){n.scrollToTaskId&&o.scrollToResource(n.scrollToTaskId)};if("None"!==n.updateType){var a=function(e){for(var t=0;t<e.length;t++){var o=e[t];"undefined"!=typeof n[o]&&(i[o]=n[o])}};i.links.list=n.links,i.tasks.list=n.tasks,i.startDate=new e.Date(n.startDate),a(["days","cellDuration","cellGroupBy","cellWidth","cellWidthSpec","cornerHtml","separators","rowMinHeight","rowMarginBottom","taskGroupMode","selectedRows"]),a(["cellProperties","cellConfig","timeHeader","timeHeaders","timeline","columns"]),l.translate(),l.cf(),l.df(),o.update(),o.show(),r()}else r()},this.taskGroupMode="Auto",this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.autoScroll="Drag","function"==typeof e.Bubble?(this.bubbleTask=new e.Bubble,this.bubbleCell=new e.Bubble,this.bubbleRow=new e.Bubble):(this.bubbleTask=null,this.bubbleCell=null,this.bubbleRow=null),this.cellDuration=1440,this.cellGroupBy="Month",this.cellWidth=40,this.cellWidthSpec="Fixed",this.completeBarVisible=!0,this.completeBarHeight=3,this.contextMenuTask=null,this.contextMenuRow=null,this.contextMenuLink=null,this.cornerText="",this.cornerHtml=null,this.crosshairType="Header",this.doubleClickTimeout=300,this.progressiveTaskRendering="Progressive",this.progressiveTaskRenderingMargin=500,this.progressiveTaskRenderingCacheSweeping=!1,this.progressiveTaskRenderingCacheSize=200,this.floatingTasks=!0,this.floatingTimeHeaders=!0,this.headerHeight=30,this.height=300,this.heightSpec="Max",this.hideUntilInit=!1,this.linkBottomMargin=17,this.linkPointSize=10,this.loadingLabelVisible=!0,this.loadingLabelText="Loading...",this.loadingLabelHtml=null,this.locale="en-us",this.messageBarPosition="Top",this.messageHideAfter=5e3,this.progressiveRowRendering=!0,this.progressiveRowRenderingPreload=25,this.rowHeaderScrolling=!1,this.rowHeaderSplitterWidth=3,this.rowHeaderHideIconEnabled=!0,this.rowHeaderWidth=80,this.rowHeaderWidthAutoFit=!0,this.rowMarginBottom=4,this.rowMinHeight=0,this.scrollDelayTasks=200,this.scrollDelayCells=20,this.scrollDelayFloats=0,this.scale="Day",this.selectedRows=[],this.snapToGrid=!0,this.syncTasks=!0,this.syncLinks=!0,this.tapAndHoldTimeout=300,this.taskHeight=34,this.taskHtmlLeftMargin=20,this.taskHtmlRightMargin=20,this.taskResizeMargin=5,this.taskMovingStartEndEnabled=!1,this.taskMovingStartEndFormat="MMMM d, yyyy",this.taskResizingStartEndEnabled=!1,this.taskResizingStartEndFormat="MMMM d, yyyy",this.theme="gantt_default",this.treeAnimation=!0,this.treeAutoExpand=!0,this.treeIndent=20,this.treeImageMarginLeft=0,this.treeImageMarginTop=3,this.treeImageMarginRight=5,this.treeImageWidth=10,this.treeImageHeight=10,this.timeline=null,this.timeHeaders=[{groupBy:"Month",format:"MMMM yyyy"},{groupBy:"Day",format:"d"}],this.useEventBoxes="Never",this.visible=!0,this.xssProtection="Enabled",this.taskVersionsEnabled=!1,this.taskVersionHeight=24,this.taskVersionMargin=2,this.taskVersionPosition="Above",this.taskMoveHandling="Update",this.taskClickHandling="Enabled",this.taskResizeHandling="Update",this.linkCreateHandling="Update",this.taskRightClickHandling="ContextMenu",this.taskDoubleClickHandling="Disabled",this.tasksLoadMethod="GET",this.rowCreateHandling="Disabled",this.rowMoveHandling="Update",this.rowClickHandling="Disabled",this.rowDoubleClickHandling="Disabled",this.rowEditHandling="Update",this.rowSelectHandling="Update",this.clientState={},this.separators=[],this.members={},this.members.obsolete=[],this.members.ignore=["members","scheduler","internal","cellProperties"],this.members.noCssOnly=[],this.links={},this.links.list=[],this.links.add=function(e){e&&(i.links.list.push(e.isLink?e.data:e),i.S&&(l.df(),o.update()),i.Le.notify())},this.links.remove=function(t){if(t){var n=e.indexOf(i.links.list,t.isLink?t.data:t);-1!==n&&(i.links.list.splice(n,1),i.S&&(l.df(),o.update()),i.Le.notify())}},this.links.find=function(t){if(!e.isArray(i.links.list))return null;for(var n=0;n<i.links.list.length;n++){var o=i.links.list[n];if(o.id===t)return new e.Link(o,i)}return null},this.links.findByFromTo=function(t,n){if(!e.isArray(i.links.list))return null;for(var o=0;o<i.links.list.length;o++){var r=i.links.list[o];if(r.from===t&&r.to===n)return new e.Link(r,i)}return null},this.links.load=function(e,t,n){o.links.load(e,function(e){"function"==typeof t&&(t(e),e.preventDefault.value)||(i.links.list=e.data)},n,{dontAddStartEnd:!0})},this.ef={};var r=this.ef;r.timeout=null,r.update=function(){i.S&&(window.clearTimeout(r.timeout),r.timeout=setTimeout(function(){l.cf(),o.update()},0))},this.tasks={},this.tasks.list=[],this.tasks.add=function(t){if(t){if(t instanceof e.Event)throw"DayPilot.Task object required. You have supplied DayPilot.Event.";i.tasks.list.push(t.isTask?t.data:t),r.update(),i.Le.notify()}},this.tasks.find=function(t){var n=a.findInCache(t);return n?new e.Task(n,i):null},this.tasks.update=function(e){if(e){var t=null;if(e.isTask)e.commit(),t=e.data;else{if("object"!=typeof e)throw"DayPilot.Task or task data object expected";t=e}var n=i.tasks.find(t.id);if(n){var o=a.findParentArray(n.data),l=o.indexOf(n.data);o.splice(l,1,t),r.update(),i.Le.notify()}}},this.tasks.remove=function(t){if(t){if(!t.isTask)throw"DayPilot.Task object expected";var n=a.findParentArray(t.data);if(n){var o=e.indexOf(n,t.data);n.splice(o,1),r.update(),i.Le.notify()}}},this.tasks.load=function(t,n,o){if(!t)throw new e.Exception("events.load(): 'url' parameter required");var r=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof o&&o(t)},a=function(t){var o,a=t.request;try{o=JSON.parse(a.responseText)}catch(t){var l={};return l.exception=t,void r(l)}if(e.isArray(o)){var s={preventDefault:function(){this.preventDefault.value=!0}};if(s.data=o,"function"==typeof n&&n(s),s.preventDefault.value)return;i.tasks.list=o,i.S&&i.update()}};i.tasksLoadMethod&&"POST"===i.tasksLoadMethod.toUpperCase()?e.ajax({method:"POST",contentType:"application/json",url:t,success:a,error:r}):e.ajax({method:"GET",url:t,success:a,error:r})},this.visibleStart=function(){return o.visibleStart()},this.visibleEnd=function(){return o.visibleEnd()},this.onAfterRender=null,this.onAfterUpdate=null,this.onBeforeRowHeaderRender=null,this.onBeforeTaskRender=null,this.onBeforeTimeHeaderRender=null,this.onBeforeCellRender=null,this.onBeforeCornerRender=null,this.onTaskClick=null,this.onTaskClicked=null,this.onTaskDoubleClick=null,this.onTaskDoubleClicked=null,this.onTaskRightClick=null,this.onTaskRightClicked=null,this.onRowCreate=null,this.onRowCreated=null,this.onRowMove=null,this.onRowMoved=null,this.onRowMoving=null,this.onRowClick=null,this.onRowClicked=null,this.onRowDoubleClick=null,this.onRowDoubleClicked=null,this.onRowEdit=null,this.onRowEdited=null,this.onRowSelect=null,this.onRowSelected=null,this.onTaskMove=null,this.onTaskMoved=null,this.onTaskMoving=null,this.onTaskResize=null,this.onTaskResized=null,this.onTaskResizing=null,this.onLinkCreate=null,this.onLinkCreated=null,this.I=function(){return!!this.backendUrl||!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.gf=function(){if("string"==typeof i.startDate&&(i.startDate=new e.Date(i.startDate)),!i.startDate||!i.days){var t=e.Date.today(),n=t.addDays(1),r=null,a=null;(function i(o){for(var l=0;l<o.length;l++){var s=o[l];t=new e.Date(s.start),n=new e.Date(s.end),(null===r||t.getTime()<r)&&(r=t.getTime()),(null===a||n.getTime()>a)&&(a=n.getTime()),s.children&&s.children.length>0&&i(s.children)}})(i.tasks.list),r&&a?(t=new e.Date(r).getDatePart(),n=new e.Date(a).getDatePart().addDays(1),o.startDate=i.startDate||t,o.days=i.days||e.DateUtil.daysDiff(t,n)):(o.startDate=t,o.days=30)}},this.hf=function(e,t,n){},this.commandCallBack=function(e,t){l.translate(),o.commandCallBack(e,t)},this.message=function(e,t,n,i){o.message(e,t,n,i)},this.setHeight=function(e){o.setHeight(e)},this.Ue=function(){return!!this.backendUrl},this.init=function(){if(this.S)throw new e.Exception("This instance is already initialized. Use update() to change properties.");return l.translate(),l.cf(),l.df(),this.gf(),o.init(),this.S=!0,this.Xe(),this},this.T=!1,this.dispose=function(){o.dispose(),i.T=!0},this.update=function(t){if(!i.S)throw new e.Exception("You are trying to update a DayPilot.Gantt instance that hasn't been initialized yet.");if(i.T)throw new e.Exception("You are trying to update a DayPilot.Gantt instance that has been disposed.");i.Oe(t),l.translate(),l.cf(),l.df(),i.gf(),o.update()},this.scrollTo=function(e){o.scrollTo(e)},this.scrollToTask=function(e){o.scrollToResource(e)},this.if={};var a=this.if;a.cache={},a.clearCache=function(){a.cache={}},a.addToCache=function(e,t){var n=e.id;if(n){var i={isTaskWrapper:!0};if(i.data=e,i.parent=t,a.cache[n])throw"Duplicate task id detected";a.cache[n]=i}},a.findInCache=function(e){return e?a.cache[e.toString()]:null},a.getProperty=function(e,t){return e.tags&&e.tags[t]?e.tags[t]:e[t]},a.findParentArray=function(e){return a.findInArray(i.tasks.list,e)},a.findInArray=function(t,n){if(-1!==e.indexOf(t,n))return t;for(var i=0;i<t.length;i++){var o=t[i];if(o.children&&o.children.length>0){var r=a.findInArray(o.children,n);if(r)return r}}return null},this.jf={};var l=this.jf;l.translate=function(){if(o.internal.gantt=i,o.durationBarMode="PercentComplete",o.timeRangeSelectedHandling="Disabled",o.treeEnabled=!0,o.rowCreateHtml="",o.rowHeaderColumnsMode="Legacy",o.autoRefreshCommand=i.autoRefreshCommand,o.autoRefreshEnabled=i.autoRefreshEnabled,o.autoRefreshInterval=i.autoRefreshInterval,o.autoRefreshMaxCount=i.autoRefreshMaxCount,o.autoScroll=i.autoScroll,o.backendUrl=i.backendUrl,o.crosshairType=i.crosshairType,o.doubleClickTimeout=i.doubleClickTimeout,o.durationBarVisible=i.completeBarVisible,o.durationBarHeight=i.completeBarHeight,o.dynamicEventRendering=i.progressiveTaskRendering,o.dynamicEventRenderingMargin=i.progressiveTaskRenderingMargin,o.dynamicEventRenderingCacheSweeping=i.progressiveTaskRenderingCacheSweeping,o.dynamicEventRenderingCacheSize=i.progressiveTaskRenderingCacheSize,o.startDate=new e.Date(i.startDate),o.days=i.days,o.cellDuration=i.cellDuration,o.cellGroupBy=i.cellGroupBy,o.cellWidth=i.cellWidth,o.cellWidthSpec=i.cellWidthSpec,o.cornerHtml=i.cornerHtml,o.cornerText=i.cornerText,o.eventHeight=i.taskHeight,o.eventResizeMargin=i.taskResizeMargin,o.floatingEvents=i.floatingTasks,o.floatingTimeHeaders=i.floatingTimeHeaders,o.headerHeight=i.headerHeight,o.heightSpec=i.heightSpec,o.height=i.height,o.linkBottomMargin=i.linkBottomMargin,o.linkPointSize=i.linkPointSize,o.loadingLabelVisible=i.loadingLabelVisible,o.loadingLabelText=i.loadingLabelText,o.loadingLabelHtml=i.loadingLabelHtml,o.locale=i.locale,o.messageBarPosition=i.messageBarPosition,o.messageHideAfter=i.messageHideAfter,o.rowCreateHandling=i.rowCreateHandling,o.progressiveRowRendering=i.progressiveRowRendering,o.progressiveRowRenderingPreload=i.progressiveRowRenderingPreload,o.scale=i.scale,o.scrollDelayEvents=i.scrollDelayTasks,o.scrollDelayCells=i.scrollDelayCells,o.scrollDelayFloats=i.scrollDelayFloats,o.scrollX=i.scrollX,o.scrollY=i.scrollY,i.scrollToTaskId&&(o.scrollToResourceId=i.scrollToTaskId),o.separators=i.separators,o.tapAndHoldTimeout=i.tapAndHoldTimeout,o.eventHtmlLeftMargin=i.taskHtmlLeftMargin,o.eventHtmlRightMargin=i.taskHtmlRightMargin,o.eventMovingStartEndEnabled=i.taskMovingStartEndEnabled,o.eventMovingStartEndFormat=i.taskMovingStartEndFormat,o.eventResizingStartEndEnabled=i.taskResizingStartEndEnabled,o.eventResizingStartEndFormat=i.taskResizingStartEndFormat,o.hideUntilInit=i.hideUntilInit,o.treeIndent=i.treeIndent,o.treeAnimation=i.treeAnimation,o.treeAutoExpand=i.treeAutoExpand,o.treeImageMarginLeft=i.treeImageMarginLeft,o.treeImageMarginTop=i.treeImageMarginTop,o.treeImageMarginRight=i.treeImageMarginRight,o.treeImageWidth=i.treeImageWidth,o.treeImageHeight=i.treeImageHeight,o.timeHeaders=i.timeHeaders,o.rowHeaderHideIconEnabled=i.rowHeaderHideIconEnabled,o.rowHeaderScrolling=i.rowHeaderScrolling,o.rowHeaderSplitterWidth=i.rowHeaderSplitterWidth,o.rowHeaderWidth=i.rowHeaderWidth,o.rowHeaderWidthAutoFit=i.rowHeaderWidthAutoFit,o.rowMarginBottom=i.rowMarginBottom,o.rowMinHeight=i.rowMinHeight,o.selectedRows=i.selectedRows,o.theme=i.theme,o.useEventBoxes=i.useEventBoxes,o.snapToGrid=i.snapToGrid,o.uniqueID=i.uniqueID,o.bubble=i.bubbleTask,o.cellBubble=i.bubbleCell,o.resourceBubble=i.bubbleRow,o.contextMenu=i.contextMenuTask,o.contextMenuResource=i.contextMenuRow,o.contextMenuLink=i.contextMenuLink,o.syncResourceTree=i.syncTasks,o.syncLinks=i.syncLinks,o.timeline=i.timeline,o.visible=i.visible,o.devsb=i.devsb,o.xssProtection=i.xssProtection,o.eventMoveHandling=i.taskMoveHandling,o.eventClickHandling=i.taskClickHandling,o.eventResizeHandling=i.taskResizeHandling,o.linkCreateHandling=i.linkCreateHandling,o.eventRightClickHandling=i.taskRightClickHandling,o.eventDoubleClickHandling=i.taskDoubleClickHandling,o.rowMoveHandling=i.rowMoveHandling,o.rowClickHandling=i.rowClickHandling,o.rowDoubleClickHandling=i.rowDoubleClickHandling,o.rowEditHandling=i.rowEditHandling,o.rowSelectHandling=i.rowSelectHandling,o.eventVersionsEnabled=i.taskVersionsEnabled,o.eventVersionHeight=i.taskVersionHeight,o.eventVersionMargin=i.taskVersionMargin,o.eventVersionPosition=i.taskVersionPosition,e.isArray(i.columns)){o.rowHeaderColumns=[];for(var t=0;t<i.columns.length;t++){var n={};e.Util.copyProps(i.columns[t],n,["html","text","name","title","width","hidden"]),o.rowHeaderColumns.push(n)}}i.I()&&(o.timeHeader=i.timeHeader,o.cellProperties=i.cellProperties,o.cellConfig=i.cellConfig),o.onRowCreate=function(e){e.control=i,"function"==typeof i.onRowCreate&&i.onRowCreate(e)},o.onRowCreated=function(e){"function"==typeof i.onRowCreated&&i.onRowCreated(e)},o.onAfterRender=function(e){"function"==typeof i.onAfterRender&&i.onAfterRender(e)},o.onAfterUpdate=function(e){"function"==typeof i.onAfterUpdate&&i.onAfterUpdate(e)},o.onRowHeaderResized=function(e){i.rowHeaderWidth=o.rowHeaderWidth},o.onAjaxError=function(e){"function"==typeof i.onAjaxError&&i.onAjaxError(e)},o.onRowHeaderColumnResized=function(t){for(var n=e.indexOf(o.rowHeaderColumns,t.column),r=0;r<i.columns.length;r++)i.columns[r].width=o.rowHeaderColumns[r].width;if("function"==typeof i.onColumnResized){var a={};a.column=i.columns[n],i.onColumnResized(a)}},o.internalUseStandardColumns=e.isArray(i.columns),o.onBeforeRowHeaderRender=function(t){t.task=new e.Task(t.row.$.row.task,i);var n=t.row.$.row.events[0];n&&"Auto"===i.taskGroupMode&&"Group"===n.data.type&&(t.task.data.start=n.data.start,t.task.data.end=n.data.end);var r=[];if(e.isArray(i.columns))for(var l=0;l<i.columns.length;l++){var s=i.columns[l],d={};d.value=o.internal.xssTextHtml(a.getProperty(t.task.data,s.display||s.property)),d.html=t.task.data.row&&t.task.data.row.columns&&t.task.data.row.columns[l]?t.task.data.row.columns[l].html:d.value,r.push(d)}t.row.columns=r,"function"==typeof i.onBeforeRowHeaderRender&&i.onBeforeRowHeaderRender(t)},o.onBeforeCellRender=function(e){e.task=i.tasks.find(e.cell.resource),delete e.cell.resource,"function"==typeof i.onBeforeCellRender&&i.onBeforeCellRender(e)},o.onBeforeCornerRender=function(e){"function"==typeof i.onBeforeCornerRender&&(e.control=i,i.onBeforeCornerRender(e))},o.onBeforeTimeHeaderRender=function(e){"function"==typeof i.onBeforeTimeHeaderRender&&i.onBeforeTimeHeaderRender(e)},o.onEventClick=function(t){t.task=new e.Task(t.e,i),"function"==typeof i.onTaskClick&&i.onTaskClick(t)},o.onEventClicked=function(e){"function"==typeof i.onTaskClicked&&i.onTaskClicked(e)},o.onEventDelete=function(e){"function"==typeof i.onTaskDelete&&i.onTaskDelete(e)},o.onEventDeleted=function(e){"function"==typeof i.onTaskDeleted&&i.onTaskDeleted(e)},o.onEventDoubleClick=function(t){t.task=new e.Task(t.e,i),"function"==typeof i.onTaskDoubleClick&&i.onTaskDoubleClick(t)},o.onEventDoubleClicked=function(e){"function"==typeof i.onTaskDoubleClicked&&i.onTaskDoubleClicked(e)},o.onEventRightClick=function(t){t.task=new e.Task(t.e,i),"function"==typeof i.onTaskRightClick&&i.onTaskRightClick(t)},o.onEventRightClicked=function(e){"function"==typeof i.onTaskRightClicked&&i.onTaskRightClicked(e)},o.onRowMoving=function(t){t.kf=t.source,t.lf=t.target,t.source=new e.Task(t.kf.$.row.task,i),t.target=new e.Task(t.lf.$.row.task,i),"function"==typeof i.onRowMoving&&i.onRowMoving(t)},o.onRowMove=function(t){t.kf=t.source,t.lf=t.target,t.source=new e.Task(t.kf.$.row.task,i),t.target=new e.Task(t.lf.$.row.task,i),t.control=i,"function"==typeof i.onRowMove&&i.onRowMove(t),t.source=t.kf,t.target=t.lf},o.onRowMoved=function(t){if("Update"===i.rowMoveHandling||"Notify"===i.rowMoveHandling){var n=t.kf.$.row.task,o=t.lf.$.row.task,r=t.position;if("forbidden"===r)return;var l=t.kf.calendar.internal.gantt,s=l.if.findParentArray(n);if(!s)throw"Cannot find source node parent";var d=e.indexOf(s,n);s.splice(d,1);var c=a.findParentArray(o);if(!c)throw"Cannot find target node parent";var u=e.indexOf(c,o);switch(r){case"before":c.splice(u,0,n);break;case"after":c.splice(u+1,0,n);break;case"child":o.children||(o.children=[],o.expanded=!0),o.children.push(n)}i.Le.notify(),i.update(),l!==i&&l.update()}t.source=new e.Task(t.kf.$.row.task,i),t.target=new e.Task(t.lf.$.row.task,i),"function"==typeof i.onRowMoved&&i.onRowMoved(t)},o.onRowClick=function(t){t.task=new e.Task(t.resource.$.row.task,i),"function"==typeof i.onRowClick&&i.onRowClick(t)},o.onRowClicked=function(e){"function"==typeof i.onRowClicked&&i.onRowClicked(e)},o.onRowDoubleClick=function(t){t.task=new e.Task(t.resource.$.row.task,i),"function"==typeof i.onRowDoubleClick&&i.onRowDoubleClick(t)},o.onRowDoubleClicked=function(e){"function"==typeof i.onRowDoubleClicked&&i.onRowDoubleClicked(e)},o.onRowEdit=function(t){t.task=new e.Task(t.resource.$.row.task,i),"function"==typeof i.onRowEdit&&i.onRowEdit(t)},o.onRowEdited=function(e){"function"==typeof i.onRowEdited&&i.onRowEdited(e)},o.onRowSelect=function(t){t.task=new e.Task(t.row.$.row.task,i),"function"==typeof i.onRowSelect&&i.onRowSelect(t)},o.onRowSelected=function(e){"function"==typeof i.onRowSelected&&i.onRowSelected(e)},o.onEventMove=function(t){t.mf=t.e,t.task=new e.Task(t.e,i),t.control=i,"function"==typeof i.onTaskMove&&i.onTaskMove(t)},o.onEventMoved=function(e){if("Auto"===i.taskGroupMode){var t=e.mf,n=t.data.task;for(n.start=t.start(),n.end=t.end();t.data.parent;){var r=o.events.find(t.data.parent.id),a=l.childrenStartEnd(t.data.parent);r.start(a.start),r.end(a.end),o.events.update(r),t=r}}i.Le.notify(),"function"==typeof i.onTaskMoved&&i.onTaskMoved(e)},o.onEventMoving=function(t){t.task=new e.Task(t.e,i),t.mf=t.e,delete t.position,delete t.overlapping,delete t.resource,"function"==typeof i.onTaskMoving&&i.onTaskMoving(t)},o.onEventResize=function(t){t.mf=t.e,t.task=new e.Task(t.e,i),"function"==typeof i.onTaskResize&&i.onTaskResize(t)},o.onEventResized=function(e){if("Auto"===i.taskGroupMode){var t=e.mf,n=t.data.task;for(n.start=t.start(),n.end=t.end();t.data.parent;){var r=o.events.find(t.data.parent.id),a=l.childrenStartEnd(t.data.parent);r.start(a.start),r.end(a.end),o.events.update(r),t=r}}i.Le.notify(),"function"==typeof i.onTaskResized&&i.onTaskResized(e)},o.onEventResizing=function(t){t.task=new e.Task(t.e,i),t.mf=t.e,"function"==typeof i.onTaskResizing&&i.onTaskResizing(t)},o.onLinkCreate=function(e){e.source=i.tasks.find(e.from),e.target=i.tasks.find(e.to),e.control=i,"function"==typeof i.onLinkCreate&&i.onLinkCreate(e)},o.onLinkCreated=function(e){"function"==typeof i.onLinkCreated&&i.onLinkCreated(e)},o.onResourceExpand=function(e){var t=e.resource.$.row.task;t.row||(t.row={}),t.row.collapsed=!1},o.onResourceCollapse=function(e){var t=e.resource.$.row.task;t.row||(t.row={}),t.row.collapsed=!0}},l.nf=function(e){for(var t=0;t<o.rowlist.length;t++){var n=o.rowlist[t];if(n.task===e)return o.internal.createRowObject(n)}return null},l.df=function(){o.links.list=i.links.list?i.links.list:[]},l.cf=function(){o.resources=[],o.events.list=[],a.clearCache(),l.of(i.tasks.list,o.resources,null),s.sheet&&(s.sheet.commit(),s.sheet=null)},l.pf=function(e){var t=e.type||"Task";e.children&&e.children.length&&(t="Group");var n={};for(var r in e)"children"!==r&&(n[r]=e[r]);var a={};return a.data=n,a.type=t,n.box||(n.box={}),"undefined"==typeof n.box.html&&(n.box.text="Task"===a.type?(n.complete||0)+"%":""),"undefined"==typeof n.box.htmlRight&&(n.box.htmlRight=o.internal.xssTextHtml(n.text)),"function"==typeof i.onBeforeTaskRender&&i.onBeforeTaskRender(a),a.type=t,a};var s={keys:{},sheet:null};l.qf=function(t){if(t.data.box&&!t.data.box.cssClass&&t.data.box.backColor&&"Task"!==t.type){var n=e.Util.normalizeColor(t.data.box.backColor),o=t.type+"_"+n.replace("#",""),r=i.theme,a=i.theme+"_"+o;return s.keys[o]||(s.keys[o]=!0,s.sheet||(s.sheet=e.sheet()),"Group"===t.type?(s.sheet.add("."+a+"."+r+"_task_group ."+r+"_event_inner","position:absolute;top:5px;left:0px;right:0px;bottom:6px;overflow:hidden; background: "+n+"; filter: none; border: 0px none;"),s.sheet.add("."+a+"."+r+"_task_group."+r+"_event:before","content:''; border-color: transparent transparent transparent "+n+"; border-style: solid; border-width: 6px; position: absolute; bottom: 0px;"),s.sheet.add("."+a+"."+r+"_task_group."+r+"_event:after","content:''; border-color: transparent "+n+" transparent transparent; border-style: solid; border-width: 6px; position: absolute; bottom: 0px; right: 0px;")):"Milestone"===t.type&&(s.sheet.add("."+a+"."+r+"_task_milestone ."+r+"_event_inner","position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: "+n+"; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"),s.sheet.add("."+a+"."+r+"_browser_ie8 ."+r+"_task_milestone ."+r+"_event_inner","-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476);\""))),a}},l.of=function(t,n,r){if(e.isArray(t))for(var s=0;s<t.length;s++){var d=t[s];a.addToCache(d,r);var c=l.pf(d),u=c.data,h=c.type,p={};if(e.Util.copyProps(u,p,["id","start","end","text","complete","tags","versions"]),e.Util.copyProps(u.box,p),p.parent=r,p.task=d,p.resource=u.id,p.commitCallback=function(e){return function(){e.task.start=e.start,e.task.end=e.end}}(p),"Group"==h){if(p.type="Group",p.html=u.box&&u.box.html||"",(g=l.qf(c))&&(p.cssClass=(p.cssClass||"")+" "+g),"Auto"===i.taskGroupMode){var f=l.childrenStartEnd(d);p.start=f.start,p.end=f.end,p.resizeDisabled=!0,p.moveDisabled=!0}}else if("Milestone"===h){var g;p.html="",d.end=d.start,(g=l.qf(c))&&(p.cssClass=(p.cssClass||"")+" "+g),u.end=u.start,p.end=u.start,p.barHidden=!0,p.resizeDisabled=!0,p.type="Milestone",p.width=i.taskHeight,delete p.backColor}p.moveVDisabled=!0,p.htmlRight=u.box.htmlRight,p.htmlLeft=u.box.htmlLeft,o.events.list.push(p);var m={};m.task=d,e.Util.copyProps(u.row,m),m.name=u.text,m.id=u.id,m.children=[],m.expanded=!u.row||!u.row.collapsed,d.children&&d.children.length&&l.of(d.children,m.children,d),n.push(m)}},l.childrenStartEnd=function(t){if(!t.children||!t.children.length){var n=t.start,i=t.end;return"Milestone"===t.type&&(i=n),{start:new e.Date(n),end:new e.Date(i)}}n=null,i=null;for(var o=0;o<t.children.length;o++){var r=l.childrenStartEnd(t.children[o]);(!n||r.start.getTime()<n.getTime())&&(n=r.start),(!i||r.end.getTime()>i.getTime())&&(i=r.end)}return{start:n,end:i}},this.rows={},this.rows.expand=function(e){o.rows.expand(e)},this.rows.expandAll=function(){o.rows.expandAll()},this.rows.selection={},this.rows.selection.add=function(e){o.rows.find(e.data.id)},this.rows.selection.clear=function(){o.rows.selection.clear()},this.rows.selection.get=function(){return o.rows.selection.get().map(function(t){return new e.Task(t.$.row.task,i)})},this.exportAs=function(e,t){return o.exportAs(e,t)},this.Ye=null,this.Oe=function(t){if(t){var n={tasks:{preInit:function(){var t=this.data;t&&(i.tasks.list=e.isArray(t.list)?t.list:t)}},links:{preInit:function(){var t=this.data;t&&(i.links.list=e.isArray(t.list)?t.list:t)}},scrollTo:{postInit:function(){this.data&&i.scrollTo(this.data)}},scrollToTask:{postInit:function(){this.data&&i.scrollToTask(this.data)}}};for(var o in this.Ye=n,t)if(n[o]){var r=n[o];r.data=t[o],r.preInit&&r.preInit()}else i[o]=t[o]}},this.Xe=function(){var e=this.Ye;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.internal={},this.internal.initialized=function(){return i.S},this.internal.rowObjectForTaskData=l.nf,this.internal.loadOptions=i.Oe,this.Le={},this.Le.scope=null,this.Le.notify=function(){i.Le.scope&&i.Le.scope.$apply()},this.Oe(n)},"undefined"!=typeof jQuery&&(jQuery.fn.daypilotGantt=function(t){var n=null,i=this.each(function(){if(!this.daypilot){var i=new e.Gantt(this.id,t);i.init(),this.daypilot=i,n||(n=i)}});return 1===this.length?n:i}),function(){var t=e.am();t&&t.directive("daypilotGantt",["$parse",function(t){return{restrict:"E",template:"<div id='{{id}}'></div>",compile:function(n,i){return n.replaceWith(this.template.replace("{{id}}",i.id)),function(n,i,o){var r=new e.Gantt(i[0]);r.Le.scope=n,r.init();var a=o.id;a&&(n[a]=r);var l=o.publishAs;for(var s in l&&(0,t(l).assign)(n,r),o)0===s.indexOf("on")&&(e.Util.shouldApply(s)?function(e){r[e]=function(i){var r=t(o[e]);n.$apply(function(){r(n,{args:i})})}}(s):function(e){r[e]=function(i){t(o[e])(n,{args:i})}}(s));n.$watch.call(n,o.config||o.daypilotConfig,function(e,t){r.Oe(e),r.update()},!0)}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded())}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){"undefined"==typeof e.Kanban&&(e.Kanban=function(t,n){this.v="2021.3.5046";var i=this;this.barWidth=5,this.cardAutoHeight=!0,this.cardHeight=60,this.cardMarginLeft=5,this.cardMarginRight=5,this.cardMarginBottom=5,this.columnHeaderHeight=20,this.crosshairType="Disabled",this.height=300,this.heightSpec="Auto",this.theme="kanban_default",this.cellMarginBottom=4,this.cellMarginTop=5,this.columnWidthSpec="Auto",this.columnWidth=200,this.cornerHtml=null,this.contextMenuCard=null,this.rowMinHeight=0,this.swimlaneCollapsingEnabled=!1,this.swimlaneHeaderWidth=80,this.visible=!0,this.swimlanes={},this.swimlanes.list=[],this.columns={},this.columns.list=[],this.cards={},this.cards.list=[],this.cardDeleteHandling="Disabled",this.cardMoveHandling="Update",this.columnMoveHandling="Disabled",this.swimlaneMoveHandling="Disabled",this.cardRightClickHandling="ContextMenu",this.onBeforeCellRender=null,this.onCardClick=null,this.onCardClicked=null,this.onCardRightClick=null,this.onCardRightClicked=null,this.onCardDelete=null,this.onCardDeleted=null,this.onCardMove=null,this.onCardMoved=null,this.onColumnMove=null,this.onColumnMoved=null,this.onHeightChanged=null,this.onSwimlaneMove=null,this.onSwimlaneMoved=null;var o=new e.Scheduler(t);this.scheduler=o;var r={},a=new e.Date("2000-01-01");r.translate=function(){var t=o;t.startDate=a,t.scale="Day",t.timeHeaders=[{groupBy:"Cell",format:"d"}],t.rowHeaderColumnsMode="Legacy",t.heightSpec=i.heightSpec,t.cellWidthSpec=i.columnWidthSpec,t.cellWidth=i.columnWidth,t.cellsMarkBusiness=!1,t.cornerHtml=i.cornerHtml,t.crosshairType=i.crosshairType,t.dynamicEventRendering="Disabled",t.floatingEvents=!1,t.floatingTimeHeaders=!1,t.rowMinHeight=i.rowMinHeight,t.rowMarginTop=i.cellMarginTop,t.rowMarginBottom=i.cellMarginBottom,t.devsb=i.devsb,t.eventMoveToPosition=!0,t.headerHeight=i.columnHeaderHeight,t.eventResizeHandling="Disabled",t.timeRangeSelectedHandling="Disabled",t.eventHeight=i.cardHeight,t.eventMarginLeft=i.cardMarginLeft,t.eventMarginRight=i.cardMarginRight,t.eventMarginBottom=i.cardMarginBottom,t.eventTextWrappingEnabled=!0,t.durationBarVisible=!1,t.theme=i.theme,t.visible=i.visible,t.rowHeaderWidth=i.swimlaneHeaderWidth,t.contextMenu=i.contextMenuCard,t.eventDeleteHandling=i.cardDeleteHandling,t.eventMoveHandling=i.cardMoveHandling,t.rowMoveHandling=e.list(i.swimlanes.list).isEmpty()?"Disabled":i.swimlaneMoveHandling,t.eventRightClickHandling=i.cardRightClickHandling,t.onHeightChanged=i.onHeightChanged,t.internal.enableCellStacking(i.cardAutoHeight),t.internal.cssNames.timeheadercol="_colheadercell",t.internal.cssNames.timeheadercolInner="_colheadercell_inner",t.internal.cssNames.resourcedivider="_rowheaderdivider",t.internal.cssNames.event="_card",t.internal.cssNames.eventInner="_card_inner",t.internal.cssNames.eventDelete="_card_delete",t.internal.cssNames.eventMovingSource="_card_moving_source",i.swimlaneCollapsingEnabled&&(t.rowHeaderWidthMarginRight=15),t.onBeforeTimeHeaderRender=function(t){var n=i.rf(t.header.start);t.header.html=n.name,t.header.toolTip=n.toolTip||"",t.header.areas=e.list(n.areas).map(function(t){var n=[];return e.Util.copyProps(t,n),n}),e.list(t.header.areas).forEach(function(t){t.target=new e.KanbanColumn(n,i)}),"Disabled"!==i.columnMoveHandling&&t.header.areas.push({left:0,top:0,width:20,height:20,css:i.theme+"_columnmove_handle",mousedown:i.sf,action:"None"})},t.onBeforeCellRender=function(n){var o={cell:{}};o.cell.column=new e.KanbanColumn(i.rf(n.cell.start),i),o.cell.swimlane=null;var r=i.tf(n.cell.resource);r&&(o.cell.swimlane=new e.Swimlane(r,i)),o.cell.areas=[],o.cell.cssClass=null,o.cell.html=null,o.cell.backImage=null,o.cell.backRepeat=null,o.cell.backColor=null,"function"==typeof i.onBeforeCellRender&&(i.onBeforeCellRender(o),e.Util.copyProps(o.cell,n.cell,["areas","cssClass","html","backImage","backRepeat","backColor"]),e.list(n.cell.areas).forEach(function(e){e.target={swimlane:o.cell.swimlane,column:o.cell.column}}));var a=t.rows.find(n.cell.resource);t.resources[a.index].collapsed&&(n.cell.cssClass||(n.cell.cssClass=""),n.cell.cssClass+=" "+i.theme+"_collapsed")},t.onEventClick=function(t){var n=new e.Args(t);n.card=new e.Card(t.e.data.card,i),"function"==typeof i.onCardClick&&i.onCardClick(n),t.wrapped=n},t.onEventClicked=function(e){"function"==typeof i.onCardClicked&&i.onCardClicked(e.wrapped)},t.onEventRightClick=function(t){var n=new e.Args(t);if(n.card=new e.Card(t.e.data.card,i),"function"==typeof i.onCardRightClick&&i.onCardRightClick(n),t.wrapped=n,!t.preventDefault.value){var o=t.e,r=n.card;switch(i.cardRightClickHandling){case"ContextMenu":var a=o.client.contextMenu();a?a.show(r):i.contextMenuCard&&i.contextMenuCard.show(r),t.preventDefault()}}},t.onEventRightClicked=function(e){"function"==typeof i.onCardRightClicked&&i.onCardRightClicked(e.wrapped)},t.onEventDelete=function(t){var n=new e.Args(t);n.card=new e.Card(t.e.data.card,i),n.control=i,"function"==typeof i.onCardDelete&&i.onCardDelete(n),t.wrapped=n},t.onEventDeleted=function(t){e.rfa(i.cards.list,t.e.data.card),"function"==typeof i.onCardDeleted&&i.onCardDeleted(t.wrapped)},t.onEventMove=function(t){t.external&&(t.e.data.card={id:t.e.data.id,name:t.e.data.name,text:t.e.data.text,barColor:t.e.data.barColor,barBackColor:t.e.data.barBackColor});var n=new e.Args(t);n.control=i,n.card=new e.Card(t.e.data.card,i),n.column=new e.KanbanColumn(i.rf(t.newStart)),n.position=t.position,n.external=t.external,n.swimlane="*"!==t.newResource?new e.Swimlane(i.tf(t.newResource),i):null;for(var a=o.cells.find(t.newStart,t.newResource)[0].events(),l=t.position,s=null,d=l-1;a[d];){if(a[d].data!==t.e.data){s=new e.Card(a[d]);break}d-=1}for(var c=null,u=l;a[u];){if(a[u].data!==t.e.data){c=new e.Card(a[u]);break}u+=1}if(n.previous=s,n.next=c,"function"==typeof i.onCardMove&&i.onCardMove(n),t.wrapped=n,t.preventDefault(),!n.preventDefault.value){switch(i.cardMoveHandling){case"Update":var h=0;c?h=c.wrapped.data.sort[0]:s&&(h=s.wrapped.data.sort[0]),t.e.data.sort=[h,(new e.Date).toString()],e.rfa(i.cards.list,t.e.data.card);var p=0;c?p=e.indexOf(i.cards.list,c.data):s&&(p=e.indexOf(i.cards.list,s.data)+1);var f=i.rf(t.newStart);t.e.data.card.column=f.id,t.e.data.card.swimlane=t.newResource,i.cards.list.splice(p,0,t.e.data.card),r.updateSort(),o.internal.deleteDragSource(),i.update()}!function(){var n=t.wrapped,o=e.list(i.cards.list).find(function(e){return t.e.data.card===e});o.swimlane=n.swimlane?n.swimlane.data.id:null,o.column=n.column.data.id,"function"==typeof i.onCardMoved&&i.onCardMoved(n)}()}},t.onBeforeResHeaderRender=function(t){if(i.swimlaneCollapsingEnabled&&!e.list(i.swimlanes.list).isEmpty()){var n=i.theme+"_swimlane_collapse";t.resource.collapsed&&(n=i.theme+"_swimlane_expand"),t.resource.areas=[{right:0,top:0,height:15,width:15,action:"JavaScript",css:n,js:function(){i.uf(t.resource.index)}}]}},t.onRowMove=function(t){var n=new e.Args(t);n.control=i,t.wrapped=n,n.swimlane=new e.Swimlane(t.source.$.row.swimlane);var r=0;switch(t.position){case"before":r=t.target.index;break;case"after":r=t.target.index+1;break;default:throw"Unexpected target swimlane position: "+t.position}n.position=r,n.previous=null;for(var a=r-1;o.rowlist[a]&&o.rowlist[a].swimlane!==n.swimlane.data;)n.previous=new e.Swimlane(o.rowlist[a].swimlane),a-=1;n.next=null;for(var l=r;o.rowlist[l]&&o.rowlist[l].swimlane!==n.swimlane.data;)n.next=new e.Swimlane(o.rowlist[l].swimlane),l+=1;"function"==typeof i.onSwimlaneMove&&i.onSwimlaneMove(n)},t.onRowMoved=function(t){var n=t.wrapped;e.rfa(i.swimlanes.list,n.swimlane.data);var o=0;n.next?o=e.indexOf(i.swimlanes.list,n.next.data):n.previous&&(o=e.indexOf(i.swimlanes.list,n.previous.data)+1),i.swimlanes.list.splice(o,0,n.swimlane.data),"function"==typeof i.onSwimlaneMoved&&i.onSwimlaneMoved(n)},t.treePreventParentUsage=!0},r.loadCards=function(){var t=i.theme+"_card_header",n=i.theme+"_card_body",r=(new e.Date).toString();o.sortDirections=["asc","desc"],o.events.list=e.list(i.cards.list).map(function(o,l){var s=o.html||o.text||"",d=o.name||"",c={};return c.id=o.id,c.text=o.text,c.html="<div class='"+t+"'>"+d+"</div><div class='"+n+"'>"+s+"</div>",c.resource=o.swimlane,c.start=a.addDays(e.list(i.columns.list).findIndex(function(e){return o.column===e.id})),c.end=c.start.addDays(1),c.card=o,c.height=o.height,c.cssClass=o.cssClass,c.sort=[l,r],c.areas=e.list(o.areas).map(function(t){var n={};return e.Util.copyProps(t,n),t.js&&(n.js=function(n){t.js(new e.Card(n.data.card,i))}),n}),c.areas.push({left:0,width:5,top:0,bottom:0,backColor:o.barColor,cssClass:i.theme+"_card_bar"}),c})},r.updateSort=function(){var t=(new e.Date).toString();e.list(i.cards.list).forEach(function(e,n){var i=r.findSchedulerEventData(e);i&&(i.sort=[n,t])})},r.findSchedulerEventData=function(t){return e.list(o.events.list).find(function(e){return e.card===t})},r.loadSwimlanes=function(){var t=e.list(i.swimlanes.list);o.resources=t.map(function(e){var t={};return t.name=e.name,t.id=e.id,t.swimlane=e,e.collapsed&&(t.collapsed=!0,t.eventHeight=20,t.hideEvents=!0),t}),t.isEmpty()&&(o.resources=[{name:"",id:"*"}])},r.loadColumns=function(){var t=e.list(i.columns.list);o.days=t.length};var l={active:null,div:null,update:function(){l.clear();var e=l.findPosition();l.draw(e)},clear:function(){e.de(l.div),l.div=null},draw:function(e){var t=0;if(e>=o.itline.length){var n=o.itline[o.itline.length-1];t=n.left+n.width-3}else t=o.itline[e].left;var r=document.createElement("div");r.style.position="absolute",r.style.left=t+"px",r.style.width="3px",r.style.top=0,r.style.height=o.headerHeight+"px",r.className=i.theme+"_columnmove_position",l.div=r,o.nav.timeHeader.appendChild(r)},findPosition:function(){if(i.coords.x<0)return 0;var t=e.list(o.itline).findIndex(function(e){return i.coords.x<e.left+o.rowHeaderWidth+e.width/2});return-1===t?o.itline.length:t}};this.sf=function(e){l.active=e},this.rf=function(t){return i.columns.list[e.DateUtil.daysDiff(a,t)]},this.tf=function(t){return e.list(i.swimlanes.list).find(function(e){return e.id===t})},this.message=function(e,t,n,i){o.message(e,t,n,i)},this.show=function(){i.visible=!0,o.show()},this.hide=function(){i.visible=!1,o.hide()},this.cards.add=function(t){t&&(i.cards.list.push(t&&t instanceof e.Card?t.data:t),i.update())},this.cards.remove=function(t){t&&(e.rfa(i.cards.list,t&&t instanceof e.Card?t.data:t),i.update())},this.cards.update=function(e){i.update()},this.cards.find=function(t){var n=e.list(i.cards.list).find(function(e){return t===e.id});return n?new e.Card(n,i):null},this.uf=function(t){e.list(i.swimlanes.list).isEmpty()||(i.swimlanes.list[t].collapsed=!i.swimlanes.list[t].collapsed),i.update()},this.init=function(){if(this.S)throw new e.Exception("This instance is already initialized. Use update() to change properties.");return r.translate(),r.loadSwimlanes(),r.loadColumns(),r.loadCards(),o.init(),i.pe(),this.S=!0,this},this.T=!1,this.dispose=function(){o.dispose(),i.T=!0},this.update=function(t){var n=i;if(!n.S)throw new e.Exception("You are trying to update a DayPilot.Kanban instance that hasn't been initialized yet.");if(n.T)throw new e.Exception("You are trying to update a DayPilot.Kanban instance that has been disposed.");i.Oe(t),r.translate(),r.loadSwimlanes(),r.loadColumns(),r.loadCards(),o.update()},this.pe=function(){e.re(document,"mouseup",i.vf),e.re(document,"mousemove",i.wf)},this.Le={},this.Le.scope=null,this.Le.notify=function(){i.Le.scope&&i.Le.scope.$apply()},this.Ye=null,this.Oe=function(t){if(t){var n={cards:{preInit:function(){var t=this.data;t&&(i.cards.list=e.isArray(t.list)?t.list:t)}},columns:{preInit:function(){var t=this.data;t&&(i.columns.list=e.isArray(t.list)?t.list:t)}},swimlanes:{preInit:function(){var t=this.data;t&&(i.swimlanes.list=e.isArray(t.list)?t.list:t)}}};for(var o in this.Ye=n,t)if(n[o]){var r=n[o];r.data=t[o],r.preInit&&r.preInit()}else i[o]=t[o]}},this.Xe=function(){var e=this.Ye;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.internal={},this.internal.loadOptions=i.Oe,this.Oe(n),this.ge=function(){var e=dp.nav.top;return!!e&&e.offsetWidth>0&&e.offsetHeight>0},this.je=function(){var e=i,t=e.ge;t()||e.le||(e.le=setInterval(function(){t()&&(e.update(),clearInterval(e.le))},100))},this.wf=function(t){i.coords=e.mo3(o.nav.top,t),l.active&&l.update()},this.vf=function(t){if(l.active){var n=l.active.source,o=l.findPosition(),r=i.rf(n.start),a=new e.Args;a.column=new e.KanbanColumn(r,i),a.position=o,a.previous=null,a.next=null;for(var s=null,d=a.position;0!==d&&!s;)r!==i.columns.list[d-1]&&(s=i.columns.list[d-1]),d-=1;s&&(a.previous=new e.KanbanColumn(s,i));var c=null;for(d=a.position;d<i.columns.list.length-1&&!c;)r!==i.columns.list[d]&&(c=i.columns.list[d]),d+=1;if(c&&(a.next=new e.KanbanColumn(c,i)),"function"==typeof i.onColumnMove&&i.onColumnMove(a),!a.preventDefault.value){if("Update"===i.columnMoveHandling){e.rfa(i.columns.list,a.column.data);var u=0;a.next?u=e.indexOf(i.columns.list,a.next.data):a.previous&&(u=e.indexOf(i.columns.list,a.previous.data)+1),i.columns.list.splice(u,0,a.column.data),i.update()}"function"==typeof i.onColumnMoved&&i.onColumnMove(a)}l.active=null,l.clear()}}},e.Kanban.makeDraggable=function(t){e.Scheduler.makeDraggable(t)},e.Card=function(t,n){t instanceof e.Event?(this.data=t.data.card,this.wrapped=t):this.data=t,this.control=n},e.KanbanColumn=function(e,t){this.data=e,this.control=t},e.Swimlane=function(e,t){this.data=e,this.control=t},function(){var t=e.am();t&&t.directive("daypilotKanban",["$parse",function(t){return{restrict:"E",template:"<div id='{{id}}'></div>",compile:function(n,i){return n.replaceWith(this.template.replace("{{id}}",i.id)),function(n,i,o){var r=new e.Kanban(i[0]);r.Le.scope=n,r.init();var a=o.id;a&&(n[a]=r);var l=o.publishAs;for(var s in l&&(0,t(l).assign)(n,r),o)0===s.indexOf("on")&&(e.Util.shouldApply(s)?function(e){r[e]=function(i){var r=t(o[e]);n.$apply(function(){r(n,{args:i})})}}(s):function(e){r[e]=function(i){t(o[e])(n,{args:i})}}(s));n.$watch.call(n,o.config||o.daypilotConfig,function(e,t){r.Oe(e),r.update()},!0)}}}}])}())}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){if("undefined"==typeof e.Menu){var t={mouse:null,menu:null,handlersRegistered:!1,hideTimeout:null,waitingSubmenu:null};e.Menu=function(n){var i=this,o=null;this.v="2021.3.5046",this.zIndex=120,this.cssClassPrefix="menu_default",this.cssOnly=!0,this.menuTitle=null,this.showMenuTitle=!1,this.hideOnMouseOut=!1,this.hideAfter=200,this.theme=null,this.onShow=null,this.A=function(){},n&&e.isArray(n)&&(this.items=n),this.toJSON=function(){return null},this.show=function(n,r){r=r||{};var a=null;if(n?"string"==typeof n.id||"number"==typeof n.id?a=n.id:"function"==typeof n.id?a=n.id():"function"==typeof n.value&&(a=n.value()):a=null,"undefined"!=typeof e.Bubble&&e.Bubble.hideActive(),r.submenu||t.menuClean(),this.A.submenu=null,null!==t.mouse){i.cssOnly||(i.cssOnly=!0);var l=null;if(n&&n.isRow&&n.$.row.task?(l=new e.Task(n.$.row.task,n.calendar)).menuType="resource":l=n&&n.isEvent&&n.data.task?new e.Task(n,n.calendar):n,"function"==typeof i.onShow){var s={};if(s.source=l,s.menu=i,s.preventDefault=function(){s.preventDefault.value=!0},i.onShow(s),s.preventDefault.value)return}var d=document.createElement("div");if(d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style.display="none",d.style.overflow="hidden",d.style.zIndex=this.zIndex+1,d.className=this.applyCssClass("main"),d.onclick=function(e){e.cancelBubble=!0,this.parentNode.removeChild(this)},this.hideOnMouseOut&&(d.onmousemove=function(e){clearTimeout(t.hideTimeout)},d.onmouseleave=function(e){i.delayedHide({hideParent:!0})}),!this.items||0===this.items.length)throw"No menu items defined.";if(this.showMenuTitle){var c=document.createElement("div");c.innerHTML=this.menuTitle,c.className=this.applyCssClass("title"),d.appendChild(c)}for(var u=0;u<this.items.length;u++){var h=this.items[u],p=document.createElement("div");if(e.Util.addClass(p,this.applyCssClass("item")),h.items&&e.Util.addClass(p,this.applyCssClass("item_haschildren")),"undefined"!=typeof h&&!h.hidden){if("-"===h.text){var f=document.createElement("div");f.addEventListener("click",function(e){e.stopPropagation()}),p.appendChild(f)}else{var g=document.createElement("a");if(g.style.position="relative",g.style.display="block",h.cssClass&&e.Util.addClass(g,h.cssClass),h.disabled)e.Util.addClass(g,i.applyCssClass("item_disabled"));else if((h.onclick||h.onClick)&&(g.item=h,g.onclick=function(e,t){return function(n){if("function"==typeof e.onClick){var i={};if(i.item=e,i.source=t.source,i.originalEvent=n,i.preventDefault=function(){i.preventDefault.value=!0},e.onClick(i),i.preventDefault.value)return}e.onclick&&e.onclick.call(t,n)}}(h,g),g.ontouchstart=function(e){e.stopPropagation(),e.preventDefault(),g.source.calendar.internal.touch.active=!0},g.ontouchend=function(e,n){return function(i){i.stopPropagation(),i.preventDefault();var o=function(){window.setTimeout(function(){n.source.calendar.internal.touch.active=!1},500)};if("function"==typeof e.onClick){var r={};if(r.item=e,r.source=n.source,r.originalEvent=i,r.preventDefault=function(){r.preventDefault.value=!0},e.onClick(r),r.preventDefault.value)return void o()}e.onclick&&e.onclick.call(n,i),t.menuClean(),o()}}(h,g)),h.items&&!h.disabled&&(g.ontouchend=(m=function(e,t){return function(n){n.preventDefault(),n.stopPropagation(),i.xf(e,t)}})(h,g)),h.onclick);else if(h.href)g.href=h.href.replace(/\x7B0\x7D/gim,a),h.target&&g.setAttribute("target",h.target);else if(h.command){var m;g.onclick=(m=function(t,n){return function(i){var o=n.source,r=t;r.action=r.action?r.action:"CallBack";var a=o.calendar||o.root;if(o instanceof e.Link)a.internal.linkMenuClick(r.command,o,r.action);else if(o instanceof e.Selection)a.internal.timeRangeMenuClick(r.command,o,r.action);else if(o instanceof e.Event)a.internal.eventMenuClick(r.command,o,r.action);else if(o instanceof e.Selection)a.internal.timeRangeMenuClick(r.command,o,r.action);else if(o instanceof e.Task)"resource"===o.menuType?a.internal.resourceHeaderMenuClick(r.command,n.menuSource,r.action):a.internal.eventMenuClick(r.command,n.menuSource,r.action);else{switch(o.menuType){case"resource":return void a.internal.resourceHeaderMenuClick(r.command,o,r.action);case"selection":return void a.internal.timeRangeMenuClick(r.command,o,r.action);default:return void a.internal.eventMenuClick(r.command,o,r.action)}i.preventDefault()}}})(h,g),g.ontouchend=m(h,g)}h.items&&g.addEventListener("click",function(e){e.stopPropagation()}),g.source=l,g.menuSource=n;var v=document.createElement("span");if(v.className=i.applyCssClass("item_text"),v.innerHTML=e.Util.escapeTextHtml(h.text,h.html),g.appendChild(v),h.image){var y=document.createElement("img");y.src=h.image,y.style.position="absolute",y.style.top="0px",y.style.left="0px",g.appendChild(y)}if(h.icon){var b=document.createElement("span");b.className=i.applyCssClass("item_icon");var w=document.createElement("i");w.className=h.icon,b.appendChild(w),g.appendChild(b)}g.onmouseover=function(e,n){return function(){var o=e,r=t.waitingSubmenu;if(r){if(r.parent===o)return;clearTimeout(r.timeout),t.waitingSubmenu=null}e.disabled||(t.waitingSubmenu={},t.waitingSubmenu.parent=o,t.waitingSubmenu.timeout=setTimeout(function(){t.waitingSubmenu=null,i.xf(o,n)},300))}}(h,g),p.appendChild(g)}d.appendChild(p)}}var C=function(n){window.setTimeout(function(){t.menuClean(),e.MenuBar.deactivate()},100)};d.onclick=C,d.ontouchend=C,d.onmousedown=function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},d.oncontextmenu=function(){return!1},document.body.appendChild(d),i.A.visible=!0,i.A.source=n,d.style.display="";var x=d.offsetHeight,S=d.offsetWidth;d.style.display="none";var T=document.documentElement.clientHeight,E=window.innerWidth,_="number"==typeof r.windowMargin?r.windowMargin:5;if(function(){var t=r.initiator;if(t){var n=t.div,i=t.area,a=t.a;if("Visible"!==(i.visibility||i.v||"Visible")&&(a=e.Areas.createArea(n,t.e,i),n.appendChild(a),o=a),a){var l=e.abs(a);r.x=l.x,r.y=l.y+l.h+2}}}(),function(){var e="number"==typeof r.x?r.x:t.mouse.x+1,n="number"==typeof r.y?r.y:t.mouse.y+1,i=document.body.scrollTop||document.documentElement.scrollTop,o=document.body.scrollLeft||document.documentElement.scrollLeft;d.style.top=n-i>T-x&&0!==T?n-(n-i-(T-x)+_)+"px":n+"px","right"===r.align&&(e-=S),d.style.left=e-o>E-S&&0!==E?e-(e-o-(E-S)+_)+"px":e+"px"}(),r.parentLink){var k=r.parentLink,D=parseInt(new e.StyleReader(d).get("border-top-width")),A=e.abs(r.parentLink.parentNode),O=A.x+k.offsetWidth,I=A.y-D;O+S>E&&(O=Math.max(0,A.x-S));var P=document.body.scrollTop+document.documentElement.scrollTop;I+x-P>T&&(I=Math.max(0,T-x+P)),d.style.left=O+"px",d.style.top=I+"px"}d.style.display="",this.addShadow(d),this.A.div=d,r.submenu||(e.Menu.active=this)}},this.xf=function(t,n){var o=t,r=n.source;if((!i.A.submenu||i.A.submenu.item!==t)&&(i.A.submenu&&i.A.submenu.item!==t&&(e.Util.removeClass(i.A.submenu.link.parentNode,i.applyCssClass("item_haschildren_active")),i.A.submenu.menu.hide(),i.A.submenu=null),t.items)){var a=i.cloneOptions();a.items=t.items,i.A.submenu={},i.A.submenu.menu=new e.Menu(a),i.A.submenu.menu.yf=i,i.A.submenu.menu.show(r,{submenu:!0,parentLink:n,parentItem:o}),i.A.submenu.item=t,i.A.submenu.link=n,e.Util.addClass(n.parentNode,i.applyCssClass("item_haschildren_active"))}},this.applyCssClass=function(e){var t=this.theme||this.cssClassPrefix;return t?t+(this.cssOnly?"_":"")+e:""},this.cloneOptions=function(){return e.Util.copyProps(r,{},["cssClassPrefix","theme","hideAfter","hideOnMouseOut","zIndex"])},this.hide=function(n){n=n||{},this.A.submenu&&this.A.submenu.menu.hide();var r=t.waitingSubmenu;r&&(t.waitingSubmenu=null,clearTimeout(r.timeout)),this.removeShadow(),this.A.div&&this.A.div.parentNode===document.body&&document.body.removeChild(this.A.div),o&&(e.de(o),o=null),i.A.visible=!1,i.A.source=null,i.yf&&n.hideParent&&i.yf.hide(n),e.Menu.active===i&&(e.Menu.active=null),"function"==typeof this.onHide&&this.onHide({})},this.delayedHide=function(e){t.hideTimeout=setTimeout(function(){i.hide(e)},i.hideAfter)},this.cancelHideTimeout=function(){clearTimeout(t.hideTimeout)},this.init=function(e){return t.mouseMove(e),this},this.addShadow=function(e){},this.removeShadow=function(){};var r=e.isArray(n)?null:n;if(r)for(var a in r)this[a]=r[a]},e.MenuBar=function(t,n){var i=this;for(var o in n=n||{},this.items=[],this.theme="menubar_default",this.windowMargin=0,this.nav={},this.elements={},this.elements.items=e.list(),this.zf=null,this.S=!1,n)this[o]=n[o];this.Af=function(e){return this.theme+"_"+e},this.Ya=function(){this.nav.top=document.getElementById(t);var n=this.nav.top;n.className=this.Af("main"),e.list(i.items).forEach(function(t){var o=document.createElement("span");o.innerHTML=e.Util.escapeTextHtml(t.text,t.html),o.className=i.Af("item"),t.cssClass&&o.classList.add(t.cssClass),o.data=t,o.onclick=function(e){if(i.active&&i.active.item===t)i.Bf();else if(t.children)return void i.Cf(o);if("function"==typeof t.onClick){var n={};n.item=t,n.originalEvent=e,t.onClick(n)}},o.onmousedown=function(e){e.stopPropagation()},o.onmouseover=function(){i.active&&i.active.item!==t&&i.Cf(o)},n.appendChild(o),i.elements.items.push(o)})},this.Bf=function(){var t=i.Af("item_active");i.elements.items.forEach(function(n){e.Util.removeClass(n,t)}),i.active&&i.active.menu&&i.active.menu.hide(),i.active=null},this.Df=function(e){return!!i.active&&i.active.item===e.data},this.Cf=function(t){if(!i.Df(t)){i.Bf();var n=t.data,o=i.active={};o.item=n,o.div=t;var r=i.Af("item_active");e.Util.addClass(t,r);var a=e.abs(t);if(n.children){o.menu=new e.Menu({items:n.children});var l=a.x;"right"===n.align&&(l+=a.w),o.menu.show(null,{x:l,y:a.y+a.h,align:n.align,windowMargin:i.windowMargin})}e.MenuBar.active=i}},this.init=function(){return this.Ya(),this.S=!0,this},this.dispose=function(){this.S&&(this.nav.top.innerHTML="",this.elements.items=[])}},e.MenuBar.deactivate=function(){e.MenuBar.active&&(e.MenuBar.active.Bf(),e.MenuBar.active=null)},t.menuClean=function(){"undefined"!=typeof e.Menu.active&&e.Menu.active&&(e.Menu.active.hide(),e.Menu.active=null)},t.mouseDown=function(n){"undefined"!=typeof t&&(t.menuClean(),e.MenuBar.deactivate())},t.mouseMove=function(e){"undefined"!=typeof t&&(t.mouse=t.mousePosition(e))},t.touchMove=function(e){"undefined"!=typeof t&&(t.mouse=t.touchPosition(e))},t.touchStart=function(e){"undefined"!=typeof t&&(t.mouse=t.touchPosition(e))},t.touchEnd=function(e){},t.touchPosition=function(e){if(!e||!e.touches)return null;var t=e.touches[0],n={};return n.x=t.pageX,n.y=t.pageY,n},t.mousePosition=function(t){return e.mo3(null,t)},e.Menu.touchPosition=function(e){e.touches&&(t.mouse=t.touchPosition(e))},e.Menu.hide=function(n){if((n=n||{}).calendar){var i=e.Menu.active;if(i){var o=i.A.source;o&&o.calendar===n.calendar&&t.menuClean()}}else t.menuClean()},t.handlersRegistered||(e.re(document,"mousemove",t.mouseMove),e.re(document,"mousedown",t.mouseDown),e.re(document,"touchmove",t.touchMove),e.re(document,"touchstart",t.touchStart),e.re(document,"touchend",t.touchEnd),t.handlersRegistered=!0),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot&&(DayPilot={}),function(e){function t(e,n,i){var o=n.indexOf(".");if(-1!==o){var r=n.substring(0,o);if("__proto__"!==r&&"constructor"!==r){var a=n.substring(o+1),l=e[r];"object"==typeof l&&null!==l||(e[r]={},l=e[r]),t(l,a,i)}}else"__proto__"!==n&&"constructor"!==n&&(e[n]=i)}if(!e.ModalStatic){e.ModalStatic={},e.ModalStatic.list=[],e.ModalStatic.hide=function(){if(this.list.length>0){var e=this.list.pop();e&&e.hide()}},e.ModalStatic.remove=function(t){for(var n=e.ModalStatic.list,i=0;i<n.length;i++)if(n[i]===t)return void n.splice(i,1)},e.ModalStatic.close=function(t){e.ModalStatic.result(t),e.ModalStatic.hide()},e.ModalStatic.result=function(t){var n=e.ModalStatic.list;n.length>0&&(n[n.length-1].result=t)},e.ModalStatic.displayed=function(t){for(var n=e.ModalStatic.list,i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},e.ModalStatic.stretch=function(){if(this.list.length>0){var e=this.list[this.list.length-1];e&&e.stretch()}},e.ModalStatic.last=function(){var t=e.ModalStatic.list;return t.length>0?t[t.length-1]:null};var n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDMxNzMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoxLjg1MTk2ODUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0gMC45NTQxNDgzOCwwLjY4MTYwMzEgNS4wMzkwNjI1LDUuNDExNTM4NiA5LjEyMzk3NjYsMC42ODE2MDMxIgogICAgICAgIC8+CiAgPC9nPgo8L3N2Zz4K",i=new function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.styleSheet||e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e);var t=!!e.styleSheet;return{rules:[],commit:function(){try{t&&(e.styleSheet.cssText=this.rules.join("\n"))}catch(e){}},add:function(n,i,o){if(t)this.rules.push(n+"{"+i+"}");else if(e.sheet.insertRule)"undefined"==typeof o&&(o=e.sheet.cssRules.length),e.sheet.insertRule(n+"{"+i+"}",o);else{if(!e.sheet.addRule)throw"No CSS registration method found";e.sheet.addRule(n,i,o)}}}};i.add(".modal_default_main","border: 10px solid #ccc; max-width: 90%;"),i.add(".modal_default_main:focus","outline: none;"),i.add(".modal_default_content","padding: 10px 0px;"),i.add(".modal_default_inner","padding: 20px;"),i.add(".modal_default_input","padding: 10px 0px;"),i.add(".modal_default_buttons","margin-top: 10px;"),i.add(".modal_default_buttons","padding: 10px 0px;"),i.add(".modal_default_form_item","padding: 10px 0px; position: relative;"),i.add(".modal_default_form_item_level1","border-left: 2px solid #ccc; margin-left: 10px; padding-left: 20px;"),i.add(".modal_default_form_item.modal_default_form_title","font-size: 1.5rem; font-weight: bold;"),i.add(".modal_default_form_item input[type=text]","width: 100%; box-sizing: border-box;"),i.add(".modal_default_form_item textarea","width: 100%; height: 200px; box-sizing: border-box;"),i.add(".modal_default_form_item input[type=select]","width: 100%; box-sizing: border-box;"),i.add(".modal_default_form_item label","display: block;"),i.add(".modal_default_form_item select","width: 100%; box-sizing: border-box;"),i.add(".modal_default_form_item_label","margin: 2px 0px;"),i.add(".modal_default_form_item_image img","max-width: 100%; height: auto;"),i.add(".modal_default_form_item_invalid",""),i.add(".modal_default_form_item_invalid_message","position: absolute; right: 0px; top: 9px; background-color: red; color: #ffffff; padding: 2px; border-radius: 2px;"),i.add(".modal_default_background","opacity: 0.5; background-color: #000;"),i.add(".modal_default_ok","padding: 3px; width: 80px;"),i.add(".modal_default_cancel","padding: 3px; width: 80px;"),i.add(".modal_default_form_item_date","position: relative;"),i.add(".modal_default_form_item_date:after","content: ''; position: absolute; right: 7px; top: 50%; margin-top: 3px; width: 10px; height: 15px; background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojY2NjY2NjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjM4MDM3MzM2O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDE5MjgiCiAgICAgICB3aWR0aD0iOS45MTUzMDYxIgogICAgICAgaGVpZ2h0PSIxMS4zNjkzNyIKICAgICAgIHg9IjAuMTE3MTg3NSIKICAgICAgIHk9Ii0zLjAwOTk5NTciCiAgICAgICByeT0iMS4zMTE4NTA1IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNjY2NjY2M7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNTk4MTQwMTI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MTkzMCIKICAgICAgIHdpZHRoPSIxLjUzNDQxMzYiCiAgICAgICBoZWlnaHQ9IjIuMjE5ODI1IgogICAgICAgeD0iMi4xNTU4NDgzIgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHJ5PSIwLjY3MTc4OTE3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iMS41MjM5NTA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QxOTQ4IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjY3MTc4OTE3IgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHg9IjYuNDUyNzIzNSIKICAgICAgIGhlaWdodD0iMi4yMTk4MjUiCiAgICAgICB3aWR0aD0iMS41MzQ0MTM2IgogICAgICAgaWQ9InJlY3QyMDAzIgogICAgICAgc3R5bGU9ImZpbGw6I2NjY2NjYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS41OTgxNDAxMjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAwNSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIHk9Ii0xLjE2NTg0NjYiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iNi45OTI3MDA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDA3IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAxMyIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjEuNTIzOTUwNiIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHJ5PSIwLjI5NjAxNDciIC8+CiAgICA8cmVjdAogICAgICAgcnk9IjAuMjk2MDE0NyIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGlkPSJyZWN0MjAxNSIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDIwMTciCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB4PSI2Ljk5MjcwMDYiCiAgICAgICB5PSIxLjgwMjkwMzQiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSI0LjczMjU5MDciCiAgICAgICB4PSIxLjU2MzAxMzEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBpZD0icmVjdDIwMTkiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3QyMDIxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgeD0iNC4yNTgzMjU2IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgcnk9IjAuMjk2MDE0NyIgLz4KICAgIDxyZWN0CiAgICAgICByeT0iMC4yOTYwMTQ3IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgeD0iNy4wMzE3NjMxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDIzIgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDwvZz4KPC9zdmc+Cg==)"),-1!==navigator.userAgent.indexOf("Edge")&&i.add(".modal_default_form_item_date input::-ms-clear","display: none;"),i.add(".modal_default_form_item_scrollable_scroll","width: 100%; height: 200px; box-sizing: border-box; border: 1px solid #ccc; overflow-y: auto;"),i.add(".modal_default_form_item_scrollable_scroll_content","padding: 5px;"),i.add(".modal_default_form_item_searchable","position: relative;"),i.add(".modal_default_form_item_searchable_icon",""),i.add(".modal_default_form_item_searchable_icon:after","content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url("+n+");"),i.add(".modal_default_form_item_searchable_list","box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;"),i.add(".modal_default_form_item_searchable_list_item","background: white; padding: 2px; cursor: default;"),i.add(".modal_default_form_item_searchable_list_item_highlight","background: #ccc;"),i.add(".modal_default_form_item_time","position: relative;"),i.add(".modal_default_form_item_time_icon",""),i.add(".modal_default_form_item_time_icon:after","content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url("+n+");"),i.add(".modal_default_form_item_time_list","box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;"),i.add(".modal_default_form_item_time_list_item","background: white; padding: 2px; cursor: default;"),i.add(".modal_default_form_item_time_list_item_highlight","background: #ccc;"),i.add(".modal_default_form_item_datetime_parent","display: flex;"),i.add(".modal_default_form_item_datetime .modal_default_form_item_time_main","margin-left: 5px;"),i.add(".modal_default_form_item_datetime input[type='text'].modal_default_input_date ",""),i.add(".modal_default_form_item_tabular_main","margin-top: 10px;"),i.add(".modal_default_form_item_tabular_table","display: table; width: 100%; xbackground-color: #fff; border-collapse: collapse;"),i.add(".modal_default_form_item_tabular_tbody","display: table-row-group;"),i.add(".modal_default_form_item_tabular_row","display: table-row;"),i.add(".modal_default_form_item_tabular_row.modal_default_form_item_tabular_header",""),i.add(".modal_default_form_item_tabular_cell.modal_default_form_item_tabular_rowaction","padding: 0px; width: 23px;"),i.add(".modal_default_form_item_tabular_cell","display: table-cell; border: 0px; padding: 2px 2px 2px 0px; cursor: default; vertical-align: bottom;"),i.add(".modal_default_form_item_tabular_header .modal_default_form_item_tabular_cell","padding-left: 0px; padding-bottom: 0px;"),i.add(".modal_default_form_item_tabular_table input[type=text], .modal_default_form_item_tabular_table input[type=number]","width:100%; box-sizing: border-box;"),i.add(".modal_default_form_item_tabular_table select","width:100%; height:100%; box-sizing: border-box;"),i.add(".modal_default_form_item_tabular_plus","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"),i.add(".modal_default_form_item_tabular_plus:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSA1LjAgMC41IEwgNS4wIDkuNSBNIDAuNSA1LjAgTCA5LjUgNS4wJyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"),i.add(".modal_default_form_item_tabular_delete","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"),i.add(".modal_default_form_item_tabular_delete:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgOS41IDkuNSBNIDAuNSA5LjUgTCA5LjUgMC41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"),i.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_plus","display: none;"),i.add(".modal_default_form_item_tabular_plus_max.modal_default_form_item_tabular_plus","display: none;"),i.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_delete","visibility: hidden;"),i.add(".modal_default_form_item_tabular_empty","height: 1px; margin: 5px 23px 5px 0px; background-color: #ccc;"),i.add(".modal_default_form_item_tabular_spacer .modal_default_form_item_tabular_cell","padding: 0px;"),i.add(".modal_min_main","border: 1px solid #ccc; max-width: 90%;"),i.add(".modal_min_background","opacity: 0.5; background-color: #000;"),i.add(".modal_min_ok","padding: 3px 10px;"),i.add(".modal_min_cancel","padding: 3px 10px;"),i.add(".navigator_modal_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"),i.add(".navigator_modal_main *, .navigator_modal_main *:before, .navigator_modal_main *:after","box-sizing: content-box;"),i.add(".navigator_modal_month","font-size: 11px;"),i.add(".navigator_modal_day","color: black;"),i.add(".navigator_modal_weekend","background-color: #f0f0f0;"),i.add(".navigator_modal_dayheader","color: black;"),i.add(".navigator_modal_line","border-bottom: 1px solid #c0c0c0;"),i.add(".navigator_modal_dayother","color: gray;"),i.add(".navigator_modal_todaybox","border: 1px solid red;"),i.add(".navigator_modal_title, .navigator_modal_titleleft, .navigator_modal_titleright","border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"),i.add(".navigator_modal_busy","font-weight: bold;"),i.add(".navigator_modal_cell","text-align: center;"),i.add(".navigator_modal_select .navigator_modal_cell_box","background-color: #FFE794; opacity: 0.5;"),i.add(".navigator_modal_title","text-align: center;"),i.add(".navigator_modal_titleleft, .navigator_modal_titleright","text-align: center;"),i.add(".navigator_modal_dayheader","text-align: center;"),i.add(".navigator_modal_weeknumber","text-align: center;"),i.add(".navigator_modal_cell_text","cursor: pointer;"),i.commit(),e.Modal=function(t){this.autoFocus=!0,this.focus=null,this.autoStretch=!0,this.autoStretchFirstLoadOnly=!1,this.className=null,this.theme="modal_default",this.disposeOnClose=!0,this.dragDrop=!0,this.loadingHtml=null,this.maxHeight=null,this.scrollWithPage=!0,this.useIframe=!0,this.zIndex=99999,this.left=null,this.width=600,this.top=20,this.height=200,this.locale=null,this.closed=null,this.onClose=null,this.onClosed=null,this.onShow=null;var n=this;this.id="_"+(new Date).getTime()+"n"+10*Math.random(),this.Ef=!1,this.Ff=null,this.Gf=null,this.showHtml=function(t){if(e.ModalStatic.displayed(this))throw"This modal dialog is already displayed.";this.div||this.Hf(),this.Jc(),this.useIframe?window.setTimeout(function(e,t){return function(){e.setInnerHTML(e.id+"iframe",t)}}(this,t),0):t.nodeType?this.div.appendChild(t):this.div.innerHTML=t,this.Jc(),this.If(),this.Jf()},this.showUrl=function(t){if(e.ModalStatic.displayed(this))throw"This modal dialog is already displayed.";if(this.useIframe){this.div||this.Hf();var i=this.loadingHtml;i&&(this.iframe.src="about:blank",this.setInnerHTML(this.id+"iframe",i)),this.re(this.iframe,"load",this.Kf),this.iframe.src=t,this.Jc(),this.If(),this.Jf()}else n.Lf({url:t,success:function(e){n.showHtml(e.request.responseText)},error:function(e){n.showHtml("Error loading the modal dialog")}})},this.Jf=function(){if("function"==typeof n.onShow){var e={};e.root=n.Mf(),e.modal=n,n.onShow(e)}},this.Mf=function(){return n.iframe?n.iframe.contentWindow.document:n.div},this.Lf=function(e){var t=new XMLHttpRequest;if(t){var n=e.success||function(){},i=e.error||function(){},o=e.data;t.open(e.method||"GET",e.url,!0),t.setRequestHeader("Content-type","text/plain"),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status||304===t.status)(e={}).request=t,n(e);else if(i){var e;(e={}).request=t,i(e)}else window.console&&console.log("HTTP error "+t.status)},4!==t.readyState&&("object"==typeof o&&(o=JSON.stringify(o)),t.send(o))}},this.Jc=function(){delete this.result;var t=window,i=document,o=t.pageYOffset?t.pageYOffset:i.documentElement&&i.documentElement.scrollTop?i.documentElement.scrollTop:i.body.scrollTop;this.theme&&(this.hideDiv.className=this.theme+"_background"),this.zIndex&&(this.hideDiv.style.zIndex=this.zIndex),this.hideDiv.style.display="",window.setTimeout(function(){n.hideDiv&&(n.hideDiv.onclick=function(){n.hide({backgroundClick:!0})})},500),this.div.className=this.theme?this.theme+"_main":"",this.className&&(this.div.className+=" "+this.className),this.left?this.div.style.left=this.left+"px":this.div.style.marginLeft="-"+Math.floor(this.width/2)+"px",this.div.style.position="absolute",this.div.style.boxSizing="content-box",this.div.style.top=o+this.top+"px",this.div.style.width=this.width+"px",this.zIndex&&(this.div.style.zIndex=this.zIndex),this.height&&(this.div.style.height=this.useIframe||!this.autoStretch?this.height+"px":""),this.useIframe&&this.height&&(this.iframe.style.height=this.height+"px"),this.div.style.display="",this.Of(),e.ModalStatic.remove(this),e.ModalStatic.list.push(this)},this.Kf=function(){n.iframe.contentWindow.modal=n,n.autoStretch&&n.stretch()},this.stretch=function(){if(this.useIframe){for(var e=n.Nf().x-40,t=this.width;t<e&&this.Pf();t+=10)this.div.style.width=t+"px",this.div.style.marginLeft="-"+Math.floor(t/2)+"px";for(var i=this.maxHeight||n.Nf().y-2*this.top,o=this.height;o<i&&this.Qf();o+=10)this.iframe.style.height=o+"px",this.div.style.height=o+"px";this.autoStretchFirstLoadOnly&&this.ue(this.iframe,"load",this.Kf)}else this.div.style.height=""},this.Pf=function(){for(var e=this.iframe.contentWindow.document,t="BackCompat"===e.compatMode?e.body:e.documentElement,n=t.scrollWidth,i=e.body.children,o=0;o<i.length;o++)n=Math.max(n,i[o].offsetLeft+i[o].offsetWidth);return n>t.clientWidth},this.Qf=function(){for(var e=this.iframe.contentWindow.document,t="BackCompat"===e.compatMode?e.body:e.documentElement,n=t.scrollHeight,i=e.body.children,o=0;o<i.length;o++)n=Math.max(n,i[o].offsetTop+i[o].offsetHeight);return n>t.clientHeight},this.Nf=function(){var e=document;return"CSS1Compat"===e.compatMode&&e.documentElement&&e.documentElement.clientWidth?{x:e.documentElement.clientWidth,y:e.documentElement.clientHeight}:{x:e.body.clientWidth,y:e.body.clientHeight}},this.If=function(){this.Ef||(this.re(window,"resize",this.Rf),this.re(window,"scroll",this.Sf),this.dragDrop&&(this.re(document,"mousemove",this.Tf),this.re(document,"mouseup",this.Uf)),this.Ef=!0)},this.Vf=function(){this.ue(window,"resize",this.Rf),this.ue(window,"scroll",this.Sf),this.dragDrop&&(this.ue(document,"mousemove",this.Tf),this.ue(document,"mouseup",this.Uf)),this.Ef=!1},this.Wf=function(e){e.target===n.div&&(e.preventDefault(),n.div.style.cursor="move",n.Xf(),n.Gf=n.mc(e||window.event),n.Ff={x:n.div.offsetLeft,y:n.div.offsetTop})},this.Tf=function(e){if(n.Gf){e=e||window.event;var t=n.mc(e),i=t.x-n.Gf.x,o=t.y-n.Gf.y;n.div.style.marginLeft="0px",n.div.style.top=n.Ff.y+o+"px",n.div.style.left=n.Ff.x+i+"px"}},this.Uf=function(e){n.Gf&&(n.Yf(),n.div.style.cursor=null,n.Gf=null)},this.Xf=function(){if(this.useIframe){var e=document.createElement("div");e.style.backgroundColor="#ffffff",e.style.filter="alpha(opacity=80)",e.style.opacity="0.80",e.style.width="100%",e.style.height=this.height+"px",e.style.position="absolute",e.style.left="0px",e.style.top="0px",this.div.appendChild(e),this.mask=e}},this.Yf=function(){this.useIframe&&(this.div.removeChild(this.mask),this.mask=null)},this.Rf=function(){n.Zf(),n.Of()},this.Sf=function(){n.Zf()},this.Of=function(){!n.left&&n.div&&(n.div.style.marginLeft="-"+Math.floor(n.div.offsetWidth/2)+"px")},this.Zf=function(){if(n.hideDiv&&n.div&&"none"!==n.hideDiv.style.display&&"none"!==n.div.style.display){var e=n.$f.scrollY();n.scrollWithPage||(n.div.style.top=e+n.top+"px")}},this.$f={},this.$f.container=function(){return n.container||document.body},this.$f.scrollY=function(){var e=n.$f.container();return e===document.body?window.pageYOffset?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop:e.scrollTop},this.re=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},this.ue=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},this.mc=function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},this.abs=function(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e.offsetParent;)t.x+=(e=e.offsetParent).offsetLeft,t.y+=e.offsetTop;return t},this.Hf=function(){var e=n.$f.container(),t=e===document.body?"fixed":"absolute",i=document.createElement("div");i.id=this.id+"hide",i.style.position=t,i.style.left="0px",i.style.top="0px",i.style.right="0px",i.style.bottom="0px",i.oncontextmenu=function(){return!1},i.onmousedown=function(){return!1},e.appendChild(i);var o=document.createElement("div");o.id=this.id+"popup",o.style.position=t,o.style.left="50%",o.style.top="0px",o.style.backgroundColor="white",o.style.width="50px",o.style.height="50px",this.dragDrop&&(o.onmousedown=this.Wf),o.addEventListener("keydown",function(e){e.stopPropagation()});var r=null;this.useIframe&&((r=document.createElement("iframe")).id=this.id+"iframe",r.name=this.id+"iframe",r.frameBorder="0",r.style.width="100%",r.style.height="50px",o.appendChild(r)),e.appendChild(o),this.div=o,this.iframe=r,this.hideDiv=i},this.setInnerHTML=function(e,t){var i=window.frames[e],o=i.contentWindow||i.document||i.contentDocument;o.document&&(o=o.document),null==o.body&&o.write("<body></body>"),t.nodeType?o.body.appendChild(t):o.body.innerHTML=t,n.autoStretch&&(n.autoStretchFirstLoadOnly&&n._f||(n.stretch(),n._f=!0))},this.close=function(e){this.result=e,this.hide()},this.closeSerialized=function(){for(var e=n.Mf().querySelectorAll("input, textarea, select"),t={},i=0;i<e.length;i++){var o=e[i],r=o.name;r&&(t[r]=o.value)}n.close(t)},this.hide=function(t){var i={};i.backgroundClick=!!(t=t||{}).backgroundClick,i.result=this.result,i.canceled="undefined"==typeof this.result,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof this.onClose&&(this.onClose(i),i.preventDefault.value)||(this.div&&(this.div.style.display="none",this.hideDiv.style.display="none",this.useIframe||(this.div.innerHTML=null)),window.focus(),e.ModalStatic.remove(this),"function"==typeof this.onClosed?this.onClosed(i):this.closed&&this.closed(),delete this.result,this.disposeOnClose&&(n.Vf(),n.ag(n.div),n.ag(n.hideDiv),n.div=null,n.hideDiv=null,n.iframe=null))},this.ag=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},this.bg=function(){if(t)for(var e in t)this[e]=t[e]},this.bg()},e.Modal.alert=function(t,n){(n=n||{}).height=n.height||40,n.useIframe=!1;var i=n.okText||"OK";return e.getPromise(function(o,r){n.onClosed=function(e){o(e)};var a=new e.Modal(n),l=document.createElement("div");l.className=a.theme+"_inner";var s=document.createElement("div");s.className=a.theme+"_content",s.innerHTML=t;var d=document.createElement("div");d.className=a.theme+"_buttons";var c=document.createElement("button");c.innerText=i,c.className=a.theme+"_ok",c.onclick=function(t){e.ModalStatic.close("OK")},d.appendChild(c),l.appendChild(s),l.appendChild(d),a.showHtml(l),a.autoFocus&&c.focus()})},e.Modal.confirm=function(t,n){(n=n||{}).height=n.height||40,n.useIframe=!1;var i=n.okText||"OK",o=n.cancelText||"Cancel";return e.getPromise(function(r,a){n.onClosed=function(e){r(e)};var l=new e.Modal(n),s=document.createElement("div");s.className=l.theme+"_inner";var d=document.createElement("div");d.className=l.theme+"_content",d.innerHTML=t;var c=document.createElement("div");c.className=l.theme+"_buttons";var u=document.createElement("button");u.innerText=i,u.className=l.theme+"_ok",u.onclick=function(t){e.ModalStatic.close("OK")};var h=document.createTextNode(" "),p=document.createElement("button");p.innerText=o,p.className=l.theme+"_cancel",p.onclick=function(t){e.ModalStatic.close()},c.appendChild(u),c.appendChild(h),c.appendChild(p),s.appendChild(d),s.appendChild(c),l.showHtml(s),l.autoFocus&&u.focus()})},e.Modal.prompt=function(t,n,i){"object"==typeof n&&(i=n,n=""),(i=i||{}).height=i.height||40,i.useIframe=!1;var o=i.okText||"OK",r=i.cancelText||"Cancel",a=n||"";return e.getPromise(function(n,l){i.onClosed=function(e){n(e)};var s=new e.Modal(i),d=document.createElement("div");d.className=s.theme+"_inner";var c=document.createElement("div");c.className=s.theme+"_content",c.innerHTML=t;var u=document.createElement("div");u.className=s.theme+"_input";var h=document.createElement("input");h.value=a,h.style.width="100%",h.onkeydown=function(e){var t=!1;switch(e.keyCode){case 13:s.close(this.value);break;case 27:s.close();break;default:t=!0}t||(e.preventDefault(),e.stopPropagation())},u.appendChild(h);var p=document.createElement("div");p.className=s.theme+"_buttons";var f=document.createElement("button");f.innerText=o,f.className=s.theme+"_ok",f.onclick=function(e){s.close(h.value)};var g=document.createTextNode(" "),m=document.createElement("button");m.innerText=r,m.className=s.theme+"_cancel",m.onclick=function(e){s.close()},p.appendChild(f),p.appendChild(g),p.appendChild(m),d.appendChild(c),d.appendChild(u),d.appendChild(p),s.showHtml(d),s.autoFocus&&h.focus()})},e.Modal.form=function(n,i,r){if(1===arguments.length){var a=n;if("[object Array]"===Object.prototype.toString.call(a))i={};else{if("object"!=typeof a)throw"Invalid DayPilot.Modal.form() parameter";for(var l in i=n,n=[],i){var s={};s.name=l,s.id=l,n.push(s)}}}var d={};for(var l in r)d[l]=r[l];d.height=d.height||40,d.useIframe=!1;var c=d.okText||"OK",u=d.cancelText||"Cancel";return e.getPromise(function(r,a){d.onClosed=function(e){if(e.result){var n=JSON.parse(JSON.stringify(i));for(var o in e.result)t(n,o,e.result[o]);e.result=n}r(e)};var l=new e.Modal(d),s=document.createElement("div");s.className=l.theme+"_inner";var h=document.createElement("div");h.className=l.theme+"_input";var p=new o({theme:l.theme,form:n,data:i,zIndex:l.zIndex,locale:l.locale,plugins:l.plugins,onKey:function(e){switch(e.key){case"Enter":p.validate()&&l.close(p.serialize());break;case"Escape":l.close()}},onChange:function(e){"function"==typeof l.onChange&&l.onChange(e)}}),f=p.create();h.append(f);var g=document.createElement("div");g.className=l.theme+"_buttons";var m=document.createElement("button");m.innerText=c,m.className=l.theme+"_ok",d.okDisabled&&(m.disabled=!0),m.onclick=function(e){p.validate()&&l.close(p.serialize())};var v=document.createTextNode(" "),y=document.createElement("button");if(y.innerText=u,y.className=l.theme+"_cancel",y.onclick=function(e){l.close()},y.onmousedown=function(e){p.canceling=!0},g.appendChild(m),g.appendChild(v),g.appendChild(y),s.appendChild(h),s.appendChild(g),l.showHtml(s),l.div.setAttribute("tabindex","-1"),l.div.addEventListener("keydown",function(e){switch(e.keyCode){case 27:l.close();break;case 13:p.validate()&&l.close(p.serialize())}}),l.focus){var b=null;"object"==typeof l.focus?b=p.findViewById(l.focus.id,l.focus.value):"string"==typeof l.focus&&(b=p.findViewById(l.focus)),b&&b.focus()}else{var w=p.firstFocusable();l.autoFocus&&w?w.focus():l.div.focus()}})},e.Modal.close=function(t){var n=e.Modal.opener();n&&n.close(t)},e.Modal.stretch=function(t){var n=e.Modal.opener();if(!n)throw"Unable to find the opener DayPilot.Modal instance.";n.stretch()},e.Modal.closeSerialized=function(){var t=e.Modal.opener()||e.ModalStatic.last();t&&t.closeSerialized()},e.Modal.opener=function(){return"undefined"!=typeof e&&"undefined"!=typeof e.ModalStatic&&e.ModalStatic.list.length>0?e.ModalStatic.list[e.ModalStatic.list.length-1]:parent&&parent.DayPilot&&parent.DayPilot.ModalStatic&&parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length-1]},e.Modal.Experimental={},e.Modal.Experimental.Form=o,"undefined"==typeof e.getPromise&&(e.getPromise=function(t){return"undefined"!=typeof Promise?new Promise(t):(e.Promise=function(t){var n=this;this.then=function(n,i){return t(n=n||function(){},i=i||function(){}),e.getPromise(t)},this.catch=function(i){return n.then(null,i),e.getPromise(t)}},new e.Promise(t))});var o=function(e){for(var t in this.form=[],this.data={},this.theme="form_default",this.zIndex=99999,this.locale="en-us",this.plugins={},this.onKey=null,this.cg=[],this.dg=null,this.canceling=!1,this.eg=[],this.fg=[],this.c=null,e=e||{})this[t]=e[t]};o.prototype.create=function(){return this.load(),this.render(),this.c},o.prototype.render=function(){var e=this;this.c=document.createElement("div"),this.cg.forEach(function(t){e.createView(t)}),this.applyState()},o.prototype.createView=function(e){var t=this.theme,n=this,i=document.createElement("div");if(i.className=t+"_form_item "+t+"_form_item_level"+e.level,i.className+=e.interactive||"title"!==e.type?" "+t+"_form_item_"+e.type:" "+t+"_form_title",e.data.cssClass&&(i.className+=" "+e.data.cssClass),!e.isValue){var o=document.createElement("div");o.className=t+"_form_item_label",o.innerText=e.text,i.appendChild(o)}var r=this.createInteractive(e);r.onInput=function(e){if(n.gg(r,{debounce:!(e=e||{}).immediate}),"function"==typeof n.onChange){var t={};t.result=n.serialize(),n.onChange(t)}},r.onBlur=function(){n.canceling||n.gg(r)},r.apply(e),r.c=i,r.row=e,r.element&&i.appendChild(r.element),this.fg.push(r),this.c.appendChild(i)},o.prototype.validate=function(){var e=this,t=!0;return this.fg.forEach(function(n){var i=e.gg(n);t=t&&i}),t},o.prototype.gg=function(e,t){function n(){e.hg&&(e.hg.remove(),e.hg=null),e.c.classList.add(d);var t=document.createElement("div");t.classList.add(c),t.innerText=s.message,e.hg=t,e.c.appendChild(t)}var i=(t=t||{}).debounce,o=t.silent,r=e.row,a=!0,l=("function"==typeof r.data.onValidate?r.data.onValidate:null)||("function"==typeof r.data.validate?r.data.validate:null);if(l){var s={valid:!0};s.value=e.save()[r.field],s.message="Error",s.values=this.serialize(),s.result=this.serialize(),l(s);var d=this.theme+"_form_item_invalid",c=this.theme+"_form_item_invalid_message";s.valid?(clearTimeout(this.eg[r.field]),e.hg&&(e.hg.remove(),e.hg=null),e.c.classList.remove(d)):o||(i?(clearTimeout(this.eg[r.field]),this.eg[r.field]=setTimeout(function(){n()},1e3)):n()),a=s.valid}return a},o.prototype.load=function(){var e,t=this;this.form.forEach(function(e){t.processFormItem(e,0)});try{var n=JSON.stringify(this.data);e=function e(t,n,i){for(var o in n=n||{},i=i||"",t){var r=t[o];"object"==typeof r?"[object Array]"===Object.prototype.toString.call(r)?n[i+o]=r:r&&r.toJSON?n[i+o]=r.toJSON():e(r,n,i+o+"."):n[i+o]=r}return n}(JSON.parse(n))}catch(t){throw new Error("The 'data' object is not serializable (it may contain circular dependencies): "+t)}for(var i in e)this.setValue(i,e[i])},o.prototype.setValue=function(e,t){this.cg.forEach(function(n){n.applyValue(e,t)})},o.prototype.updateDependentState=function(){var e=this,t=[!0];(this.dg?this.dg:this.cg).forEach(function(n){var i=e.updateState(n,{enabled:t[n.level]&&!n.data.disabled});i.isValue&&(t[i.level+1]=i.enabled&&i.checked)})},o.prototype.processFormItem=function(e,t){var n=this,i=this.getFieldType(e),o=[];if("radio"===i)e.name&&((a=new r).field=e.id,a.data=e,a.level=t,a.type="label",a.interactive=!1,a.text=e.name,n.cg.push(a),o.push(a)),e.options.forEach(function(a){var l=new r;l.field=e.id,l.data=a,l.level=t,l.type=i,l.isValue=!0,l.text=a.name,l.resolved=a.id,n.cg.push(l),o.push(l),a.children&&a.children.forEach(function(e){var i=n.processFormItem(e,t+1);o=o.concat(i)})});else if("title"===i)(a=new r).field=e.id,a.data=e,a.level=t,a.type=i,a.interactive=!1,a.text=e.name,n.cg.push(a),o.push(a);else if("image"===i)(a=new r).isValue=!0,a.field=e.id,a.data=e,a.level=t,a.type=i,a.interactive=!1,a.text=null,n.cg.push(a),o.push(a);else if("html"===i)(a=new r).isValue=!0,a.field=e.id,a.data=e,a.level=t,a.type=i,a.interactive=!1,a.text=null,n.cg.push(a),o.push(a);else if("scrollable"===i)(a=new r).isValue=!0,a.field=e.id,a.data=e,a.level=t,a.type=i,a.interactive=!1,a.text=null,n.cg.push(a),o.push(a);else{var a;(a=new r).field=e.id,a.data=e,a.level=t,a.type=i,a.text=e.name,a.children=[],n.cg.push(a),o.push(a)}return"checkbox"===i&&(a.isValue=!0,a.resolved=!0,e.children&&e.children.forEach(function(e){var i=n.processFormItem(e,t+1);o=o.concat(i)})),o},o.prototype.doOnKey=function(e){"function"==typeof this.onKey&&this.onKey({key:e})},o.prototype.createInteractive=function(t){var n=this,i={label:function(){return new a},title:function(){return new a},image:function(){var e=new a,n=document.createElement("img");return n.src=t.data.image,e.element=n,e},html:function(){var e=new a,n=document.createElement("div");return"string"==typeof t.data.text?n.innerText=t.data.text:"string"==typeof t.data.html&&(n.innerHTML=t.data.html),e.element=n,e},scrollable:function(){var e=new a,i=document.createElement("div");i.className=n.theme+"_form_item_scrollable_scroll",t.data.height&&(i.style.height=t.data.height+"px");var o=document.createElement("div");return o.className=n.theme+"_form_item_scrollable_scroll_content","string"==typeof t.data.text?o.innerText=t.data.text:"string"==typeof t.data.html&&(o.innerHTML=t.data.html),i.appendChild(o),e.element=i,e},text:function(){var e=new a;e.apply=function(t){e.row=t;var n=e.element;n.value=t.value,n.disabled=!t.enabled};var i=document.createElement("input");return i.name=t.field,i.type="text",i.autocomplete="off",i.onkeydown=function(e){var t=!1;switch(e.keyCode){case 13:n.doOnKey("Enter");break;case 27:n.doOnKey("Escape");break;default:t=!0}t||(e.preventDefault(),e.stopPropagation())},i.oninput=function(t){e.onInput()},i.onblur=function(t){e.onBlur()},e.element=i,e.canFocus=function(){return!e.element.disabled},e.focus=function(){e.element.focus(),e.element.setSelectionRange(0,e.element.value.length)},e.save=function(){var e={};return e[t.field]=i.value,e},e},textarea:function(){var e=new a;e.apply=function(t){e.row=t;var n=e.element;n.value=t.value,n.disabled=!t.enabled};var i=document.createElement("textarea");return i.name=t.field,t.data.height&&(i.style.height=t.data.height+"px"),i.onkeydown=function(e){var t=!1;switch(e.keyCode){case 13:(e.ctrlKey||e.metaKey)&&n.doOnKey("Enter"),t=!1;break;case 27:n.doOnKey("Escape");break;default:t=!0}t||e.stopPropagation()},i.oninput=function(t){e.onInput()},i.onblur=function(t){e.onBlur()},e.element=i,e.canFocus=function(){return!e.element.disabled},e.focus=function(){e.element.focus(),e.element.setSelectionRange(0,0)},e.save=function(){var e={};return e[t.field]=i.value,e},e},date:function(){var i=new a;i.apply=function(t){i.row=t;var o=i.element,r=i.picker;t.data.dateFormat&&(r.pattern=t.data.dateFormat);var a=t.data.locale||n.locale;a&&(r.locale=a),o.disabled=!t.enabled,r.date=new e.Date(t.value);var l=new e.Date(t.value).toString(t.data.dateFormat||r.pattern,r.locale);o.value=l};var o=document.createElement("input");o.name=t.field;var r=new e.DatePicker({target:o,theme:"navigator_modal",zIndex:n.zIndex+1,resetTarget:!1,targetAlignment:"left",onTimeRangeSelect:function(e){i.onInput({immediate:!0})}});return o.picker=r,o.className=n.theme+"_input_date",o.type="text",o.onkeydown=function(e){var t=!1;switch(e.keyCode){case 13:r.visible?r.close():n.doOnKey("Enter");break;case 27:r.visible?r.close():n.doOnKey("Escape");break;case 9:r.close(),t=!0;break;default:t=!0}t||(e.preventDefault(),e.stopPropagation())},o.onfocus=function(){r.show()},o.onclick=function(){r.show()},o.oninput=function(e){i.onInput()},o.onblur=function(e){i.onBlur()},i.element=o,i.picker=r,i.canFocus=function(){return!i.element.disabled},i.focus=function(){i.element.focus()},i.save=function(){var e=r.date?r.date.toString():null,n={};return n[t.field]=e,n},i},time:function(){return n.ig(t)},datetime:function(){return n.jg(t)},select:function(){var e=new a;e.apply=function(t){e.row=t;var n=e.element;n.value=t.value,n.disabled=!t.enabled};var n=document.createElement("select");return n.name=t.field,t.data.options&&t.data.options.forEach&&t.data.options.forEach(function(e){var t=document.createElement("option");t.innerText=e.name||e.id,t.value=e.id,t.kg=e.id,n.appendChild(t)}),n.onchange=function(t){e.onInput({immediate:!0})},n.onblur=function(t){e.onBlur()},e.element=n,e.canFocus=function(){return!e.element.disabled},e.focus=function(){e.element.focus()},e.save=function(){var e=null,i=n.options[n.selectedIndex];i&&"undefined"!=typeof i.kg&&(e=i.kg);var o={};return o[t.field]=e,o},e},searchable:function(){var e=new a;e.apply=function(t){e.row=t;var n=e.searchable;n.disabled=!t.enabled,n.select(t.value)};var i=new l({data:t.data.options||[],name:t.field,theme:n.theme+"_form_item_searchable",listZIndex:n.zIndex+1,onSelect:function(t){t.ui&&e.onInput({immediate:!0})}}),o=i.create();return e.element=o,e.searchable=i,e.canFocus=function(){return!e.searchable.disabled},e.focus=function(){e.searchable.focus()},e.save=function(){var e={};return e[t.field]=i.selected&&i.selected.id,e},e},radio:function(){var e=new a;e.apply=function(t){e.row=t;var n=e.radio;n.checked=t.checked,n.disabled=!t.enabled};var i=document.createElement("label"),o=document.createElement("input");o.type="radio",o.name=t.field,o.kg=t.resolved,o.onchange=function(t){var i=e.row;n.findRowsByField(i.field).forEach(function(e){n.updateState(e,{checked:!1})}),n.updateState(i,{checked:!0}),n.applyState(),e.onInput({immediate:!0})},o.onblur=function(t){e.onBlur()},i.appendChild(o);var r=document.createTextNode(t.text);return i.append(r),e.element=i,e.radio=o,e.canFocus=function(){return!1},e.focus=function(){e.radio.focus()},e.save=function(){if(!o.checked)return{};var e={};return e[t.field]=o.kg,e},e},checkbox:function(){var e=new a;e.apply=function(t){e.row=t;var n=e.checkbox;n.checked=t.checked,n.disabled=!t.enabled};var i=document.createElement("label"),o=document.createElement("input");o.type="checkbox",o.name=t.field,o.kg=t.resolved,o.onchange=function(t){n.updateState(e.row,{checked:this.checked}),n.applyState(),e.onInput({immediate:!0})},o.onblur=function(t){e.onBlur()},i.appendChild(o);var r=document.createTextNode(t.text);return i.append(r),e.element=i,e.checkbox=o,e.canFocus=function(){return!1},e.focus=function(){e.checkbox.focus()},e.save=function(){var e={};return e[t.field]=o.checked,e},e},table:function(){var e=new a;e.apply=function(t){e.row=t;var n=e.table;n.disabled=!t.enabled,n.load(t.value||[])};var i=new s({name:t.field,form:n,theme:n.theme+"_form_item_tabular",item:t.data,onInput:function(t){e.onInput()}}),o=i.create();return e.element=o,e.table=i,e.canFocus=function(){return!1},e.focus=function(){e.table.focus()},e.save=function(){var e=i.save(),n={};return n[t.field]=e,n},e}};return n.plugins&&n.plugins[t.type]?n.plugins[t.type](t):i[t.type]()},o.prototype.ig=function(t){var n=this,i=new a;i.apply=function(e){i.row=e;var t=i.searchable;t.disabled=!e.enabled,t.select(e.value)};var o=[],r=t.data.timeInterval||15;[1,5,10,15,20,30,60].includes(r)||(r=15);for(var s=60/r,d=e.Locale.find(t.data.locale||n.locale)||e.Locale.US,c=e.Date.today(),u=0;u<24*s;u++){var h=c.addMinutes(r*u),p={};p.name=h.toString(t.data.timeFormat||d.timePattern,d),p.id=h.toString("HH:mm"),o.push(p)}var f=new l({data:o,name:t.field,theme:n.theme+"_form_item_time",listZIndex:n.zIndex+1,strategy:"startsWith",onSelect:function(e){e.ui&&i.onInput({immediate:!0})}}),g=f.create();return i.element=g,i.searchable=f,i.canFocus=function(){return!i.searchable.disabled},i.focus=function(){i.searchable.focus()},i.save=function(){var e={};return e[t.field]=f.selected&&f.selected.id,e},i},o.prototype.jg=function(t){var n=this,i=new a;i.apply=function(t){i.row=t;var o=i.searchable;o.disabled=!t.enabled;var r=new e.Date(t.value).toString("HH:mm");o.select(r);var a=i.dateInput,l=i.picker;t.data.dateFormat&&(l.pattern=t.data.dateFormat);var s=t.data.locale||n.locale;if(s){var d=e.Locale.find(s)||e.Locale.US;l.locale=s,l.pattern=d.datePattern}a.disabled=!t.enabled,l.date=new e.Date(t.value);var c=new e.Date(t.value).toString(t.data.dateFormat||l.pattern,l.locale);a.value=c};var o=function(){var o=document.createElement("input");o.name=t.field;var r=new e.DatePicker({target:o,theme:"navigator_modal",zIndex:n.zIndex+1,resetTarget:!1,targetAlignment:"left",onTimeRangeSelect:function(e){i.onInput({immediate:!0})}});return o.picker=r,o.className=n.theme+"_input_date",o.type="text",o.onkeydown=function(e){var t=!1;switch(e.keyCode){case 13:r.visible?r.close():n.doOnKey("Enter");break;case 27:r.visible?r.close():n.doOnKey("Escape");break;case 9:r.close(),t=!0;break;default:t=!0}t||(e.preventDefault(),e.stopPropagation())},o.onfocus=function(){r.show()},o.onclick=function(){r.show()},o.oninput=function(e){i.onInput()},o.onblur=function(e){i.onBlur()},i.dateInput=o,i.picker=r,o}(),r=function(){var o=[],r=t.data.timeInterval||15;[1,5,10,15,20,30,60].includes(r)||(r=15);for(var a=60/r,s=e.Locale.find(t.data.locale||n.locale)||e.Locale.US,d=e.Date.today(),c=0;c<24*a;c++){var u=d.addMinutes(r*c),h={};h.name=u.toString(t.data.timeFormat||s.timePattern,s),h.id=u.toString("HH:mm"),o.push(h)}var p=new l({data:o,name:t.field,theme:n.theme+"_form_item_time",listZIndex:n.zIndex+1,strategy:"startsWith",onSelect:function(e){e.ui&&i.onInput({immediate:!0})}});return i.searchable=p,p.create()}(),s=document.createElement("div");return s.className=n.theme+"_form_item_datetime_parent",s.appendChild(o),s.appendChild(r),i.element=s,i.canFocus=function(){return!i.searchable.disabled},i.focus=function(){i.dateInput.focus()},i.save=function(){var n=i.searchable.selected&&i.searchable.selected.id,o=i.picker.date?i.picker.date.toString():null,r=new e.Date(o).getDatePart(),a=e.Date.parse(r.toString("yyyy-dd-MM ")+n,"yyyy-dd-MM HH:mm"),l={};return l[t.field]=a,l},i},o.prototype.findRowsByField=function(e){return this.cg.filter(function(t){return t.field===e})},o.prototype.findViewById=function(e,t){return this.fg.find(function(n){return n.row.field===e&&("radio"!==n.row.type||n.row.resolved===t)})},o.prototype.firstFocusable=function(){return this.fg.find(function(e){return e.canFocus&&e.canFocus()})},o.prototype.updateState=function(e,t){var n=this.dg?this.dg:this.cg,i=n.indexOf(e);return this.dg=n.map(function(n){if(n!==e)return n;if(e.propsEqual(t))return e;var i=e.clone();for(var o in t)i[o]=t[o];return i}),this.dg[i]},o.prototype.updateInteractive=function(e){var t=this.dg.indexOf(e);this.fg[t].apply(e)},o.prototype.applyState=function(){var e=this;this.updateDependentState(),this.dg&&(this.dg.filter(function(t,n){return e.cg[n]!==t}).forEach(function(t){e.updateInteractive(t)}),this.cg=this.dg,this.dg=null)},o.prototype.getFieldType=function(e){return-1!==["text","date","select","searchable","radio","checkbox","table","title","image","html","textarea","scrollable","time","datetime"].indexOf(e.type)?e.type:e.type&&this.plugins&&this.plugins[e.type]?e.type:e.image?"image":e.html||e.text?"html":e.id?e.options?"searchable":e.dateFormat?"date":e.columns?"table":"text":"title"},o.prototype.serialize=function(){var e={};return this.fg.forEach(function(t){var n=t.save();for(var i in n)e[i]=n[i]}),e};var r=function(){this.id=this.guid(),this.field=null,this.data=null,this.type=null,this.level=0,this.enabled=!0,this.value=null,this.text=null,this.interactive=!0,this.isValue=!1,this.checked=!1,this.resolved=null};r.prototype.clone=function(){var e=new r;for(var t in this)"id"!==t&&(e[t]=this[t]);return e},r.prototype.propsEqual=function(e){for(var t in e)if(this[t]!==e[t])return!1;return!0},r.prototype.guid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},r.prototype.applyValue=function(e,t){this.field===e&&(this.value=t,this.isValue&&t===this.resolved&&(this.checked=!0))};var a=function(){this.element=null,this.canFocus=function(){return!1},this.apply=function(e){},this.focus=function(){},this.save=function(){return{}}},l=function(e){this.data=[],this.name=null,this.theme="searchable_default",this.lg=!1,this.listZIndex=1e5,this.onSelect=null,this.mg=null,this.ng=null,this.og=!1,this.pg=null,this.Ub=null,this.Se=[],this.qg=null,e=e||{};var t=this,n={selected:{post:function(e){"object"==typeof e&&e.id?t.mg=e:"string"!=typeof e&&"number"!=typeof e||t.select(e)}}};for(var i in Object.defineProperty(this,"selected",{get:function(){return this.mg}}),Object.defineProperty(this,"disabled",{get:function(){return this.lg},set:function(e){this.lg=e,this.pg&&(this.pg.disabled=e,e&&this.rg())}}),e)n[i]||(this[i]=e[i]);for(var i in e)n[i]&&n[i].post(e[i])};l.prototype.select=function(e){return this.mg=this.data.find(function(t){return t.id===e}),this.sg(!1),this},l.prototype.create=function(){function e(e){var i=a.strategy;"includes"!==a.strategy&&"startsWith"!==a.strategy&&(i="includes"),e=e||i||"includes",c.style.display="",c.style.top=h.offsetHeight+"px",c.style.left="0px",c.style.width=h.offsetWidth+"px",c.innerHTML="",c.addEventListener("mousedown",function(e){e.preventDefault()}),a.ng=null,a.Se=[];var o=null;a.data.forEach(function(i){var r=i.name||i.id;if("includes"===e){if(-1===r.toLowerCase().indexOf(h.value.toLowerCase()))return}else if("startsWith"===e&&0!==r.toLowerCase().indexOf(h.value.toLowerCase()))return;var l=document.createElement("div");l.className=a.theme+"_list_item",l.innerText=r,l.item=i,i===a.mg&&(a.ng=l),o||(o=l),l.addEventListener("mousedown",function(e){n(l),e.preventDefault()}),l.addEventListener("mousemove",function(e){a.ng!==l&&(a.ng=l,t({dontScroll:!0}))}),c.appendChild(l),a.Se.push(l)}),a.ng||(a.ng=o),t()}function t(e){var t=!(e=e||{}).dontScroll;document.querySelectorAll("."+a.theme+"_list_item_highlight").forEach(function(e){e.className=e.className.replace(a.theme+"_list_item_highlight","")}),a.ng&&(a.ng.className+=" "+a.theme+"_list_item_highlight",t&&!function(e,t){var n=a.ng.getBoundingClientRect(),i=t.getBoundingClientRect();return n.top>=i.top&&n.bottom<=i.bottom}(0,c)&&a.ng.scrollIntoView())}function n(e){a.mg=e.item,a.sg(!0),a.tg(),o()}function i(){a.rg()}function o(){a.og=!0,h.setAttribute("readonly","readonly"),h.focus()}function r(){a.og=!1,h.removeAttribute("readonly"),h.select(),e("all")}var a=this,l=this,s=document.createElement("div");s.className=this.theme+"_main",s.style.position="relative";var d=document.createElement("div");d.className=this.theme+"_icon",d.style.position="absolute",d.style.right="0",d.style.top="0",d.style.bottom="0",d.style.width="20px",d.addEventListener("mousedown",function(e){e.preventDefault(),a.og?(a.focus(),r()):(i(),o())});var c=document.createElement("div");c.className=this.theme+"_list",c.style.display="none",c.style.position="absolute",c.style.zIndex=this.listZIndex;var u=document.createElement("input");u.type="hidden",u.name=this.name,u.searchable=l,this.qg=u;var h=document.createElement("input");return h.type="text",h.className=this.theme+"_input",h.disabled=this.lg,h.addEventListener("click",function(e){r()}),h.addEventListener("focus",function(t){e("all")}),h.addEventListener("input",function(t){e()}),h.addEventListener("blur",function(e){h.removeAttribute("readonly"),i()}),h.addEventListener("keydown",function(e){if(a.og){if("Enter"===e.key)return;if("Esc"===e.key||"Escape"===e.key)return;r()}if("ArrowDown"===e.key)(s=l.Se.indexOf(l.ng))+1<l.Se.length&&(l.ng=l.Se[s+1]),t();else if("ArrowUp"===e.key){var s;(s=l.Se.indexOf(l.ng))-1>=0&&(l.ng=l.Se[s-1]),t()}else"Enter"===e.key?a.ng?(e.stopPropagation(),n(a.ng)):(e.stopPropagation(),i(),o()):"Esc"!==e.key&&"Escape"!==e.key||(e.stopPropagation(),i(),o())}),this.pg=h,this.Ub=c,this.mg||(this.mg=this.data[0],this.mg&&(h.value=this.mg.name)),s.appendChild(h),s.appendChild(d),s.appendChild(u),s.appendChild(c),s},l.prototype.rg=function(){this.tg(),this.mg?this.pg.value=this.mg.name:(this.pg.value="",this.sg(!0))},l.prototype.focus=function(){this.og=!0,this.pg.setAttribute("readonly","readonly"),this.pg.focus(),this.rg()},l.prototype.tg=function(){this.Ub.style.display="none"},l.prototype.sg=function(e){this.qg.value=this.selected?this.selected.id:null,this.pg.value=this.mg?this.mg.name:"","function"==typeof this.onSelect&&this.onSelect({control:this,ui:e})};var s=function(e){for(var t in this.form=null,this.item=null,this.data=null,this.name=null,this.theme="edit_table_default",this.onInput=null,this.nav={},this.ug=null,this.cg=[],e=e||{})this[t]=e[t]};s.prototype.create=function(){var e=this,t=document.createElement("div");t.className=this.theme+"_main",t.style.position="relative";var n=document.createElement("input");n.type="hidden",n.name=e.name,n.table=this,t.appendChild(n);var i=document.createElement("div");i.className=this.theme+"_table";var o=this.vg();i.appendChild(o);var r=e.wg({});r.spacer=!0;var a=this.xg(r);a.classList.add(e.theme+"_spacer"),i.appendChild(a);var l=document.createElement("div");l.className=e.theme+"_tbody",i.appendChild(l),t.appendChild(i);var s=document.createElement("div");t.appendChild(s),this.nav.body=l,this.nav.table=i,this.nav.main=t,this.nav.after=s;var d=document.createElement("div"),c=document.createElement("span");return c.className=this.theme+"_plus",c.addEventListener("click",function(t){if(!e.disabled){var n=e.item.onNewRow,i={};if("function"==typeof n){var o={};o.result=e.form.serialize(),o.value={},n(o),i=o.value}var r=e.wg(i);e.cg.push(r),e.yg(),e.zg()}}),this.nav.plus=c,d.appendChild(c),t.appendChild(d),t},s.prototype.vg=function(){var e=this,t=document.createElement("div");return t.classList.add(this.theme+"_row"),t.classList.add(this.theme+"_header"),this.item.columns.forEach(function(n){var i=document.createElement("div");i.classList.add(e.theme+"_cell"),i.innerText=n.name,t.appendChild(i)}),t},s.prototype.Ag=function(){var e=this.item.max||0;return!!(e&&this.cg.length>=e)},s.prototype.save=function(){var e=[];return this.cg.forEach(function(t){var n={};t.cells.forEach(function(e){n[e.id]=e.value}),e.push(n)}),e},s.prototype.load=function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("Array expected");this.data=e,this.Bg(),this.yg()},s.prototype.Cg=function(){this.disabled?this.nav.main.classList.add(this.theme+"_disabled"):this.nav.main.classList.remove(this.theme+"_disabled"),this.Ag()?this.nav.plus.classList.add(this.theme+"_plus_max"):this.nav.plus.classList.remove(this.theme+"_plus_max")},s.prototype.Bg=function(){var e=this;this.cg=[],this.data.forEach(function(t){var n=e.wg(t);e.cg.push(n)})},s.prototype.Dg=function(e){var t=this.cg.indexOf(e);this.cg.splice(t,1)},s.prototype.wg=function(e){var t=this,n={};return n.data=e,n.cells=[],t.item.columns.forEach(function(i){var o=i.id,r=e[o],a=t.Eg(i);if("undefined"==typeof r)if("text"===a)r="";else if("number"===a)r=0;else if("select"===a){var l=i.options;r=l&&l[0].id}var s={};s.id=o,s.value=r,s.type=a,s.data=i,n.cells.push(s)}),n},s.prototype.Eg=function(e){var t=e.type;return t||(t=e.options?"select":"text"),t},s.prototype.yg=function(){var e=this;if(this.nav.body.innerHTML="",this.nav.after.innerHTML="",this.cg.forEach(function(t){var n=e.xg(t);e.nav.body.appendChild(n)}),0===this.cg.length){var t=e.Fg();e.nav.after.appendChild(t)}this.Cg()},s.prototype.Fg=function(){var e=document.createElement("div");return e.className=this.theme+"_empty",e},s.prototype.xg=function(e){var t=this,n=document.createElement("div");n.className=t.theme+"_row",e.cells.forEach(function(i){var o=document.createElement("div");o.className=t.theme+"_cell";var r=t.Gg(i);if(e.spacer){var a=document.createElement("div");a.style.height="0px",a.style.overflow="hidden",a.appendChild(r),o.appendChild(a)}else o.appendChild(r);n.appendChild(o)});var i=document.createElement("div");i.classList.add(t.theme+"_cell"),i.classList.add(t.theme+"_rowaction");var o=document.createElement("span");return o.className=this.theme+"_delete",o.addEventListener("click",function(n){t.disabled||(t.Dg(e),t.yg(),t.zg())}),e.spacer||i.appendChild(o),n.appendChild(i),n},s.prototype.zg=function(){"function"==typeof this.onInput&&this.onInput({})},s.prototype.Gg=function(e){var t=this,n=e.type;if("text"===n||"number"===n){var i=document.createElement("input");return i.type=n,t.disabled&&(i.disabled=!0),e.value&&(i.value=e.value),i.addEventListener("keyup",function(i){e.value="number"===n?Number(this.value):this.value,t.zg()}),i}if("select"===n){var o=document.createElement("select");return t.disabled&&(o.disabled=!0),e.data.options.forEach(function(t){var n=document.createElement("option");n.innerText=t.name,n.value=t.id,n.kg=t.id,o.appendChild(n),e.value===t.id&&n.setAttribute("selected",!0)}),o.addEventListener("change",function(n){var i=o.options[o.selectedIndex];i&&"undefined"!=typeof i.kg&&(e.value=i.kg),t.zg()}),o}throw new Error("Unsupported item type: "+n)},s.prototype.focus=function(){}}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){if("undefined"==typeof e.Month){var t={};e.Month=function(n,i){this.v="2021.3.5046",this.nav={};var o=this;this.id=n,this.isMonth=!0,this.api=2,this.S=!1,this.hideUntilInit=!0,this.startDate=new e.Date,this.width=null,this.bubble="function"==typeof e.Bubble?new e.Bubble:null,this.cssClassPrefix="month_default",this.cellHeight=100,this.cellMarginBottom=0,this.allowMultiSelect=!0,this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.doubleClickTimeout=300,this.eventEndSpec="DateTime",this.headerHeight=30,this.heightSpec="Auto",this.weekStarts="Auto",this.eventHeight=25,this.cellHeaderHeight=24,this.clientState={},this.afterRender=function(){},this.cssOnly=!0,this.eventsLoadMethod="GET",this.initEventEnabled=!1,this.lineSpace=1,this.loadingLabelVisible=!0,this.loadingLabelText="Loading...",this.loadingLabelHtml=null,this.locale="en-us",this.messageHideAfter=5e3,this.notifyCommit="Immediate",this.visible=!0,this.eventMoveToPosition=!1,this.eventStartTime=!1,this.eventEndTime=!1,this.eventStartEndWidth=60,this.showWeekend=!0,this.cellMode=!1,this.shadowType="Fill",this.tapAndHoldTimeout=300,this.timeFormat="Auto",this.viewType="Month",this.weeks=1,this.xssProtection="Enabled",this.eventClickHandling="Enabled",this.eventDeleteHandling="Disabled",this.eventDoubleClickHandling="Disabled",this.eventMoveHandling="Update",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.eventSelectHandling="Update",this.headerClickHandling="Enabled",this.timeRangeSelectedHandling="Enabled",this.timeRangeDoubleClickHandling="Enabled",this.onEventFilter=null,this.onBeforeEventRender=null,this.onBeforeCellRender=null,this.onBeforeHeaderRender=null,this.onDomAddEvent=null,this.onDomRemoveEvent=null,this.onBeforeEventExport=null,this.onBeforeCellExport=null,this.onBeforeHeaderExport=null,this.backendUrl=null,this.cellEvents=[],this.elements={},this.elements.events=[],this.P={},this.P.events={},this.events={},this.R=0,this.members={},this.members.ignore=["internal","nav","debug","temp","elements","members","cellProperties"],this.U="javasc",this.la=function(e,t){if((e=JSON.parse(e)).BubbleGuid){var n=e.BubbleGuid,i=this.bubbles[n];return delete this.bubbles[n],o.Ga(),void("undefined"!=typeof e.Result.BubbleHTML&&i.updateView(e.Result.BubbleHTML,i))}if(e.CallBackRedirect)document.location.href=e.CallBackRedirect;else{if("undefined"!=typeof e.ClientState&&(o.clientState=e.ClientState),"None"===e.UpdateType)return o.Ha(e.CallBackData,!0),e.Message&&o.message(e.Message),void o.Ga();if(e.VsUpdate){var r=document.createElement("input");r.type="hidden",r.name=o.id+"_vsupdate",r.id=r.name,r.value=e.VsUpdate,o.Hg.innerHTML="",o.Hg.appendChild(r)}o.events.list=e.Events,"undefined"!=typeof e.TagFields&&(o.tagFields=e.TagFields),"undefined"!=typeof e.SortDirections&&(o.sortDirections=e.SortDirections),"Full"===e.UpdateType&&(o.cellProperties=e.CellProperties,o.headerProperties=e.HeaderProperties,o.startDate=e.StartDate,"undefined"!=typeof e.ShowWeekend&&(o.showWeekend=e.ShowWeekend),o.locale=e.Locale?e.Locale:o.locale,o.timeFormat=e.TimeFormat?e.TimeFormat:o.timeFormat,"undefined"!=typeof e.WeekStarts&&(o.weekStarts=e.WeekStarts),o.hashes=e.Hashes),o.multiselect.clear(!0),o.multiselect.initList=e.SelectedEvents,o.pa(),o.Ig(),o.Ma(),"Full"===e.UpdateType&&(o.Jg(),o.Kg()),o.Ua(),o.Ya(),o.Za(),o.Ha(e.CallBackData,!0),o.bb(),e.Message&&o.message(e.Message),o.Ga()}},this.Ha=function(e,t){window.setTimeout(function(e,t){return function(){if(o.cb()){if("function"==typeof o.onAfterRender){var n={};n.isCallBack=t,n.data=e,o.onAfterRender(n)}}else o.afterRender&&o.afterRender(e,t)}}(e,t),0)},this.cb=function(){return 2===o.api},this.ca=function(t,n){return o.ea.da()?e.Util.escapeTextHtml(t,n):e.Util.isNullOrUndefined(n)?e.Util.isNullOrUndefined(t)?"":t:n},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.Ma=function(){if(this.events.list){if("function"==typeof this.onBeforeEventRender)for(var e=this.events.list.length,t=0;t<e;t++)this.qe(t);this.cellMode?this.Lg():this.Mg()}},this.ia=function(e){var t=e?0:100;o.loadingTimeout&&window.clearTimeout(o.loadingTimeout),o.loadingTimeout=window.setTimeout(function(){o.loadingLabelVisible&&o.nav.loading&&(o.nav.loading.style.top=l.headerHeight()+5+"px",o.nav.loading.innerHTML=o.ca(this.loadingLabelText,this.loadingLabelHtml),o.nav.loading.style.display="")},t)},this.Ga=function(){this.loadingTimeout&&window.clearTimeout(this.loadingTimeout),o.nav.loading&&(this.nav.loading.style.display="none")},this.Mg=function(){if(this.events.list){for(var t=0;t<this.events.list.length;t++){var n=this.events.list[t];if("object"!=typeof n)throw new e.Exception("Event data item must be an object");if(!n.start)throw new e.Exception("Event data item must specify 'start' property");var i=null;if("function"==typeof o.onBeforeEventRender&&(i=o.P.events[t]),i){if(i.hidden)continue}else if(n.hidden)continue;var r=new e.Date(n.start),a=new e.Date(n.end);if(a=o.Ng(a),!(r.getTime()>a.getTime()))for(var l=0;l<this.rows.length;l++)if((u=this.rows[l]).belongsHere(r,a)){var s=new e.Event(n,o);if("function"==typeof o.onEventFilter&&o.events.Ge){var d={};if(d.filter=o.events.Ge,d.visible=!0,d.e=s,o.onEventFilter(d),!d.visible)break}u.events.push(s),"function"==typeof this.onBeforeEventRender&&(s.cache=this.P.events[t])}}for(var c=0;c<this.rows.length;c++){var u;(u=this.rows[c]).events.sort(this.Ie);for(var h=0;h<this.rows[c].events.length;h++){var p=u.events[h],f=u.getStartColumn(p),g=u.getWidth(p);u.putIntoLine(p,f,g,c)}}}},this.Lg=function(){this.cellEvents=[];for(var t=0;t<this.Og();t++){this.cellEvents[t]=[];for(var n=0;n<this.rows.length;n++){var i={},r=this.firstDate.addDays(7*n+t);i.start=r,i.end=r.addDays(1),i.events=[],this.cellEvents[t][n]=i}}for(var a=0;a<this.events.list.length;a++){var l=this.events.list[a];if("object"!=typeof l)throw new e.Exception("Event data item must be an object");if(!l.start)throw new e.Exception("Event data item must specify 'start' property");var s=null;if("function"==typeof o.onBeforeEventRender&&(s=o.P.events[a]),s){if(s.hidden)continue}else if(l.hidden)continue;var d=new e.Date(l.start),c=new e.Date(l.start);if(c=o.Ng(c),!(d.getTime()>c.getTime()))for(t=0;t<this.Og();t++)for(n=0;n<this.rows.length;n++)if(i=this.cellEvents[t][n],d.getTime()>=i.start.getTime()&&d.getTime()<i.end.getTime()){var u=new e.Event(l,o);if("function"==typeof o.onEventFilter&&o.events.Ge){var h={};if(h.filter=o.events.Ge,h.visible=!0,h.e=u,o.onEventFilter(h),!h.visible)continue}i.events.push(u),"function"==typeof this.onBeforeEventRender&&(u.cache=this.P.events[a])}}for(t=0;t<this.Og();t++)for(n=0;n<this.rows.length;n++)(i=this.cellEvents[t][n]).events.sort(this.Ie)},this.pa=function(){for(var e=0;e<this.elements.events.length;e++){var t=this.elements.events[e];if("function"==typeof o.onDomRemoveEvent){var n=t.domArgs;t.domArgs=null,o.onDomRemoveEvent(n)}t.event=null,t.click=null,t.parentNode.removeChild(t)}this.elements.events=[]},this.Za=function(){this.P.events={},this.cellMode?this.Pg():this.Qg(),this.multiselect.redraw()},this.Pg=function(){this.elements.events=[];for(var e=0;e<this.Og();e++)for(var t=0;t<this.rows.length;t++)for(var n=this.cellEvents[e][t],i=0;i<n.events.length;i++){var o=n.events[i];o.part.colStart=e,o.part.colWidth=1,o.part.row=t,o.part.line=i,o.part.startsHere=!0,o.part.endsHere=!0,this.Uc(o)}},this.Qg=function(){this.elements.events=[];for(var e=0;e<this.rows.length;e++)for(var t=this.rows[e],n=0;n<t.lines.length;n++)for(var i=t.lines[n],o=0;o<i.length;o++)this.Uc(i[o])},this.He=function(e,t){if(!(e&&t&&e.start&&t.start))return 0;var n=e.start().ticks-t.start().ticks;return 0!==n?n:t.end().ticks-e.end().ticks},this.Ie=function(e,t){if(!e||!t)return 0;if(!(e.data&&t.data&&e.data.sort&&t.data.sort&&0!==e.data.sort.length&&0!==t.data.sort.length))return o.He(e,t);for(var n=0,i=0;0===n&&"undefined"!=typeof e.data.sort[i]&&"undefined"!=typeof t.data.sort[i];)n=e.data.sort[i]===t.data.sort[i]?0:"number"==typeof e.data.sort[i]&&"number"==typeof t.data.sort[i]?e.data.sort[i]-t.data.sort[i]:o.Je(e.data.sort[i],t.data.sort[i],o.sortDirections[i]),i++;return n},this.Je=function(e,t,n){var i="desc"!==n?-1:1,o=-i;if(null===e&&null===t)return 0;if(null===t)return o;if(null===e)return i;var r=[];return r[0]=e,r[1]=t,r.sort(),e===r[0]?i:o},this.Rg=function(e,n,i,o,r,a){r||(r=0);var l=o;this.shadow={},this.shadow.list=[],this.shadow.start={x:e,y:n},this.shadow.width=o,this.eventMoveToPosition&&(l=1,this.shadow.position=i);var s=7*n+e-r;s<0&&(l+=s,e=0,n=0);for(var d=r;d>=7;)n--,d-=7;d>e?d>e+(7-this.Og())?(n--,e=e+7-d):(l=l-d+e,e=0):e-=d,n<0&&(n=0,e=0);var c=null;for(t.resizingEvent?c="w-resize":t.movingEvent&&(c="move"),this.nav.top.style.cursor=c;l>0&&n<this.rows.length;){var u=Math.min(this.Og()-e,l),h=this.rows[n],p=this.Sg(n),f=h.getHeight();this.eventMoveToPosition&&(p=this.Tg(n,i),f=2);var g=document.createElement("div");g.setAttribute("unselectable","on"),g.style.position="absolute",g.style.left=this.Ug()*e+"%",g.style.width=this.Ug()*u+"%",g.style.top=p+"px",g.style.height=f+"px",g.style.cursor=c;var m=document.createElement("div");m.setAttribute("unselectable","on"),g.appendChild(m),g.className=this.G("_shadow"),m.className=this.G("_shadow_inner"),this.nav.events.appendChild(g),this.shadow.list.push(g),l-=u+7-this.Og(),e=0,n++}},this.Vg=function(){this.shadow&&(e.de(this.shadow.list),this.shadow=null,this.nav.top.style.cursor="")},this.Tg=function(e,t){for(var n=0,i=0;i<e;i++)n+=this.rows[i].getHeight();return(n+=this.cellHeaderHeight)+t*l.lineHeight()},this.Wg=function(e,t){return this.firstDate.addDays(7*t+e)},this.qe=function(e){var t=this.P.events,n=this.events.list[e],i={};for(var o in n)i[o]=n[o];if("function"==typeof this.onBeforeEventRender){var r={};r.e=i,r.data=i,this.onBeforeEventRender(r)}t[e]=i},this.Uc=function(t){var n=this.cellMode,i=t.part.row,a=t.part.line,s=t.part.colStart,d=t.part.colWidth,c=t.cache||t.data,u=n?0:this.Ug()*s,h=n?100:this.Ug()*d,p=n?a*l.lineHeight():this.Tg(i,a);(x=document.createElement("div")).setAttribute("unselectable","on"),x.style.height=l.eventHeight()+"px",x.style.position="relative",x.style.overflow="hidden",x.className=this.G("_event"),c.cssClass&&e.Util.addClass(x,c.cssClass),x.event=t,n?(x.style.marginRight="2px",x.style.marginBottom="2px"):(x.style.width=h+"%",x.style.position="absolute",x.style.left=u+"%",x.style.top=p+"px"),this.showToolTip&&c.toolTip&&!this.bubble&&(x.title=c.toolTip),x.onclick=this.Xg,x.ondblclick=this.Yg,x.oncontextmenu=this.Zg,x.onmousedown=this.Xc,x.onmousemove=this.Vc,x.onmouseout=this.Wc,x.ontouchstart=r.onEventTouchStart,x.ontouchmove=r.onEventTouchMove,x.ontouchend=r.onEventTouchEnd,t.part.startsHere||e.Util.addClass(x,this.G("_event_continueleft")),t.part.endsHere||e.Util.addClass(x,this.G("_event_continueright"));var f=document.createElement("div");f.setAttribute("unselectable","on"),f.className=this.G("_event_inner"),c.fontColor&&(f.style.color=c.fontColor),c.borderColor&&(f.style.borderColor="darker"===c.borderColor&&c.backColor?e.ColorUtil.darker(c.backColor,2):c.borderColor),c.backColor&&(f.style.background=c.backColor),c.backImage&&(f.style.backgroundImage="url("+c.backImage+")",c.backRepeat&&(f.style.backgroundRepeat=c.backRepeat)),x.appendChild(f);var g=this.ea.locale(),m=o.eventStartEndWidth;if(this.eventStartTime||c.htmlStart){var v="Clock12Hours"===o.ea.timeFormat()?t.start().toString("h tt",g):t.start().toString("H",g),y={left:5,top:3,width:m,bottom:2,v:"Visible",html:c.htmlStart||v,css:o.G("_event_timeleft")},b=e.Areas.createArea(x,t,y);x.appendChild(b),f.style.paddingLeft=m+"px"}if((this.eventEndTime||c.htmlEnd)&&(v="Clock12Hours"===o.ea.timeFormat()?t.end().toString("h tt",g):t.end().toString("H",g),y={right:5,top:3,width:m,bottom:2,v:"Visible",html:c.htmlEnd||v,css:o.G("_event_timeright")},b=e.Areas.createArea(x,t,y),x.appendChild(b),f.style.paddingRight=m+"px"),c.areas)for(var w=c.areas,C=0;C<w.length;C++)e.Areas.isVisible(y=w[C])&&(b=e.Areas.createArea(x,t,y),x.appendChild(b));!function(){var e={};e.e=t,e.element=null,x.domArgs=e,"function"==typeof o.onDomAddEvent&&o.onDomAddEvent(e),e.element?f.appendChild(e.element):f.innerHTML=t.client.innerHTML()}(),this.elements.events.push(x),n?this.cells[s][i].body.appendChild(x):this.nav.events.appendChild(x),o.multiselect.xc(x.event)&&o.multiselect.add(x.event,!0);var x=x;if(o.cb()){if("function"==typeof o.onAfterEventRender){var S={};S.e=x.event,S.div=x,o.onAfterEventRender(S)}}else o.afterEventRender&&o.afterEventRender(x.event,x)},this.Xg=function(e){r.start||o.pb(this,e)},this.Yg=function(e){o.tb(this,e)},this.Vc=function(n){var i=this,r=i.event;if("undefined"!=typeof t&&!t.movingEvent&&!t.resizingEvent){var a=e.mo3(i,n);a&&(function(){var t=i;if(!t.active){var n=[];"Disabled"===o.eventDeleteHandling||(r.cache||r.data).deleteDisabled||n.push({action:"JavaScript",v:"Hover",w:17,h:17,top:2,right:2,css:o.G("_event_delete"),js:function(e){o.zb(e)}});var a=t.event.cache?t.event.cache.areas:t.event.data.areas;a&&a.length>0&&(n=n.concat(a)),e.Areas.showAreas(t,t.event,null,n)}}(),o.$g(i.event).forEach(function(t){e.Util.addClass(t,o.G("_event_hover"))}),!o.cellMode&&a.x<=6&&r.client.resizeEnabled()?r.part.startsHere?(i.style.cursor="w-resize",i.dpBorder="left"):i.style.cursor="not-allowed":!o.cellMode&&i.clientWidth-a.x<=6&&r.client.resizeEnabled()?r.part.endsHere?(i.style.cursor="e-resize",i.dpBorder="right"):i.style.cursor="not-allowed":i.style.cursor=r.client.clickEnabled()?"pointer":"default","undefined"!=typeof e.Bubble&&o.bubble&&"Disabled"!==o.eventHoverHandling&&(t.movingEvent||t.resizingEvent?e.Bubble.hideActive():this.Be&&a.x===this.Be.x&&a.y===this.Be.y||(this.Be=a,o.bubble.showEvent(i.event))))}},this.Wc=function(t){var n=this;"undefined"!=typeof e.Bubble&&o.bubble&&o.bubble.hideOnMouseOut(),n.style.cursor="",o.$g(n.event).forEach(function(t){e.Util.removeClass(t,o.G("_event_hover"))}),e.Areas.hideAreas(n,t)},this.Zg=function(){return o.ub(this.event),!1},this.Xc=function(n){if(!r.start){"undefined"!=typeof e.Bubble&&(e.Bubble.hideActive(),e.Bubble.cancelShowing());var i=this,a=i.event,l=a.part.row,s=a.part.colStart,d=a.part.line,c=a.part.colWidth;n=n||window.event;var u=e.Util.mouseButton(n);if(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation(),u.left)if("undefined"!=typeof e.Bubble&&o.bubble&&e.Bubble.hideActive(),t.movingEvent=null,"w-resize"===this.style.cursor||"e-resize"===this.style.cursor){var h={start:{}};h.start.x=s,h.start.y=l,h.event=i.event,h.width=e.DateUtil.daysSpan(h.event.start(),h.event.end())+1,h.direction=this.style.cursor,t.resizingEvent=h}else if("move"===this.style.cursor||a.client.moveEnabled()){o.Vg();var p=e.mo3(o.nav.events,n);if(!p)return;var f=o._g(p.x,p.y);if(!f)return;var g=e.DateUtil.daysDiff(a.start(),o.rows[l].start),m=7*f.y+f.x-(7*l+s);g&&(m+=g);var v={start:{}};v.start.x=s,v.start.y=l,v.start.line=d,v.offset=o.eventMoveToPosition?0:m,v.colWidth=c,v.event=i.event,v.coords=p,t.movingEvent=v}}},this.temp={},this.temp.getPosition=function(){if(!o.coords)return null;if(!(t=o._g(o.coords.x,o.coords.y)))return null;var t,n=new e.Date(o.Wg(t.x,t.y));return(t={}).start=n,t.end=n.addDays(1),t},this.Yc={};var r=o.Yc;r.active=!1,r.start=!1,r.timeouts=[],r.onEventTouchStart=function(e){if(!r.active&&!r.start){r.clearTimeouts(),r.start=!0,r.active=!1;var t=this;t.event.client.moveEnabled()&&r.timeouts.push(window.setTimeout(function(){r.active=!0,r.start=!1;var n=r.relativeCoords(e);r.startMoving(t,n),e.preventDefault()},o.tapAndHoldTimeout)),e.stopPropagation()}},r.onEventTouchMove=function(e){r.clearTimeouts(),r.start=!1},r.onEventTouchEnd=function(e){r.clearTimeouts(),r.start&&o.qb(this,e),window.setTimeout(function(){r.start=!1,r.active=!1},500)},r.onMainTouchStart=function(e){r.active||r.start||(r.clearTimeouts(),r.start=!0,r.active=!1,r.timeouts.push(window.setTimeout(function(){r.active=!0,r.start=!1,e.preventDefault();var t=r.relativeCoords(e);r.startRange(t)},o.tapAndHoldTimeout)))},r.onMainTouchMove=function(e){if(r.clearTimeouts(),r.start=!1,r.active){e.preventDefault();var t=r.relativeCoords(e);if(r.moving)return void r.updateMoving(t);r.range&&r.updateRange(t)}},r.onMainTouchEnd=function(t){if(r.clearTimeouts(),r.active){if(r.moving){var n=r.moving.event,i=o.shadow.start,a=o.shadow.position,l=r.moving.offset;o.Vg(),r.moving=null,o.Ib(n,i.x,i.y,l,t,a)}if(r.range){var s=r.range,d=(i=new e.Date(o.Wg(s.from.x,s.from.y))).addDays(s.width);r.range=null,o.Qb(i,d)}}window.setTimeout(function(){r.start=!1,r.active=!1},500)},r.clearTimeouts=function(){for(var e=0;e<r.timeouts.length;e++)clearTimeout(r.timeouts[e]);r.timeouts=[]},r.relativeCoords=function(t){var n=t.touches?t.touches[0]:t,i=n.pageX,r=n.pageY,a=e.abs(o.nav.events);return{x:i-a.x,y:r-a.y,toString:function(){return"x: "+this.x+", y:"+this.y}}},r.startMoving=function(t,n){o.Vg();var i=t.event,a=o._g(n.x,n.y);if(a){var l=e.DateUtil.daysDiff(i.start(),o.rows[i.part.row].start),s=7*a.y+a.x-(7*i.part.row+i.part.colStart);l&&(s+=l);var d={start:{}};d.start.x=i.part.colStart,d.start.y=i.part.row,d.start.line=i.part.line,d.offset=o.eventMoveToPosition?0:s,d.colWidth=i.part.colWidth,d.event=i,d.coords=n,r.moving=d,r.updateMoving(n)}},r.updateMoving=function(t){var n=o._g(t.x,t.y);if(n){var i=o.ah(n);o.Vg();var a=r.moving.event,l=r.moving.offset,s=o.cellMode?1:e.DateUtil.daysSpan(a.start(),a.end())+1;s<1&&(s=1),o.Rg(n.x,n.y,i,s,l,a)}},r.startRange=function(e){var t=o._g(e.x,e.y);if(t){o.Vg();var n={start:{}};n.start.x=t.x,n.start.y=t.y,n.x=t.x,n.y=t.y,n.width=1,r.range=n,r.updateRange(e)}},r.updateRange=function(e){var t=o._g(e.x,e.y);if(t){o.Vg();var n=r.range.start,i=7*n.y+n.x,a=7*t.y+t.x,l=Math.abs(a-i)+1;l<1&&(l=1);var s=i<a?n:t;r.range.width=l,r.range.from={x:s.x,y:s.y},o.Rg(s.x,s.y,0,l,0,null)}},this.isWeekend=function(e){return 0===e.dayOfWeek()||6===e.dayOfWeek()},this.bh=function(){var e=this.startDate.lastDayOfMonth();if(this.showWeekend)return e;for(;this.isWeekend(e);)e=e.addDays(-1);return e},this.Ig=function(){if("string"==typeof this.startDate&&(this.startDate=new e.Date(this.startDate)),this.startDate="Month"===this.viewType?this.startDate.firstDayOfMonth():this.startDate.getDatePart(),this.firstDate=this.startDate.firstDayOfWeek(l.weekStarts()),!this.showWeekend){for(var t=this.startDate.addMonths(-1).getMonth(),n=new e.Date(this.firstDate).addDays(6);this.isWeekend(n);)n=n.addDays(-1);n.getMonth()===t&&(this.firstDate=this.firstDate.addDays(7))}var i;if("Month"===this.viewType){var r=this.bh(),a=e.DateUtil.daysDiff(this.firstDate,r)+1;i=Math.ceil(a/7)}else i=this.weeks;this.days=7*i,this.rows=[];for(var s=0;s<i;s++){var d={};d.start=this.firstDate.addDays(7*s),d.end=d.start.addDays(this.Og()),d.events=[],d.lines=[],d.index=s,d.minHeight=this.cellHeight,d.calendar=this,d.belongsHere=function(e,t){return t.getTime()===e.getTime()&&e.getTime()===this.start.getTime()||!(t.getTime()<=this.start.getTime()||e.getTime()>=this.end.getTime())},d.getPartStart=function(t){return e.DateUtil.max(this.start,t.start())},d.getPartEnd=function(t){return e.DateUtil.min(this.end,t.rawend())},d.getStartColumn=function(t){var n=this.getPartStart(t);return e.DateUtil.daysDiff(this.start,n)},d.getWidth=function(t){return e.DateUtil.daysSpan(this.getPartStart(t),this.getPartEnd(t))+1},d.putIntoLine=function(e,t,n,i){for(var o=this,r=0;r<this.lines.length;r++)if((a=this.lines[r]).isFree(t,n))return a.addEvent(e,t,n,i,r),r;var a;return(a=[]).isFree=function(e,t){for(var n=!0,i=0;i<this.length;i++){var o=this[i];e+t-1<o.part.colStart||e>o.part.colStart+o.part.colWidth-1||(n=!1)}return n},a.addEvent=function(e,t,n,i,r){e.part.colStart=t,e.part.colWidth=n,e.part.row=i,e.part.line=r,e.part.startsHere=o.start.getTime()<=e.start().getTime(),e.part.endsHere=o.end.getTime()>=e.end().getTime(),this.push(e)},a.addEvent(e,t,n,i,this.lines.length),this.lines.push(a),this.lines.length-1},d.getStart=function(){for(var e=0;e<o.rows.length&&e<this.index;e++)o.rows[e].getHeight()},d.getHeight=function(){return Math.max(this.lines.length*l.lineHeight()+o.cellHeaderHeight+o.cellMarginBottom,this.calendar.cellHeight)},this.rows.push(d)}this.ch=this.firstDate.addDays(7*i)},this.dh=function(){switch(this.heightSpec){case"Auto":for(var e=l.headerHeight(),t=0;t<this.rows.length;t++)e+=this.rows[t].getHeight();return e;case"Fixed":return this.height}},this.eh=function(e,t){return 7*t.y+t.x-(7*e.y+e.x)+1},this.Le={},this.Le.scope=null,this.Le.notify=function(){o.Le.scope&&o.Le.scope.$apply()},this.debug=new e.Debug(this),this.fd=function(){var e=this.nav.top;this.nav.top.dp=this,e.setAttribute("unselectable","on"),e.style.MozUserSelect="none",e.style.KhtmlUserSelect="none",e.style.WebkitUserSelect="none",e.style.WebkitTapHighlightColor="rgba(0,0,0,0)",e.style.WebkitTouchCallout="none",e.style.position="relative",this.width&&(e.style.width=this.width),e.onselectstart=function(e){return!1},e.className=this.G("_main"),this.hideUntilInit&&(e.style.visibility="hidden"),this.visible||(e.style.display="none"),e.onmousemove=this.ld,e.ontouchstart=r.onMainTouchStart,e.ontouchmove=r.onMainTouchMove,e.ontouchend=r.onMainTouchEnd,this.Hg=document.createElement("div"),this.Hg.style.display="none",this.nav.top.appendChild(this.Hg);var t=document.createElement("div");t.style.position="relative",t.style.height=l.headerHeight()+"px",t.oncontextmenu=function(){return!1},this.nav.top.appendChild(t),this.nav.header=t;var n=document.createElement("div");n.style.zoom="1";var i=document.createElement("div");i.style.position="relative",n.appendChild(i),this.nav.loading=document.createElement("div"),this.nav.loading.style.position="absolute",this.nav.loading.style.top="0px",this.nav.loading.style.left="5px",this.nav.loading.className=o.G("_loading"),this.nav.loading.innerHTML=o.ca(this.loadingLabelText,this.loadingLabelHtml),this.nav.loading.style.display="none",this.nav.top.appendChild(n),this.nav.top.appendChild(this.nav.loading),this.nav.scrollable=n,this.nav.events=i},this.ld=function(n){n.insideMainD=!0,window.event&&window.event.srcElement&&(window.event.srcElement.inside=!0),o.coords=e.mo3(o.nav.events,n);var i=o.coords;if(i){var r=o._g(i.x,i.y);if(r){if(t.resizingEvent){o.Vg();var a=t.resizingEvent;if("w-resize"===a.direction){h=r;var l=a.event.rawend();l.getDatePart().getTime()===l.getTime()&&(l=l.addDays(-1));var s=o.fh(l);p=o.eh(r,s)}else h=o.fh(a.event.start()),p=o.eh(h,r);p<1&&(p=1),o.Rg(h.x,h.y,0,p)}else if(t.movingEvent){if(i.x===t.movingEvent.coords.x&&i.y===t.movingEvent.coords.y)return;var d=o.ah(r);o.Vg();var c=t.movingEvent.event,u=t.movingEvent.offset;(p=o.cellMode?1:e.DateUtil.daysSpan(c.start(),c.rawend())+1)<1&&(p=1),o.Rg(r.x,r.y,d,p,u,c)}else if(t.timeRangeSelecting){t.cancelCellClick=!0,o.Vg();var h,p,f=7*(h=t.timeRangeSelecting).y+h.x,g=7*r.y+r.x;(p=Math.abs(g-f)+1)<1&&(p=1);var m=f<g?h:r;t.timeRangeSelecting.from={x:m.x,y:m.y},t.timeRangeSelecting.width=p,t.timeRangeSelecting.moved=!0,o.Rg(m.x,m.y,0,p,0,null)}if(t.drag){if(t.gShadow&&document.body.removeChild(t.gShadow),t.gShadow=null,!t.movingEvent){var v=e.Date.today(),y=(n={id:t.drag.id,start:v,end:v.addSeconds(t.drag.duration),text:t.drag.text},t.drag.data);if(y){var b=["duration","element","remove","id","text"];for(var w in y)e.contains(b,w)||(n[w]=y[w])}(c=new e.Event(n,o)).external=!0;var C=t.movingEvent={};C.event=c,C.coords=i,C.position=0,C.offset=0,C.external=!0,C.removeElement=t.drag.element}n.cancelBubble=!0}}}},this.ah=function(e){for(var t=e.relativeY,n=o.rows[e.y],i=o.cellHeaderHeight,r=l.lineHeight(),a=n.lines.length,s=0;s<n.lines.length;s++)if(n.lines[s].isFree(e.x,1)){a=s;break}var d=Math.floor((t-i+r/2)/r);return d=Math.min(a,d),Math.max(0,d)},this.message=function(t,n){if(null!==t&&o.S){var i,r,a={};i="object"==typeof arguments[1]?(a=arguments[1]).delay:n,r=a.rawHtml?t:e.Util.escapeHtml(t),i=i||this.messageHideAfter||2e3;var s,d=l.headerHeight();if(this.nav.message)s=o.nav.message;else{(s=document.createElement("div")).setAttribute("unselectable","on"),s.style.position="absolute",s.style.right="0px",s.style.left="0px",s.style.top=d+"px",s.style.display="none",s.onmousemove=function(){s.messageTimeout&&!s.status&&clearTimeout(s.messageTimeout)},s.onmouseout=function(){"none"!==o.nav.message.style.display&&(s.messageTimeout=setTimeout(o.nb,500))};var c=document.createElement("div");c.setAttribute("unselectable","on"),c.onclick=function(){o.nav.message.style.display="none"},c.className=this.G("_message"),s.appendChild(c);var u=document.createElement("div");u.setAttribute("unselectable","on"),u.style.position="absolute",u.className=this.G("_message_close"),u.onclick=function(){o.nav.message.style.display="none"},s.appendChild(u),this.nav.top.appendChild(s),this.nav.message=s}var h=function(){if(o.nav.message){var t=o.nav.message.firstChild;t.className=o.G("_message"),a.cssClass&&e.Util.addClass(t,a.cssClass),t.innerHTML=r,e.fade(o.nav.message,.2,function(){s.messageTimeout=setTimeout(o.nb,i)})}};clearTimeout(s.messageTimeout),"none"!==this.nav.message.style.display?e.fade(o.nav.message,-.2,h):h()}},this.message.show=function(e){o.message(e)},this.message.hide=function(){o.nb()},this.nb=function(){e.fade(o.nav.message,-.2,function(){o.nav.message.style.display="none"})},this.xa=function(e){"Parent100Pct"===o.heightSpec&&o.Ua()},this.Ua=function(){var e=this.nav.scrollable;"Parent100Pct"===this.heightSpec||"Fixed"===this.heightSpec?(e.style.top=this.headerHeight+"px",e.style.bottom="0px",e.style.left="0px",e.style.right="0px",e.style.overflow="auto",e.style.position="absolute"):e.style.position="relative",this.nav.top.style.height="Parent100Pct"===this.heightSpec?"100%":this.dh()+"px";for(var t=0;t<this.cells.length;t++)for(var n=0;n<this.cells[t].length;n++)this.cells[t][n].style.top=this.Sg(n)+"px",this.cells[t][n].style.height=this.rows[n].getHeight()+"px";this.gh()},this._g=function(e,t){for(var n=Math.floor(this.nav.top.clientWidth/this.Og()),i=Math.min(Math.floor(e/n),this.Og()-1),o=null,r=0,a=0,l=0,s=0;s<this.rows.length;s++){if(t<(a+=this.rows[s].getHeight())){r=t-l,o=s;break}l=a}null===o&&(o=this.rows.length-1);var d={};return d.x=i,d.y=o,d.relativeY=r,d},this.fh=function(t){for(var n=e.DateUtil.daysDiff(this.firstDate,t),i={x:0,y:0};n>=7;)i.y++,n-=7;return i.x=n,i},this.gh=function(){var t=e.sw(this.nav.scrollable);this.nav.header.style.marginRight=t+"px"};var a=null;this.Kg=function(){var t=this.nav.header,n=this.nav.events;this.cells=[];for(var i=0;i<this.Og();i++){this.cells[i]=[];var r=this.headerProperties?this.headerProperties[i]:null,s=i+l.weekStarts();if(s>6&&(s-=7),r||((r={}).html=l.locale().dayNames[s]),"function"==typeof o.onBeforeHeaderRender){var d={header:{}};d.header.dayOfWeek=s;var c=["html","backColor","cssClass"];e.Util.copyProps(r,d.header,c),o.onBeforeHeaderRender(d),e.Util.copyProps(d.header,r,c)}var u=document.createElement("div");u.setAttribute("unselectable","on"),u.style.position="absolute",u.style.left=this.Ug()*i+"%",u.style.width=this.Ug()+"%",u.style.top="0px",u.style.height=l.headerHeight()+"px",function(e){u.onclick=function(){o.wb(e)}}(s);var h=document.createElement("div");h.setAttribute("unselectable","on"),h.className=this.G("_header_inner"),h.innerHTML=r.html,u.appendChild(h),u.className=this.G("_header"),r&&(r.cssClass&&e.Util.addClass(u,r.cssClass),r.backColor&&(h.style.background=r.backColor)),t.appendChild(u);for(var p=0;p<this.rows.length;p++)this._c(i,p,n)}if(!e.contains(this.nav.top.childNodes,a)&&e.Util.isNullOrUndefined(void 0)){var f=document.createElement("div");f.style.position="absolute",f.style.padding="2px",f.style.top="0px",f.style.left="0px",f.style.backgroundColor="#FF6600",f.style.color="white",f.innerHTML="DEMO",a=f,this.nav.top.appendChild(f)}},this.Jg=function(){for(var e=0;e<this.cells.length;e++)for(var t=0;t<this.cells[e].length;t++)this.cells[e][t].onclick=null;this.nav.header.innerHTML="",this.nav.events.innerHTML=""},this._c=function(t,n,i){var r,a=this.rows[n],s=this.firstDate.addDays(7*n+t),d=null;if(r=this.cellProperties?this.cellProperties[n*this.Og()+t]:null)d=r.headerHtml;else{var c=s.getDay();d=1===c?l.locale().monthNames[s.getMonth()]+" "+c:c+""}if(r||((r={}).business=!o.isWeekend(s),r.headerHtml=d),"function"==typeof o.onBeforeCellRender){var u={cell:{}};u.cell.areas=null,u.cell.backColor=null,u.cell.backImage=null,u.cell.backRepeat=null,u.cell.business=o.isWeekend(s),u.cell.headerHtml=d,u.cell.headerBackColor=null,u.cell.cssClass=null,u.cell.html=null,u.cell.start=s,u.cell.end=u.cell.start.addDays(1),u.cell.events=function(){return o.events.forRange(u.cell.start,u.cell.end)},e.Util.copyProps(r,u.cell),o.onBeforeCellRender(u),e.Util.copyProps(u.cell,r,["areas","backColor","backImage","backRepeat","business","headerHtml","headerBackColor","cssClass","html"])}var h=document.createElement("div");h.setAttribute("unselectable","on"),h.style.position="absolute",h.style.cursor="default",h.style.left=this.Ug()*t+"%",h.style.width=this.Ug()+"%",h.style.top=this.Sg(n)+"px",h.style.height=a.getHeight()+"px",h.d=s,h.x=t,h.y=n,h.props=r;var p=this.startDate.addMonths(-1).getMonth(),f=this.startDate.addMonths(1).getMonth(),g=this.startDate.getMonth(),m=document.createElement("div");m.setAttribute("unselectable","on"),h.appendChild(m),m.className=this.G("_cell_inner"),m.className=this.G("_cell_inner"),s.getMonth()===g?h.className=this.G("_cell"):s.getMonth()===p?h.className=this.G("_cell")+" "+this.G("_previous"):s.getMonth()===f&&(h.className=this.G("_cell")+" "+this.G("_next")),r&&(r.cssClass&&e.Util.addClass(h,r.cssClass),r.business&&e.Util.addClass(h,this.G("_cell_business")),r.backColor&&(m.style.backgroundColor=r.backColor),r.backImage&&(m.style.backgroundImage="url('"+r.backImage+"')"),r.backRepeat&&(m.style.backgroundRepeat=r.backRepeat)),h.onmousedown=this.Yb,h.onmousemove=this.ic,h.onmouseout=this.hc,h.oncontextmenu=this.hh,h.onclick=this.ih,h.ondblclick=this.jh;var v=document.createElement("div");if(v.setAttribute("unselectable","on"),v.style.height=this.cellHeaderHeight+"px",r&&r.headerBackColor&&(v.style.background=r.headerBackColor),v.className=this.G("_cell_header"),v.innerHTML=r.headerHtml,m.appendChild(v),r&&r.html){var y=document.createElement("div");y.setAttribute("unselectable","on"),y.style.height=a.getHeight()-this.cellHeaderHeight+"px",y.style.overflow="hidden",y.innerHTML=r.html,m.appendChild(y)}if(this.cellMode){var b=document.createElement("div");b.setAttribute("unselectable","on"),b.style.height=this.cellHeight-this.cellHeaderHeight+"px",b.style.overflow="auto",b.style.position="relative";var w=document.createElement("div");w.setAttribute("unselectable","on"),w.style.paddingTop="1px",w.style.paddingBottom="1px",b.appendChild(w),m.appendChild(b),h.body=w,h.scrolling=b}if(h.props)for(var C=h.props.areas||[],x=0;x<C.length;x++){var S=C[x];if(e.Areas.isVisible(S)){var T=e.Areas.createArea(h,h.props,S);h.appendChild(T)}}this.cells[t][n]=h,i.appendChild(h),"function"==typeof o.onAfterCellRender&&(u.cell.div=h,u.cell.divHeader=v,o.onAfterCellRender(u))},this.ic=function(){var t=this;t.props&&e.Areas.showAreas(t,t.props)},this.hc=function(t){this.props&&e.Areas.hideAreas(this,t)},this.hh=function(){return function(t){var n=new e.Date(t),i=n.addDays(1),r=new e.Selection(n,i,null,o);o.contextMenuSelection&&o.contextMenuSelection.show(r)}(this.d),!1},this.jh=function(){var t=this.d;if(o.timeouts){for(var n in o.timeouts)window.clearTimeout(o.timeouts[n]);o.timeouts=null}if("Disabled"!==o.timeRangeDoubleClickHandling){var i=new e.Date(t),r=i.addDays(1);o.Rb(i,r)}},this.ih=function(){if(!t.cancelCellClick){var n=this.d,i=function(t){var n=new e.Date(t),i=n.addDays(1);o.Qb(n,i)};if("Disabled"!==o.timeRangeSelectedHandling&&"Disabled"===o.timeRangeDoubleClickHandling)return void i(n);o.timeouts||(o.timeouts=[]),o.timeouts.push(window.setTimeout(function(e){return function(){i(e)}}(n),o.doubleClickTimeout))}},this.Yb=function(n){var i=this,r=i.x,a=i.y;if(t.cancelCellClick=!1,i.scrolling){var l=e.mo3(i.scrolling,n),s=e.sw(i.scrolling);if(l.x>i.scrolling.offsetWidth-s)return}"Disabled"!==o.timeRangeSelectedHandling&&(o.Vg(),t.timeRangeSelecting={root:o,x:r,y:a,from:{x:r,y:a},width:1})},this.Og=function(){return this.showWeekend?7:5},this.Ug=function(){return this.showWeekend?14.285:20},this.Sg=function(e){for(var t=0,n=0;n<e;n++)t+=this.rows[n].getHeight();return t},this.clearSelection=function(){this.Vg()},this.fa=function(e,t,n){var i={};i.action=e,i.parameters=n,i.data=t,i.header=this.ga();var r="JSON"+JSON.stringify(i);__doPostBack(o.uniqueID,r)},this.ha=function(t,n,i,r){if(this.I()){"undefined"==typeof r&&(r="CallBack"),o.ia();var a={};a.action=t,a.type=r,a.parameters=n,a.data=i,a.header=this.ga();var l="JSON"+JSON.stringify(a);this.backendUrl?e.request(this.backendUrl,this.ja,l,this.ka):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,l,this.la,null,this.callbackError,!0)}else o.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning")},this.I=function(){return"javasc"!==o.U&&-1===o.U.indexOf("DCODE")||o.devsb},this.ma=function(){return!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.ka=function(e){if("function"==typeof o.onAjaxError){var t={};t.request=e,o.onAjaxError(t)}else"function"==typeof o.ajaxError&&o.ajaxError(e)},this.ja=function(e){o.la(e.responseText)},this.ga=function(){var t={};return t.v=this.v,t.control="dpm",t.id=this.id,t.visibleStart=new e.Date(this.firstDate),t.visibleEnd=t.visibleStart.addDays(this.days),t.clientState=this.clientState,t.cssClassPrefix=o.cssClassPrefix,t.startDate=o.startDate,t.showWeekend=this.showWeekend,t.locale=this.locale,t.timeFormat=this.timeFormat,t.weekStarts=this.weekStarts,t.viewType=this.viewType,t.weeks=this.weeks,t.selected=o.multiselect.events(),t.hashes=o.hashes,t},this.visibleStart=function(){return new e.Date(this.firstDate)},this.visibleEnd=function(){return o.visibleStart().addDays(o.days)},this.Ab=function(t,n,i,r){if("PostBack"===t)o.postBack2(n,i,r);else if("CallBack"===t)o.ha(n,i,r,"CallBack");else if("Immediate"===t)o.ha(n,i,r,"Notify");else if("Queue"===t)o.queue.add(new e.Action(this,n,i,r));else{if("Notify"!==t)throw"Invalid event invocation type";"Notify"===l.notifyType()?o.ha(n,i,r,"Notify"):o.queue.add(new e.Action(o,n,i,r))}},this.Mb=function(e,t){var n=o.Nb(t),i={};i.args=e,i.guid=n,o.ha("Bubble",i)},this.Nb=function(t){var n=e.guid();return this.bubbles||(this.bubbles=[]),this.bubbles[n]=t,n},this.eventClickPostBack=function(e,t){this.fa("EventClick",t,e)},this.eventClickCallBack=function(e,t){this.ha("EventClick",e,t)},this.pb=function(n,i){if(t.movingEvent=null,t.resizingEvent=null,(i=i||window.event).cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),"undefined"!=typeof e.Bubble&&e.Bubble.hideActive(),"Disabled"!==o.eventDoubleClickHandling){if(o.timeouts){for(var r in o.timeouts)window.clearTimeout(o.timeouts[r]);o.timeouts=[]}else o.timeouts=[];o.timeouts.push(window.setTimeout(function(e,t){return function(){o.qb(e,t)}}(n,i),o.doubleClickTimeout))}else o.qb(n,i)},this.qb=function(e,t){var n=e.event;if(n.client.clickEnabled()){var i=t.ctrlKey,r=t.metaKey;if(o.cb()){var a={};if(a.e=n,a.control=o,a.div=e,a.originalEvent=t,a.meta=t.metaKey,a.ctrl=t.ctrlKey,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onEventClick&&(o.onEventClick(a),a.preventDefault.value))return;switch(o.eventClickHandling){case"PostBack":o.eventClickPostBack(n);break;case"CallBack":o.eventClickCallBack(n);break;case"Select":o.sb(e,n,i,r);break;case"ContextMenu":(l=n.client.contextMenu())?l.show(n):o.contextMenu&&o.contextMenu.show(n);break;case"Bubble":o.bubble&&o.bubble.showEvent(n)}"function"==typeof o.onEventClicked&&o.onEventClicked(a)}else switch(o.eventClickHandling){case"PostBack":o.eventClickPostBack(n);break;case"CallBack":o.eventClickCallBack(n);break;case"JavaScript":o.onEventClick(n);break;case"Select":o.sb(e,n,i,r);break;case"ContextMenu":var l;(l=n.client.contextMenu())?l.show(n):o.contextMenu&&o.contextMenu.show(n);break;case"Bubble":o.bubble&&o.bubble.showEvent(n)}}},this.zb=function(e){if(o.cb()){var t={};if(t.e=e,t.control=o,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onEventDelete&&(o.onEventDelete(t),t.preventDefault.value))return;switch(o.eventDeleteHandling){case"PostBack":o.eventDeletePostBack(e);break;case"CallBack":o.eventDeleteCallBack(e);break;case"Update":o.events.remove(e)}"function"==typeof o.onEventDeleted&&o.onEventDeleted(t)}else switch(o.eventDeleteHandling){case"PostBack":o.eventDeletePostBack(e);break;case"CallBack":o.eventDeleteCallBack(e);break;case"JavaScript":o.onEventDelete(e)}},this.eventDeletePostBack=function(e,t){this.fa("EventDelete",e,t)},this.eventDeleteCallBack=function(e,t){this.ha("EventDelete",e,t)},this.eventDoubleClickPostBack=function(e,t){this.fa("EventDoubleClick",t,e)},this.eventDoubleClickCallBack=function(e,t){this.ha("EventDoubleClick",e,t)},this.tb=function(t,n){if("undefined"!=typeof e.Bubble&&e.Bubble.hideActive(),o.timeouts){for(var i in o.timeouts)window.clearTimeout(o.timeouts[i]);o.timeouts=null}n=n||window.event;var r=t.event;if(o.cb()){var a={};if(a.e=r,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onEventDoubleClick&&(o.onEventDoubleClick(a),a.preventDefault.value))return;switch(o.eventDoubleClickHandling){case"PostBack":o.eventDoubleClickPostBack(r);break;case"CallBack":o.eventDoubleClickCallBack(r);break;case"Select":o.sb(t,r,n.ctrlKey,n.metaKey);break;case"Bubble":o.bubble&&o.bubble.showEvent(r)}"function"==typeof o.onEventDoubleClicked&&o.onEventDoubleClicked(a)}else switch(o.eventDoubleClickHandling){case"PostBack":o.eventDoubleClickPostBack(r);break;case"CallBack":o.eventDoubleClickCallBack(r);break;case"JavaScript":o.onEventDoubleClick(r);break;case"Select":o.sb(t,r,n.ctrlKey,n.metaKey);break;case"Bubble":o.bubble&&o.bubble.showEvent(r)}},this.sb=function(e,t,n,i){o.Tb(e,t,n,i)},this.eventSelectPostBack=function(e,t,n){var i={};i.e=e,i.change=t,this.fa("EventSelect",n,i)},this.eventSelectCallBack=function(e,t,n){var i={};i.e=e,i.change=t,this.ha("EventSelect",i,n)},this.Tb=function(e,t,n,i){var r=o.multiselect,a=r.isSelected(t);if(n||i||!a||1!==r.list.length)if(o.cb()){r.previous=r.events();var l={};if(l.e=t,l.selected=r.isSelected(t),l.ctrl=n,l.meta=i,l.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onEventSelect&&(o.onEventSelect(l),l.preventDefault.value))return;switch(o.eventSelectHandling){case"PostBack":o.eventSelectPostBack(t,s);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),o.eventSelectCallBack(t,s);break;case"Update":r.Xb(e,n)}"function"==typeof o.onEventSelected&&(l.change=r.isSelected(t)?"selected":"deselected",l.selected=r.isSelected(t),o.onEventSelected(l))}else{r.previous=r.events(),r.Xb(e,n);var s=r.isSelected(t)?"selected":"deselected";switch(o.eventSelectHandling){case"PostBack":o.eventSelectPostBack(t,s);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),o.eventSelectCallBack(t,s);break;case"JavaScript":o.onEventSelect(t,s)}}},this.eventRightClickPostBack=function(e,t){this.fa("EventRightClick",t,e)},this.eventRightClickCallBack=function(e,t){this.ha("EventRightClick",e,t)},this.ub=function(e){if(this.event=e,!e.client.rightClickEnabled())return!1;if(o.cb()){var t={};if(t.e=e,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onEventRightClick&&(o.onEventRightClick(t),t.preventDefault.value))return;switch(o.eventRightClickHandling){case"PostBack":o.eventRightClickPostBack(e);break;case"CallBack":o.eventRightClickCallBack(e);break;case"ContextMenu":(n=e.client.contextMenu())?n.show(e):o.contextMenu&&o.contextMenu.show(this.event);break;case"Bubble":o.bubble&&o.bubble.showEvent(e)}"function"==typeof o.onEventRightClicked&&o.onEventRightClicked(t)}else switch(o.eventRightClickHandling){case"PostBack":o.eventRightClickPostBack(e);break;case"CallBack":o.eventRightClickCallBack(e);break;case"JavaScript":o.onEventRightClick(e);break;case"ContextMenu":var n;(n=e.client.contextMenu())?n.show(e):o.contextMenu&&o.contextMenu.show(this.event);break;case"Bubble":o.bubble&&o.bubble.showEvent(e)}return!1},this.eventMenuClickPostBack=function(e,t,n){var i={};i.e=e,i.command=t,this.fa("EventMenuClick",n,i)},this.eventMenuClickCallBack=function(e,t,n){var i={};i.e=e,i.command=t,this.ha("EventMenuClick",i,n)},this.Ob=function(e,t,n){switch(n){case"PostBack":o.eventMenuClickPostBack(t,e);break;case"CallBack":o.eventMenuClickCallBack(t,e)}},this.eventMovePostBack=function(e,t,n,i,o){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var r={};r.e=e,r.newStart=t,r.newEnd=n,r.position=o,this.fa("EventMove",i,r)},this.eventMoveCallBack=function(e,t,n,i,o){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var r={};r.e=e,r.newStart=t,r.newEnd=n,r.position=o,this.ha("EventMove",r,i)},this.Ib=function(t,n,i,r,a,l,s){var d=t.start().getTimePart(),c=t.rawend().getDatePart();c.getTime()!==t.rawend().getTime()&&(c=c.addDays(1));var u=e.DateUtil.diff(t.rawend(),c),h=this.Wg(n,i);h=h.addDays(-r);var p=e.DateUtil.daysSpan(t.start(),t.rawend())+1,f=h.addDays(p),g=h.addTime(d),m=f.addTime(u);if(m=o.kh(m),o.cb()){var v={};if(v.e=t,v.control=o,v.newStart=g,v.newEnd=m,v.position=l,v.ctrl=!1,v.external=s,a&&(v.ctrl=a.ctrlKey),v.shift=!1,a&&(v.shift=a.shiftKey),v.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onEventMove&&(o.onEventMove(v),v.preventDefault.value))return;switch(o.eventMoveHandling){case"PostBack":o.eventMovePostBack(t,g,m,null,l);break;case"CallBack":o.eventMoveCallBack(t,g,m,null,l);break;case"Notify":o.eventMoveNotify(t,g,m,null,l);break;case"Update":v.external?(t.start(g),t.end(m),t.commit(),o.events.add(t)):(t.start(g),t.end(m),o.events.update(t)),o.Kb()}"function"==typeof o.onEventMoved&&o.onEventMoved(v)}else switch(o.eventMoveHandling){case"PostBack":o.eventMovePostBack(t,g,m,null,l);break;case"CallBack":o.eventMoveCallBack(t,g,m,null,l);break;case"JavaScript":o.onEventMove(t,g,m,a.ctrlKey,a.shiftKey,l);break;case"Notify":o.eventMoveNotify(t,g,m,null,l)}},this.eventMoveNotify=function(t,n,i,r,a){var l=new e.Event(t.copy(),this);t.start(n),t.end(i),t.commit(),o.update(),this.Lb("Notify",l,n,i,r,a)},this.Lb=function(e,t,n,i,o,r){var a={};a.e=t,a.newStart=n,a.newEnd=i,a.position=r,this.Ab(e,"EventMove",a,o)},this.eventResizePostBack=function(e,t,n,i){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var o={};o.e=e,o.newStart=t,o.newEnd=n,this.fa("EventResize",i,o)},this.eventResizeCallBack=function(e,t,n,i){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var o={};o.e=e,o.newStart=t,o.newEnd=n,this.ha("EventResize",o,i)},this.Eb=function(t,n,i){var r=t.start().getTimePart(),a=t.rawend().getDatePart();a!=t.rawend()&&(a=a.addDays(1));var l=e.DateUtil.diff(t.rawend(),a),s=this.Wg(n.x,n.y),d=s.addDays(i),c=s.addTime(r),u=d.addTime(l);if(u=o.kh(u),o.cb()){var h={};if(h.e=t,h.control=o,h.newStart=c,h.newEnd=u,h.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onEventResize&&(o.onEventResize(h),h.preventDefault.value))return;switch(o.eventResizeHandling){case"PostBack":o.eventResizePostBack(t,c,u);break;case"CallBack":o.eventResizeCallBack(t,c,u);break;case"Notify":o.eventResizeNotify(t,c,u);break;case"Update":t.start(c),t.end(u),o.events.update(t)}"function"==typeof o.onEventResized&&o.onEventResized(h)}else switch(o.eventResizeHandling){case"PostBack":o.eventResizePostBack(t,c,u);break;case"CallBack":o.eventResizeCallBack(t,c,u);break;case"JavaScript":o.onEventResize(t,c,u);break;case"Notify":o.eventResizeNotify(t,c,u)}},this.eventResizeNotify=function(t,n,i,r){var a=new e.Event(t.copy(),this);t.start(n),t.end(i),t.commit(),o.update(),this.Gb("Notify",a,n,i,r)},this.Gb=function(e,t,n,i,o){var r={};r.e=t,r.newStart=n,r.newEnd=i,this.Ab(e,"EventResize",r,o)},this.timeRangeSelectedPostBack=function(e,t,n){var i={};i.start=e,i.end=t,this.fa("TimeRangeSelected",n,i)},this.timeRangeSelectedCallBack=function(e,t,n){var i={};i.start=e,i.end=t,this.ha("TimeRangeSelected",i,n)},this.Qb=function(e,t){if(t=o.kh(t),o.cb()){var n={};if(n.start=e,n.end=t,n.control=o,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onTimeRangeSelect&&(o.onTimeRangeSelect(n),n.preventDefault.value))return;switch(o.timeRangeSelectedHandling){case"PostBack":o.timeRangeSelectedPostBack(e,t),o.clearSelection();break;case"CallBack":o.timeRangeSelectedCallBack(e,t),o.clearSelection()}"function"==typeof o.onTimeRangeSelected&&o.onTimeRangeSelected(n)}else switch(o.timeRangeSelectedHandling){case"PostBack":o.timeRangeSelectedPostBack(e,t),o.clearSelection();break;case"CallBack":o.timeRangeSelectedCallBack(e,t),o.clearSelection();break;case"JavaScript":o.onTimeRangeSelected(e,t)}},this.timeRangeMenuClickPostBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.fa("TimeRangeMenuClick",n,i)},this.timeRangeMenuClickCallBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.ha("TimeRangeMenuClick",i,n)},this.Pb=function(e,t,n){switch(n){case"PostBack":o.timeRangeMenuClickPostBack(t,e);break;case"CallBack":o.timeRangeMenuClickCallBack(t,e)}},this.headerClickPostBack=function(e,t){this.fa("HeaderClick",t,e)},this.headerClickCallBack=function(e,t){this.ha("HeaderClick",e,t)},this.wb=function(e){var t={day:e};if(o.cb()){var n={header:{}};if(n.header.dayOfWeek=e,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onHeaderClick&&(o.onHeaderClick(n),n.preventDefault.value))return;switch(o.headerClickHandling){case"PostBack":o.headerClickPostBack(t);break;case"CallBack":o.headerClickCallBack(t)}"function"==typeof o.onHeaderClicked&&o.onHeaderClicked(n)}else switch(o.headerClickHandling){case"PostBack":o.headerClickPostBack(t);break;case"CallBack":o.headerClickCallBack(t);break;case"JavaScript":o.onHeaderClick(t)}},this.timeRangeDoubleClickPostBack=function(e,t,n){var i={};i.start=e,i.end=t,this.fa("TimeRangeDoubleClick",n,i)},this.timeRangeDoubleClickCallBack=function(e,t,n){var i={};i.start=e,i.end=t,this.ha("TimeRangeDoubleClick",i,n)},this.Rb=function(e,t){if(o.cb()){var n={};if(n.start=e,n.end=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onTimeRangeDoubleClick&&(o.onTimeRangeDoubleClick(n),n.preventDefault.value))return;switch(o.timeRangeDoubleClickHandling){case"PostBack":o.timeRangeDoubleClickPostBack(e,t);break;case"CallBack":o.timeRangeDoubleClickCallBack(e,t)}"function"==typeof o.onTimeRangeDoubleClicked&&o.onTimeRangeDoubleClicked(n)}else switch(o.timeRangeDoubleClickHandling){case"PostBack":o.timeRangeDoubleClickPostBack(e,t);break;case"CallBack":o.timeRangeDoubleClickCallBack(e,t);break;case"JavaScript":o.onTimeRangeDoubleClick(e,t)}},this.commandCallBack=function(e,t){this.lh();var n={};n.command=e,this.ha("Command",n,t)},this.commandPostBack=function(e,t){this.lh();var n={};n.command=e,this.fa("Command",n,t)},this.Ke=function(e){for(var t=0;t<o.elements.events.length;t++){var n=o.elements.events[t];if(n.event===e||n.event.data===e.data)return n}return null},this.$g=function(e){for(var t={list:[],forEach:function(e){if(e)for(var t=0;t<this.list.length;t++)e(this.list[t])}},n=0;n<this.elements.events.length;n++){var i=this.elements.events[n];i.event.data===e.data&&t.list.push(i)}return t},this.Qe=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.className=this.G(e),document.body.appendChild(t);var n=t.offsetHeight,i=t.offsetWidth;document.body.removeChild(t);var o={};return o.height=n,o.width=i,o},this.ea={};var l=this.ea;l.da=function(){return"Disabled"!==o.xssProtection},l.clearCache=function(){delete o.P.eventHeight,delete o.P.headerHeight},l.lineHeight=function(){return l.eventHeight()+o.lineSpace},l.rounded=function(){return"Rounded"===o.eventCorners},l.loadFromServer=function(){return!!o.backendUrl},l.locale=function(){return e.Locale.find(o.locale)},l.getWeekStart=function(){return o.showWeekend?o.weekStarts:1},l.weekStarts=function(){if(!o.showWeekend)return 1;if("Auto"===o.weekStarts){var e=l.locale();return e?e.weekStarts:0}return o.weekStarts},l.notifyType=function(){var e;if("Immediate"===o.notifyCommit)e="Notify";else{if("Queue"!==o.notifyCommit)throw"Invalid notifyCommit value: "+o.notifyCommit;e="Queue"}return e},l.eventHeight=function(){if(o.P.eventHeight)return o.P.eventHeight;var e=o.Qe("_event_height").height;return e||(e=o.eventHeight),o.P.eventHeight=e,e},l.headerHeight=function(){if(o.P.headerHeight)return o.P.headerHeight;var e=o.Qe("_header_height").height;return e||(e=o.headerHeight),o.P.headerHeight=e,e},l.timeFormat=function(){return"Auto"!==o.timeFormat?o.timeFormat:l.locale().timeFormat},this.ge=function(){var e=o.nav.top;return!!e&&e.offsetWidth>0&&e.offsetHeight>0},this.exportAs=function(t,n){if(!o.ge())throw new e.Exception("DayPilot.Month.exportAs(): The instance must be visible during export.");var i=s.generate(t,n);return new e.Export(i)},this.Re={};var s=this.Re;s.Se=null,s.Te=null,s.generate=function(t,n){"object"==typeof t&&(n=t,t=null),n=n||{},t=t||n.format||"svg";var i=n.scale||1;if("config"!==t){"jpg"===t.toLowerCase()&&(t="jpeg");var r=n.area||"viewport";s.Se=n,s.Te=r;var a,d=s.getWidth(),c=s.getHeight();switch(t.toLowerCase()){case"svg":a=new e.Svg(d,c);break;case"png":a=new e.Canvas(d,c,"image/png",i);break;case"jpeg":a=new e.Canvas(d,c,"image/jpeg",i,n.quality);break;default:throw"Export format not supported: "+t}var u=s.getRectangles(),h=new e.StyleReader(o.nav.top).get("background-color"),p=new e.StyleReader(o.nav.top).get("border-top-color"),f=o.nav.header.firstChild.firstChild,g=new e.StyleReader(f).get("background-color"),m=new e.StyleReader(f).getFont(),v=new e.StyleReader(f).get("color"),y=o.cells[0][0].firstChild,b=(new e.StyleReader(y).get("background-color"),new e.StyleReader(y).get("border-right-color")),w=u.grid.w*o.Ug()/100,C=0;a.fillRect(u.main,"white"),a.fillRect(u.main,h),e.list.for(o.Og()).forEach(function(t){var n=o.headerProperties?o.headerProperties[t]:null,i=t+l.weekStarts();i>6&&(i-=7),n||((n={}).html=l.locale().dayNames[i]);var r=w,s=l.headerHeight(),d=n.html,c={x:C,y:0,w:r+1,h:s+1},u=e.Util.copyProps(c),h={header:{}};h.header.dayOfWeek=i,h.backColor=g,h.text=d,h.horizontalAlignment="center",h.verticalAlignment="center",h.fontSize=m.size,h.fontFamily=m.family,h.fontStyle=m.style,h.fontColor=v,"function"==typeof o.onBeforeHeaderExport&&o.onBeforeHeaderExport(h);var f={size:h.fontSize,family:h.fontFamily,style:h.fontStyle};a.fillRect(c,h.backColor),a.rect(c,p),a.text(u,h.text,f,h.fontColor,h.horizontalAlignment,0,h.verticalAlignment),C+=r});var x=u.grid.y;s.getRows().forEach(function(t){var n=t.getHeight(),i=0,r=o.rows.indexOf(t);e.list.for(o.Og()).forEach(function(t){var l=o.cells[t][r].props,s=w,d=new e.StyleReader(o.cells[t][r].firstChild).get("background-color"),c=o.cells[t][r].firstChild.firstChild,u=new e.StyleReader(c).getFont(),h=new e.StyleReader(c).get("color"),p=new e.StyleReader(c).get("background-color"),f=o.firstDate.addDays(7*r+t),g={cell:{}};g.cell.start=f,g.cell.end=f.addDays(1),g.backColor=d,g.text=l.headerHtml,g.horizontalAlignment="right","function"==typeof o.onBeforeCellExport&&o.onBeforeCellExport(g);var m={x:i,y:x,w:s+1,h:n+1};a.fillRect(m,g.backColor),a.rect(m,b);var v={x:i,y:x,w:s-2,h:o.cellHeaderHeight};a.fillRect(m,p),a.text(v,g.text,u,h,g.horizontalAlignment),i+=s}),x+=n});var S=0;return s.getRows().forEach(function(t){var n=t.getHeight();e.list(t.lines).forEach(function(t){e.list(t).forEach(function(t){var n=t.cache||t.data,i=s.fakeEvent();i.className+=" "+n.cssClass;var r=i.firstChild,d=new e.StyleReader(r).get("border-right-color"),c=new e.StyleReader(r).getFont(),h=new e.StyleReader(r).get("color"),p=new e.StyleReader(r).getBackColor(),f={};f.left=new e.StyleReader(r).getPx("padding-left"),f.right=new e.StyleReader(r).getPx("padding-right"),f.top=new e.StyleReader(r).getPx("padding-top"),f.bottom=new e.StyleReader(r).getPx("padding-bottom"),e.de(i);var g=n.backColor||p,m={};m.e=t,m.text=t.text?t.text():t.client.html(),m.fontSize=c.size,m.fontFamily=c.family,m.fontStyle=c.style,m.fontColor=n.fontColor||h,m.backColor=n.backColor||g,m.borderColor=d,m.horizontalAlignment="left","function"==typeof o.onBeforeEventExport&&o.onBeforeEventExport(m);var v=w*t.part.colWidth,y={x:w*t.part.colStart+2,y:S+o.cellHeaderHeight+t.part.line*l.lineHeight()+u.grid.y+2,w:v+1-4,h:l.eventHeight()},b=e.Util.copyProps(y);b.x+=f.left,b.w-=f.left+f.right,b.y+=f.top,b.h-=f.top+f.bottom,a.fillRect(y,m.backColor),a.text(b,m.text,{size:m.fontSize,family:m.fontFamily,style:m.fontStyle},m.fontColor,m.horizontalAlignment),a.rect(y,m.borderColor)})}),S+=n}),a.rect(u.main,p),a.line(u.grid.x,0,u.grid.x,u.main.h,p),a.line(0,u.grid.y,u.main.w,u.grid.y,p),a}},s.fakeEvent=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px",e.style.display="none",e.className=o.G("_event");var t=document.createElement("div");return t.className=o.G("_event_inner"),e.appendChild(t),o.nav.events.appendChild(e),e},s.fakeCell=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px",e.style.display="none",e.className=o.G("_cell");var t=document.createElement("div");return t.className=o.G("_cell_inner"),e.appendChild(t),o.nav.events.appendChild(e),e},s.getWidth=function(){var e=s.Te,t=Math.floor(o.nav.top.clientWidth/o.Og())*o.Og();switch(e){case"viewport":case"full":case"range":return"number"==typeof s.Se.width?s.Se.width:t;default:throw"Unsupported export mode: "+e}},s.getHeight=function(){var e=s.Te;switch(e){case"viewport":case"full":return o.nav.top.clientHeight;case"range":var t=l.headerHeight();return s.getRows().forEach(function(e){t+=e.getHeight()}),t;default:throw"Unsupported export mode: "+e}},s.getRows=function(){var t=new e.Date(s.Se.dateFrom||o.visibleStart()),n=new e.Date(s.Se.dateTo||o.visibleEnd());return o.rows.filter(function(i){return"range"!==s.Te||e.Util.overlaps(i.start,i.end,t,n)})},s.getRectangles=function(){var e=l.headerHeight(),t={};return t.main={x:0,y:0,w:s.getWidth(),h:s.getHeight()},t.grid={x:0,y:e,w:s.getWidth(),h:s.getHeight()-e},t},this.multiselect={},this.multiselect.initList=[],this.multiselect.list=[],this.multiselect.divs=[],this.multiselect.previous=[],this.multiselect.vc=function(){return JSON.stringify(o.multiselect.events())},this.multiselect.events=function(){var e=o.multiselect,t=[];t.ignoreToJSON=!0;for(var n=0;n<e.list.length;n++)t.push(e.list[n]);return t},this.multiselect.wc=function(){},this.multiselect.Xb=function(e,t){var n=o.multiselect;if(n.isSelected(e.event))if(o.allowMultiSelect)if(t)n.remove(e.event,!0);else{var i=n.list.length;n.clear(!0),i>1&&n.add(e.event,!0)}else n.clear(!0);else o.allowMultiSelect&&t?n.add(e.event,!0):(n.clear(!0),n.add(e.event,!0));n.redraw(),n.wc()},this.multiselect.xc=function(e){var t=o.multiselect;return t.yc(e,t.initList)},this.multiselect.zc=function(){for(var e=o.multiselect,t=[],n=0;n<e.list.length;n++)t.push(e.list[n].value());alert(t.join("\n"))},this.multiselect.add=function(e,t){var n=o.multiselect;-1===n.Ac(e)&&n.list.push(e),t||n.redraw()},this.multiselect.remove=function(e,t){var n=o.multiselect,i=n.Ac(e);-1!==i&&n.list.splice(i,1)},this.multiselect.clear=function(e){var t=o.multiselect;t.list=[],e||t.redraw()},this.multiselect.redraw=function(){for(var e=o.multiselect,t=0;t<o.elements.events.length;t++){var n=o.elements.events[t];e.isSelected(n.event)?e.Bc(n):e.Cc(n)}},this.multiselect.Bc=function(t){var n=o.multiselect,i=o.G("_selected");t=n.Dc(t),e.Util.addClass(t,i),n.divs.push(t)},this.multiselect.Dc=function(e){return e},this.multiselect.Ec=function(){for(var e=o.multiselect,t=0;t<e.divs.length;t++)e.Cc(e.divs[t],!0);e.divs=[]},this.multiselect.Cc=function(t,n){var i=o.multiselect,r=o.G("_selected"),a=i.Dc(t);if(a&&a.className&&-1!==a.className.indexOf(r)&&(a.className=a.className.replace(r,"")),!n){var l=e.indexOf(i.divs,t);-1!==l&&i.divs.splice(l,1)}},this.multiselect.isSelected=function(e){return o.multiselect.yc(e,o.multiselect.list)},this.multiselect.Ac=function(e){for(var t=e.data,n=0;n<o.multiselect.list.length;n++)if(o.Fc(o.multiselect.list[n].data,t))return n;return-1},this.multiselect.yc=function(e,t){if(!t)return!1;for(var n=0;n<t.length;n++)if(o.Fc(e,t[n]))return!0;return!1},this.Fc=function(t,n){return e.Util.isSameEvent(t,n)},this.events.forRange=function(t,n){return t=new e.Date(t),n=new e.Date(n),e.list(o.events.list).filter(function(i){var o=new e.Date(i.start),r=new e.Date(i.end);return o===r&&o===t||e.Util.overlaps(t,n,o,r)}).map(function(t){return new e.Event(t,o)})},this.events.find=function(t){if(!o.events.list||"undefined"==typeof o.events.list.length)return null;for(var n=o.events.list.length,i=0;i<n;i++)if(o.events.list[i].id===t)return new e.Event(o.events.list[i],o);return null},this.events.findRecurrent=function(t,n){if(!o.events.list||"undefined"==typeof o.events.list.length)return null;for(var i=o.events.list.length,r=0;r<i;r++)if(o.events.list[r].recurrentMasterId===t&&o.events.list[r].start.getTime()===n.getTime())return new e.Event(o.events.list[r],o);return null},this.events.update=function(t,n){var i={};i.oldEvent=new e.Event(t.copy(),o),i.newEvent=new e.Event(t.temp(),o);var r=new e.Action(o,"EventUpdate",i,n);return t.commit(),o.S&&o.update(),o.Le.notify(),r},this.events.remove=function(t,n){var i={};i.e=new e.Event(t.data,o);var r=new e.Action(o,"EventRemove",i,n),a=e.indexOf(o.events.list,t.data);return o.events.list.splice(a,1),o.S&&o.update(),o.Le.notify(),r},this.events.add=function(t,n){t instanceof e.Event||(t=new e.Event(t)),t.calendar=o,o.events.list||(o.events.list=[]),o.events.list.push(t.data);var i={};i.e=t;var r=new e.Action(o,"EventAdd",i,n);return o.S&&o.update(),o.Le.notify(),r},this.events.filter=function(e){o.events.Ge=e,o.Jc()},this.events.load=function(t,n,i){var r=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},a=function(t){var i,a=t.request;try{i=JSON.parse(a.responseText)}catch(t){var l={};return l.exception=t,void r(l)}if(e.isArray(i)){var s={preventDefault:function(){this.preventDefault.value=!0}};if(s.data=i,"function"==typeof n&&n(s),s.preventDefault.value)return;o.events.list=i,o.S&&o.update()}};if(o.eventsLoadMethod&&"POST"===o.eventsLoadMethod.toUpperCase())e.ajax({method:"POST",data:{start:o.visibleStart().toString(),end:o.visibleEnd().toString()},url:t,success:a,error:r});else{var l=t,s="start="+o.visibleStart().toString()+"&end="+o.visibleEnd().toString();l+=l.indexOf("?")>-1?"&"+s:"?"+s,e.ajax({method:"GET",url:l,success:a,error:r})}},this.queue={},this.queue.list=[],this.queue.list.ignoreToJSON=!0,this.queue.add=function(e){if(e){if(!e.isAction)throw"DayPilot.Action object required for queue.add()";o.queue.list.push(e)}},this.queue.notify=function(e){var t={};t.actions=o.queue.list,o.ha("Notify",t,e,"Notify"),o.queue.list=[]},this.queue.clear=function(){o.queue.list=[]},this.queue.pop=function(){return o.queue.list.pop()},this.kh=function(e){return"DateTime"===o.eventEndSpec?e:e.getDatePart().ticks===e.ticks?e.addDays(-1):e.getDatePart()},this.Ng=function(e){return"DateTime"===o.eventEndSpec?e:e.getDatePart().addDays(1)},this.mh=function(e){return"DateTime"===o.eventEndSpec?e:e.getDatePart()},this.bb=function(e){if(e&&(this.autoRefreshEnabled=!0),this.autoRefreshEnabled&&!(this.R>=this.autoRefreshMaxCount)){this.lh();var t=this.autoRefreshInterval;if(!t||t<10)throw"The minimum autoRefreshInterval is 10 seconds";this.autoRefreshTimeout=window.setTimeout(function(){o.me()},1e3*this.autoRefreshInterval)}},this.lh=function(){this.autoRefreshTimeout&&window.clearTimeout(this.autoRefreshTimeout)},this.me=function(){if(!t.eventResizing&&!t.eventMoving&&!t.timeRangeSelecting){var e=!1;if("function"==typeof this.onAutoRefresh){var n={};n.i=this.R,n.preventDefault=function(){this.preventDefault.value=!0},o.onAutoRefresh(n),n.preventDefault.value&&(e=!0)}!e&&this.I()&&this.commandCallBack(this.autoRefreshCommand),this.R++}this.R<this.autoRefreshMaxCount&&(this.autoRefreshTimeout=window.setTimeout(function(){o.me()},1e3*this.autoRefreshInterval))},this.Jc=function(e){if(this.cells){var t=!(e=e||{}).eventsOnly;o.cssOnly||(o.cssOnly=!0),o.pa(),o.Ig(),o.Ma(),t&&(o.ea.clearCache(),o.Jg(),o.Kg()),o.Ua(),o.Ya(),o.Za(),this.visible?this.show():this.hide()}},this.update=function(t){if(!o.S)throw new e.Exception("You are trying to update a DayPilot.Month instance that hasn't been initialized yet.");if(o.T)throw new e.Exception("You are trying to update a DayPilot.Month instance that has been disposed.");this.Oe(t),this.Jc()},this.dispose=function(){var n=o;n.nav.top&&(n.lh(),n.pa(),n.nav.top.removeAttribute("style"),n.nav.top.removeAttribute("class"),n.nav.top.innerHTML="",n.nav.top.dp=null,n.nav.top.onmousemove=null,n.nav.top.ontouchstart=null,n.nav.top.ontouchmove=null,n.nav.top.ontouchend=null,n.nav.top=null,e.ue(window,"resize",n.xa),t.unregister(n),"undefined"!=typeof e.Bubble&&(e.Bubble.cancelShowing(),e.Bubble.hide({calendar:n})),"undefined"!=typeof e.Menu&&e.Menu.hide({calendar:n}))},this.pe=function(){t.globalHandlers||(t.globalHandlers=!0,e.re(document,"mousemove",t.gMouseMove),e.re(document,"mouseup",t.gMouseUp)),e.re(window,"resize",this.xa)},this.Aa=function(){},this.Kb=function(){if(o.todo&&o.todo.del){var e=o.todo.del;e.parentNode.removeChild(e),o.todo.del=null}},this.cd=function(){switch(o.U){case"aspnet":if(!this.ma())throw new e.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");break;case"netmvc":if(!this.backendUrl)throw new e.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");break;case"javaxx":if(!this.backendUrl)throw new e.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/")}},this.Ya=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.show=function(){o.visible=!0,o.nav.top.style.display=""},this.hide=function(){o.visible=!1,o.nav.top.style.display="none"},this.Ve=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Month() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Month: The placeholder element not found: '"+n+"'."}!function(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push(e.charCodeAt(o)-1);new Function("t","u",String.fromCharCode.apply(this,i))(t,n)}("wbs!mi>mpdbujpo/iptuobnf<jg)mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2*tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<",this,this.nav.top)},this.We=function(){this.Ve(),this.Ig(),this.fd(),this.Kg(),this.Ua(),this.pe(),this.bb(),this.ha("Init"),t.register(this)},this.init=function(){if(this.S)throw new e.Exception("This instance is already initialized. Use update() to change properties.");if(this.Ve(),this.nav.top.dp){if(this.nav.top.dp===o)return o;if(this.ma())return o;throw new e.Exception("The target placeholder was already initialized by another DayPilot component instance.")}this.cd();var n=l.loadFromServer();return o.cssOnly||(o.cssOnly=!0,window.console&&window.console.log&&window.console.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")),n?(this.We(),this.S=!0,this):(this.Ig(),this.Ma(),this.fd(),this.Kg(),this.Ya(),this.Za(),this.Ua(),this.pe(),this.messageHTML&&window.setTimeout(function(){o.message(o.messageHTML)},0),this.Ha(null,!1),o.initEventEnabled&&setTimeout(function(){o.ha("Init")}),this.bb(),t.register(this),this.S=!0,this.Xe(),this)},this.Ye=null,this.Oe=function(t){if(t){var n={events:{preInit:function(){var t=this.data;t&&(o.events.list=e.isArray(t.list)?t.list:t)}}};for(var i in this.Ye=n,t)if(n[i]){var r=n[i];r.data=t[i],r.preInit&&r.preInit()}else o[i]=t[i]}},this.Xe=function(){var e=this.Ye;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.internal={},this.internal.initialized=function(){return o.S},this.internal.invokeEvent=this.Ab,this.internal.eventMenuClick=this.Ob,this.internal.timeRangeMenuClick=this.Pb,this.internal.bubbleCallBack=this.Mb,this.internal.findEventDiv=this.Ke,this.internal.adjustEndIn=this.Ng,this.internal.xssTextHtml=o.ca,this.internal.touch=o.Yc,this.Init=this.init,this.Oe(i)},e.Month.makeDraggable=function(n){function i(){var i=n.duration||60;i instanceof e.Duration&&(i=i.totalSeconds());var o=t.drag={};o.element=r,o.id=n.id,o.duration=i,o.text=n.text||"",o.data=n,o.shadowType="Fill"}var o=n.element,r=n.keepElement?null:o;navigator.msPointerEnabled&&(o.style.msTouchAction="none",o.style.touchAction="none");var a=function(e){i();var t=e.target||e.srcElement;if(t.tagName){var n=t.tagName.toLowerCase();if("textarea"===n||"select"===n||"input"===n)return!1}return e.preventDefault&&e.preventDefault(),!1},l=function(n){e.Util.isMouseEvent(n)||(window.setTimeout(function(){i(),t.gTouchMove(n),n.preventDefault()},0),n.preventDefault())};e.us(o),e.re(o,"mousedown",a),e.re(o,e.touch.start,l),o.cancelDraggable=function(){e.ue(o,"mousedown",a),e.ue(o,e.touch.start,l),delete o.cancelDraggable}},t.createGShadow=function(){var e=document.createElement("div");return e.setAttribute("unselectable","on"),e.style.position="absolute",e.style.width="100px",e.style.height="20px",e.style.border="2px dotted #666666",e.style.zIndex=101,e.style.pointerEvents="none",e.style.backgroundColor="#aaaaaa",e.style.opacity=.5,e.style.filter="alpha(opacity=50)",e.style.border="2px solid #aaaaaa",document.body.appendChild(e),e},t.gMouseMove=function(n){if("undefined"!=typeof t&&!(n.insideMainD||n.srcElement&&n.srcElement.inside)){var i=e.mc(n);if(t.drag){document.body.style.cursor="move",t.gShadow||(t.gShadow=t.createGShadow());var o=t.gShadow;o.style.left=i.x+"px",o.style.top=i.y+"px",t.movingEvent=null,e.de(t.movingShadow),t.movingShadow=null}for(var r=0;r<t.registered.length;r++)t.registered[r].Aa&&t.registered[r].Aa()}},t.register=function(e){t.registered||(t.registered=[]);for(var n=0;n<t.registered.length;n++)if(t.registered[n]===e)return;t.registered.push(e)},t.unregister=function(n){var i=t.registered;if(i){var o=e.indexOf(i,n);-1!==o&&i.splice(o,1),0===i.length&&(i=null)}i||(e.ue(document,"mouseup",t.gMouseUp),t.globalHandlers=!1)},t.gMouseUp=function(n){if(t.drag&&(t.drag=null,document.body.style.cursor=""),t.gShadow&&(document.body.removeChild(t.gShadow),t.gShadow=null),t.movingEvent){var i=t.movingEvent;if(t.movingEvent=null,!(i.event&&i.event.calendar&&i.event.calendar.shadow&&i.event.calendar.shadow.start))return;var o=i.event,r=(u=i.event.calendar).shadow.start,a=u.shadow.position,l=i.offset,s=i.external,d=i.removeElement;return d&&(u.todo||(u.todo={}),u.todo.del=d),u.Vg(),n=n||window.event,u.Ib(o,r.x,r.y,l,n,a,s),n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation(),!1}if(t.resizingEvent){if(i=t.resizingEvent,t.resizingEvent=null,!(i.event&&i.event.calendar&&i.event.calendar.shadow&&i.event.calendar.shadow.start))return;o=i.event,r=(u=i.event.calendar).shadow.start;var c=u.shadow.width;return u.Vg(),u.Eb(o,r,c),n.cancelBubble=!0,!1}if(t.timeRangeSelecting){if(t.timeRangeSelecting.moved){var u,h=t.timeRangeSelecting,p=(r=new e.Date((u=h.root).Wg(h.from.x,h.from.y))).addDays(h.width);u.Qb(r,p)}t.timeRangeSelecting=null}},"undefined"!=typeof jQuery&&(jQuery.fn.daypilotMonth=function(t){var n=null,i=this.each(function(){if(!this.daypilot){var i=new e.Month(this.id,t);i.init(),this.daypilot=i,n||(n=i)}});return 1===this.length?n:i}),function(){var t=e.am();t&&t.directive("daypilotMonth",["$parse",function(t){return{restrict:"E",template:"<div id='{{id}}'></div>",compile:function(n,i){return n.replaceWith(this.template.replace("{{id}}",i.id)),function(n,i,o){var r=new e.Month(i[0]);r.Le.scope=n,r.init();var a=o.id;a&&(n[a]=r);var l=o.publishAs;for(var s in l&&(0,t(l).assign)(n,r),o)0===s.indexOf("on")&&(e.Util.shouldApply(s)?function(e){r[e]=function(i){var r=t(o[e]);n.$apply(function(){r(n,{args:i})})}}(s):function(e){r[e]=function(i){t(o[e])(n,{args:i})}}(s));var d=n.$watch,c=o.events||o.daypilotEvents;d.call(n,o.config||o.daypilotConfig,function(e,t){for(var n in e)r[n]=e[n];r.update()},!0),d.call(n,c,function(e){r.events.list=e,r.Jc({eventsOnly:!0})},!0)}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){var t;"undefined"==typeof e.Navigator&&(e.Navigator=function(t,n){this.v="2021.3.5046";var i=this;this.id=t,this.api=2,this.isNavigator=!0,this.autoFocusOnClick=!0,this.weekStarts="Auto",this.selectMode="day",this.titleHeight=30,this.dayHeaderHeight=30,this.bound=null,this.cellWidth=30,this.cellHeight=30,this.cssOnly=!0,this.cssClassPrefix="navigator_default",this.freeHandSelectionEnabled=!1,this.selectionStart=(new e.Date).getDatePart(),this.selectionEnd=null,this.selectionDay=null,this.showMonths=1,this.skipMonths=1,this.command="navigate",this.year=(new e.Date).getYear(),this.month=(new e.Date).getMonth()+1,this.showWeekNumbers=!1,this.weekNumberAlgorithm="Auto",this.rowsPerMonth="Six",this.orientation="Vertical",this.locale="en-us",this.rtl=!1,this.visible=!0,this.timeRangeSelectedHandling="Bind",this.visibleRangeChangedHandling="Enabled",this.onVisibleRangeChange=null,this.onVisibleRangeChanged=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.nav={},this.P={},this.nh=function(){this.root.dp=this,this.root.className=this.G(this.cssOnly?"_main":"main"),"Horizontal"===this.orientation?(this.root.style.width=this.showMonths*(7*a.cellWidth()+this.oh())+"px",this.root.style.height=6*this.cellHeight+this.titleHeight+this.dayHeaderHeight+"px"):this.root.style.width=7*a.cellWidth()+this.oh()+"px",this.rtl&&(this.root.style.direction="rtl"),this.root.style.position="relative",this.visible||(this.root.style.display="none");var t=document.createElement("input");t.type="hidden",t.name=i.id+"_state",t.id=t.name,this.root.appendChild(t),this.state=t,this.startDate=this.startDate?new e.Date(this.startDate).firstDayOfMonth():e.Date.fromYearMonthDay(this.year,this.month),this.calendars=[],this.selected=[],this.months=[]},this.cb=function(){return 2===i.api},this.Jg=function(){this.root.innerHTML=""},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.ph=function(t,n){var i=this.G(this.cssOnly?"_"+n:n);e.Util.addClass(t,i)},this.qh=function(t,n){var i=this.G(this.cssOnly?"_"+n:n);e.Util.removeClass(t,i)},this.Kg=function(t,n){var o={cells:[],days:[],weeks:[]},r=this.startDate.addMonths(t),l=n.before,s=n.after,d=r.firstDayOfMonth(),c=d.firstDayOfWeek(a.weekStarts()),u=d.addMonths(1),h=e.DateUtil.daysDiff(c,u),p="Auto"===this.rowsPerMonth?Math.ceil(h/7):6;o.rowCount=p;var f=(new e.Date).getDatePart(),g=7*a.cellWidth()+this.oh();o.width=g;var m=this.cellHeight*p+this.titleHeight+this.dayHeaderHeight;o.height=m;var v=document.createElement("div");v.style.width=g+"px",v.style.height=m+"px","Horizontal"===this.orientation?(v.style.position="absolute",v.style.left=g*t+"px",v.style.top="0px",o.top=0,o.left=g*t):(v.style.position="relative",o.top=t>0?i.months[t-1].top+i.months[t-1].height:0,o.left=0),v.className=this.G(this.cssOnly?"_month":"month"),v.style.cursor="default",v.style.MozUserSelect="none",v.style.KhtmlUserSelect="none",v.style.WebkitUserSelect="none",v.month=o,this.root.appendChild(v);var y=this.titleHeight+this.dayHeaderHeight,b=document.createElement("div");b.style.position="absolute",b.style.left="0px",b.style.right="0px",b.style.top="0px",b.style.width=a.cellWidth()+"px",b.style.height=this.titleHeight+"px",b.style.lineHeight=this.titleHeight+"px",b.setAttribute("unselectable","on"),b.className=this.G(this.cssOnly?"_titleleft":"titleleft"),n.left&&(b.style.cursor="pointer",b.innerHTML="<span>&lt;</span>",b.onclick=this.rh),v.appendChild(b),this.tl=b;var w=document.createElement("div");w.style.position="absolute",w.style.left=a.cellWidth()+"px",w.style.top="0px",w.style.width=5*a.cellWidth()+this.oh()+"px",w.style.height=this.titleHeight+"px",w.style.lineHeight=this.titleHeight+"px",w.setAttribute("unselectable","on"),w.className=this.G(this.cssOnly?"_title":"title"),w.innerHTML=a.locale().monthNames[r.getMonth()]+" "+r.getYear(),v.appendChild(w),this.ti=w;var C=document.createElement("div");C.style.position="absolute",C.style.left=6*a.cellWidth()+this.oh()+"px",C.style.right=6*a.cellWidth()+this.oh()+"px",C.style.top="0px",C.style.width=a.cellWidth()+"px",C.style.height=this.titleHeight+"px",C.style.lineHeight=this.titleHeight+"px",C.setAttribute("unselectable","on"),C.className=this.G(this.cssOnly?"_titleright":"titleright"),n.right&&(C.style.cursor="pointer",C.innerHTML="<span>&gt;</span>",C.onclick=this.uh),v.appendChild(C),this.tr=C;var x=this.oh();if(this.showWeekNumbers)for(var S=0;S<p;S++){var T=c.addDays(7*S),E=null;switch(this.weekNumberAlgorithm){case"Auto":E=1===a.weekStarts()?T.weekNumberISO():T.weekNumber();break;case"US":E=T.weekNumber();break;case"ISO8601":E=T.weekNumberISO();break;default:throw"Unknown weekNumberAlgorithm value."}(k=document.createElement("div")).style.position="absolute",k.style.left="0px",k.style.right="0px",k.style.top=S*this.cellHeight+y+"px",k.style.width=a.cellWidth()+"px",k.style.height=this.cellHeight+"px",k.style.lineHeight=this.cellHeight+"px",k.setAttribute("unselectable","on"),k.className=this.G(this.cssOnly?"_weeknumber":"weeknumber"),k.innerHTML="<span>"+E+"</span>",v.appendChild(k),o.weeks.push(k)}for(var _=0;_<7;_++){var k;for(o.cells[_]=[],(k=document.createElement("div")).style.position="absolute",k.style.left=_*a.cellWidth()+x+"px",k.style.right=_*a.cellWidth()+x+"px",k.style.top=this.titleHeight+"px",k.style.width=a.cellWidth()+"px",k.style.height=this.dayHeaderHeight+"px",k.style.lineHeight=this.dayHeaderHeight+"px",k.setAttribute("unselectable","on"),k.className=this.G(this.cssOnly?"_dayheader":"dayheader"),k.innerHTML="<span>"+this.vh(_)+"</span>",v.appendChild(k),o.days.push(k),S=0;S<p;S++){T=c.addDays(7*S+_);var D=this.wh(T)&&"none"!==this.xh(),A=T.firstDayOfMonth()===r,O=T<r,I=T>=r.addMonths(1);if("month"===this.xh())D=D&&A;else if("day"===this.xh())D=D&&(A||l&&O||s&&I);else if("week"===this.xh()){var P=T.firstDayOfMonth()===r;D=D&&(P||l&&O||s&&I)}var R=document.createElement("div");o.cells[_][S]=R;var M=i.yh(_,S),N=M.x,L=M.y;R.day=T,R.x=_,R.y=S,R.left=N,R.top=L,R.isCurrentMonth=A,R.isNextMonth=I,R.isPrevMonth=O,R.showBefore=l,R.showAfter=s,R.className=this.G(this.cssOnly?A?"_day":"_dayother":A?"day":"dayother"),i.ph(R,"cell"),T.getTime()===f.getTime()&&A&&this.ph(R,"today"),0!==T.dayOfWeek()&&6!==T.dayOfWeek()||this.ph(R,"weekend"),R.style.position="absolute",R.style.left=N+"px",R.style.right=N+"px",R.style.top=L+"px",R.style.width=a.cellWidth()+"px",R.style.height=this.cellHeight+"px",R.style.lineHeight=this.cellHeight+"px";var H=document.createElement("div");H.style.position="absolute",H.className=this.cssOnly?T.getTime()===f.getTime()&&A?this.G("_todaybox"):this.G("_daybox"):T.getTime()===f.getTime()&&A?this.G("todaybox"):this.G("daybox"),i.ph(H,"cell_box"),H.style.left="0px",H.style.top="0px",H.style.right="0px",H.style.bottom="0px",R.appendChild(H);var B=null;if(this.cells&&this.cells[T.toStringSortable()]&&(B=this.cells[T.toStringSortable()]),"function"==typeof i.onBeforeCellRender){var j={};j.cell=B||{},j.cell.day=T,j.cell.isCurrentMonth=A,j.cell.isToday=T.getTime()===f.getTime()&&A,j.cell.isWeekend=0===T.dayOfWeek()||6===T.dayOfWeek(),B?(j.cell.html=B.html||T.getDay(),j.cell.cssClass=B.css):(j.cell.html=T.getDay(),j.cell.cssClass=null),i.onBeforeCellRender(j),B=j.cell}if(B&&e.Util.addClass(R,B.cssClass||B.css),A||l&&O||s&&I){var z=document.createElement("div");z.innerHTML=T.getDay(),z.style.position="absolute",z.style.left="0px",z.style.top="0px",z.style.right="0px",z.style.bottom="0px",i.ph(z,"cell_text"),R.isClickable=!0,B&&B.html&&(z.innerHTML=B.html),R.appendChild(z)}R.setAttribute("unselectable","on"),R.onclick=this.zh,v.appendChild(R),D&&(i.Ah(v,_,S),this.selected.push(R))}}var U=document.createElement("div");U.style.position="absolute",U.style.left="0px",U.style.top=y-2+"px",U.style.width=7*a.cellWidth()+this.oh()+"px",U.style.height="1px",U.style.fontSize="1px",U.style.lineHeight="1px",U.className=this.G(this.cssOnly?"_line":"line"),v.appendChild(U),this.months.push(o)},this.yh=function(e,t){var n=this.titleHeight+this.dayHeaderHeight,i=this.oh();return{x:e*a.cellWidth()+i,y:t*this.cellHeight+n}},this.Ah=function(e,t,n){i.ph(e.month.cells[t][n],"select")},this.Bh=function(e,t,n){i.qh(e.month.cells[t][n],"select")},this.oh=function(){return this.showWeekNumbers?a.cellWidth():0},this.Ch=function(){if(this.items)for(var e=0;e<this.showMonths;e++)for(var t=0;t<7;t++)for(var n=0;n<6;n++){var i=this.months[e].cells[t][n];i&&(1===this.items[i.day.toStringSortable()]?this.ph(i,"busy"):this.qh(i,"busy"))}},this.Dh=function(){var e={};e.startDate=i.startDate,e.selectionStart=i.selectionStart,e.selectionEnd=i.selectionEnd.addDays(1),i.state.value=JSON.stringify(e)},this.xh=function(){return(this.selectMode||"").toLowerCase()},this.Eh=function(){(t=this.selectionDay||this.selectionStart)||(t=e.Date.today());var t=new e.Date(t);switch(this.xh()){case"day":this.selectionStart=t,this.selectionDay=t,this.selectionEnd=t;break;case"week":this.selectionDay=t,this.selectionStart=t.firstDayOfWeek(a.weekStarts()),this.selectionEnd=this.selectionStart.addDays(6);break;case"month":this.selectionDay=t,this.selectionStart=t.firstDayOfMonth(),this.selectionEnd=this.selectionStart.lastDayOfMonth();break;case"none":this.selectionEnd=t;break;default:throw"Unknown selectMode value."}},this.Fh=null,this.select=function(t,n){if(this.S){var i=!0,o=!0;"object"==typeof n?(n.dontFocus&&(i=!1),n.dontNotify&&(o=!1)):"boolean"==typeof n&&(i=!n);var r=this.selectionStart,a=this.selectionEnd;this.selectionStart=new e.Date(t).getDatePart(),this.selectionDay=this.selectionStart;var l=!1;if(i){var s=this.startDate;(this.selectionStart<this.Gh()||this.selectionStart>=this.Hh())&&(s=this.selectionStart.firstDayOfMonth()),s.toStringSortable()!==this.startDate.toStringSortable()&&(l=!0),this.startDate=s}this.Eh(),this.Jg(),this.nh(),this.Ih(),this.Ch(),this.Dh(),!o||r.equals(this.selectionStart)&&a.equals(this.selectionEnd)||this.Qb(),l&&this.Jh()}else this.Fh={date:t,options:n}},this.update=function(t){if(!i.S)throw new e.Exception("You are trying to update a DayPilot.Navigator instance that hasn't been initialized yet.");if(i.T)throw new e.Exception("You are trying to update a DayPilot.Navigator instance that has been disposed.");i.Kh(),i.Oe(t),i.Jc()},this.Jc=function(){i.cssOnly||(i.cssOnly=!0),this.Jg(),this.nh(),this.Eh(),this.Ih(),this.Ma(),this.Ch(),this.Dh(),this.visible?this.show():this.hide()},this.Kh=function(){i.P={}},this.Ye=null,this.Oe=function(t){if(t){var n={events:{preInit:function(){var t=this.data;t&&(i.events.list=e.isArray(t.list)?t.list:t)}}};for(var o in this.Ye=n,t)if(n[o]){var r=n[o];r.data=t[o],r.preInit&&r.preInit()}else i[o]=t[o]}},this.Xe=function(){var e=this.Ye;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.ha=function(t,n,i){var o={};o.action=t,o.parameters=i,o.data=n,o.header=this.ga();var r="JSON"+JSON.stringify(o);this.backendUrl?e.request(this.backendUrl,this.ja,r,this.ka):WebForm_DoCallback(this.uniqueID,r,this.la,null,this.callbackError,!0)},this.ka=function(e){if("function"==typeof i.onAjaxError){var t={};t.request=e,i.onAjaxError(t)}else"function"==typeof i.ajaxError&&i.ajaxError(e)},this.ja=function(e){i.la(e.responseText)},this.fa=function(e,t,n){var o={};o.action=e,o.parameters=n,o.data=t,o.header=this.ga();var r="JSON"+JSON.stringify(o);__doPostBack(i.uniqueID,r)},this.ga=function(){var e={};return e.v=this.v,e.startDate=this.startDate,e.selectionStart=this.selectionStart,e.showMonths=this.showMonths,e},this.Lh=function(e,t){"refresh"===e&&this.Jh()},this.vh=function(e){var t=e+a.weekStarts();return t>6&&(t-=7),a.locale().dayNamesShort[t]},this.wh=function(e){return null!==this.selectionStart&&null!==this.selectionEnd&&this.selectionStart.getTime()<=e.getTime()&&e.getTime()<=this.selectionEnd.getTime()},this.Mh=function(e){for(var t=0;t<i.months.length;t++){var n=i.months[t];if(!n)return null;if(e.x<n.left||n.width<e.x)return null;if(n.top<=e.y&&e.y<n.top+n.height)return t}return null},this.Nh=function(t){var n=e.mo3(i.nav.top,t),o=i.Mh(n);if(null===o)return null;var r=i.months[o];if(r.top<=n.y&&n.y<r.top+(this.titleHeight+this.dayHeaderHeight))return{month:o,x:0,y:0,coords:n,header:!0};for(var a=0;a<r.cells.length;a++)for(var l=0;l<r.cells[a].length;l++){var s=r.cells[a][l],d=s.top+r.top,c=s.left+r.left;if(c<=n.x&&n.x<c+i.cellWidth&&d<=n.y&&n.y<d+i.cellHeight)return{month:o,x:a,y:l,coords:n}}return null},this.Oh=function(e){if(i.freeHandSelectionEnabled){var t=i.Nh(e);t&&!t.header&&(o.start=t),e.preventDefault()}},this.Ph=function(t){if(o.start){var n=i.Nh(t);o.end?o.end=n:n&&e.distance(o.start.coords,n.coords)>3&&(o.end=n),o.end&&(o.clear(),o.draw())}},this.Qh={};var o=this.Qh;o.start=null,o.drawCell=function(e){var t=i.months[e.month],n=i.yh(e.x,e.y),r=t.top+n.y,a=t.left+n.x,l=document.createElement("div");l.style.position="absolute",l.style.left=a+"px",l.style.top=r+"px",l.style.height=i.cellHeight+"px",l.style.width=i.cellWidth+"px",l.style.backgroundColor="#ccc",l.style.opacity=.5,l.style.cursor="default",i.nav.preselection.appendChild(l),o.cells.push(l)},o.clear=function(){if(o.cells){for(var e=0;e<o.cells.length;e++)i.nav.preselection.removeChild(o.cells[e]);o.cells=[]}},o.draw=function(){var e=o.ordered(),t=new r(e.start),n=e.end;if(n){if(n===o.end&&n.header&&n.month>0){n.month-=1;var a=i.months[n.month];n.x=6,n.y=a.rowCount-1}for(o.cells=[];!t.is(n);){o.drawCell(t);var l=new r(t).next();if(!l)return;t.month=l.month,t.x=l.x,t.y=l.y}o.drawCell(t)}},o.ordered=function(){var e=o.start,t=o.end,n={};return!t||new r(e).before(t)?(n.start=e,n.end=t):(n.start=t,n.end=e),n};var r=function(e,t,n){if(e instanceof r)return e;if("object"==typeof e){var o=e;this.month=o.month,this.x=o.x,this.y=o.y}else this.month=e,this.x=t,this.y=n;this.is=function(e){return this.month===e.month&&this.x===e.x&&this.y===e.y},this.next=function(){var e=this;return e.x<6?{month:e.month,x:e.x+1,y:e.y}:e.y<i.months[e.month].rowCount-1?{month:e.month,x:0,y:e.y+1}:e.month<i.months.length-1?{month:e.month+1,x:0,y:0}:null},this.visible=function(){var e=this.cell();return!!e.isCurrentMonth||!(!e.isPrevMonth||!e.showBefore)||!(!e.isNextMonth||!e.showAfter)},this.nextVisible=function(){for(var e=this;!e.visible();){var t=e.next();if(!t)return null;e=new r(t)}return e},this.previous=function(){var e=this;return e.x>0?{month:e.month,x:e.x-1,y:e.y}:e.y>0?{month:e.month,x:6,y:e.y-1}:e.month>0?{month:e.month-1,x:6,y:i.months[e.month-1].rowCount-1}:null},this.previousVisible=function(){for(var e=this;!e.visible();){var t=e.previous();if(!t)return null;e=new r(t)}return e},this.cell=function(){return i.months[this.month].cells[this.x][this.y]},this.date=function(){return this.cell().day},this.before=function(e){return this.date()<new r(e).date()}};this.zh=function(e){var t=this.parentNode,n=this.parentNode.month,o=n.cells[c=this.x][d=this.y].day;if(n.cells[c][d].isClickable){switch(i.clearSelection(),i.selectionDay=o,o=i.selectionDay,i.xh()){case"none":i.selectionStart=o,i.selectionEnd=o;break;case"day":if(i.autoFocusOnClick){var r=o;if(o<i.Gh()||o>=i.Hh())return void i.select(o)}var a=n.cells[c][d];i.Ah(t,c,d),i.selected.push(a),i.selectionStart=a.day,i.selectionEnd=a.day;break;case"week":if(i.autoFocusOnClick){var l=n.cells[6][d].day;if((r=n.cells[0][d].day).firstDayOfMonth()===l.firstDayOfMonth()&&(r<i.Gh()||l>=i.Hh()))return void i.select(o)}for(var s=0;s<7;s++)i.Ah(t,s,d),i.selected.push(n.cells[s][d]);i.selectionStart=n.cells[0][d].day,i.selectionEnd=n.cells[6][d].day;break;case"month":if(i.autoFocusOnClick&&(r=o,o<i.Gh()||o>=i.Hh()))return void i.select(o);r=null,l=null;for(var d=0;d<6;d++)for(var c=0;c<7;c++)(a=n.cells[c][d])&&a.day.getYear()===o.getYear()&&a.day.getMonth()===o.getMonth()&&(i.Ah(t,c,d),i.selected.push(a),null===r&&(r=a.day),l=a.day);i.selectionStart=r,i.selectionEnd=l;break;default:throw"unknown selectMode"}i.Dh(),i.Qb()}},this.Qb=function(t){var n=i.selectionStart,o=i.selectionEnd.addDays(1),r=e.DateUtil.daysDiff(n,o),a=i.selectionDay;if(t=t||{},i.cb()){var l={};if(l.start=n,l.end=o,l.day=a,l.days=r,l.mode=t.mode||i.selectMode,l.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onTimeRangeSelect&&(i.onTimeRangeSelect(l),l.preventDefault.value))return;switch(i.timeRangeSelectedHandling){case"Bind":(s=e.Util.evalVariable(i.bound))&&((d={}).start=n,d.end=o,d.days=r,d.day=a,s.commandCallBack(i.command,d));break;case"None":break;case"PostBack":i.timeRangeSelectedPostBack(n,o,a)}"function"==typeof i.onTimeRangeSelected&&i.onTimeRangeSelected(l)}else switch(i.timeRangeSelectedHandling){case"Bind":var s,d;(s=e.Util.evalVariable(i.bound))&&((d={}).start=n,d.end=o,d.days=r,d.day=a,s.commandCallBack(i.command,d));break;case"JavaScript":i.onTimeRangeSelected(n,o,a);break;case"None":break;case"PostBack":i.timeRangeSelectedPostBack(n,o,a)}},this.timeRangeSelectedPostBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.day=i,this.fa("TimeRangeSelected",n,o)},this.uh=function(e){i.Rh(i.skipMonths)},this.rh=function(e){i.Rh(-i.skipMonths)},this.Rh=function(e){this.startDate=this.startDate.addMonths(e),this.Jg(),this.nh(),this.Ih(),this.Dh(),this.Jh(),this.Ch()},this.Gh=function(){return i.startDate.firstDayOfMonth()},this.Hh=function(){return i.startDate.firstDayOfMonth().addMonths(this.showMonths)},this.visibleStart=function(){return i.startDate.firstDayOfMonth().firstDayOfWeek(a.weekStarts())},this.visibleEnd=function(){return i.startDate.firstDayOfMonth().addMonths(this.showMonths-1).firstDayOfWeek(a.weekStarts()).addDays(42)},this.Jh=function(){var e=this.visibleStart(),t=this.visibleEnd();if(i.cb()){var n={};if(n.start=e,n.end=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onVisibleRangeChange&&(i.onVisibleRangeChange(n),n.preventDefault.value))return;switch(this.visibleRangeChangedHandling){case"CallBack":this.visibleRangeChangedCallBack(null);break;case"PostBack":this.visibleRangeChangedPostBack(null)}"function"==typeof i.onVisibleRangeChanged&&i.onVisibleRangeChanged(n)}else switch(this.visibleRangeChangedHandling){case"CallBack":this.visibleRangeChangedCallBack(null);break;case"PostBack":this.visibleRangeChangedPostBack(null);break;case"JavaScript":this.onVisibleRangeChanged(e,t)}},this.visibleRangeChangedCallBack=function(e){this.ha("Visible",e,{})},this.visibleRangeChangedPostBack=function(e){this.fa("Visible",e,{})},this.la=function(e,t){e=JSON.parse(e),i.items=e.Items,i.cells=e.Cells,i.cells?i.update():i.Ch()},this.Ih=function(){for(var e=0;e<this.showMonths;e++){var t=this.Sh(e);this.Kg(e,t)}this.root.style.height=this.dh()+"px",this.nav.preselection=document.createElement("div"),this.nav.preselection.style.position="absolute",this.nav.preselection.style.left="0px",this.nav.preselection.style.top="0px",this.root.appendChild(this.nav.preselection)},this.dh=function(){if("Horizontal"===this.orientation){for(var e=0,t=0;t<this.months.length;t++)(i=this.months[t]).height>e&&(e=i.height);return e}var n=0;for(t=0;t<this.months.length;t++){var i;n+=(i=this.months[t]).height}return n},this.Sh=function(e){if(this.internal.showLinks)return this.internal.showLinks;var t={};return t.left=0===e,t.right=0===e,t.before=0===e,t.after=e===this.showMonths-1,"Horizontal"===this.orientation&&(t.right=e===this.showMonths-1),t},this.Le={},this.Le.scope=null,this.Le.notify=function(){i.Le.scope&&i.Le.scope.$apply()},this.internal={},this.internal.initialized=function(){return i.S},this.ea={};var a=this.ea;a.locale=function(){return e.Locale.find(i.locale)},a.weekStarts=function(){if("Auto"===i.weekStarts){var e=a.locale();return e?e.weekStarts:0}return i.weekStarts},a.cellWidth=function(){if(i.P.cellWidth)return i.P.cellWidth;var e=i.Qe("_cell_dimensions").width;return e||(e=i.cellWidth),i.P.cellWidth=e,e},this.clearSelection=function(){for(var e=0;e<this.selected.length;e++){var t=this.selected[e];i.Bh(t.parentNode,t.x,t.y)}this.selected=[]},this.Ue=function(){return!(!this.backendUrl||"undefined"!=typeof i.items&&i.items)},this.events={},this.Ma=function(){if(e.isArray(this.events.list)){this.items={};for(var t=0;t<this.events.list.length;t++){var n=this.events.list[t];if(!n.hidden){var i=this.Th(n);for(var o in i)this.items[o]=1}}}},this.Qe=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.className=this.G(e);var n=i.root||document.body;n.appendChild(t);var o=t.offsetHeight,r=t.offsetWidth;n.removeChild(t);var a={};return a.height=o,a.width=r,a},this.Th=function(t){for(var n=new e.Date(t.start),i=new e.Date(t.end),o={},r=n.getDatePart();r.getTime()<i.getTime();)o[r.toStringSortable()]=1,r=r.addDays(1);return o},this.show=function(){i.visible=!0,i.root.style.display=""},this.hide=function(){i.visible=!1,i.root.style.display="none"},this.Ve=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Navigator() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Navigator: The placeholder element not found: '"+t+"'."}this.root=this.nav.top},this.init=function(){if(this.Ve(),!this.root.dp)return i.cssOnly||(i.cssOnly=!0,e.Util.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")),this.Eh(),this.nh(),this.Ih(),this.Ma(),this.Ch(),this.ya(),this.Uh(),this.pe(),this.Ue()&&this.Jh(),this.S=!0,this.Xe(),this.Fh&&(this.select(this.Fh.date,this.Fh.options),this.Fh=null),this},this.Uh=function(){i.nav.top.onmousedown=this.Oh,i.nav.top.onmousemove=this.Ph},this.pe=function(){e.re(document,"mouseup",i.vf)},this.vf=function(t){if(o.start&&o.end){var n=e.mo3(i.nav.top,t);if(n.x===o.start.coords.x&&n.y===o.start.coords.y)return o.start=null,void o.clear();o.clear();var a=o.ordered();a.start=new r(a.start).nextVisible(),a.end=new r(a.end).previousVisible(),i.selectionDay=new r(a.start).date(),i.selectionStart=i.selectionDay,i.selectionEnd=new r(a.end).date(),o.start=null,o.end=null,i.Jg(),i.nh(),i.Ih(),i.Ch(),i.Dh(),i.Qb({mode:"freehand"})}o.start=null,o.end=null},this.dispose=function(){var e=i;e.root&&(e.root.removeAttribute("style"),e.root.removeAttribute("class"),e.root.dp=null,e.root.innerHTML=null,e.root=null)},this.ya=function(){this.root.dispose=this.dispose},this.Init=this.init,this.Oe(n)},"undefined"!=typeof jQuery&&(jQuery.fn.daypilotNavigator=function(t){var n=null,i=this.each(function(){if(!this.daypilot){var i=new e.Navigator(this.id);for(var o in this.daypilot=i,t)i[o]=t[o];i.Init(),n||(n=i)}});return 1===this.length?n:i}),(t=e.am())&&t.directive("daypilotNavigator",["$parse",function(t){return{restrict:"E",template:"<div id='{{id}}'></div>",compile:function(n,i){return n.replaceWith(this.template.replace("{{id}}",i.id)),function(n,i,o){var r=new e.Navigator(i[0]);r.Le.scope=n,r.init();var a=o.id;a&&(n[a]=r);var l=o.publishAs;for(var s in l&&(0,t(l).assign)(n,r),o)0===s.indexOf("on")&&(e.Util.shouldApply(s)?function(e){r[e]=function(i){var r=t(o[e]);n.$apply(function(){r(n,{args:i})})}}(s):function(e){r[e]=function(i){t(o[e])(n,{args:i})}}(s));var d=n.$watch,c=o.events||o.daypilotEvents;d.call(n,o.config||o.daypilotConfig,function(e,t){for(var n in e)r[n]=e[n];r.update()},!0),d.call(n,c,function(e){r.events.list=e,r.Ma(),r.Ch()},!0)}}}}]),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded())}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(t){"undefined"==typeof t.Queue&&(t.Queue=function(n,i){this.v="2021.3.5046";var o=this;this.id=n,this.contextMenu=null,this.eventHeight=35,this.eventTextWrappingEnabled=!1,this.lineSpace=5,this.theme=null,this.emptyText="",this.emptyHtml=null,this.eventClickHandling="Enabled",this.eventRightClickHanding="ContextMenu",this.eventSelectHandling="Update",this.onBeforeEventRender=null,this.onEventClick=null,this.onEventClicked=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onEventMove=null,this.onEventMoving=null,this.onEventSelect=null,this.onEventSelected=null,this.S=!1,this.Vh="queue_default",this.Wh=[],this.Xh=!1,this.Yh=!1,this.nav={},this.events={},this.events.list=[],this.elements={},this.elements.events=[];var r=function(){return document.createElement("div")};this.Ve=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw new t.Exception("DayPilot.Queue() constructor requires the target element or its ID as a parameter");if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw new t.Exception("DayPilot.Queue: The placeholder element not found: '"+n+"'.")}},this.G=function(e){var t=this.theme||this.Vh;return t?t+e:""},this.Jc=function(){o.nav.container.innerHTML="",o.Zh=null,o.Cg(),o.Ma(),o.Za(),o.$h()},this.Cg=function(){var e=o.nav.top;e.className=o._h,t.Util.addClass(e,o.G("_main"))},this.Ma=function(){var e={},n=o.events.list||[];o.Wh=[];for(var i=0;i<n.length;i++){var r=n[i];if("string"!=typeof r.id&&"number"!=typeof r.id)throw new t.Exception("All events must have an id property (string or number)");var a=typeof r.id+"_"+r.id;if(e[a])throw new t.Exception("Duplicate IDs not allowed.");e[a]=!0;var l=t.Util.copyProps(r);o.qe(l);var s={};s.data=r,s.cache=l,o.Wh.push(s)}},this.ai={},this.ai.Ub=[],this.ai.Wh=[];var a=o.ai;this.ai.p=function(e){var t=e.event;a.bi(),a.ci(e),a.Ub[0]=t},this.ai.ci=function(e){a.Wh[0]=e;var n=o.G("_selected");t.Util.addClass(e,n)},this.ai.di=function(e){a.Wh=[];var n=o.G("_selected");t.Util.removeClass(e,n)},this.ai.xc=function(e){return o.ai.Wh.find(function(t){return t.event.data.id===e})},this.ai.bi=function(){var e=a.Wh[0];e&&a.di(e),a.Ub=[]},this.qe=function(e){var t={};t.data=e,"function"==typeof o.onBeforeEventRender&&o.onBeforeEventRender(t)},this.$h=function(){if(0===o.events.list.length){var e=o.nav.container,t=r();o.emptyHtml?t.innerHTML=o.emptyHtml:t.innerText=o.emptyText,e.appendChild(t)}},this.Za=function(){var e=o.Wh;o.elements.events=[],e.forEach(function(e){o.Uc(e)})},this.Uc=function(e){var n=e.cache,i=e.data,a=o.nav.container,l=r();l.className=o.G("_event"),l.style.height=o.eventHeight+"px",l.style.boxSizing="border-box",l.style.overflow="hidden",l.style.marginTop=o.lineSpace+"px",l.style.position="relative",o.eventTextWrappingEnabled||(l.style.whiteSpace="nowrap"),l.addEventListener("click",o.Xg),l.addEventListener("contextmenu",o.ei),o.ai.xc(i.id)&&o.ai.ci(l);var s=r();if(s.className=o.G("_event_inner"),"string"==typeof n.html?s.innerHTML=n.html:s.innerText=n.text,n.cssClass&&t.Util.addClass(l,n.cssClass),n.backColor&&(s.style.background=n.backColor),n.fontColor&&(s.style.color=n.fontColor),s.style.borderColor="darker"===n.borderColor&&n.backColor?t.ColorUtil.darker(n.backColor,2):n.borderColor,n.backImage&&(s.style.backgroundImage="url("+n.backImage+")",n.backRepeat&&(s.style.backgroundRepeat=n.backRepeat)),l.appendChild(s),!n.barHidden){var d=r();d.className=o.G("_event_bar"),d.style.position="absolute",n.barColor&&(d.style.backgroundColor=n.barColor),l.appendChild(d)}var c={eventDiv:l,areas:n.areas,allowed:function(){return!(o.Xh||o.Yh)}},u=new t.Event(i,o);u.cache=n,l.event=u,t.Areas.attach(l,u,c),o.fi(l,i),a.appendChild(l),o.elements.events.push(l)},this.ei=function(e){if(e.preventDefault(),"Disabled"!==o.eventRightClickHanding){var t=this.event,n={};if(n.e=this.event,n.preventDefault=function(){n.preventDefault.value=!0},"function"==typeof o.onEventRightClick&&o.onEventRightClick(n),!n.preventDefault.value){switch(o.eventRightClickHanding){case"Enabled":break;case"ContextMenu":var i=t.client.contextMenu();i?i.show(t):o.contextMenu&&o.contextMenu.show(t)}"function"==typeof o.onEventRightClicked&&o.onEventRightClicked(n)}}},this.Xg=function(t){if(t.preventDefault(),t.stopPropagation(),"Disabled"!==o.eventClickHandling){var n={};if(n.e=this.event,n.preventDefault=function(){n.preventDefault.value=!0},"function"==typeof o.onEventClick&&o.onEventClick(n),!n.preventDefault.value){switch(o.eventClickHandling){case"Select":o.Tb(this,e,t)}"function"==typeof o.onEventClicked&&o.onEventClicked(n)}}},this.Tb=function(e,t,n){var i={};if(i.e=t,i.preventDefault=function(){this.preventDefault.value=!0},"function"!=typeof o.onEventSelect||(o.onEventSelect(i),!i.preventDefault.value)){switch(o.eventSelectHandling){case"Update":o.ai.p(e)}"function"==typeof o.onEventSelected&&o.onEventSelected(i)}},this.gi=function(e,n){var i=o.hi,r={};r.e=new t.Event(e,o),r.position=i,r.source=n,r.external=!0,r.preventDefault=function(){r.preventDefault.value=!0},o.ii(r),r.preventDefault.value||(o.events.list.splice(i,0,e),o.Jc(),o.ji(r))},this.ki=function(e){var n={};if(n.e=new t.Event(e,o),n.position=o.hi,n.source=o,n.external=!1,n.preventDefault=function(){n.preventDefault.value=!0},o.ii(n),!n.preventDefault.value){var i=o.events.list.indexOf(e);o.li(o.events.list,i,o.hi),o.Jc(),o.ji(n)}},this.ii=function(e){"function"==typeof o.onEventMove&&o.onEventMove(e)},this.ji=function(e){"function"==typeof o.onEventMoved&&o.onEventMoved(e)},this.li=function(e,t,n){var i=e[t];e.splice(t,1),e.splice(n,0,i)},this.mi=function(){t.Scheduler.registerDropTarget({element:o.nav.top,onDrop:function(e){o.Yh=!1,o.gi(e.e.data,e.e.calendar)},onDragOver:function(e){o.Yh=!0},onDragLeave:function(e){o.Yh=!1}})},this.Zh=null,this.ni=function(e){o.hi=e;var t=o.Zh||r(),n=o.nav.container,i=e*(o.eventHeight+o.lineSpace);t.style.top=(i-=o.lineSpace/2+1)+"px",o.Zh||(t.className=o.G("_shadow"),t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.height="2px",o.Zh=t,n.appendChild(t))},this.oi=function(){o.hi=null,t.de(o.Zh),o.Zh=null},this.Gf=null,this.hi=null,this.pi=function(e){var n=t.mo3(o.nav.container,e);if(o.Gf=n,o.Xh||o.Yh){var i=Math.floor((n.y+o.eventHeight/2)/(o.eventHeight+o.lineSpace));i<0&&(i=0),i>o.Wh.length&&(i=o.Wh.length),o.ni(i)}},this.qi=function(e){o.oi()},this.ri=function(e){o.Xh&&(o.ki(o.si),o.si=null)},this.vi=function(){var e=r();o.nav.container=e;var t=o.nav.top;o._h=t.className||"",e.style.position="relative",t.onmousemove=o.pi,t.onmouseleave=o.qi,t.onmouseup=o.ri,t.appendChild(e)},this.fi=function(e,n){var i=e;t.Scheduler.makeDraggable({element:i,data:n,keepElement:!0,externalCssClass:"",externalHtml:"",onDragStart:function(e){o.Xh=!0,o.si=n,i.style.opacity="0.5"},onDrop:function(e){o.Xh=!1,i.style.opacity=""}})},this.Oe=function(e){if(e){var t={events:{preInit:function(){var e=this.data;e&&(o.events.list=e)}}};for(var n in e)if(t[n]){var i=t[n];i.data=e[n],i.preInit&&i.preInit()}else o[n]=e[n]}},this.wa={},this.wa.reactDOM=null,this.wa.react=null,this.Ke=function(e){if(!e)return null;for(var n=0;n<o.elements.events.length;n++){var i=o.elements.events[n];if(t.Util.isSameEvent(i.event,e))return i}return null},this.multiselect={},this.multiselect.add=function(e){"number"!=typeof e&&"string"!=typeof e||(e=o.events.find(e)),e instanceof t.Event&&(e=e.data);var n=o.Ke(e);n&&o.ai.p(n)},this.multiselect.clear=function(){o.ai.bi()},this.multiselect.get=function(){var e=[],t=a.Ub[0];return t&&e.push(t.event),e},this.events.add=function(e){e instanceof t.Event&&(e=e.data),o.events.list.push(e),o.Jc()},this.events.remove=function(e){if(e){"number"!=typeof e&&"string"!=typeof e||(e=o.events.find(e)),e instanceof t.Event&&(e=e.data);var n=o.events.list.indexOf(e);-1!==n&&(o.ai.xc(e.id)&&o.multiselect.clear(),o.events.list.splice(n,1),o.Jc())}},this.events.update=function(e){e instanceof t.Event&&(e=e.data);var n=o.events.find(e.id);if(n){var i=o.events.list.indexOf(n.data);-1!==i&&(o.events.list.splice(i,1,e),o.Jc())}},this.events.find=function(e){var n=o.events.list.find(function(t){return t.id===e});return n?new t.Event(n,o):null},this.init=function(){if(this.S)throw new t.Exception("This instance is already initialized. Use update() to change properties.");if(this.Ve(),this.nav.top.dp){if(this.nav.top.dp===o)return o;throw new t.Exception("The target placeholder was already initialized by another DayPilot component instance.")}return this.mi(),this.vi(),this.Jc(),this},this.update=function(e){if(o.T)throw new t.Exception("You are trying to update a DayPilot.Scheduler object that has been disposed already. Calling .dispose() destroys the object and makes it unusable.");o.Oe(e),o.Jc()},this.dispose=function(){o.nav.top.innerHTML="",o.T=!0},this.internal={},this.internal.loadOptions=function(e){o.Oe(e)},this.internal.enableReact=function(e,t){o.wa.react=e,o.wa.reactDOM=t},this.internal.reactRefs=function(){return t.Util.copyProps(o.wa,{},["react","reactDOM"])},this.Oe(i)})}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(t){function n(e){for(var t=document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY);t&&t.parentNode;)if((t=t.parentNode).daypilotMainD)return t.calendar;return!1}function i(e){var t=e.touches[0].pageY,n={};return n.x=e.touches[0].pageX,n.y=t,n}if("undefined"==typeof t.Scheduler){var o=function(){var e=navigator.userAgent;return e.indexOf("Mozilla/5.0")>-1&&e.indexOf("Android ")>-1&&e.indexOf("AppleWebKit")>-1&&!(e.indexOf("Chrome")>-1)}(),a=navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1,l={},s=function(){return document.body},d=function(){return document.createElement("div")};t.Scheduler=function(n,h){function p(e){e.div.style.right=e.right+"px",e.div.style.height=e.height+"px",e.div.style.top=e.top+"px",g.wp(e.div,e.enabled()),e.divHeader.style.height=e.heightRes+"px",e.divHeader.style.top=e.top+"px",g.wp(e.divHeader,e.enabled()),e.divSpace&&(e.divSpace.style.top=e.height+"px")}function f(e,t){return 1-e/t}this.v="2021.3.5046";var g=this;this.id=n,this.isScheduler=!0,this.allowDefaultContextMenu=!1,this.allowEventOverlap=!0,this.allowMultiMove=!1,this.allowMultiRange=!1,this.allowMultiResize=!1,this.allowMultiSelect=!0,this.api=2,this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.autoScroll="Drag",this.blockOnCallBack=!1,this.navigatorBackSync=null,this.backendUrl=null,this.beforeCellRenderCaching=!0,this.businessBeginsHour=9,this.businessEndsHour=18,this.businessWeekends=!1,this.cellDuration=60,this.cellGroupBy="Day",this.cellSweeping=!0,this.cellSweepingCacheSize=1e3,this.cellWidth=40,this.cellWidthMin=1,this.cellWidthSpec="Fixed",this.cellsMarkBusiness=!0,this.cornerText="",this.cornerHtml=null,this.crosshairTimeHeaderLevel="Last",this.crosshairType="Header",this.cssClassPrefix="scheduler_default",this.days=1,this.doubleClickTimeout=300,this.dragOutAllowed=!1,this.drawBlankCells=!0,this.durationBarHeight=3,this.durationBarVisible=!0,this.durationBarMode="Duration",this.dynamicEventRendering="Progressive",this.dynamicEventRenderingMargin=50,this.dynamicEventRenderingMarginX=null,this.dynamicEventRenderingMarginY=null,this.dynamicEventRenderingCacheSweeping=!1,this.dynamicEventRenderingCacheSize=200,this.dynamicLoading=!1,this.eventEditMinWidth=100,this.eventEditTabNext=!1,this.eventEndSpec="DateTime",this.eventHeight=35,this.eventHtmlLeftMargin=10,this.eventHtmlRightMargin=10,this.eventMarginLeft=0,this.eventMarginRight=0,this.eventMarginBottom=0,this.eventMinWidth=1,this.eventMoveMargin=5,this.eventMoveToPosition=!1,this.eventMoveSkipNonBusiness=!1,this.eventResizeMargin=5,this.eventStackingLineHeight=100,this.eventTapAndHoldHandling="Move",this.eventTextWrappingEnabled=!1,this.eventUpdateInplaceOptimization=!1,this.eventsLoadMethod="GET",this.eventVersionHeight=25,this.eventVersionMargin=2,this.eventVersionPosition="Above",this.eventVersionsEnabled=!1,this.eventVersionsReserveSpace=!1,this.floatingEvents=!a,this.floatingTimeHeaders=!0,this.groupConcurrentEvents=!1,this.groupConcurrentEventsLimit=1,this.headerHeight=30,this.heightSpec="Max",this.height=600,this.hideBorderFor100PctHeight=!1,this.hideUntilInit=!0,this.infiniteScrollingEnabled=!1,this.infiniteScrollingMargin=50,this.infiniteScrollingStepDays=30,this.initEventEnabled=!0,this.jointEventsResize=!0,this.jointEventsMove=!0,this.keyboardEnabled=!1,this.keyboardTarget="document",this.layout="Auto",this.linkCreateHandling="Disabled",this.linkBottomMargin=17,this.linkPointSize=10,this.linksLoadMethod="GET",this.locale="en-us",this.loadingLabelText="Loading...",this.loadingLabelHtml=null,this.loadingLabelVisible=!0,this.overrideWheelScrolling=!1,this.messageBarPosition="Top",this.messageHideAfter=5e3,this.messageHideOnMouseOut=!0,this.multiMoveVerticalMode="Disabled",this.moveBy="Full",this.notifyCommit="Immediate",this.progressiveRowRendering=!0,this.progressiveRowRenderingPreload=25,this.rectangleSelectMode="Free",this.rectangleSelectHandling="Disabled",this.rowCreateHeight=null,this.rowCreateHtml=null,this.rowCreateText="New row...",this.rowDragHandleWidth=10,this.rowFilterParentsAlwaysVisible=!0,this.rowHeaderColumnDefaultWidth=80,this.rowHeaderHideIconEnabled=!1,this.rowHeaderScrolling=!1,this.rowHeaderSplitterWidth=3,this.rowHeaderWidthAutoFit=!0,this.rowHeaderWidthAutoFitShrink=!1,this.rowHeaderWidthMarginRight=0,this.rowHeaderColumnsResizable=!0,this.rowHeaderColumnsMode="Tabular",this.rowHeaderColumns=null,this.rowHeaderWidth=80,this.rowMarginBottom=0,this.rowMarginTop=0,this.rowMinHeight=0,this.rowsLoadMethod="GET",this.rowSortingMode="LeavesOnly",this.scale="CellDuration",this.scaleManualLimitBeyond=!0,this.scrollDelayDynamic=500,this.scrollDelayEvents=200,this.scrollDelayCells=a?100:0,this.scrollDelayFloats=0,this.scrollDelayRows=0,this.scrollStep=null,this.scrollX=0,this.scrollY=0,this.selectedRows=[],this.separators=[],this.showCurrentTimeHeader=!1,this.showNonBusiness=!0,this.showNonBusinessForceHours=!1,this.showToolTip=!0,this.snapToGrid=!0,this.snapToGridTimeRangeSelecting=!0,this.snapToGridEventMoving=!0,this.snapToGridEventResizing=!0,this.startDate=t.Date.today(),this.syncResourceTree=!1,this.tapAndHoldTimeout=300,this.timeHeaders=[{groupBy:"Default"},{groupBy:"Cell"}],this.timeHeaderPosition="Top",this.timeHeaderTextWrappingEnabled=!1,this.treeAnimation=!0,this.treeAutoExpand=!0,this.treeEnabled=!1,this.treeIndent=20,this.treeImageMarginLeft=0,this.treeImageMarginTop=3,this.treeImageMarginRight=5,this.treeImageWidth=10,this.treeImageHeight=10,this.treePreventParentUsage=!1,this.timeFormat="Auto",this.timeline=null,this.useEventBoxes="Always",this.viewType="Resources",this.visible=!0,this.watchWidthChanges=!0,this.weekStarts="Auto",this.width=null,this.xssProtection="Enabled",this.zoomLevels=[],this.zoomPosition="left",this.eventClickHandling="Enabled",this.eventDeleteHandling="Disabled",this.eventHoverHandling="Bubble",this.eventDoubleClickHandling="Disabled",this.eventEditHandling="Update",this.eventMoveHandling="Update",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.eventSelectHandling="Update",this.resourceCollapseHandling="Enabled",this.resourceExpandHandling="Enabled",this.rowClickHandling="Enabled",this.rowDoubleClickHandling="Disabled",this.rowRightClickHandling="ContextMenu",this.rowCreateHandling="Disabled",this.rowEditHandling="Update",this.rowHeaderColumnResizedHandling="Update",this.rowSelectHandling="Update",this.rowMoveHandling="Disabled",this.rowMoveSameLevelOnly=!1,this.timeHeaderClickHandling="Enabled",this.timeHeaderRightClickHandling="Enabled",this.timeRangeClickHandling="Enabled",this.timeRangeDoubleClickHandling="Disabled",this.timeRangeSelectedHandling="Enabled",this.timeRangeRightClickHandling="ContextMenu",this.timeRangeSelectingStartEndEnabled=!1,this.timeRangeSelectingStartEndFormat="MMMM d, yyyy",this.eventMovingStartEndEnabled=!1,this.eventMovingStartEndFormat="MMMM d, yyyy",this.eventResizingStartEndEnabled=!1,this.eventResizingStartEndFormat="MMMM d, yyyy",this.bubble="function"==typeof t.Bubble?new t.Bubble:null,this.cellBubble=null,this.resourceBubble=null,this.linkBubble=null,this.contextMenu=null,this.contextMenuResource=null,this.contextMenuSelection=null,this.contextMenuLink=null,t.browser.ie&&(this.scrollDelayCells=100,this.scrollDelayFloats=100),1===g.api&&(this.onEventMove=function(){},this.onEventResize=function(){},this.onResourceExpand=function(){},this.onResourceCollapse=function(){}),this.onEventClick=null,this.onEventClicked=null,this.onEventMove=null,this.onEventMoved=null,this.onEventMoving=null,this.onEventResize=null,this.onEventResized=null,this.onEventResizing=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onEventMouseEnter=null,this.onEventMouseLeave=null,this.onEventMouseOver=null,this.onEventMouseOut=null,this.onIncludeTimeCell=null,this.onLinkClick=null,this.onLinkClicked=null,this.onRowClick=null,this.onRowClicked=null,this.onRowDoubleClick=null,this.onRowDoubleClicked=null,this.onRowMouseOver=null,this.onRowMouseOut=null,this.onRowRightClick=null,this.onRowRightClicked=null,this.onTimeHeaderClick=null,this.onTimeHeaderClicked=null,this.onTimeHeaderRightClick=null,this.onTimeHeaderRightClicked=null,this.onTimeRangeClick=null,this.onTimeRangeClicked=null,this.onTimeRangeDoubleClick=null,this.onTimeRangeDoubleClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.onTimeRangeSelecting=null,this.onTimeRangeRightClick=null,this.onTimeRangeRightClicked=null,this.onRowHeaderColumnResized=null,this.onRowHeaderResized=null,this.onCellMouseEnter=null,this.onCellMouseLeave=null,this.onCellMouseOver=null,this.onCellMouseOut=null,this.onGridMouseDown=null,this.onBeforeCellRender=null,this.onBeforeCornerRender=null,this.onBeforeCornerDomAdd=null,this.onBeforeCornerDomRemove=null,this.onBeforeEventRender=null,this.onBeforeEventDomAdd=null,this.onBeforeEventDomRemove=null,this.onBeforeGridLineRender=null,this.onBeforeTimeHeaderRender=null,this.onBeforeTimeHeaderDomAdd=null,this.onBeforeTimeHeaderDomRemove=null,this.onBeforeResHeaderRender=null,this.onBeforeRowHeaderRender=null,this.onBeforeRowHeaderColumnRender=null,this.onBeforeRowHeaderDomAdd=null,this.onBeforeRowHeaderDomRemove=null,this.onBeforeCellExport=null,this.onBeforeEventExport=null,this.onBeforeTimeHeaderExport=null,this.onBeforeRowHeaderExport=null,this.onAfterEventRender=null,this.onAfterCellRender=null,this.onAfterEventEditRender=null,this.onEventFilter=null,this.onRowFilter=null,this.onRectangleSelecting=null,this.onRectangleSelect=null,this.onRectangleSelected=null,this.onDimensionsChanged=null,this.onAfterUpdate=null,this.R=0,this.wi=!0,this.xi=!1,this.yi=!1,this.zi=!1,this.Ai=-1,this.Bi=-1,this.T=!1,this.Ci=-1,this.Di=!1,this.Ei=!0,this.rowlist=t.list(),this.itline=t.list(),this.events={},this.cells={},this.elements={},this.elements.events=[],this.elements.bars=[],this.elements.text=[],this.elements.cells=[],this.elements.linesVertical=[],this.elements.separators=[],this.elements.range=[],this.elements.breaks=[],this.elements.links=[],this.elements.linkpoints=[],this.elements.rectangle=[],this.elements.hover=[],this.elements.timeHeader=[],this.P={},this.P.cells=[],this.P.linesVertical={},this.P.linesHorizontal={},this.P.timeHeaderGroups=[],this.P.timeHeader={},this.P.pixels=[],this.P.breaks=[],this.P.events=[],this.clientState={},this.members={},this.members.obsolete=["Init","cleanSelection","cssClassPrefix","getHScrollPosition","setHScrollPosition","getVScrollPosition","setVScrollPosition","showBaseTimeHeader"],this.members.ignoreFilter=function(e){return 0===e.indexOf("div")},this.members.ignore=["internal","nav","debug","temp","elements","members","cellProperties","itline","rowlist","timeHeader","timeouts","rowHeaderCols"],this.members.noCssOnly=[],this.U="javasc",this.nav={},this.la=function(e,n){if(e=JSON.parse(e),g.onScrollCalled=!1,e.VsUpdate){var i=document.createElement("input");i.type="hidden",i.name=g.id+"_vsupdate",i.id=i.name,i.value=e.VsUpdate,g.Hg.innerHTML="",g.Hg.appendChild(i)}if(!e.CallBackRedirect){if(e.BubbleGuid){var o=e.BubbleGuid,r=this.bubbles[o];return delete this.bubbles[o],g.Ga(),"undefined"!=typeof e.Result.BubbleHTML&&r&&r.updateView(e.Result.BubbleHTML,r),void g.Fi()}if("function"==typeof g.onCallBackResult){var a={};if(a.result=e,a.preventDefault=function(){a.preventDefault.value=!0},g.onCallBackResult(a),a.preventDefault.value)return g.Kb(),g.Ga(),g.bb(),e.Message&&g.message&&g.message(e.Message),g.Ha(e.CallBackData,!0),g.Fi(),void g.ba()}return"undefined"!=typeof t.Bubble&&t.Bubble.hideActive(),"undefined"!=typeof e.ClientState&&(g.clientState=null===e.ClientState?{}:e.ClientState),"None"===e.UpdateType?(g.Ga(),g.Fi(),e.Message&&g.message(e.Message),void g.Ha(e.CallBackData,!0)):("undefined"!=typeof e.TagFields&&(g.tagFields=e.TagFields),"undefined"!=typeof e.SortDirections&&(g.sortDirections=e.SortDirections),g.P.drawArea=null,"Full"===e.UpdateType&&(g.resources=e.Resources,g.colors=e.Colors,g.palette=e.Palette,g.dirtyColors=e.DirtyColors,g.cellProperties=e.CellProperties,g.cellConfig=e.CellConfig,g.separators=e.Separators,g.timeline=e.Timeline,g.timeHeader=e.TimeHeader,g.timeHeaders=e.TimeHeaders,"undefined"!=typeof e.Links&&(g.links.list=e.Links),"undefined"!=typeof e.RowHeaderColumns&&(g.rowHeaderColumns=e.RowHeaderColumns),g.startDate=e.StartDate?new t.Date(e.StartDate):g.startDate,g.days=e.Days?e.Days:g.days,g.cellDuration=e.CellDuration?e.CellDuration:g.cellDuration,g.cellGroupBy=e.CellGroupBy?e.CellGroupBy:g.cellGroupBy,g.cellWidth=e.CellWidth?e.CellWidth:g.cellWidth,"undefined"!=typeof e.CellWidthSpec&&(g.cellWidthSpec=e.CellWidthSpec),"undefined"!=typeof e.Scale&&(g.scale=e.Scale),g.viewType=e.ViewType?e.ViewType:g.viewType,"undefined"!=typeof e.ShowNonBusiness&&(g.showNonBusiness=e.ShowNonBusiness),g.businessBeginsHour=e.BusinessBeginsHour?e.BusinessBeginsHour:g.businessBeginsHour,g.businessEndsHour=e.BusinessEndsHour?e.BusinessEndsHour:g.businessEndsHour,"undefined"!=typeof e.DynamicLoading&&(g.dynamicLoading=e.DynamicLoading),"undefined"!=typeof e.TreeEnabled&&(g.treeEnabled=e.TreeEnabled),g.locale=e.Locale?e.Locale:g.locale,"undefined"!=typeof e.TimeZone&&(g.timeZone=e.TimeZone),g.timeFormat=e.TimeFormat?e.TimeFormat:g.timeFormat,g.rowHeaderCols=e.RowHeaderCols?e.RowHeaderCols:g.rowHeaderCols,"undefined"!=typeof e.DurationBarMode&&(g.durationBarMode=e.DurationBarMode),"undefined"!=typeof e.CornerHTML&&(g.cornerHtml=e.CornerHTML),g.hashes=e.Hashes,g.Gi(),g.Hi(),g.Ii(),g.La()),"Scroll"!==e.Action&&g.Ma(e.Events),"Full"===e.UpdateType&&(g.Ji(),g.Ki(),g.Li()),g.Mi(),g.Ya(),g._a(),g.P.drawArea=null,"Scroll"!==e.Action?(g.Ni(),g.Na(),"Auto"!==g.heightSpec&&"Max"!==g.heightSpec||g.Ua(),g.Oi(),g.pa(),g.Pi(),g.multiselect.clear(!0),g.multiselect.Qi(e.SelectedEvents),g.Ri(),g.Si(),g.Za()):(g.multiselect.clear(!0),g.multiselect.Qi(e.SelectedEvents),g.Ti(e.Events)),"HoldForever"!==g.timeRangeSelectedHandling&&g.Ui(),"Full"===e.UpdateType&&(g.setScroll(e.ScrollX,e.ScrollY),g.Dh()),g.Vi(),g.Kb(),e.SelectedRows&&g.Wi(e.SelectedRows),g.Ga(),"Full"===e.UpdateType&&-1!==navigator.appVersion.indexOf("MSIE 7.")&&window.setTimeout(function(){g.Ji(),g.Ua()},0),g.bb(),e.Message&&g.message&&g.message(e.Message),g.Ha(e.CallBackData,!0),g.Fi(),g.ba(),void("Full"!==e.UpdateType||"Scroll"===e.Action||g.onScrollCalled||setTimeout(function(){g.Xi()},0)))}document.location.href=e.CallBackRedirect},this.Kb=function(){if(g.Yi&&g.Yi.Zi){var e=g.Yi.Zi;e.parentNode.removeChild(e),g.Yi.Zi=null}},this.Ha=function(e,t){window.setTimeout(function(e,t){return function(){if(g.cb()){if("function"==typeof g.onAfterRender){var n={};n.isCallBack=t,n.isScroll=!1,n.data=e,g.onAfterRender(n)}}else g.afterRender&&g.afterRender(e,t)}}(e,t),0)},this.scrollTo=function(e,n,i){if(g.infiniteScrollingEnabled)return g.S&&!t.Util.overlaps(g.visibleStart(),g.visibleEnd(),e,e)?void g.infinite.scrollTo(e):void g.$i(e,n,i);g._i.enabled?(g._i.scrollToRequested=e,setTimeout(function(){var e=g._i.scrollToRequested;e&&(g.aj=null,g.$i(e,n,i))},0)):g.$i(e,n,i)},this.$i=function(e,n,i){if(e){if(!g.S)return void(g.aj={date:e,animated:n,position:i});if("Days"===g.viewType){var o=new t.Date(e),r=g.bj(o);if(!r)return;setTimeout(function(){g.nav.scroll.scrollTop=r.top},100);var a=o.getTimePart();e=g.visibleStart().getDatePart().addTime(a)}var l;if(e instanceof t.Date)l=this.getPixels(e).left;else if("string"==typeof e)l=this.getPixels(new t.Date(e)).left;else{if("number"!=typeof e)throw new t.Exception("Invalid scrollTo() parameter. Accepted parameters: string (ISO date), number (pixels), DayPilot.Date object");l=e}var s=g.cj.clientWidth,d=g.nav.scroll.clientWidth;switch((i=i||"left").toLowerCase()){case"left":break;case"middle":l-=d/2;break;case"right":l-=d}if(l<0&&(l=0),l>s-d&&(l=s-d),!n)return void g.dj(l);var c=Math.abs(g.nav.scroll.scrollLeft-l)/s,u=50;if("number"==typeof n)u=n;else if("string"==typeof n)switch(n){case"fast":u=30;break;case"normal":u=50;break;case"slow":u=100;break;case"linear":u=Math.floor(100*c)}c>.6&&(u=Math.min(u,80)),g.ej(l,u)}},this.ej=function(e,t){for(var n={steps:[],index:0,delay:10,next:function(){var e=n.steps[n.index];return n.index+=1,e},finished:function(){g.Xi()}},i=g.getScrollX(),o=(t=t||100,e-i),r=0;r<t;r++){var a=r/t,l=2*(a-.5)/(Math.pow(2*(a-.5),2)+1)+.5;n.steps.push(i+o*l)}n.steps.push(e),function e(t){var n=t.next();return"undefined"==typeof n?void(t.finished&&t.finished()):(g.setScrollX(n),window.clearTimeout(g.refreshTimeout),void setTimeout(function(){e(t)},t.delay))}(n)},this.scrollToResource=function(e){t.complete(function(){var n;if("string"==typeof e||"number"==typeof e)n=g.fj(e);else{if(!(e instanceof t.Row))throw new t.Exception("Invalid scrollToResource() argument: id or DayPilot.Row expected");n=g.fj(e.id)}n&&setTimeout(function(){g.nav.scroll.scrollTop=n.top},100)})},this.gj=function(){if(this.floatingTimeHeaders&&this.timeHeader){var e=g.X();if(e){g.hj();for(var t=e.pixels.left+v.ij,n=e.pixels.right+v.ij+e.sw,i=[],o=0;o<this.timeHeader.length;o++)for(var r=0;r<this.timeHeader[o].length;r++){var a=this.timeHeader[o][r],l=a.left,s=a.left+a.width,d=null;if(l<t&&t<s&&((d={}).x=r,d.y=o,d.marginLeft=t-l,d.marginRight=0,d.div=g.P.timeHeader[r+"_"+o],i.push(d)),l<n&&n<s){d||((d={}).x=r,d.y=o,d.marginLeft=0,d.div=g.P.timeHeader[r+"_"+o],i.push(d)),d.marginRight=s-n;break}}for(var c=0;c<i.length;c++)g.jj((d=i[c]).div,d.marginLeft,d.marginRight)}}},this.Vi=function(){g.gj(),g.kj()},this.lj={};var m=g.lj;m.mj=function(e,n,i,o){var r=e,a=e+i,l=n,s=n+o;return t.list(g.elements.events).filter(function(e){var n=e.event,i=g.rowlist[n.part.dayIndex].top+n.part.top,o=i+n.part.height;if(t.Util.overlaps(n.part.left,n.part.left+n.part.width,r,a)&&t.Util.overlaps(i,o,l,s))return!0})},m.Wh=function(e){var n=[],i=(e=e||"All",g.X());if(!i)return t.list(n);for(var o=i.pixels.left,r=i.pixels.right,a=0;a<g.elements.events.length;a++){var l=g.elements.events[a],s=l.event,d=s.part.left,c=s.part.left+s.part.width;switch(e){case"Left":d<o&&o<c&&n.push(l);break;case"All":t.Util.overlaps(d,c,o,r)&&n.push(l)}}return t.list(n).addProps({area:i})},this.kj=function(){if(this.floatingEvents){var e=m.Wh("Left");g.nj(),e.filter(function(e){return"Milestone"!==e.event.data.type}).forEach(function(t){g.oj(t,e.area.pixels.left-t.event.part.left,0)})}},this.elements.sections=[],this.elements.hsections=[],this.jj=function(e,t,n){var i=d();i.setAttribute("unselectable","on"),i.className=g.G("_timeheader_float"),i.style.position="absolute",i.style.left=t+"px",i.style.right=n+"px",i.style.top="0px",i.style.bottom="0px",i.style.overflow="hidden";var o=d();o.className=g.G("_timeheader_float_inner"),o.setAttribute("unselectable","on");var r=e.cell.th;if(o.innerHTML=g.ca(r.text,r.innerHTML),r.fontColor&&(o.style.color=r.fontColor),i.appendChild(o),e.section=i,e.insertBefore(i,e.firstChild.nextSibling),e.domArgs&&e.domArgs.element){var a=e.firstChild&&e.firstChild.firstChild;a&&(a.style.display="none")}else e.firstChild.innerHTML="";this.elements.hsections.push(e)},this.hj=function(){for(var e=0;e<this.elements.hsections.length;e++){var n=this.elements.hsections[e],i=n.cell;if(i&&n.firstChild)if(n.domArgs&&n.domArgs.element){var o=n.firstChild&&n.firstChild.firstChild;o&&(o.style.display="")}else n.firstChild.innerHTML=g.ca(i.th.text,i.th.innerHTML);t.de(n.section),n.section=null}this.elements.hsections=[]},this.oj=function(e,n,i){var o=d();o.setAttribute("unselectable","on"),o.className=g.G(R.eventFloat),o.style.position="absolute",o.style.left=n+"px",o.style.right=i+"px",o.style.top="0px",o.style.bottom="0px",o.style.overflow="hidden";var r=d();if(r.className=g.G(R.eventFloatInner),r.setAttribute("unselectable","on"),r.innerHTML=e.event.client.html(),o.appendChild(r),e.section=o,e.insertBefore(o,e.firstChild.nextSibling),e.domArgs&&e.domArgs.element){var a=e&&e.firstChild&&e.firstChild.firstChild;a&&(a.style.display="none")}else e.firstChild.innerHTML="";var l=e.event,s=l.cache||l.data,c=l.cache?l.cache.areas:l.data.areas;c=c||[],s.fontColor&&(r.style.color=s.fontColor);var u={offsetX:g.pj(r),eventDiv:e,areas:c.filter(function(e){return!(e.start||e.end)})};t.Areas.attach(o,e.event,u),t.Areas.disable(e),this.elements.sections.push(e)},this.qj=null,this.pj=function(e){return null===g.qj&&(g.qj=parseInt(new t.StyleReader(e).get("padding-left"))),g.qj},this.nj=function(){for(var e=0;e<this.elements.sections.length;e++){var n=this.elements.sections[e],i=n.event;if(i)if(n.domArgs&&n.domArgs.element){var o=n&&n.firstChild&&n.firstChild.firstChild;o&&(o.style.display="")}else n.firstChild.innerHTML=i.client.html();t.de(n.section),t.Areas.enable(n),n.section=null}this.elements.sections=[]},this.setScrollX=function(e){g._i.enabled?(g._i.scrollXRequested=e,setTimeout(function(){var e=g._i.scrollXRequested;"number"==typeof e&&g.dj(e)},0)):g.dj(e)},this.dj=function(e){var t=g.nav.scroll,n=g.rj();t.clientWidth+e>n&&(e=n-t.clientWidth),g.divTimeScroll.scrollLeft=e,t.scrollLeft=e},this.setScrollY=function(e){g._i.enabled?(g._i.scrollYRequested=e,setTimeout(function(){var e=g._i.scrollYRequested;"number"==typeof e&&g.sj(e)},0)):g.sj(e)},this.sj=function(e){var t=g.nav.scroll,n=g.Ci;t.clientHeight+e>n&&(e=n-t.clientHeight),g.divResScroll.scrollTop=e,t.scrollTop=e},this.setScroll=function(e,t){g.setScrollX(e),g.setScrollY(t)},this.tj=function(){return g.uj()+H.vj()-1},this.message=function(e,n){if(null!==e&&g.S){var i,o,r={};i="object"==typeof arguments[1]?(r=arguments[1]).delay:n,o=r.rawHtml?e:t.Util.escapeHtml(e),i=i||this.messageHideAfter||2e3;var a,l=g.wj()+1,s=g.tj(),c=t.sw(g.nav.scroll)+1,u=t.sh(g.nav.scroll);if(this.nav.message)a=g.nav.message;else{(a=d()).style.position="absolute",a.style.left=s+"px",a.style.right=c+"px",a.style.display="none",t.re(a,t.touch.start,function(e){g.nav.message.style.display="none",e.preventDefault(),e.stopPropagation()}),a.onmousemove=function(){g.messageHideOnMouseOut&&a.messageTimeout&&!a.status&&clearTimeout(a.messageTimeout)},a.onmouseout=function(){g.messageHideOnMouseOut&&"none"!==g.nav.message.style.display&&(a.messageTimeout=setTimeout(g.nb,500))};var h=d();h.onclick=function(){g.nav.message.style.display="none"},h.className=g.G("_message"),a.appendChild(h);var p=d();p.style.position="absolute",p.className=g.G("_message_close"),p.onclick=function(){g.nav.message.style.display="none"},a.appendChild(p),this.nav.top.appendChild(a),this.nav.message=a}var f=function(){if(g.nav.message){var e=g.nav.message.firstChild;e.className=g.G("_message"),r.cssClass&&t.Util.addClass(e,r.cssClass),e.innerHTML=o;var n=t.sw(g.nav.scroll);g.nav.message.style.right=n+"px";var s=g.messageBarPosition||"Top";"Bottom"===s?(g.nav.message.style.bottom=u+"px",g.nav.message.style.top=""):"Top"===s&&(g.nav.message.style.bottom="",g.nav.message.style.top=l+"px"),t.fade(g.nav.message,.2,function(){a.messageTimeout=setTimeout(g.nb,i)})}};clearTimeout(a.messageTimeout),"none"!==this.nav.message.style.display?t.fade(g.nav.message,-.2,f):f()}},this.nb=function(){g.nav&&g.nav.message&&t.fade(g.nav.message,-.2,function(){g.nav.message.style.display="none"})},this.xj=function(){g.nav&&g.nav.message&&(g.nav.message.style.display="none")},this.message.show=function(e){g.message(e)},this.message.hide=function(){g.nb()},this.yj=null,this.Ua=function(){if(this.nav.scroll){!function(){var e=g.rj();g.cj.style.height=g.Ci+"px",g.cj.style.width=e+"px","Auto"!==g.cellWidthSpec||g.zj?g.nav.scroll.style.overflowX=e>g.nav.scroll.clientWidth?"auto":"hidden":(g.nav.scroll.style.overflowX="hidden",g.nav.scroll.scrollLeft=0)}();var e="None"===g.timeHeaderPosition?0:1;null!==this.yj&&(this.nav.top.style.border=this.yj,this.yj=null),"Parent100Pct"!==this.heightSpec&&"Max100Pct"!==this.heightSpec||(this.nav.top.style.height="100%",this.hideBorderFor100PctHeight&&(this.yj=this.nav.top.style.border,this.nav.top.style.border="0 none"),this.height=parseInt(this.nav.top.clientHeight,10)-this.wj()-e),this.nav.scroll.style.height="30px";var n=this.ed(),i=n+this.wj()+e;if(n>=0&&(this.nav.scroll.style.height=n+"px",this.Aj.style.height=n+"px"),this.nav.divider&&((!i||isNaN(i)||i<0)&&(i=0),this.nav.divider.style.height=i+"px"),"Parent100Pct"!==this.heightSpec&&(this.nav.top.style.height=i+"px"),g.nav.resScrollSpace){var o=30+g.Bj.bottom.height;"Auto"===g.heightSpec&&(o=t.sh(g.nav.scroll)),g.nav.resScrollSpace.style.height=o+"px"}for(var r=0;r<this.elements.separators.length;r++)this.elements.separators[r].style.height=this.Ci+"px";for(r=0;r<this.elements.linesVertical.length;r++)this.elements.linesVertical[r].style.height=this.Ci+"px";g.Cj(),g.Dj()}},this.Hi=function(){this.startDate=new t.Date(this.startDate).getDatePart(),this.P.pixels=[],this.itline=t.list();var e="Auto"===this.cellWidthSpec;if(function(){if(e){var n=0;g.I()&&g.timeline?n=g.timeline.length:"Manual"===g.scale?n=g.timeline.length:(g.Ej(),n=g.itline.length,g.itline=t.list());var i=g.Fj();if(n>0&&i>0){var o=i/n;g.cellWidth=t.Util.atLeast(o,g.cellWidthMin),g.zj=o<g.cellWidthMin}}}(),this.I()&&this.timeline){if(this.timeline){this.itline=t.list();for(var n=null,i=0,o=0;o<this.timeline.length;o++){if((l={}).start=new t.Date((a=this.timeline[o]).start),l.end=a.end?new t.Date(a.end):l.start.addMinutes(this.cellDuration),a.width)l.left=a.left||i,l.width=a.width||this.cellWidth,i+=l.width;else{var r=Math.floor(i+this.cellWidth)-Math.floor(i);l.left=Math.floor(i),l.width=r,i+=this.cellWidth}l.breakBefore=n&&n.ticks!==l.start.ticks,n=l.end,this.itline.push(l)}}e&&this.Gj()}else{if(this.timeHeader=[],"Manual"===this.scale)for(this.itline=t.list(),i=0,n=null,o=0;this.timeline&&o<this.timeline.length;o++){var a,l;if((l={}).start=new t.Date((a=this.timeline[o]).start),l.end=a.end?new t.Date(a.end):l.start.addMinutes(this.cellDuration),n&&l.start.ticks<n.ticks)throw new t.Exception("The timeline must be sequential");var s=a.width||this.cellWidth;r=Math.floor(i+s)-Math.floor(i),l.left=Math.floor(i),l.width=r,i+=s,l.breakBefore=n&&n.ticks!==l.start.ticks,n=l.end,this.itline.push(l)}else this.Ej();this.Hj()}},this.infinite={},this.infinite.shiftStart=function(e){v.Ij(e)},this.infinite.scrollTo=function(e){v.Jj(e)},this.Kj={};var v=this.Kj;v.ij=0,v.zf=!1,v.Lj=function(){g.Mj().forEach(function(e,t){e.start=g.kb(),e.data=null,g.Nj(e.index,e.grid)})},v.Oj=function(){return g.infiniteScrollingEnabled&&!g.I()},v.Jj=function(e){var n=(e=new t.Date(e)).addDays(-g.infiniteScrollingStepDays).getDatePart(),i=new t.Duration(n.getTime()-g.startDate.getDatePart().getTime()).totalDays();v.Ij(i,e)},v.Ij=function(e,n){var i;v.zf=!0;var o=g.startDate,r=g.startDate.addDays(e);e>0&&(i=-g.getPixels(r).left),g.startDate=g.startDate.addDays(e),g.itline=t.list(),g.P.pixels=[],g.Pj={},g.Ej(),v.Lj(),e<0&&(i=g.getPixels(o).left),g.timeHeader=[],g.Hj(),g.Li(),g.cellProperties={},g.Oi(),g.Pi(),g.Ma(),g.pa(),g.Mi(),g.Ni(),g.Ua(),"undefined"!=typeof n?(g.scrollTo(new t.Date(n)),g.Xi()):g.nav.scroll.scrollLeft+=i,g.Si(),g.Za(),v.zf=!1},this.Ej=function(){!g.S&&v.Oj()&&(this.startDate=this.startDate.addDays(-this.infiniteScrollingStepDays));for(var e=this.startDate.addDays("Days"!==this.viewType?this.days:1),n=this.startDate,i=this.Qj(n),o=!1,r=0,a=null;i.ticks<=e.ticks&&i.ticks>n.ticks;){var l=n,s=i;g.showNonBusinessForceHours&&"Day"==g.scale&&(l=n.addHours(g.businessBeginsHour),s=n.addHours(g.businessEndsHour));var d=this.Rj(l,s,!0);if(!d.cell.start||!d.cell.end)throw new t.Exception("Invalid timeline cell start/end: start and/or end not specified");if(d.cell.start=new t.Date(d.cell.start),d.cell.end=new t.Date(d.cell.end),d.cell.start>=d.cell.end)throw new t.Exception("Invalid timeline cell start/end: end before start");if(a&&a.ticks>d.cell.start.ticks)throw new t.Exception("Invalid timeline cell start/end: overlapping cells");o=!!(a&&a.ticks<d.cell.start.ticks);var c=d.cell.width||g.cellWidth;if(d.cell.visible){var u=Math.floor(r+c)-Math.floor(r),h={};h.start=d.cell.start,h.end=d.cell.end,h.left=Math.floor(r),h.width=u,h.breakBefore=o,this.itline.push(h),r+=c,a=d.cell.end}i=this.Qj(n=i)}},this.Gj=function(){if(this.timeHeader)for(var e=0;e<this.timeHeader.length;e++)for(var n=this.timeHeader[e],i=0;i<n.length;i++){var o=n[i];o.left=this.getPixels(new t.Date(o.start)).left;var r=this.getPixels(new t.Date(o.end)).left;o.width=r-o.left}},this.Hj=function(){var e=this.timeHeaders;if(e||(e=[{groupBy:this.cellGroupBy},{groupBy:"Cell"}]),this.itline.isEmpty()){this.timeHeader=[];for(var t=0;t<e.length;t++)this.timeHeader[t]=[]}else{var n=g.Sj();for(t=0;t<e.length;t++){var i=e[t].groupBy,o=e[t].format;"Default"===i&&(i=this.cellGroupBy);for(var r=[],a=this.kb();a.ticks<n.ticks;){var l={};if(l.start=a,l.end=this.Tj(l.start,i),l.start.ticks===l.end.ticks)break;l.left=this.getPixels(l.start).left;var s=this.getPixels(l.end).left-l.left;if(l.width=s,l.colspan=Math.ceil(s/(1*this.cellWidth)),l.text="string"==typeof o?l.start.toString(o,H.Uj()):this.Vj(l,i),s>0){if("function"==typeof this.onBeforeTimeHeaderRender){var d={};d.start=l.start,d.end=l.end,d.text=l.text,d.html=null,d.toolTip=g.ca(l.text),d.backColor=null,d.fontColor=null,d.level=this.timeHeader.length,d.cssClass=null;var c={};c.header=d,c.control=g,this.onBeforeTimeHeaderRender(c),l.innerHTML=g.ca(d.text,d.html),l.backColor=d.backColor,l.fontColor=d.fontColor,l.toolTip=d.toolTip,l.areas=d.areas,l.cssClass=d.cssClass}r.push(l)}a=l.end}this.timeHeader.push(r)}}},this.Rj=function(e,t){var n={};n.start=e,n.end=t,n.visible=!0,n.width=null;var i={};return i.cell=n,"function"==typeof this.onIncludeTimeCell?(this.onIncludeTimeCell(i),i):this.showNonBusiness?i:(i.cell.visible=this.isBusiness({start:e,end:t},"Days"===g.viewType),i)},this.getPixels=function(e){var n=e.ticks,i=this.P.pixels[n];if(i)return i;var o=2218768416e5;if(0===this.itline.length||n<this.itline[0].start.ticks)return(c={cut:!1,left:0}).boxLeft=c.left,c.boxRight=c.left,c.i=null,c;for(var r=this.Wj(e),a=t.Util.atLeast(r.i-1,0);a<this.itline.length;a++){var l=this.itline[a],s=l.start.ticks,d=l.end.ticks;if(s<n&&n<d){(c={cut:!1}).left=l.left+this.Od(l,n-s),c.boxLeft=l.left,c.boxRight=l.left+l.width,c.i=a;break}if(s===n){(c={cut:!1}).left=l.left,c.boxLeft=c.left,c.boxRight=c.left+l.width,c.i=a;break}if(d===n){(c={cut:!1}).left=l.left+l.width,c.boxLeft=c.left,c.boxRight=c.left,c.i=a+1;break}if(n<s&&n>o){(c={cut:!0}).left=l.left,c.boxLeft=c.left,c.boxRight=c.left,c.i=a;break}o=d}if(!c){var c,u=this.itline[this.itline.length-1];(c={cut:!0}).left=u.left+u.width,c.boxLeft=c.left,c.boxRight=c.left,c.i=null}return this.P.pixels[n]=c,c},this.getDate=function(e,t,n){var i=this.Xj(e,n);if(!i)return null;var o=this.itline[i.x];if(!o)return null;var r=n&&!t?o.end:o.start;return t?r.addTime(this.Yj(i.cell,i.offset)):r},this.Xj=function(e,t){if(0===this.itline.length)return null;for(var n=0,i=0,o=0;o<this.itline.length;o++){if(e<(n+=(a=this.itline[o]).width||this.cellWidth)||t&&e===n)return(r={}).x=o,r.offset=e-i,r.cell=a,r;i=n}var r,a=g.itline.last();return(r={}).x=this.itline.length-1,r.offset=a.width||this.cellWidth,r.cell=a,r},this.Zj=function(e){return this.Wj(e)},this.Wj=function(e){var n=new t.Date(e),i=0;if(n.ticks<this.itline[0].start.ticks)return(l={hidden:!0,previous:null,current:null}).next=this.itline[0],l.i=-1,l;var o=this.itline.length-1,r=this.itline[o];if(n.ticks>r.end.ticks)return(l={past:!0}).previous=this.itline[this.itline.length-1],l.i=this.itline.length,l;if(n.ticks===r.end.ticks)return(l={past:!1}).current=this.itline[this.itline.length-1],l.i=this.itline.length-1,l;for(var a=function(){for(var e,t=g.itline;i<=o;)if(t[e=Math.floor((i+o)/2)].start.ticks>n.ticks)o=e-1;else{if(!(t[e].end.ticks<n.ticks))return e;i=e+1}return i}();a<this.itline.length;a++){var l,s=this.itline[a];if(s.start.ticks<=n.ticks&&n.ticks<s.end.ticks)return(l={hidden:!1}).current=s,l.i=a,l;if(n.ticks<s.start.ticks)return(l={hidden:!0}).previous=a>0?this.itline[a-1]:null,l.current=null,l.next=this.itline[a],l.i=a,l}return(l={past:!0}).previous=this.itline[this.itline.length-1],l.i=this.itline.length,l},this.Od=function(e,t){return Math.floor((e.width||this.cellWidth)*t/(e.end.ticks-e.start.ticks))},this.Yj=function(e,t){return Math.floor(t/(e.width||this.cellWidth)*(e.end.ticks-e.start.ticks))},this.Xg=function(e){t.Global.touch.start||l.$j||(g._j={},g.pb(this,e))},this.eventClickPostBack=function(e,t){this.fa("EventClick",e,t)},this.eventClickCallBack=function(e,t){this.ha("EventClick",e,t)},this.pb=function(e,n){var i=e.event;if(i){if("undefined"!=typeof t.Bubble&&t.Bubble.hideActive(),!i.client.doubleClickEnabled())return void g.qb(e,n);g.ak.click||(g.ak.click=[]),g.ak.click.push(window.setTimeout(function(e,t){return function(){g.qb(e,t)}}(e,n),g.doubleClickTimeout))}},this.bk=function(e){return g.itline[e]},this.qb=function(e,n){if("boolean"==typeof n)throw new t.Exception("Invalid _eventClickSingle parameters");var i=e.event;if(i){var o=n.ctrlKey,r=n.metaKey;if(i.client.clickEnabled())if(g.ck(n),g.cb()){var a={};if(a.e=i,a.control=g,a.div=e,a.originalEvent=n,a.ctrl=o,a.meta=r,a.shift=n.shiftKey,a.preventDefault=function(){this.preventDefault.value=!0},a.toJSON=function(){return t.Util.copyProps(a,{},["e","ctrl","meta","shift"])},"function"==typeof g.onEventClick&&(g.onEventClick(a),a.preventDefault.value))return;switch(g.eventClickHandling){case"PostBack":g.eventClickPostBack(i);break;case"CallBack":g.eventClickCallBack(i);break;case"Edit":g.rb(e);break;case"Select":g.sb(e,i,o,r);break;case"ContextMenu":(l=i.client.contextMenu())?l.show(i):g.contextMenu&&g.contextMenu.show(i);break;case"Bubble":g.bubble&&g.bubble.showEvent(i);break;case"RectangleSelect":if("Disabled"!==H.dk())return M.start(),!1}"function"==typeof g.onEventClicked&&g.onEventClicked(a)}else switch(g.eventClickHandling){case"PostBack":g.eventClickPostBack(i);break;case"CallBack":g.eventClickCallBack(i);break;case"JavaScript":g.onEventClick(i);break;case"Edit":g.rb(e);break;case"Select":g.sb(e,i,o,r);break;case"ContextMenu":var l;(l=i.client.contextMenu())?l.show(i):g.contextMenu&&g.contextMenu.show(i);break;case"Bubble":g.bubble&&g.bubble.showEvent(i);break;case"RectangleSelect":if("Disabled"!==H.dk())return M.start(),!1}}},this.zb=function(e){if(g.cb()){var n={};if(n.e=e,n.preventDefault=function(){this.preventDefault.value=!0},n.control=g,n.toJSON=function(){return t.Util.copyProps(n,{},["e"])},"function"==typeof g.onEventDelete&&(g.onEventDelete(n),n.preventDefault.value))return;switch(g.eventDeleteHandling){case"PostBack":g.eventDeletePostBack(e);break;case"CallBack":g.eventDeleteCallBack(e);break;case"Update":g.events.remove(e),"undefined"!=typeof t.Bubble&&t.Bubble.hideActive()}"function"==typeof g.onEventDeleted&&g.onEventDeleted(n)}else switch(g.eventDeleteHandling){case"PostBack":g.eventDeletePostBack(e);break;case"CallBack":g.eventDeleteCallBack(e);break;case"JavaScript":g.onEventDelete(e)}},this.eventDeletePostBack=function(e,t){this.fa("EventDelete",e,t)},this.eventDeleteCallBack=function(e,t){this.ha("EventDelete",e,t)},this.setHScrollPosition=function(e){this.nav.scroll.scrollLeft=e},this.getScrollX=function(){return this.nav.scroll.scrollLeft},this.getHScrollPosition=this.getScrollX,this.getScrollY=function(){return this.nav.scroll.scrollTop},this.sb=function(e,t,n,i){g.Tb(e,t,n,i)},this.eventSelectPostBack=function(e,t,n){var i={};i.e=e,i.change=t,this.fa("EventSelect",i,n)},this.eventSelectCallBack=function(e,t,n){var i={};i.e=e,i.change=t,this.ha("EventSelect",i,n)},this.Tb=function(e,t,n,i){var o=g.multiselect,r=o.isSelected(t);if(n||i||!r||1!==o.Ub.length)if(g.cb()){o.uc=o.events();var a={};if(a.e=t,a.selected=r,a.ctrl=n,a.meta=i,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onEventSelect&&(g.onEventSelect(a),a.preventDefault.value))return;switch(g.eventSelectHandling){case"PostBack":g.eventSelectPostBack(t,l);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),g.eventSelectCallBack(t,l);break;case"Update":o.Xb(e,n,i)}"function"==typeof g.onEventSelected&&(a.change=o.isSelected(t)?"selected":"deselected",a.selected=o.isSelected(t),g.onEventSelected(a))}else{o.uc=o.events(),o.Xb(e,n,i);var l=o.isSelected(t)?"selected":"deselected";switch(g.eventSelectHandling){case"PostBack":g.eventSelectPostBack(t,l);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),g.eventSelectCallBack(t,l);break;case"JavaScript":g.onEventSelect(t,l)}}},this.eventRightClickPostBack=function(e,t){this.fa("EventRightClick",e,t)},this.eventRightClickCallBack=function(e,t){this.ha("EventRightClick",e,t)},this.ub=function(e){if(!t.Global.touch.active&&!t.Global.touch.start){var n=this.event;if(e.cancelBubble=!0,!this.event.client.rightClickEnabled())return!1;if(g.ck(e),g.cb()){var i={};if(i.e=n,i.div=this,i.originalEvent=e,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onEventRightClick&&(g.onEventRightClick(i),i.preventDefault.value))return!1;switch(g.eventRightClickHandling){case"PostBack":g.eventRightClickPostBack(n);break;case"CallBack":g.eventRightClickCallBack(n);break;case"ContextMenu":(o=n.client.contextMenu())?o.show(n):g.contextMenu&&g.contextMenu.show(this.event);break;case"Bubble":g.bubble&&g.bubble.showEvent(n)}"function"==typeof g.onEventRightClicked&&g.onEventRightClicked(i)}else switch(g.eventRightClickHandling){case"PostBack":g.eventRightClickPostBack(n);break;case"CallBack":g.eventRightClickCallBack(n);break;case"JavaScript":g.onEventRightClick(n);break;case"ContextMenu":var o;(o=n.client.contextMenu())?o.show(n):g.contextMenu&&g.contextMenu.show(this.event);break;case"Bubble":g.bubble&&g.bubble.showEvent(n)}return!1}},this.eventDoubleClickPostBack=function(e,t){this.fa("EventDoubleClick",e,t)},this.eventDoubleClickCallBack=function(e,t){this.ha("EventDoubleClick",e,t)},this.tb=function(e){if("undefined"!=typeof t.Bubble&&t.Bubble.hideActive(),g.ak.click){for(var n in g.ak.click)window.clearTimeout(g.ak.click[n]);g.ak.click=null}var i=this.event;if(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,g.cb()){var o={};if(o.e=i,o.originalEvent=e,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onEventDoubleClick&&(g.onEventDoubleClick(o),o.preventDefault.value))return;switch(g.eventDoubleClickHandling){case"PostBack":g.eventDoubleClickPostBack(i);break;case"CallBack":g.eventDoubleClickCallBack(i);break;case"Edit":g.rb(this);break;case"Select":g.sb(div,i,e.ctrlKey,e.metaKey);break;case"Bubble":g.bubble&&g.bubble.showEvent(i);break;case"ContextMenu":(r=i.client.contextMenu())?r.show(i):g.contextMenu&&g.contextMenu.show(i)}"function"==typeof g.onEventDoubleClicked&&g.onEventDoubleClicked(o)}else switch(g.eventDoubleClickHandling){case"PostBack":g.eventDoubleClickPostBack(i);break;case"CallBack":g.eventDoubleClickCallBack(i);break;case"JavaScript":g.onEventDoubleClick(i);break;case"Edit":g.rb(this);break;case"Select":g.sb(div,i,e.ctrlKey,e.metaKey);break;case"Bubble":g.bubble&&g.bubble.showEvent(i);break;case"ContextMenu":var r;(r=i.client.contextMenu())?r.show(i):g.contextMenu&&g.contextMenu.show(i)}},this.eventResizePostBack=function(e,t,n,i){this.Gb("PostBack",e,t,n,i)},this.eventResizeCallBack=function(e,t,n,i){this.Gb("CallBack",e,t,n,i)},this.Gb=function(e,t,n,i,o){var r={};if(t&&t.preventDefault){var a=t;r.e=a.e,r.newStart=a.newStart,r.newEnd=a.newEnd,r.multiresize=[],a.multiresize.forEach(function(e){var t={};t.e=e.event,t.newStart=e.start,t.newEnd=e.end,r.multiresize.push(t)})}else r.e=t,r.newStart=n,r.newEnd=i;this.Ab(e,"EventResize",r,o)},this.Eb=function(e,n,i,o){if("Disabled"!==this.eventResizeHandling){i=g.kh(i);var r={};r.e=e,r.async=!1,r.loaded=function(){l()},r.newStart=n,r.newEnd=i,r.what=o,r.preventDefault=function(){this.preventDefault.value=!0},r.multiresize=t.list(S.list),r.control=g,r.toJSON=function(){return t.Util.copyProps(r,{},["e","async","newStart","newEnd","multiresize"])};var a={};if(a.event=e,a.start=n,a.end=i,r.multiresize.splice(0,0,a),g.cb()){var l=function(){if(O.tg(),!r.preventDefault.value){switch(r.loaded={},n=r.newStart,i=r.newEnd,g.eventResizeHandling){case"PostBack":g.eventResizePostBack(r);break;case"CallBack":g.eventResizeCallBack(r);break;case"Notify":g.eventResizeNotify(r);break;case"Update":g.ek(r)}"function"==typeof g.onEventResized&&g.onEventResized(r)}};"function"==typeof g.onEventResize&&g.onEventResize(r),r.async?g.blockOnCallBack&&O.Ya():l()}else switch(g.eventResizeHandling){case"PostBack":g.eventResizePostBack(r);break;case"CallBack":g.eventResizeCallBack(r);break;case"JavaScript":g.onEventResize(e,n,i);break;case"Notify":g.eventResizeNotify(r);break;case"Update":g.ek(r)}}},this.eventMovePostBack=function(e,t,n,i,o,r){this.Lb("PostBack",e,t,n,i,o,r)},this.eventMoveCallBack=function(e,t,n,i,o,r){this.Lb("CallBack",e,t,n,i,o,r)},this.Lb=function(e,t,n,i,o,r,a){var l={};if(t&&t.preventDefault){var s=t;l.e=s.e,l.newStart=s.newStart,l.newEnd=s.newEnd,l.newResource=s.newResource,l.position=s.position,l.multimove=[],s.multimove.forEach(function(e){var t={};t.e=e.event,t.newStart=e.start,t.newEnd=e.end,t.newResource=e.event.resource(),t.e===s.e||t.e.data.id==s.e.data.id?t.newResource=s.newResource:T.rowoffset&&(t.newResource=g.rowlist[e.event.part.dayIndex+T.rowoffset].id),l.multimove.push(t)})}else l.e=t,l.newStart=n,l.newEnd=i,l.newResource=o,l.position=a;this.Ab(e,"EventMove",l,r)},this.fk=function(e,t,n){var i={};i.start=t.start,i.end=t.end,i.resource=t.resource,i.multirange=[],t.multirange.forEach(function(e){var t={};t.start=e.start,t.end=e.end,t.resource=e.resource,i.multirange.push(t)}),this.Ab(e,"TimeRangeSelected",i,n)},this.Ab=function(e,n,i,o){if("PostBack"===e)g.fa(n,i,o);else if("CallBack"===e)g.ha(n,i,o,"CallBack");else if("Immediate"===e)g.ha(n,i,o,"Notify");else if("Queue"===e)g.queue.add(new t.Action(this,n,i,o));else{if("Notify"!==e)throw new t.Exception("Invalid event invocation type");"Notify"===H.gk()?g.ha(n,i,o,"Notify"):g.queue.add(new t.Action(g,n,i,o))}},this.eventMoveNotify=function(e,n,i,o,r,a){if(e&&e.preventDefault){var l=e;l.old=new t.Event(l.e.copy(),g),l.multimove.forEach(function(e){e.old=new t.Event(e.event.copy(),g)}),g.ek(l),l.e=l.old,delete l.old,l.multimove.forEach(function(e){e.event=e.old,delete e.old})}else{e=new t.Event(e.copy(),g);var s=g.events.hk(e.data);e.start(n),e.end(i),e.resource(o),e.commit(),s=s.concat(g.events.ik(e.data)),g.jk(s),g.kk(),g.lk(s)}this.Lb("Notify",e,n,i,o,r,a)},this.eventResizeNotify=function(e,n,i,o){if(e&&e.preventDefault){var r=e;r.old=new t.Event(r.e.copy(),g),r.multiresize.forEach(function(e){e.old=new t.Event(e.event.copy(),g)}),g.ek(r),r.e=r.old,delete r.old,r.multiresize.forEach(function(e){e.event=e.old,delete e.old})}else{e=new t.Event(e.copy(),g);var a=g.events.hk(e.data);e.start(n),e.end(i),e.commit(),a=a.concat(g.events.ik(e.data)),g.jk(a),g.kk(),g.lk(a)}this.Gb("Notify",e,n,i,o)},this.zoom={},this.zoom.active=-1,this.zoom.setActive=function(e,n){var i;if("number"==typeof e)i=g.zoomLevels[e];else{if("string"!=typeof e)throw new t.Exception("Unexpected parameter type (string or number required): "+typeof e);var o=g.zoom.mk(e);i=g.zoomLevels[o]}if(!i)throw new t.Exception("Zoom level not found: "+e);if(e!==g.zoom.active){var r=g.zoom.Nh(n);g.zoom.nk(e,r),g.S&&g.update(),r&&g.scrollTo(r,null,n||g.zoomPosition)}},this.zoom.mk=function(e){return t.list(g.zoomLevels).findIndex(function(t){return t.id===e})},this.zoom.Nh=function(e){e=e||g.zoomPosition||"left";var t=null;if(!g.nav.scroll)return null;var n=g.getViewPort();switch(e){case"left":t=n.start;break;case"middle":t=n.start&&n.start.addTime((g.getViewPort().end.getTime()-g.getViewPort().start.getTime())/2);break;case"right":t=n.end}return t},this.zoom.nk=function(e,n){var i=g.zoomLevels.length-1;e>i&&(e=i),e<0&&(e=0),g.zoom.active=e;var o=g.zoomLevels[e],r={};return r.date=n||new t.Date(g.startDate),r.level=o,t.Util.ownPropsAsArray(o.properties).forEach(function(e){if(0!==e.key.indexOf("on"))return"function"==typeof e.val?void(g[e.key]=e.val(r)):void(g[e.key]=e.val)}),r},this.multiselect={},this.multiselect.Ub=[],this.multiselect.tc=[],this.multiselect.uc=[],this.multiselect.Qi=function(e){g.multiselect.Ub=t.list(e).map(function(e){return new t.Event(e,g)})},this.multiselect.vc=function(){return JSON.stringify(g.multiselect.events())},this.multiselect.events=function(){var e=g.multiselect,n=t.list();n.ignoreToJSON=!0;for(var i=0;i<e.Ub.length;i++)n.push(e.Ub[i]);return n},this.multiselect.get=function(){return g.multiselect.events()},this.multiselect.wc=function(){},this.multiselect.Xb=function(e,t,n){var i=g.multiselect;if(i.isSelected(e.event))if(g.allowMultiSelect)if(t||n)i.remove(e.event,!0);else{var o=i.Ub.length;i.clear(),o>1&&i.add(e.event,!0)}else i.clear();else g.allowMultiSelect&&(t||n)?i.add(e.event,!0):(i.clear(),i.add(e.event,!0));i.Jc(e),i.wc()},this.multiselect.xc=function(e){var t=g.multiselect;return t.yc(e,t.Ub)},this.multiselect.zc=function(){for(var e=g.multiselect,t=[],n=0;n<e.Ub.length;n++)t.push(e.Ub[n].value());alert(t.join("\n"))},this.multiselect.add=function(e,t){var n=g.multiselect;-1===n.Ac(e)&&n.Ub.push(e),t||n.ok(e)},this.multiselect.remove=function(e,t){var n=g.multiselect,i=n.Ac(e);-1!==i&&n.Ub.splice(i,1),t||n.ok(e)},this.multiselect.clear=function(e){var t=g.multiselect;t.Ub=[],e||t.redraw()},this.multiselect.redraw=function(){var e=g.multiselect;e.tc=[];for(var t=0;t<g.elements.events.length;t++){var n=g.elements.events[t];n.event&&n.event.isEvent&&(e.isSelected(n.event)?e.Bc(n):e.Cc(n))}},this.multiselect.Jc=function(e){if(e){var t=g.multiselect;t.isSelected(e.event)?t.Bc(e):t.Cc(e)}},this.multiselect.ok=function(e){var t=g.multiselect,n=g.Ke(e);t.Jc(n)},this.multiselect.Bc=function(e){var n=g.multiselect,i=g.G("_selected");e=n.Dc(e),t.Util.addClass(e,i),n.tc.push(e)},this.multiselect.Dc=function(e){return e},this.multiselect.Ec=function(){for(var e=g.multiselect,t=0;t<e.tc.length;t++)e.Cc(e.tc[t],!0);e.tc=[]},this.multiselect.Cc=function(e,n){var i=g.multiselect,o=g.G("_selected");if(t.Util.removeClass(e,o),!n){var r=t.indexOf(i.tc,e);-1!==r&&i.tc.splice(r,1)}},this.multiselect.isSelected=function(e){return!!e&&!!e.isEvent&&g.multiselect.yc(e,g.multiselect.Ub)},this.multiselect.Ac=function(e){for(var t=e.data,n=0;n<g.multiselect.Ub.length;n++)if(g.Fc(g.multiselect.Ub[n].data,t))return n;return-1},this.multiselect.yc=function(e,t){if(!t)return!1;for(var n=0;n<t.length;n++)if(g.Fc(e,t[n]))return!0;return!1},this.multiselect.startRectangle=function(){M.start()},this.pk=function(){this.Pi(),this.Si()},this.qk=function(){g.rk(),g.Ji(),g.Ni(),g.sk(),g.progressiveRowRendering&&g.tk()},this.Jc=function(e){var t=!(e=e||{}).eventsOnly;window.clearTimeout(g.uk),t&&(this.I()||(g.timeHeader=null,g.cellProperties={}),g.Pj={},g.Gi(),g.Hi(),e&&e.dontLoadResources||g.Ii(),g.vk!==g.timeHeaderPosition&&g.wk(),g.events.xk(),g.ea.Kh(),g.clearSelection()),this.Ma(),this.yk(),g.Mi(),g.Ji(),t&&(g.Ne(),g.Ki(),g.Li(),g.Wi(g.selectedRows),g.zk()),g.Ni(),g.sk(),g.Na(),b.Ak(),this.pa(),this.Oi(),this.ba(),this.La(),g.Ua(),this.Ri(),this.pk(),e.immediateEvents||e.eventsOnly?g.Za():setTimeout(function(){g.Za()},100),this.visible?g.Ei!=g.visible&&this.show():this.hide(),this.Ei=this.visible,this.Vi(),g.Le.scope||g._i.enabled?g.S?g.Xi():v.Oj()||g.Xi():g.Xi(),this.Bk(),this.bb(),this.Ck()},this.Bk=function(){"function"==typeof g.onAfterUpdate&&g.onAfterUpdate({})},this.update=function(e){if(!g.S)throw new t.Exception("You are trying to update a DayPilot.Scheduler object that hasn't been initialized.");if(g.T)throw new t.Exception("You are trying to update a DayPilot.Scheduler object that has been disposed already. Calling .dispose() destroys the object and makes it unusable.");y.request(e)};var y={timeout:null,options:null,enabled:!1,request:function(e){y.enabled?(clearTimeout(y.timeout),y.Dk(e),y.timeout=setTimeout(y.doit)):(y.Dk(e),y.doit())},Dk:function(e){if(e)for(var t in y.options||(y.options={}),e)y.options[t]=e[t]},doit:function(){var e=y.options;return y.options=null,g.S?t.Util.isOnlyProperty(e,"events")?(g.events.list=e.events,g.Jc({eventsOnly:!0}),void L.Ek()):t.Util.isOnlyProperty(e,"separators")?(g.separators=e.separators,void g.pk()):t.Util.isOnlyProperty(e,"rowHeaderColumns")&&!g.Fk()?(g.rowHeaderColumns=e.rowHeaderColumns,void g.qk()):(g.Oe(e),g.Jc({immediateEvents:!0}),g.Xe(),L.Ek(),void g.Ha(null,!1)):void g.Oe(e)}};this.Gk=function(e){e.forEach(function(e){g.Hk(e.index,e.grid)})},this.Ik=function(e){return e&&0!==e.length?e[0].isRow?e:e.map(function(e){return g.rowlist[e]}):[]},this.lk=function(e,n,i){e=t.ua(e),e=g.Ik(e),g.Gk(e),this.Jk?(this.Mi(),this.Ni(),this.Oi(),this.Pi(),e.forEach(function(e){g.Kk(e.index,e.grid)}),e.forEach(function(e){g.Lk(e.index,e.grid)}),this.Ri(),this.Si(),this.Mk()):(e.forEach(function(e){n||g.Kk(e.index,e.grid),g.Lk(e.index,e.grid)}),e.forEach(function(e){g.Nk(e.index,e.grid)}),g.Ri()),g.kj(),b.Ok(),g.multiselect.redraw(),i&&i(),this.ba()},this.kh=function(e){return"DateTime"===g.eventEndSpec?e:e.getDatePart().ticks===e.ticks?e.addDays(-1):e.getDatePart()},this.Ng=function(e){return"DateTime"===g.eventEndSpec?e:e.getDatePart().addDays(1)},this.mh=function(e){return"DateTime"===g.eventEndSpec?e:e.getDatePart()},this.Ib=function(e,n,i,o,r,a,l){if(g.Ca=null,"Disabled"!==g.eventMoveHandling){i=g.kh(i);var s={};s.e=e,s.newStart=n,s.newEnd=i,s.newResource=o,s.external=r,s.ctrl=!1,s.meta=!1,s.shift=!1,a&&(s.shift=a.shiftKey,s.ctrl=a.ctrlKey,s.meta=a.metaKey),s.multimove=t.list(T.list),s.areaData=t.Global.movingAreaData,s.control=g,s.toJSON=function(){return t.Util.copyProps(s,{},["e","newStart","newEnd","newResource","external","ctrl","meta","shift","multimove","areaData"])};var d={};if(d.event=e,d.start=n,d.end=i,d.overlapping=!1,d.resource=o,s.multimove.splice(0,0,d),s.position=l,s.preventDefault=function(){this.preventDefault.value=!0},g.cb()){var c=function(){if(s.loaded=function(){},O.tg(),s.preventDefault.value)g.Jb();else{switch(n=s.newStart,i=s.newEnd,g.eventMoveHandling){case"PostBack":g.eventMovePostBack(s);break;case"CallBack":g.eventMoveCallBack(s);break;case"Notify":g.eventMoveNotify(s);break;case"Update":g.ek(s)}g.Jb(),"function"==typeof g.onEventMoved&&g.onEventMoved(s)}};s.async=!1,s.loaded=function(){c()},"function"==typeof g.onEventMove&&g.onEventMove(s),s.async?g.blockOnCallBack&&O.Ya():c()}else{switch(g.eventMoveHandling){case"PostBack":g.eventMovePostBack(s);break;case"CallBack":g.eventMoveCallBack(s);break;case"JavaScript":g.onEventMove(e,n,i,o,r,!!a&&a.ctrlKey,!!a&&a.shiftKey,l);break;case"Notify":g.eventMoveNotify(s);break;case"Update":g.ek(s)}g.Jb()}}},this.ek=function(e){var t=e.e,n=e.newEnd,i=e.newResource,o=e.external;t.start(e.newStart),t.end(n),t.resource(i),o?(t.commit(),g.events.add(t)):g.events.update(t),e.multimove&&!e.multimove.isEmpty()&&e.multimove.forEach(function(e){e.event!==t&&(e.event.start(e.start),e.event.end(e.end),e.event.resource(e.resource),e.event.commit(),g.events.update(e.event))}),e.multiresize&&!e.multiresize.isEmpty()&&e.multiresize.forEach(function(e){e.event!==t&&(e.event.start(e.start),e.event.end(e.end),e.event.commit(),g.events.update(e.event))}),g.events.Pk(),g.Kb()},this.Mb=function(e,t){var n=g.Nb(t),i={};i.args=e,i.guid=n,g.ha("Bubble",i)},this.Nb=function(e){var n=t.guid();return this.bubbles||(this.bubbles=[]),this.bubbles[n]=e,n},this.eventMenuClickPostBack=function(e,t,n){var i={};i.e=e,i.command=t,this.fa("EventMenuClick",i,n)},this.eventMenuClickCallBack=function(e,t,n){var i={};i.e=e,i.command=t,this.ha("EventMenuClick",i,n)},this.Ob=function(e,t,n){switch(n){case"PostBack":g.eventMenuClickPostBack(t,e);break;case"CallBack":g.eventMenuClickCallBack(t,e)}},this.timeRangeSelectedPostBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.resource=n,this.fa("TimeRangeSelected",o,i)},this.timeRangeSelectedCallBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.resource=n,this.ha("TimeRangeSelected",o,i)},this.Qk=function(e){if(e){if(e.disabled)return void g.clearSelection();if(e.args)g.Qb(e.args.start,e.args.end,e.args.resource);else{var t=g.Rk(e);if(!t)return;g.Qb(t.start,t.end,t.resource)}}},this.Qb=function(e,n,i){if("Disabled"!==g.timeRangeSelectedHandling){n=g.kh(n);var o={};if(o.control=g,o.start=e,o.end=n,o.resource=i,o.preventDefault=function(){this.preventDefault.value=!0},o.multirange=t.list(N.list).map(function(e){return g.Rk(e)}),o.multirange.isEmpty()&&o.multirange.push({start:o.start,end:o.end,resource:o.resource}),o.toJSON=function(){return t.Util.copyProps(o,{},["start","end","resource","multirange"])},g.cb()){if("function"==typeof g.onTimeRangeSelect){if(g.onTimeRangeSelect(o),o.preventDefault.value)return;e=o.start,n=o.end}switch(n=g.Ng(n),g.Sk(g.Tk,e,n,o.multirange),g.Uk(g.Tk),g.timeRangeSelectedHandling){case"PostBack":g.fk("PostBack",o);break;case"CallBack":g.fk("CallBack",o)}"function"==typeof g.onTimeRangeSelected&&g.onTimeRangeSelected(o)}else switch(g.timeRangeSelectedHandling){case"PostBack":g.fk("PostBack",o);break;case"CallBack":g.fk("CallBack",o);break;case"JavaScript":g.onTimeRangeSelected(e,n,i,o.multirange)}}},this.Sk=function(e,n,i,o){if(e&&!(o&&o.length>1)){var r,a=i,l=0;"Days"===g.viewType&&(l=g.bj(n).start.getTime()-g.kb().getTime()),n.getTime()<g.itline[0].start.getTime()?(e.start.x=0,e.start.time=g.itline[0].start.getTime()):(r=g.Zj(n.addTime(-l)),e.start.x=t.indexOf(g.itline,r.current||r.previous),e.start.time=n),(r=g.Zj(a.addMilliseconds(-1).addTime(-l))).past?(e.end.x=g.itline.length-1,e.end.time=g.itline[g.itline.length-1].end.getTime()):(e.end.x=t.indexOf(g.itline,r.current||r.next),e.end.time=i)}},this.bj=function(e){var n=e.getDatePart();return t.list(g.rowlist).find(function(e){return e.start.getDatePart()===n})},this.timeRangeDoubleClickPostBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.resource=n,this.fa("TimeRangeDoubleClick",o,i)},this.timeRangeDoubleClickCallBack=function(e,t,n,i){var o={};o.start=e,o.end=t,o.resource=n,this.ha("TimeRangeDoubleClick",o,i)},this.Rb=function(e,t,n){if(t=g.kh(t),g.cb()){var i={};if(i.start=e,i.end=t,i.resource=n,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onTimeRangeDoubleClick&&(g.onTimeRangeDoubleClick(i),i.preventDefault.value))return;switch(g.timeRangeDoubleClickHandling){case"PostBack":g.timeRangeDoubleClickPostBack(e,t,n);break;case"CallBack":g.timeRangeDoubleClickCallBack(e,t,n)}"function"==typeof g.onTimeRangeDoubleClicked&&g.onTimeRangeDoubleClicked(i)}else switch(g.timeRangeDoubleClickHandling){case"PostBack":g.timeRangeDoubleClickPostBack(e,t,n);break;case"CallBack":g.timeRangeDoubleClickCallBack(e,t,n);break;case"JavaScript":g.onTimeRangeDoubleClick(e,t,n)}},this.timeRangeMenuClickPostBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.fa("TimeRangeMenuClick",i,n)},this.timeRangeMenuClickCallBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.ha("TimeRangeMenuClick",i,n)},this.Pb=function(e,t,n){switch(n){case"PostBack":g.timeRangeMenuClickPostBack(t,e);break;case"CallBack":g.timeRangeMenuClickCallBack(t,e)}},this.linkMenuClickPostBack=function(e,t,n){var i={};i.link=e,i.command=t,this.fa("LinkMenuClick",i,n)},this.linkMenuClickCallBack=function(e,t,n){var i={};i.link=e,i.command=t,this.ha("LinkMenuClick",i,n)},this.Vk=function(e,t,n){switch(n){case"PostBack":g.linkMenuClickPostBack(t,e);break;case"CallBack":g.linkMenuClickCallBack(t,e)}},this.rowMenuClickPostBack=function(e,t,n){var i={};i.resource=e,i.command=t,this.fa("RowMenuClick",i,n)},this.resourceHeaderMenuClickPostBack=this.rowMenuClickPostBack,this.rowMenuClickCallBack=function(e,t,n){var i={};i.resource=e,i.command=t,this.ha("RowMenuClick",i,n)},this.resourceHeaderMenuClickCallBack=this.rowMenuClickCallBack,this.Wk=function(e,t,n){switch(n){case"PostBack":g.rowMenuClickPostBack(t,e);break;case"CallBack":g.rowMenuClickCallBack(t,e)}},this.Xk=function(e,t){var n=g.Yk(e);n.data.name=t,n.data.html=g.ca(t),g.rows.update(n)},this.Zk=function(e,t){if(t){var n={};if(n.text=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"!=typeof g.onRowCreate||(g.onRowCreate(n),!n.preventDefault.value)){switch(g.rowCreateHandling){case"CallBack":g.rowCreateCallBack(n.text);break;case"PostBack":g.rowCreatePostBack(n.text)}"function"==typeof g.onRowCreated&&g.onRowCreated(n)}}},this.$k=function(e,n,i){if(e.isNewRow)i||g.Zk(e,n);else{var o=t.indexOf(g.rowlist,e),r=g.Yk(e,o);if(g.cb()){var a={};a.resource=r,a.row=r,a.newText=n,a.canceled=i,a.preventDefault=function(){this.preventDefault.value=!0},a.async=!1,a.loaded=function(){l()};var l=function(){if(!i){switch(g.rowEditHandling){case"PostBack":g.rowEditPostBack(r,n);break;case"CallBack":g.rowEditCallBack(r,n);break;case"Update":g.Xk(e,n)}"function"==typeof g.onRowEdited&&g.onRowEdited(a)}};if("function"==typeof g.onRowEdit&&(g.onRowEdit(a),a.preventDefault.value))return;a.async||l()}else switch(g.rowEditHandling){case"PostBack":g.rowEditPostBack(r,n);break;case"CallBack":g.rowEditCallBack(r,n);break;case"JavaScript":g.onrowEdit(r,n)}}},this.rowCreatePostBack=function(e,t){var n={};n.text=e,this.fa("RowCreate",n,t)},this.rowCreateCallBack=function(e,t){var n={};n.text=e,this.ha("RowCreate",n,t)},this.rowEditPostBack=function(e,t,n){var i={};i.resource=e,i.newText=t,this.fa("RowEdit",i,n)},this.rowEditCallBack=function(e,t,n){var i={};i.resource=e,i.newText=t,this.ha("RowEdit",i,n)},this.rowMovePostBack=function(e,t,n,i){var o={};o.source=e,o.target=t,o.position=n,this.fa("RowMove",o,i)},this.rowMoveCallBack=function(e,t,n,i){var o={};o.source=e,o.target=t,o.position=n,this.ha("RowMove",o,i)},this.rowMoveNotify=function(e,t,n,i){var o={};o.source=e,o.target=t,o.position=n,this.ha("RowMove",o,i,"Notify")},this.rowClickPostBack=function(e,t){var n={};n.resource=e,this.fa("RowClick",n,t)},this.resourceHeaderClickPostBack=this.rowClickPostBack,this.rowClickCallBack=function(e,t){var n={};n.resource=e,this.ha("RowClick",n,t)},this.resourceHeaderClickCallBack=this.rowClickCallBack,this._k=function(e,t){"Disabled"!==g.rowDoubleClickHandling?(g.ak.resClick||(g.ak.resClick=[]),g.ak.resClick.push(window.setTimeout(function(e,t){return function(){g.al(e,t)}}(e,t),g.doubleClickTimeout))):g.al(e,t)},this.al=function(e,t){var n=g.resourceHeaderClickHandling||g.rowClickHandling;if(g.cb()){var i={};if(i.resource=e,i.row=e,i.ctrl=t.ctrlKey,i.shift=t.shiftKey,i.meta=t.metaKey,i.originalEvent=t,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onRowClick&&(g.onRowClick(i),i.preventDefault.value))return;if("function"==typeof g.onResourceHeaderClick&&(g.onResourceHeaderClick(i),i.preventDefault.value))return;switch(n){case"PostBack":g.rowClickPostBack(e);break;case"CallBack":g.rowClickCallBack(e);break;case"Select":g.bl(e.$.row,t.ctrlKey,t.shiftKey,t.metaKey);break;case"Edit":g.cl.edit(e.$.row)}"function"==typeof g.onRowClicked&&g.onRowClicked(i),"function"==typeof g.onResourceHeaderClicked&&g.onResourceHeaderClicked(i)}else switch(n){case"PostBack":g.rowClickPostBack(e);break;case"CallBack":g.rowClickCallBack(e);break;case"JavaScript":g.onRowClick(e);break;case"Select":g.bl(e.$.row,t.ctrlKey,t.shiftKey);break;case"Edit":g.cl.edit(e.$.row)}},this.timeHeaderClickPostBack=function(e,t){var n={};n.header=e,this.fa("TimeHeaderClick",n,t)},this.timeHeaderClickCallBack=function(e,t){var n={};n.header=e,this.ha("TimeHeaderClick",n,t)},this.dl=function(e){if(g.cb()){var t={};if(t.header=e,t.control=g,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onTimeHeaderClick&&(g.onTimeHeaderClick(t),t.preventDefault.value))return;switch(this.timeHeaderClickHandling){case"PostBack":g.timeHeaderClickPostBack(e);break;case"CallBack":g.timeHeaderClickCallBack(e)}"function"==typeof g.onTimeHeaderClicked&&g.onTimeHeaderClicked(t)}else switch(this.timeHeaderClickHandling){case"PostBack":g.timeHeaderClickPostBack(e);break;case"CallBack":g.timeHeaderClickCallBack(e);break;case"JavaScript":g.onTimeHeaderClick(e)}},this.resourceCollapsePostBack=function(e,t){var n={};n.resource=e,this.fa("ResourceCollapse",n,t)},this.resourceCollapseCallBack=function(e,t){var n={};n.resource=e,this.ha("ResourceCollapse",n,t)},this.fl=function(e){if(g.cb()){var t={};if(t.resource=e,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onResourceCollapse&&(g.onResourceCollapse(t),t.preventDefault.value))return;switch(this.resourceCollapseHandling){case"PostBack":g.resourceCollapsePostBack(e);break;case"CallBack":g.resourceCollapseCallBack(e)}}else switch(this.resourceCollapseHandling){case"PostBack":g.resourceCollapsePostBack(e);break;case"CallBack":g.resourceCollapseCallBack(e);break;case"JavaScript":g.onResourceCollapse(e)}},this.resourceExpandPostBack=function(e,t){var n={};n.resource=e,this.fa("ResourceExpand",n,t)},this.resourceExpandCallBack=function(e,t){var n={};n.resource=e,this.ha("ResourceExpand",n,t)},this.gl=function(e){if(g.cb()){var t={};if(t.resource=e,t.row=e,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onResourceExpand&&(g.onResourceExpand(t),t.preventDefault.value))return;switch(this.resourceExpandHandling){case"PostBack":g.resourceExpandPostBack(e);break;case"CallBack":g.resourceExpandCallBack(e)}}else switch(this.resourceExpandHandling){case"PostBack":g.resourceExpandPostBack(e);break;case"CallBack":g.resourceExpandCallBack(e);break;case"JavaScript":g.onResourceExpand(e)}},this.eventEditPostBack=function(e,t,n){var i={};i.e=e,i.newText=t,this.fa("EventEdit",i,n)},this.eventEditCallBack=function(e,t,n){var i={};i.e=e,i.newText=t,this.ha("EventEdit",i,n)},this.eventEditNotify=function(e,n,i,o){var r=new t.Event(e.copy(),this);e.text(n),g.events.update(e,null,o);var a={};a.e=r,a.newText=n,this.ha("EventEdit",a,i,"Notify")},this.Sb=function(e,t,n){if(L.hl(),g.cb()){var i={};i.e=e,i.control=g,i.newText=t,i.canceled=n,i.preventDefault=function(){this.preventDefault.value=!0},i.async=!1,i.loaded=function(){o()};var o=function(){if(i.loaded=function(){},!n)switch(g.eventEditHandling){case"PostBack":g.eventEditPostBack(e,i.newText);break;case"CallBack":g.eventEditCallBack(e,i.newText);break;case"Update":e.text(i.newText),g.events.update(e,null,{inplace:!0})}"function"==typeof g.onEventEdited&&g.onEventEdited(i)};if("function"==typeof g.onEventEdit&&(g.onEventEdit(i),i.preventDefault.value))return;i.async||o()}else switch(g.eventEditHandling){case"PostBack":g.eventEditPostBack(e,i.newText);break;case"CallBack":g.eventEditCallBack(e,i.newText);break;case"Notify":g.eventEditNotify(e,i.newText,null,{inplace:!0});break;case"JavaScript":g.onEventEdit(e,i.newText)}},this.commandCallBack=function(e,t){this.il("CallBack",e,t)},this.commandPostBack=function(e,t){this.il("PostBack",e,t)},this.il=function(e,t,n){var i={};i.command=t,this.Ab(e,"Command",i,n)},this.fa=function(e,t,n){var i={};i.action=e,i.type="PostBack",i.parameters=t,i.data=n,i.header=this.ga();var o="JSON"+JSON.stringify(i);__doPostBack(g.uniqueID,o)},this.ha=function(e,n,i,o){if(g.I()){"undefined"==typeof o&&(o="CallBack"),this.oa(),g.ia({delay:100});var r={};r.action=e,r.type=o,r.parameters=n,r.data=i,r.header=this.ga();var a,l=JSON.stringify(r);a="undefined"!=typeof Iuppiter&&Iuppiter.compress?"LZJB"+Iuppiter.Base64.encode(Iuppiter.compress(l)):"JSON"+l,this.jl(r),this.backendUrl?t.request(this.backendUrl,this.ja,a,this.ka):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,a,this.la,null,this.callbackError,!0)}else g.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning")},this.jl=function(e){"function"==typeof g.onCallBackStart&&g.onCallBackStart({})},this.Fi=function(){var e={};"function"==typeof g.onCallBackEnd&&setTimeout(function(){g.onCallBackEnd(e)},0)},this.I=function(){return"javasc"!==g.U&&-1===g.U.indexOf("DCODE")||g.devsb},this.ma=function(){return!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.ka=function(e){if("function"==typeof g.onAjaxError){var t={};t.request=e,g.onAjaxError(t)}else"function"==typeof g.ajaxError&&g.ajaxError(e)},this.ja=function(e){g.la(e.responseText)},this.callbackProps=[],this.ga=function(){var e={};e.v=this.v,e.control="dps",e.id=this.id,e.startDate=g.startDate,e.days=g.days,e.cellDuration=g.cellDuration,e.cellGroupBy=g.cellGroupBy,e.cellWidth=g.cellWidth,e.cellWidthSpec=g.cellWidthSpec,e.viewType=g.viewType,e.showNonBusiness=g.showNonBusiness,e.businessBeginsHour=g.businessBeginsHour,e.businessEndsHour=g.businessEndsHour,e.weekStarts=g.weekStarts,e.treeEnabled=g.treeEnabled,e.locale=g.locale,e.timeZone=g.timeZone,e.tagFields=g.tagFields,e.timeHeaders=g.timeHeaders,e.cssClassPrefix=g.cssClassPrefix,e.durationBarMode=g.durationBarMode,e.rowHeaderColumns=g.rowHeaderColumns,e.rowMarginBottom=g.rowMarginBottom,e.rowMarginTop=g.rowMarginTop,e.rowMinHeight=g.rowMinHeight,e.scale=g.scale,e.clientState=g.clientState,this.nav.scroll&&(e.scrollX=t.Util.atLeast(0,this.nav.scroll.scrollLeft),e.scrollY=t.Util.atLeast(0,this.nav.scroll.scrollTop)),e.selected=g.multiselect.events(),e.selectedRows=k.kl(),e.hashes=g.hashes;var n=g.ll(e.scrollX,e.scrollY);if(n){var i=g.ml(n),o=g.nl(n);e.rangeStart=i.start,e.rangeEnd=i.end,e.resources=o}else e.rangeStart=g.startDate,e.rangeEnd=g.startDate,e.resources=[];if(e.dynamicLoading=g.dynamicLoading,e.separators=this.separators,this.syncResourceTree&&"Days"!=this.viewType&&(e.tree=this.za()),this.syncLinks&&(e.links=this.ol()),"Manual"===this.scale&&(e.timeline=this.pl()),"function"==typeof g.onCallBackHeader){var r={};r.header=e,g.onCallBackHeader(r)}var a=g.callbackProps;return t.isArray(a)&&(e.props={},a.forEach(function(t){e.props[t]=g[t]})),e},this.pl=function(){var e=[];return t.list(g.timeline).forEach(function(t){var n={};n.start=t.start,n.end=t.end,n.width=t.width,e.push(n)}),e},this.ol=function(){var e=[],n=function(e){var t={};if(e.tags)for(var n in e.tags)t[n]=""+e.tags[n];return t};if(!t.isArray(g.links.list))return e;for(var i=0;i<g.links.list.length;i++){var o=g.links.list[i],r={};r.id=o.id,r.from=o.from,r.to=o.to,r.type=o.type,r.tags=n(o),e.push(r)}return e},this.getViewPort=function(){var e=this.nav.scroll.scrollLeft-v.ij,t=this.nav.scroll.scrollTop,n={};if("Days"!==g.viewType){var i=g.ll(e,t),o=g.ml(i),r=g.nl(i),a=g.itline[i.start.x],l=g.itline[i.end.x];n.start=g.getDate(e,!0),n.end=g.getDate(e+g.nav.scroll.clientWidth,!0,!0),n.resources=r,a&&(n.topLeft={start:a.start,end:a.end,x:i.start.x,y:i.start.y,resource:r[0]}),l&&(n.bottomRight={start:l.start,end:l.end,x:i.end.x,y:i.end.y,resource:r[r.length-1]})}else i=g.ll(e,t),o=g.ql(i),n.start=o.start,n.end=o.end,n.resources=[];return n.rows=function(){return n.resources.map(function(e){return g.rows.find(e)})},n.events=function(){if("Days"===g.viewType)return g.events.forRange(n.start,n.end);var e=[];return n.rows().forEach(function(t){e=e.concat(t.events.forRange(n.start,n.end))}),e},n},this.ll=function(e,n){var i={start:{},end:{}},o=g.Xj(e),r=g.Xj(e+g.nav.scroll.clientWidth);o&&(i.start.x=o.x),r&&(i.end.x=r.x);var a=n+g.nav.scroll.clientHeight-g.Bj.bottom.height;i.start.y=g.rl(n+g.Bj.top.height).i,i.end.y=g.rl(a).i,i.start.x=t.Util.atLeast(i.start.x,0);var l=this.itline.length;return i.end.x>=l&&(i.end.x=l-1),i},this.sl=function(){return g.ll(this.nav.scroll.scrollLeft-v.ij,this.nav.scroll.scrollTop)},this.ml=function(e){var n={};if(this.itline.length<=0)return n.start=this.startDate,n.end=this.startDate,n;if(!this.itline[e.start.x])throw new t.Exception("Internal error: area.start.x is null.");return n.start=this.itline[e.start.x].start,n.end=this.itline[e.end.x].end,n},this.nl=function(e){e||(e=this.ll(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop));var t=[];t.ignoreToJSON=!0;for(var n=e.start.y;n<=e.end.y;n++){var i=g.rowlist[n];i&&!i.hidden&&t.push(i.id)}return t},this.ql=function(e){e||(e=this.ll(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop));var t={};if(0===g.rowlist.length)return t;var n=g.itline[g.itline.length-1].end.getTime()-g.itline[0].start.getTime();return t.start=g.rowlist[e.start.y]&&g.rowlist[e.start.y].start,t.end=g.rowlist[e.end.y]&&g.rowlist[e.end.y].start.addTime(n),t},this.za=function(){var e=[];e.ignoreToJSON=!0;for(var t=0;t<this.rowlist.length;t++){var n=this.rowlist[t];if(!(n.level>0||n.isNewRow)){var i=this.Ea(t);e.push(i)}}return e},this.Fa=function(e){var t=[];t.ignoreToJSON=!0;for(var n=0;n<e.length;n++){var i=e[n];g.rowlist[i].isNewRow||t.push(g.Ea(i))}return t},this.Ea=function(e){var t=this.rowlist[e];if("function"==typeof g.onGetNodeState){var n={};if(n.row=t,n.preventDefault=function(){n.preventDefault.value=!0},n.result={},g.onGetNodeState(n),n.preventDefault.value)return n.result}var i={};return i.Value=t.id,i.BackColor=t.backColor,i.Name=t.name,i.InnerHTML=t.html,i.ToolTip=t.toolTip,i.Expanded=t.expanded,i.Children=this.Fa(t.children),i.Loaded=t.loaded,i.IsParent=t.isParent,i.Columns=this.ul(t),i.Tags=t.tags,t.start.getTime()!==g.kb().getTime()&&(i.Start=t.start),t.minHeight!==g.rowMinHeight&&(i.MinHeight=t.minHeight),t.marginBottom!==g.rowMarginBottom&&(i.MarginBottom=t.marginBottom),t.marginTop!==g.rowMarginTop&&(i.MarginTop=t.marginTop),t.eventHeight!==g.eventHeight&&(i.EventHeight=t.eventHeight),i},this.ul=function(e){if(!e.columns||0===e.columns.length)return null;var t=[];t.ignoreToJSON=!0;for(var n=0;n<e.columns.length;n++){var i={};i.InnerHTML=e.columns[n].html,t.push(i)}return t},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.Ne=function(){g.nav.top.className!==g.G("_main")&&(g.nav.top.className=g.G("_main"),g.nav.dh1.className=g.G("_divider_horizontal"),g.nav.dh2.className=g.G("_divider_horizontal"),g.divResScroll.className=g.G("_rowheader_scroll"),g.nav.divider.className=g.G("_divider")+" "+g.G("_splitter"),g.nav.scroll.className=g.G("_scrollable"),g.cj.className=g.G("_matrix")+" "+g.G("_grid_main"),g.nav.loading.className=g.G("_loading"))},this.ya=function(){this.nav.top.dispose=this.dispose,function(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push(e.charCodeAt(o)-1);new Function("t","u",String.fromCharCode.apply(this,i))(t,n)}("wbs!mi>mpdbujpo/iptuobnf<jg)mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2*tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<",this,this.nav.top)},this.dispose=function(){var e=g;if(e.S&&!e.T){for(var n in e.T=!0,e.na&&e.na.disconnect(),e.oa(),clearInterval(e.le),clearInterval(e.oe),e.ak){var i=e.ak[n];t.isArray(i)?t.list(i).forEach(function(e){clearTimeout(e)}):clearTimeout(i)}e.pa(),e.ta(),e.vl("main"),e.vl("top"),e.vl("bottom"),e.wl(),e.xl(),e.divBreaks=null,e.divCells=null,e.divCorner=null,e.divCrosshair=null,e.divEvents=null,e.divHeader&&(e.divHeader.rows=null),e.divHeader=null,e.divLines=null,e.divNorth=null,e.divRange=null,e.divResScroll=null,e.divSeparators=null,e.divSeparatorsAbove=null,e.divStretch=null,e.divTimeScroll=null,e.Aj=null,e.Hg=null,e.cj.calendar=null,e.cj=null,e.nav.loading=null,e.nav.top.onmousemove=null,e.nav.top.onmouseout=null,e.nav.top.dispose=null,e.nav.top.ontouchstart=null,e.nav.top.ontouchmove=null,e.nav.top.ontouchend=null,e.nav.top.removeAttribute("style"),e.nav.top.removeAttribute("class"),!(g.wa.reactDOM&&t.browser.ie)&&(e.nav.top.innerHTML=""),e.nav.top.dp=null,e.nav.top=null,e.nav.scroll.onscroll=null,e.nav.scroll.root=null,e.nav.scroll=null,clearTimeout(e.refreshTimeout),e.yl&&(e.yl.dispose(),e.yl=null),e.daypilot&&delete e.daypilot,t.ue(window,"resize",e.Rf),l.Vf(e),E=null,"undefined"!=typeof t.Bubble&&(t.Bubble.cancelShowing(),t.Bubble.hide({calendar:e})),"undefined"!=typeof t.Menu&&t.Menu.hide({calendar:e})}},this.vl=function(e){if("function"==typeof g.onBeforeRowHeaderDomAdd||"function"==typeof g.onBeforeRowHeaderDomRemove){var t=g.zl(e),n=t.divHeader,i=t.rowlist;if("function"==typeof g.onBeforeRowHeaderDomAdd&&g.wa.reactDOM||"function"==typeof g.onBeforeRowHeaderDomRemove)for(var o=0;o<i.length;o++)n.rows[o]&&g.Al(o,e)}},this.wl=function(){"function"!=typeof g.onBeforeTimeHeaderDomAdd&&"function"!=typeof g.onBeforeTimeHeaderDomRemove||g.elements.timeHeader.forEach(function(e){var n=e.domArgs;if(e.domArgs=null,"function"==typeof g.onBeforeTimeHeaderDomRemove&&g.onBeforeTimeHeaderDomRemove(n),"function"==typeof g.onBeforeTimeHeaderDomAdd&&g.wa.reactDOM){var i=n&&n.Rc;if(i&&t.Util.isReactComponent(n.element)){if(!g.wa.reactDOM)throw new t.Exception("Can't reach ReactDOM");g.wa.reactDOM.unmountComponentAtNode(i)}}})},this.db=function(e){var n=null,i=n=e.nodeType?e.event:e,o=i.cache&&"undefined"!=typeof i.cache.moveVDisabled?!i.cache.moveVDisabled:!i.data.moveVDisabled,r=i.cache&&"undefined"!=typeof i.cache.moveHDisabled?!i.cache.moveHDisabled:!i.data.moveHDisabled,a=g.Bl(n),s=g.Bj[a.grid];!o&&l._j&&(s=g.Bj[n.part.grid]);var c=s.rowlist;if(g.Cl(a.rowIndex,a.grid))return null;var u=n.part.height||g.ea.Dl(),h=n.part&&n.part.top&&c[n.part.dayIndex]?n.part.top+c[n.part.dayIndex].top:a.top,p=a.left,f=a.width;if(!o&&l._j&&(h=c[i.part.dayIndex].top),!r&&l._j&&"undefined"==typeof(p=n.part.left)){var m=t.DateUtil.diff(n.start(),n.end());m=t.Util.atLeast(m,1),p=H.El(m)?g.getPixels(n.start()).boxLeft:g.getPixels(n.start()).left,f=(H.El(m)?g.getPixels(n.end()).boxRight:g.getPixels(n.end()).left)-p}var v=document.createElement("div");v.setAttribute("unselectable","on"),v.style.position="absolute",v.style.width=f+"px",v.style.height=u+"px",v.style.left=p+"px",v.style.top=h+"px",v.style.overflow="hidden";var y=d();return v.appendChild(y),v.className=this.G("_shadow"),y.className=this.G("_shadow_inner"),s.divShadow.appendChild(v),v.calendar=g,v.grid=a.grid,v},this.rl=function(e,t){var n,i=g.Bj[t=t||"main"].rowlist,o={},r=0;"main"===t&&(r=g.Bj.top.height);for(var a=i.length,l=0;l<a;l++){var s=i[l];if(!s.hidden&&(n=s,o.top=(r+=s.height)-s.height,o.bottom=r,o.i=l,o.element=n,o.grid=t,e<r))break}return o},this.links={},this.links.list=[],this.links.add=function(e){e&&(g.links.list.push(e),b.Ok())},this.links.remove=function(e){if("number"!=typeof e&&"string"!=typeof e){var t=e.data;e.isLink||(t=e),b.Fl(t)}else{var n=g.links.find(e);n&&b.Fl(n.data)}},this.links.find=function(e){if(!t.isArray(g.links.list))return null;var n=g.links.list.find(function(t){return t.id===e});return n?new t.Link(n,g):null},this.links.findByFromTo=function(e,n){if(!t.isArray(g.links.list))return null;var i=g.link.list.find(function(t){return t.from===e&&t.to===n});return i?new t.Link(i,g):null},this.links.load=function(e,n,i,o){if(!e)throw new t.Exception("links.load(): 'url' parameter required");o=o||{};var r=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},a=function(e){var i,o=e.request;try{i=JSON.parse(o.responseText)}catch(e){var a={};return a.exception=e,void r(a)}if(t.isArray(i)){var l={preventDefault:function(){this.preventDefault.value=!0}};if(l.data=i,"function"==typeof n&&n(l),l.preventDefault.value)return;g.links.list=i,g.S&&g.update()}};if(g.linksLoadMethod&&"POST"===g.linksLoadMethod.toUpperCase())t.ajax({method:"POST",contentType:"application/json",data:{start:g.visibleStart().toString(),end:g.visibleEnd().toString()},url:e,success:a,error:r});else{var l=e;if(!o.dontAddStartEnd){var s="start="+g.visibleStart().toString()+"&end="+g.visibleEnd().toString();l+=l.indexOf("?")>-1?"&"+s:"?"+s}t.ajax({method:"GET",url:l,success:a,error:r})}};var b={};this.Gl=b,b.Hl=[],b.Il=function(){g.divLinksAbove.innerHTML="",g.divLinksBelow.innerHTML="",g.elements.links=[],b.Hl=[]},b.Fl=function(e){var n=b.Jl(e);t.rfa(g.links.list,e),n&&(n.clear(),t.rfa(b.Hl,n))},b.Jl=function(e){for(var t=0;t<b.Hl.length;t++){var n=b.Hl[t];if(n.props===e)return n}return null},b.Kl=function(){m.Wh().forEach(function(e){b.Ll(e)})},b.Ll=function(e){var n=g.linkPointSize,i=n/2,o=e.event.part.left,r=g.rowlist[e.event.part.dayIndex].top+e.event.part.top,a=e.event.part.height,l=e.event.part.right,s=t.Util.div(g.divLinkpoints,o-i,r-i+a/2,n,n);s.className=g.G("_linkpoint"),s.style.boxSizing="border-box",s.coords={x:o,y:r+a/2},s.type="Start",s.event=e.event,b.Ml(s),g.elements.linkpoints.push(s);var d=t.Util.div(g.divLinkpoints,l-i,r-i+a/2,n,n);d.className=g.G("_linkpoint"),d.style.boxSizing="border-box",d.coords={x:l,y:r+a/2},d.type="Finish",d.event=e.event,b.Ml(d),g.elements.linkpoints.push(d)},b.Ml=function(e){e.onmousedown=function(t){return u.source=e,u.calendar=g,b.Kl(),t.preventDefault(),t.stopPropagation(),!1},e.onmousemove=function(n){t.Util.addClass(e,g.G("_linkpoint_hover")),b.Nl()},e.onmouseout=function(n){u.source&&u.source.event===e.event||t.Util.removeClass(e,g.G("_linkpoint_hover"))},e.onmouseup=function(n){if(u.source){var i=u.source.type+"To"+e.type,o=u.source.event.id(),r=e.event.id(),a={};if(a.from=o,a.to=r,a.type=i,a.id=null,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onLinkCreate&&(g.onLinkCreate(a),a.preventDefault.value))return;var l=function(){t.isArray(g.links.list)||(g.links.list=[]),g.links.list.push({from:o,to:r,type:i,id:a.id}),b.Ok()};switch(g.linkCreateHandling){case"Update":l();break;case"CallBack":g.Ol(a);break;case"PostBack":g.Pl(a);break;case"Notify":l(),g.Ql(a)}"function"==typeof g.onLinkCreated&&g.onLinkCreated(a)}}},b.Ak=function(){g.divLinkpoints.innerHTML="",g.elements.linkpoints=[]},b.Rl=null,b.Sl=function(){b.Rl=setTimeout(function(){b.Ak()},100)},b.Nl=function(){b.Rl&&(clearTimeout(b.Rl),b.Rl=null)},b.Ok=function(){if(b.Il(),t.isArray(g.links.list))for(var e=0;e<g.links.list.length;e++){var n=g.links.list[e];b.Tl(n.from,n.to,n)}},b.Tl=function(e,t,n){var i=g.events.find(e),o=g.events.Ul(i&&i.data),r=g.events.find(t),a=g.events.Ul(r&&r.data);b.Vl(o,a,n)},b.Wl=function(e,n){if(e&&e.tagName&&"div"===e.tagName.toLowerCase())return{top:e.offsetTop,right:e.offsetLeft+e.offsetWidth,left:e.offsetLeft,height:e.offsetHeight};if(e instanceof t.Event){var i=g.rowlist[e.part.dayIndex];return{top:(n?i.absTop:i.top)+(e.part.top||0),right:e.part.left+e.part.width,left:e.part.left,height:e.part.height}}return null},b.Vl=function(e,t,n){var i=b.Xl(e,t,n);if(!i)return null;var o=b.Yl(i,n);return o?(b.Hl.push(o),o):null},b.Yl=function(e,n){if(!e)return null;var i={divs:[],props:n,clear:function(){t.de(this.divs),this.divs.forEach(function(e){t.rfa(g.elements.links,e)})}},o=n.width||1,r=n.color,a=n.style,l="Above"===(n.layer||"Above")?g.divLinksAbove:g.divLinksBelow,s=function(e,t){r&&(e.style["border"+t+"Color"]=r),a&&(e.style["border"+t+"Style"]=a)},d=[],c=function(e,t){g.elements.links.push(e),h(e),u(e),p(e),e.divs=d,t||d.push(e),i.divs.push(e)},u=function(e){e.onmousedown=function(e){e.cancelBubble=!0},e.oncontextmenu=function(e){if(g.contextMenuLink){var i=new t.Link(n,g);g.contextMenuLink.show(i)}e.cancelBubble=!0,e.preventDefault()}},h=function(e){e.onmouseenter=function(){t.Util.addClass(e.divs,g.G("_link_hover")),g.linkBubble&&g.linkBubble.showLink(new t.Link(n,g))},e.onmouseleave=function(){t.Util.removeClass(e.divs,g.G("_link_hover")),g.linkBubble&&g.linkBubble.hideOnMouseOut()}},p=function(e){e.onclick=function(e){var t={};t.link=n,"function"==typeof g.onLinkClick&&g.onLinkClick(t),"function"==typeof g.onLinkClicked&&g.onLinkClicked(t)}};return e.forEach(function(e){switch(e.type){case"Dot":r?((d=t.Util.div(l,e.endX-5,e.endY-5,10,10)).style.borderRadius="10px",d.style.backgroundColor=r):((d=t.Util.div(l,e.endX-5,e.endY-5,10,10)).className=g.G("_link_dot"),t.Util.addClass(d,n.cssClass)),c(d,!0);break;case"HorizontalLine":var i=t.Util.div(l,e.startX,e.startY,e.endX-e.startX,o);i.style.boxSizing="border-box",i.style.borderBottomWidth=o+"px",i.className=g.G("_link_horizontal"),t.Util.addClass(i,n.cssClass),s(i,"Bottom"),c(i);break;case"VerticalLine":var a=t.Util.div(l,e.startX,e.startY,o,e.endY-e.startY);a.style.boxSizing="border-box",a.style.borderRightWidth=o+"px",a.className=g.G("_link_vertical"),t.Util.addClass(a,n.cssClass),s(a,"Right"),c(a);break;case"ArrowUp":r?((d=t.Util.div(l,e.endX-5+Math.floor(o/2),e.endY-5,0,0)).style.borderColor="transparent transparent "+r+" transparent",d.style.borderStyle="solid",d.style.borderWidth="5px"):((d=t.Util.div(l,e.endX-6+Math.floor(o/2),e.endY-6,6,6)).className=g.G("_link_arrow_up"),t.Util.addClass(d,n.cssClass)),c(d,!0);break;case"ArrowDown":r?((d=t.Util.div(l,e.endX-5+Math.floor(o/2),e.endY-5,0,0)).style.borderColor=r+" transparent transparent transparent",d.style.borderStyle="solid",d.style.borderWidth="5px"):((d=t.Util.div(l,e.endX-5+Math.floor(o/2),e.endY-6,6,6)).className=g.G("_link_arrow_down"),t.Util.addClass(d,n.cssClass)),c(d,!0);break;case"ArrowRight":r?((d=t.Util.div(l,e.endX-6,e.endY-5,0,0)).style.borderWidth="6px",d.style.borderColor="transparent transparent transparent "+r,d.style.borderStyle="solid"):((d=t.Util.div(l,e.endX-6,e.endY-5,6,6)).className=g.G("_link_arrow_right"),t.Util.addClass(d,n.cssClass)),c(d,!0);break;case"ArrowLeft":var d;r?((d=t.Util.div(l,e.endX-6,e.endY-5,0,0)).style.borderColor="transparent "+r+" transparent transparent",d.style.borderStyle="solid",d.style.borderWidth="6px"):((d=t.Util.div(l,e.endX-6,e.endY-5,6,6)).className=g.G("_link_arrow_left"),t.Util.addClass(d,n.cssClass)),c(d,!0);break;default:throw new t.Exception("Invalid segment type")}}),i},b.Xl=function(e,t,n,i){var o=b.Wl(e,i),r=b.Wl(t,i);if(!o)return null;if(!r)return null;var a,l,s=n.type||"FinishToStart",d=n.width||1,c=g.eventHeight,u=g.linkBottomMargin,h=g.eventHeight/2;switch(s){case"FinishToStart":(a={x:o.right,y:o.top}).y>(l={x:r.left,y:r.top}).y&&(r.top+r.height>o.top?l.y=a.y:a.x<=l.x&&(l.y+=r.height,l.bottom=!0));break;case"StartToFinish":a={x:o.left,y:o.top},l={x:r.right,y:r.top};break;case"StartToStart":a={x:o.left,y:o.top},l={x:r.left,y:r.top};break;case"FinishToFinish":a={x:o.right,y:o.top},l={x:r.right,y:r.top}}var p=[];if("FinishToStart"===s)if(a.y!==l.y||a.x!==l.x||l.bottom)if(a.y>l.y||a.y==l.y&&l.bottom)if(a.x<=l.x){var f=l.y;p.push({type:"HorizontalLine",startX:a.x,startY:v=a.y+c-u,endX:y=l.x+h,endY:v}),p.push({type:"VerticalLine",startX:y,startY:v,endX:y,endY:f}),p.push({type:a.y<l.y?"ArrowDown":"ArrowUp",startX:y,startY:f,endX:y,endY:f})}else{var m=l.y+c+5;p.push({type:"HorizontalLine",startX:a.x,startY:a.y+c-u,endX:a.x+h+d,endY:a.y+c-u}),p.push({type:"VerticalLine",startX:a.x+h,startY:a.y+c-u,endX:a.x+h,endY:m}),p.push({type:"HorizontalLine",startX:l.x-h,startY:m,endX:a.x+h+d,endY:m}),p.push({type:"VerticalLine",startX:l.x-h,startY:m,endX:l.x-h,endY:l.y+c-u}),p.push({type:"HorizontalLine",startX:l.x-h,startY:l.y+c-u,endX:l.x-h+h,endY:l.y+c-u}),p.push({type:"ArrowRight",startX:l.x,startY:l.y+c-u,endX:l.x,endY:l.y+c-u})}else if(a.y===l.y)a.x<l.x?(p.push({type:"HorizontalLine",startX:a.x,startY:v=a.y+c-u,endX:y=l.x,endY:v}),p.push({type:"ArrowRight",startX:l.x,startY:l.y+c-u,endX:l.x,endY:l.y+c-u})):(m=l.y+c+5,p.push({type:"HorizontalLine",startX:a.x,startY:a.y+c-u,endX:a.x+h+d,endY:a.y+c-u}),p.push({type:"VerticalLine",startX:a.x+h,startY:a.y+c-u,endX:a.x+h,endY:m}),p.push({type:"HorizontalLine",startX:l.x-h,startY:m,endX:a.x+h+d,endY:m}),p.push({type:"VerticalLine",startX:l.x-h,startY:m,endX:l.x-h,endY:l.y+c-u}),p.push({type:"HorizontalLine",startX:l.x-h,startY:l.y+c-u,endX:l.x,endY:l.y+c-u}),p.push({type:"ArrowRight",startX:l.x,startY:l.y+c-u,endX:l.x,endY:l.y+c-u}));else if(a.x>l.x)m=l.y-5,p.push({type:"HorizontalLine",startX:a.x,startY:a.y+c-u,endX:a.x+h,endY:a.y+c-u}),p.push({type:"VerticalLine",startX:a.x+h,startY:a.y+c-u,endX:a.x+h,endY:m}),p.push({type:"HorizontalLine",startX:l.x-h,startY:m,endX:a.x+h,endY:m}),p.push({type:"VerticalLine",startX:l.x-h,startY:m,endX:l.x-h,endY:l.y+c-u}),p.push({type:"HorizontalLine",startX:l.x-h,startY:l.y+c-u,endX:l.x-h+h,endY:l.y+c-u}),p.push({type:"ArrowRight",startX:l.x,startY:l.y+c-u,endX:l.x,endY:l.y+c-u});else{var v;f=l.y,p.push({type:"HorizontalLine",startX:a.x,startY:v=a.y+c-u,endX:y=l.x+h,endY:v}),p.push({type:"VerticalLine",startX:y,startY:v,endX:y,endY:f}),p.push({type:a.y<l.y?"ArrowDown":"ArrowUp",startX:y,startY:f,endX:y,endY:f})}else{var y;p.push({type:"Dot",startX:y=a.x,startY:f=a.y+c-u,endX:y,endY:f})}else if("StartToFinish"===s)m=l.y-5,p.push({type:"HorizontalLine",startX:l.x,startY:l.y+c-u,endX:l.x+h+d,endY:l.y+c-u}),p.push({type:"VerticalLine",startX:l.x+h,startY:l.y+c-u,endX:l.x+h,endY:m}),p.push({type:"HorizontalLine",startX:a.x-h,startY:m,endX:l.x+h+d,endY:m}),p.push({type:"VerticalLine",startX:a.x-h,startY:m,endX:a.x-h,endY:a.y+c-u}),p.push({type:"HorizontalLine",startX:a.x-h,startY:a.y+c-u,endX:a.x,endY:a.y+c-u}),p.push({type:"ArrowLeft",startX:l.x,startY:l.y+c-u,endX:l.x,endY:l.y+c-u});else if("StartToStart"===s){var w=Math.min(a.x,l.x)-h;p.push({type:"HorizontalLine",startX:w,startY:a.y+c-u,endX:a.x,endY:a.y+c-u}),p.push({type:"VerticalLine",startX:w,startY:a.y+c-u,endX:w,endY:l.y+c-u}),p.push({type:"HorizontalLine",startX:w,startY:l.y+c-u,endX:l.x,endY:l.y+c-u}),p.push({type:"ArrowRight",startX:l.x,startY:l.y+c-u,endX:l.x,endY:l.y+c-u})}else if("FinishToFinish"===s){var C=Math.max(l.x,a.x)+h;p.push({type:"HorizontalLine",startX:a.x,startY:a.y+c-u,endX:C,endY:a.y+c-u}),p.push({type:"VerticalLine",startX:C,startY:a.y+c-u,endX:C,endY:c-u+l.y}),p.push({type:"HorizontalLine",startX:l.x,startY:l.y+c-u,endX:C,endY:l.y+c-u}),p.push({type:"ArrowLeft",startX:l.x,startY:l.y+c-u,endX:l.x,endY:l.y+c-u})}return p},b.Vg=function(){g.divLinkShadow.innerHTML="",g.elements.linkshadow=[]},b.Rg=function(e,n){b.Vg();var i=g.divLinkShadow,o=t.line(e.x,e.y,n.x,n.y,{arrow:!0,cssClass:g.G("_link_shadow")});i.appendChild(o),g.elements.linkshadow.push(o)},this.Ol=function(e,t){var n={};n.from=e.from,n.to=e.to,n.type=e.type,g.ha("LinkCreate",n,t)},this.Ql=function(e,t){var n={};n.from=e.from,n.to=e.to,n.type=e.type,g.ha("LinkCreate",n,t,"Notify")},this.Pl=function(e,t){var n={};n.from=e.from,n.to=e.to,n.type=e.type,g.fa("LinkCreate",n,t)},this.Zl=function(e){var n=0,i=0;if(e>this.rowlist.length-1)throw new t.Exception("Row index too high");for(var o=0;o<=e;o++){var r=this.rowlist[o];r.hidden||(n+=r.height,i++)}var a={};return a.top=n-r.height,a.height=r.height,a.bottom=n,a.i=i-1,a.data=r,a},this.Ue=function(){return!!this.backendUrl},this.events.find=function(e){if(!g.events.list||"undefined"==typeof g.events.list.length)return null;if("function"==typeof e)return g.$l(e);for(var n=g.events.list.length,i=0;i<n;i++)if(g.events.list[i].id===e)return new t.Event(g.events.list[i],g);return null},this.events.findAll=function(e){if("function"==typeof e){for(var n=g.events.list.length,i=[],o=0;o<n;o++){var r=new t.Event(g.events.list[o],g);e(r)&&i.push(r)}return i}if("object"==typeof e)return g.events.findAll(function(t){for(var n in e)if(e[n]!==t.data[n])return!1;return!0});throw new t.Exception("function or object argument expected")},this.$l=function(e){for(var n=g.events.list.length,i=0;i<n;i++){var o=new t.Event(g.events.list[i],g);if(e(o))return o}return null},this.events.focus=function(e){var t=g._l(e);t&&t.focus()},this.events.scrollIntoView=function(e){if(g._l(e)){var n=e.start(),i=g.getViewPort();!t.Util.overlaps(i.start,i.end,e.start(),e.end())&&t.Util.overlaps(g.kb(),g.Sj(),e.start(),e.end())&&g.scrollTo(n,"fast","middle");var o=e.resource();-1===g.getViewPort().resources.indexOf(o)&&g.scrollToResource(o)}},this.events.all=function(){for(var e=[],n=0;n<g.events.list.length;n++){var i=new t.Event(g.events.list[n],g);e.push(i)}return t.list(e)},this.events.forRange=function(e,n){e=e?new t.Date(e):g.visibleStart(),n=n?new t.Date(n):g.visibleEnd();for(var i=t.list(),o=0;o<g.events.list.length;o++){var r=new t.Event(g.events.list[o],g);t.Util.overlaps(r.start(),r.end(),e,n)&&i.push(r)}return i},this.events.filter=function(e,t){g.events.Ge=e,t||g.Jc({eventsOnly:!0})},this.events.edit=function(e){var n=g.Ke(e);if(n)L.cm(),g.rb(n);else{if(t.list(g.events.bm.rows).isEmpty())return;setTimeout(function(){L.cm(),g.rb(g.Ke(e))})}},this.events.load=function(e,n,i){if(!e)throw new t.Exception("events.load(): 'url' parameter required");var o=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},r=function(e){var i,r=e.request;try{i=JSON.parse(r.responseText)}catch(e){var a={};return a.exception=e,void o(a)}if(t.isArray(i)){var l={preventDefault:function(){this.preventDefault.value=!0}};if(l.data=i,"function"==typeof n&&n(l),l.preventDefault.value)return;g.events.list=l.data,g.S&&g.update()}};if(g.eventsLoadMethod&&"POST"===g.eventsLoadMethod.toUpperCase())t.ajax({method:"POST",contentType:"application/json",data:{start:g.visibleStart().toString(),end:g.visibleEnd().toString()},url:e,success:r,error:o});else{var a=e,l="start="+g.visibleStart().toString()+"&end="+g.visibleEnd().toString();a+=a.indexOf("?")>-1?"&"+l:"?"+l,t.ajax({method:"GET",url:a,success:r,error:o})}},this.events.findRecurrent=function(e,n){if(!g.events.list||"undefined"==typeof g.events.list.length)return null;for(var i=g.events.list.length,o=0;o<i;o++)if(g.events.list[o].recurrentMasterId===e&&g.events.list[o].start.getTime()===n.getTime())return new t.Event(g.events.list[o],g);return null},this.events.hk=function(e){var t=[];return g.Mj().forEach(function(n){if(!n.isNewRow){g.Nj(n.index,n.grid);for(var i=0;i<n.events.length;i++)if(g.Fc(n.events[i].data,e)){t.push(n),n.events.splice(i,1);break}}}),t},this.events.Ul=function(e){if(!e)return null;for(var t=g.Mj(),n=0;n<t.length;n++){var i=t[n];if(!i.hidden&&!i.isNewRow){g.Nj(i.index,i.grid);for(var o=0;o<i.events.length;o++)if(g.Fc(i.events[o].data,e))return i.events[o]}}return null},this.events.ik=function(e){var n=[],i=g.dm()||"Days"===g.viewType,o=t.indexOf(g.events.list,e);g.qe(o);var r=!1;return g.Mj().forEach(function(t){if(!r&&!t.isNewRow){g.Nj(t.index,t.grid);var a=g.em(e,t);a&&("function"==typeof g.onBeforeEventRender&&(a.cache=g.P.events[o]),n.push(t),i||(r=!0))}}),n},this.Fc=function(e,n){return t.Util.isSameEvent(e,n)},this.events.update=function(e,n,i){if("object"==typeof e&&!(e instanceof t.Event)){var o=g.events.find(e.id);return g.events.remove(o),void g.events.add(e)}var r={};r.oldEvent=new t.Event(e.copy(),g),r.newEvent=new t.Event(e.temp(),g),i=i||{};var a=new t.Action(g,"EventUpdate",r,n);if(t.list(g.events.list).find(function(t){return g.Fc(t,e.data)})){if(g.Le.scope)g.Le.notify(function(){e.commit()});else if(g._i.fm&&(g._i.skip=!0),(g.eventUpdateInplaceOptimization||i.inplace)&&r.oldEvent.resource()===r.newEvent.resource()&&r.oldEvent.start()===r.newEvent.start()&&r.oldEvent.end()===r.newEvent.end()){e.commit();var l=g.Ke(e);if(l){var s=l.event.part;g.Sc(l),t.rfa(g.elements.events,l),e.part=s}c=(c=g.events.hk(e.data)).concat(g.events.ik(e.data)),g.jk(c);var d=g.events.Ul(e.data);d&&g.Uc(d),g.gm()}else{var c=g.events.hk(e.data);e.commit(),c=c.concat(g.events.ik(e.data)),g.events.hm(c)}return a}},this.events.remove=function(e,n){if(e){if("string"==typeof e||"number"==typeof e){var i=g.events.find(e);return void g.events.remove(i)}var o={};o.e=new t.Event(e.data,g);var r=new t.Action(g,"EventRemove",o,n),a=g.im(e.data);if(a&&g.events.list.splice(a.index,1),g.Le.scope)g.Le.notify();else{g._i.fm&&(g._i.skip=!0);var l=g.events.hk(e.data);if(g.eventUpdateInplaceOptimization&&1===l.length&&!g.events._b(e)){g.jm(g.rowlist[l[0]]);var s=g.Ke(e);if(s){var d=g.elements.events.indexOf(s);g.elements.events.splice(d,1),g.Sc(s),g.gm()}}else g.events.hm(l)}return r}},this.events.add=function(e,n,i){var o=(i=i||{}).renderOnly;e instanceof t.Event||(e=new t.Event(e)),e.calendar=g,g.events.list||(g.events.list=[]);var r=g.im(e);if(o){if(!r)throw new t.Exception("Unexpected: event not found in list")}else{if(r&&!g.temp.allowDuplicateEventIds)throw new t.Exception("The event you are trying to add using DayPilot.Scheduler.events.add() is already loaded. A unique ID is required.");r||g.events.list.push(e.data)}var a=new t.Action(g,"EventAdd",l,n);if(!g.S)return a;if(g.Le.scope)g.Le.notify();else{g._i.fm&&(g._i.skip=!0);var l={};l.e=e;var s=g.events.ik(e.data),d=e.data.height||g.eventHeight;if(g.eventUpdateInplaceOptimization&&1===s.length&&!g.events._b(e)&&d<=g.eventHeight&&!g.eventVersionsEnabled){var c=g.rowlist[s[0]];g.jm(c);var u=c.events.find(function(t){return t.data===e.data});u.part.top=0,u.part.height=d,u.part.line=0,g.Uc(u),g.gm(),L.Ek()}else g.events.hm(s)}return a},this.events._b=function(e){var n=e instanceof t.Event?e.data:e,i=new t.Date(n.start),o=new t.Date(n.end);return!!t.list(g.events.list).find(function(e){if(g.Fc(n,e))return!1;if(n.resource!==e.resource)return!1;var r=new t.Date(e.start),a=new t.Date(e.end);return t.Util.overlaps(i,o,r,a)})},this.events.addByData=function(e){g.events.add(new t.Event(e))},this.events.removeByData=function(e){var n=g.events.find(e.id);if(!n)throw new t.Exception("The event to be removed was not found");g.events.remove(n)},this.events.updateByData=function(e){var n=g.events.find(e.id);if(!n)throw new t.Exception("The event to be updated was not found");g.events.remove(n),g.events.add(new t.Event(e))},this.events.removeById=function(e){var n=g.events.find(e);if(!n)throw new t.Exception("The event to be removed was not found");g.events.remove(n)},this.events.bm={rows:[]},this.events.km=null,this.events.xk=function(){clearTimeout(g.events.km),g.events.km=null,g.events.bm.rows=[]},this.events.lm=0,this.events.hm=function(e){var n=g.events.bm.rows;t.list(e).forEach(function(e){n.push(e)}),g.events.bm.rows=t.ua(n),g.events.km||(g.events.km=setTimeout(g.events.Pk,g.events.lm))},this.events.Pk=function(){clearTimeout(g.events.km),g.events.km=null;var e=g.events.bm.rows;g.events.bm.rows=[],g.jk(e),g.kk(),g.S&&("Gantt"===g.viewType?g.update():(g.Jk&&g.Mi(),g.Ua(),g.lk(e),g.gm(),L.Ek()))},this._i={},this._i.enabled=!1,this._i.skip=!1,this._i.skipUpdate=function(){return g._i.skip},this._i.skipped=function(){g._i.skip=!1},this._i.mm=!1,this._i.fm=!1,this.wa={},this.wa.reactDOM=null,this.wa.react=null,this.queue={},this.queue.list=[],this.queue.list.ignoreToJSON=!0,this.queue.add=function(e){if(e){if(!e.isAction)throw new t.Exception("DayPilot.Action object required for queue.add()");g.queue.list.push(e)}},this.queue.notify=function(e){var t={};t.actions=g.queue.list,g.ha("Notify",t,e,"Notify"),g.queue.list=[]},this.queue.clear=function(){g.queue.list=[]},this.queue.pop=function(){return g.queue.list.pop()},this.cells.find=function(e,n){var i;if(!(i=n instanceof t.Row?n.$.row:n.isRow?n:g.fj(n)))return w();var o=i.start.getTime()-g.kb().getTime(),r=new t.Date(e).addTime(-o),a=g.getPixels(r);return a?this.findXy(a.i,i.index,i.grid):w()},this.cells.findByPixels=function(e,t){var n=g.Xj(e);if(!n)return w();e=n.x;var i=g.rl(t);return i?this.findXy(e,t=i.i):w()},this.cells.all=function(){for(var e=[],t=g.itline.length,n=g.rowlist.length,i=0;i<t;i++)for(var o=0;o<n;o++){var r=g.cells.findXy(i,o);e.push(r[0])}return w(e)},this.cells.nm=function(e,t,n){var i=g.Bj[n=n||"main"].rowlist,o=g.bk(e),r=i[t];if(!o)return null;if(!r)return null;var a=r.start.getTime()-g.kb().getTime(),l=o.start.addTime(a),s=o.end.addTime(a),d={};d.x=e,d.y=t,d.grid=n,d.displayY=r.displayY,d.i=n+"_"+e+"_"+t,d.resource=r.id,d.start=l,d.end=s,d.calendar=g,d.isParent=!(!r.children||!r.children.length),d.update=function(){if(!i[d.y].hidden){g.om(g.P.cells[d.i]);var e=g.X();e.xStart<=d.x&&d.x<=e.xEnd&&e.yStart<=d.y&&d.y<=e.yEnd&&g._c(d.x,d.y,d.grid)}},d.utilization=function(e){return r.isNewRow?0:(r.sections||r.calculateUtilization(),r.sections.forRange(l,s).maxSum(e))},d.events=function(){return r.events.forRange(l,s)},d.div=g.P.cells[d.i];var c=g.pm(e,t,n);return d.properties=c,d},this.cells.findXy=function(e,n,i){if(i=i||"main",t.isArray(e)){for(var o=[],r=0;r<e.length;r++){var a=e[r];o.push(g.cells.nm(a.x,a.y,i))}return w(o)}return null===e||null===n?w():w(g.cells.nm(e,n,i))},this.qm=function(e){var n=t.list();if(t.isArray(e))for(var i=0;i<e.length;i++)n.push(e[i]);else"object"==typeof e&&e&&n.push(e);return n.cssClass=function(e){return this.forEach(function(n){n.properties.cssClass=t.Util.addClassToString(n.properties.cssClass,e),n.update()}),this},n.removeClass=function(e){return this.forEach(function(n){n.properties.cssClass=t.Util.removeClassFromString(n.properties.cssClass,e),n.update()}),this},n.addClass=n.cssClass,n.html=function(e){return this.forEach(function(t){t.properties.html=e,t.update()}),this},n.invalidate=function(){return this.forEach(function(e){delete g.Pj[e.i]}),this},n};var w=this.qm;this.Le={},this.Le.scope=null,this.Le.notify=function(e){g.Le.scope&&t.Util.safeApply(g.Le.scope,e)},this.debug=new t.Debug(this),this.rm=function(e){if("Days"!==g.viewType)throw new t.Exception("Checking row start when viewType !== 'Days'");for(var n=0;n<g.rowlist.length;n++){var i=g.rowlist[n],o=(i.element?i.element.data:i.data).start;if(e.getTime()>=o.getTime()&&e.getTime()<o.addDays(1).getTime())return o}return null},this.sm=function(e){var n=g.kb();if(e.ticks===n.ticks)return e;var i=n;if(e.ticks<n.ticks){for(var o=this.itline[0].end.ticks-this.itline[0].start.ticks;i.ticks>e.ticks;)i=i.addTime(-o);return i}if("Days"===g.viewType){var r;if((r=this.Zj(e.addTime(-0))).current)return r.current.start.addTime(0);if(r.past)return r.previous.end.addTime(0);throw new t.Exception("getBoxStart(): time not found")}if((r=this.Zj(e)).current)return r.current.start;if(r.past)return r.previous.end;if(r.hidden){var a=r.next.start.getTime()-e.getTime(),l=r.next.end.getTime()-r.next.start.getTime(),s=Math.ceil(a/l)*l;return r.next.start.addTime(-s)}throw new t.Exception("getBoxStart(): time not found")},this.Bl=function(e){var n=this.rl(g.coords.y,g.coords.grid),i=g.scaleManualLimitBeyond;if("function"!=typeof e.end)throw new t.Exception("e.end function is not defined");if(!e.end())throw new t.Exception("e.end() returns null");var o=t.DateUtil.diff(e.rawend(),e.start());o=t.Util.atLeast(o,1);var r=H.El(o),a=e.data&&"Milestone"===e.data.type,s=g.eventHeight,d=0,c=g.coords.x;if(a&&(c+=s/2),i&&"Manual"===g.scale&&!g.eventMoveSkipNonBusiness){var u=function(){var e,t=(e=g.getDate(g.coords.x,!0,!0)).addTime(-o),n=g.getPixels(t).boxLeft,i=g.getPixels(e).boxRight;return(e=Math.min(i,g.coords.x))-n}(),h=Math.min(l.tm?l.tm:0,u);c=g.coords.x-h}var p=l.um?l.um.calendar:g,f=0,m="Days"===this.viewType||this.vm();if(m&&!e.part.external&&p===g&&(f=this.rowlist[e.part.dayIndex].start.getTime()-this.kb().getTime()),r&&!a&&p===g){var v=g.Zj(e.start()),y=!v.hidden&&!v.past;d=e.start().getTime()-this.sm(e.start().addTime(-f)).addTime(f).getTime(),y&&(d=function(e,t){var n=g.wm(g.Zj(e).current),i=g.wm(g.Xj(c).cell);if(n>1.2*i){var o=t>0?1:-1;for(t=Math.abs(t);t>=i;)t-=i;t*=o}return t}(e.start(),d))}p&&p!==g&&p.xm()!==g.xm()&&(d=0);var b=0;if(!l.ym||"Manual"===g.scale&&i||p!==g)b=0;else if(r){var w=e.start().addTime(-f),C=this.sm(w);b=l.ym.getTime()-C.getTime();var x=60*g.xm()*1e3;b=Math.floor(b/x)*x}else b=l.ym.getTime()-e.start().addTime(-f).getTime();this.eventMoveToPosition&&(b=0);var S=this.getDate(c,!0).addTime(-b).addTime(f);l.zm&&(S=e.start());var T=g.snapToGrid;l._j?T=T&&g.snapToGridEventMoving:l.zm?T=T&&g.snapToGridEventResizing:l.Am&&(T=T&&g.snapToGridTimeRangeSelecting),T&&(S=this.sm(S.addTime(-f)).addTime(f));var E=(S=S.addTime(d)).addTime(o),_=S,k=E;if(m){k=(_=S.addTime(-f)).addTime(o);var D=n.element.data.start.getTime()-this.kb().getTime();E=(S=_.addTime(D)).addTime(o)}if(i&&"Manual"===g.scale){var A=n.element.Bm();if(E>A){var O=E.getTime()-A.getTime();S=S.addTime(-O),E=E.addTime(-O)}_=S.addTime(-f),k=E.addTime(-f)}if(l._j&&g.eventMoveSkipNonBusiness){var I=n.i,P=0;l.ym&&(P=l.ym.addTime(f),T&&(P=this.sm(P.addTime(-f)).addTime(f)));var R=!e.part.dayIndex,M=0;R||(M=g.Cm(e.start(),P,e.part.dayIndex)),o=g.Dm(e);var N=g.getDate(c,!0);T&&(N=g.getDate(c)),h=g.Em(N,M,I,n.grid),S=N.addTime(-h).addTime(f),T&&(S=this.sm(S.addTime(-f)).addTime(f)),d=R?0:g.Cm(this.sm(e.start().addTime(-f)).addTime(f),e.start(),I,n.grid),(S=S.addTime(d))<=g.visibleStart()&&(S=g.Fm(g.visibleStart(),I,n.grid).start),(E=g.Gm(S,o,I,n.grid))>=g.visibleEnd()&&(S=(E=g.Hm(g.visibleEnd(),I,n.grid).end).addTime(-g.Em(E,o,I))),_=S.addTime(-f),k=E.addTime(-f)}var L=this.getPixels(_),B=this.getPixels(k),j=T?L.boxLeft:L.left,z=T&&r?B.boxRight-j:B.left-j;a&&(j-=(z=s)/2);var U={};return U.top=n.top,U.left=j,U.row=n.element,U.rowIndex=n.i,U.grid=g.coords.grid,U.width=z,U.start=S,U.end=E,U.relativeY=g.coords.y-n.top,U},this.Im=function(e,t){var n=g.Zj(e),i=g.Zj(t),o=null,r=0;n.hidden&&(o=e);for(var a=n.i;a<=i.i;a++){var l=g.itline[a];o&&o<l.start&&(r+=l.start.getTime()-o.getTime()),o=l.end}return r},this.Gm=function(e,n,i,o){o=o||"main";var r=n,a=g.rowlist[i].data.start.getTime()-g.kb().getTime(),l=e.addTime(-a),s=g.Fm(l,i,o);if(!s)throw new t.Exception("No next cell found");var d=t.indexOf(g.itline,s);if(s.start>e);else{if((r-=s.end.getTime()-l.getTime())<=0)return e.addTime(n);d+=1}for(var c=d;c<g.itline.length;c++){var u=g.pm(c,i,o),h=g.itline[c];if(u.business){var p=h.start.addTime(a),f=h.end.addTime(a).getTime()-p.getTime();if(r<=f)return p.addTime(r);r-=f}}return g.itline[g.itline.length-1].end.addTime(r)},this.Cm=function(e,n,i,o){var r=g.zl(o=o||"main").rowlist[i].data.start.getTime()-g.kb().getTime(),a=(g.Zj(e),e.addTime(-r)),l=n.addTime(-r),s=g.Fm(a,i,o);if(!s)throw new t.Exception("No next cell found");var d=0,c=t.indexOf(g.itline,s);if(s.start<=l){if(n<s.end.addTime(r))return s.start>a?n.getTime()-s.start.addTime(r).getTime():n.getTime()-e.getTime();d+=a>s.start?s.end.getTime()-a.getTime():s.end.getTime()-s.start.getTime(),c+=1}for(var u=c;u<g.itline.length;u++)if(g.pm(u,i,o).business){var h=g.itline[u],p=h.start.addTime(r),f=h.end.addTime(r),m=f.getTime()-p.getTime();if(n<p)return d;if(n<=f)return d+(n.getTime()-p.getTime());d+=m}var v=n.getTime()-g.itline.last().end.addTime(r).getTime();return d+t.Util.atLeast(0,v)},this.Dm=function(e){if(e.part.duration){if(isNaN(e.part.duration))throw new t.Exception("Unable to get calculated duration");return e.part.duration}var n=e.part.dayIndex;return g.Cm(e.start(),e.rawend(),n)},this.Em=function(e,n,i,o){o=o||"main";var r=0,a=n;if(!(u=g.Zj(e)).current)throw new t.Exception("Current cell not found.");var l=t.indexOf(g.itline,u.current);if(g.pm(l,i,o).business){if(e.addTime(-n)>=u.current.start)return n}else if(0===n||e.addTime(-n)>=u.current.start){var s=g.Fm(e,i,o);if(s)return e.getTime()-s.start.getTime();var d=g.Hm(e,i,o);return e.getTime()-d.start.getTime()}r+=e.getTime()-u.current.start.getTime(),a-=e.getTime()-u.current.start.getTime(),l-=1;for(var c=u.current.start;l>=0;){var u;c>(u=g.itline[l]).end&&(r+=c.getTime()-u.end.getTime()),c=u.start;var h=u.end.getTime()-u.start.getTime();if(g.pm(l,i,o).business){if(a<=h)return r+a;r+=h,a-=h}else r+=h;l-=1}return r+a},this.Hm=function(e,n,i){i=i||"main";var o=g.Zj(e),r=0;if(o.past)return null;if(o.current)r=o.i;else{if(!o.previous)return null;r=t.indexOf(g.itline,o.previous)}for(var a=r;a>=0;a--)if(g.Ld(a,n,i))return g.itline[a];return null},this.Fm=function(e,n,i){i=i||"main";var o=g.Zj(e),r=0;if(o.past)return null;if(o.current)r=o.i;else{if(!o.next)return null;r=t.indexOf(g.itline,o.next)}for(var a=r;a<g.itline.length;a++)if(g.Ld(a,n,i))return g.itline[a];return null},this.Ld=function(e,t,n){return g.pm(e,t,n=n||"main").business},this.xm=function(){switch(this.scale){case"CellDuration":return this.cellDuration;case"Minute":return 1;case"Hour":return 60;case"Day":return 1440;case"Week":return 10080;case"Month":return 43200;case"Year":return 525600;case"Manual":if(g.itline.length>0){var e=g.itline[0];return(e.end.getTime()-e.start.getTime())/6e4}return g.cellDuration}throw new t.Exception("can't guess cellDuration value")},this.wm=function(e){return e.end.ticks-e.start.ticks},this.Cl=function(e,t){return"main"===(t=t||"main")&&this.treePreventParentUsage&&this.Jm(e,t)},this.Jm=function(e,t){var n=g.Bj[t=t||"main"].rowlist[e];return!!n.isParent||!!(this.treeEnabled&&n.children&&n.children.length>0)},this.Km={},this.Lm=function(){if(g.treeAutoExpand){var e=this.Bl(l.um).rowIndex,t=this.Jm(e),n=this.Km;n.timeout&&n.y!==e&&(clearTimeout(n.timeout),n.timeout=null,n.y=null),t&&(n.y=e,!n.timeout&&!g.rowlist[n.y].expanded&&(n.timeout=setTimeout(function(){!g.rowlist[n.y].expanded&&(g.Mm(n.y,{notAnimated:!0}),g.Nm()),n.timeout=null,n.y=null},500)))}},this.Om=function(){clearTimeout(g.Km.timeout),g.Km.timeout=null,g.Km.y=null},this.Rd=function(){var e,t=l.Pm.width,n=l.Pm.left,i=l.Qm,o=l.zm.dpBorder;e=g.rowlist[i.part.dayIndex].start.getTime()-g.kb().getTime();var r=null,a=null,s=!(g.snapToGrid&&g.snapToGridEventResizing);"left"===o?(r=g.getDate(n,s).addTime(e),a=i.rawend()):"right"===o&&(r=i.start(),a=g.getDate(n+t,s,!0).addTime(e)),l.Pm.start=r,l.Pm.end=a},this.exportAs=function(e,n){if(!g.ge())throw new t.Exception("DayPilot.Scheduler.exportAs(): The instance must be visible during export.");var i=C.generate(e,n);return new t.Export(i)},this.export=this.exportAs,this.Re={};var C=this.Re;C.eh=function(){var e=C.Te;switch(e){case"viewport":return g.nav.top.offsetWidth;case"full":return g.rj()+C.getRowHeaderWidth();case"range":return g.getPixels(C.getRangeEnd()).boxRight-g.getPixels(C.getRangeStart()).boxLeft+C.getRowHeaderWidth();default:throw new t.Exception("Unsupported export mode: "+e)}},C.dh=function(){var e=C.Te;switch(e){case"viewport":return g.nav.top.offsetHeight-t.sh(g.nav.scroll)-1;case"full":return g.Rm()+g.wj()-t.sh(g.nav.scroll);case"range":var n=C.getRows();if(0===n.length)return g.wj();var i=n.first(),o=n.last(),r=C.Sm(o)-C.Sm(i)+o.height+g.wj();return(r+=g.Bj.top.height)+g.Bj.bottom.height;default:throw new t.Exception("Unsupported export mode: "+e)}},C.Sm=function(e){var t=C.Se.includeHiddenRows?e.absTop:e.top;return"bottom"===e.grid&&("viewport"===C.Te?t+=g.Bj.bottom.top-g.wj():"full"===C.Te?t+=g.Ci:"range"===C.Te&&(t+=C.dh()-g.wj()-g.Bj.bottom.height)),t},C.Tm=function(e){var t=C.getViewportOffsetTop();return"main"!==e.grid&&(t=0),t},C.getRangeStart=function(){var e=C.Se.dateFrom||g.kb();return new t.Date(e)},C.getRangeEnd=function(){var e=C.Se.dateTo||g.Sj();return new t.Date(e)},C.getRangeResStart=function(){return C.Se.resourceFrom?g.fj(C.Se.resourceFrom):g.rowlist.find(function(e){return!e.hidden})},C.getRangeResEnd=function(){return C.Se.resourceTo?g.fj(C.Se.resourceTo):g.rowlist.last()},C.getRowHeaderWidth=function(){return g.uj()},C.getTimeHeaderHeight=function(){return g.wj()},C.getCanvas=function(){return C.canvas()},C.getRectangles=function(){var e=C.getRowHeaderWidth(),t=C.getTimeHeaderHeight(),n={};n.main={x:0,y:0,w:C.eh(),h:C.dh()},n.corner={x:0,y:0,w:e,h:t},n.grid={x:e,y:t,w:C.eh()-e,h:C.dh()-t};var i=n.grid.w,o=g.itline.last();o&&o.left+o.width<n.grid.w&&(i=o.left+o.width);var r=n.grid.h,a=g.rowlist.last();return a&&a.top+a.height<n.grid.h&&(r=a.top+a.height),n.gridContent={x:e,y:t,w:i,h:r},n},C.getRows=function(){var e,n,i,o,r=C.Te,a=t.list();switch(r){case"viewport":n=(e=g.Um)+g.nav.scroll.offsetHeight,i=g.rl(e).i,o=g.rl(n).i;break;case"full":e=0,i=0,o=g.rowlist.length;break;case"range":var l=C.getRangeResStart(),s=C.getRangeResEnd();if(!l)throw new t.Exception("Resource specified using resourceFrom option not found during export.");if(!s)throw new t.Exception("Resource specified using resourceTo option not found during export.");i=l.index,o=s.index}o<g.rowlist.length&&(o+=1);for(var d=i;d<o;d++){var c=g.rowlist[d];!C.Se.includeHiddenRows&&c.hidden||a.push(c)}return a.offset=i,a},C.getRowsTop=function(){return g.Bj.top.rowlist},C.getRowsBottom=function(){return g.Bj.bottom.rowlist},C.getRowsAll=function(){var e=C.getRows();return(e=e.concat(C.getRowsTop())).concat(C.getRowsBottom())},C.getRowsTopAndBottom=function(){var e=[];return(e=e.concat(C.getRowsTop())).concat(C.getRowsBottom())},C.bottomFrozenY=function(){if(g.Bj.bottom.enabled()){if("viewport"===C.Te)return g.Bj.bottom.top;if("full"===C.Te)return C.dh()-g.Bj.bottom.height;if("range"===C.Te)return C.dh()-g.Bj.bottom.height}return C.dh()},C.getEvents=function(){var e=C.Te;switch(e){case"full":var n=t.list();return t.list(g.rowlist).forEach(function(e){e.hidden||t.list(e.events).forEach(function(e){n.push(e)})}),n;case"viewport":return m.Wh().filter(function(e){return"main"===e.event.part.grid}).map(function(e){return e.event});case"range":n=t.list();var i=C.getRangeStart(),o=C.getRangeEnd();return C.getRows().forEach(function(e){t.list(e.events).filter(function(e){return t.Util.overlaps(e.start(),e.end(),i,o)}).forEach(function(e){n.push(e)})}),n;default:throw new t.Exception("Unsupported export mode: "+e)}},C.getEventsFrozen=function(){var e=C.Te;switch(e){case"full":var n=t.list();return C.getRowsTopAndBottom().forEach(function(e){e.hidden||t.list(e.events).forEach(function(e){n.push(e)})}),n;case"viewport":return m.Wh().filter(function(e){return"main"!==e.event.part.grid}).map(function(e){return e.event});case"range":n=t.list();var i=C.getRangeStart(),o=C.getRangeEnd();return C.getRowsTopAndBottom().forEach(function(e){t.list(e.events).filter(function(e){return t.Util.overlaps(e.start(),e.end(),i,o)}).forEach(function(e){n.push(e)})}),n;default:throw new t.Exception("Unsupported export mode: "+e)}},C.getLinks=function(){if(t.isArray(g.links.list)){for(var e=[],n=0;n<g.links.list.length;n++){var i=g.links.list[n],o=g.events.find(i.from),r=g.events.Ul(o&&o.data),a=g.events.find(i.to),l=g.events.Ul(a&&a.data),s=b.Xl(r,l,i,C.Se.includeHiddenRows);s&&e.push(s)}return e}},C.getTimeline=function(){var e=C.Te;switch(e){case"full":return t.list(g.itline).addProps({offset:0});case"viewport":return C.getViewportTimeline();case"range":return C.getRangeTimeline();default:throw new t.Exception("Unsupported export mode: "+e)}},C.getRangeTimeline=function(){var e=t.list();if(g.itline&&g.itline.length>0){var n=g.Zj(C.getRangeStart()).i,i=g.Zj(C.getRangeEnd()).i,o=g.Vm();i=Math.min(i,o-1);for(var r=n=t.Util.atLeast(n,0);r<=i;r++)e.push(g.itline[r]);e.offset=n}return e},C.getViewportTimeline=function(){var e=t.list();if(g.itline&&g.itline.length>0){var n=g.Wm,i=n+g.nav.scroll.offsetWidth,o=g.Xj(n).x,r=g.Xj(i,!0).x,a=g.Vm();r=Math.min(r,a);for(var l=o=t.Util.atLeast(o,0);l<=r;l++)e.push(g.itline[l]);e.offset=o}return e},C.getTimeHeader=function(e){if("full"===C.Te)return t.list(g.timeHeader[e]);var n,i,o=t.list();i=(n=C.getViewportOffsetStart())+C.getViewportOffsetWidth();var r=g.Xm(e,n),a=g.Xm(e,i);a||(a={x:g.timeHeader[e].length-1});for(var l=r.x;l<=a.x;l++)o.push(g.timeHeader[e][l]);return o},C.getSeparators=function(){return t.list(g.separators).map(function(e){var n=new t.Date(e.location);if(n.getTime()<g.kb().getTime())return null;if(n.getTime()>=g.Sj().getTime())return null;var i=g.getPixels(n);return i.cut?null:i.left<0?null:i.left>g.rj()?null:{left:i.left,color:e.color,width:e.width||1}}).filter(function(e){return!!e})},C.fakeDurationBar=function(){var e=d();e.style.display="none",e.className=g.G(R.event);var t=d();t.className=g.G(R.eventBar);var n=d();return n.className=g.G(R.eventBarInner),s().appendChild(e),t.appendChild(n),e.appendChild(t),e},C.fakeEventLeft=function(){var e=d();return e.style.display="none",e.className=g.G("_event_left"),s().appendChild(e),e},C.fakeGroup=function(){var e=d();e.style.display="none",e.className=g.G(R.event)+" "+g.G("_task_group");var t=d();return t.className=g.G(R.eventInner),e.appendChild(t),g.divEvents.appendChild(e),e},C.fakeMilestone=function(){var e=d();e.style.display="none",e.className=g.G(R.event)+" "+g.G("_task_milestone");var t=d();return t.className=g.G(R.eventInner),e.appendChild(t),g.divEvents.appendChild(e),e},C.fakeCell=function(){var e=d();e.style.display="none",e.className=g.G("_cell"),e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px";var t=d();return t.className=g.G("_cell_inner"),e.appendChild(t),g.divCells.appendChild(e),e},C.fakeRowHeader=function(){var e=d();e.style.display="none",e.className=g.G("_rowheader"),e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px";var t=d();return t.className=g.G("_rowheader_inner"),e.appendChild(t),g.divResScroll.appendChild(e),e},C.fakeExpand=function(){var e=d();return e.style.display="none",e.className=g.G("_tree_image_expand"),s().appendChild(e),e},C.fakeIcon=function(e){var t=document.createElement("i");return t.className=e,t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t},C.extractUrl=function(e){var t=/url\((")?([^"].*[^"])\1\)/.exec(e);return t?t[2]:null},C.getImages=function(){var e={},n=C.fakeExpand();return e.expand=C.extractUrl(new t.StyleReader(n).get("background-image")),n.className=g.G("_tree_image_collapse"),e.collapse=C.extractUrl(new t.StyleReader(n).get("background-image")),n.className=g.G("_tree_image_no_children"),e.nochildren=C.extractUrl(new t.StyleReader(n).get("background-image")),t.de(n),e},C.getFont=function(e){return new t.StyleReader(e).getFont()},C.getViewportOffsetStart=function(){switch(C.Te){case"full":return 0;case"viewport":return g.nav.scroll.scrollLeft;case"range":return g.getPixels(C.getRangeStart()).boxLeft}},C.getViewportOffsetTop=function(){switch(C.Te){case"full":return 0;case"viewport":return g.nav.scroll.scrollTop;case"range":return C.Sm(C.getRangeResStart())-g.Bj.top.height}},C.getViewportOffsetWidth=function(){switch(C.Te){case"full":return g.rj();case"viewport":return g.nav.scroll.offsetWidth;case"range":return g.getPixels(C.getRangeEnd()).boxRight-C.getViewportOffsetStart()}},C.excelBoard=function(){var e=new t.Excel,n=e.worksheets.create("Scheduler"),i=new t.StyleReader(g.nav.corner).get("background-color"),o=new t.StyleReader(g.nav.top).get("border-top-color"),r=t.list(g.elements.events).filter(function(e){return!e.event.data.type}).map(function(e){return e.firstChild}).last(),a=new t.StyleReader(r).get("border-right-color");e.styles.getDefault().setBackColor("#ffaaaa");var l=e.styles.create();l.setHorizontalAlignment("Center"),l.setBackColor(i),l.setBorderColor(o);var s=e.styles.create();s.setVerticalAlignment("Top"),s.setBackColor(i),s.setBorderColor(o);var d=e.styles.create();d.setVerticalAlignment("Top"),d.setBackColor("#ff0000"),d.setBorderColor(a),n.enableGridlines(!1),n.cell(0,0).setRowspan(g.timeHeader.length).setStyle(l),n.cell(10,10).setText("hi there"),t.list(g.timeHeader).forEach(function(e,t){C.getTimeHeader(t,"full").forEach(function(e,i){var o=e.colspan;n.cell(i+1,t+0).setText(e.innerHTML).setColspan(o).setStyle(l)})}),t.list(g.rowlist).forEach(function(e,t){for(var i={x:0,y:1},o="",r=0;r<e.level;r++)o+="  ";n.cell(i.x,t+i.y).setText(o+e.html).setRowspan(e.lines.length).setStyle(s)});var c={x:0,y:g.timeHeader.length},u=c.y;return t.list(g.rowlist).forEach(function(e,i){t.list(e.lines).forEach(function(e,o){var r=c.x;t.list(e).forEach(function(e){var t=g.Zj(e.start()).i,o=1+g.Zj(e.end()).i-t;n.cell(t+r,i+u).setText(e.client.html()).setColspan(o).setStyle(d),r+=o-1})}),u+=e.lines.length-1}),e},C.Se=null,C.Te=null,C.generate=function(e,n){function i(e){var n=p.grid.y+C.Sm(e)-C.Tm(e);n+=t.Util.atLeast(0,p.grid.y-n);var i=g.treeEnabled&&!e.isNewRow,o=i?e.level*g.treeIndent+g.treeImageMarginLeft+5:5;"Disabled"!==g.rowMoveHandling&&(o+=10);var r={x:0,y:n,w:p.grid.x+1,h:e.height+1},a=e;le&&(a=g.$m(e).row);var l=g.Fk(),s=g.internalUseStandardColumns&&!e.isNewRow,d=s||l&&t.isArray(g.rowHeaderColumns),u={};if(u.text=a.html,H.Zm().length>0&&d){var h=a.columns.find(function(e,t){return!g.rowHeaderColumns[t].hidden});u.text=h.text||h.html}u.backColor=a.backColor||$,u.fontSize=K.size,u.fontFamily=K.family,u.fontStyle=K.style,u.fontColor=a.fontColor||Q,u.borderColor=y,u.horizontalAlignment="left",u.verticalAlignment="center",u.row=g.Yk(e),u.row.columns=[],a.columns&&a.columns.forEach(function(e){var n=t.Util.copyProps(e,{},["text","html","backColor","horizontalAlignment","verticalAlignment"]);n.text=e.text||e.html,n.fontSize=u.fontSize,n.fontFamily=u.fontFamily,n.fontStyle=u.fontStyle,n.fontColor=u.fontColor,n.horizontalAlignment=n.horizontalAlignment||u.horizontalAlignment,n.verticalAlignment=n.verticalAlignment||u.verticalAlignment,n.backColor=n.backColor||u.backColor,u.row.columns.push(n)}),e.isNewRow&&(u.text=g.rowCreateText),se&&g.onBeforeRowHeaderExport(u);var m={x:o,y:n+g.treeImageMarginTop+2,w:10,h:10},v={size:u.fontSize,family:u.fontFamily,style:u.fontStyle};"center"===u.verticalAlignment&&(m.y=n+r.h/2-5);var b,w=i?o+10+3:o,x={x:w,y:n,w:i?r.w-w:r.w,h:e.height+1};g.rowHeaderCols&&(x.w=g.rowHeaderCols[0]-w),c.fillRect(r,u.backColor),c.text(x,u.text,v,u.fontColor,u.horizontalAlignment,0,u.verticalAlignment),c.rect(r,u.borderColor),i&&(b=t.list(e.children).isEmpty()?f.nochildren:e.expanded||C.Se.includeHiddenRows?f.collapse:f.expand,c.image(m,b));var S=t.list(u.row.columns);d&&(S=S.filter(function(e,t){return!g.rowHeaderColumns[t].hidden})),g.rowHeaderCols&&(o=r.x,t.list(g.rowHeaderCols).forEach(function(e,n){if(0!==n){var i=s||g.Fk()?0:1,a=S[n-i]||{},l=t.Util.copyProps(r);l.x=o,l.w=e+1;var d=t.Util.copyProps(l);d.x+=3,d.w-=3,c.fillRect(l,a.backColor||u.backColor),a.text&&c.text(d,a.text,{size:a.fontSize,family:a.fontFamily,style:a.fontStyle},a.fontColor,a.horizontalAlignment,0,a.verticalAlignment),c.rect(l,u.borderColor)}o+=e}))}function o(e,n,i){var o=g.itline[e],r=g.Bj[i=i||"main"].rowlist[n],a=g.pm(e,n,i),l=a.business,s=g._m(e,n,i),d=a.html,u=a.horizontalAlignment||"left",h=a.backColor||(l?j:L);de&&(s||((s={}).cell=g.cells.findXy(e,n,i)[0]),s.text=d,s.horizontalAlignment=u,s.backColor=h,g.onBeforeCellExport(s),d=s.text,u=s.horizontalAlignment,h=s.backColor);var f=p.grid.y+C.Sm(r)-C.Tm(r);f+=t.Util.atLeast(0,p.grid.y-f);var m=p.grid.x+o.left-ie,v={x:m+=t.Util.atLeast(0,p.grid.x-m),y:f,w:o.width,h:r.height};c.fillRect(v,h);var y={};y.x=v.x+1,y.y=v.y+1,y.w=v.w-2,y.h=v.h-2,d&&c.text(y,d,z,U,u)}function r(e){var n=p.grid.y+C.Sm(e)-C.Tm(e);if((n+=t.Util.atLeast(0,p.grid.y-n))!==p.grid.y&&!("main"===e.grid&&n>C.bottomFrozenY())){var i=G,o={};if(ce){if(o.row=g.Yk(e),o.hidden=!1,o.cssClass=null,o.type="HorizontalLine",o.color=null,g.onBeforeGridLineRender(o),o.hidden)return;i=o.color||G}c.line(p.gridContent.x+1,n,p.gridContent.x+p.gridContent.w-1,n,i),"top"===e.grid&&e===g.Bj.top.rowlist.last()&&c.line(p.gridContent.x+1,n+e.height,p.gridContent.x+p.gridContent.w-1,n+e.height,G)}}function a(e,n){var i=p.grid.x+e.left-ie;if((i+=t.Util.atLeast(0,p.grid.x-i))!==p.grid.x){var o=p.grid.y+1,r=p.grid.y+p.grid.h-2;"top"===n&&(r=o+g.Bj.top.height),"bottom"===n&&(o=C.bottomFrozenY());var a=V,l={};if(ce){if(l.start=e.start,l.end=e.end,l.hidden=!1,l.cssClass=null,l.type="VerticalLine",l.color=null,g.onBeforeGridLineRender(l),l.hidden)return;a=l.color||V}c.line(i,o,i,r,a)}}function l(e){var n=g.Bj[e.part.grid].rowlist[e.part.dayIndex],i=C.Sm(n),o=e.part.width,r=e.client&&e.client.barVisible&&e.client.barVisible(),a=p.grid.y+i+e.part.top-C.Tm(n),l=p.grid.x+e.part.left-ie+1,s=t.Util.atLeast(0,p.grid.x-l);l+=s,o-=s;var d=e.cache||e.data,u=d.barColor||P,h=d.barBackColor||I,f=d.backColor||E,m=d.fontColor||T,v=e.part.barLeft,y=e.part.barWidth;"PercentComplete"===g.durationBarMode&&(v=0,y=t.Util.atLeast(0,Math.floor(e.part.width*(d.complete||0)/100))),"Milestone"===e.data.type&&(f=k);var b={};b.e=e,b.text=e.text?e.text():e.client.html(),b.areas=d.areas,b.fontSize=S.size,b.fontFamily=S.family,b.fontStyle=S.style,b.fontColor=m,b.backColor=f,b.borderColor=x,b.horizontalAlignment="left",b.verticalAlignment="center",b.barHeight=4,b.textPadding=2,b.textLeft=d.textLeft||d.htmlLeft,b.textRight=d.textRight||d.htmlRight,"function"==typeof g.onBeforeEventExport&&g.onBeforeEventExport(b);var w={x:l,y:a,w:o,h:e.part.height};c.groupStart({type:"event",id:e.id()}),"Milestone"===e.data.type?c.diamond(w,b.backColor):"Group"===e.data.type?function(){var e={x:l,y:a,w:o,h:b.barHeight},t={x:l+v,y:a,w:y,h:b.barHeight},n=d.backColor||A,i={x:l,y:a+5,h:w.h-6-5,w:w.w};c.fillRect(i,n),c.text(i,d.text||d.html,{size:b.fontSize,family:b.fontFamily,style:b.fontStyle},b.fontColor,b.horizontalAlignment,b.textPadding,b.verticalAlignment),c.upperRightCorner({x:l+w.w-6,y:i.y+i.h,w:6,h:6},n),c.upperLeftCorner({x:l,y:i.y+i.h,w:6,h:6},n),r&&(c.fillRect(e,h),y>0&&c.fillRect(t,u))}():function(){var n={x:l,y:a,w:o,h:b.barHeight},i={x:l+v,y:a,w:y,h:b.barHeight},s={x:l+2,y:a+b.barHeight,w:o-2,h:e.part.height-b.barHeight};c.fillRect(w,b.backColor),c.text(s,b.text,{size:b.fontSize,family:b.fontFamily,style:b.fontStyle},b.fontColor,b.horizontalAlignment,b.textPadding,b.verticalAlignment),c.rect(w,b.borderColor),r&&(c.fillRect(n,h),y>0&&c.fillRect(i,u)),t.list(b.areas).forEach(function(n){if(t.Areas.isVisible(n)){var i={type:"event-area"};"undefined"!=typeof n.id&&(i.id=n.id),c.groupStart(i);var o=0;"number"==typeof n.left?o=n.left:n.start?o=g.getPixels(new t.Date(n.start)).left-e.part.left:"number"==typeof n.right&&(o=e.part.width-n.right-n.width);var r=n.width||n.w;"number"==typeof n.right?r=e.part.width-n.right-o:n.end&&(r=g.getPixels(new t.Date(n.end)).left-n.left-e.part.left+1);var s=n.top||0,d=n.height||n.h;"number"==typeof n.bottom&&(d=e.part.height-n.bottom-s),d||(d=e.part.height-s);var u={x:l+o,y:a+s,w:r,h:d};if(n.backColor&&c.fillRect(u,n.backColor),n.icon){var h=g.Re.areaIcon(n.icon);c.text(u,h.text,h.font,n.fontColor||b.fontColor,n.horizontalAlignment,n.padding,n.verticalAlignment)}else if(n.image){var p=new Image;p.src=n.image,c.image(u,p)}else n.symbol?c.symbol(u,n.symbol,{color:n.fontColor||b.fontColor}):(n.text||n.html)&&c.text(u,n.text||n.html,{size:n.fontSize||b.fontSize,family:n.fontFamily||b.fontFamily,style:n.fontStyle||b.fontStyle},n.fontColor||b.fontColor,n.horizontalAlignment,n.padding,n.verticalAlignment);c.groupEnd()}})}();var _=b.textLeft;if(_){var D={size:b.fontSize,family:b.fontFamily,style:b.fontStyle},O=c.textWidth(_,D);c.text({x:l-(g.eventHtmlLeftMargin+O),y:a,w:O,h:e.part.height},_,D,M)}var R=b.textRight;if(R){var N={size:b.fontSize,family:b.fontFamily,style:b.fontStyle},L=c.textWidth(R,N);c.text({x:l+o+g.eventHtmlRightMargin,y:a,w:L,h:e.part.height},R,N,M)}c.groupEnd(),(e.versions||[]).forEach(function(n,o){var r=d.versions[o];c.groupStart({type:"event-version","event-id":e.id()});var a=n.width,l=p.grid.y+i+n.top-oe;l+=t.Util.atLeast(0,p.grid.y-l);var s=p.grid.x+n.left-ie+1,u=t.Util.atLeast(0,p.grid.x-s);s+=u,a-=u;var h=g.eventVersionHeight,f=g.durationBarVisible&&!r.barHidden,m=f?g.durationBarHeight:0,v={x:s,y:l,w:a,h:h};c.fillRect(v,r.backColor||b.backColor);var y={x:s+2,y:l+m,w:t.Util.atLeast(0,a-2),h:h-m};if(c.text(y,r.text,{size:b.fontSize,family:b.fontFamily,style:b.fontStyle},b.fontColor,b.horizontalAlignment,b.textPadding,b.verticalAlignment),c.rect(v,r.borderColor||b.borderColor),f){var w=r.barBackColor||I,C=r.barColor||P,x=100*n.barLeft/a,S=Math.ceil(100*n.barWidth/a),T={x:s+x,y:l+1,w:S,h:m};c.fillRect({x:s,y:l+1,w:a,h:m},w),S>0&&c.fillRect(T,C)}c.groupEnd()})}"object"==typeof e&&(n=e,e=null),n=n||{},e=e||n.format||"svg";var s=n.scale||1;if("xls"===e)return C.excelBoard();"jpg"===e.toLowerCase()&&(e="jpeg");var d=n.area||"viewport";C.Se=t.Util.copyProps(n),C.Te=d,C.Se.includeHiddenRows=C.Se.includeHiddenRows&&"range"===d,C.getRows().forEach(function(e){g.Ym(e)});var c,u=C.eh(),h=C.dh();switch(e.toLowerCase()){case"svg":c=new t.Svg(u,h);break;case"png":c=new t.Canvas(u,h,"image/png",s);break;case"jpeg":c=new t.Canvas(u,h,"image/jpeg",s,n.quality);break;default:throw new t.Exception("Export format not supported: "+e)}var p=C.getRectangles(),f=C.getImages(),m=new t.StyleReader(g.nav.top).get("background-color"),v=new t.StyleReader(g.nav.corner).get("background-color"),y=new t.StyleReader(g.nav.top).get("border-top-color"),b=new t.StyleReader(g.nav.divider).get("background-color"),w=t.list(g.elements.events).filter(function(e){return!e.event.data.type}).map(function(e){return e.firstChild}).last(),x=new t.StyleReader(w).get("border-right-color"),S=C.getFont(w),T=new t.StyleReader(w).get("color"),E=new t.StyleReader(w).get("background-color");E=t.Util.isTransparentColor(E)?"white":E;var _=C.fakeMilestone(),k=new t.StyleReader(_.firstChild).get("background-color");t.de(_);var D=C.fakeGroup(),A=new t.StyleReader(D.firstChild).get("background-color");t.de(D);var O=C.fakeDurationBar(),I=new t.StyleReader(O.firstChild).get("background-color"),P=new t.StyleReader(O.firstChild.firstChild).get("background-color");t.de(O);var R=C.fakeEventLeft(),M=new t.StyleReader(R).get("color");t.de(R);var N=C.fakeCell(),L=new t.StyleReader(N).get("background-color");t.Util.addClass(N,g.G("_cell_business"));var j=new t.StyleReader(N).get("background-color"),z=C.getFont(N),U=new t.StyleReader(N).get("color");t.de(N);var F=t.Util.firstPropValue(g.P.linesHorizontal),G=new t.StyleReader(F).get("background-color"),q=t.Util.firstPropValue(g.P.linesVertical),V=new t.StyleReader(q).get("background-color"),W=g.P.timeHeader["0_0"],Y=C.getFont(W),X=new t.StyleReader(W).get("color"),Z=new t.StyleReader(W).get("background-color"),J=C.fakeRowHeader(),K=C.getFont(J),Q=new t.StyleReader(J).get("color"),$=new t.StyleReader(J).get("background-color");if(t.de(J),g.rowHeaderColumns&&g.yl&&g.yl.blocks[0])var ee=g.yl.blocks[0].section.firstChild,te=new t.StyleReader(ee).getFont(),ne=new t.StyleReader(ee).get("color");var ie=C.getViewportOffsetStart(),oe=C.getViewportOffsetTop();c.fillRect(p.main,"white"),c.fillRect(p.main,m),c.fillRect(p.corner,v);var re=p.corner.x;H.Zm().forEach(function(e,n){var i=g.rowHeaderCols[n],o={};o.x=re,o.w=i+1,o.y=p.corner.h-g.yl.height,o.h=g.yl.height+1;var r=t.Util.copyProps(o);r.x+=3,r.w-=3,c.text(r,e.name||e.title||"",te,ne,"left",0,"center"),c.rect(o,y),re+=i});var ae="function"==typeof g.onBeforeTimeHeaderExport,le="function"==typeof g.onBeforeRowHeaderRender,se="function"==typeof g.onBeforeRowHeaderExport,de="function"==typeof g.onBeforeCellExport;C.getRows().forEach(i),C.getRowsTop().forEach(i),C.getRowsBottom().forEach(i),C.getRows().forEach(function(e,t,n){t=e.index,C.getTimeline().forEach(function(n,i,r){o(i=r.offset+i,t,e.grid)})});var ce="function"==typeof g.onBeforeGridLineRender;return C.getRows().forEach(r),C.getTimeline().forEach(function(e){a(e,"main")}),function(e){if(e){var t=V,n={};if(ce){if(n.start=e.end,n.end=e.end,n.hidden=!1,n.cssClass=null,n.type="VerticalLine",n.color=null,g.onBeforeGridLineRender(n),n.hidden)return;t=n.color||V}var i=p.grid.x+e.left-ie+e.width;c.line(i,p.grid.y+1,i,p.grid.y+p.grid.h-2,t)}}(C.getTimeline().last()),C.getSeparators().forEach(function(e){var t=p.grid.x+e.left-ie;c.line(t,p.grid.y+1,t,p.grid.y+p.grid.h-2,e.color)}),C.getLinks().forEach(function(e){e&&e.map(function(e){return C.shiftableSegment(e).shift(p.grid.x-ie,p.grid.y-oe)}).forEach(function(e){switch(e.type){case"HorizontalLine":case"VerticalLine":c.line(e.startX,e.startY,e.endX,e.endY,"red");break;case"ArrowRight":c.triangle({x:e.startX-10,y:e.startY-4.5,w:10,h:10},"red");break;case"ArrowDown":c.triangle({x:e.startX-4.5,y:e.startY-10,w:10,h:10},"red",90);break;case"ArrowLeft":c.triangle({x:e.startX,y:e.startY-4.5,w:10,h:10},"red",180);break;case"ArrowUp":c.triangle({x:e.startX-4.5,y:e.startY,w:10,h:10},"red",-90)}})}),C.getEvents().forEach(l),C.getRowsTopAndBottom().forEach(function(e,t,n){t=e.index,C.getTimeline().forEach(function(n,i,r){o(i=r.offset+i,t,e.grid)}),r(e)}),C.getTimeline().forEach(function(e){a(e,"top"),a(e,"bottom")}),C.getEventsFrozen().forEach(l),t.list(g.timeHeader).forEach(function(e,n){C.getTimeHeader(n,d).forEach(function(e){var i,o=p.grid.x+e.left-ie,r=e.width,a=B.an(n),l=a.top,s=a.height,d={header:{}};d.header.start=e.start,d.header.end=e.end,d.header.level=n,d.header.text=e.text,d.header.html=e.innerHTML,d.text=e.text,d.backColor=e.backColor,d.verticalAlignment="center",d.horizontalAlignment="center",d.fontColor=X,d.fontSize=Y.size,d.fontFamily=Y.family,d.fontStyle=Y.style,ae&&g.onBeforeTimeHeaderExport(d),r-=i=t.Util.atLeast(0,p.grid.x-o);var u={x:o+=i,y:l,w:1+(r-=i=t.Util.atLeast(0,o+r-(p.grid.x+p.grid.w))),h:s+1},h={size:d.fontSize,family:d.fontFamily,style:d.fontStyle};c.fillRect(u,d.backColor||Z),c.rect(u,y),c.text(u,d.text,h,d.fontColor,d.horizontalAlignment,0,d.verticalAlignment)})}),c.rect(p.main,y),c.line(p.grid.x,0,p.grid.x,p.main.h,b),c.line(0,p.grid.y,p.main.w,p.grid.y,b),c},C.areaIcon=function(e){var n=C.fakeIcon(e);s().appendChild(n);var i=window.getComputedStyle(n,":before").content.replace(/"/g,""),o=new t.StyleReader(n).getFont();return s().removeChild(n),{text:i,font:o}},C.shiftableSegment=function(e){return{startX:e.startX,endX:e.endX,startY:e.startY,endY:e.endY,type:e.type,shift:function(t,n){return C.shiftableSegment({startX:e.startX+t,endX:e.endX+t,startY:e.startY+n,endY:e.endY+n,type:e.type})}}},this.bn={};var x=this.bn;x.findJointDivs=function(e){var n=e.data.join;return n?t.list(g.elements.events).filter(function(t){return t.event.data.join===n&&t.event!==e}):t.list()},this.cn={};var S=this.cn;S.divs=[],S.list=[],S.forbidden=!1,S.additional=function(){var e=t.list(),n=g.multiselect.isSelected(l.zm.event),i=g.allowMultiResize;if(e=t.list(),n&&i&&(e=t.list(g.multiselect.tc).filter(function(e){return e!==l.zm})),g.jointEventsResize){var o=x.findJointDivs(l.Qm);e=e.concat(o)}return e},S.update=function(){S.clear(),S.draw()},S.clear=function(){t.de(S.divs),S.divs=[]},S.isInvalid=function(){return S.divs.some(function(e){return e.info.invalid})},S.dn=function(){return g.en(S.list)},S.gn=function(){if(l.zm){var e=l.Qm,t=l.Pm,n=t.start.getTime()-e.start().getTime(),i=t.end.getTime()-e.end().getTime();S.list=[],S.forbidden=!1,S.invalid=!1,S.rowoffset=0,S.additional().forEach(function(e){if(e.event){var t=e.event,o=g.rowlist[t.part.dayIndex+0];if(!o)return void(S.invalid=!0);var r=t.start().addTime(n),a=t.end().addTime(i),l={$:{}};r>=a&&(l.invalid=!0,n>0?l.$.hn=a.addSeconds(-1):i<0&&(l.$.in=r.addSeconds(1))),l.event=t,l.start=r,l.end=a,l.$.jn=o,S.list.push(l)}})}},S.kn=function(){if(S.list.forEach(function(e){var n=e.event,i=n.part.top+e.$.jn.top,o=n.part.height,r=g.getPixels(e.start),a=g.getPixels(e.end);e.$.hn&&(r=g.getPixels(e.$.hn)),e.$.in&&(a=g.getPixels(e.$.in));var l=t.DateUtil.diff(n.rawend(),n.start());l=t.Util.atLeast(l,1);var s=H.El(l),c=s?r.boxLeft:r.left,u=s?a.boxRight-c:a.left-c,h=d();h.style.position="absolute",h.style.left=c+"px",h.style.top=i+"px",h.style.height=o+"px",h.style.width=u+"px",h.style.zIndex=101,h.style.overflow="hidden",h.className=g.G("_shadow"),h.info=e;var p=d();p.className=g.G("_shadow_inner"),h.appendChild(p),g.cj.appendChild(h),S.divs.push(h)}),S.invalid){var e=g.G("_shadow_overlap");t.list(S.divs).forEach(function(n){t.Util.addClass(n,e)})}else t.list(S.divs).forEach(function(e){if(e.info){var n=e,i=e.info,o=e.info.event,r=g.rowlist[o.part.dayIndex+0],a=g.getPixels(i.start),s=g.getPixels(i.end),d=a.left,c=s.left-d;e.info.invalid&&t.Util.addClass(e,g.G("_shadow_invalid"));var u=t.list(S.list).map(function(e){return e.event.data}).add(l.zm.event.data);g.ln(n,r,d,c,u),g.mn(n,i.start,i.end,o.resource()),n.overlapping&&(i.overlapping=!0,S.forbidden=!0)}})},S.draw=function(){S.gn(),S.kn()},this.nn={},this.nn.modifiedProps=function(){var e=new t.Scheduler,n=t.Util.members(g,2),i=[];return i.push("<div id='dp'></div>"),i.push("<script>"),i.push("var dp = new DayPilot.Scheduler('dp');"),n.properties.forEach(function(t){var n,o,r=t.name,a=r.split(".");if(a.length>1){var l=a[0],s=a[1];n=JSON.stringify(e[l][s]),o=JSON.stringify(g[l][s])}else n=JSON.stringify(e[r]),o=JSON.stringify(g[r]);n!==o&&i.push("dp."+r+" = "+o+";")}),n.events.forEach(function(e){var t=e.name;"function"==typeof g[t]&&i.push("dp."+t+" = "+g[t].toString()+";")}),i.push("dp.init();"),i.push("<\/script>"),i.join("\n")},this.on={};var T=this.on;T.divs=[],T.list=[],T.forbidden=!1,T.pn=0,T.verticalAll=function(){return"All"===g.multiMoveVerticalMode},T.additional=function(){var e=t.list(),n=g._j;if(g.multiselect.isSelected(l.um)&&g.allowMultiMove&&(e=t.list(g.multiselect.tc).filter(function(e){return e!==l._j&&e!==n._j})),g.jointEventsMove){var i=x.findJointDivs(l.um);e=e.concat(i)}return e},T.update=function(){T.clear(),T.draw()},T.dn=function(){return g.en(T.list)},T.gn=function(){if(T.list=[],T.rowoffset=0,l._j){var e=l.um,n=l.qn.start.getTime()-e.start().getTime(),i=e.part.dayIndex,o=t.indexOf(g.rowlist,l.qn.row)-i;T.verticalAll()||(o=0),T.forbidden=!1,T.invalid=!1,T.rowoffset=o,T.additional().forEach(function(e){if(e.event){var t=e.event,i=g.rowlist[t.part.dayIndex+o];if(!i)return void(T.invalid=!0);var r=t.start().addTime(n),a=t.end().addTime(n),l={};l.event=t,l.start=r,l.end=a,l.resource=i.id,T.list.push(l)}})}},T.kn=function(){if(T.list.forEach(function(e){var n=e.end,i=e.event,o=g.getPixels(e.start),r=g.getPixels(n),a=t.DateUtil.diff(i.rawend(),i.start());a=t.Util.atLeast(a,1);var l=H.El(a),s=g.fj(e.resource);if(s){e.$={},e.$.jn=s;var c=l?o.boxLeft:o.left,u=l?r.boxRight-c:r.left-c,h=i.part.top+s.top,p=i.part.height;e.resource!==e.event.data.resource&&(h=s.top,p=s.height);var f=d();f.style.position="absolute",f.style.left=c+"px",f.style.top=h+"px",f.style.height=p+"px",f.style.width=u+"px",f.style.overflow="hidden",f.className=g.G("_shadow"),f.info=e;var m=d();m.className=g.G("_shadow_inner"),f.appendChild(m),g.cj.appendChild(f),T.divs.push(f)}else T.invalid=!0}),T.invalid){var e=g.G("_shadow_overlap");t.list(T.divs).forEach(function(n){t.Util.addClass(n,e)})}else t.list(T.divs).forEach(function(e){if(e.info){var n=e,i=e.info,o=e.info.$.jn,r=g.getPixels(i.start),a=g.getPixels(i.end),s=r.left,d=a.left-s,c=t.list(T.list).map(function(e){return e.event.data}).add(l.um.data);g.ln(n,o,s,d,c),g.mn(n,i.start,i.end,i.resource),i.overlapping=!1,n.overlapping&&(i.overlapping=!0,T.forbidden=!0)}})},T.draw=function(){T.gn(),T.kn()},T.clear=function(){t.de(T.divs),T.divs=[]},this.en=function(e,n){return n=["$"].concat(n||[]),e.map(function(e){var i=e,o={};for(var r in i){var a=n&&-1!==t.indexOf(n,r);i.hasOwnProperty(r)&&"undefined"!=typeof i[r]&&(a?Object.defineProperty(o,r,{value:i[r]}):o[r]=i[r])}return o})},this.rn=function(){var e=l.zm.dpBorder,n=l.zm.event,i=n.part.left;"right"==e&&(i+=n.part.width);var o,r,a=l.zm.event.calendar.cellWidth,s=l.zm.event.part.width,d=l.zm.event.part.left,c=g.coords.x-i,u=g.snapToGrid&&g.snapToGridEventResizing;if("right"===e){if(o=d,u){var h=g.Xj(s+d+c).cell,p=g.Xj(d).cell,f=p.left+p.width-d;(r=h.left+h.width-d)<f&&(r=f)}else r=s+c;var m=g.rj();d+r>m&&(r=m-d),l.Pm.left=d,l.Pm.width=r}else{if("left"!==e)throw new t.Exception("Invalid dpBorder.");u?(c>=s&&(c=s),(o=Math.floor((d+c+0)/a)*a)<0&&(o=0)):o=d+c,r=s-(o-d);var v=a;u?"Never"===g.useEventBoxes&&(v=s<a?s:1):v=1,r<v&&(o=d+s-(r=v)),l.Pm.left=o,l.Pm.width=r}!function(){l.Pm.overlapping=!1;var e=l.zm.event,t=g.rowlist[e.part.dayIndex];g.ln(l.Pm,t,o,r,e.data);var n=l.Pm;if(n.start){var i={start:n.start,end:g.kh(n.end)};g.mn(l.Pm,i.start,i.end,t.id)}}(),g.sn()},this.Nm=function(){if(g.coords&&l.um){g.xj();var e=l.qn,n=this.Bl(l.um);if(!g.Cl(n.rowIndex,n.grid)){var i=l.um,o=i.cache&&"undefined"!=typeof i.cache.moveVDisabled?!i.cache.moveVDisabled:!i.data.moveVDisabled,r=i.cache&&"undefined"!=typeof i.cache.moveHDisabled?!i.cache.moveHDisabled:!i.data.moveHDisabled,a=!T.additional().isEmpty();a&&"Disabled"===g.multiMoveVerticalMode&&(o=!1),o&&n.grid!==e.grid&&(e.parentNode.removeChild(e),g.Bj[n.grid].divShadow.appendChild(e),e.grid=n.grid);var s=0,d=0;if(function(){if(g.yi){var e=n.relativeY,i=g.Xj(n.left).x,o=(a=n.row).evColumns[i],r=o.events.find(function(t){return e<t.part.top+t.part.height+g.eventMarginBottom});r||(r=o.events.last()),r&&(d=r.part.top,s=t.indexOf(o.events,r),e-r.part.top>r.part.height/2&&(d=r.part.top+r.part.height+g.eventMarginBottom/2,s+=1))}else{e=n.relativeY;for(var a=n.row,l=g.ea.Dl(),c=a.lines.length,u=0;u<a.lines.length;u++)if(a.lines[u].isFree(n.left,g.cellWidth)){c=u;break}var h=Math.floor((e-0+l/2)/l);h=Math.min(c,h),h=t.Util.atLeast(0,h),d=g.rowMarginTop+(s=h)*(g.ea.Dl()+g.eventMarginBottom)+g.eventMarginBottom/2}}(),d>0&&(d-=3),o)if(this.Cl(n.rowIndex,n.grid)){var c;if(!(p=e.row))return;c=n.rowIndex<p.index?1:-1;for(var u=n.rowIndex;u!==p.index;u+=c){var h=this.rowlist[u];if(!this.Cl(u,n.grid)&&!h.hidden){e.style.top=h.top+"px",e.style.height=t.Util.atLeast(h.height,0)+"px",e.row=h,g.eventMoveToPosition&&(s=c>0?0:h.lines.length-1,e.style.top=n.top+d+"px",e.style.height="3px",e.line=s);break}}}else e.row=n.row,e.style.height=t.Util.atLeast(n.row.height,0)+"px",e.style.top=n.top+"px",g.eventMoveToPosition&&(e.style.top=n.top+d+"px",e.style.height="3px",e.line=s);else{var p,f=(p=g.Bj[i.part.grid].rowlist[i.part.dayIndex]).lines.length;for(u=0;u<p.lines.length;u++)if(p.lines[u].isFree(n.left,g.cellWidth)){f=u;break}if(a||(e.style.height=t.Util.atLeast(p.height,0)+"px",e.style.top=p.top+"px"),e.row=p,g.eventMoveToPosition&&!a)if(n.row===p)e.style.top=p.top+d+"px",e.style.height="3px",e.line=s;else{var m=n.rowIndex>p.index&&f>0?f*g.ea.Dl()-3:0;e.style.top=p.top+m+"px",e.style.height="3px",e.line=0}}r?(e.style.left=n.left+"px",e.style.width=g.eventMoveToPosition?g.cellWidth+"px":n.width+"px",e.start=n.start,e.end=n.end):(e.style.left=i.part.left+"px",e.start=i.start(),e.end=i.rawend(),n.left=i.part.left),function(){e.overlapping=!1;var o=e.row,r=i.data,a=n.width,s=n.left,d=t.list(T.list).map(function(e){return e.event.data}).add(r);g.ln(e,o,s,a,d),g.mn(l.qn,e.start,e.end,e.row.id)}(),function(){var n=g.Ca;if(!n||n.start.getTime()!==e.start.getTime()||n.end.getTime()!==e.end.getTime()||n.resource!==e.row.id){n&&(t.Util.removeClass(e,n.cssClass),e.firstChild.innerHTML=""),T.clear(),T.gn();var o=!!l.tn&&i.part.external,r={};r.start=e.start,r.end=g.kh(e.end),r.duration=new t.Duration(r.start,r.end),r.e=i,r.external=o,r.control=g,r.resource=e.row.id,r.html=null,r.row=g.Yk(e.row),r.position=e.line,r.overlapping=e.overlapping||T.forbidden,r.allowed=!0,r.left={},r.left.html=r.start.toString(g.eventMovingStartEndFormat,H.Uj()),r.left.enabled=g.eventMovingStartEndEnabled,r.left.space=5,r.left.width=null,r.left.height=g.eventHeight,r.right={},r.right.html=r.end.toString(g.eventMovingStartEndFormat,H.Uj()),r.right.enabled=g.eventMovingStartEndEnabled,r.right.space=5,r.right.width=null,r.right.height=g.eventHeight,r.multimove=T.dn(),r.shift=g.coords.shift,r.ctrl=g.coords.ctrl,r.meta=g.coords.meta,r.alt=g.coords.alt,r.areaData=t.Global.movingAreaData,r.link=null,r.cssClass=null,r.html=null;var a={};a.event=i,a.start=r.start,a.end=r.end,a.overlapping=r.overlapping,a.resource=r.resource,r.multimove.splice(0,0,a),g.Ca=r;var c={start:r.start,end:r.end,resource:r.resource};if("function"==typeof g.onEventMoving&&g.onEventMoving(r),T.list=t.list(r.multimove,!0),T.list.splice(0,1),T.kn(),e.allowed=r.allowed,t.Util.addClass(e,r.cssClass),r.html&&(e.firstChild.innerHTML=r.html),r.start!==c.start||r.end!==c.end){var u=r.start,h=g.Ng(r.end);e.start=u,e.end=h;var p=t.DateUtil.diff(u,h);p=t.Util.atLeast(p,1);var f=H.El(p),m=f?g.getPixels(u).boxLeft:g.getPixels(u).left,v=f?g.getPixels(h).boxRight:g.getPixels(h).left;e.style.left=m+"px",e.style.width=v-m+"px"}if(r.resource!==c.resource){var y=g.fj(r.resource);y&&(e.row=y,e.style.height=t.Util.atLeast(y.height,0)+"px",e.style.top=y.top+"px",g.eventMoveToPosition&&(e.style.top=y.top+d+"px",e.style.height="3px",e.line=s))}e.firstChild.innerHTML=r.html?r.html:"",g.un(e,r),g.vn(l.qn,r),r.link&&(t.Global.movingLink&&t.Global.movingLink.clear(),t.Global.movingLink=b.Vl(r.link.from,e,r.link))}}()}}},this.ln=function(e,n,i,o,r){if(!g.allowEventOverlap){!function(){e.overlapping=!1;for(var a=0;a<n.lines.length;a++)if(!n.lines[a].isFree(i,o,r))return void(e.overlapping=!0);var l=n.index;if(t.list(N.list).some(function(n){var r=n.div,a=parseInt(r.style.left),s=parseInt(r.style.width);return e!==r&&n.start.y===l&&t.Util.overlaps(i,i+o,a,a+s)}))e.overlapping=!0;else{if(!t.list(T.divs).some(function(n){var r=n.info,a=parseInt(n.style.left),s=parseInt(n.style.width);return e!==n&&r.$.jn.index===l&&t.Util.overlaps(i,i+o,a,a+s)}))return t.list(S.divs).some(function(n){var r=n.info,a=parseInt(n.style.left),s=parseInt(n.style.width);return e!==n&&r.$.jn.index===l&&t.Util.overlaps(i,i+o,a,a+s)})?void(e.overlapping=!0):void 0;e.overlapping=!0}}();var a=e.overlapping,l=g.G("_shadow_overlap");a?t.Util.addClass(e,l):t.Util.removeClass(e,l)}},this.mn=function(e,n,i,o){g.bc(n,i,o)&&(e.overlapping=!0);var r=g.G("_shadow_overlap");e.overlapping?t.Util.addClass(e,r):t.Util.removeClass(e,r)},this.bc=function(e,t,n){if(!(g.cellConfig&&g.cellConfig.hasDisabled||g.Pj.wn))return!1;var i=null;"Days"===g.viewType&&(i=g.rm(e));var o=g.rows.find(n,i).cells.forRange(e,t);return!!o&&o.some(function(e){return e.properties.disabled})},this.un=function(e,n){var i=g.G("_shadow_forbidden");!n.allowed||T.invalid?t.Util.addClass(e,i):t.Util.removeClass(e,i)},this.vn=function(e,n){if(this.xn(),e.calendar===g){var i=g.zl(e.grid),o={};o.left=parseInt(e.style.left),o.top=parseInt(e.style.top),o.right=o.left+parseInt(e.style.width);var r=n.left.width||10,a=d();if(a.style.position="absolute",a.style.left=o.left-r-n.left.space+"px",a.style.top=o.top+"px",a.style.height=n.left.height+"px",a.style.overflow="hidden",a.style.boxSizing="border-box",a.innerHTML=n.left.html,a.className=g.G("_event_move_left"),a.onmousemove=g.yn,t.browser.ie&&(a.style.display="block"),n.left.enabled)if(i.divHover.appendChild(a),n.left.width)a.style.width=r+"px";else{a.style.whiteSpace="nowrap";var l=a.offsetWidth,s=o.left-l-n.left.space;a.style.width=l+"px",a.style.left=s+"px";var c=g.nav.scroll.scrollLeft;s<c&&i.divHover.removeChild(a);var u=g.uj()+(s-c);u>0&&(a.style.left=u+"px",a.style.top=o.top-i.div.scrollTop+i.top+"px",g.nav.top.appendChild(a),g.elements.hover.push(a))}r=n.right.width||10;var h=d();h.style.position="absolute",h.style.left=o.right+n.right.space+"px",h.style.top=o.top+"px",h.style.height=n.right.height+"px",h.style.overflow="hidden",h.style.boxSizing="border-box",n.right.width?h.style.width=n.right.width+"px":h.style.whiteSpace="nowrap",h.innerHTML=n.right.html,h.className=this.G("_event_move_right"),h.onmousemove=g.yn,t.browser.ie&&(h.style.display="block"),n.right.enabled&&(i.divHover.appendChild(h),o.right+n.right.space+h.offsetWidth>=g.nav.scroll.scrollWidth&&i.divHover.removeChild(h))}},this.xn=function(){g.divHover.innerHTML="",g.Bj.top.divHover.innerHTML="",g.Bj.bottom.divHover.innerHTML="",t.de(g.elements.hover),g.elements.hover=[]},this.zn=function(){var e=g.rowHeaderColumnDefaultWidth;if(this.rowHeaderColumns){var n=H.Zm();this.rowHeaderCols=t.Util.propArray(n,"width",e)}else this.rowHeaderCols=null},this.An=function(){var e=0;if(this.zn(),this.rowHeaderCols)for(var t=0;t<this.rowHeaderCols.length;t++)e+=this.rowHeaderCols[t];else e=this.rowHeaderWidth;return e},this.Bn=function(){return this.Cn(g.progressiveRowRenderingPreload)},this.Cn=function(e){e=e||0;var n=0,i=g.rowlist.length;if(g.progressiveRowRendering){var o=g.X();i=o.yEnd+1,n=t.Util.atLeast(0,(n=o.yStart)-e),i=Math.min(g.rowlist.length,i+e)}return{start:n,end:i}},this.Dn=function(){if(this.ge()){var e=!1,n=0;if(this.rowHeaderWidthAutoFit){var i=this.divHeader;if(!i)return;if(!i.rows)return;var o=[];g.rowHeaderWidthAutoFitShrink&&(g.rowHeaderWidth=0,g.rowHeaderCols&&g.rowHeaderCols.forEach(function(e,t){g.rowHeaderCols[t]=0}));for(var r=g.Bn(),a=r.start;a<r.end;a++){var l=i.rows[a];if(l&&!l.hidden){for(var s=0;s<l.cells.length;s++)if("number"!=typeof l.cells[s].En){var d=l.cells[s].firstChild.firstChild;if(d&&d.style){var c=d.style.width,u=d.style.right,h=d.style.display;d.style.position="absolute",d.style.width="auto",d.style.right="auto",d.style.whiteSpace="nowrap",d.style.display="block",l.cells[s].En=p=d.offsetWidth+2,d.style.position="",d.style.width=c,d.style.right=u,d.style.display=h,d.style.whiteSpace=""}}for(s=0;s<l.cells.length;s++){var p=l.cells[s].En;"undefined"==typeof o[s]&&(o[s]=0),o[s]=Math.max(o[s],p)}}}if(this.zn(),this.rowHeaderCols)for(a=0;a<o.length;a++)this.rowHeaderCols[a]&&(o[a]>this.rowHeaderCols[a]&&(this.rowHeaderCols[a]=o[a],e=!0),n+=this.rowHeaderCols[a]);else{n=this.rowHeaderWidth;var f=H.vj();this.rowHeaderWidth<o[0]+g.rowHeaderWidthMarginRight+f&&(n=o[0]+g.rowHeaderWidthMarginRight+f,e=!0)}}e&&(this.yl&&(this.yl.widths=this.rowHeaderCols,this.yl.updateWidths(),t.Util.updatePropsFromArray(H.Zm(),"width",this.rowHeaderCols)),this.rowHeaderCols||(this.rowHeaderWidth=n),this.sk(),this.Fn())}},this.Ji=function(){function e(e){var n=g.zl(e).divHeader;n&&(n.rows=[]);var i=n;if(n.Jn&&(i=n.Jn),i){if(t.browser.ie)for(var o=0;o<i.childNodes.length;o++)t.de(i.childNodes[o]);g.vl(e),i.innerHTML="",t.puc(i)}}this.Gn=!0,this.zn();var n=this.An();e("main"),e("top"),e("bottom");var i=this.divHeader;if(i.style.width=n+"px",i.style.height=g.Ci+"px",g.Bj.main.divHeader=i,g.progressiveRowRendering);else for(var o=this.rowlist.length,r=0;r<o;r++)g.Hn(r);if(g.Bj.top.enabled())for(r=0;r<g.Bj.top.rowlist.length;r++)g.Hn(r,"top");if(g.Bj.bottom.enabled())for(r=0;r<g.Bj.bottom.rowlist.length;r++)g.Hn(r,"bottom");g.In(),this.divResScroll.appendChild(i),this.rowHeaderWidthAutoFit&&this.Dn()},this.tk=function(){if(g.progressiveRowRendering){for(var e=this.Bn(),t=0;t<g.rowlist.length;t++)e.start<=t&&t<e.end?g.Hn(t):g.Al(t);if(this.rowHeaderWidthAutoFit){var n=g.uj();if(this.Dn(),g.uj()!==n){var i=this.cellWidth;this.Gi(),this.cellWidth!==i&&(g.Hi(),g.Ki(),g.Li(),g.Ua(),g.Ma(),g.Kn())}}}},this.In=function(){if(!g.ea.Ln()){var e=g.divHeader;(n=d()).style.position="absolute",e.appendChild(n),g.nav.resScrollSpace=n,n.setAttribute("unselectable","on");var t=d();t.style.position="relative",t.style.height="100%",t.className=this.G("_rowheader"),n.appendChild(t);var n,i=this.An();(n=g.nav.resScrollSpace).style.width=i+"px",n.style.top=this.Ci+"px"}},this.Al=function(e,n){var i=g.zl(n),o=i.divHeader.rows[e];if(o){var r=o.cells[0],a=r.domArgs;if(r.domArgs=null,a&&"function"==typeof g.onBeforeRowHeaderDomRemove&&g.onBeforeRowHeaderDomRemove(a),a&&"function"==typeof g.onBeforeRowHeaderDomAdd&&g.wa.reactDOM){var l=a&&a.Rc;if(l&&t.Util.isReactComponent(a.element)){if(!g.wa.reactDOM)throw new t.Exception("Can't reach ReactDOM");g.wa.reactDOM.unmountComponentAtNode(l)}}t.de(o.cells),i.divHeader.rows[e]=null}},this.Hk=function(e,t){this.Al(e,t),this.Hn(e,t)},this.Fk=function(){return"Standard"===g.rowHeaderColumnsMode||"Tabular"===g.rowHeaderColumnsMode},this.Mn=function(e,t){var n=void 0;return e.tags&&(n=e.tags[t]),"undefined"!=typeof n?n:e[t]},this.Hn=function(e,n){var i=g.zl(n),o=i.rowlist,r=i.divHeader,a=r;if(r.Jn&&(a=r.Jn),r&&!r.rows[e]){var l=this.rowHeaderCols,s=l?this.rowHeaderCols.length:0,u=this.An(),h=o[e];if(h&&!h.hidden){var p=_.P[e],f=this.$m(h);r.rows[e]={},r.rows[e].cells=[],(M=d()).style.position="absolute",M.style.top=h.top+"px",M.row=h,M.index=e;var m=f.row,v=m,y=g.Fk(),b=g.internalUseStandardColumns&&!h.isNewRow,w=b||y&&t.isArray(g.rowHeaderColumns),C=t.list(f.row.columns);w&&(s=(C=C.filter(function(e,t){return!g.rowHeaderColumns[t].hidden})).length),w&&(v=C[0]||{});var x=l?l[0]:this.rowHeaderWidth;M.style.width=x+"px",M.style.border="0px none";var S=v.toolTip||m.toolTip;S&&(M.title=S),M.setAttribute("unselectable","on"),M.setAttribute("aria-label","undefined"!=typeof m.ariaLabel?m.ariaLabel:v.text||""),M.onmouseenter=g.Nn,M.onmouseleave=g.On,M.onmousemove=g.Pn,M.onmouseout=g.Qn,M.onmouseup=g.Rn,M.oncontextmenu=g.Sn,M.onclick=g.Tn,M.ondblclick=g.Un,(B=d()).style.width=x+"px",B.setAttribute("unselectable","on"),B.className=this.G("_rowheader"),p&&t.Util.addClass(B,g.G("_rowheader_selected")),m.cssClass&&t.Util.addClass(B,m.cssClass),v.cssClass&&t.Util.addClass(B,v.cssClass),(L=v.backColor||m.backColor)&&(B.style.background=L),(H=v.fontColor||m.fontColor)&&(B.style.color=H);var T=v.horizontalAlignment||m.horizontalAlignment;switch(g.treeEnabled&&(T=null),T&&(B.style.textAlign=T),B.style.height=h.height+"px",B.style.overflow="hidden",B.style.position="relative",(z=d()).setAttribute("unselectable","on"),z.className=this.G("_rowheader_inner"),T){case"right":z.style.justifyContent="flex-end";break;case"left":z.style.justifyContent="flex-start";break;case"center":z.style.justifyContent="center"}B.appendChild(z);var E="Disabled"!==this.rowMoveHandling&&"main"===h.grid,k=g.rowDragHandleWidth,D=v.areas||[];E&&!m.moveDisabled&&D.push({v:"Hover",w:k,bottom:0,top:0,left:0,css:g.G("_rowmove_handle"),action:"Move"});var A=g.Yk(h);if(t.Areas.attach(B,A,{areas:D,allowed:function(){return!c.row}}),(U=d()).style.position="absolute",U.style.bottom="0px",U.style.width="100%",U.style.height="0px",U.style.boxSizing="content-box",U.style.borderBottom="1px solid transparent",U.className=this.G(R.resourcedivider),B.appendChild(U),function(){var t=d();if(g.treeEnabled&&!h.isNewRow){var n=h.level*g.treeIndent+g.treeImageMarginLeft;E&&(n+=k);var i=g.treeImageWidth,o=g.treeImageHeight;t.style.marginLeft=n+"px",t.style.position="relative",t.className=g.G("_rowheader_inner_indent");var r=d();r.style.width=i+"px",r.style.height=o+"px",r.style.backgroundRepeat="no-repeat",r.style.position="absolute",r.style.top=g.treeImageMarginTop+"px",h.loaded||0!==h.children.length?h.children.length>0?(r.className=g.G(h.expanded?"_tree_image_collapse":"_tree_image_expand"),r.style.cursor="pointer",r.index=e,r.onclick=function(e){g.Mm(this.index),e.cancelBubble=!0}):r.className=g.G("_tree_image_no_children"):(r.className=g.G("_tree_image_expand"),r.style.cursor="pointer",r.index=e,r.onclick=function(e){g.Vn(this.index),e.cancelBubble=!0}),t.appendChild(r)}var a=d();g.treeEnabled&&(a.style.marginLeft=i+g.treeImageMarginRight+"px"),a.innerHTML=g.ca(v.text,v.html),a.className=g.G("_rowheader_inner_text"),M.textDiv=a,M.cellDiv=B,t.appendChild(a),z.appendChild(t);var l=v.verticalAlignment||m.verticalAlignment;if(l)switch(z.style.display="flex",l){case"center":z.style.alignItems="center";break;case"top":z.style.alignItems="flex-start";break;case"bottom":z.style.alignItems="flex-end"}}(),M.appendChild(B),function(){if("function"==typeof g.onBeforeRowHeaderDomAdd||"function"==typeof g.onBeforeRowHeaderDomRemove){var e=M,n={};if(n.control=g,n.row=g.Yk(h),n.element=null,n.target="Cell",e.domArgs=n,"function"==typeof g.onBeforeRowHeaderDomAdd&&g.onBeforeRowHeaderDomAdd(n),n.element){var i=null;switch(n.target&&n.target.toLowerCase()){case"text":i=G;break;case"cell":i=z}if(i)if(n.Rc=i,i.innerHTML="",t.Util.isReactComponent(n.element)){if(!g.wa.reactDOM)throw new t.Exception("Can't reach ReactDOM");g.wa.reactDOM.render(n.element,i)}else i.appendChild(n.element)}}}(),a.appendChild(M),r.rows[e].cells.push(M),h.columns&&0!==h.columns.length)for(var O=x,I=b||y?0:1,P=1;P<s;P++){var M;v=C[P-I]||{},(M=d()).style.position="absolute",M.style.top=h.top+"px",M.style.left=O+"px",a.appendChild(M),r.rows[e].cells.push(M),M.row=h,M.index=e;var N=v.toolTip||m.toolTip;N&&(M.title=N),M.setAttribute("unselectable","on"),M.onmousemove=g.Pn,M.onmouseout=g.Qn,M.onmouseup=g.Rn,M.oncontextmenu=g.Sn,M.onclick=g.Tn,M.ondblclick=g.Un;var L,H,B=d(),j=l[P];O+=j,(L=v.backColor||m.backColor)&&(B.style.backgroundColor=L),(H=v.fontColor||m.fontColor)&&(B.style.color=H),B.style.width=j+"px",B.style.height=h.height+"px",B.style.overflow="hidden",B.style.position="relative",B.setAttribute("unselectable","on"),t.Util.addClass(B,this.G("_rowheader")),t.Util.addClass(B,this.G("_rowheadercol")),t.Util.addClass(B,this.G("_rowheadercol"+P)),p&&t.Util.addClass(B,g.G("_rowheader_selected")),m.cssClass&&t.Util.addClass(B,m.cssClass),v.cssClass&&t.Util.addClass(B,v.cssClass);var z,U,F=v.horizontalAlignment||m.horizontalAlignment;switch(F&&(B.style.textAlign=F),(z=d()).setAttribute("unselectable","on"),z.className=this.G("_rowheader_inner"),F){case"right":z.style.justifyContent="flex-end";break;case"left":z.style.justifyContent="flex-start";break;case"center":z.style.justifyContent="center"}B.appendChild(z),(U=d()).style.position="absolute",U.style.bottom="0px",U.style.width="100%",U.style.height="0px",U.style.boxSizing="content-box",U.style.borderBottom="1px solid transparent",U.className=this.G("_resourcedivider"),B.appendChild(U);var G=d(),q=g.ca(v.text,v.html);G.innerHTML=q,M.textDiv=G,M.cellDiv=B,z.appendChild(G),t.Areas.attach(B,A,{areas:v.areas,allowed:function(){return!c.row}}),M.appendChild(B)}else M.colSpan="max",B.style.width=u+"px"}}},this.Sn=function(e){if("Disabled"===g.rowRightClickHandling)return!1;var t=this.row,n=g.Yk(t),i={};if(i.ctrl=e.ctrlKey,i.shift=e.shiftKey,i.meta=e.metaKey,i.originalEvent=e,i.row=n,i.preventDefault=function(){this.preventDefault.value=!0},"function"!=typeof g.onRowRightClick||(g.onRowRightClick(i),!i.preventDefault.value)){switch(g.rowRightClickHandling){case"ContextMenu":t.contextMenu&&t.contextMenu.show(n)}return"function"==typeof g.onRowRightClicked&&g.onRowRightClicked(i),!1}},this.Tn=function(e){if(!k.cancelClick){var t=this.row,n=g.Yk(t,this.index);return t.isNewRow?void g.cl.edit(t):void g._k(n,e)}},this.Un=function(e){if(g.ak.resClick){for(var t in g.ak.resClick)window.clearTimeout(g.ak.resClick[t]);g.ak.resClick=null}var n=this.row,i=g.Yk(n,this.index);if(g.cb()){var o={};if(o.resource=i,o.row=i,o.ctrl=e.ctrlKey,o.shift=e.shiftKey,o.meta=e.metaKey,o.originalEvent=e,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onRowDoubleClick&&(g.onRowDoubleClick(o),o.preventDefault.value))return;switch(g.rowDoubleClickHandling){case"PostBack":g.rowDoubleClickPostBack(i);break;case"CallBack":g.rowDoubleClickCallBack(i);break;case"Select":g.bl(n,e.ctrlKey,e.shiftKey,e.metaKey);break;case"Edit":g.cl.edit(n)}"function"==typeof g.onRowDoubleClicked&&g.onRowDoubleClicked(o)}else switch(g.rowDoubleClickHandling){case"PostBack":g.rowDoubleClickPostBack(i);break;case"CallBack":g.rowDoubleClickCallBack(i);break;case"JavaScript":g.onRowDoubleClick(i);break;case"Select":g.bl(n,e.ctrlKey,e.shiftKey,e.metaKey);break;case"Edit":g.cl.edit(n)}},this.rowDoubleClickPostBack=function(e,t){var n={};n.resource=e,this.fa("RowDoubleClick",n,t)},this.rowDoubleClickCallBack=function(e,t){var n={};n.resource=e,this.ha("RowDoubleClick",n,t)},this.Wn=function(e){if("Disabled"!==g.timeHeaderClickHandling){var n={};n.start=this.cell.start,n.level=this.cell.level,n.end=this.cell.end,n.end||(n.end=new t.Date(n.start).addMinutes(g.cellDuration)),g.dl(n)}},this.Xn=function(n){if("Disabled"!==g.timeHeaderRightClickHandling){n.cancelBubble=!0,n.preventDefault();var i={};if(i.start=this.cell.start,i.level=this.cell.level,i.end=this.cell.end,i.end||(i.end=new t.Date(i.start).addMinutes(g.cellDuration)),g.cb()){var o={};if(o.header=i,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onTimeHeaderRightClick&&(g.onTimeHeaderRightClick(o),o.preventDefault.value))return;switch(this.timeHeaderRightClickHandling){case"PostBack":g.timeHeaderRightClickPostBack(e);break;case"CallBack":g.timeHeaderRightClickCallBack(e)}"function"==typeof g.onTimeHeaderRightClicked&&g.onTimeHeaderRightClicked(o)}}},this.Yn=function(e){var t=g.rowlist[e];if(t.hidden)return 0;var n=t.height;return"number"==typeof t.forcedHeight&&(n=t.forcedHeight),n},this.Zn=function(e,n,i){function o(e){var t=g.Yn(e),i=n;"hide"===n?i=0:"show"===n&&(i=g.rowlist[e].height),r.push({i:e,now:t,dist:i-t})}var r=[];if("number"==typeof e)o(e);else{if(!t.isArray(e))throw new t.Exception("Unexpected param (must be number/array).");e.forEach(function(e){o(e)})}var a=0,l=g.nav.scroll,s=l.style.overflowX,d=l.style.overflowY;0===t.sw(l)&&(l.style.overflowY="hidden"),window.requestAnimationFrame(function e(t){a||(a=t);var n=Math.min(1,(t-a)/200);0===n&&(n=.1),r.forEach(function(e){g.rowlist[e.i].forcedHeight=e.now+e.dist*n}),g.$n(),n<1?window.requestAnimationFrame(e):(l.style.overflowX=s,l.style.overflowY=d,"function"==typeof i&&i())})},this.Yk=function(e){return new t.Row(e,g)},this.Nj=function(e,n){var i=g.Bj[n=n||"main"].rowlist[e];if(i.events||i.resetEvents(),!i.data){i.data={},i.data.start=new t.Date(i.start),i.data.startTicks=i.data.start.getTime();var o=this.Sj().getTime()-this.kb().getTime();i.data.end=H._n()?i.data.start.addTime(o):i.data.start.addDays(1),i.data.endTicks=i.data.end.getTime(),i.data.offset=i.start.getTime()-this.kb().getTime(),i.data.i=e,i.data.grid=n}},this.ao={},this.Ma=function(e){if(e?this.events.list=e:this.events.list||(this.events.list=[]),null!=this.events.list&&!t.isArray(this.events.list))throw new t.Exception("DayPilot.Scheduler.events.list expects an array object");E.prepareRows(!0);var n,i=this.events.list,o="function"==typeof this.onBeforeEventRender,r="Resources"===g.viewType;g.ao={};for(var a=0;a<i.length;a++){var l=i[a];if(l){if("object"!=typeof l)throw new t.Exception("Event data item must be an object");if(!l.start)throw new t.Exception("Event data item must specify 'start' property");if(l instanceof t.Event)throw new t.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.");var s="string"==typeof l.id||"number"==typeof l.id,d="string"==typeof l.recurrentMasterId||"number"==typeof l.recurrentMasterId;if(!s&&!(d="string"==typeof l.recurrentMasterId||"number"==typeof l.recurrentMasterId))throw new t.Exception("All events must have an id property (string or number)");if(!g.temp.allowDuplicateEventIds){var c="_"+l.id;if(!s&&d&&(c="#"+l.recurrentMasterId+"#"+new t.Date(l.start)),g.ao[c])throw new t.Exception("Duplicate event IDs are not allowed: "+c);g.ao[c]=!0}"Milestone"===l.type&&(l.end=l.start),o&&this.qe(a),"*"===l.resource?n=g.rowlist:r?n=g.bo(l.resource).concat(g.bo("*")):"Days"===g.viewType?n=g.rowlist:"Gantt"===g.viewType&&(n=g.bo(l.id));for(var u=0;n&&u<n.length;u++){var h=this.em(l,n[u]);h&&o&&(h.cache=this.P.events[a])}}}g.Mj().forEach(function(e){g.jm(e)}),g.kk()},this.co={};var E=this.co;E.rowcache={},E.prepareRows=function(e){E.rowcache={};for(var n=g.Mj(),i=0;i<n.length;i++){var o=n[i];if(e&&o.resetEvents(),g.Nj(o.index,o.grid),o.id){var r=typeof o.id+"_"+o.id;E.rowcache[r]||(E.rowcache[r]=t.list()),E.rowcache[r].push(o)}}},E.loadEvent=function(e){},this.bo=function(e){return t.list(E.rowcache[typeof e+"_"+e])},this.dm=function(){var e={};if("Resources"!==g.viewType)return!1;for(var t=0;t<g.rowlist.length;t++){var n=g.rowlist[t].id;if(e[n])return!0;e[n]=!0}return!1},this.qe=function(e){var n=this.P.events,i=this.events.list[e],o={};for(var r in i instanceof t.Event&&(i=i.data),i)o[r]=i[r];if("string"==typeof o.start&&(o.start=new t.Date(o.start)),"string"==typeof o.end&&(o.end=new t.Date(o.end)),"function"==typeof this.onBeforeEventRender){var a={};a.e=o,a.data=o,this.onBeforeEventRender(a)}n[e]=o},this.do=function(e){var t=e.data.container,n=typeof t;return"string"!==n&&"number"!==n?null:typeof t+"_"+t},this.jm=function(e){if(e.lines=[],e.sections=null,!e.isNewRow){if(this.sortDirections?e.events.sort(this.Ie):g.yi||e.events.sort(this.He),e.containerCache={},e.containers=[],e.events.forEach(function(t){var n=g.do(t);if(n){var i=e.containerCache[n];i||(e.containerCache[n]=i={events:[],line:null,start:null,end:null,left:null,width:null},e.containers.push(i)),t.part.container=i,i.events.push(t)}}),e.containers.forEach(function(e){var t=e.events[0],n=e.events[e.events.length-1];e.start=t.part.start,e.end=n.part.end,e.left=t.part.left,e.width=n.part.right-t.part.left,e.right=n.part.right}),g.yi)return void I.jm(e);var n=g.groupConcurrentEvents;if(n)for(var i=0;i<e.blocks.length;i++)e.blocks[i].clear();t.list(e.events).forEach(function(t){if(!t.part.height)return e.eventHeight?void(t.part.height=e.eventHeight):void(t.part.height=H.Dl())}),e.events.filter(function(e){return"number"==typeof e.data.line}).forEach(function(t){e.putIntoLine(t)});for(var o=0;o<e.events.length;o++)e.putIntoLine(s=e.events[o]),n&&e.putIntoBlock(s);var r=0;for(i=0;i<e.lines.length;i++)(d=e.lines[i]).top=r,r+=(d.height||e.eventHeight)*e.eventStackingLineHeight/100;if(n)for(o=0;o<e.blocks.length;o++){var a=e.blocks[o];a.lines=[],a.events.sort(this.Ie);for(var l=0;l<a.events.length;l++){var s;a.putIntoLine(s=a.events[l])}for(a.lines.length<=g.groupConcurrentEventsLimit&&(a.expanded=!0),t.list(a.events).map(function(e){return e.id()}).some(function(e){return t.contains(g.eo,e)})&&(a.expanded=!0),r=0,i=0;i<a.lines.length;i++){var d;(d=a.lines[i]).top=r,r+=(d.height||e.eventHeight)*e.eventStackingLineHeight/100}}}},this.jk=function(e){e=t.ua(e),(e=g.Ik(e)).forEach(function(e){g.jm(e)}),g.yi?I.fo():e.forEach(function(e){g.Ym(e)})},this.vm=function(){var e="Manual"===g.scale?g.itline[0].start:g.startDate;return t.list(g.rowlist).some(function(n){return!!n.start&&n.start.getTime()!==new t.Date(e).getTime()})},this.em=function(e,n){if(!n.hideEvents){var i=new t.Date(e.start),o=new t.Date(e.end);o=g.Ng(o);var r=i.ticks,a=o.ticks;if(a<r)return null;var l=null;if("function"==typeof g.onBeforeEventRender){var s=t.indexOf(g.events.list,e);l=g.P.events[s]}if(l){if(l.hidden)return null}else if(e.hidden)return null;var d=!1;switch(this.viewType){case"Days":d=!(a<=n.data.startTicks||r>=n.data.endTicks)||r===a&&r===n.data.startTicks;break;case"Resources":d=(n.id===e.resource||"*"===n.id||"*"===e.resource)&&(!(a<=n.data.startTicks||r>=n.data.endTicks)||r===a&&r===n.data.startTicks);break;case"Gantt":d=n.id===e.id&&!(a<=n.data.startTicks||r>=n.data.endTicks)}if(!d)return null;var c=new t.Event(e,g);c.part.dayIndex=n.data.i,c.part.grid=n.data.grid,c.part.start=n.data.startTicks<r?i:n.data.start,c.part.end=n.data.endTicks>a?o:n.data.end;var u=this.getPixels(c.part.start.addTime(-n.data.offset)),h=this.getPixels(c.part.end.addTime(-n.data.offset));c.part.start===c.part.end&&(h=this.getPixels(c.part.end.addTime(-n.data.offset).addMilliseconds(1))),l&&l.height?c.part.height=l.height:e.height&&(c.part.height=e.height),c.part.go=function(){var e=this.height;if(g.eventVersionsEnabled&&!t.list(c.versions).isEmpty()){var n=c.versions.length;e+=n*g.eventVersionHeight,e+=n*g.eventVersionMargin}return e+g.eventMarginBottom};var p=u.left,f=h.left;if(c.part.startPixels=u,c.part.endPixels=h,p===f){if(u.cut||h.cut)return null;var m=(c.part.start.addTime(-n.data.offset).getTime()+c.part.end.addTime(-n.data.offset).getTime())/2;if(g.getPixels(new t.Date(Math.floor(m))).cut)return null}if(c.part.box=H.El(a-r),"Milestone"===e.type){var v=e.width||g.eventHeight;c.part.end=c.part.start,c.part.left=p-v/2,c.part.width=v,c.part.barLeft=0,c.part.barWidth=v}else if(c.part.box){var y=u.boxLeft,b=h.boxRight;c.part.left=y,c.part.width=b-y,c.part.barLeft=t.Util.atLeast(p-c.part.left,0),c.part.barWidth=t.Util.atLeast(f-p,1)}else c.part.left=p,c.part.width=t.Util.atLeast(f-p,1),c.part.barLeft=0,c.part.barWidth=t.Util.atLeast(f-p-1,1);if(c.part.width=Math.max(c.part.width,g.eventMinWidth),c.part.right=c.part.left+c.part.width,c.cache=l,g.eventVersionsEnabled&&g.ho(c,n),"function"==typeof g.onEventFilter&&g.events.Ge){var w={};if(w.filter=g.events.Ge,w.filterParam=g.events.Ge,w.visible=!0,w.e=c,g.onEventFilter(w),!w.visible)return null}return n.events.push(c),c}},this.ho=function(e,n){e.versions=[];var i=t.list((e.cache||e.data).versions);if(!i.isEmpty()){var o=e.part.left,r=e.part.left+e.part.width;i.forEach(function(i){var a=new t.Date(i.start),l=new t.Date(i.end),s=g.getPixels(a.addTime(-n.data.offset)),d=g.getPixels(l.addTime(-n.data.offset));a.ticks===l.ticks&&(d=g.getPixels(l.addTime(-n.data.offset).addTime(1)));var c=s.left,u=d.left;if(c===u&&(s.cut||d.cut))return null;var h={};h.left=c,h.continueLeft=a<n.data.start,h.right=u,h.continueRight=l>n.data.end,h.width=u-c,e.versions.push(h),h.left<o&&(o=h.left),h.right>r&&(r=h.right)}),g.eventVersionsReserveSpace?(e.part.versionsLeft=o,e.part.versionsRight=r,e.part.versionsWidth=r-o):(e.part.versionsLeft=e.part.left,e.part.versionsRight=e.part.left+e.part.width,e.part.versionsWidth=e.part.width)}},this.He=function(e,t){if(!(e&&t&&e.start&&t.start))return 0;var n=e.start().ticks-t.start().ticks;return 0!==n?n:t.end().ticks-e.end().ticks},this.Ie=function(e,t){if(!e||!t)return 0;var n=e.cache||e.data,i=t.cache||t.data;if(!(n.sort&&n.sort.length>0&&i.sort&&i.sort.length>0))return g.He(e,t);for(var o=0,r=0;0===o&&"undefined"!=typeof n.sort[r]&&"undefined"!=typeof i.sort[r];)o=n.sort[r]===i.sort[r]?0:"number"==typeof n.sort[r]&&"number"==typeof i.sort[r]?n.sort[r]-i.sort[r]:g.Je(n.sort[r],i.sort[r],g.sortDirections[r]),r++;return o},this.Je=function(e,t,n){var i="desc"!==n?-1:1,o=-i;if(null===e&&null===t)return 0;if(null===t)return o;if(null===e)return i;var r=[];return r[0]=e,r[1]=t,r.sort(),e===r[0]?i:o},this.bl=function(e,n,i,o){if(g.cb()){var r=t.indexOf(g.rowlist,e),a=g.Yk(e,r),l=(c=-1!==t.indexOf(k.selected,e))?"deselected":"selected",s={};if(s.row=a,s.selected=c,s.ctrl=n,s.shift=i,s.meta=o,s.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onRowSelect&&(g.onRowSelect(s),s.preventDefault.value))return;var d=i&&!n&&!o;switch(i||(k.io={row:e,index:r}),d&&(k.fixRowSelectLast(),k.selectRange(k.io.index,r)),g.rowSelectHandling){case"PostBack":g.rowSelectPostBack(a,l);break;case"CallBack":g.rowSelectCallBack(a,l);break;case"Notify":!d&&k.select(e,n,i,o),g.rowSelectNotify(a,l);break;case"Update":!d&&k.select(e,n,i,o)}"function"==typeof g.onRowSelected&&(s.selected=-1!==t.indexOf(k.selected,e),g.onRowSelected(s))}else{var c;switch(k.select(e,n,i),r=t.indexOf(g.rowlist,e),a=g.Yk(e,r),l=(c=-1!==t.indexOf(k.selected,e))?"deselected":"selected",g.rowSelectHandling){case"PostBack":g.rowSelectPostBack(a,l);break;case"CallBack":g.rowSelectCallBack(a,l);break;case"Notify":g.rowSelectNotify(a,l);break;case"JavaScript":g.onRowSelect(a,l)}}},this.rowSelectPostBack=function(e,t,n){var i={};i.resource=e,i.change=t,this.fa("RowSelect",i,n)},this.rowSelectCallBack=function(e,t,n){var i={};i.resource=e,i.change=t,this.ha("RowSelect",i,n)},this.rowSelectNotify=function(e,t,n){var i={};i.resource=e,i.change=t,this.ha("RowSelect",i,n,"Notify")},this.rows={},this.rows.selection={};var _=this.rows.selection;_.P=[],_.get=function(){var e=[];return t.list(k.selected).forEach(function(t){e.push(g.Yk(t))}),e},_.clear=function(){k.clearSelection()},_.add=function(e){if(!e||!e.isRow)throw new t.Exception("DayPilot.Scheduler.rows.selection.add(): DayPilot.Row object expected");t.list(k.selected).some(function(t){return t===e.$.row})||(k.selected.push(e.$.row),_.jo(),k.ci(e.$.row))},_.remove=function(e){if(!e||!e.isRow)throw new t.Exception("DayPilot.Scheduler.rows.selection.remove(): DayPilot.Row object expected");_.isSelected(e)&&(t.rfa(k.selected,e.$.row),_.jo(),k.ci(e.$.row))},_.isSelected=function(e){if(!e||!e.isRow)throw new t.Exception("DayPilot.Scheduler.rows.selection.isSelected(): DayPilot.Row object expected");return-1!==t.indexOf(k.selected,e.$.row)},_.jo=function(){g.selectedRows=t.list(k.selected).map(function(e){return e.id}),_.P=[],k.selected.forEach(function(e){_.P[e.index]=!0})},this.rows.all=function(){for(var e=t.list(),n=0;n<g.rowlist.length;n++){var i=g.Yk(g.rowlist[n]);e.push(i)}return e},this.rows.visible=function(){for(var e=t.list(),n=0;n<g.rowlist.length;n++)if(!(i=g.rowlist[n]).hidden){var i=g.Yk(g.rowlist[n]);e.push(i)}return e},this.rows.each=function(e){g.rows.all().forEach(e)},this.rows.forEach=function(e){g.rows.all().forEach(e)},this.rows.filter=function(e,t){g.rows.Ge=e,t||g.S&&g.Jc({immediateEvents:!0})},Object.defineProperty(g.rows,"filterParam",{get:function(){return g.rows.Ge}}),this.rows.sort=function(e){var n=g.rows.sortParam;if("string"==typeof e)g.rows.ko={field:e,order:"asc"};else if("object"==typeof e){var i=t.Util.copyProps(e);i.order||(i.order="asc"),g.rows.ko=i}else g.rows.ko=null;if(g.S&&g.Jc({immediateEvents:!0}),"function"==typeof g.onRowSorted){var o={};o.oldSortParam=n,g.onRowSorted(o)}},Object.defineProperty(g.rows,"sortParam",{get:function(){return{order:g.rows.lo(),field:g.rows.mo()}}}),this.rows.mo=function(){var e=g.rows.ko;return e?e.field:null},this.rows.lo=function(){var e=g.rows.ko;return e?e.order:"asc"},this.rows.find=function(e,n){if("string"==typeof e||"number"==typeof e||!e&&n){var i=g.bo(e);e||(i=g.rowlist);var o=null;return"string"==typeof n||n instanceof t.Date?(n=new t.Date(n),o=i.find(function(e){return n===e.start})):o=i.first(),o?new t.Row(o,g):null}if("function"!=typeof e)throw new t.Exception("Invalid rows.find() argument: id or function expected");var r=n||0,a=g.rowlist.find(function(t,n){return!(n<r)&&e(g.Yk(t))});if(a)return g.Yk(a)},this.rows.load=function(e,n,i){if(!e)throw new t.Exception("rows.load(): 'url' parameter required");var o=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},r=function(e){var i,r=e.request;try{i=JSON.parse(r.responseText)}catch(e){var a={};return a.exception=e,void o(a)}if(t.isArray(i)){var l={preventDefault:function(){this.preventDefault.value=!0}};if(l.data=i,"function"==typeof n&&n(l),l.preventDefault.value)return;g.resources=l.data,g.S&&g.update()}};g.rowsLoadMethod&&"POST"===g.rowsLoadMethod.toUpperCase()?t.ajax({method:"POST",url:e,success:r,error:o}):t.ajax({method:"GET",url:e,success:r,error:o})},this.rows.expand=function(e){for(var t=[],n=e||1,i=0;i<g.rowlist.length;i++){var o=g.rowlist[i],r=-1===n;o.level<n&&(r=!0),r&&!o.expanded&&o.children&&o.children.length>0&&t.push(o.index)}if(0!==t.length)if(1===t.length)g.Mm(t[0]);else{for(i=0;i<t.length;i++)g.rowlist[t[i]].resource.expanded=!0;g.Jc()}},this.rows.expandAll=function(){g.rows.expand(-1)},this.rows.collapseAll=function(){g.rowlist.forEach(function(e){e.resource.expanded=!1}),g.Jc()},this.rows.headerHide=function(){g.no=!0,g.oo(),g.Fn(),g.Dj()},this.rows.headerShow=function(){g.no=!1,g.oo(),g.Fn(),g.Dj()},this.rows.headerToggle=function(){g.no?g.rows.headerShow():g.rows.headerHide()},this.rows.edit=function(e){k.edit(e.$.row)},this.rows.remove=function(e){if("number"!=typeof e&&"string"!=typeof e){var n=e.$.row.resource,i=A.findParentArray(n);if(!i)throw new t.Exception("Cannot find source node parent");var o=t.indexOf(i,n);i.splice(o,1),g.update()}else{var r=g.rows.find(e);if(!r)throw new t.Exception("The row to be removed was not found");g.rows.remove(r)}},this.rows.add=function(e){g.resources.push(e),g.Jc()},this.rows.addChild=function(e,n){if("number"!=typeof e&&"string"!=typeof e||(e=g.rows.find(e)),e){if(!(e instanceof t.Row||(e=g.rows.find((n=e).id))))return;e.data.children||(e.data.children=[]),e.data.children.push(n),g.Jc()}},this.rows.update=function(e){if(!(e instanceof t.Row||"object"==typeof e))throw new t.Exception("DayPilot.Scheduler.rows.update() expects a DayPilot.Row object or a data object.");if(!(e instanceof t.Row)){var n=e;if(!(e=g.rows.find(n.id)))return;e.data=n}var i=e.index,o=g.zl(e.grid).rowlist,r=o[i],a=e.data,l=e.parent()?e.parent().$.row:null,s=g.po(a);(e=g.qo(s,l)).hidden=r.hidden,e.level=r.level,e.children=r.children,e.index=i,e.top=r.top,e.height=r.height,e.grid=r.grid,o[i]=e,e.resetEvents(),g.Nj(e.index,e.grid),g.ro(e),g.jm(e),g.Hk(e.index,e.grid),g.Oi(),g.Ri()},this.ro=function(e){for(var n=g.events.list,i=n.length,o="function"==typeof g.onBeforeEventRender,r=0;r<i;r++){var a=n[r];if(a){if(a instanceof t.Event)throw new t.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.");if("Days"===g.viewType)throw new t.Exception(".rows.update() not supported for viewType = 'Days'.");if("Gantt"===g.viewType)throw new t.Exception(".rows.update() not supported for viewType = 'Gantt'.");if("*"===a.resource||"*"===e.id||a.resource===e.id){o&&this.qe(r);var l=this.em(a,e);l&&o&&(l.cache=this.P.events[r])}}}},this.so=function(){var e=c.source,t=c.target,n=c.position,i=c.sourceCalendar;if(k.resetMoving(),g.cb()){var o={};if(o.source=g.Yk(e),o.source.calendar=i,o.target=g.Yk(t),o.position=n,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onRowMove&&(g.onRowMove(o),o.preventDefault.value))return;switch(g.rowMoveHandling){case"Update":k.move(o);break;case"CallBack":g.rowMoveCallBack(o.source,o.target,o.position);break;case"PostBack":g.rowMovePostBack(o.source,o.target,o.position);break;case"Notify":k.move(o),g.rowMoveNotify(o.source,o.target,o.position)}"function"==typeof g.onRowMoved&&g.onRowMoved(o)}else switch(e=g.Yk(e),t=g.Yk(t),n=n,g.rowMoveHandling){case"CallBack":g.rowMoveCallBack(e,t,n);break;case"PostBack":g.rowMovePostBack(e,t,n);break;case"JavaScript":g.onRowMove(e,t,n)}},this.Wi=function(e){var n=t.list(e);k.selected=[],n.isEmpty()||(g.wi=!1,g.La()),n.forEach(function(e){var t=g.fj(e);t&&k.selected.push(t)}),k.uo()},this.cl={};var k=this.cl;k.edit=function(e){k.vo(e)},k.rowSelectLastSetDefault=function(){k.io={row:g.rowlist[0],index:0}},k.rowSelectSetLast=function(e){var n=t.indexOf(g.rowlist,e);if(-1===n)throw new t.Exception("DayPilot.Scheduler: Row not found when selecting a range");k.io={row:e,index:n}},k.fixRowSelectLast=function(){k.io||k.rowSelectLastSetDefault();var e=t.indexOf(g.rowlist,k.io.row);if(!(e>-1)){var n=g.fj(k.io.row.id);n?(e=t.indexOf(g.rowlist,n),k.io={row:n,index:e}):k.rowSelectLastSetDefault()}},k.createOverlay=function(e){var n=g.An(),i=g.G("_rowmove_source"),o=t.Util.div(g.divHeader,0,e.top,n,e.height);o.className=i,e.moveOverlay=o},k.deleteOverlay=function(e){e&&(t.de(e.moveOverlay),e.moveOverlay=null)},k.vo=function(e){var n=k.wo(e).cells[0];if(n.input)return n.input;t.Areas.disable(n.firstChild);var i=n.clientWidth;e.isNewRow&&(i=g.uj());var o=document.createElement("input");o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.width=i+"px",o.style.height=e.height-1+"px",o.style.border="0px none",o.style.overflow="hidden",o.style.boxSizing="border-box",o.style.resize="none",o.style.paddingLeft=e.level*g.treeIndent+"px",o.style.outline="none";var r=n.textDiv;o.style.fontFamily=t.gs(r,"fontFamily")||t.gs(r,"font-family"),o.style.fontSize=t.gs(r,"fontSize")||t.gs(r,"font-size"),o.value=e.name||"",n.firstChild.appendChild(o),n.input=o;var a=function(){try{n.input.parentNode.removeChild(n.input)}catch(e){}n.input=null};return o.focus(),o.onblur=function(){o.onblur=null;var i=o.value;a(),t.Areas.enable(n.firstChild),g.$k(e,i,o.canceled)},o.onkeydown=function(e){var t=e.keyCode;return 27===t&&(o.canceled=!0,a()),13!==t||(o.onblur(),!1)},o.setSelectionRange?o.setSelectionRange(0,9999):o.select(),o},k.selected=[],k.select=function(e,n,i,o){var r=-1!==t.indexOf(k.selected,e);if(n||o){if(r)return t.rfa(k.selected,e),_.jo(),void k.ci(e)}else r=!1,k.clearSelection();r||k.selected.push(e),_.jo(),k.ci(e)},k.selectRange=function(e,t){k.clearSelection();for(var n=Math.min(e,t),i=Math.max(e,t),o=n;o<=i;o++)k.selected.push(g.rowlist[o]);for(_.jo(),o=n;o<=i;o++)k.ci(g.rowlist[o])},k.uo=function(){for(var e=0;e<k.selected.length;e++)k.ci(k.selected[e])},k.ci=function(e){var n=t.indexOf(g.rowlist,e);if(-1===n){var i=g.fj(e.id);if(!i)return;n=i.index}g.Nk(n),g.Ri(),g.Al(n),g.Hn(n)},k.kl=function(){var e=[];if(!k.selected)return e;for(var n=0;n<k.selected.length;n++){var i=k.selected[n],o=t.indexOf(g.rowlist,i),r=g.Yk(i,o);e.push(r.toJSON())}return e},k.io=null,k.clearSelection=function(){var e=k.selected;if(k.selected=[],g.selectedRows=[],_.P=[],e.length<=5)e.forEach(function(e){k.ci(e)});else{g.Oi(),g.Ri();for(var t=0;t<g.rowlist.length;t++)g.divHeader.rows[t]&&g.Hk(t)}},k.wo=function(e){for(var t=g.divHeader,n=0;n<t.rows.length;n++){var i=t.rows[n];if(i&&i.cells[0]&&i.cells[0].row===e)return i}return null},k.xo=function(e){var n=t.Global.rowmoving;n.row=e,n.sourceCalendar=g,n.cursor=g.divResScroll.style.cursor,g.divResScroll.style.cursor="move",k.createOverlay(e)},k.resetMoving=function(){g.divResScroll.style.cursor=c.cursor,t.de(c.div),k.deleteOverlay(c.row),t.Global.rowmoving=c={}},k.yo=function(e){var n=t.mo3(g.divHeader,e),i=g.rl(n.y),o=g.rowlist[i.i];if(o&&!o.isNewRow){var r=g.rowMoveSameLevelOnly,a=n.y-i.top,l=i.bottom-i.top,s=l/3,u=2*s,h=l/2,p="before",f=o.children&&o.children.length>0,m=f&&o.expanded,v=function(){for(var e=i.i,t=o.level;e>=0;){var n=g.rowlist[e];if(e--,!(t<=n.level)){if(n===c.row)return!0;if(0===n.level)return!1;t=n.level}}return!1}(),y=o;if(v||i.i===c.row.index&&!r)p="forbidden";else if(g.treeEnabled)if(r){var b=c.row.level,w=o.level;if(w===b-1)p="child";else if(b!==w)if(b===w-1){var C=o.zo;o.index===C.children[C.children.length-1]?(y=C,p="after"):p="forbidden"}else p="forbidden";else p=a<h?"before":f&&m?"before":"after"}else p=f&&m?a<h?"before":"child":a<s?"before":a<u?"child":"after";else p=f?"before":a<h?"before":"after";if(c.row.moveDisabled&&(p="forbidden"),c.calendar=g,c.source=c.row,c.target=y,c.position=p,c.last&&c.last.target===c.target&&c.last.position===c.position)c.last&&(c.position=c.last.position);else if("function"==typeof g.onRowMoving){var x={};x.source=g.Yk(c.source),x.target=g.Yk(c.target),x.position=p,g.onRowMoving(x),c.position=x.position}c.last={},c.last.target=c.target,c.last.position=c.position,function(){c.div&&t.de(c.div);var e=i.top,n=c.position,o=g.rowlist[i.i].level*g.treeIndent;switch(n){case"before":e=i.top;break;case"child":e=i.top+h;break;case"after":e=i.bottom;break;case"forbidden":e=i.top+h}var r=g.An()-o,a=d();a.style.position="absolute",a.style.left=o+"px",a.style.width=r+"px",a.style.top=e+"px",a.className=g.G("_rowmove_position_"+n),c.div=a,g.divResScroll.appendChild(a)}()}},k.move=function(e){var n=e.source.$.row.resource,i=e.target.$.row.resource,o=e.position;if(n!==i&&"forbidden"!==o){var r=e.source.calendar.Ao.findParentArray(n);if(!r)throw new t.Exception("Cannot find source node parent");var a=t.indexOf(r,n);r.splice(a,1);var l=A.findParentArray(i);if(!l)throw new t.Exception("Cannot find target node parent");var s=t.indexOf(l,i);switch(o){case"before":l.splice(s,0,n);break;case"after":l.splice(s+1,0,n);break;case"child":i.children||(i.children=[],i.expanded=!0),i.children.push(n)}g.update()}};var D={};this.Bo=D,D.Ff=function(e){};var A={};this.Ao=A,A.findParentArray=function(e){return A.findInArray(g.resources,e)},A.findInArray=function(e,n){if(-1!==t.indexOf(e,n))return e;for(var i=0;i<e.length;i++){var o=e[i];if(o.children&&o.children.length>0){var r=A.findInArray(o.children,n);if(r)return r}}return null},this.Ii=function(){var e=this.resources,n=this.I();if(n||("Gantt"===this.viewType?e=this.Co():"Days"===this.viewType&&(e=this.Do())),!n||"Days"!==this.viewType||e&&0!==e.length||(e=this.Do()),null!=e&&!t.isArray(e))throw new t.Exception("DayPilot.Scheduler.resources expects an array object");var i=(e=e||[]).filter(function(e){return"top"!==e.frozen&&"bottom"!==e.frozen});g.rowlist=t.list(),this.Eo(i,{i:0},0,null,this.treeEnabled,!1,"main");var o=e.filter(function(e){return"string"==typeof e.frozen&&"top"===e.frozen.toLowerCase()});g.Bj.top.rowlist=t.list(),g.Bj.top.height=0,this.Eo(o,{i:0},0,null,!1,!1,"top");var r=e.filter(function(e){return"string"==typeof e.frozen&&"bottom"===e.frozen.toLowerCase()});g.Bj.bottom.rowlist=t.list(),g.Bj.bottom.height=0,this.Eo(r,{i:0},0,null,!1,!1,"bottom"),"Disabled"!==g.rowCreateHandling&&this.Fo()},this.Fo=function(){var e={id:"NEW",isNewRow:!0,html:""};e.index=g.rowlist.length,e.loaded=!0,e.start=this.startDate,e.children=[],e.height=g.eventHeight,e.marginBottom=0,e.marginTop=0,e.getHeight=function(){return g.rowCreateHeight?g.rowCreateHeight:g.eventHeight+g.rowMarginBottom+g.rowMarginTop},e.putIntoLine=function(){},e.resetEvents=function(){},this.rowlist.push(e)},this.Co=function(){var e=[];if(this.Di&&this.resources)for(var t=0;t<this.resources.length;t++)e.push(this.resources[t]);if(this.events.list){for(t=0;t<this.events.list.length;t++){var n=this.events.list[t],i={};i.id=n.id,i.name=n.text,i.columns=n.columns,e.push(i)}return e}},this.Do=function(){for(var e=[],t=g.kb(),n=this.ea.Uj(),i=0;i<this.days;i++){var o=t.addDays(i);if(g.showNonBusiness||g.businessWeekends||0!=o.dayOfWeek()&&6!=o.dayOfWeek()){var r={};r.name=o.toString(n.datePattern,n),r.start=o,e.push(r)}}return e},this.kb=function(){return this.itline&&this.itline.length>0?this.itline[0].start:new t.Date(this.startDate)},this.Sj=function(){if(this.itline&&this.itline.length>0){var e=g.itline[this.itline.length-1].end;return"Days"!==g.viewType?e:e.addDays(g.days-1)}return new t.Date(g.startDate).addDays(g.days)},this.visibleStart=function(){return this.kb()},this.visibleEnd=function(){return this.Sj()},this.qo=function(e,n){var i={};if(i.backColor=e.backColor,i.fontColor=e.fontColor,i.cssClass=e.cssClass,i.expanded=e.expanded,i.name=e.name,i.html=g.ca(e.name,e.html),i.eventHeight="undefined"!=typeof e.eventHeight?e.eventHeight:g.ea.Dl(),i.minHeight="undefined"!=typeof e.minHeight?e.minHeight:g.rowMinHeight,i.marginBottom="undefined"!=typeof e.marginBottom?e.marginBottom:g.rowMarginBottom,i.marginTop="undefined"!=typeof e.marginTop?e.marginTop:g.rowMarginTop,i.eventStackingLineHeight="undefined"!=typeof e.eventStackingLineHeight?e.eventStackingLineHeight:g.eventStackingLineHeight,i.loaded=!e.dynamicChildren,i.id=e.id||e.value,i.toolTip=e.toolTip,i.children=[],i.columns=[],i.start=e.start?new t.Date(e.start):this.kb(),i.isParent=e.isParent,i.contextMenu=e.contextMenu?t.Util.evalVariable(e.contextMenu):this.contextMenuResource,i.areas=e.areas,i.moveDisabled=e.moveDisabled,i.bubbleHtml=e.bubbleHtml,i.cellsDisabled=e.cellsDisabled,i.tags=e.tags,i.task=e.task,i.swimlane=e.swimlane,i.hideEvents=e.hideEvents,i.height=i.eventHeight,i.level=0,i.resource=e.Go,i.lines=[],i.blocks=[],i.containers=[],i.containerCache={},i.isRow=!0,i.getHeight=function(){var e=0;if(g.groupConcurrentEvents)for(var t=0;t<this.blocks.length;t++)e=Math.max(e,this.blocks[t].getHeight());else if(this.lines.length>0){var n=this.lines[this.lines.length-1];e=(n.top||0)+(n.height||this.eventHeight)}return 0===e&&(e=this.eventHeight),e>this.minHeight?e:this.minHeight},i.Bm=function(){var e=i.start.getTime()-g.kb().getTime();return g.itline[g.itline.length-1].end.addTime(e)},i.resetEvents=function(){var e=this;e.events=t.list(),e.events.forRange=function(n,i){n=new t.Date(n),i=i?new t.Date(i):e.Bm();for(var o=t.list(),r=0;r<e.events.length;r++){var a=e.events[r],l=g.Ng(a.end());t.Util.overlaps(a.start(),l,n,i)&&o.push(a)}return o}},i.calculateUtilization=function(){for(var e=this,n=e.sections=function(){for(var n=function(){for(var n=[],i=0;i<e.events.length;i++){var o=e.events[i];t.contains(n,o.start().toString())||n.push(o.start().toString()),t.contains(n,o.rawend().toString())||n.push(o.rawend().toString())}return n.sort(),n}(),i=[],o={start:e.data.start},r=0;r<n.length;r++)o.end=new t.Date(n[r]),i.push(o),o={start:new t.Date(n[r])};return o.end=e.data.end,i.push(o),i.forRange=function(e,n){for(var i=t.list(),o=0;o<this.length;o++){var r=this[o];t.Util.overlaps(e,n,r.start,r.end)&&i.push(r)}return i.maxSum=function(e){for(var t=0,n=0;n<this.length;n++){var i=this[n].sum(e);i>t&&(t=i)}return t},i},i}(),i=0;i<n.length;i++){var o=n[i];o.events=t.list();for(var r=0;r<e.events.length;r++){var a=e.events[r];t.Util.overlaps(o.start,o.end,a.start(),a.rawend())&&o.events.push(a)}o.sum=function(e){for(var t=0,n=0;n<this.events.length;n++){var i=this.events[n],o=0;"undefined"==typeof e?o=1:i.tag(e)?o=i.tag(e):i.data[e]&&(o=i.data[e]),"number"==typeof o&&(t+=o)}return t}}},i.Ho=function(){var e=[];return e.height=0,e.add=function(t){this.push(t);var n=t.part.go();n>e.height&&(e.height=n)},e.isFree=function(e,n,i){for(var o=e+n-1,r=this.length,a=0;a<r;a++){var l=this[a];if(!l.data.nonBlocking){if(!(o<l.part.left||e>l.part.left+l.part.width-1)){if(t.contains(i,l.data))continue;return!1}if(l.part.container&&!(o<l.part.container.left||e>l.part.container.left+l.part.container.width-1))return!1;if(g.eventVersionsReserveSpace&&!(o<l.part.versionsLeft||e>l.part.versionsRight-1))return!1}}return!0},e},i.findFreeLine=function(e,t,n){if("number"==typeof n){for(var o=0;o<=n;o++)this.lines[o]||(this.lines[o]=i.Ho());return n}if("dedicated"===n)return(r=i.Ho()).isFree=function(){return!1},this.lines.push(r),this.lines.length-1;for(o=0;o<this.lines.length;o++)if((r=this.lines[o]).isFree(e,t))return o;var r=i.Ho();return this.lines.push(r),this.lines.length-1},i.putIntoLine=function(e){var t=e.part.container;if(t){if(null===t.line&&("number"==typeof e.data.line||"dedicated"===e.data.line))return n=i.findFreeLine(t.left,t.width,e.data.line),this.lines[n].add(e),t.line=n,n}else if("number"==typeof e.data.line||"dedicated"===e.data.line)return n=i.findFreeLine(e.part.left,e.part.width,e.data.line),this.lines[n].add(e),n;var n=-1;if(t){if(null!==t.line)return this.lines[t.line].add(e),t.line;n=i.findFreeLine(t.left,t.width),t.line=n}else n=g.eventVersionsReserveSpace?i.findFreeLine(e.part.versionsLeft,e.part.versionsWidth):i.findFreeLine(e.part.left,e.part.width);return this.lines[n].add(e),n},i.putIntoBlock=function(e){for(var n=0;n<this.blocks.length;n++){if(-1!==t.indexOf((i=this.blocks[n]).events,e))return;if(i.overlapsWith(e.part.left,e.part.width))return i.events.push(e),e.part.block=i,i.min=Math.min(i.min,e.part.left),i.max=Math.max(i.max,e.part.left+e.part.width),n}var i;(i={expanded:!1}).row=this,i.events=t.list(),i.lines=t.list(),i.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++)if((n=this.lines[t]).isFree(e.part.left,e.part.width))return n.add(e),t;var n;(n=[]).height=0,n.add=function(e){this.push(e),e.part.height>n.height&&(n.height=e.part.height)},n.isFree=function(e,t){for(var n=e+t-1,i=this.length,o=0;o<i;o++){var r=this[o];if(!(n<r.part.left||e>r.part.left+r.part.width-1))return!1}return!0},n.add(e),this.lines.push(n)},i.overlapsWith=function(e,t){return!(e+t-1<this.min||e>this.max-1)},i.getHeight=function(){if(!this.expanded)return g.eventHeight;if(this.lines.length>0){var e=this.lines[this.lines.length-1];return(e.top||0)+(e.height||g.eventHeight)}return g.eventHeight},i.clear=function(){i.events=t.list(),i.min=null,i.max=null},i.events.push(e),e.part.block=i,i.min=e.part.left,i.max=e.part.left+e.part.width,this.blocks.push(i)},i.Io=!1,i.zo=n,i.Pc=function(){this.hidden=!this.Jo(),this.Io=!1,this.zo&&this.zo.Pc()},i.Jo=function(){return!this.zo||this.zo.Jo()&&this.zo.expanded},e.columns)for(var o=0;o<e.columns.length;o++)i.columns.push(e.columns[o]);return i},this.yk=function(){g.rowlist.forEach(function(e){if(!e.isNewRow&&"function"==typeof g.onRowFilter&&g.rows.Ge){var t=e.zo,n={visible:!0};n.row=g.Yk(e),n.filter=g.rows.Ge,n.filterParam=g.rows.Ge,n.control=g,g.onRowFilter(n),e.Io=!n.visible,n.visible?g.rowFilterParentsAlwaysVisible&&t&&t.Pc():e.hidden=!0}})},this.Ko=function(e){return!e.some(function(e){return e.children&&e.children.length})},this.Lo=function(e){return!e.some(function(e){return!e.children||0===e.children.length})},this.zl=function(e){return g.Bj[e=e||"main"]},this.Eo=function(e,n,i,o,r,a,l){if(e){var s=!1;if(g.rows.ko)switch(g.rowSortingMode){case"LeavesOnly":s=g.Ko(e);break;case"ParentsOnly":s=g.Lo(e)}if(s){var d=g.rows.mo(),c="desc"===g.rows.lo(),u=t.list(e,!0);u.sort(function(e,t){var n,i=g.Mn(e,d),o=g.Mn(t,d);return n=i===o?0:"number"==typeof i&&"number"==typeof o?i-o:g.Je(i,o,"asc"),c?-n:n}),e=u}for(var h=g.zl(l).rowlist,p=0;p<e.length;p++)if(e[p]){var f={};if(f.level=i,f.hidden=a,f.index=n.i,!e[p].hidden){var m=this.po(e[p],f),v=g.qo(m,o);a&&(v.hidden=!0),v.level=i,v.index=n.i,v.grid=l||"main",null!==o&&o.children.push(n.i),h.push(v),n.i++,r&&m.children&&m.children.length&&this.Eo(m.children,n,i+1,v,!0,a||!v.expanded,l)}}}},this.Mo=["text","html","backColor","cssClass","areas","horizontalAlignment","hidden"],this.$m=function(e){if(e.isNewRow)return{row:{cssClass:g.G("_row_new"),moveDisabled:!0,html:g.ca(g.rowCreateText,g.rowCreateHtml)}};var n={};n.row=this.Yk(e),t.Util.copyProps(e,n.row,["html","backColor","fontColor","cssClass","toolTip","contextMenu","moveDisabled"]),n.row.columns=t.Util.createArrayCopy(e.columns,g.Mo),n.row.areas=t.Util.createArrayCopy(e.areas);var i=g.rowHeaderColumns;if("undefined"==typeof n.row.columns&&i.length>0){r.columns=[];for(var o=0;o<i.length;o++)r.columns.push({})}return"function"==typeof this.onBeforeRowHeaderRender&&this.onBeforeRowHeaderRender(n),n},this.po=function(e,t){var n=this.No(e,t);if("function"==typeof this.onBeforeResHeaderRender){var i={};i.resource=n,this.onBeforeResHeaderRender(i)}return n},this.No=function(e,t){var n={get $data(){return this.Go}};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];if(n.html=g.ca(e.name,e.html),g.rowHeaderColumns&&g.rowHeaderColumns.length>0&&"undefined"==typeof n.columns){n.columns=[];var o=g.rowHeaderColumns;if(g.Fk()){for(var r=0;r<o.length;r++){var a=g.Mn(e,o[r].display);n.columns.push({text:a})}n.columns[0]&&o[0]&&!o[0].display&&(n.columns[0].text=n.name)}else for(r=0;r<o.length;r++)n.columns.push({})}return n.Go=e,n},this.wk=function(){this.nav.top.dp=this,this.nav.top.innerHTML="",t.Util.addClass(this.nav.top,this.G("_main")),this.nav.top.setAttribute("role","region"),this.nav.top.setAttribute("aria-label","scheduler"),this.nav.top.style.MozUserSelect="none",this.nav.top.style.KhtmlUserSelect="none",this.nav.top.style.webkitUserSelect="none",this.nav.top.style.WebkitTapHighlightColor="rgba(0,0,0,0)",this.nav.top.style.WebkitTouchCallout="none",this.width&&(this.nav.top.style.width=this.width),"Parent100Pct"===this.heightSpec&&(this.nav.top.style.height="100%"),this.nav.top.style.lineHeight="1.2",this.nav.top.style.position="relative",this.visible||(this.nav.top.style.display="none"),this.nav.top.onmousemove=this.Ph,this.nav.top.onmouseout=function(){g.Om()},this.nav.top.ontouchstart=P.Oo,this.nav.top.ontouchmove=P.Po,this.nav.top.ontouchend=P.Qo,this.hideUntilInit&&this.backendUrl&&(this.nav.top.style.visibility="hidden");var e=this.uj(),n="Top"===g.timeHeaderPosition;if(g.vk=g.timeHeaderPosition,"DivBased"===this.ea.Ro()){var i=d();i.style.position="absolute",i.style.left="0px",i.style.width=e+"px";var o=d();o.style.height="0px",o.style.boxSizing="content-box",o.style.borderTop="1px solid transparent",o.className=this.G("_divider_horizontal"),this.nav.dh1=o,this.nav.left=i,"Top"===g.timeHeaderPosition?(i.appendChild(this.Dd()),i.appendChild(o),i.appendChild(this.So()),g.Bj.top.enabled(),i.appendChild(this.To()),i.appendChild(this.Uo())):"Bottom"===g.timeHeaderPosition?(i.appendChild(this.So()),i.appendChild(o),i.appendChild(this.Dd())):i.appendChild(this.So());var r=d();r.style.position="absolute",r.style.left=e+"px",r.style.width=H.vj()+"px",r.style.height=this.wj()+this.ed()+"px",r.className=this.G("_divider")+" "+this.G("_splitter"),r.setAttribute("unselectable","on"),this.nav.divider=r,this.rowHeaderScrolling&&this.Vo();var a=d();a.style.marginLeft=e+H.vj()+"px",a.style.marginRight="1px",a.style.position="relative",this.nav.right=a;var l=d();n&&(l.style.position="absolute",l.style.top=this.wj()+"px"),l.style.width="100%",l.style.height="0px",l.style.boxSizing="content-box",l.style.borderBottom="1px solid transparent",l.setAttribute("data-dh2","true"),l.className=this.G("_divider_horizontal"),this.nav.dh2=l,"Top"===g.timeHeaderPosition?(a.appendChild(g.Wo()),a.appendChild(g.Xo()),a.appendChild(l),g.Bj.top.enabled(),a.appendChild(g.Yo()),a.appendChild(g.Zo())):"Bottom"===g.timeHeaderPosition?(a.appendChild(g.Xo()),a.appendChild(l),a.appendChild(g.Wo())):a.appendChild(g.Xo());var s=d();s.style.clear="left";var c=d();c.style.height="1px",c.style.position="absolute",c.style.left="0px",c.style.right="0px",c.style.display="none",c.className=this.G("_divider_horizontal")+" "+this.G("_divider_horizontal_frozen_top"),c.onmousemove=function(e){e.cancelBubble=!0},this.nav.dividerTop=c;var u=d();u.style.height="1px",u.style.position="absolute",u.style.left="0px",u.style.right="0px",u.style.display="none",u.className=this.G("_divider_horizontal")+" "+this.G("_divider_horizontal_frozen_bottom"),u.onmousemove=function(e){e.cancelBubble=!0},this.nav.dividerBottom=u,this.nav.top.appendChild(i),this.nav.top.appendChild(r),this.nav.top.appendChild(a),this.nav.top.appendChild(s),this.nav.top.appendChild(c),this.nav.top.appendChild(u)}else{var h=document.createElement("table");h.cellPadding=0,h.cellSpacing=0,h.border=0,h.style.position="absolute";var p=h.insertRow(-1);p.insertCell(-1).appendChild(this.Dd()),p.insertCell(-1).appendChild(this.Wo());var f=h.insertRow(-1);f.insertCell(-1).appendChild(this.So()),f.insertCell(-1).appendChild(this.Xo()),this.nav.top.appendChild(h)}if(this.Hg=d(),this.Hg.style.display="none",this.nav.top.appendChild(this.Hg),this.ma()){var m=document.createElement("input");m.type="hidden",m.id=this.id+"_state",m.name=this.id+"_state",this.nav.state=m,this.nav.top.appendChild(m)}var v=d();v.style.position="absolute",v.style.left=this.uj()+H.vj()+5+"px",v.style.top=this.wj()+5+"px",v.style.display="none",v.innerHTML=g.ca(this.loadingLabelText,this.loadingLabelHtml),t.Util.addClass(v,this.G("_loading")),this.nav.loading=v,this.nav.top.appendChild(v),this.$o(),g._o()},this.Ph=function(e){if(c.row)k.yo(e);else if(l.ap){var n=t.mo3(g.nav.top,e).x,i=g.An(),o=n-1;g.rowHeaderCols&&(o=Math.min(i,n-1)),o=Math.max(0,o),g.rowHeaderWidth=o,g.no=!1,g.rowHeaderCols||g.bp(),g.oo(),g.Xi(),g.Qd()}},this.Na=function(){var e=this.wj(),t="Top"===g.timeHeaderPosition;this.nav.corner&&(this.nav.corner.style.height=e+"px"),this.divTimeScroll&&(this.divTimeScroll.style.height=e+"px"),this.divNorth&&(this.divNorth.style.height=e+"px"),this.nav.dh1&&this.nav.dh2&&t&&(this.nav.dh1.style.top=e+"px",this.nav.dh2.style.top=e+"px"),this.nav.loading.style.top=e+5+"px",t&&(this.nav.scroll.style.top=e+1+"px")},this.uj=function(){if(this.no)return 0;var e=this.rowHeaderScrolling,t=this.An();return e&&this.rowHeaderWidth<t?this.rowHeaderWidth:t},this.Vo=function(){var e=this.nav.divider;e.style.cursor="col-resize",e.setAttribute("unselectable","on"),e.onmousedown=function(e){var t=l.ap={};return t.cursor=g.nav.top.style.cursor,t.cleanup=function(){g.Fn(),g.nav.top.style.cursor=t.cursor,"function"==typeof g.onRowHeaderResized&&g.onRowHeaderResized({})},g.nav.top.style.cursor="col-resize",!1}},this.oo=function(){var e=H.vj(),n=this.uj();if(this.nav.corner&&(this.nav.corner.style.width=n+"px"),this.nav.corner&&(this.divCorner.style.width=n+"px"),this.divResScroll.style.width=n+"px","DivBased"===H.Ro()&&(this.nav.left.style.width=n+"px",this.nav.divider.style.left=n-e+"px",this.nav.right.style.marginLeft=n+"px"),this.nav.message&&(this.nav.message.style.left=g.tj()+"px"),this.nav.loading&&(this.nav.loading.style.left=n+e+5+"px"),this.nav.hideIcon){var i=this.nav.hideIcon,o=g.G("_header_icon_show"),r=g.G("_header_icon_hide");i.style.left=n-1+"px",g.no?(t.Util.removeClass(i,r),t.Util.addClass(i,o)):(t.Util.removeClass(i,o),t.Util.addClass(i,r))}},this.bp=function(){this.zn();var e=this.An(),t=function(e,t,n){if(e&&e.style){var i=e.firstChild;g.Gn?(e.style.width=t+"px",i.style.width=t+"px","number"==typeof n&&(e.style.left=n+"px")):i.style.width=t+"px"}},n=function(n){if((a=n.cells[0]).colSpan>1||"max"===a.colSpan)t(a=n.cells[0],e);else if(g.rowHeaderCols)for(var i=0,o=0;o<n.cells.length;o++)t(a=n.cells[o],r=g.rowHeaderCols[o],i),i+=r;else{var r,a;t(a=n.cells[0],r=g.rowHeaderWidth)}},i=this.divHeader;i.style.width=e+"px";for(var o=g.Bn(),r=o.start;r<o.end;r++)(a=i.rows[r])&&n(a);if(g.Bj.top.enabled())for(r=0;r<g.Bj.top.rowlist.length;r++)n(a=g.Bj.top.divHeader.rows[r]);if(g.Bj.bottom.enabled())for(r=0;r<g.Bj.bottom.rowlist.length;r++){var a;n(a=g.Bj.bottom.divHeader.rows[r])}g.nav.resScrollSpace&&(g.nav.resScrollSpace.style.width=e+"px"),g.Bj.bottom.enabled()&&(g.Bj.bottom.divSpace.style.width=e+"px"),this.Ba()},this.sk=function(){this.oo(),this.bp()},this.rk=function(){var e=g.nav.corner,n=H.Zm(),i=d();i.style.position="absolute",i.style.bottom="0px",i.style.left="0px",i.style.width="100%",i.style.height=H.cp()+"px",i.style.overflow="hidden",g.nav.columnScroll=i;var o=d();o.style.position="absolute",o.style.bottom="0px",o.style.left="0px",o.style.width="5000px",o.style.height=H.cp()+"px",o.style.overflow="hidden",o.className=this.G("_columnheader"),i.appendChild(o);var r=d();r.style.position="absolute",r.style.top="0px",r.style.bottom="0px",r.style.left="0px",r.style.right="0px",r.className=this.G("_columnheader_inner"),o.appendChild(r),g.yl&&(g.yl.dispose(),g.yl=null);var a=[];n.forEach(function(e){var t={column:{}};t.column.html=g.ca(e.text||e.name||e.title,e.html),t.column.areas=null,t.column.sortingEnabled=!!e.sort,t.column.data=e,t.column.cssClass=null,a.push(t),"function"==typeof g.onBeforeRowHeaderColumnRender&&g.onBeforeRowHeaderColumnRender(t)});var l=new t.Splitter(r);l.enabled=g.rowHeaderColumnsResizable,l.widths=t.Util.propArray(n,"width",g.rowHeaderColumnDefaultWidth),l.height=H.cp(),l.css.title=this.G("_columnheader_cell"),l.css.titleInner=this.G("_columnheader_cell_inner"),l.css.splitter=this.G("_columnheader_splitter");var s=g.rows.mo(),c=g.rows.lo();l.titles=t.list(a).map(function(e){var n=e.column.data,i=e.column.html,o=e.column.cssClass,r={areas:[]};if(n.sort&&e.column.sortingEnabled){var a=g.G("_sorticon");s===n.sort?(a+=" "+g.G("_sorticon_active"),a+="asc"===c?" "+g.G("_sorticon_asc"):" "+g.G("_sorticon_desc")):a+=" "+g.G("_sorticon_asc"),r.areas=[{right:5,top:0,bottom:0,width:10,cssClass:a,onClick:function(e){var t={};t.field=n.sort,t.order=s===n.sort&&"asc"===g.rows.lo()?"desc":"asc",g.rows.sort(t)}}]}return t.isArray(e.column.areas)&&(r.areas=r.areas.concat(e.column.areas)),r.cssClass=o,r.html=i,r}),l.data=t.list(n,!0),l.updating=function(e){g._i.skip=!0,t.Util.updatePropsFromArray(H.Zm(),"width",this.widths),g.sk()},l.updated=function(e){if(g.Fn(),g.cb())"function"==typeof g.onRowHeaderColumnResized&&((t={}).column=H.Zm()[e.index],g.onRowHeaderColumnResized(t));else switch(g.rowHeaderColumnResizedHandling){case"CallBack":case"PostBack":break;case"JavaScript":var t;"function"==typeof g.onRowHeaderColumnResized&&((t={}).column=H.Zm()[e.index],g.onRowHeaderColumnResized(t))}},l.color="#000000",l.opacity=30,l.init(),e.appendChild(i),this.yl=l},this.Ki=function(){var e=this.nav.corner;if(e){g.ta(),e.innerHTML="",e.className=this.G("_corner");var n=d();if(n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.right="0px",n.style.bottom="0px",n.className=this.G("_corner_inner"),this.divCorner=n,n.innerHTML="&nbsp;",this.rowHeaderColumns&&this.rowHeaderColumns.length>0){var i=d();i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.right="0px",i.style.bottom=H.cp()+1+"px",e.appendChild(i);var o=d();o.style.position="absolute",o.style.left="0px",o.style.right="0px",o.style.height="1px",o.style.bottom=H.cp()+"px",o.className=this.G("_divider"),e.appendChild(o),i.appendChild(n),this.rk()}else e.appendChild(n);!function(){var e={};e.control=g,e.html=g.ca(g.cornerText,g.cornerHtml),e.areas=null;var n=null;if("function"==typeof g.onBeforeCornerRender&&g.onBeforeCornerRender(e),"function"==typeof g.onBeforeCornerDomAdd&&(e.element=null,g.onBeforeCornerDomAdd(e),n=e.element),n){var i=g.divCorner;if(i.domArgs=e,t.Util.isReactComponent(n)){if(!g.wa.reactDOM)throw new t.Exception("Can't reach ReactDOM");g.wa.reactDOM.render(n,i)}else i.appendChild(n)}else g.divCorner&&(g.divCorner.innerHTML=e.html||"");e.areas&&t.Areas.attach(g.nav.corner,{},{areas:e.areas})}();var r=d();r.style.position="absolute",r.style.padding="2px",r.style.top="0px",r.style.left="1px",r.style.backgroundColor="#FF6600",r.style.color="white",r.innerHTML="DEMO",t.Util.isNullOrUndefined(void 0)&&e.appendChild(r)}},this.$o=function(){var e=this.uj()+H.vj()-1,n=this.wj()+3,i=t.Util.div(this.nav.top,e,n,10,20);i.style.cursor="pointer",i.className=g.G("_header_icon"),t.Util.addClass(i,g.G("_header_icon_hide")),i.onclick=function(){g.rows.headerToggle()},this.nav.hideIcon=i},this.zk=function(){var e=g.nav.hideIcon,t=g.wj()+3;e&&(e.style.display=g.rowlist.length>0&&g.rowHeaderHideIconEnabled?"":"none",e.style.top=t+"px")},this.Dd=function(){var e=this.uj(),t=d();return g.nav.corner=t,t.style.width=e+"px",t.style.height=this.wj()+"px",t.style.overflow="hidden",t.style.position="relative",t.setAttribute("unselectable","on"),t.onmousemove=function(){g.Aa()},t.oncontextmenu=function(){return!1},this.Ki(),t},this.wj=function(){if("None"===g.timeHeaderPosition)return 0;if(g.timeHeaders){var e=B.an(g.timeHeaders.length-1);return e.top+e.height}return this.timeHeader?g.timeHeader.length*H.cp():0},this.ep=null,this.fp=function(){return g.scrollStep||g.eventHeight},this.So=function(){var e=d();e.style.width=this.uj()+"px",e.style.height=this.ed()+"px",e.style.overflow="hidden",e.style.position="relative",e.className=g.G("_rowheader_scroll");var t=g.fp(),n=g.ea.Ln();n&&(e.style.overflowY="auto"),e.onmousemove=function(){g.Aa()},e.ontouchstart=function(){l.gp=!0},e.addEventListener("wheel",function(n){var i;0!==g.hp()&&(i=g.overrideWheelScrolling||g.scrollStep?n.deltaY>0?t:-t:1===n.deltaMode?n.deltaY*H.ip()*1.7:n.deltaY,g.nav.scroll.scrollTop=e.scrollTop+i,n.preventDefault())},!1),e.oncontextmenu=function(){return!1},e.onscroll=function(){if(g.ep&&clearTimeout(g.ep),n){var t=function(){var t=g.Rm()-g.nav.scroll.offsetHeight;e.scrollTop=Math.min(e.scrollTop,t),g.nav.scroll.scrollTop=e.scrollTop};a?l.gp&&(g.ep=setTimeout(t,10)):g.ep=setTimeout(t,10)}else g.ep=setTimeout(function(){g.nav.scroll.scrollTop=e.scrollTop},500)},g.jp(e),e.setAttribute("role","region"),e.setAttribute("aria-label","scheduler rows");var i=d();return i.onmousemove=function(){g.Aa()},this.divHeader=i,e.appendChild(i),this.divResScroll=e,this.Aj=e,e},this.jp=function(e){e.addEventListener("scroll",function(){g.rowHeaderScrolling&&(g.nav.columnScroll&&(g.nav.columnScroll.scrollLeft=e.scrollLeft),g.Bj.top.enabled()&&(g.Bj.top.divHeader.scrollLeft=e.scrollLeft),this!==g.divResScroll&&(g.divResScroll.scrollLeft=e.scrollLeft))}),e.onmouseenter=function(){g.rowHeaderScrolling&&(e.style.overflowX="auto")},e.onmouseleave=function(){g.rowHeaderScrolling&&(e.style.overflowX="hidden")}},this.kp=function(e){if("TableBased"===H.Ro()){var t=parseInt(this.width,10),n=isNaN(t)||-1!==this.width.indexOf("%"),i=(/MSIE/i.test(navigator.userAgent),this.An());n?this.nav.top&&this.nav.top.offsetWidth>0&&(e.style.width=this.nav.top.offsetWidth-6-i+"px"):e.style.width=t-i+"px"}},this.Rf=function(e){"function"!=typeof ResizeObserver&&(g._a(),g.Xi())},this._a=function(){g.T||("TableBased"===g.ea.Ro()&&(g.kp(g.nav.scroll),g.kp(g.divTimeScroll)),g.Ua(),g.Fn(),g.lp(),g.P.drawArea=null)},this.ne=null,this.oe=null,this.na=null,this.ke=function(){var e=function(){g._a(),g.Xi(null,{dontHideBubble:!0})};if(g.watchWidthChanges){if("function"==typeof ResizeObserver){if(g.na)return;var t=new ResizeObserver(function(){return g.ne?(g.ne.width!==g.nav.top.offsetWidth&&(g.ne.changed=!0,g.ne.width=g.nav.top.offsetWidth),void(g.ne.changed&&(g.ne.changed=!1,e()))):(g.ne={},g.ne.changed=!1,void(g.ne.width=g.nav.top.offsetWidth))});return t.observe(g.nav.top),void(g.na=t)}if(!g.oe){var n=function(){return g.nav&&g.nav.top?g.ne?(g.ne.width!==g.nav.top.offsetWidth&&(g.ne.changed=!0,g.ne.counter=0,g.ne.width=g.nav.top.offsetWidth),g.ne.changed&&(g.ne.counter+=1),void(g.ne.changed&&g.ne.counter>0&&(g.ne.changed=!1,e()))):(g.ne={},g.ne.counter=0,g.ne.changed=!1,void(g.ne.width=g.nav.top.offsetWidth)):void clearInterval(g.oe)};this.oe=setInterval(n,200),n()}}},this.lp=function(){var e=g.Tk;g.clearSelection(),g.Tk=e,g.Uk(e,{justDraw:!0})},this.Fn=function(){"Auto"===g.cellWidthSpec&&(g.ma()&&g.Oi(),g.S&&(g.Gi(),g.Hi(),g.Li(),g.Oi(),g.Pi(),g.pa(),g.Ma(),g.Mi(),g.Ni(),g.kk(),g.Za(),g.Ri(),g.Si(),g.Ua()))},this.Gi=function(){if("Auto"===this.cellWidthSpec){var e=this.nav.top.clientWidth-this.uj()-g.hp();if(this.Vm()){var t=e/this.Vm();this.cellWidth=Math.max(t,g.cellWidthMin),g.zj=t<g.cellWidthMin}}},this.hp=function(){return"Auto"===g.heightSpec?0:"Max"===g.heightSpec||"Fixed"===g.heightSpec||"Parent100Pct"===g.heightSpec?g.Rm()>g.height?t.sw(g.nav.scroll):0:t.sw(g.nav.scroll)},this.Fj=function(){var e=this.nav.top.clientWidth,n=this.uj(),i=this.ed(),o=0;return this.Rm()>i&&!("Auto"===g.heightSpec)&&(o=t.swa()),e-n-2-o},this.Wo=function(){var e="Top"===g.timeHeaderPosition,t=d();t.style.overflow="hidden",t.style.display="block",e?(t.style.position="absolute",t.style.top="0px"):t.style.position="relative",t.style.width="100%",t.style.height=this.wj()+"px",t.style.overflow="hidden",t.onmousemove=function(){g.Aa(),g.cellBubble&&g.cellBubble.delayedHide()},t.className=g.G("_timeheader_scroll"),this.kp(t),this.divTimeScroll=t;var n=d();return n.style.width=this.rj()+5e3+"px",this.divNorth=n,t.appendChild(n),t},this.ed=function(){var e=0,t=g.heightSpec;return"Fixed"===t||"Parent100Pct"===t?this.height?this.height:0:(e=g.Rm(),("Max"===t||"Max100Pct"===t)&&e>g.height?g.height:e)},this.mp=null,this.np=0,this.pp=0,this.qp=0,this.Dj=function(){"function"!=typeof g.onHeightChanged&&"function"!=typeof g.onDimensionsChanged||(g.mp&&clearTimeout(g.mp),g.mp=setTimeout(function(){var e=g.nav.top.offsetHeight,t=g.np;g.np=e;var n=g.nav.top.offsetWidth,i=g.pp;g.pp=n;var o,r=g.uj(),a=g.qp;g.qp=r,"function"==typeof g.onHeightChanged&&e!==t&&((o={}).oldHeight=t,o.newHeight=e,g.onHeightChanged(o)),"function"!=typeof g.onDimensionsChanged||e===t&&n===i&&r===a||((o={}).oldHeight=t,o.newHeight=e,o.oldWidth=i,o.newWidth=n,o.oldRowHeaderWidth=a,o.newRowHeaderWidth=r,g.onDimensionsChanged(o))},100))},this.Rm=function(){var e;return-1!==this.Ci?(e=this.Ci,this.Ci>0&&"auto"===g.nav.scroll.style.overflowX&&(e+=t.sh(g.nav.scroll))):e=this.rowlist.length*this.ea.Dl(),e+g.Bj.bottom.height},this.Aa=function(){g.rp&&(this.Ba(),this.ve(),this.sp(),this.xn(),this.Om(),g.cellBubble&&g.cellBubble.hideOnMouseOut(),g.bubble&&g.bubble.hideOnMouseOut(),g.rp=!1)},this.Bj={},this.Bj.top={},this.Bj.top.height=0,this.Bj.top.rowlist=[],this.Bj.top.enabled=function(){return this.rowlist&&this.rowlist.length>0},Object.defineProperty(g.Bj.top,"top",{get:function(){return g.wj()+1}}),Object.defineProperty(g.Bj.top,"right",{get:function(){return g.hp()}}),Object.defineProperty(g.Bj.top,"heightRes",{get:function(){return this.height}}),this.Bj.bottom={},this.Bj.bottom.height=0,this.Bj.bottom.rowlist=[],this.Bj.bottom.enabled=function(){return this.rowlist&&this.rowlist.length>0},Object.defineProperty(g.Bj.bottom,"top",{get:function(){return g.wj()+g.ed()-this.height-t.sh(g.nav.scroll)+1}}),Object.defineProperty(g.Bj.bottom,"right",{get:function(){return g.hp()}}),Object.defineProperty(g.Bj.bottom,"heightRes",{get:function(){return this.height+t.sh(g.nav.scroll)}}),this.Bj.main={},this._o=function(){var e=g.Bj.main;e.divCells=g.divCells,e.divLines=g.divLines,e.divHeader=g.divHeader,e.divEvents=g.divEvents,e.divShadow=g.divShadow,e.divHover=g.divHover,e.divCrosshair=g.divCrosshair,e.div=g.nav.scroll,Object.defineProperty(g.Bj.main,"rowlist",{get:function(){return g.rowlist}}),Object.defineProperty(g.Bj.main,"top",{get:function(){return g.wj()+1}}),Object.defineProperty(g.Bj.main,"height",{get:function(){return g.Ci}})},this.To=function(){var e=g.Bj.top,t=e.top,n=e.height,i=d();return i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.top=t+"px",i.style.height=n+"px",i.style.overflow="hidden",i.style.boxSizing="border-box",i.rows=[],e.divHeader=i,i},this.Uo=function(){var e=g.Bj.bottom,t=e.top,n=e.height,i=d();i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.top=t+"px",i.style.height=n+"px",i.style.overflow="hidden",i.style.boxSizing="border-box";var o=d();o.style.position="absolute",o.style.height="500px",o.style.top=e.height+"px",o.style.left="0px",o.style.width=g.An()+"px",o.className=g.G("_rowheader"),i.appendChild(o),i.rows=[];var r=d();return i.appendChild(r),i.Jn=r,g.jp(i),e.divHeader=i,e.divSpace=o,i},this.Yo=function(){var e=g.Bj.top,n=e.top,i=e.height,o=d();o.style.position="absolute",o.style.left="0px",o.style.right="0px",o.style.top=n+"px",o.style.height=i+"px",o.style.overflow="hidden",o.className=g.G("_grid_top"),o.onmousedown=g.tp,o.onmousemove=g.yn,o.oncontextmenu=g.up,g.nav.fixedTop=o,e.div=o;var r=g.vp(o);return t.Util.copyProps(r,e),o},this.Zo=function(){var e=g.Bj.bottom,n=e.top,i=e.height,o=d();o.style.position="absolute",o.style.left="0px",o.style.right="0px",o.style.bottom=n+"px",o.style.height=i+"px",o.style.overflow="hidden",o.className=g.G("_grid_bottom"),o.onmousedown=g.tp,o.onmousemove=g.yn,o.oncontextmenu=g.up,g.nav.fixedBottom=o,e.div=o;var r=g.vp(o);return t.Util.copyProps(r,e),o},this.vp=function(e){var t=d();t.style.position="absolute",e.appendChild(t);var n=d();n.style.position="absolute",e.appendChild(n);var i=d();i.style.position="absolute",e.appendChild(i);var o=d();o.style.position="absolute",e.appendChild(o);var r=d();r.style.position="absolute",r.style.left="0px",r.style.width="100000px",r.style.bottom="0px",r.style.height="1px",e.appendChild(r);var a=d();a.style.position="absolute",e.appendChild(a);var l=d();return l.style.position="absolute",e.appendChild(l),{divCells:t,divLines:n,divEvents:o,divShadow:l,divHover:a,divCrosshair:i}},this.Cj=function(){var e=g.Bj.top,t=g.Bj.bottom;p(e),p(t),g.divStretch.style.height=g.Ci+t.height+"px",g.nav.dividerTop.style.top=e.top+e.height-1+"px",g.nav.dividerTop.style.right=e.right+"px",g.wp(g.nav.dividerTop,e.enabled()),g.nav.dividerBottom.style.top=t.top-1+"px",g.nav.dividerBottom.style.right=t.right+"px",g.wp(g.nav.dividerBottom,t.enabled())},this.wp=function(e,t){e.style.display=t?"":"none"},this.Mj=function(){var e=g.rowlist;return(e=e.concat(g.Bj.top.rowlist)).concat(g.Bj.bottom.rowlist)},this.xp=function(){return g.rowlist.length>0||g.Bj.top.rowlist.length>0||g.Bj.bottom.rowlist.length>0},this.yp=function(){this.cd(),this.zp()},this.Xo=function(){var e=d();if(e.style.overflow="auto",e.style.overflowX="auto",e.style.overflowY="auto",e.style.height=this.ed()+"px","Top"===g.timeHeaderPosition?(e.style.top=this.wj()+1+"px",e.style.position="absolute"):e.style.position="relative",e.style.width="100%",e.className=this.G("_scrollable"),e.oncontextmenu=function(){return!1},this.kp(e),g.overrideWheelScrolling){var t=g.fp();e.onwheel=function(n){g.nav.scroll.scrollTop=e.scrollTop+(n.deltaY>0?t:-t),n.preventDefault()},e.onmousewheel=function(n){g.nav.scroll.scrollTop=e.scrollTop+(n.wheelDelta<0?t:-t),n.preventDefault(),n.returnValue=!1}}this.nav.scroll=e,this.cj=d();var n=this.cj;n.style.MozUserSelect="none",n.style.KhtmlUserSelect="none",n.style.webkitUserSelect="none",n.daypilotMainD=!0,n.calendar=this,n.style.minHeight="1px",o&&(n.style.webkitTransform="translateZ(0px)"),n.style.position="absolute";var i=this.rj();return i>0&&!isNaN(i)&&(n.style.width=i+"px"),n.setAttribute("unselectable","on"),n.onmousedown=this.tp,n.onmousemove=this.yn,n.onmouseup=this.Ap,n.oncontextmenu=this.up,n.ondblclick=this.Bp,n.className=this.G("_matrix"),this.divStretch=d(),this.divStretch.style.position="absolute",this.divStretch.style.height="1px",n.appendChild(this.divStretch),this.divCells=d(),this.divCells.style.position="absolute",this.divCells.oncontextmenu=this.up,n.appendChild(this.divCells),this.divLines=d(),this.divLines.style.position="absolute",this.divLines.oncontextmenu=this.up,n.appendChild(this.divLines),this.divBreaks=d(),this.divBreaks.style.position="absolute",this.divBreaks.oncontextmenu=this.up,n.appendChild(this.divBreaks),this.divSeparators=d(),this.divSeparators.style.position="absolute",this.divSeparators.oncontextmenu=this.up,n.appendChild(this.divSeparators),this.divLinksBelow=d(),this.divLinksBelow.style.position="absolute",n.appendChild(this.divLinksBelow),this.divCrosshair=d(),this.divCrosshair.style.position="absolute",this.divCrosshair.ondblclick=this.Bp,this.divCrosshair.onmousedown=this.Wd,n.appendChild(this.divCrosshair),this.divRange=d(),this.divRange.style.position="absolute",this.divRange.oncontextmenu=this.up,n.appendChild(this.divRange),this.divEvents=d(),this.divEvents.style.position="absolute",n.appendChild(this.divEvents),this.divSeparatorsAbove=d(),this.divSeparatorsAbove.style.position="absolute",this.divSeparatorsAbove.oncontextmenu=this.up,n.appendChild(this.divSeparatorsAbove),this.divLinksAbove=d(),this.divLinksAbove.style.position="absolute",n.appendChild(this.divLinksAbove),this.divLinkShadow=d(),this.divLinkShadow.style.position="absolute",n.appendChild(this.divLinkShadow),this.divLinkpoints=d(),this.divLinkpoints.style.position="absolute",n.appendChild(this.divLinkpoints),this.divRectangle=d(),this.divRectangle.style.position="absolute",n.appendChild(this.divRectangle),this.divHover=d(),this.divHover.style.position="absolute",n.appendChild(this.divHover),this.divShadow=d(),this.divShadow.style.position="absolute",n.appendChild(this.divShadow),e.appendChild(n),e},this.Cp={};var O=this.Cp;O.Hf=function(){if(!g.nav.overlay){var e=document.createElement("div");e.style.position="absolute",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.bottom="0px",e.className=g.G("_block"),g.nav.top.appendChild(e),g.nav.overlay=e}},O.Ya=function(){O.Hf(),g.nav.overlay.style.display=""},O.tg=function(){g.nav.overlay&&(g.nav.overlay.style.display="none")},this.ia=function(e){var t=(e=e||{}).delay||0,n=g.ca(e.text||this.loadingLabelText,this.loadingLabelHtml),i="undefined"!=typeof e.block?e.block:g.blockOnCallBack;g.Dp&&window.clearTimeout(g.Dp);var o=function(){(g.loadingLabelVisible||e.text)&&(g.nav.loading.innerHTML=n,g.nav.loading.style.display=""),i&&O.Ya()};0===t?o():g.Dp=window.setTimeout(o,t)},this.Ga=function(e){this.Dp&&window.clearTimeout(this.Dp),this.nav.loading.style.display="none",(e||g.blockOnCallBack)&&O.tg()},this.loadingStart=function(e){g.ia(e)},this.loadingStop=function(){g.Ga(!0)},this.uiBlock=function(){O.Ya()},this.uiUnblock=function(){O.tg()},this.Me=function(){this.startDate=new t.Date(this.startDate).getDatePart()},this.Qe=function(e){var t=d();t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.className=this.G(e),s().appendChild(t);var n=t.offsetHeight,i=t.offsetWidth;s().removeChild(t);var o={};return o.height=n,o.width=i,o},this.bb=function(e){if(e&&(this.autoRefreshEnabled=!0),this.autoRefreshEnabled&&!(this.R>=this.autoRefreshMaxCount)){this.oa();var n=this.autoRefreshInterval;if(!n||n<10)throw new t.Exception("The minimum autoRefreshInterval is 10 seconds");this.autoRefreshTimeout=window.setTimeout(function(){g.me()},1e3*this.autoRefreshInterval)}},this.oa=function(){this.autoRefreshTimeout&&(window.clearTimeout(this.autoRefreshTimeout),this.autoRefreshTimeout=null)},this.autoRefreshStart=function(e){g.bb(e)},this.autoRefreshPause=function(){g.oa()},this.Ep=function(){return!(l.zm||l._j||l.tn||l.Am)},this.me=function(){if(g.Ep()){var e=!1;if("function"==typeof this.onAutoRefresh){var t={};t.i=this.R,t.preventDefault=function(){this.preventDefault.value=!0},g.onAutoRefresh(t),t.preventDefault.value&&(e=!0)}!e&&this.I()&&this.commandCallBack(this.autoRefreshCommand),this.R++}this.R<this.autoRefreshMaxCount&&(this.autoRefreshTimeout=window.setTimeout(function(){g.me()},1e3*this.autoRefreshInterval))},this.pe=function(){l.Fp||(l.Fp=!0,t.re(document,"mousemove",l.wf),t.re(document,"mouseup",l.vf),t.re(document,"mousedown",l.Gp),t.re(document,"touchmove",l.Hp),t.re(document,"touchend",l.Ip),t.re(window,"keyup",l.Jp)),t.re(window,"resize",this.Rf)},this.Kp=function(){this.nav.scroll.root=this,this.nav.scroll.onscroll=this.Xi,g.Wm=this.nav.scroll.scrollLeft,g.Um=this.nav.scroll.scrollTop,this.divNorth&&(g.Lp=this.divNorth.clientWidth)},this.Dh=function(){if(this.nav.state){var e={};e.scrollX=this.nav.scroll.scrollLeft,e.scrollY=this.nav.scroll.scrollTop;var n=g.ll(e.scrollX,e.scrollY),i=g.ml(n),o=g.nl(n);e.rangeStart=i.start,e.rangeEnd=i.end,e.resources=o,this.syncResourceTree&&(e.tree=this.za()),this.nav.state.value=t.he(JSON.stringify(e))}},this.Si=function(){if(this.separators)for(var e=0;e<this.separators.length;e++)this.Fe(e)},this.Mp={},this.Mp.step=300,this.Mp.delay=10,this.Mp.mode="display",this.Mp.layers=!1,this.Ym=function(e){if(g.yi)I.Np(e);else for(var n=0,i=0;i<e.lines.length;i++){var o=e.lines[i];o.height=0,o.top=n;for(var r=0;r<o.length;r++){var a=o[r];a.part.line=i,a.part.height||(a.part.height=e.eventHeight);var l=a.part.go();l>o.height&&(o.height=l),a.part.top=n+e.marginTop;var s="Above"===g.eventVersionPosition;if(g.eventVersionsEnabled&&!t.list(a.versions).isEmpty()){var d=a.part.top;s||(d+=a.part.height+g.eventVersionMargin),t.list((a.cache||a.data).versions).forEach(function(e,t){a.versions[t]&&(a.versions[t].top=d+t*(g.eventVersionHeight+g.eventVersionMargin),s&&(a.part.top+=g.eventVersionHeight,a.part.top+=g.eventVersionMargin))})}a.part.right=a.part.left+a.part.width,a.part.fullTop=e.top+a.part.top,a.part.fullBottom=a.part.fullTop+a.part.height}n+=(o.height||e.eventHeight)*e.eventStackingLineHeight/100}};var I={jm:function(e){e.evColumns=t.list(g.itline).map(function(e,n){return{events:t.list()}}),t.list(e.events).forEach(function(t){var n=t.start(),i=g.Zj(n);e.evColumns[i.i].events.push(t)})},fo:function(){var e=g.zi,n=0;t.list(g.rowlist).forEach(function(t){var i=0;t.evColumns.forEach(function(n,o){var r=g.itline[o],a=g.rowMarginTop;n.events.forEach(function(n){n.part.left=r.left,n.part.width=r.width,n.part.top=a,n.part.height||(n.part.height=e?I.Op(n)+g.durationBarHeight:t.eventHeight),a+=n.part.height+g.eventMarginBottom}),n.height=a,n.height>i&&(i=n.height)}),t.maxColumnHeight=i,t.top=n;var o=t.height;t.height=t.getHeight(),i>g.rowMarginTop&&(t.height=i+g.rowMarginBottom),o!==t.height&&(g.Jk=!0),n+=t.height}),g.Ci=n},Op:function(e){var t=e.client.html(),n=d();n.style.position="absolute",n.style.top="-2000px",n.style.left="-2000px",n.style.width=e.part.width+"px",n.className=g.G(R.event);var i=d();i.className=g.G(R.eventInner),i.innerHTML=t,i.style.position="static",i.style.overflow="auto",n.appendChild(i);var o=g.divEvents;o.appendChild(n);var r=n.offsetHeight;return o.removeChild(n),r},Np:function(e){I.fo()},Pp:function(){t.list(g.rowlist).forEach(function(e){I.Qp(e)})},Za:function(){I.Pp(),I.Rp(),g.Ni(),g.Ua()},Rp:function(){if(g.zi){var e=!1;t.list(g.elements.events).forEach(function(t){var n=t.firstChild,i=n.scrollHeight+(n.offsetHeight-n.clientHeight+t.offsetHeight-t.clientHeight),o=t.event.part.height;t.event.part.height=i,o!==i&&(e=!0)}),e&&(g.pa(),I.fo(),I.Pp(),g.Oi(),g.Ri())}},Qp:function(e){e.evColumns.forEach(function(e,t){e.events.forEach(function(e){g.Uc(e)})})}};this.uk=null,this.Za=function(e){if(!g.T){if(g.yi)return void I.Za();var n=this.Mp.step;this.Mp.layers&&(g.divEvents=d(),g.divEvents.style.position="absolute",g.cj.insertBefore(this.divEvents,this.divSeparatorsAbove)),"display"===this.Mp.mode?this.divEvents.style.display="none":"visibility"===this.Mp.mode&&(this.divEvents.style.visibility="hidden"),this.divEvents.setAttribute("role","region"),this.divEvents.setAttribute("aria-label","scheduler events");var i="Progressive"===this.dynamicEventRendering,o=this.X(),r=o.pixels.top,a=o.pixels.bottom,l=g.allowMultiMove||g.allowMultiResize,s=g.rowlist.filter(function(e){var t=e.top-g.dynamicEventRenderingMargin;return!(i&&!l&&(a<=t||r>=t+e.height+2*g.dynamicEventRenderingMargin))});g.Bj.top.enabled()&&(s=s.concat(g.Bj.top.rowlist)),g.Bj.bottom.enabled()&&(s=s.concat(g.Bj.bottom.rowlist)),s.forEach(function(t){g.Ym(t);for(var i=0;i<t.lines.length;i++)for(var o=t.lines[i],r=0;r<o.length;r++){var a=g.Uc(o[r]);if(e&&a&&--n<=0)return g.divEvents.style.visibility="",g.divEvents.style.display="",void(g.uk=window.setTimeout(function(){g.Za(e)},g.Mp.delay))}}),this.divEvents.style.display="",t.list(g.multiselect.Ub).isEmpty()||g.multiselect.redraw(),this.kj(),b.Ok(),this.gm()}},this.Lk=function(e,t){var n=g.zl(t).rowlist[e];if(g.yi)I.Qp(n);else{this.divEvents=d(),this.divEvents.style.position="absolute",this.divEvents.style.display="none",this.cj.insertBefore(this.divEvents,this.divSeparatorsAbove),this.Ym(n);for(var i=0;i<n.lines.length;i++)for(var o=n.lines[i],r=0;r<o.length;r++)this.Uc(o[r]);this.divEvents.style.display=""}},this.pa=function(){if(this.elements.events)for(var e=this.elements.events.length,t=0;t<e;t++)this.Sc(this.elements.events[t]);this.elements.events=[]},this.Kk=function(e,t){if(t=t||"main",this.elements.events){for(var n=this.elements.events.length,i=[],o=0;o<n;o++){var r=this.elements.events[o],a=r.event;a.part.dayIndex===e&&a.part.grid===t&&(this.Sc(r),i.push(o))}for(o=i.length-1;o>=0;o--)this.elements.events.splice(i[o],1)}},this.Sc=function(e){var n=e.domArgs;if(e.domArgs=null,n&&"function"==typeof g.onDomRemoveEvent&&g.onDomRemoveEvent(n),n&&"function"==typeof g.onBeforeEventDomRemove&&g.onBeforeEventDomRemove(n),n&&"function"==typeof g.onBeforeEventDomAdd&&g.wa.reactDOM){var i=n&&n.Rc;if(i&&t.Util.isReactComponent(n.element)){if(!g.wa.reactDOM)throw new t.Exception("Can't reach ReactDOM");g.wa.reactDOM.unmountComponentAtNode(i)}}e.parentNode&&e.parentNode.removeChild(e),e.onclick=null,e.oncontextmenu=null,e.onmouseover=null,e.onmouseout=null,e.onmousemove=null,e.onmousedown=null,e.ondblclick=null,e.event&&(e.event.rendered=null,e.event=null),e.related&&t.de(e.related)},this.Sp=function(e){e.event&&(e.event.rendered=!1),e.onclick=null,e.onmousedown=null,e.event=null,e.parentNode&&e.parentNode.removeChild(e)},this.Tp=function(){if("Progressive"===this.dynamicEventRendering&&g.dynamicEventRenderingCacheSweeping){var e=g.dynamicEventRenderingCacheSize||0;this.divEvents.style.display="none";for(var t=[],n=this.elements.events.length-1;n>=0;n--){var i=this.elements.events[n];this.Up(i.event)?e>0?(e--,t.unshift(i)):this.Sc(i):t.unshift(i)}this.elements.events=t,this.divEvents.style.display=""}},this.Vp=function(e){for(var t=[],n=this.X(),i=this.elements.cells.length-1;i>=0;i--){var o=this.elements.cells[i];n.xStart<o.coords.x&&o.coords.x<=n.xEnd&&n.yStart<o.coords.y&&o.coords.y<=n.yEnd?t.unshift(o):e>0?(e--,t.unshift(o)):this.om(o)}},this.om=function(e){if(e&&e.coords){var n=e.coords.x,i=e.coords.y,o=e.coords.grid;t.rfa(g.elements.cells,e),t.de(e),g.P.cells[o+"_"+n+"_"+i]=null}},this.Pi=function(){if(this.elements.separators)for(var e=0;e<this.elements.separators.length;e++)t.de(this.elements.separators[e]);this.elements.separators=[]},this.Wp=function(){var e="Progressive"===this.dynamicEventRendering;if(!this.nav.scroll)return!1;for(var t=this.nav.scroll.scrollTop,n=t+this.nav.scroll.clientHeight,i=0;i<this.rowlist.length;i++){var o=this.rowlist[i];if(!e||!(n<=o.top||t>=o.top+o.height))for(var r=0;r<o.lines.length;r++)for(var a=o.lines[r],l=0;l<a.length;l++)if(this.Xp(a[l]))return!0}return!1},this.Xp=function(e){if(e.rendered)return!1;var t=this.nav.scroll.scrollLeft;return!("Progressive"===this.dynamicEventRendering&&(t+this.nav.scroll.clientWidth<=e.part.left||t>=e.part.left+e.part.width))},this.Up=function(e){if(!e.rendered)return!0;var t=this.X();return t.pixels.right+this.dynamicEventRenderingMargin<=e.part.left||t.pixels.left-this.dynamicEventRenderingMargin>=e.part.right||t.pixels.bottom<=e.part.fullTop||t.pixels.top>=e.part.fullBottom},this.eo=t.list(),this.Yp=function(e){if(e.rendered)return!1;var n=e.row;if(n.hidden)return!1;var i=e.min,o=e.max-e.min,r=g.eventHeight,a=e.row.top;"number"==typeof n.forcedHeight&&(r=Math.min(n.forcedHeight,g.eventHeight));var l=d();l.style.position="absolute",l.style.left=i+"px",l.style.top=a+"px",l.style.width=o+"px",l.style.height=r+"px",l.className=g.G("_event_group"),l.style.cursor="pointer";var s={group:{}};s.group.count=e.events.length,s.group.events=t.list(e.events,!0),s.group.html="&#x1F7A7; "+e.events.length+" events","function"==typeof g.onBeforeGroupRender&&g.onBeforeGroupRender(s);var c=d();return c.innerHTML=s.group.html,l.appendChild(c),l.onmousedown=function(e){e.cancelBubble=!0},l.onclick=function(e){var i=l.event;i.expanded=!0,g.Sp(l);var o=t.indexOf(g.elements.events,l);-1!==o&&g.elements.events.splice(o,1);var r=g.eo;t.list(i.events).forEach(function(e){r.push(e.id())}),g.kk(),g.lk([n]),g.Ua(),g.Za(),e.cancelBubble=!0},e.part={},e.part.left=i,e.part.width=o,e.part.height=g.eventHeight,e.part.dayIndex=t.indexOf(g.rowlist,e.row),e.part.top=0,e.part.isBlock=!0,e.part.grid=e.row.grid,e.client={},e.client.html=function(){return s.group.html},e.data={},l.event=e,this.elements.events.push(l),this.divEvents.appendChild(l),e.rendered=!0,!0},this.Uc=function(e,n){var i=(n=n||{}).forced;if(e.rendered)return!1;if(g.groupConcurrentEvents){var o=e.part.block;if(o.events.length>1&&!o.expanded)return g.Yp(o)}var r="Progressive"===this.dynamicEventRendering,a=e.part.dayIndex,l=e.part.grid||"main",s=g.Bj[l],c=s.divEvents,u=s.rowlist[a];if(u.hidden)return!1;var h=u.top,p=this.X(),f=p.pixels.left-this.dynamicEventRenderingMargin,m=p.pixels.right+this.dynamicEventRenderingMargin,v=p.pixels.top,y=p.pixels.bottom,b=e.part.left,w=e.part.left+e.part.width,C=e.part.top+h,x=C+e.part.height,S=g.multiselect.xc(e);if(!i&&!S&&r&&(m<=b||f>=w||"main"===l&&(y<=C||v>=x)))return!1;var T="Milestone"===e.data.type,E=e.part.width,_=e.part.height,k=e.cache||e.data;E=t.Util.atLeast(0,E),_=t.Util.atLeast(0,_);var D=d();if(D.related=[],function(n){g.eventVersionsEnabled&&t.list(k.versions).forEach(function(i,o){if(i){var r=e.versions[o];if(r){var a=d();a.style.position="absolute",a.style.overflow="hidden",a.style.left=r.left+"px",a.style.top=h+r.top+"px",a.style.width=r.width+"px",a.style.height=g.eventVersionHeight+"px",a.className=g.G(R.event)+" "+g.G("_event_previous")+" "+g.G("_event_version"),a.onmousedown=function(e){e.preventDefault(),e.stopPropagation()},i.toolTip&&(a.title=i.toolTip),i.cssClass&&t.Util.addClass(a,i.cssClass);var l=d();l.setAttribute("unselectable","on"),l.className=g.G(R.eventInner),l.innerHTML=g.ca(i.text,i.html),i.backColor&&(l.style.background=i.backColor),i.fontColor&&(l.style.color=i.fontColor),i.borderColor&&(l.style.borderColor=i.borderColor),i.backImage&&(l.style.backgroundImage="url("+i.backImage+")",i.backRepeat&&(l.style.backgroundRepeat=i.backRepeat)),a.appendChild(l),r.continueLeft&&!T&&t.Util.addClass(a,g.G("_event_continueleft")),r.continueRight&&!T&&t.Util.addClass(a,g.G("_event_continueright"));var s=r.width;if(g.durationBarVisible&&!i.barHidden&&s>0){var u=100*r.barLeft/s,p=Math.ceil(100*r.barWidth/s);"PercentComplete"===g.durationBarMode&&(u=0,p=i.complete||0);var f=d();f.setAttribute("unselectable","on"),f.className=g.G(R.eventBar),f.style.position="absolute",i.barBackColor&&(f.style.backgroundColor=i.barBackColor);var m=d();m.setAttribute("unselectable","on"),m.className=g.G(R.eventBarInner),m.style.left=u+"%",m.style.width=0<p&&p<=1?"1px":p+"%",i.barColor&&(m.style.backgroundColor=i.barColor),i.barImageUrl&&(m.style.backgroundImage="url("+i.barImageUrl+")"),f.appendChild(m),a.appendChild(f)}if(i.htmlLeft){var v=g.eventHtmlLeftMargin,y=d();y.style.position="absolute",y.style.right=-(r.left-v)+"px",y.style.top=h+r.top+"px",y.style.height=g.eventHeight+"px",y.style.boxSizing="border-box",y.innerHTML=i.htmlLeft,y.className=g.G("_event_left"),y.type="divLeft",y.versionPart=r,n.related.push(y),c.appendChild(y)}if(i.htmlRight){v=g.eventHtmlRightMargin;var b=d();b.style.position="absolute",b.style.left=r.left+r.width+v+"px",b.style.top=h+r.top+"px",b.style.height=g.eventHeight+"px",b.style.boxSizing="border-box",b.innerHTML=i.htmlRight,b.className=g.G("_event_right"),b.type="divRight",b.versionPart=r,n.related.push(b),c.appendChild(b)}a.versionPart=r,a.type="version";var w=t.Areas.resolvePosition(i.areas,g,r.left,r.width);t.Areas.attach(a,i,{areas:w}),n.related.push(a),c.appendChild(a)}}})}(D),k.htmlLeft){var A=g.eventHtmlLeftMargin,O=d();O.style.position="absolute",O.style.right=-(e.part.left-A)+"px",O.style.top=h+e.part.top+"px",O.style.height=g.eventHeight+"px",O.style.boxSizing="border-box",O.innerHTML=k.htmlLeft,O.className=g.G("_event_left"),O.type="divLeft",D.related.push(O),c.appendChild(O)}if(k.htmlRight){A=g.eventHtmlRightMargin;var I=d();I.style.position="absolute",I.style.left=e.part.left+e.part.width+A+"px",I.style.top=h+e.part.top+"px",I.style.height=g.eventHeight+"px",I.style.boxSizing="border-box",I.innerHTML=k.htmlRight,I.className=g.G("_event_right"),I.type="divRight",D.related.push(I),c.appendChild(I)}if(v=h+e.part.top,g.treeAnimation){var M="number"==typeof u.forcedHeight?u.forcedHeight:u.height;e.part.top+e.part.height>M&&(_=Math.max(0,M-e.part.top))}D.style.position="absolute",D.style.left=e.part.left+g.eventMarginLeft+"px",D.style.top=h+e.part.top+"px",D.style.width=E-g.eventMarginLeft-g.eventMarginRight+"px",D.style.height=_+"px",g.eventTextWrappingEnabled||(D.style.whiteSpace="nowrap"),D.style.overflow="hidden",D.className=this.G(R.event),T&&t.Util.addClass(D,g.G("_task_milestone")),"Group"===e.data.type&&(t.Util.addClass(D,g.G("_task_parent")),t.Util.addClass(D,g.G("_task_group"))),k.cssClass&&t.Util.addClass(D,k.cssClass),"number"==typeof e.part.line&&t.Util.addClass(D,this.G(R.eventLine+e.part.line)),D.setAttribute("unselectable","on"),this.showToolTip&&!this.bubble&&(D.title=e.client.toolTip()||""),D.onmousemove=this.Vc,D.onmouseout=this.Wc,D.onmousedown=this.Xc,D.onmouseup=this.Zp,D.ontouchstart=P.$p,D.ontouchmove=P._p,D.ontouchend=P.aq,e.client.clickEnabled()&&(D.onclick=this.Xg),e.client.doubleClickEnabled()&&(D.ondblclick=this.tb),D.setAttribute("aria-label","undefined"!=typeof k.ariaLabel?k.ariaLabel:k.text),D.setAttribute("tabindex","-1");var N=d();N.setAttribute("unselectable","on"),N.className=g.G(R.eventInner),k.backColor&&(N.style.background=k.backColor),k.fontColor&&(N.style.color=k.fontColor),N.style.borderColor="darker"===k.borderColor&&k.backColor?t.ColorUtil.darker(k.backColor,2):k.borderColor,k.backImage&&(N.style.backgroundImage="url("+k.backImage+")",k.backRepeat&&(N.style.backgroundRepeat=k.backRepeat)),D.appendChild(N);var L=e.start().getTime()===e.part.start.getTime(),H=e.rawend().getTime()===e.part.end.getTime();if(L||T||t.Util.addClass(D,this.G("_event_continueleft")),H||T||t.Util.addClass(D,this.G("_event_continueright")),e.client.barVisible()&&E>0&&!T){var B=100*e.part.barLeft/E,j=Math.ceil(100*e.part.barWidth/E);"PercentComplete"===this.durationBarMode&&(B=0,j=k.complete||0);var z=d();z.setAttribute("unselectable","on"),z.className=this.G(R.eventBar),z.style.position="absolute",k.barBackColor&&(z.style.backgroundColor=k.barBackColor);var U=d();U.setAttribute("unselectable","on"),U.className=this.G(R.eventBarInner),U.style.left=B+"%",U.style.width=0<j&&j<=1?"1px":j+"%",k.barColor&&(U.style.backgroundColor=k.barColor),k.barImageUrl&&(U.style.backgroundImage="url("+k.barImageUrl+")"),z.appendChild(U),D.appendChild(z)}if(D.row=a,k.areas){var F=t.Areas.resolvePosition(k.areas,g,e.part.left,e.part.width);(F=F.filter(function(e){return t.Areas.isVisible(e)})).forEach(function(n){var i=t.Areas.createArea(D,e,n);D.appendChild(i)})}if(D.event=e,S&&(g.multiselect.add(D.event,!0),g.multiselect.Jc(D)),function(){if("function"==typeof g.onBeforeEventDomAdd||"function"==typeof g.onBeforeEventDomRemove){var n={};if(n.control=g,n.e=e,n.element=null,D.domArgs=n,"function"==typeof g.onDomAddEvent&&g.onDomAddEvent(n),"function"==typeof g.onBeforeEventDomAdd&&g.onBeforeEventDomAdd(n),n.element){var i=N;if(i)if(n.Rc=i,t.Util.isReactComponent(n.element)){if(!g.wa.reactDOM)throw new t.Exception("Can't reach ReactDOM");g.wa.reactDOM.render(n.element,i)}else i.appendChild(n.element)}else T||(N.innerHTML=e.client.innerHTML())}else T||(N.innerHTML=e.client.innerHTML())}(),this.elements.events.push(D),c.appendChild(D),e.rendered=!0,g.cb()){if("function"==typeof g.onAfterEventRender){var G={};G.e=D.event,G.div=D,g.onAfterEventRender(G)}}else g.afterEventRender&&g.afterEventRender(D.event,D);return!0},this.ca=function(e,n){return g.ea.da()?t.Util.escapeTextHtml(e,n):t.Util.isNullOrUndefined(n)?t.Util.isNullOrUndefined(e)?"":e:n},this.cb=function(){return 2===g.api},this.Mk=function(){for(var e=0;e<this.elements.events.length;e++){var n=this.elements.events[e],i=n.event,o=i.part.dayIndex,r=g.zl(i.part.grid).rowlist[o],a=r.top,l=a+i.part.top,s="number"==typeof r.forcedHeight?r.forcedHeight:r.height,d=i.part.height;i.part.top+i.part.height>s&&(d=Math.max(0,s-i.part.top)),n.style.top=l+"px",n.style.height=d+"px",t.list(n.related).filter(function(e){return!!e.versionPart}).forEach(function(e){e.style.top=a+e.versionPart.top+"px"}),t.list(n.related).filter(function(e){return!e.versionPart&&("divLeft"===e.type||"divRight"===e.type)}).forEach(function(e){e.style.top=l+"px"})}},this.Ke=function(e){if(!e)return null;for(var t=0;t<g.elements.events.length;t++){var n=g.elements.events[t];if(n.event===e||n.event.data===e.data)return n}return null},this._l=function(e){var t=g.events.Ul(e.data);return t?(g.Ym(g.rowlist[t.part.dayIndex]),g.Uc(t,{forced:!0}),g.Ke(t)):null},this.Wc=function(e){var n=this;t.Areas.hideAreas(n,e),n.active||(t.Util.removeClass(n,g.G("_event_hover")),g.bq(n),u.source||b.Sl(),g.bubble&&"Bubble"===g.eventHoverHandling&&g.bubble.hideOnMouseOut())},this.cq=function(e){var t={};t.div=e,t.e=e.event,"function"==typeof this.onEventMouseOver&&this.onEventMouseOver(t),"function"==typeof this.onEventMouseEnter&&this.onEventMouseEnter(t)},this.bq=function(e){var t={};t.div=e,t.e=e.event,"function"==typeof this.onEventMouseOut&&this.onEventMouseOut(t),"function"==typeof this.onEventMouseLeave&&this.onEventMouseLeave(t)},this.dq=function(e){var t=e.row,n={};n.div=e,n.row=g.Yk(t),"function"==typeof this.onRowMouseOver&&this.onRowMouseOver(n)},this.eq=function(e){var t=e.row,n={};n.div=e,n.row=g.Yk(t),"function"==typeof this.onRowMouseOut&&this.onRowMouseOut(n)},this.Vc=function(e){g.cellBubble&&g.cellBubble.delayedHide();for(var n=this;n&&!n.event;)n=n.parentNode;var i=n.event;if(g.fq(n,e),!n.active){var o=[];"Disabled"===g.eventDeleteHandling||(n.event.cache?n.event.cache.deleteDisabled:n.event.data.deleteDisabled)||o.push({action:"JavaScript",v:"Hover",w:17,h:17,top:(g.durationBarVisible?g.durationBarHeight:0)+2,right:2,css:g.G(R.eventDelete),js:function(e){g.zb(e)}});var r=n.event.cache?n.event.cache.areas:n.event.data.areas;r&&r.length>0&&(r=t.Areas.resolvePosition(r,g,i.part.left,i.part.width),o=o.concat(r)),t.Areas.showAreas(n,n.event,null,o),t.Util.addClass(n,g.G("_event_hover")),g.cq(n)}"Disabled"===g.linkCreateHandling||u.source||(b.Nl(),b.Ak(),g.Ep()&&b.Ll(n)),g.ck(e),g.coords.insideEvent=n.event},this._j={},this.Zp=function(e){var n=g._j;if(t.Util.mouseButton(e).right)g.ub.call(this,e);else if(g.ionicEventClickFix){var i=n.gq;if(i){var o=t.mc(e);i.x===o.x&&i.y===o.y&&(g.Xg.call(this,e),e.preventDefault(),e.stopPropagation())}}},this.Xc=function(e){g.Aa(),"undefined"!=typeof t.Bubble&&(t.Bubble.hideActive(),t.Bubble.cancelShowing()),g.ck(e);var n=t.Util.mouseButton(e);if(e.preventDefault(),e.stopPropagation(),n.left){var i=e.shiftKey;if("Disabled"!==H.dk()&&i)return M.start(),!1;"w-resize"===this.style.cursor||"e-resize"===this.style.cursor?(l.$j=!0,l.zm=this,l.Qm=this.event,l.gq=t.mc(e),s().style.cursor=this.style.cursor,b.Ak()):("move"===this.style.cursor||"Full"===g.moveBy&&this.event.client.moveEnabled())&&g.xo(this,e)}t.Menu&&t.Menu.active&&(t.Menu.active.hide(),t.Menu.active=null)},this.xo=function(e,n){var i=g._j;g.ck(n),i.hq=!0,i._j=e,i.um=e.event,i.gq=t.mc(n),i.tm=t.mo3(e,n).x,i.ym=g.getDate(g.coords.x,!0),b.Ak()},this.Yc={};var P=g.Yc;"undefined"==typeof t.Global.touch&&(t.Global.touch={}),t.Global.touch.active=!1,t.Global.touch.start=!1,P.ak=[],P.$p=function(e){if(!t.Global.touch.active&&!t.Global.touch.start){t.Menu&&t.Menu.touchPosition(e),e.stopPropagation(),P.iq(),t.Global.touch.start=!0,t.Global.touch.active=!1;var n=this;g.coords=P.jq(e),P.ak.push(window.setTimeout(function(){t.Global.touch.active=!0,t.Global.touch.start=!1,e.preventDefault();var o=n.event;switch(g.eventTapAndHoldHandling){case"Move":if(o.client.moveEnabled()){var r=i(e);P.xo(n,r)}break;case"ContextMenu":t.Menu&&t.Menu.touchPosition(e);var a=o.client.contextMenu();a?a.show(o):g.contextMenu&&g.contextMenu.show(o)}},g.tapAndHoldTimeout))}},P._p=function(e){P.iq(),t.Global.touch.start=!1},P.aq=function(e){if(!t.Util.isMouseEvent(e)){if(P.iq(),t.Global.touch.start){t.Global.touch.start=!1,e.preventDefault(),e.stopPropagation();var n=this;window.setTimeout(function(){g.qb(n,e)})}window.setTimeout(function(){t.Global.touch.start=!1,t.Global.touch.active=!1},500)}},P.Oo=function(e){t.Global.touch.active||t.Global.touch.start||e.touches.length>1||"Disabled"===g.timeRangeSelectedHandling||(P.iq(),t.Global.touch.start=!0,t.Global.touch.active=!1,P.ak.push(window.setTimeout(function(){t.Global.touch.active=!0,t.Global.touch.start=!1,e.preventDefault(),g.coords=P.jq(e),P.Am=g.kq()},g.tapAndHoldTimeout)),g.coords=P.jq(e))},P.Po=function(e){if(P.iq(),t.Global.touch.start=!1,l.zm)return e.preventDefault(),void P.lq();if(t.Global.touch.active){if(e.preventDefault(),g.coords=P.jq(e),l._j)return void P.mq();if(P.Am){var n=P.Am;n.end={x:Math.floor(g.coords.x/g.cellWidth),time:g.getDate(g.coords.x,!0)},g.Uk(n)}}},P.debug=function(e){},P.Qo=function(e){if(P.iq(),t.Global.touch.active){if(l._j){e.preventDefault();var n=l.um;if(g!==l.qn.calendar)return;var i=l.qn.start,o=l.qn.end,r="Days"!==g.viewType?l.qn.row.id:null,a=l.tn&&n.part.external,d=l.qn.overlapping,c=!l.qn.allowed;if(t.Util.removeClass(l._j,g.G(g.nq.eventMovingSource)),t.de(l.qn),g.xn(),l.qn.calendar=null,s().style.cursor="",l._j=null,l.um=null,l.qn=null,g.on.clear(),d||c||g.on.forbidden||g.on.invalid)return;g.Ib(n,i,o,r,a)}if(P.Am){var u=P.Am;P.Am=null,(h=g.elements.range2)&&h.overlapping?g.clearSelection():g.Qk(u)}}else if(t.Global.touch.start){if(g.coords.x<g.getScrollX())return;var h;u=g.kq(),g.Uk(u),(h=g.elements.range2)&&h.overlapping?g.clearSelection():g.Qk(u)}window.setTimeout(function(){t.Global.touch.start=!1,t.Global.touch.active=!1},500)},P.iq=function(){for(var e=0;e<P.ak.length;e++)clearTimeout(P.ak[e]);P.ak=[]},P.jq=function(e){function n(e,n,i){var o=t.abs(i);return{x:e-o.x,y:n-o.y,toString:function(){return"x: "+this.x+", y:"+this.y}}}var i=e.touches?e.touches[0]:e,o=i.pageX,r=i.pageY,a=n(o,r,g.cj);if(a.grid="main",g.Bj.top.enabled()){var l=g.Bj.top,s=n(o,r,l.divCells);s.y>0&&s.y<=l.height&&((a=s).grid="top")}if(g.Bj.bottom.enabled()){var d=n(o,r,g.Bj.bottom.divCells);d.y>0&&d.y<=l.height&&((a=d).grid="bottom")}return a},P.xo=function(e,n){l._j=e,l.um=e.event,l.gq=n;var i=t.abs(e);l.tm=n.x-i.x,l.ym=g.getDate(g.coords.x,!0),l.qn=g.db(e),g.Nm()},P.lq=function(){l.Pm||(l.Pm=g.db(l.zm)),g.rn(),g.Sd({x:g.coords.x,y:g.coords.y,grid:g.coords.grid})},P.mq=function(){l.qn&&l.qn.calendar!==g&&g.xn(),l.qn||(l.qn=g.db(l._j)),l.qn.calendar.Nm(),g.Sd({x:g.coords.x,y:g.coords.y,grid:g.coords.grid})},this.fq=function(e,n){var i=this.eventResizeMargin,o=this.eventMoveMargin,r=e;if("undefined"!=typeof l){var a=t.mo3(e,n);if(a&&(g.eventOffset=a,!l.zm&&!l._j)){var s=r.event.part.start.toString()===r.event.start().toString(),d=r.event.part.end.toString()===r.event.rawend().toString();"Top"===g.moveBy&&a.y<=o&&r.event.client.moveEnabled()&&"Disabled"!==g.eventMoveHandling?e.style.cursor="move":("Top"===g.moveBy||"Full"===g.moveBy)&&a.x<=i&&r.event.client.resizeEnabled()&&"Disabled"!==g.eventResizeHandling?s?(e.style.cursor="w-resize",e.dpBorder="left"):e.style.cursor="not-allowed":"Left"===g.moveBy&&a.x<=o&&r.event.client.moveEnabled()&&"Disabled"!==g.eventMoveHandling?e.style.cursor="move":e.offsetWidth-a.x<=i&&r.event.client.resizeEnabled()&&"Disabled"!==g.eventResizeHandling?d?(e.style.cursor="e-resize",e.dpBorder="right"):e.style.cursor="not-allowed":l.zm||l._j||(e.style.cursor=r.event.client.clickEnabled()&&"Disabled"!==g.eventClickHandling?"pointer":"default"),"undefined"==typeof t.Bubble||!g.bubble||"Bubble"!==g.eventHoverHandling||"default"!==e.style.cursor&&"pointer"!==e.style.cursor||(this.Be=a,g.bubble.showEvent(e.event))}}},this.Vm=function(){return"Days"!==this.viewType?this.itline.length:Math.floor(1440/this.cellDuration)},this.Rk=function(e){if(!(e=e||l.Am||g.Tk))return null;var n=g.rowlist[e.start.y];if(!n)return null;var i,o,r=e.oq?e.oq:e,a=r.end.time>r.start.time,s=n.id,d=a?r.start.x:r.end.x,c=a?r.end.x:r.start.x,u=n.start.getTime()-this.kb().getTime(),h=g.snapToGrid&&g.snapToGridTimeRangeSelecting;e.forceSnap&&(h=!0),h?(i=this.itline[d].start.addTime(u),o=this.itline[c].end.addTime(u)):a?(i=r.start.time,o=r.end.time):(i=r.end.time,o=r.start.time);var p=new t.Selection(i,o,s,g);return p.allowed=!e.div||!e.div.overlapping,p},this.sc=function(e){var n=e.parentNode,i=g.eventEditMinWidth,o=(e.event.text()||"").trim(),r=document.createElement("textarea");return r.style.position="absolute",r.style.width=(e.offsetWidth<i?i:e.offsetWidth-2)+"px",r.style.height=e.offsetHeight-2+"px",r.style.fontFamily=t.gs(e,"fontFamily")||t.gs(e,"font-family"),r.style.fontSize=t.gs(e,"fontSize")||t.gs(e,"font-size"),r.style.left=e.offsetLeft+"px",r.style.top=e.offsetTop+"px",r.style.border="1px solid black",r.style.padding="0px",r.style.marginTop="0px",r.style.backgroundColor="white",r.value=o,r.event=e.event,n.appendChild(r),r},this.pq=function(e){var t=m.Wh();t.sort(function(e,t){var n=e.event,i=t.event;return n.part.dayIndex!==i.part.dayIndex?n.part.dayIndex-i.part.dayIndex:n.start()!==i.start()?n.start().getTime()-i.start().getTime():i.end().getTime()-n.end().getTime()});var n=t.indexOf(e);return-1===n?null:n+1<t.length?t[n+1]:t[0]},this.rb=function(e){if(e&&(l.qq&&l.qq.blur(),e.event)){var n=this.sc(e);if(l.qq=n,t.re(n,t.touch.start,function(e){e.stopPropagation()}),n.onblur=function(){if(n.onblur=null,l.qq===n&&(l.qq=null),n.parentNode&&n.parentNode.removeChild(n),e.event){var t=(e.event.text(),n.value);g.Sb(e.event,t,n.canceling)}},n.onmousedown=function(e){e.stopPropagation&&e.stopPropagation()},n.cancel=function(){l.qq&&(l.qq.canceling=!0,l.qq.blur())},n.onkeydown=function(t){var n=t.keyCode;if(13===n&&(t.stopPropagation(),this.onblur()),27===n)l.qq.cancel();else if(9===n&&g.eventEditTabNext){var i=g.pq(e);return l.qq.cancel(),i&&setTimeout(function(){g.rb(i)},0),!1}},"function"==typeof g.onAfterEventEditRender){var i={};i.element=n,i.e=e.event,g.onAfterEventEditRender(i)}n.select(),n.focus()}},this.rq={},this.rq.resource="undefined"!=typeof t.Bubble?new t.Bubble:{showResource:function(){},hideOnMouseOut:function(){}},this.rq.cell="undefined"!=typeof t.Bubble?new t.Bubble:{showResource:function(){},hideOnMouseOut:function(){}},this.Pn=function(e){var n=this.row;if("undefined"!=typeof t.Bubble){var i=g.Yk(n);i.div=this,g.resourceBubble?g.resourceBubble.showResource(i):n.bubbleHtml&&g.rq.resource.showResource(i)}},this.Nn=function(e){var t=this;t.active||(t.active=!0,g.dq(t))},this.On=function(e){delete this.active,g.eq(this)},this.Qn=function(e){"undefined"!=typeof t.Bubble&&g.resourceBubble?g.resourceBubble.hideOnMouseOut():g.rq.resource.hideOnMouseOut();var n=this.firstChild;t.Areas.hideAreas(n,e),n.data=null},this.Rn=function(e){c.row&&(k.cancelClick=!0,setTimeout(function(){k.cancelClick=!1},100))},this.Li=function(){if("None"!==g.timeHeaderPosition&&this.timeHeader){this.P.timeHeader={},g.elements.timeHeader.length>0&&(g.wl(),g.elements.timeHeader=[]);var e=d();e.style.position="relative",this.nav.timeHeader=e;for(var n=0;n<this.timeHeader.length;n++)for(var i=this.timeHeader[n],o=0;o<i.length;o++)this.sq(o,n);var r=this.divNorth;if(1===r.childNodes.length)r.replaceChild(e,r.childNodes[0]);else{if(t.browser.ie&&r&&r.firstChild){for(var a=[],l=0;l<r.firstChild.childNodes.length;l++)a.push(r.firstChild.childNodes[l]);t.de(a)}r.innerHTML="",r.appendChild(e)}var s=this.rj();r.style.width=s+5e3+"px",s>0&&(this.divStretch.style.width=s+"px"),g.tq()}},this.ta=function(){if(g.divCorner){var e=g.divCorner&&g.divCorner.domArgs;if(g.divCorner.domArgs=null,e&&("function"==typeof g.onBeforeCornerDomRemove&&g.onBeforeCornerDomRemove(e),"function"==typeof g.onBeforeCornerDomAdd&&g.wa.reactDOM)){var n=g.divCorner;if(n&&t.Util.isReactComponent(e.element)){if(!g.wa.reactDOM)throw new t.Exception("Can't reach ReactDOM");g.wa.reactDOM.unmountComponentAtNode(n)}}}},this.Vj=function(e,n){var i=null,o=this.ea.Uj(),r=e.start;switch(n=n||this.cellGroupBy){case"Minute":i=r.toString("m");break;case"Hour":i="Clock12Hours"===g.ea.uq()?r.toString("h tt",o):r.toString("H",o);break;case"Day":i=r.toString(o.datePattern);break;case"Week":i=1===H.vq()?r.weekNumberISO():r.weekNumber();break;case"Month":i=r.toString("MMMM yyyy",o);break;case"Quarter":i="Q"+Math.floor(r.getMonth()/3+1);break;case"Year":i=r.toString("yyyy");break;case"None":i="";break;case"Cell":i=this.wq(r,(e.end.ticks-e.start.ticks)/6e4);break;default:throw new t.Exception("Invalid groupBy value: "+n)}return i},this.wq=function(e,t){var n=this.ea.Uj();return(t=t||this.cellDuration)<1?e.toString("ss"):t<60?e.toString("mm"):t<1440?"Clock12Hours"===g.ea.uq()?e.toString("h tt",n):e.toString("H",n):t<10080?e.toString("d"):10080===t?1===H.vq()?e.weekNumberISO():e.weekNumber():e.toString("MMMM yyyy",n)},this.Qj=function(e){var n=this.scale;switch(n){case"Cell":throw new t.Exception("Invalid scale: Cell");case"Manual":throw new t.Exception("Internal error (addScaleSize in Manual mode)");case"CellDuration":return e.addMinutes(this.cellDuration);default:return this.Tj(e,n,!0)}},this.Tj=function(e,n,i){var o,r;i?(r=this.startDate.addDays("Days"!==this.viewType?this.days:1),"Manual"===g.scale&&(r=g.Sj())):(r=g.Sj(),"Days"===g.viewType&&(r=g.startDate.addDays(1)));var a=60;switch(n=n||this.cellGroupBy){case"Minute":e.getMinutes()+e.getSeconds()+e.getMilliseconds()>0&&(e=e.getDatePart().addHours(e.getHours()).addMinutes(e.getMinutes())),o=e.addMinutes(1);break;case"Hour":e.getHours()+e.getMinutes()+e.getSeconds()+e.getMilliseconds()>0&&(e=e.getDatePart().addHours(e.getHours())),o=e.addHours(1);break;case"Day":o=e.getDatePart().addDays(1);break;case"Week":for(o=e.getDatePart().addDays(1);o.dayOfWeek()!==H.vq();)o=o.addDays(1);break;case"Month":o=(o=(e=e.getDatePart()).addMonths(1)).firstDayOfMonth();for(var l=t.DateUtil.diff(o,e)/6e4%a==0;!l;)o=o.addHours(1),l=t.DateUtil.diff(o,e)/6e4%a==0;break;case"Quarter":for(o=(o=(e=e.getDatePart()).addMonths(1)).firstDayOfMonth();o.getMonth()%3;)o=o.addMonths(1);for(l=t.DateUtil.diff(o,e)/6e4%a==0;!l;)o=o.addHours(1),l=t.DateUtil.diff(o,e)/6e4%a==0;break;case"Year":for(o=(o=(e=e.getDatePart()).addYears(1)).firstDayOfYear(),l=t.DateUtil.diff(o,e)/6e4%a==0;!l;)o=o.addHours(1),l=t.DateUtil.diff(o,e)/6e4%a==0;break;case"None":o=r;break;case"Cell":var s=this.Zj(e);o=s.current?s.current.end:s.past?s.previous.end:s.next.start;break;default:throw new t.Exception(i?"Invalid scale value: "+n:"Invalid groupBy value: "+n)}return o.getTime()>r.getTime()&&(o=r),o},this.nq={},this.nq.timeheadercol="_timeheadercol",this.nq.timeheadercolInner="_timeheadercol_inner",this.nq.resourcedivider="_resourcedivider",this.nq.eventFloat="_event_float",this.nq.eventFloatInner="_event_float_inner",this.nq.event="_event",this.nq.eventInner="_event_inner",this.nq.eventBar="_event_bar",this.nq.eventBarInner="_event_bar_inner",this.nq.eventDelete="_event_delete",this.nq.eventLine="_event_line",this.nq.eventMovingSource="_event_moving_source";var R=this.nq;this.sq=function(e,n){var i=this.nav.timeHeader,o=this.timeHeader[n][e],r=n<this.timeHeader.length-1,a=o.left,l=o.width,s=B.an(n),c=s.top,u=s.height,h=d();h.style.position="absolute",h.style.top=c+"px",h.style.left=a+"px",h.style.width=l+"px",h.style.height=u+"px",o.toolTip&&(h.title=o.toolTip),h.setAttribute("aria-hidden","true"),o.cssClass&&t.Util.addClass(h,o.cssClass),h.setAttribute("unselectable","on"),h.style.KhtmlUserSelect="none",h.style.MozUserSelect="none",h.style.webkitUserSelect="none",h.oncontextmenu=function(){return!1},h.cell={},h.cell.start=o.start,h.cell.end=o.end,h.cell.level=n,h.cell.th=o,h.onclick=this.Wn,h.oncontextmenu=this.Xn,t.re(h,t.touch.start,function(e){e.stopPropagation()}),h.style.overflow="hidden",g.timeHeaderTextWrappingEnabled||(h.style.whiteSpace="nowrap");var p=d();p.setAttribute("unselectable","on"),p.innerHTML=g.ca(o.text,o.innerHTML),o.backColor&&(p.style.background=o.backColor),o.fontColor&&(p.style.color=o.fontColor);var f=this.G(R.timeheadercol),m=this.G(R.timeheadercolInner);r&&(f=this.G("_timeheadergroup"),m=this.G("_timeheadergroup_inner")),t.Util.addClass(h,f),t.Util.addClass(p,m),t.Util.addClass(h,g.G("_timeheader_cell")),t.Util.addClass(p,g.G("_timeheader_cell_inner")),function(){if("function"==typeof g.onBeforeTimeHeaderDomAdd||"function"==typeof g.onBeforeTimeHeaderDomRemove){var e={};if(e.control=g,e.header={},e.header.start=o.start,e.header.end=o.end,e.header.level=n,e.element=null,h.domArgs=e,"function"==typeof g.onBeforeTimeHeaderDomAdd){g.onBeforeTimeHeaderDomAdd(e);var i=e.element;if(i){p.innerHTML="";var r=d();if(p.appendChild(r),e.Rc=r,t.Util.isReactComponent(i)){if(!g.wa.reactDOM)throw new t.Exception("Can't reach ReactDOM");g.wa.reactDOM.render(i,r)}else r.appendChild(i)}}}}(),h.appendChild(p);var v=t.Areas.resolvePosition(o.areas,g,a,l);t.Areas.attach(h,o,{areas:v}),this.P.timeHeader[e+"_"+n]=h,this.elements.timeHeader.push(h),i.appendChild(h)},this.xq=function(){var e=g.timeHeader,n=e.length-1;if(n<0)return null;for(var i=e[n],o=t.Date.now(),r=0;r<i.length;r++){var a=i[r];if(a.start<=o&&o<=a.end)return g.P.timeHeader[r+"_"+n]}return null},this.yq=null,this.tq=function(){var e=g.G("_timeheader_cell_now"),n=g.yq,i=g.xq();n!==i&&(t.Util.removeClass(n,e),t.Util.addClass(i,e),g.yq=i)},this.zq=null,this.Aq=function(){clearTimeout(g.zq),g.zq=setTimeout(function(){g.tq(),g.Aq()},5e3)},this.xl=function(){clearTimeout(g.zq)},this.Ck=function(){clearTimeout(g.zq),g.showCurrentTimeHeader&&(g.tq(),g.Aq())},this.kk=function(){return g.yi?void I.fo():(g.Mj().forEach(function(e){var t=e.getHeight()+e.marginBottom+e.marginTop;e.height!==t&&(g.Jk=!0),e.height=t}),void(g.Jk&&(g.P.drawArea=null)))},this.Ni=function(){g.Mj().forEach(function(e){if(!e.hidden){var t=g.zl(e.grid).divHeader;if(t){var n=e.index;if(t.rows[n])for(var i=0;i<t.rows[n].cells.length;i++){var o=t.rows[n].cells[i];g.Gn&&(o.style.top=e.top+"px");var r=e.height;o&&o.firstChild&&parseInt(o.firstChild.style.height,10)!==r&&(o.firstChild.style.height=r+"px")}}}}),g.Gn&&g.nav.resScrollSpace&&(g.nav.resScrollSpace.style.top=g.Ci+"px")},this.Fe=function(e){var n=this.separators[e];n.location=n.location||n.Location,n.color=n.color||n.Color,n.layer=n.layer||n.Layer,n.width=n.width||n.Width,n.opacity=n.opacity||n.Opacity;var i=new t.Date(n.location),o=n.color,r=n.width?n.width:1,a=!!n.layer&&"AboveEvents"===n.layer,l=n.opacity?n.opacity:100;if(!(i.getTime()<g.kb().getTime()||i.getTime()>=g.Sj().getTime())){var s=this.getPixels(i);if(!s.cut&&!(s.left<0||s.left>g.rj())){var c=d();c.style.width=r+"px",c.style.height=g.Ci+"px",c.style.position="absolute",c.style.left=s.left-1+"px",c.style.top="0px",c.style.backgroundColor=o,c.style.opacity=l/100,c.style.filter="alpha(opacity="+l+")",c.className=g.G("_separator"),n.cssClass&&(c.className+=" "+n.cssClass),a?this.divSeparatorsAbove.appendChild(c):this.divSeparators.appendChild(c),this.elements.separators.push(c)}}},this.Wd=function(e){},this.Bp=function(e){if("Disabled"===g.timeRangeDoubleClickHandling)return!1;if(l.Bq&&(clearTimeout(l.Bq),l.Bq=null),g.ck(e),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,g.Cq(g.coords)){var t=g.Rk(g.Tk);g.Rb(t.start,t.end,t.resource)}else l.Am=g.kq(),l.Am&&(l.Dq=g,t=g.Rk(l.Am),g.Rb(t.start,t.end,t.resource),g.Tk=l.Am);l.Am=null},this.tp=function(e){if(!t.Global.touch.start&&!t.Global.touch.active){if(g.Eq(),g.ve(),g.ck(e),l.Fq)return!1;var n=t.Util.mouseButton(e);if(g.Gq())return!1;if(n.middle||n.right&&g.Cq(g.coords))return!1;if(g.Cq(g.coords))return!1;var i=n.left?"left":n.right?"right":n.middle?"middle":"unknown";g.Hq=i;var o=e.metaKey,r=e.shiftKey,a=e.ctrlKey||o,s={action:"None"};if("Disabled"!==H.dk()&&r?s.action="RectangleSelect":"Disabled"!==g.timeRangeSelectedHandling&&(s.action="TimeRangeSelect"),s.shift=r,s.ctrl=r,s.meta=o,s.originalEvent=e,s.button=i,s.preventDefault=function(){s.action="None"},"function"==typeof g.onGridMouseDown&&g.onGridMouseDown(s),"None"===s.action)return"undefined"!=typeof t.Menu&&t.Menu.hide({calendar:g}),e.preventDefault(),e.stopPropagation(),!1;if("RectangleSelect"===s.action){var d={};return d.start=g.coords,d.calendar=g,l.Fq=d,!1}return g.allowMultiRange&&!a&&N.clear(),!g.rl(g.coords.y,g.coords.grid).element.isNewRow&&(l.Am=g.kq(),l.Am&&(l.Am.ctrl=a,l.Dq=g),!1)}},this.kq=function(){var e={},t=g.Xj(g.coords.x).x,n=g.getDate(g.coords.x,!0);return e.start={y:g.rl(g.coords.y,g.coords.grid).i,x:t,grid:g.coords.grid,time:n},e.end={x:t,time:n},g.Cl(g.rl(g.coords.y,g.coords.grid).i,g.coords.grid)?null:(e.calendar=g,g.Uk(e),e)},this.sn=function(){g.Rd();var e=l.Pm,n=l.zm;!function(){var i=g.Iq,o={start:e.start,end:g.kh(e.end)};e.original=o;var r="left"===l.zm.dpBorder?"start":"end",a=e.original;if(!a||!i||i.start!==a.start||i.end!==a.end){S.clear(),S.gn(),i&&(t.Util.removeClass(e,i.cssClass),e.firstChild.innerHTML="");var s=g.rowlist[n.event.part.dayIndex],d={};d.start=o.start,d.end=o.end,d.duration=new t.Duration(d.start,d.end),d.row=g.Yk(s),d.e=n.event,d.allowed=!0,d.resizing=r,d.what=r,d.anchor="end"===d.what?o.start:o.end,d.left={},d.left.html=d.start.toString(g.eventResizingStartEndFormat,H.Uj()),d.left.enabled=g.eventResizingStartEndEnabled,d.left.space=5,d.left.width=null,d.left.height=g.eventHeight,d.right={},d.right.html=d.end.toString(g.eventResizingStartEndFormat,H.Uj()),d.right.enabled=g.eventResizingStartEndEnabled,d.right.space=5,d.right.width=null,d.right.height=g.eventHeight,d.cssClass=null,d.html=null,d.overlapping=d.row.events.forRange(d.start,d.end).filter(function(e){return!g.Fc(e,d.e)}).length>0,d.shift=g.coords.shift,d.ctrl=g.coords.ctrl,d.meta=g.coords.meta,d.alt=g.coords.alt,d.multiresize=S.dn();var c={};c.event=n.event,c.start=d.start,c.end=d.end,d.multiresize.splice(0,0,c),g.Iq=o,"function"==typeof g.onEventResizing&&g.onEventResizing(d),S.list=t.list(d.multiresize,!0),S.list.splice(0,1),S.kn(),e.allowed=d.allowed,t.Util.addClass(e,d.cssClass),d.html&&(e.firstChild.innerHTML=d.html);var u=d.start,h=g.Ng(d.end);if(e.finalStart=u,e.finalEnd=h,"Days"===g.viewType){var p=s.start.getTime()-g.kb().getTime();u=u.addTime(-p),h=h.addTime(-p)}var f=t.DateUtil.diff(u,h);f=t.Util.atLeast(f,1);var m=(H.El(f),g.snapToGrid&&g.snapToGridEventResizing),v=m?g.getPixels(u).boxLeft:g.getPixels(u).left,y=m?g.getPixels(h).boxRight:g.getPixels(h).left;e.style.left=v+"px",e.style.width=y-v+"px",e.left=v,e.width=y-v,g.un(l.Pm,d),g.vn(l.Pm,d)}}()},this.Ap=function(e){if(l.Fq)return e.cancelBubble=!0,e.preventDefault(),l.vf(e),!1;if(g._j={},g.Tk&&t.Util.mouseButton(e).left){var n=g.Tk;if(g.Cq(g.coords)){var i=function(e){return function(){l.Bq=null;var t=g.Rk(e);if(t){var n={};n.start=t.start,n.end=t.end,n.resource=t.resource,n.preventDefault=function(){n.preventDefault.value=!0},"function"==typeof g.onTimeRangeClick&&g.onTimeRangeClick(n),n.preventDefault.value||"function"==typeof g.onTimeRangeClicked&&g.onTimeRangeClicked(n)}}};"Disabled"!=g.timeRangeClickHandling&&("Disabled"===g.timeRangeDoubleClickHandling?i(n)():(clearTimeout(l.Bq),l.Bq=setTimeout(i(n),g.doubleClickTimeout)))}}t.Util.mouseButton(e).right&&g.Jq(e)},this.Jq=function(e){if("Disabled"!==g.timeRangeSelectedHandling&&"Disabled"!==g.timeRangeRightClickHandling){var t=(l.Am||g.Tk).args,n=g.rl(g.coords.y);if(g.Cl(n.i))return void(l.Am=null);var i=null;if(!(i=g.Cq(g.coords)?g.Rk(g.Tk):g.Rk()))return void(l.Am=null);if(!t.ignoreDisabledCells&&g.bc(i.start,i.end,i.resource))return l.Am=null,void g.clearSelection();i.end=g.kh(i.end),(t={}).start=i.start,t.end=i.end,t.resource=i.resource,t.ctrl=e.ctrlKey,t.shift=e.shiftKey,t.meta=e.metaKey,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof g.onTimeRangeRightClick&&(g.onTimeRangeRightClick(t),t.preventDefault.value)||("ContextMenu"===g.timeRangeRightClickHandling&&g.contextMenuSelection&&g.contextMenuSelection.show(i),"function"==typeof g.onTimeRangeRightClicked&&g.onTimeRangeRightClicked(t))}},this.Gq=function(){return!!(l.zm||l._j||l.Am||l.tn)||!!g._j.hq},this.dragInProgress=function(){return g.Gq()},this.ck=function(e){var n=t.mo3(g.cj,e);if((n=n||{}).grid="main",g.Bj.top.enabled()){var i=g.Bj.top,o=t.mo3(i.divCells,e);o&&o.y>0&&o.y<=i.height&&((n=o).grid="top")}if(g.Bj.bottom.enabled()){var r=g.Bj.bottom,a=t.mo3(r.divCells,e);a&&a.y>0&&a.y<=r.height&&((n=a).grid="bottom")}n.stamp=n.grid+"_"+n.x+"_"+n.y,g.coords&&g.coords.stamp===n.stamp||(g.coords=n)},this.getCoords=function(){if(!g.coords)return null;var e={};e.x=g.coords.x,e.y=g.coords.y,e.grid=g.coords.grid;var n=g.rl(e.y,e.grid).element;return e.row=n,e.time=g.getDate(e.x,!0),e.cell=g.cells.findByPixels(e.x,e.y,e.grid)[0],e.event=g.coords.insideEvent?g.coords.insideEvent:null,e.eventOffset=null,e.event&&(e.eventOffset=t.Util.copyProps(g.eventOffset,{},["x","y"])),e},this.rp=!0,this.yn=function(e){if(!t.Global.touch.active){var n=t.mc(e);if(g.ck(e),e.insideMainD=!0,g.rp=!0,window.event&&window.event.srcElement&&(window.event.srcElement.inside=!0),g._j.hq&&t.distance(g._j.gq,n)>2&&(t.Util.copyProps(g._j,l),s().style.cursor="move",g._j={}),l.zm&&l.Qm.calendar===g)l.zm.event||(l.zm.event=l.Qm),g.Kq();else if(l.um){var i=(c=l.um.calendar)!==g;i&&c&&l.um.calendar.Aa(),l.um.part.external=i,g.Lq()}else l.Am&&l.Am.calendar===g?(l.Am.moved=!0,g.Mq()):u.source?b.Rg(u.source.coords,g.coords):l.Fq&&(l.Fq.moved=!0,clearTimeout(M.Nq),M.Nq=setTimeout(function(){M.draw()},0));if("Disabled"!==g.crosshairType&&g.Oq(),g.Pq(),g.cellBubble&&g.coords&&g.rowlist&&g.rowlist.length>0&&!g.coords.insideEvent){var o=g.Xj(g.coords.x).x,r=g.rl(g.coords.y).i;if(0<=r&&r<g.rowlist.length&&0<=o&&o<g.itline.length){var a={};a.calendar=g,a.start=g.itline[o].start,a.end=g.itline[o].end,a.resource=g.rowlist[r].id,a.toJSON=function(){var e={};return e.start=this.start,e.end=this.end,e.resource=this.resource,e},g.cellBubble.showCell(a)}}if(l.tn){if(g.Eq(),l.Qq&&s().removeChild(l.Qq),l.Qq=null,!l.qn&&g.coords&&g.rowlist.length>0){if(!l.um){l._j=l.tn.Rq||{};var d=(l.tn.Rq?l.tn.Rq.event:null)||l.tn.event;if(d)if(g!==d.calendar){var c=d.calendar,h=d,p=t.Util.copyProps(d.data);(d=new t.Event(p)).calendar=c,d.part.duration=c.Dm(h),d.part.external=!0}else d.part.external=!1;else e=g.Sq(),(d=new t.Event(e)).calendar=g,d.calendar=null,d.part.duration=1e3*l.tn.duration,d.part.external=!0;l._j.event||(l._j.event=d),l.um=d}l.qn=g.db(l.um)}e.cancelBubble=!0}g.Sd({x:g.coords.x,y:g.coords.y,grid:g.coords.grid})}},this.Sq=function(){var e,n=g.itline[0].start,i=l.tn.Tq;if(i)(e=t.Util.copyProps(i,{})).start=n,e.end=n.addSeconds(l.tn.duration);else{e={id:l.tn.id,start:n,end:n.addSeconds(l.tn.duration),text:l.tn.text};var o=l.tn.Uq;if(o){var r=["duration","element","remove","id","text"];for(var a in o)t.contains(r,a)||(e[a]=o[a])}}return e},this.Sd=function(e){var t=l.zm||l.Am||"main"!==e.grid;if("Always"===g.autoScroll||"Drag"===g.autoScroll&&(l._j||l.zm||l.Am||l.Fq)){var n=g.nav.scroll;e.x-=n.scrollLeft,e.x+=v.ij,e.y-=n.scrollTop;var i=n.clientWidth,o=n.clientHeight,r=30,a=e.x<r?e.x:0,s=i-e.x<r?i-e.x:0,d=e.y<r?e.y:0,c=o-e.y<r?o-e.y:0,u=0,h=0;a&&(u=-50*f(a,r)),s&&(u=50*f(s,r)),d&&(h=-50*f(d,r)/2),c&&(h=50*f(d,r)/2),t&&(h=0),u||h?g.te(u,h):g.ve()}},this.Mq=function(){var e=l.Am,t=g.Xj(g.coords.x).x,n=g.getDate(g.coords.x,!0);e.end={x:t,time:n},g.Uk(e)},this.Kq=function(){l.Pm||(l.Pm=g.db(l.zm)),g.rn()},this.Lq=function(){l.qn&&l.qn.calendar!==g&&l.qn.calendar&&(l.qn.calendar.Aa(),l.qn.calendar=null,t.de(l.qn),l.qn=null),l.qn||(window.navigator.userAgent.indexOf("Chrome/61.0")>-1||t.Util.addClass(l._j,g.G(R.eventMovingSource)),l.qn=g.db(l.um)),g.Lm(),g.Nm()},this.Vq={};var M=this.Vq;M.start=function(){var e={};e.start=g.coords,e.calendar=g,l.Fq=e},M.draw=function(){var e=l.Fq;if(e){var n=l.Fq.start,i=g.coords;M.clear();var o,r,a,s,d,c,u,h,p={x:e.x,y:e.y,width:e.width,height:e.height};if(d=Math.min(n.x,i.x),u=Math.max(n.x,i.x),"Free"===H.dk()?(c=Math.min(n.y,i.y),h=Math.max(n.y,i.y)):"Row"===H.dk()&&(c=n.y,h=n.y),"Free"===H.dk())o=d,r=c,a=u-d,s=h-c;else{if("Row"!==H.dk())throw new t.Exception("Invalid DayPilot.Scheduler.rectangleSelectMode value: "+g.rectangleSelectMode);var f=g.rl(c).i,v=g.rowlist[f];if(r=v.top,s=v.height,g.snapToGrid&&g.snapToGridRectangleSelecting){o=g.Xj(d).cell.left;var y=g.Xj(u).cell;a=y.left+y.width-o}else o=d,a=u-d}var b=t.Util.div(g.divRectangle,o,r,a,s);if(b.style.boxSizing="border-box",b.className=g.G("_selectionrectangle"),e.x=o,e.y=r,e.width=a,e.height=s,!(e.x===p.x&&e.y===p.y&&e.width===p.width&&e.height===p.height||"function"!=typeof g.onRectangleEventSelecting&&"function"!=typeof g.onRectangleSelecting)){var w=g.rl(e.y).i,C=g.rl(e.y+e.height).i,x=g.nl({start:{y:w},end:{y:C}}),S={};S.events=m.mj(e.x,e.y,e.width,e.height).map(function(e){return e.event}),S.start=g.getDate(e.x,!0),S.end=g.getDate(e.x+e.width,!0),S.resources=x,S.visible=!0,"function"==typeof g.onRectangleEventSelecting&&g.onRectangleEventSelecting(S),"function"==typeof g.onRectangleSelecting&&g.onRectangleSelecting(S),S.visible||(b.style.display="none")}}},M.clear=function(){g.divRectangle.innerHTML="",g.elements.rectangle=[]},this.Wq=function(){if(!g.coords)return null;if(!g.xp())return null;if(!g.itline||0===g.itline.length)return null;var e=g.Xj(g.coords.x).x,t=g.rl(g.coords.y,g.coords.grid).element;return t?g.cells.findXy(e,t.index,g.coords.grid)[0]:null},this.Pq=function(){var e=this.Wq();if(this.hover.cell){if(this.hover.cell.x===e.x&&this.hover.cell.y===e.y&&this.hover.cell.grid===e.grid)return;this.sp()}this.hover.cell=e;var t={};t.cell=e,"function"==typeof this.onCellMouseOver&&this.onCellMouseOver(t),"function"==typeof this.onCellMouseEnter&&this.onCellMouseEnter(t)},this.sp=function(){if(this.hover.cell){var e={};e.cell=this.hover.cell,"function"==typeof this.onCellMouseOut&&this.onCellMouseOut(e),"function"==typeof this.onCellMouseLeave&&this.onCellMouseLeave(e),this.hover.cell=null}},this.hover={},this.Oq=function(){var e=g.Xq();if(e){var t=g.hover.crosshair;t&&t.x===e.x&&t.y===e.y&&t.grid===e.grid&&t.thX===e.thX||(g.hover.crosshair=e,this.Qd())}},this.Xq=function(){if(!g.coords)return null;if(!g.xp())return null;if(!g.itline||0===g.itline.length)return null;var e=g.rl(g.coords.y,g.coords.grid).element;if(!e)return null;var t=e.index,n=null,i=g.Xj(g.coords.x);i&&(n=i.x);var o=g.Yq(),r=null,a=g.Xm(o,g.coords.x);return a&&(r=a.x),{x:n,thX:r,y:t,grid:g.coords.grid}},this.Eq=function(){this.Bj.top.divCrosshair.innerHTML="",this.Bj.main.divCrosshair.innerHTML="",this.Bj.bottom.divCrosshair.innerHTML="",this.Zq=null,this.$q=null},this.Ba=function(){if(this.Eq(),g.hover.crosshair=null,this._q&&this._q.parentNode&&(this._q.parentNode.removeChild(this._q),this._q=null),this.ar){for(var e=0;e<this.ar.length;e++){var t=this.ar[e];t.parentNode&&t.parentNode.removeChild(t)}this.ar=null}this.Bi=-1,this.Ai=-1,this.br=null},this.Yq=function(){var e=this.timeHeader?this.timeHeader.length-1:1;return"number"==typeof g.crosshairTimeHeaderLevel&&g.crosshairTimeHeaderLevel<e&&g.crosshairTimeHeaderLevel>=0&&(e=g.crosshairTimeHeaderLevel),e},this.Qd=function(){if(g.coords&&g.xp()){var e=g.rl(g.coords.y,g.coords.grid).element;if(e){var t=g.Xj(g.coords.x).x,n=e.index,i=e.grid,o=g.zl(i),r=this.crosshairType;if(this.Zq||(this.Zq={}),"Full"===r){var a=this.itline[t];["top","main","bottom"].forEach(function(e){!function(e,t){var n,i=g.Bj[e],o=i.height,r=t.left;(n=g.Zq[e])||((n=d()).style.height=o+"px",n.style.position="absolute",n.style.top="0px",n.className=g.G("_crosshair_vertical"),g.Zq[e]=n,i.divCrosshair.appendChild(n)),n.style.left=r+"px",n.style.width=t.width+"px"}(e,a)});var l=e.top,s=e.height,c=g.rj();(y=g.$q)&&y.parentNode&&g.br!==i&&(y.parentNode.removeChild(y),y=null),y||((y=d()).style.width=c+"px",y.style.height=s+"px",y.style.position="absolute",y.style.top=l+"px",y.style.left="0px",y.className=g.G("_crosshair_horizontal"),g.$q=y,o.divCrosshair.appendChild(y)),y.style.top=l+"px",y.style.height=s+"px"}var u=g.Yq(),h=g.Xm(u,g.coords.x);if(h&&g.Bi!==h.x){g._q&&this._q.parentNode&&(g._q.parentNode.removeChild(g._q),g._q=null),s=B.an(u).height,(y=d()).style.width=h.cell.width+"px",y.style.height=s+"px",y.style.left="0px",y.style.top="0px",y.style.position="absolute",y.className=g.G("_crosshair_top"),g._q=y;var p=this.divNorth,f=u;g.nav.timeHeader?g.P.timeHeader[h.x+"_"+f].appendChild(y):p&&p.firstChild.rows[f].cells[t]&&p.firstChild.rows[f].cells[t].firstChild.appendChild(y)}if(g.Ai!==n||g.br!==i){if(g.ar){for(var m=0;m<g.ar.length;m++){var v=g.ar[m];v.parentNode&&v.parentNode.removeChild(v)}g.ar=null}if(g.ar=[],o.divHeader.rows[n])for(m=0;m<o.divHeader.rows[n].cells.length;m++){var y;c=g.uj(),(y=d()).style.width=c+"px",y.style.height=e.height+"px",y.style.left="0px",y.style.top="0px",y.style.position="absolute",y.className=g.G("_crosshair_left"),g.ar.push(y),o.divHeader.rows[n].cells[m].firstChild.appendChild(y)}}h&&(g.Bi=h.x),g.Ai=n,g.br=i}}},this.Xm=function(e,t){var n=g.timeHeader[e];if(!n)return null;for(var i=0;i<n.length;i++){var o=n[i];if(t>=o.left&&t<o.left+o.width){var r={};return r.cell=o,r.x=i,r}}return null},this.cr=function(e){return g.Xm(g.timeHeader.length-1,e)},this.up=function(e){if(e.cancelBubble=!0,!g.allowDefaultContextMenu)return!1},this.Cq=function(e){var t=g.Tk;if(!t||!t.start||!t.end)return!1;var n=this.Zl(t.start.y),i=t.start.x<t.end.x;return e.x>=(i?t.start.x:t.end.x)*this.cellWidth&&e.x<=(i?t.end.x:t.start.x)*this.cellWidth+this.cellWidth&&e.y>=n.top&&e.y<=n.bottom&&e.grid===t.start.grid},this.Uk=function(e,n){function i(e,t){var n,i,o,l,c=e.end.time>e.start.time,u=e.start.y;if(!r&&e.start.time&&e.end.time)c?(o=e.start.time,l=e.end.time):(o=e.end.time,l=e.start.time),n=g.getPixels(o).left,i=g.getPixels(l).left;else{var h=g.itline[c?e.end.x:e.start.x];n=g.itline[c?e.start.x:e.end.x].left,i=h.left+h.width}var p=i-n,f=g.elements.range2;if(!f){(f=d()).style.position="absolute",f.setAttribute("unselectable","on");var m=d();m.className=g.G("_shadow_inner"),f.appendChild(m),a.divShadow.appendChild(f)}return f.grid!==e.start.grid&&(f.parentNode.removeChild(f),a.divShadow.appendChild(f)),f.className=g.G("_shadow"),f.firstChild.innerHTML="",f.style.left=n+"px",f.style.top=s[u].top+"px",f.style.width=p+"px",f.style.height=s[u].height-1+"px",f.calendar=g,f.grid=e.start.grid,g.elements.range2=f,function(){f.overlapping=!1;var i=s[u];g.ln(f,i,n,p,null),t.ignoreDisabledCells||g.mn(f,c?e.start.time:e.end.time,c?e.end.time:e.start.time,i.id)}(),f}if((e=e||l.Am)&&e.calendar===g){var o=(n=n||{}).justDraw,r=g.snapToGrid&&g.snapToGridTimeRangeSelecting;e.forceSnap&&(r=!0);var a=g.zl(e.start.grid),s=a.rowlist;!function(){var n=e.end.time>=e.start.time,a=e.start.y,l=s[a];if(l&&!l.hidden){var d=g.itline[n?e.end.x:e.start.x],c=g.dr,u=g.itline[n?e.start.x:e.end.x].start.addTime(l.data.offset),h=d.end.addTime(l.data.offset);if(r||(n?(u=e.start.time,h=e.end.time):(u=e.end.time,h=e.start.time)),o||!c||c.start.getTime()!==u.getTime()||c.rawend.getTime()!==h.getTime()||c.resource!==s[a].id){var p={start:u,end:g.kh(h),rawend:h,resource:s[a].id},f={};f.anchor=n?p.start:p.end,f.start=p.start,f.end=p.end,f.duration=new t.Duration(u,h),f.resource=s[a].id,f.row=g.Yk(l),f.allowed=!0,f.ignoreDisabledCells=!1,f.left={},f.left.html=f.start.toString(g.timeRangeSelectingStartEndFormat,H.Uj()),f.left.enabled=g.timeRangeSelectingStartEndEnabled,f.left.space=5,f.left.width=null,f.left.height=g.eventHeight,f.right={},f.right.html=f.end.toString(g.timeRangeSelectingStartEndFormat,H.Uj()),f.right.enabled=g.timeRangeSelectingStartEndEnabled,f.right.space=5,f.right.width=null,f.right.height=g.eventHeight,f.overlapping=f.row.events.forRange(u,h).length>0,f.html=null,f.cssClass=null,f.button=g.Hq,g.dr=p,"function"!=typeof g.onTimeRangeSelecting||o||(g.onTimeRangeSelecting(f),f.resource=p.resource),f.end=g.Ng(f.end),e.args=f;var m=g.er(e);g.Sk(m,f.start,f.end);var v=i(m,f);f.html&&(v.firstChild.innerHTML=f.html),f.cssClass&&t.Util.addClass(v,f.cssClass),g.un(v,f),e.oq=m,e.disabled=!f.allowed,g.vn(v,f)}}}()}},this.er=function(e){return{start:{x:e.start.x,y:e.start.y,time:e.start.time,grid:e.start.grid},end:{x:e.end.x,time:e.end.time},disabled:e.disabled,calendar:e.calendar,args:e.args,forceSnap:e.forceSnap}},this.range={},this.range.all=function(){return g.multirange.get()},this.multirange={},this.multirange.get=function(){return N.get(!0)},this.multirange.add=function(e){if(!e)throw new t.Exception("Range not specified");if(!e.start||!e.end||!e.resource)throw new t.Exception("Invalid range specified");if(t.list(N.list).isEmpty()){var n=g.Rk();if(n){var i=g.fr(n.start,n.end,n.resource);g.gr.add(i)}}i=g.fr(e.start,e.end,e.resource),g.Uk(i),g.gr.add(i)},this.multirange.clear=function(){N.clear(),g.clearSelection(),g.dr=null},this.gr={};var N=this.gr;this.gr.list=[],this.gr.drawLaterTimeout=null,this.gr.drawLater=function(){clearTimeout(g.gr.drawLaterTimeout),g.gr.drawLaterTimeout=setTimeout(function(){N.list.forEach(function(e){g.elements.range2=null,g.Uk(e)})},0)},this.gr.clear=function(){t.de(t.list(N.list).map(function(e){return e.div})),N.list=[]},this.gr.add=function(e){e.div=g.elements.range2,g.elements.range2=null,g.xn(),N.list.push(e)},this.gr.get=function(e){var n=t.list(N.list).map(function(e){return g.Rk(e)});if(e&&n.isEmpty()){var i=g.Rk();i&&n.push(i)}return n},this.gr.dispatch=function(){if(g.allowMultiRange&&!l.Am){var e=t.list(N.list).last();g.Qk(e)}},this.hr=function(e){if("Disabled"===g.timeRangeSelectedHandling)return!1;if(!t.Global.touch.active&&!t.Global.touch.start){var n=t.Util.mouseButton(e);if(!l.Am&&!l.Fq&&!(g.Tk&&g.Cq(g.coords)&&(n.right||n.middle)||g.Cl(g.rl(g.coords.y).i))){var i={},o=g.Xj(g.coords.x).x;i.start={y:g.rl(g.coords.y).i,x:o,grid:g.coords.grid},i.end={x:o},i.calendar=g,g.Tk=i,g.Qk(i)}}},this.ak={},this.ak.Za=null,this.ak.drawCells=null,this.ak.drawRows=null,this.ak.click=null,this.ak.resClick=[],this.ak.updateFloats=null,this.Xi=function(e,n){if(!g.T){n=n||{},"undefined"==typeof t.Bubble||n.dontHideBubble||t.Bubble.hideActive(),g.ba();var i=g.nav.scroll;if(g.Wm=i.scrollLeft,g.Um=i.scrollTop,g.Lp=i.clientWidth,g.divTimeScroll&&(g.divTimeScroll.scrollLeft=g.Wm),g.Bj.top.enabled()&&(g.Bj.top.div.scrollLeft=g.Wm),g.Bj.bottom.enabled()&&(g.Bj.bottom.div.scrollLeft=g.Wm),a&&l.gp||(g.divResScroll.scrollTop=g.Um),v.Oj()&&g.S&&"Auto"!=g.cellWidthSpec&&!g.aj)if(v.zf);else{if(g.nav.scroll.scrollLeft<g.infiniteScrollingMargin)return v.zf=!0,g.nav.scroll.style.overflowX="hidden",void setTimeout(function(){v.Ij(-g.infiniteScrollingStepDays)},100);if(g.nav.scroll.scrollWidth-(g.nav.scroll.scrollLeft+g.nav.scroll.clientWidth)<g.infiniteScrollingMargin)return v.zf=!0,g.nav.scroll.style.overflowX="hidden",void setTimeout(function(){v.Ij(g.infiniteScrollingStepDays)},100)}if(g.navigatorBackSync&&function(){var e=t.Util.evalVariable(g.navigatorBackSync),n=g.getViewPort().start;e.select(n,{dontNotify:!0,dontFocus:!0})}(),g.progressiveRowRendering&&(g.ak.drawRows&&(clearTimeout(g.ak.drawRows),g.ak.drawRows=null),g.scrollDelayRows>0?g.ak.drawRows=setTimeout(function(){g.tk()},g.scrollDelayRows):g.tk()),g.ak.drawCells&&(clearTimeout(g.ak.drawCells),g.ak.drawCells=null),g.scrollDelayCells>0?g.ak.drawCells=setTimeout(g.ir(),g.scrollDelayCells):g.ir()(),g.dynamicLoading)return g.Dh(),void g.jr();g.ak.Za&&(clearTimeout(g.ak.Za),g.ak.Za=null),g.scrollDelayEvents>0?g.ak.Za=setTimeout(g.kr(),g.scrollDelayEvents):g.Za(),g.ak.updateFloats&&(clearTimeout(g.ak.updateFloats),g.ak.updateFloats=null),g.scrollDelayFloats>0?g.ak.updateFloats=setTimeout(function(){g.Vi()},g.scrollDelayFloats):g.Vi(),g.onScrollCalled=!0}},this.ir=function(){return function(){g&&(g.Dh(),g.Ri())}},this.kr=function(){return function(){g&&(g.Wp()?window.setTimeout(function(){g.Tp(),window.setTimeout(function(){g.Za(!0)},50)},50):g.kj())}},this.ba=function(){g.P.eventHeight=null,g.P.drawArea=null},this.show=function(){g.visible=!0,g.Ei=!0,g.nav.top.style.display="",g.Ya(),g._a(),g.gm(),g.Xi()},this.hide=function(){g.visible=!1,g.Ei=!1,g.nav.top.style.display="none"},this.jr=function(){var e=g.nav.scroll;g.Wm=e.scrollLeft,g.Um=e.scrollTop,g.Lp=e.clientWidth,g.divTimeScroll.scrollLeft=g.Wm,g.divResScroll.scrollTop=g.Um,g.refreshTimeout&&window.clearTimeout(g.refreshTimeout);var t=g.scrollDelayDynamic;g.refreshTimeout=window.setTimeout(g.lr(e.scrollLeft,e.scrollTop),t),g.Vi()},this.im=function(e){if(!g.events.list)return null;for(var t=0;t<this.events.list.length;t++){var n=this.events.list[t];if(g.Fc(n,e)){var i={};return i.ex=n,i.index=t,i.modified=!g.mr(e,n),i}}return null},this.mr=function(e,n){for(var i in e)if(("object"!=typeof e[i]||e[i]instanceof t.Date)&&e[i]!==n[i])return!1;for(var i in n)if("object"!=typeof n[i]&&e[i]!==n[i])return!1;return!0},this.Ti=function(e,n,i){var o=i&&i.clearEvents,r=i&&i.remove,a=i&&i.dontForceCellRendering,l=[];if(g.events.list||(g.events.list=[]),o)g.Ma(e);else{var s=[];t.list(r).forEach(function(e){var n=t.list(g.events.list).find(function(t){return t.id===e});n&&s.push(n)}),s.forEach(function(e){var n=g.events.hk(e);l=l.concat(n),t.rfa(g.events.list,e)});for(var d=[],c=0;c<e.length;c++)d[c]=g.im(u=e[c]);for(c=0;c<e.length;c++){var u=e[c],h=d[c],p=h&&h.modified,f=!h;if(p){this.events.list[h.index]=u;var m=g.events.hk(h.ex);l=l.concat(m)}else f&&this.events.list.push(u);(p||f)&&(l=l.concat(g.events.ik(u)))}g.jk(l),g.kk()}if(g.Mi(),g.Ua(),o||a){g.pa();var v=g.Jk||!g.beforeCellRenderCaching;v&&g.Oi(),g.Ni(),v?g.Ri():g.gm(),g.Za(),n&&n()}else g.lk(l,!1,function(){n&&n(),g.Tp(),g.Za()}),g.gm()},this.lr=function(e,t){return g.I()?function(){g.scrollX=e,g.scrollY=t,g.ha("Scroll")}:function(){if("function"==typeof g.onScroll){var e=function(e){g.Ti(e.events,function(){g.cb()&&"function"==typeof g.onAfterRender&&g.onAfterRender({isCallBack:!1,isScroll:!0,data:null})},e)},t={};t.viewport=g.getViewPort(),t.async=!0,t.events=[],t.remove=[],t.clearEvents=!0,t.dontForceCellRendering=!1,t.loaded=function(){this.async&&e(t)},g.onScroll(t),t.async||e(t)}}},this.nr=function(){var e=this.X(),t=e.xStart,n=e.xEnd-e.xStart,i=e.yStart,o=e.yEnd-e.yStart;this.cellProperties||(this.cellProperties={});for(var r=g.Bj.top,a=g.Bj.bottom,l=0;l<=n;l++){for(var s=t+l,d=0;d<o;d++)this.rowlist[c=i+d].hidden||this._c(s,c);if(this.or(s),r.enabled()){for(var c=0;c<r.rowlist.length;c++)this._c(s,c,"top");this.or(s,"top")}if(a.enabled()){for(c=0;c<a.rowlist.length;c++)this._c(s,c,"bottom");this.or(s,"bottom")}}var u=this.Bn();for(c=u.start;c<u.end;c++)this.rowlist[c].hidden||this.pr(c);if(r.enabled())for(c=0;c<r.rowlist.length;c++)r.rowlist[c].hidden||this.pr(c,"top");if(a.enabled())for(c=0;c<a.rowlist.length;c++)a.rowlist[c].hidden||this.pr(c,"bottom")},this.Ri=function(){if(!g.T){var e=g.Mj();e&&e.length>0&&(this.cellSweeping&&this.Vp(this.cellSweepingCacheSize),L.cm(),this.nr(),this.qr(),L.hl({dontFocus:!0})),this.Jk=!1}},this.qr=function(){for(var e=this.X(),t=e.xStart;t<e.xEnd;t++)t<this.itline.length-1&&this.itline[t+1].breakBefore&&this.rr(t)},this.rr=function(e){var t="x"+e;if(!g.P.breaks[t]){var n={};if("function"==typeof g.onBeforeGridLineRender){var i=g.itline[e],o=g.itline[e+1];if(n.start=i&&i.end,n.end=o&&o.start,n.hidden=!1,n.cssClass=null,n.type="VerticalBreak",n.color=null,g.onBeforeGridLineRender(n),n.hidden)return}var r=g.itline[e+1].left-1,a=g.Ci,l=d();l.style.left=r+"px",l.style.top="0px",l.style.width="1px",l.style.height=a+"px",l.style.fontSize="1px",l.style.lineHeight="1px",l.style.overflow="hidden",l.style.position="absolute",l.setAttribute("unselectable","on"),l.className=this.G("_matrix_vertical_break"),n.cssClass&&(l.className+=" "+n.cssClass),n.color&&(l.style.backgroundColor=n.color),this.divBreaks.appendChild(l),this.elements.breaks.push(l),this.P.breaks[t]=l}},this.X=function(){if(g.P.drawArea)return g.P.drawArea;if(!this.nav.scroll)return null;var e=g.Um,n={},i=null!=this.dynamicEventRenderingMarginX?this.dynamicEventRenderingMarginX:this.dynamicEventRenderingMargin,o=null!=this.dynamicEventRenderingMarginY?this.dynamicEventRenderingMarginY:this.dynamicEventRenderingMargin,r=g.Wm-i-v.ij,a=r+g.Lp+2*i,l=0,s=0;if(g.itline&&g.itline.length>0){l=g.Xj(r).x,s=g.Xj(a,!0).x;var d=this.Vm();s=Math.min(s,d),l=t.Util.atLeast(l,0)}var c=e+this.nav.scroll.offsetHeight+2*o,u=this.rl(e-o).i,h=this.rl(c).i;h<this.rowlist.length&&h++,n.xStart=l,n.xEnd=s,n.yStart=u,n.yEnd=h;var p=g.nav.scroll;return 0===p.clientWidth&&(p=g.divTimeScroll),n.pixels={},n.pixels.left=p.scrollLeft-v.ij,n.pixels.right=p.scrollLeft-v.ij+p.clientWidth,n.pixels.top=p.scrollTop,n.pixels.bottom=p.scrollTop+p.clientHeight,n.pixels.width=p.scrollWidth,n.sw=t.sw(g.nav.scroll),g.P.drawArea=n,n},this.rj=function(){var e=0,t=this.itline[this.itline.length-1];return((e=t?t.left+t.width:0)<0||isNaN(e))&&(e=0),e},this.pr=function(e,t){var n=g.Bj[t=t||"main"],i=n.divLines,o=t+"_y_"+e;if(!this.P.linesHorizontal[o]){var r=n.rowlist[e],a={};if("function"!=typeof g.onBeforeGridLineRender||(a.row=g.Yk(r),a.hidden=!1,a.cssClass=null,a.type="HorizontalLine",a.color=null,g.onBeforeGridLineRender(a),!a.hidden)){var l=r.top+("number"==typeof r.forcedHeight?r.forcedHeight:r.height)-1,s=this.rj(),c=d();c.style.left="0px",c.style.top=l+"px",c.style.width=s+"px",c.style.height="1px",c.style.fontSize="1px",c.style.lineHeight="1px",c.style.overflow="hidden",c.style.position="absolute",c.setAttribute("unselectable","on"),c.className=this.G("_matrix_horizontal_line"),a.cssClass&&(c.className+=" "+a.cssClass),a.color&&(c.style.backgroundColor=a.color),i.appendChild(c),this.P.linesHorizontal[o]=c}}},this.or=function(e,t){var n=this.itline[e];if(n){var i=g.Bj[t=t||"main"],o=i.divLines,r="main"===t?g.Ci:i.height,a=t+"_x_"+e;if(!this.P.linesVertical[a]){var l={};if("function"!=typeof g.onBeforeGridLineRender||(l.start=n.start,l.end=n.end,l.hidden=!1,l.cssClass=null,l.type="VerticalLine",l.color=null,g.onBeforeGridLineRender(l),!l.hidden)){var s=n.left+n.width-1,c=d();c.style.left=s+"px",c.style.top="0px",c.style.width="1px",c.style.height=r+"px",c.style.fontSize="1px",c.style.lineHeight="1px",c.style.overflow="hidden",c.style.position="absolute",c.setAttribute("unselectable","on"),c.className=this.G("_matrix_vertical_line"),l.cssClass&&(c.className+=" "+l.cssClass),l.color&&(c.style.backgroundColor=l.color),o.appendChild(c),this.elements.linesVertical.push(c),this.P.linesVertical[a]=c}}}},this.Mm=function(e,t){function n(){var t=g.sr(e,i.expanded,!1);if(!o)for(var n=0;n<t.length;n++)g.Kk(t[n]);g.$n(),g.Ua(),g.Dh();var r=g.Yk(i,e);o?g.gl(r):g.fl(r)}g._i.mm&&(g._i.skip=!0);var i=this.rowlist[e],o=!i.expanded;if(i.expanded=o,i.resource&&(i.resource.expanded=o),t=t||{},g.treeAnimation&&!t.notAnimated){var r=this.sr(e,i.expanded,!0);g.Zn(r,o?"show":"hide",function(){n()})}else n()},this.$n=function(){g.Mi(),g.Ji(),g.Ua(),g.ba(),g.Mk(),b.Ok(),g.Oi(),g.Ri(),g.tk(),g.Za(),g.ba()},this.Vn=function(e){var t={};if(t.index=e,"function"==typeof this.onLoadNode){var n={},i=this.rowlist[e].resource;n.resource=i,n.async=!1,n.loaded=function(){this.async&&(i.dynamicChildren=!1,i.expanded=!0,g.update())},this.onLoadNode(n),n.async||(i.dynamicChildren=!1,i.expanded=!0,this.update())}else this.ha("LoadNode",t)},this.sr=function(e,t,n){var i=this.rowlist[e],o=[];if(null===i.children||0===i.children.length)return o;for(var r=0;r<i.children.length;r++){var a=i.children[r],l=this.rowlist[a],s=t&&i.expanded&&!l.Io;t&&l.hidden&&(l.forcedHeight=0),n&&!t||(l.hidden=!s),n||delete l.forcedHeight,t===s&&o.push(a);var d=this.sr(a,t);d.length>0&&(o=o.concat(d))}return o},this.te=function(e,t){this.ve(),this.we(e,t)},this.xe=function(e){if(!e)return!1;var t=this.nav.scroll.scrollLeft;return!(e<0&&t<=0||e>0&&t+this.nav.scroll.clientWidth>=this.nav.scroll.scrollWidth||(this.nav.scroll.scrollLeft+=e,g.coords.x+=e,g.ye(),0))},this.ze=function(e){if(!e)return!1;var t=this.nav.scroll.scrollTop;return!(e<0&&t<=0||e>0&&t+this.nav.scroll.clientHeight>=this.nav.scroll.scrollHeight||(this.nav.scroll.scrollTop+=e,g.coords.y+=e,g.ye(),0))},this.ye=function(){l.zm&&l.zm.event.calendar===g?g.Kq():l._j&&(l.um.calendar===g||l.um.calendar&&l.um.calendar.dragOutAllowed)?(l._j.event||(l._j.event=l.um),g.Lq()):l.Am&&l.Am.calendar===g&&g.Mq()},this.we=function(e,t){(this.xe(e)||this.ze(t))&&(this.Ae=window.setTimeout(function(e,t){return function(){g.we(e,t)}}(e,t),100))},this.ve=function(){g.Ae&&(window.clearTimeout(g.Ae),g.Ae=null)},this.Mi=function(){g.Bj.top.enabled()&&(g.Bj.top.height=g.ur(g.Bj.top.rowlist,0)),g.Bj.bottom.enabled()&&(g.Bj.bottom.height=g.ur(g.Bj.bottom.rowlist,0)),g.Ci=g.ur(g.rowlist,g.Bj.top.height)},this.ur=function(e,t){for(var n=0,i=t||0,o=(t=t||0,0);o<e.length;o++){var r=e[o];r.hidden||(r.top=t,r.displayY=n,t+="number"==typeof r.forcedHeight?r.forcedHeight:r.height,n+=1),r.absTop=i,i+=r.height}return t},this.Oi=function(){t.browser.ie&&g.vr(),g.elements.cells=[],g.elements.breaks=[],g.P.cells=[],g.P.breaks=[],g.divBreaks.innerHTML="",g.divCells.innerHTML="",g.Bj.top.divCells.innerHTML="",g.Bj.bottom.divCells.innerHTML="",g.Kn()},this.Kn=function(){g.divLines.innerHTML="",g.Bj.top.divLines.innerHTML="",g.Bj.bottom.divLines.innerHTML="",g.P.linesVertical={},g.P.linesHorizontal={},g.elements.linesVertical=[]},this.vr=function(e){var n=t.list();for(var i in g.P.cells)n.push(g.P.cells[i]);n.forEach(function(e){g.om(e)})},this.Nk=function(e,n){n=n||"main";var i=t.list();for(var o in g.P.cells)i.push(g.P.cells[o]);i.filter(function(t){return t&&t.coords&&t.coords.y===e&&t.coords.grid===n}).forEach(function(e){g.om(e)})},this.wr=0,this.xr=t.list(["html","cssClass","backColor","backImage","backRepeat","areas","disabled"]),this.yr=g.xr.add("business"),this._c=function(e,n,i){if(this.S){var o=g.bk(e);if(o){var r=this.Bj[i=i||"main"],a=r.rowlist,l=r.divCells,s="main"===i,c=i+"_"+e+"_"+n;if(!this.P.cells[c]){var u=this.pm(e,n,i);if(g._m(e,n,i),!this.drawBlankCells){var h=!1;if(s&&this.Jm(n)?h=!1:this.zr(u,g.xr)||(h=!0),h)return}var p=d();p.style.left=o.left+"px",p.style.top=a[n].top+"px",p.style.width=o.width+"px",p.style.height=a[n].height+"px",p.style.position="absolute",u&&u.backColor&&(p.style.backgroundColor=u.backColor),p.setAttribute("unselectable","on"),p.className=this.G("_cell"),p.coords={},p.coords.x=e,p.coords.y=n,p.coords.grid=i,s&&g.Jm(n)&&t.Util.addClass(p,this.G("_cellparent")),_.P[n]&&t.Util.addClass(p,this.G("_cell_selected"));var f=g.cells.findXy(e,n,i)[0];if(u){u.cssClass&&t.Util.addClass(p,u.cssClass),t.Util.isNullOrUndefined(u.html)||(p.innerHTML=u.html),u.backImage&&(p.style.backgroundImage='url("'+u.backImage+'")'),u.backRepeat&&(p.style.backgroundRepeat=u.backRepeat),u.business&&g.cellsMarkBusiness&&t.Util.addClass(p,g.G("_cell_business")),u.disabled&&t.Util.addClass(p,g.G("_cell_disabled"));var m=t.Areas.resolvePosition(u.areas,g,o.left,o.width);t.Areas.attach(p,f,{areas:m})}if(l.appendChild(p),this.elements.cells.push(p),this.P.cells[c]=p,"function"==typeof g.onAfterCellRender){var v={};v.cell=t.Util.copyProps(f,{},["x","y","displayY","start","end","resource","grid"]),v.div=p,g.onAfterCellRender(v)}}}}},this.Pj={},this.gm=function(){g.Ar(),g.Br().forEach(function(e){g.Nk(e.y,e.grid)}),g.Ri()},this.Ar=function(){function e(e){g.Bj[e].rowlist.forEach(function(t,n){t.isNewRow||t.resource.cellsAutoUpdated&&g.itline.forEach(function(t,i){delete g.Pj[e+"_"+i+"_"+n]})})}e("main"),e("top"),e("bottom")},this.Br=function(){function e(e,t,i){for(var a=0;a<i;a++)for(var l=t+a,s=g.Bj[e].rowlist[l],d=0;d<=r;d++)if(!s.hidden&&!g.Pj[e+"_"+(o+d)+"_"+l]){n.push({grid:e,y:l});break}}var n=t.list(),i=this.X(),o=i.xStart,r=i.xEnd-i.xStart;return e("main",i.yStart,i.yEnd-i.yStart),e("top",0,g.Bj.top.rowlist.length),e("bottom",0,g.Bj.bottom.rowlist.length),n},this._m=function(e,n,i){if("function"==typeof this.onBeforeCellRender){var o=(i=i||"main")+"_"+e+"_"+n;if(g.beforeCellRenderCaching&&g.Pj[o])return;g.Pj[o]=!0;var r=g.bk(e);if(!r)return;var a=g.cells.findXy(e,n,i)[0],l={};return l.cell=a,l.control=g,l.getPixels=function(e){return e=new t.Date(e),g.getPixels(e).left-r.left},this.onBeforeCellRender(l),t.Util.copyProps(l.cell,l.cell.properties,g.yr),l.cell.properties.disabled&&(g.Pj.wn=!0),l}},this.zr=function(e,n){if(n){for(var i=0;i<n.length;i++)if(!t.Util.isNullOrUndefined(e[n[i]]))return!0}else for(var o in e)if(!t.Util.isNullOrUndefined(e[o]))return!0;return!1},this.clearSelection=function(){this.Ui(),N.clear()},this.cleanSelection=this.clearSelection,this.fr=function(e,n,i){e=new t.Date(e),n=new t.Date(n);var o=g.fj(i),r=g.Zj(e),a=r.current||r.next;if(!a)throw new t.Exception("Time range selection 'start' out of timeline");var l=g.Zj(new t.Date(n).addMilliseconds(-1)),s=l.current||l.previous;if(!s)throw new t.Exception("Time range selection 'end' out of timeline");var d={};return d.start={y:o.index,x:t.indexOf(g.itline,a),time:e,grid:o.grid},d.end={x:t.indexOf(g.itline,s),time:n},d.calendar=this,d},this.selectTimeRange=function(e,t,n,i){var o=g.fr(e,t,n);g.Uk(o),i||setTimeout(function(){g.Qk(o)},0)},this.Jb=function(){var e=l.qn&&l.qn.source;e&&t.Util.removeClass(e,g.G(g.nq.eventMovingSource)),t.de(l.qn),l.qn=null,g.xn(),g.on.clear(),t.Global.movingLink&&(t.Global.movingLink.clear(),t.Global.movingLink=null)},this.Ui=function(){g.divShadow&&(g.divShadow.innerHTML=""),g.Bj.top.divShadow&&(g.Bj.top.divShadow.innerHTML=""),g.Bj.bottom.divShadow&&(g.Bj.bottom.divShadow.innerHTML=""),g.elements.range=[],g.elements.range2=null,g.xn(),g.Tk=null,g.dr=null};var L={hi:null,hl:function(e){var n=(e=e||{}).dontFocus,i=L.hi;if(i){var o=i.x,r=i.y;if("cell"===i.type){var a=L.Cr(o,r).row;(l=L.Dr(o,r))&&t.Util.addClass(l,g.G("_cell_focus")),"top"===i.line&&a.marginTop&&t.Util.addClass(l,g.G("_cell_focus_top")),"bottom"===i.line&&a.marginBottom&&t.Util.addClass(l,g.G("_cell_focus_bottom"))}else{var l;(l=g.Ke(i.event))&&t.Util.addClass(l,g.G("_event_focus"))}if(!n){var s=g.sl();s.start.x>=o?g.scrollTo(g.itline[o].start):s.end.x<=o&&g.scrollTo(g.itline[o].end,!1,"right"),s.start.y>=r?g.nav.scroll.scrollTop=g.rowlist[r].top-g.Bj.top.height:s.end.y<=r&&(g.nav.scroll.scrollTop=(a=g.rowlist[r]).top+a.height-g.nav.scroll.clientHeight+g.Bj.bottom.height)}}},cm:function(){var e=L.hi;if(e)if("cell"===e.type)(n=L.Dr(L.hi.x,L.hi.y))&&(t.Util.removeClass(n,g.G("_cell_focus")),t.Util.removeClass(n,g.G("_cell_focus_top")),t.Util.removeClass(n,g.G("_cell_focus_bottom")));else{var n;(n=g.Ke(e.event))&&t.Util.removeClass(n,g.G("_event_focus"))}},Cr:function(e,n){var i={},o=g.rowlist[n],r=g.itline[e],a=[],l=o.lines.map(function(e){var n=e.filter(function(e){return t.Util.overlaps(e.part.start,e.part.end,r.start,r.end)});return a=a.concat(n),n});return i.lines=l,i.thc=r,i.row=o,i.events=a,i},Ek:function(){var e=L.hi;e&&(L.cm(),L.hi=L.Er(e.x,e.y,e.pixels,e.line),L.hl({dontFocus:!0}))},Er:function(e,n,i,o){var r={};i=i||g.itline[e].left,o=t.Util.isNullOrUndefined(o)?"top":o;var a=L.Cr(e,n),l=a.lines,s=a.row,d=s.marginTop||s.marginBottom,c=!1,u=o,h=null,p=null;if(a.events.length>0)if(s.marginTop&&"top"===o)c=!0,u="top";else if(s.marginBottom&&"bottom"===o)c=!0,u="bottom";else{if("top"===o)if(s.marginBottom)if(m=a.lines.find(function(e){return e.find(function(e){return e.part.left<=i&&i<=e.part.right})}))u=a.lines.indexOf(m);else{var f=a.lines.find(function(e){return e.find(function(e){return t.Util.overlaps(e.part.left,e.part.right,a.thc.left,a.thc.left+a.thc.right)})});f?(u=a.lines.indexOf(f),p=f[0]):u="bottom"}else u=s.marginTop?"top":0;else if("bottom"===o)if(d){var m=a.lines.slice().reverse().find(function(e){return e.find(function(e){return e.part.left<=i&&i<=e.part.right})});-1===(u=a.lines.indexOf(m))&&(u=L.Fr(o,s))}else u=l.length-1;else u=o;var v=l[u];p||(p=v&&v.find(function(e){return e.part.left<=i&&i<=e.part.right})),p||(c=!0,u=L.Fr(u,s)),h=p}else c=!0,u=d?L.Fr(o,s):0;return r.x=e,r.y=n,c?(r.type="cell",r.pixels=i,r.line=u,r):(r.type="event",r.event=h,r.pixels=h.part.left,r.x=g.Xj(h.part.left).x,r.line=u,r)},Gr:function(e){var n={},i=L.hi,o=g.rowlist[i.y],r=o.lines[i.line],a=L.Cr(i.x,i.y),l=o.marginTop||o.marginBottom;if("right"===e){if("event"===i.type){var s=i.event.part.right,d=(m=g.Zj(i.event.part.end)).i,c=m.current.left+m.current.width,u=r[r.indexOf(i.event)+1],h=a.lines[i.line],p=h[h.indexOf(i.event)+1];return u&&u.part.left===s?(n.x=d+1,n.y=i.y,n.type="event",n.line=i.line,n.pixels=u.part.left,n.event=u,n):p&&l?(n.x=d,n.y=i.y,n.type="event",n.line=i.line,n.pixels=p.part.left,n.event=p,n):c===s?L.Hr(d)===d?i:(n.x=d+1,n.y=i.y,n.type="cell",n.pixels=g.itline[n.x].left,n.line=i.line,o.marginTop?n.line="top":o.marginBottom&&(n.line="bottom"),n):(n.x=d,n.y=i.y,n.type="cell",n.line=i.line,n.pixels=i.event.part.right,l&&(n.line=L.Fr(i.line,o)),n)}return(u=(r=(a=L.Cr(i.x,i.y)).lines[i.line])&&r.find(function(e){return e.part.left>i.pixels}))?(n.x=i.x,n.y=i.y,n.type="event",n.event=u,n.pixels=u.part.left,n.line=i.line,n):L.Hr(i.x)===i.x?i:L.Er(i.x+1,i.y,null,i.line)}if("left"===e){var f=i.x;if("event"===i.type){if(f=g.Xj(i.event.part.left).x,i.event.part.left!==(m=g.itline[f]).left)return(u=r[r.indexOf(i.event)-1])&&u.part.right===i.event.part.left?(m=g.Xj(u.part.right,!0),n.x=m.x,n.y=i.y,n.type="event",n.line=i.line,n.pixels=u.part.right,n.event=u,n):(m=g.Xj(i.event.part.left),n.x=m.x,n.y=i.y,n.type="cell",n.line=i.line,n.pixels=i.event.part.left,l&&(n.line=L.Fr(i.line,o)),n);n=L.Er(f-1,i.y,m.right,i.line)}else{var m;if(u=(r=(a=L.Cr(i.x,i.y)).lines[i.line])&&r.slice().reverse().find(function(e){return e.part.right<i.pixels}))return n.x=i.x,n.y=i.y,n.type="event",n.event=u,n.pixels=u.part.right,n.line=i.line,n;if(L.Ir(i.x)===i.x)return i;n=L.Er(f-1,i.y,c=(m=g.itline[f-1]).left+m.width,i.line)}return n}if("down"===e){var v=(a=L.Cr(i.x,i.y)).lines.find(function(e){return e.find(function(e){return e.part.left<=i.pixels&&i.pixels<=e.part.right})});if("top"===i.line&&o.marginTop){if(v){var y=a.lines.indexOf(v);return(n=L.Er(i.x,i.y,i.pixels,y)).pixels=i.pixels,n.x=i.x,n}return(C=a.lines.find(function(e){return e.find(function(e){return t.Util.overlaps(e.part.left,e.part.right,a.thc.left,a.thc.left+a.thc.right)})}))?((n=L.Er(i.x,i.y,C[0].part.left,a.lines.indexOf(C))).pixels=i.pixels,n.x=i.x,n):L.Jr(i.y)===i.y?i:((n=L.Er(i.x,i.y+1,i.pixels,"top")).pixels=i.pixels,n.x=i.x,n)}if("bottom"===i.line&&o.marginBottom)return L.Jr(i.y)===i.y?i:((n=L.Er(i.x,i.y+1,i.pixels,"top")).pixels=i.pixels,n.x=i.x,n);if(i.line<o.lines.length-1){var b=i.y,w=i.line+1;if(o.marginTop&&"top"===i.line&&(w=0),v=a.lines.slice(w).find(function(e){return e.find(function(e){return e.part.left<=i.pixels&&i.pixels<=e.part.right})}))w=a.lines.indexOf(v);else if(o.marginBottom)w="bottom";else if(o.marginTop){var C;if(C=a.lines.slice(i.line+1).find(function(e){return e.find(function(e){return t.Util.overlaps(e.part.left,e.part.right,a.thc.left,a.thc.left+a.thc.right)})}))return L.Er(i.x,i.y,C[0].part.left,a.lines.indexOf(C));w="top",b+=1}else i.event?w=o.lines.length-1:(w=0,b+=1);return(n=L.Er(i.x,b,i.pixels,w)).pixels=i.pixels,n.x=i.x,n}return i.line===o.lines.length-1&&o.marginBottom?((n=L.Er(i.x,i.y,i.pixels,"bottom")).pixels=i.pixels,n.x=i.x,n):L.Jr(i.y)===i.y?i:((n=L.Er(i.x,i.y+1,i.pixels,"top")).pixels=i.pixels,n.x=i.x,n)}if("up"===e){if(v=(a=L.Cr(i.x,i.y)).lines.slice().reverse().find(function(e){return e.find(function(e){return e.part.left<=i.pixels&&i.pixels<=e.part.right})}),"bottom"===i.line&&o.marginBottom&&v)y=a.lines.indexOf(v),n=L.Er(i.x,i.y,i.pixels,y);else if(0===i.line&&o.marginTop)n=L.Er(i.x,i.y,i.pixels,"top");else if(i.line>0){if(w="bottom",b=i.y,(v=a.lines.slice(0,i.line).reverse().find(function(e){return e.find(function(e){return e.part.left<=i.pixels&&i.pixels<=e.part.right})}))?w=a.lines.indexOf(v):o.marginTop?w="top":o.marginBottom?b-=1:w=0,L.Kr(b)===b)return i;n=L.Er(i.x,b,i.pixels,w)}else{if(L.Kr(i.y)===i.y)return i;n=L.Er(i.x,i.y-1,i.pixels,"bottom")}return n.x=i.x,n.pixels=i.pixels,n}return n},Fr:function(e,t){if("number"==typeof e||!("top"===e&&t.marginTop||"bottom"===e&&t.marginBottom)){if(t.marginTop)return"top";if(t.marginBottom)return"bottom"}return e},Dr:function(e,t,n){return g.P.cells[(n=n||"main")+"_"+e+"_"+t]},Lr:function(){return L.hi},lf:function(){var e=g.keyboardTarget;switch(e){case"component":return g.nav.top;case"document":return document}throw new t.Exception("Invalid keyboardTarget value: "+e)},Am:null,Mr:function(){var e=L.lf();e!==document&&g.nav.top.setAttribute("tabindex","-1"),g.I()||(e.addEventListener("keyup",function(e){if(16===e.keyCode){var t=L.Am;if(L.Am=null,!t||!t.end)return;var n=t.start.x<t.end.x;L.Nr(n?t.start.x:t.end.x,t.start.y,n?t.end.x:t.start.x,{forceSnap:!0})}}),e.addEventListener("keydown",function(e){if(!l.qq){if(-1!==[37,38,39,40].indexOf(e.keyCode)&&(e.preventDefault(),!L.hi))return void L.Or();if(-1!==[37,38,39,40,13].indexOf(e.keyCode)){var t=e.shiftKey;if(L.hi){var n=!(g.Jm(L.hi.y)&&g.treePreventParentUsage);t&&!L.hi.event&&!L.Am&&n&&(L.Am={calendar:g,forceSnap:!0,start:{x:L.hi.x,y:L.hi.y,time:g.itline[L.hi.x].start}})}var i=!L.Am;switch(e.keyCode){case 39:L.cm(),L.hi=L.Gr("right"),L.hl();break;case 37:L.cm(),L.hi=L.Gr("left"),L.hl();break;case 38:i&&(L.cm(),L.hi=L.Gr("up"),L.hl());break;case 40:i&&(L.cm(),L.hi=L.Gr("down"),L.hl());break;case 13:if(e.preventDefault(),L.hi&&L.hi.event){var o=g.Ke(L.hi.event);L.Pr(o,e)}else n&&L.Nr(L.hi.x,L.hi.y)}37!==e.keyCode&&39!==e.keyCode||L.Am&&(L.Am.end={x:L.hi.x,y:L.hi.y,time:g.itline[L.hi.x].start},g.Uk(L.Am))}}}))},Pr:function(e,t){g.qb(e,t)},Nr:function(e,t,n){h=h||{};var i={forceSnap:!0};i.start={y:t,x:e,time:g.itline[e].start},i.end={x:"undefined"==typeof n?e:n},i.end.time=g.itline[i.end.x].start,i.calendar=g,g.Tk=i,g.Qk(i)},Or:function(){var e=g.sl();L.hi=L.Er(e.start.x,e.start.y),L.hl()},Qr:function(){var e="Always"===g.useEventBoxes;(e=e&&!g.I())&&(L.Mr(),L.lf()!==document&&g.nav.top.focus())},Kr:function(e){if(e<=0)return e;for(var t=e;t>0;)if(!g.rowlist[t-=1].hidden)return t;return e},Jr:function(e){var t=g.rowlist.length-1;if(e>=t)return e;for(var n=e;n<t;)if(!g.rowlist[n+=1].hidden)return n;return e},Hr:function(e){return e>=g.itline.length-1?e:e+1},Ir:function(e){return e<=0?e:e+1}};this.Rr=L,this.ea={};var H=this.ea;H.Kh=function(){delete g.P.eventHeight,delete g.P.headerHeight},H.da=function(){return"Disabled"!==g.xssProtection},H.Uj=function(){return t.Locale.find(g.locale)},H.uq=function(){return"Auto"!==g.timeFormat?g.timeFormat:H.Uj().timeFormat},H.vq=function(){if("Auto"===g.weekStarts){var e=H.Uj();return e?e.weekStarts:0}return g.weekStarts||0},H.Ln=function(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("mobile")||-1!=e.indexOf("android")},H.Ro=function(){var e=/MSIE 6/i.test(navigator.userAgent);return"Auto"===g.layout?e?"TableBased":"DivBased":g.layout},H.gk=function(){var e;if("Immediate"===g.notifyCommit)e="Notify";else{if("Queue"!==g.notifyCommit)throw new t.Exception("Invalid notifyCommit value: "+g.notifyCommit);e="Queue"}return e},H._n=function(){return"Days"!==g.viewType},H.El=function(e){return"Always"===g.useEventBoxes||"Never"!==g.useEventBoxes&&e<60*g.xm()*1e3},H.Dl=function(){if(g.P.eventHeight)return g.P.eventHeight;var e=g.Qe("_event_height").height;return e||(e=g.eventHeight),g.P.eventHeight=e,e},H.cp=function(){if(g.P.headerHeight)return g.P.headerHeight;var e=g.Qe("_header_height").height;return e||(e=g.headerHeight),g.P.headerHeight=e,e},H.ip=function(){if(g.P.scrollLineHeight)return g.P.scrollLineHeight;var e=d();e.style.fontSize="initial",e.style.display="none",s().appendChild(e);var t=parseInt(window.getComputedStyle(e).fontSize)||16;return s().removeChild(e),g.P.scrollLineHeight=t,t},H.vj=function(){return g.rowHeaderScrolling?g.rowHeaderSplitterWidth:1},H.dk=function(){return"string"==typeof g.multiSelectRectangle?g.multiSelectRectangle:"Disabled"===g.rectangleSelectHandling?"Disabled":g.rectangleSelectMode},H.Sr=function(){return"string"==typeof g.multiSelectRectangle?"Free"===g.multiSelectRectangle||"Row"===g.multiSelectRectangle?"EventSelect":"Disabled":g.rectangleSelectHandling},H.Zm=function(){return t.list(g.rowHeaderColumns).filter(function(e){return!e.hidden})},this.Tr={};var B=this.Tr;B.an=function(e){for(var t={top:0,height:0},n=H.cp(),i=0;i<=e;i++){var o=g.timeHeaders[i];t.top+=t.height,t.height=o.height||n}return t},this.pm=function(e,t,n){var i=(n=n||"main")+"_"+e+"_"+t,o=g.Bj[n].rowlist;if(g.cellConfig){i=e+"_"+t;for(var r=0,a=0;a<g.resources.length;a++)if(!g.resources[a].hidden){if(r===t){t=a;break}r+=1}}if(this.cellProperties||(this.cellProperties={}),this.cellProperties[i])return this.cellProperties[i];if(this.wi&&(this.cellProperties[i]=g.Ur(e,t)),!this.cellProperties[i]){var l=o[t],s=l.id,d=l.start.getTime()-g.kb().getTime(),c=g.bk(e),u=c.start.addTime(d),h=c.end.addTime(d),p={};p.start=u,p.end=h,p.resource=s;var f={};f.business=g.isBusiness(p),l.cellsDisabled&&(g.Pj.wn=!0,f.disabled=!0),this.cellProperties[i]=f}return this.cellProperties[i]},this.Vr=function(e,n,i){var o=n+"_"+i;return this.cellProperties[o]={},t.Util.copyProps(e,this.cellProperties[o],g.yr),this.cellProperties[o]},this.Ur=function(e,n){if(!this.cellConfig)return null;var i=this.cellConfig,o=this.cellProperties[e+"_"+n];!o&&i.vertical&&(o=this.cellProperties[e+"_0"]),!o&&i.horizontal&&(o=this.cellProperties["0_"+n]),!o&&i.default&&(o=i.default);var r={};return t.Util.copyProps(o,r,g.yr),r},this.La=function(){if(!this.wi&&!this.xi&&(this.xi=!0,this.cellConfig)){var e=this.cellConfig;if(e.vertical)for(var t=0;t<e.x;t++)if(i=this.cellProperties[t+"_0"])for(var n=1;n<e.y;n++)this.Vr(i,t,n);if(e.horizontal)for(n=0;n<e.y;n++)if(i=this.cellProperties["0_"+n])for(t=1;t<e.x;t++)this.Vr(i,t,n);if(e.default){var i=e.default;for(n=0;n<e.y;n++)for(t=0;t<e.x;t++)this.cellProperties[t+"_"+n]||this.Vr(i,t,n)}}},this.isBusiness=function(e,t){var n=e.start,i=(e.end.getTime()-n.getTime())/6e4;if(i<=1440&&!(g.businessWeekends||t||0!==e.start.dayOfWeek()&&6!==e.start.dayOfWeek()))return!1;if(i<720){var o=n.getHours();o+=n.getMinutes()/60,o+=n.getSeconds()/3600,o+=n.getMilliseconds()/36e5;var r=this.businessBeginsHour,a=this.businessEndsHour;if(0===a&&(a=24),r===a)return!1;if(!(r<a))return o<a||o>=r;if(o<r)return!1;if(a>=24)return!0;if(o>=a)return!1}return!0},this.cd=function(){switch(g.U){case"aspnet":if(!this.ma())throw new t.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");break;case"netmvc":if(!this.backendUrl)throw new t.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");break;case"javaxx":if(!this.backendUrl)throw new t.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/")}},this.Ya=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.ge=function(){var e=g.nav.top;return!!e&&e.offsetWidth>0&&e.offsetHeight>0},this.je=function(){var e=g.ge;return e()?void g.ke():void(g.le||(g.le=setInterval(function(){e()&&(clearInterval(g.le),g.show(),g.Dn(),g.ke())},100)))},this.Wr=function(e){"Parent100Pct"!==this.heightSpec&&(this.heightSpec="Fixed"),this.height=e-(this.wj()+2),this.Ua()},this.setHeight=this.Wr,this.fj=function(e){return g.bo(e).first()},this.Ve=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw new t.Exception("DayPilot.Scheduler() constructor requires the target element or its ID as a parameter");if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw new t.Exception("DayPilot.Scheduler: The placeholder element not found: '"+n+"'.")}},this.Xr=function(){this.rowHeaderColumnsMode="Legacy",this.Me(),this.Ii(),this.zk(),this._a(),this.pe(),this.ya(),l.If(this),this.Ha(this.afterRenderData,!1),this.Kp(),this.bb(),this.ha("Init")},this.init=function(){if(this.S)throw new t.Exception("This instance is already initialized. Use update() to change properties.");if(this.Ve(),this.nav.top.dp){if(this.nav.top.dp===g)return g;if(this.ma())return g;throw new t.Exception("The target placeholder was already initialized by another DayPilot component instance.")}return this.yp(),this.Yr(),this.je(),this.Zr(),this},this.Zr=function(){g.keyboardEnabled&&L.Qr()},this.$r=function(){g.multiselect.Qi(g.selectedEvents)},this.Yr=function(){if(this.wk(),this.Ue())return this.Xr(),this.S=!0,void this.ba();this.pe(),this.ya(),l.If(this),this.Kp(),this.$r(),g.zoomLevels&&g.zoomLevels[g.zoom.active]&&g.zoom.setActive(g.zoom.active),!g.S&&v.Oj()&&(g.aj||(g.aj={date:g.startDate})),this.Jc();var e=g.Le.scope||g._i.enabled;g.scrollToDate?g.scrollTo(g.scrollToDate):g.scrollX||g.scrollY?g.setScroll(g.scrollX,g.scrollY):e||g.Xi(),g.scrollToResourceId&&(g.scrollToResource(g.scrollToResourceId),g.scrollToResourceId=null),window.setTimeout(function(){g.scrollY&&g.setScroll(g.scrollX,g.scrollY)},200),this.messageHTML&&window.setTimeout(function(){g.message(g.messageHTML)},0),this.bb(),this.ba(),this.Ha(this.afterRenderData,!1),g.initEventEnabled&&setTimeout(function(){g.ha("Init")}),this.Xe(),this.S=!0,this._r=!0;var t=g.aj;t?g.scrollTo(t.date,t.animated,t.position):g.Xi(),g.aj=null},this.zp=function(){g.I()&&delete g.infinite},this.Ye=null,this.Oe=function(e){if(e){var n={resources:{preInit:function(){var e=this.data;e&&(g.resources=e)}},events:{preInit:function(){var e=this.data;e&&(g.events.list=t.isArray(e.list)?e.list:e)},postInit:function(){}},links:{preInit:function(){var e=this.data;e&&(g.links.list=t.isArray(e.list)?e.list:e)},postInit:function(){}},scrollTo:{preInit:function(){},postInit:function(){this.data&&g.$i(this.data,e.scrollToAnimated,e.scrollToPosition)}},scrollX:{postInit:function(){this.data&&g.dj(this.data)}},scrollY:{postInit:function(){this.data&&g.sj(this.data)}},zoom:{preInit:function(){var e=this.data;"string"==typeof e&&(e=g.zoom.mk(e));var t=e!==g.zoom.active,n=g.zoom.Nh();g.zoom.nk(e,n),this.date=t?n:null},postInit:function(){this.date&&g.$i(this.date,!1,g.zoomPosition)}}};for(var i in g.Ye=n,g._i.scrollToRequested&&(n.scrollTo.data=g._i.scrollToRequested,g._i.scrollToRequested=null),g._i.scrollXRequested&&(n.scrollX.data=g._i.scrollXRequested,g._i.scrollXRequested=null),g._i.scrollYRequested&&(n.scrollY.data=g._i.scrollYRequested,g._i.scrollYRequested=null),e)n[i]||(g[i]=e[i]);for(var i in e)if(n[i]){var o=n[i];o.data=e[i],o.preInit&&o.preInit()}}},this.Xe=function(){var e=g.Ye;for(var t in e){var n=e[t];n.postInit&&n.postInit()}g.Ye={}},this.diag=function(){var e={};return e.dataEvents=g.events.list&&g.events.list.length,e.dataRows=g.rowlist&&g.rowlist.length,e.dataTimeline=g.itline&&g.itline.length,e.dataCells=e.dataTimeline*e.dataRows,e.renderedEvents=g.elements.events.length,e.renderedCells=g.elements.cells.length,e.renderedRows=g.divResScroll.firstChild.childNodes.length-1,e.domEvents=g.divEvents.getElementsByTagName("*").length,e.domCells=g.divCells.getElementsByTagName("*").length,e.domRows=g.divResScroll.getElementsByTagName("*").length,e},this.temp={},this.temp.allowDuplicateEventIds=!1,this.internal={},this.internal.initialized=function(){return g.S},this.internal.dragInProgress=this.Gq,this.internal.startMoving=this.xo,this.internal.invokeEvent=this.Ab,this.internal.eventMenuClick=this.Ob,this.internal.timeRangeMenuClick=this.Pb,this.internal.resourceHeaderMenuClick=this.Wk,this.internal.linkMenuClick=this.Vk,this.internal.bubbleCallBack=this.Mb,this.internal.findEventDiv=this.Ke,this.internal.rowStartMoving=this.cl.xo,this.internal.getNodeChildren=this.Fa,this.internal.callback=function(){g.ha.apply(g,arguments)},this.internal.createRowObject=this.Yk,this.internal.restools=this.Ao,this.internal.gantt=null,this.internal.adjustEndIn=g.Ng,this.internal.adjustEndNormalize=g.mh,this.internal.xssTextHtml=g.ca,this.internal.touch=g.Yc,this.internal.cssNames=g.nq,this.internal.enableCellStacking=function(e){g.yi=!0,g.zi=e},this.internal.deleteDragSource=function(){g.Kb()},this.internal.skipUpdate=g._i.skipUpdate,this.internal.skipped=g._i.skipped,this.internal.loadOptions=g.Oe,this.internal.postInit=g.Xe,this.internal.enableAngular2=function(){g._i.enabled=!0},this.internal.eventsFromAttr=function(){g._i.fm=!0},this.internal.resourcesFromAttr=function(){g._i.mm=!0},this.internal.evImmediateRefresh=function(){g.events.Pk()},this.internal.enableReact=function(e,t){g.wa.react=e,g.wa.reactDOM=t},this.internal.reactRefs=function(){return t.Util.copyProps(g.wa,{},["react","reactDOM"])},this.Init=this.init,this.Oe(h)},new t.Scheduler,t.Row=function(e,n){if(!e)throw new t.Exception("Now row object supplied when creating DayPilot.Row");if(!n)throw new t.Exception("No parent control supplied when creating DayPilot.Row");this.as={};var i=this.as;i.id=e.id,i.name=e.name,i.data=e.resource,i.tags=e.tags;var o=this;o.isRow=!0,o.menuType="resource",o.start=e.start,o.name=e.name,o.value=e.id,o.id=e.id,o.tags=e.tags,o.bubbleHtml=e.bubbleHtml,o.index=e.index,o.displayY=e.displayY,o.level=e.level,o.calendar=n,o.data=e.resource,o.grid=e.grid,o.jn=e,o.$={},o.$.row=e,o.toJSON=function(e){var t={};return t.start=this.start,t.name=this.name,t.value=this.value,t.id=this.id,t.index=this.index,t},o.parent=function(){return o.jn.zo?n.Yk(o.jn.zo):null},o.children=function(){var e=t.list(o.$.row.children).map(function(e){return n.Yk(n.rowlist[e])});return e.add=function(e){var t=o.$.row.resource;t.children||(t.children=[]),t.children.push(e)},e},o.loaded=function(){return o.jn.loaded},Object.defineProperty(o,"hidden",{get:function(){return o.jn.hidden}}),Object.defineProperty(o,"hiddenUsingFilter",{get:function(){return o.jn.Io},set:function(e){o.jn.Io=e,e||(o.jn.hidden=!o.jn.Jo())}}),o.cells={},o.cells.all=function(){for(var e=[],t=n.itline.length,i=o.index,r=0;r<t;r++){var a=n.cells.findXy(r,i,o.grid);e.push(a[0])}return n.qm(e)},o.cells.forRange=function(e,i){var r=o.start.getTime()-n.kb().getTime();e=new t.Date(e),i=new t.Date(i);var a=n.kb().addTime(r),l=n.Sj().addTime(r);e<a&&(e=a),i>l&&(i=l);var s=n.cells.find(e,o)[0],d=n.cells.find(i.addTime(-1),o)[0];if(!s)return null;if(!d)return null;if(s.y!==d.y)return null;for(var c=s.y,u=[],h=s.x;h<=d.x;h++)u.push(n.cells.nm(h,c,s.grid));return n.qm(u)},o.cells.totalDuration=function(){return new t.Duration(o.cells.all().map(function(e){return e.end.getTime()-e.start.getTime()}).reduce(function(e,t){return e+t},0))},o.events={},o.events.all=function(){for(var e=t.list(),n=0;n<o.jn.events.length;n++)e.push(o.jn.events[n]);return e},o.events.isEmpty=function(){return 0===o.jn.events.length},o.events.forRange=function(e,t){return o.jn.events.forRange(e,t)},o.events.totalDuration=function(){var e=0;return o.events.all().forEach(function(t){e+=t.part.end.getTime()-t.part.start.getTime()}),new t.Duration(e)},o.groups={},o.groups.collapseAll=function(){for(var e=0;e<o.jn.blocks.length;e++)new r(o.jn.blocks[e]).bs();n.kk(),n.lk([o.jn]),n.Ua()},o.groups.expandAll=function(){for(var e=0;e<o.jn.blocks.length;e++)new r(o.jn.blocks[e]).cs();n.kk(),n.lk([o.jn]),n.Ua(),n.Za()},o.groups.expanded=function(){for(var e=[],i=0;i<o.jn.blocks.length;i++){var a=o.jn.blocks[i];a.expanded&&a.lines.length>n.groupConcurrentEventsLimit&&e.push(new r(a))}return t.list(e)},o.groups.collapsed=function(){for(var e=[],n=0;n<o.jn.blocks.length;n++){var i=o.jn.blocks[n];i.expanded||e.push(new r(i))}return t.list(e)},o.groups.all=function(){for(var e=[],n=0;n<o.jn.blocks.length;n++)e.push(new r(o.jn.blocks[n]));return t.list(e)},o.events.collapseGroups=o.groups.collapseAll,o.events.expandGroups=o.groups.expandAll,o.column=function(e){return new a(o,e)},o.toggle=function(){n.Mm(o.index)},o.collapse=function(){o.$.row.expanded&&o.toggle()},o.expand=function(){o.$.row.expanded||o.toggle()},o.remove=function(){n.rows.remove(o)},o.edit=function(){n.rows.edit(o)},o.addClass=function(e){var i;if(i=n.divHeader.rows[(i=o).index]){var r=t.list(i.cells).map(function(e){return e.cellDiv});t.Util.addClass(r,e)}o.$.row.cssClass=t.Util.addClassToString(o.$.row.cssClass,e),o.data.cssClass=e},o.removeClass=function(e){var i;if(i=n.divHeader.rows[(i=o).index]){var r=t.list(i.cells).map(function(e){return e.cellDiv});t.Util.removeClass(r,e)}o.$.row.cssClass=t.Util.removeClassFromString(o.$.row.cssClass,e),o.data.cssClass=t.Util.removeClassFromString(o.data.cssClass,e)};var r=function(e){this.cs=function(){e.expanded=!0;var i=n.eo;t.list(e.events).forEach(function(e){i.push(e.id())});var o=function(e){for(var t=0;t<n.elements.events.length;t++){var i=n.elements.events[t];if(i.event===e)return i}return null}(e);if(o){n.Sp(o);var r=t.indexOf(n.elements.events,o);-1!==r&&n.elements.events.splice(r,1)}},this.expand=function(){this.cs(),n.kk(),n.lk([e.row]),n.Ua(),n.Za()},this.bs=function(){if(e.lines.length>n.groupConcurrentEventsLimit){e.expanded=!1;var i=t.list(e.events).map(function(e){return e.id()});n.eo=n.eo.filter(function(e){return!t.contains(i,e)})}},this.collapse=function(){this.bs(),n.kk(),n.lk([e.row]),n.Ua()}},a=function(e,n){this.html=function(e){var i=i.calendar.divHeader.rows[i.index];if(!i)throw new t.Exception("Row not rendered");var o=i.cells[n].textDiv;return"undefined"==typeof e?o.innerHTML:void(o.innerHTML=e)}}},l._j=null,l.um=null,l.gq=null,l.zm=null,l.Qm=null,l.$j=!1,l.Fp=!1,l.Bq=null,l.es=null,l.fs=function(e,n,i,o){t.us(e);var r=l.tn={};return r.element=e,r.duration=n,r.text=o,r.id=i,r.data={id:i,text:o,duration:n,externalHtml:o},!1},t.Scheduler.startDragging=function(e){var n=(e=e||{}).element,i=e.keepElement?null:n;t.us(n);var o=l.tn={};return o.element=i,o.id=e.id,o.duration=e.duration||60,o.text=e.text||"",o.data=e,o.Uq=e,o.Tq=e.data,!1},t.Scheduler.makeDraggable=function(e){function n(){var t=l.tn={};t.element=o,t.id=a,t.duration=d,t.text=s,t.data=e,t.Uq=e,t.Tq=e.data}var i=(e=e||{}).element,o=e.keepElement?null:e.remove||i,r=e.data||{},a="undefined"!=typeof e.id?e.id:r.id,s="string"==typeof e.text?e.text:r.text||"",d=e.duration||r.duration;if(d instanceof t.Duration&&(d=d.totalSeconds()),d||(d=r.start&&r.end?new t.Duration(r.start,r.end).totalSeconds():60),!i)throw new t.Exception("makeDraggable(options): options.element must be specified");t.us(i),t.re(i,"mousedown",function(e){if(t.Util.mouseButton(e).left){n();var i=e.target||e.srcElement;if(i.tagName){var o=i.tagName.toLowerCase();if("textarea"===o||"select"===o||"input"===o)return!1}return e.preventDefault(),!1}}),i.ontouchstart=function(e){window.setTimeout(function(){n(),l.Hp(e),e.preventDefault()},0),e.preventDefault()}},t.Scheduler.stopDragging=function(){if(l.tn&&l.tn.Rq){var e=l.tn.Rq,n=e.event.calendar;n&&t.Util.removeClass(e,n.G(i.nq.eventMovingSource))}var i;l.hs(),l.zm&&(t.de(l.Pm),l.zm=null,l.Qm=null,l.Pm=null),l._j&&((i=l.um.calendar)&&t.Util.removeClass(l._j,i.G(i.nq.eventMovingSource)),t.de(l.qn),l._j=null,l.um=null,l.qn=null),l.Am&&((i=l.Am.calendar).clearSelection(),l.Am=null),s().style.cursor="",t.list(l.Ef).forEach(function(e){e.ve(),e.xn(),e.cl.resetMoving(),e.on.clear()})},t.Scheduler.registerDropTarget=function(e){var n=(e=e||{}).element,i=e.onDragOver,o="function"==typeof i,r=e.onDrop,a="function"==typeof r,s=e.onDragLeave,d="function"==typeof s;if(!n)throw new t.Exception("registerDropTarget(options): options.element must be specified");n.addEventListener("mousemove",function(e){if(l.tn){var t=l.tn.event;if(t&&o){var n={};n.e=t,i(n)}}}),n.addEventListener("mouseleave",function(e){if(l.tn){var t=l.tn.event;if(t&&d){var n={};n.e=t,s(n)}}}),n.addEventListener("mouseup",function(e){if(l.tn){var t=l.tn.event;if(t&&a){var n={};n.e=t,r(n)}}})},l.hs=function(){l.Qq&&(s().removeChild(l.Qq),l.Qq=null),l.tn=null},l.ks=function(){var e=l.tn;if(e){var t=e&&e.Uq,n=t&&t.onDrop;if("function"==typeof n){var i={};i.options=t,n(i)}}},l.If=function(e){l.Ef||(l.Ef=t.list(),l.Ef.out=function(){l.Ef.forEach(function(e){e.Aa()})});for(var n=0;n<l.Ef.length;n++)if(l.Ef[n]===e)return;l.Ef.push(e)},l.Vf=function(e){var n=l.Ef;if(n){var i=t.indexOf(n,e);-1!==i&&n.splice(i,1),0===n.length&&(n=null)}n||(t.ue(document,"mousemove",l.wf),t.ue(document,"mouseup",l.vf),t.ue(document,"mousedown",l.Gp),t.ue(document,"touchmove",l.Hp),t.ue(document,"touchend",l.Ip),t.ue(window,"keyup",l.Jp),l.Fp=!1)},l.Hp=function(e){if(l.zm&&((o=l.zm.event.calendar).coords=o.Yc.jq(e),o.Yc.lq(),e.preventDefault()),l._j&&!l.tn&&(e.preventDefault(),(o=l.um.calendar).coords=o.Yc.jq(e),o.Yc.mq(),function(){if(o.dragOutAllowed){var i=n(e);if(!i||i!==o){var r=l.um;l.tn={};var a=l.tn;a.id=r.id(),a.text=r.text(),a.Rq=l._j,a.element=null,a.duration=(r.rawend().getTime()-r.start().getTime())/1e3,a.text=r.text(),a.id=r.id(),a.event=t.Util.copyProps(r,new t.Event),o.xn(),t.de(l.qn),l.qn.calendar=null,l.qn=null,l.ym=null,l.Ef.out()}}}()),l.tn){e.preventDefault();var o,r=i(e);if(o=n(e)){if(l.Qq&&s().removeChild(l.Qq),l.Qq=null,o.coords=o.Yc.jq(e),!l.qn&&o.rowlist.length>0){if(!l._j){l._j={};var a=l.tn.event;a||(e=o.Sq(),(a=new t.Event(e)).calendar=o,a.part.duration=1e3*l.tn.duration),a.part.external=!0;var d=l.tn.Rq;d&&d.event&&d.event.calendar===o&&(a.part.external=!1),l.um=a}l.qn=o.db(l.um)}l._j&&o.Yc.mq()}else{t.de(l.qn);var c=l._j;l._j=null,l.um=null,l.qn=null,l.Qq||(l.Qq=l.ls(l.tn.Uq),l.Qq.source=c);var u=l.Qq;u.style.left=r.x+"px",u.style.top=r.y+"px",l.Ef.out()}}},l.Ip=function(e){l.gp=!1,l.vf(e)},l.wf=function(e){if("undefined"!=typeof l&&!t.Global.touch.active&&!t.Global.touch.start&&!(e.insideMainD||e.srcElement&&e.srcElement.inside)){var n=t.mc(e);if(l.tn){if(!l.tn.ms){var i=l.tn.Uq||{},o=i.onDragStart,r=!1;if("function"==typeof o){var a={};a.options=i,a.preventDefault=function(){a.preventDefault.value=!0},o(a),r=a.preventDefault.value}if(l.tn.ms=!0,r)return l.ks(),void(l.tn=null)}s().style.cursor="move",l.Qq||(l.Qq=l.ls(l.tn.Uq)),(d=l.Qq).style.left=n.x+"px",d.style.top=n.y+"px",l._j=null,l.um=null,l.qn&&((c=l.qn.calendar)&&c.xn(),l.qn.calendar=null,t.de(l.qn),l.qn=null)}else if(l._j&&l.um&&l.um.calendar.dragOutAllowed&&!l.tn){var d,c=l.um.calendar;e=l.um,s().style.cursor="move",l.Qq||(l.Qq=l.ls(e.data),l.Qq.source=l._j),(d=l.Qq).style.left=n.x+"px",d.style.top=n.y+"px",l.tn={};var u=l.tn;u.Rq=l._j,u.element=null,u.duration=(e.rawend().getTime()-e.start().getTime())/1e3,u.text=e.text(),u.id=e.value(),u.event=t.Util.copyProps(e,new t.Event),c.xn(),t.de(l.qn),l.qn.calendar=null,l.qn=null}l.Ef.out()}},l.ns=function(e){if(l.Ef)for(var t=0;t<l.Ef.length;t++)l.Vf(l.Ef[t])},l.Gp=function(e){l.qq&&l.qq.blur()},l.Jp=function(e){17===e.keyCode&&l.Dq&&l.Dq.gr.dispatch()},l.vf=function(e){if(t.list(l.Ef).forEach(function(e){e.ve(),e._j={},e.Hq=null}),l.zm){var n=function(){var e=l.Qm.calendar;s().style.cursor="",l.zm=null,l.Qm=null,t.de(l.Pm),l.Pm=null,e&&(e.Iq=null)};if(setTimeout(function(){l.$j=!1}),!l.Pm)return void n();var i=l.Pm.finalStart,o=l.Pm.finalEnd,r=l.Pm.overlapping,a=!l.Pm.allowed,d=(_=(p=l.Qm).calendar).cn.isInvalid();_.xn(),_.cn.clear();var h="left"===l.zm.dpBorder?"start":"end";if(n(),r||a||d||_.cn.forbidden)return;_.Eb(p,i,o,h)}else if(l.um){if(n=function(){t.Global.movingAreaData=null;var e=l.qn&&l.qn.calendar;l.qn&&(t.de(l.qn),l.qn.calendar=null),s().style.cursor="",l._j=null,l.um=null,l.ks(),l.tn=null,e&&(e.Ca=null)},!l.qn)return void n();var p=(B=l.tn&&l.tn.Rq)?B.event:l.um;if(!(_=l.qn.calendar))return void n();if(p.calendar&&p.calendar!==_){var f=p.calendar,g=p,m=t.Util.copyProps(p.data);(p=new t.Event(m,f)).part={external:!0,duration:f.Dm(g)}}if(l.qn.source=l._j,function(){if(l.tn&&l.tn.Rq){var e=l.tn.Rq;e&&e.event&&t.Util.removeClass(e,e.event.calendar.G(_.nq.eventMovingSource))}}(),!l.qn.row)return void n();clearTimeout(_.Km.timeout),i=l.qn.start,o=l.qn.end;var v="Days"!==_.viewType?l.qn.row.id:null,y=p.part.external,b=l.qn.line;if(r=l.qn.overlapping,a=!l.qn.allowed,l.tn&&(_.Yi||(_.Yi={}),_.Yi.Zi=l.tn.element,l.ks(),l.tn=null),l.qn.calendar=null,s().style.cursor="",l._j=null,l.um=null,r||a||_.on.forbidden||_.on.invalid)return void _.Jb();_.Ib(p,i,o,v,y,e,b),t.Global.movingAreaData=null}else if(l.Am){var w=t.Util.mouseButton(e),C=l.Am;n=function(){},(_=C.calendar).dr=null;var x=e.ctrlKey||e.metaKey;if(_.allowMultiRange)return _.elements.range2.overlapping?(t.de(_.elements.range2),_.elements.range2=null,_.xn()):_.gr.add(C),l.Am=null,x||w.left&&_.gr.dispatch(),void n();if(l.Bq)return clearTimeout(l.Bq),l.Bq=null,void n();_.Tk=C,l.Am=null;var S=function(e){return function(){l.Bq=null;var t=_.elements.range2;return t&&t.overlapping?void _.clearSelection():(_.Qk(e),void("Hold"!==_.timeRangeSelectedHandling&&"HoldForever"!==_.timeRangeSelectedHandling||(_.Tk=e)))}},T=_.er(C);if(n(),!w.left)return void(l.Bq=null);if(C.moved||"Disabled"===_.timeRangeDoubleClickHandling)return S(T)(),e.cancelBubble=!0,!1;l.Bq=setTimeout(S(T),_.doubleClickTimeout)}else if(c.row)(_=c.calendar)&&_.so();else if(u.source)(_=u.calendar).Gl.Vg(),_.Gl.Ak(),u.source=null,u.calendar=null;else if(l.ap)l.ap.cleanup(),l.ap=null;else if(l.Fq){var E=l.Fq,_=E.calendar;if(!E.moved)return l.Fq=null,void(_.Cq(_.coords)||_.hr(e));var k=E.x,D=E.y,A=E.width,O=E.height,I=!1,P=_.lj.mj(k,D,A,O).map(function(e){return e.event}),R=function(){setTimeout(function(){_.Vq.clear(),l.Fq=null},0),_.xn()};if("function"==typeof _.onRectangleEventSelect||"function"==typeof _.onRectangleSelect){var M,N=_.rl(D).i,L=_.rl(D+O).i,H=_.nl({start:{y:N},end:{y:L}});if((M={}).events=P,M.append=!1,M.start=_.getDate(k,!0),M.end=_.getDate(k+A,!0),M.resources=H,M.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof _.onRectangleEventSelect&&_.onRectangleEventSelect(M),"function"==typeof _.onRectangleSelect&&_.onRectangleSelect(M),M.preventDefault.value)return _.Vq.clear(),l.Fq=null,void R();I=M.append}"EventSelect"===_.ea.Sr()&&(I||_.multiselect.clear(!0),P.forEach(function(e){_.multiselect.add(e,!0)}),_.multiselect.redraw()),R(),("function"==typeof _.onRectangleEventSelected||"function"==typeof _.onRectangleSelected)&&((M={}).events=P,"function"==typeof _.onRectangleEventSelected&&_.onRectangleEventSelected(M),"function"==typeof _.onRectangleSelected&&_.onRectangleSelected(M))}var B;l.tn&&(l.tn.event&&l.tn.event.part&&delete l.tn.event.part.external,l.ks(),l.tn=null,s().style.cursor=""),l.Qq&&(l.Qq.source&&(B=l.Qq.source).event&&t.Util.removeClass(l.Qq.source,(_=l.Qq.source.event.calendar).G(_.nq.eventMovingSource)),s().removeChild(l.Qq),l.Qq=null),l.tm=null,l.ym=null},l.ls=function(e){e=e||{};var t=document.createElement("div");return t.setAttribute("unselectable","on"),t.style.position="absolute",t.style.width="100px",t.style.height="20px",t.style.zIndex=101,t.style.pointerEvents="none",t.style.backgroundColor="#aaaaaa",t.style.opacity=.5,t.style.overflow="hidden",t.className=e.externalCssClass,e.externalHtml&&(t.innerHTML=e.externalHtml),s().appendChild(t),t};var c={};t.Global.rowmoving=c;var u={};t.Global.linking=u,"undefined"!=typeof jQuery&&(jQuery.fn.daypilotScheduler=function(e){var n=null,i=this.each(function(){if(!this.daypilot){var i=new t.Scheduler(this.id||this,e);i.init(),this.daypilot=i,n||(n=i)}});return 1===this.length?n:i}),function(){var e=t.am();e&&e.directive("daypilotScheduler",["$parse",function(e){return{restrict:"E",template:"<div id='{{id}}'></div>",compile:function(n,i){return n[0].removeAttribute("id"),n[0].innerHTML=this.template.replace("{{id}}",i.id),function(n,i,o){var r=new t.Scheduler(i[0].firstChild);r.Le.scope=n;var a=o.id;a&&(n[a]=r);var l=o.publishAs;for(var s in l&&(0,e(l).assign)(n,r),o)0===s.indexOf("on")&&(t.Util.shouldApply(s)?function(i){r[i]=function(r){var a=e(o[i]);t.Util.safeApply(n,function(){a(n,{args:r})})}}(s):function(t){r[t]=function(i){e(o[t])(n,{args:i})}}(s));var d=n.$watch,c=o.config||o.daypilotConfig,u=o.events||o.daypilotEvents;c||r.init(),d.call(n,c,function(e,t){r.Oe(e),r.S?(r.update(),r.Xe()):r.init()},!0),u&&d.call(n,u,function(e){r.events.list=e,r.Jc({eventsOnly:!0})},!0),n.$on("$destroy",function(){r.dispose()})}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};"undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(e){"undefined"==typeof e.Year&&(e.Year=function(t,n){this.v="2021.3.5046",this.startDate=new e.Date,this.cssOnly=!0,this.cssClassPrefix=null,this.columns=4,this.cellWidth=20,this.showWeekNumbers=!1,this.os=[],this.nh=function(){this.root.dp=this,this.Ff=new e.Date(this.startDate.toString("yyyy-01-01","en-us"))},this.G=function(e){return this.cssClassPrefix?this.cssClassPrefix+e:""},this.oh=function(){return this.showWeekNumbers?this.cellWidth:0},this.kn=function(){this.os=[];var t=this.columns,n=12/t;this.root.className=this.G("_main"),this.root.style.width=t*(7*this.cellWidth+this.oh())+"px";for(var i=0;i<n;i++){for(var o=0;o<t;o++){var r=i*t+o,a=a+"_nav_"+r,l=document.createElement("div");l.id=a,l.style.float="left",this.root.appendChild(l);var s=new e.Navigator(a);s.startDate=this.Ff.addMonths(r),s.cssOnly=this.cssOnly,s.cssClassPrefix=this.cssClassPrefix,s.cellWidth=this.cellWidth,s.showWeekNumbers=this.showWeekNumbers,s.internal.showLinks={},s.selectMode="none",s.timeRangeSelectedHandling="JavaScript",s.onTimeRangeSelected=this.ps,s.init(),s.root.className="",this.os.push(s)}var d=document.createElement("div");d.style.clear="left",this.root.appendChild(d)}},this.ps=function(e){alert("clicked: "+e.day)},this.init=function(){if(this.root=document.getElementById(t),!this.root.dp)return this.nh(),this.kn(),this}})}(DayPilot)},or5m:function(e,t,n){"use strict";var i=n("TToO").__decorate,o=n("TToO").__metadata;Object.defineProperty(t,"__esModule",{value:!0});var r=n("WT6e"),a=n("WPXp"),l=n("Xjw4"),s=n("ovmJ"),d=n("55Fp"),c=n("WtLm"),u=n("7DMc");t.CALENDAR_VALUE_ACCESSOR={provide:u.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return h}),multi:!0};var h=function(){function e(e,t,n,i){this.el=e,this.domHandler=t,this.renderer=n,this.cd=i,this.dateFormat="mm/dd/yy",this.inline=!1,this.showOtherMonths=!0,this.icon="fa-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="ui-button-secondary",this.clearButtonStyleClass="ui-button-secondary",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!1,this.onFocus=new r.EventEmitter,this.onBlur=new r.EventEmitter,this.onClose=new r.EventEmitter,this.onSelect=new r.EventEmitter,this.onInput=new r.EventEmitter,this.onTodayClick=new r.EventEmitter,this.onClearClick=new r.EventEmitter,this.onMonthChange=new r.EventEmitter,this.onYearChange=new r.EventEmitter,this._locale={firstDayOfWeek:0,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"},this.onModelChange=function(){},this.onModelTouched=function(){},this.inputFieldValue=null}return Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=e,void 0!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonth(this.currentMonth,this.currentYear)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=e,void 0!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonth(this.currentMonth,this.currentYear)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabledDates",{get:function(){return this._disabledDates},set:function(e){this._disabledDates=e,void 0!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonth(this.currentMonth,this.currentYear)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabledDays",{get:function(){return this._disabledDays},set:function(e){this._disabledDays=e,void 0!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonth(this.currentMonth,this.currentYear)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTime",{get:function(){return this._showTime},set:function(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(e){this._locale=e,this.createWeekDays(),this.createMonth(this.currentMonth,this.currentYear)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.defaultDate||new Date;if(this.createWeekDays(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.initTime(e),this.createMonth(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,this.yearNavigator&&this.yearRange){this.yearOptions=[];for(var t=this.yearRange.split(":"),n=parseInt(t[0]),i=parseInt(t[1]),o=n;o<=i;o++)this.yearOptions.push(o)}},e.prototype.ngAfterViewInit=function(){!this.inline&&this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlayViewChild.nativeElement):this.domHandler.appendChild(this.overlayViewChild.nativeElement,this.appendTo))},e.prototype.ngAfterViewChecked=function(){this.overlayShown&&(this.alignOverlay(),this.overlayShown=!1)},e.prototype.ngAfterContentInit=function(){var e=this;this.templates.forEach(function(t){switch(t.getType()){case"date":default:e.dateTemplate=t.template}})},e.prototype.createWeekDays=function(){this.weekDays=[];for(var e=this.locale.firstDayOfWeek,t=0;t<7;t++)this.weekDays.push(this.locale.dayNamesMin[e]),e=6==e?0:++e},e.prototype.createMonth=function(e,t){this.dates=[],this.currentMonth=e,this.currentYear=t,this.currentMonthText=this.locale.monthNames[e];for(var n=this.getFirstDayOfMonthIndex(e,t),i=this.getDaysCountInMonth(e,t),o=this.getDaysCountInPrevMonth(e,t),r=(this.getSundayIndex(),1),a=new Date,l=0;l<6;l++){var s=[];if(0==l){for(var d=o-n+1;d<=o;d++){var c=this.getPreviousMonthAndYear(e,t);s.push({day:d,month:c.month,year:c.year,otherMonth:!0,today:this.isToday(a,d,c.month,c.year),selectable:this.isSelectable(d,c.month,c.year)})}var u=7-s.length;for(d=0;d<u;d++)s.push({day:r,month:e,year:t,today:this.isToday(a,r,e,t),selectable:this.isSelectable(r,e,t)}),r++}else for(d=0;d<7;d++){if(r>i){var h=this.getNextMonthAndYear(e,t);s.push({day:r-i,month:h.month,year:h.year,otherMonth:!0,today:this.isToday(a,r-i,h.month,h.year),selectable:this.isSelectable(r-i,h.month,h.year)})}else s.push({day:r,month:e,year:t,today:this.isToday(a,r,e,t),selectable:this.isSelectable(r,e,t)});r++}this.dates.push(s)}},e.prototype.initTime=function(e){this.pm=this.utc?e.getUTCHours()>11:e.getHours()>11,this.showTime?this.utc?(this.currentMinute=e.getUTCMinutes(),this.currentSecond=e.getUTCSeconds(),this.currentHour="12"==this.hourFormat?0==e.getUTCHours()?12:e.getUTCHours()%12:e.getUTCHours()):(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.currentHour="12"==this.hourFormat?0==e.getHours()?12:e.getHours()%12:e.getHours()):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)},e.prototype.prevMonth=function(e){this.disabled?e.preventDefault():(0===this.currentMonth?(this.currentMonth=11,this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]&&(this.currentYear=this.yearOptions[this.yearOptions.length-1])):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonth(this.currentMonth,this.currentYear),e.preventDefault())},e.prototype.nextMonth=function(e){this.disabled?e.preventDefault():(11===this.currentMonth?(this.currentMonth=0,this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]&&(this.currentYear=this.yearOptions[0])):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonth(this.currentMonth,this.currentYear),e.preventDefault())},e.prototype.onDateSelect=function(e,t){var n=this;!this.disabled&&t.selectable?(this.isMultipleSelection()&&this.isSelected(t)?(this.value=this.value.filter(function(e,i){return!n.isDateEquals(e,t)}),this.updateModel(this.value)):this.shouldSelectDate(t)&&(t.otherMonth?this.selectOtherMonths&&(this.currentMonth=t.month,this.currentYear=t.year,this.createMonth(this.currentMonth,this.currentYear),this.selectDate(t)):this.selectDate(t)),!this.isSingleSelection()||this.showTime&&!this.hideOnDateTimeSelect||(this.overlayVisible=!1),this.updateInputfield(),e.preventDefault()):e.preventDefault()},e.prototype.shouldSelectDate=function(e){return!this.isMultipleSelection()||!this.maxDateCount||!this.value||this.maxDateCount>this.value.length},e.prototype.updateInputfield=function(){var e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(var t=0;t<this.value.length;t++)e+=this.formatDateTime(this.value[t]),t!==this.value.length-1&&(e+=", ");else if(this.isRangeSelection()&&this.value&&this.value.length){var n=this.value[1];e=this.formatDateTime(this.value[0]),n&&(e+=" - "+this.formatDateTime(n))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)},e.prototype.formatDateTime=function(e){var t=null;return e&&(this.timeOnly?t=this.formatTime(e):(t=this.formatDate(e,this.dateFormat),this.showTime&&(t+=" "+this.formatTime(e)))),t},e.prototype.selectDate=function(e){var t;if(t=this.utc?new Date(Date.UTC(e.year,e.month,e.day)):new Date(e.year,e.month,e.day),this.showTime&&(this.utc?(t.setUTCHours("12"===this.hourFormat&&this.pm&&12!=this.currentHour?this.currentHour+12:this.currentHour),t.setUTCMinutes(this.currentMinute),t.setUTCSeconds(this.currentSecond)):(t.setHours("12"===this.hourFormat&&this.pm&&12!=this.currentHour?this.currentHour+12:this.currentHour),t.setMinutes(this.currentMinute),t.setSeconds(this.currentSecond))),this.minDate&&this.minDate>t&&(this.currentHour=(t=this.minDate).getHours(),this.currentMinute=t.getMinutes(),this.currentSecond=t.getSeconds()),this.maxDate&&this.maxDate<t&&(this.currentHour=(t=this.maxDate).getHours(),this.currentMinute=t.getMinutes(),this.currentSecond=t.getSeconds()),this.isSingleSelection())this.updateModel(t);else if(this.isMultipleSelection())this.updateModel(this.value?this.value.concat([t]):[t]);else if(this.isRangeSelection())if(this.value&&this.value.length){var n=this.value[0],i=this.value[1];!i&&t.getTime()>=n.getTime()?i=t:(n=t,i=null),this.updateModel([n,i])}else this.updateModel([t,null]);this.onSelect.emit(t)},e.prototype.updateModel=function(e){var t=this;if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{var n=null;this.value&&(n=this.value.map(function(e){return t.formatDateTime(e)})),this.onModelChange(n)}},e.prototype.getFirstDayOfMonthIndex=function(e,t){var n=new Date;n.setDate(1),n.setMonth(e),n.setFullYear(t);var i=n.getDay()+this.getSundayIndex();return i>=7?i-7:i},e.prototype.getDaysCountInMonth=function(e,t){return 32-this.daylightSavingAdjust(new Date(t,e,32)).getDate()},e.prototype.getDaysCountInPrevMonth=function(e,t){var n=this.getPreviousMonthAndYear(e,t);return this.getDaysCountInMonth(n.month,n.year)},e.prototype.getPreviousMonthAndYear=function(e,t){var n,i;return 0===e?(n=11,i=t-1):(n=e-1,i=t),{month:n,year:i}},e.prototype.getNextMonthAndYear=function(e,t){var n,i;return 11===e?(n=0,i=t+1):(n=e+1,i=t),{month:n,year:i}},e.prototype.getSundayIndex=function(){return this.locale.firstDayOfWeek>0?7-this.locale.firstDayOfWeek:0},e.prototype.isSelected=function(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){for(var t=!1,n=0,i=this.value;n<i.length&&!(t=this.isDateEquals(i[n],e));n++);return t}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0},e.prototype.isDateEquals=function(e,t){return!!e&&e.getDate()===t.day&&e.getMonth()===t.month&&e.getFullYear()===t.year},e.prototype.isDateBetween=function(e,t,n){if(e&&t){var i=new Date(n.year,n.month,n.day);return e.getTime()<=i.getTime()&&t.getTime()>=i.getTime()}return!1},e.prototype.isSingleSelection=function(){return"single"===this.selectionMode},e.prototype.isRangeSelection=function(){return"range"===this.selectionMode},e.prototype.isMultipleSelection=function(){return"multiple"===this.selectionMode},e.prototype.isToday=function(e,t,n,i){return e.getDate()===t&&e.getMonth()===n&&e.getFullYear()===i},e.prototype.isSelectable=function(e,t,n){var i=!0,o=!0,r=!0,a=!0;return this.minDate&&(this.minDate.getFullYear()>n?i=!1:this.minDate.getFullYear()===n&&(this.minDate.getMonth()>t?i=!1:this.minDate.getMonth()===t&&this.minDate.getDate()>e&&(i=!1))),this.maxDate&&(this.maxDate.getFullYear()<n?o=!1:this.maxDate.getFullYear()===n&&(this.maxDate.getMonth()<t?o=!1:this.maxDate.getMonth()===t&&this.maxDate.getDate()<e&&(o=!1))),this.disabledDates&&(r=!this.isDateDisabled(e,t,n)),this.disabledDays&&(a=!this.isDayDisabled(e,t,n)),i&&o&&r&&a},e.prototype.isDateDisabled=function(e,t,n){if(this.disabledDates)for(var i=0,o=this.disabledDates;i<o.length;i++){var r=o[i];if(r.getFullYear()===n&&r.getMonth()===t&&r.getDate()===e)return!0}return!1},e.prototype.isDayDisabled=function(e,t,n){if(this.disabledDays){var i=new Date(n,t,e).getDay();return-1!==this.disabledDays.indexOf(i)}return!1},e.prototype.onInputFocus=function(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)},e.prototype.onInputClick=function(e){this.datepickerClick=!0,this.autoZIndex&&(this.overlayViewChild.nativeElement.style.zIndex=String(this.baseZIndex+ ++d.DomHandler.zindex))},e.prototype.onInputBlur=function(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()},e.prototype.onButtonClick=function(e,t){this.overlayViewChild.nativeElement.offsetParent&&"none"!==this.overlayViewChild.nativeElement.style.display?this.overlayVisible=!1:(t.focus(),this.showOverlay()),this.datepickerClick=!0},e.prototype.onInputKeydown=function(e){this.isKeydown=!0,9===e.keyCode&&(this.overlayVisible=!1)},e.prototype.onMonthDropdownChange=function(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonth(this.currentMonth,this.currentYear)},e.prototype.onYearDropdownChange=function(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonth(this.currentMonth,this.currentYear)},e.prototype.incrementHour=function(e){var t=this.currentHour,n=this.currentHour+this.stepHour;this.validateHour(n)&&("24"==this.hourFormat?this.currentHour=n>=24?n-24:n:"12"==this.hourFormat&&(t<12&&n>11&&(this.pm=!this.pm),this.currentHour=n>=13?n-12:n),this.updateTime()),e.preventDefault()},e.prototype.decrementHour=function(e){var t=this.currentHour-this.stepHour;this.validateHour(t)&&("24"==this.hourFormat?this.currentHour=t<0?24+t:t:"12"==this.hourFormat&&(12===this.currentHour&&(this.pm=!this.pm),this.currentHour=t<=0?12+t:t),this.updateTime()),e.preventDefault()},e.prototype.validateHour=function(e){var t=!0,n=this.value;this.isRangeSelection()&&(n=this.value[1]||this.value[0]),this.isMultipleSelection()&&(n=this.value[this.value.length-1]);var i=n?n.toDateString():null;return this.minDate&&i&&this.minDate.toDateString()===i&&this.minDate.getHours()>e&&(t=!1),this.maxDate&&i&&this.maxDate.toDateString()===i&&this.maxDate.getHours()<e&&(t=!1),t},e.prototype.incrementMinute=function(e){var t=this.currentMinute+this.stepMinute;this.validateMinute(t)&&(this.currentMinute=t>59?t-60:t,this.updateTime()),e.preventDefault()},e.prototype.decrementMinute=function(e){var t=this.currentMinute-this.stepMinute;this.validateMinute(t)&&(this.currentMinute=t<0?60+t:t,this.updateTime()),e.preventDefault()},e.prototype.validateMinute=function(e){var t=!0,n=this.value;this.isRangeSelection()&&(n=this.value[1]||this.value[0]),this.isMultipleSelection()&&(n=this.value[this.value.length-1]);var i=n?n.toDateString():null;return this.minDate&&i&&this.minDate.toDateString()===i&&this.minDate.getMinutes()>e&&(t=!1),this.maxDate&&i&&this.maxDate.toDateString()===i&&this.maxDate.getMinutes()<e&&(t=!1),t},e.prototype.incrementSecond=function(e){var t=this.currentSecond+this.stepSecond;this.validateSecond(t)&&(this.currentSecond=t>59?t-60:t,this.updateTime()),e.preventDefault()},e.prototype.decrementSecond=function(e){var t=this.currentSecond-this.stepSecond;this.validateSecond(t)&&(this.currentSecond=t<0?60+t:t,this.updateTime()),e.preventDefault()},e.prototype.validateSecond=function(e){var t=!0,n=this.value;this.isRangeSelection()&&(n=this.value[1]||this.value[0]),this.isMultipleSelection()&&(n=this.value[this.value.length-1]);var i=n?n.toDateString():null;return this.minDate&&i&&this.minDate.toDateString()===i&&this.minDate.getSeconds()>e&&(t=!1),this.maxDate&&i&&this.maxDate.toDateString()===i&&this.maxDate.getSeconds()<e&&(t=!1),t},e.prototype.updateTime=function(){var e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,this.utc?e.setUTCHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour):e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=this.value.slice(0,-1).concat([e])),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()},e.prototype.toggleAMPM=function(e){this.pm=!this.pm,this.updateTime(),e.preventDefault()},e.prototype.onUserInput=function(e){if(this.isKeydown){this.isKeydown=!1;var t=e.target.value;try{var n=this.parseValueFromString(t);this.updateModel(n),this.updateUI()}catch(e){this.updateModel(null)}this.filled=null!=t&&t.length,this.onInput.emit(e)}},e.prototype.parseValueFromString=function(e){if(!e||0===e.trim().length)return null;var t;if(this.isSingleSelection())t=this.parseDateTime(e);else if(this.isMultipleSelection()){var n=e.split(",");t=[];for(var i=0,o=n;i<o.length;i++)t.push(this.parseDateTime(o[i].trim()))}else if(this.isRangeSelection()){n=e.split(" - "),t=[];for(var r=0;r<n.length;r++)t[r]=this.parseDateTime(n[r].trim())}return t},e.prototype.parseDateTime=function(e){var t,n=e.split(" ");return this.timeOnly?(t=new Date,this.populateTime(t,n[0],n[1])):this.showTime?(t=this.parseDate(n[0],this.dateFormat),this.populateTime(t,n[1],n[2])):t=this.parseDate(e,this.dateFormat),t},e.prototype.populateTime=function(e,t,n){if("12"==this.hourFormat&&!n)throw"Invalid Time";this.pm="PM"===n||"pm"===n;var i=this.parseTime(t);this.utc?e.setUTCHours(i.hour):e.setHours(i.hour),e.setMinutes(i.minute),e.setSeconds(i.second)},e.prototype.updateUI=function(){var e=this.value||this.defaultDate||new Date;if(Array.isArray(e)&&(e=e[0]),this.createMonth(e.getMonth(),e.getFullYear()),this.showTime||this.timeOnly){var t=this.utc?e.getUTCHours():e.getHours();"12"==this.hourFormat?(this.pm=t>11,this.currentHour=t>=12?12==t?12:t-12:0==t?12:t):this.currentHour=this.utc?e.getUTCHours():e.getHours(),this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds()}},e.prototype.onDatePickerClick=function(e){this.datepickerClick=!0},e.prototype.showOverlay=function(){this.overlayVisible=!0,this.overlayShown=!0,this.autoZIndex&&(this.overlayViewChild.nativeElement.style.zIndex=String(this.baseZIndex+ ++d.DomHandler.zindex)),this.bindDocumentClickListener()},e.prototype.alignOverlay=function(){this.appendTo?this.domHandler.absolutePosition(this.overlayViewChild.nativeElement,this.inputfieldViewChild.nativeElement):this.domHandler.relativePosition(this.overlayViewChild.nativeElement,this.inputfieldViewChild.nativeElement)},e.prototype.writeValue=function(e){this.value=e,this.value&&"string"==typeof this.value&&(this.value=this.parseValueFromString(this.value)),this.updateInputfield(),this.updateUI()},e.prototype.registerOnChange=function(e){this.onModelChange=e},e.prototype.registerOnTouched=function(e){this.onModelTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.formatDate=function(e,t){if(!e)return"";var n,i=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},o=function(e,t,n){var o=""+t;if(i(e))for(;o.length<n;)o="0"+o;return o},r=function(e,t,n,o){return i(e)?o[t]:n[t]},a="",l=!1;if(e)for(n=0;n<t.length;n++)if(l)"'"!==t.charAt(n)||i("'")?a+=t.charAt(n):l=!1;else switch(t.charAt(n)){case"d":a+=o("d",this.utc?e.getUTCDate():e.getDate(),2);break;case"D":a+=r("D",this.utc?e.getUTCDay():e.getDay(),this.locale.dayNamesShort,this.locale.dayNames);break;case"o":a+=o("o",this.utc?Math.round((new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()).getTime()-new Date(e.getUTCFullYear(),0,0).getTime())/864e5):Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":a+=o("m",(this.utc?e.getUTCMonth():e.getMonth())+1,2);break;case"M":a+=r("M",this.utc?e.getUTCMonth():e.getMonth(),this.locale.monthNamesShort,this.locale.monthNames);break;case"y":a+=i("y")?this.utc?e.getUTCFullYear():e.getFullYear():((this.utc?e.getUTCFullYear():e.getFullYear())%100<10?"0":"")+(this.utc?e.getUTCFullYear():e.getFullYear())%100;break;case"@":a+=e.getTime();break;case"!":a+=1e4*e.getTime()+this.ticksTo1970;break;case"'":i("'")?a+="'":l=!0;break;default:a+=t.charAt(n)}return a},e.prototype.formatTime=function(e){if(!e)return"";var t="",n=this.utc?e.getUTCHours():e.getHours(),i=e.getMinutes(),o=e.getSeconds();return"12"==this.hourFormat&&n>11&&12!=n&&(n-=12),t+="12"==this.hourFormat&&0===n?12:n<10?"0"+n:n,t+=":",t+=i<10?"0"+i:i,this.showSeconds&&(t+=":",t+=o<10?"0"+o:o),"12"==this.hourFormat&&(t+=e.getHours()>11?" PM":" AM"),t},e.prototype.parseTime=function(e){var t=e.split(":");if(t.length!==(this.showSeconds?3:2))throw"Invalid time";var n=parseInt(t[0]),i=parseInt(t[1]),o=this.showSeconds?parseInt(t[2]):null;if(isNaN(n)||isNaN(i)||n>23||i>59||"12"==this.hourFormat&&n>12||this.showSeconds&&(isNaN(o)||o>59))throw"Invalid time";return"12"==this.hourFormat&&12!==n&&this.pm&&(n+=12),{hour:n,minute:i,second:o}},e.prototype.parseDate=function(e,t){if(null==t||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;var n,i,o,r,a=0,l="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),s=-1,d=-1,c=-1,u=-1,h=!1,p=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},f=function(t){var n=p(t),i="@"===t?14:"!"===t?20:"y"===t&&n?4:"o"===t?3:2,o=new RegExp("^\\d{"+("y"===t?i:1)+","+i+"}"),r=e.substring(a).match(o);if(!r)throw"Missing number at position "+a;return a+=r[0].length,parseInt(r[0],10)},g=function(t,n,i){for(var o=-1,r=p(t)?i:n,l=[],s=0;s<r.length;s++)l.push([s,r[s]]);for(l.sort(function(e,t){return-(e[1].length-t[1].length)}),s=0;s<l.length;s++){var d=l[s][1];if(e.substr(a,d.length).toLowerCase()===d.toLowerCase()){o=l[s][0],a+=d.length;break}}if(-1!==o)return o+1;throw"Unknown name at position "+a},m=function(){if(e.charAt(a)!==t.charAt(n))throw"Unexpected literal at position "+a;a++};for(n=0;n<t.length;n++)if(h)"'"!==t.charAt(n)||p("'")?m():h=!1;else switch(t.charAt(n)){case"d":c=f("d");break;case"D":g("D",this.locale.dayNamesShort,this.locale.dayNames);break;case"o":u=f("o");break;case"m":d=f("m");break;case"M":d=g("M",this.locale.monthNamesShort,this.locale.monthNames);break;case"y":s=f("y");break;case"@":s=(r=new Date(f("@"))).getFullYear(),d=r.getMonth()+1,c=r.getDate();break;case"!":s=(r=new Date((f("!")-this.ticksTo1970)/1e4)).getFullYear(),d=r.getMonth()+1,c=r.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(a<e.length&&(o=e.substr(a),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===s?s=(new Date).getFullYear():s<100&&(s+=(new Date).getFullYear()-(new Date).getFullYear()%100+(s<=l?0:-100)),u>-1)for(d=1,c=u;!(c<=(i=this.getDaysCountInMonth(s,d-1)));)d++,c-=i;if(this.utc){if((r=new Date(Date.UTC(s,d-1,c))).getUTCFullYear()!==s||r.getUTCMonth()+1!==d||r.getUTCDate()!==c)throw"Invalid date"}else if((r=this.daylightSavingAdjust(new Date(s,d-1,c))).getFullYear()!==s||r.getMonth()+1!==d||r.getDate()!==c)throw"Invalid date";return r},e.prototype.daylightSavingAdjust=function(e){return e?(this.utc||e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},e.prototype.updateFilledState=function(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue},e.prototype.onTodayButtonClick=function(e){var t=new Date,n={day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),today:!0,selectable:!0};this.createMonth(n.month,n.year),this.onDateSelect(e,n),this.onTodayClick.emit(e)},e.prototype.onClearButtonClick=function(e){this.updateModel(null),this.updateInputfield(),this.overlayVisible=!1,this.onClearClick.emit(e)},e.prototype.bindDocumentClickListener=function(){var e=this;this.documentClickListener||(this.documentClickListener=this.renderer.listen("document","click",function(t){!e.datepickerClick&&e.overlayVisible&&(e.overlayVisible=!1,e.onClose.emit(t)),e.datepickerClick=!1,e.cd.detectChanges()}))},e.prototype.unbindDocumentClickListener=function(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)},e.prototype.ngOnDestroy=function(){this.unbindDocumentClickListener(),!this.inline&&this.appendTo&&this.el.nativeElement.appendChild(this.overlayViewChild.nativeElement)},i([r.Input(),o("design:type",Date)],e.prototype,"defaultDate",void 0),i([r.Input(),o("design:type",String)],e.prototype,"style",void 0),i([r.Input(),o("design:type",String)],e.prototype,"styleClass",void 0),i([r.Input(),o("design:type",String)],e.prototype,"inputStyle",void 0),i([r.Input(),o("design:type",String)],e.prototype,"inputId",void 0),i([r.Input(),o("design:type",String)],e.prototype,"name",void 0),i([r.Input(),o("design:type",String)],e.prototype,"inputStyleClass",void 0),i([r.Input(),o("design:type",String)],e.prototype,"placeholder",void 0),i([r.Input(),o("design:type",Object)],e.prototype,"disabled",void 0),i([r.Input(),o("design:type",String)],e.prototype,"dateFormat",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"inline",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"showOtherMonths",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"selectOtherMonths",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"showIcon",void 0),i([r.Input(),o("design:type",String)],e.prototype,"icon",void 0),i([r.Input(),o("design:type",Object)],e.prototype,"appendTo",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"readonlyInput",void 0),i([r.Input(),o("design:type",Object)],e.prototype,"shortYearCutoff",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"monthNavigator",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"yearNavigator",void 0),i([r.Input(),o("design:type",String)],e.prototype,"yearRange",void 0),i([r.Input(),o("design:type",String)],e.prototype,"hourFormat",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"timeOnly",void 0),i([r.Input(),o("design:type",Number)],e.prototype,"stepHour",void 0),i([r.Input(),o("design:type",Number)],e.prototype,"stepMinute",void 0),i([r.Input(),o("design:type",Number)],e.prototype,"stepSecond",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"showSeconds",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"required",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"showOnFocus",void 0),i([r.Input(),o("design:type",String)],e.prototype,"dataType",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"utc",void 0),i([r.Input(),o("design:type",String)],e.prototype,"selectionMode",void 0),i([r.Input(),o("design:type",Number)],e.prototype,"maxDateCount",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"showButtonBar",void 0),i([r.Input(),o("design:type",String)],e.prototype,"todayButtonStyleClass",void 0),i([r.Input(),o("design:type",String)],e.prototype,"clearButtonStyleClass",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"autoZIndex",void 0),i([r.Input(),o("design:type",Number)],e.prototype,"baseZIndex",void 0),i([r.Input(),o("design:type",String)],e.prototype,"panelStyleClass",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"keepInvalid",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"hideOnDateTimeSelect",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onFocus",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onBlur",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onClose",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onSelect",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onInput",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onTodayClick",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onClearClick",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onMonthChange",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onYearChange",void 0),i([r.ContentChildren(c.PrimeTemplate),o("design:type",r.QueryList)],e.prototype,"templates",void 0),i([r.Input(),o("design:type",Number)],e.prototype,"tabindex",void 0),i([r.ViewChild("datepicker"),o("design:type",r.ElementRef)],e.prototype,"overlayViewChild",void 0),i([r.ViewChild("inputfield"),o("design:type",r.ElementRef)],e.prototype,"inputfieldViewChild",void 0),i([r.Input(),o("design:type",Date),o("design:paramtypes",[Date])],e.prototype,"minDate",null),i([r.Input(),o("design:type",Date),o("design:paramtypes",[Date])],e.prototype,"maxDate",null),i([r.Input(),o("design:type",Array),o("design:paramtypes",[Array])],e.prototype,"disabledDates",null),i([r.Input(),o("design:type",Array),o("design:paramtypes",[Array])],e.prototype,"disabledDays",null),i([r.Input(),o("design:type",Boolean),o("design:paramtypes",[Boolean])],e.prototype,"showTime",null),i([r.Input(),o("design:type",Object),o("design:paramtypes",[Object])],e.prototype,"locale",null),i([r.Component({selector:"p-calendar",template:'\n        <span [ngClass]="{\'ui-calendar\':true,\'ui-calendar-w-btn\':showIcon}" [ngStyle]="style" [class]="styleClass">\n            <ng-template [ngIf]="!inline">\n                <input #inputfield type="text" [attr.id]="inputId" [attr.name]="name" [attr.required]="required" [value]="inputFieldValue" (focus)="onInputFocus($event)" (keydown)="onInputKeydown($event)" (click)="onInputClick($event)" (blur)="onInputBlur($event)"\n                    [readonly]="readonlyInput" (input)="onUserInput($event)" [ngStyle]="inputStyle" [class]="inputStyleClass" [placeholder]="placeholder||\'\'" [disabled]="disabled" [attr.tabindex]="tabindex"\n                    [ngClass]="\'ui-inputtext ui-widget ui-state-default ui-corner-all\'" autocomplete="off"\n                    ><button type="button" [icon]="icon" pButton *ngIf="showIcon" (click)="onButtonClick($event,inputfield)" class="ui-datepicker-trigger ui-calendar-button"\n                    [ngClass]="{\'ui-state-disabled\':disabled}" [disabled]="disabled" tabindex="-1"></button>\n            </ng-template>\n            <div #datepicker [class]="panelStyleClass" [ngClass]="{\'ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all\': true, \'ui-datepicker-inline\':inline,\'ui-shadow\':!inline,\'ui-state-disabled\':disabled,\'ui-datepicker-timeonly\':timeOnly}"\n                [ngStyle]="{\'display\': inline ? \'inline-block\' : (overlayVisible ? \'block\' : \'none\')}" (click)="onDatePickerClick($event)" [@overlayState]="inline ? \'visible\' : (overlayVisible ? \'visible\' : \'hidden\')">\n\n                <div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all" *ngIf="!timeOnly && (overlayVisible || inline)">\n                    <ng-content select="p-header"></ng-content>\n                    <a class="ui-datepicker-prev ui-corner-all" href="#" (click)="prevMonth($event)">\n                        <span class="fa fa-angle-left"></span>\n                    </a>\n                    <a class="ui-datepicker-next ui-corner-all" href="#" (click)="nextMonth($event)">\n                        <span class="fa fa-angle-right"></span>\n                    </a>\n                    <div class="ui-datepicker-title">\n                        <span class="ui-datepicker-month" *ngIf="!monthNavigator">{{locale.monthNames[currentMonth]}}</span>\n                        <select class="ui-datepicker-month" *ngIf="monthNavigator" (change)="onMonthDropdownChange($event.target.value)">\n                            <option [value]="i" *ngFor="let month of locale.monthNames;let i = index" [selected]="i == currentMonth">{{month}}</option>\n                        </select>\n                        <select class="ui-datepicker-year" *ngIf="yearNavigator" (change)="onYearDropdownChange($event.target.value)">\n                            <option [value]="year" *ngFor="let year of yearOptions" [selected]="year == currentYear">{{year}}</option>\n                        </select>\n                        <span class="ui-datepicker-year" *ngIf="!yearNavigator">{{currentYear}}</span>\n                    </div>\n                </div>\n                <table class="ui-datepicker-calendar" *ngIf="!timeOnly && (overlayVisible || inline)">\n                    <thead>\n                        <tr>\n                            <th scope="col" *ngFor="let weekDay of weekDays;let begin = first; let end = last">\n                                <span>{{weekDay}}</span>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr *ngFor="let week of dates">\n                            <td *ngFor="let date of week" [ngClass]="{\'ui-datepicker-other-month ui-state-disabled\':date.otherMonth,\n                                \'ui-datepicker-current-day\':isSelected(date),\'ui-datepicker-today\':date.today}">\n                                <a class="ui-state-default" href="#" *ngIf="date.otherMonth ? showOtherMonths : true"\n                                    [ngClass]="{\'ui-state-active\':isSelected(date), \'ui-state-highlight\':date.today, \'ui-state-disabled\':!date.selectable}"\n                                    (click)="onDateSelect($event,date)" draggable="false">\n                                    <ng-container *ngIf="!dateTemplate">{{date.day}}</ng-container>\n                                    <ng-container *ngTemplateOutlet="dateTemplate; context: {$implicit: date}"></ng-container>\n                                </a>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n                <div class="ui-timepicker ui-widget-header ui-corner-all" *ngIf="showTime||timeOnly">\n                    <div class="ui-hour-picker">\n                        <a href="#" (click)="incrementHour($event)">\n                            <span class="fa fa-angle-up"></span>\n                        </a>\n                        <span [ngStyle]="{\'display\': currentHour < 10 ? \'inline\': \'none\'}">0</span><span>{{currentHour}}</span>\n                        <a href="#" (click)="decrementHour($event)">\n                            <span class="fa fa-angle-down"></span>\n                        </a>\n                    </div>\n                    <div class="ui-separator">\n                        <a href="#">\n                            <span class="fa fa-angle-up"></span>\n                        </a>\n                        <span>:</span>\n                        <a href="#">\n                            <span class="fa fa-angle-down"></span>\n                        </a>\n                    </div>\n                    <div class="ui-minute-picker">\n                        <a href="#" (click)="incrementMinute($event)">\n                            <span class="fa fa-angle-up"></span>\n                        </a>\n                        <span [ngStyle]="{\'display\': currentMinute < 10 ? \'inline\': \'none\'}">0</span><span>{{currentMinute}}</span>\n                        <a href="#" (click)="decrementMinute($event)">\n                            <span class="fa fa-angle-down"></span>\n                        </a>\n                    </div>\n                    <div class="ui-separator" *ngIf="showSeconds">\n                        <a href="#">\n                            <span class="fa fa-angle-up"></span>\n                        </a>\n                        <span>:</span>\n                        <a href="#">\n                            <span class="fa fa-angle-down"></span>\n                        </a>\n                    </div>\n                    <div class="ui-second-picker" *ngIf="showSeconds">\n                        <a href="#" (click)="incrementSecond($event)">\n                            <span class="fa fa-angle-up"></span>\n                        </a>\n                        <span [ngStyle]="{\'display\': currentSecond < 10 ? \'inline\': \'none\'}">0</span><span>{{currentSecond}}</span>\n                        <a href="#" (click)="decrementSecond($event)">\n                            <span class="fa fa-angle-down"></span>\n                        </a>\n                    </div>\n                    <div class="ui-ampm-picker" *ngIf="hourFormat==\'12\'">\n                        <a href="#" (click)="toggleAMPM($event)">\n                            <span class="fa fa-angle-up"></span>\n                        </a>\n                        <span>{{pm ? \'PM\' : \'AM\'}}</span>\n                        <a href="#" (click)="toggleAMPM($event)">\n                            <span class="fa fa-angle-down"></span>\n                        </a>\n                    </div>\n                </div>\n                <div class="ui-datepicker-buttonbar ui-widget-header" *ngIf="showButtonBar">\n                    <div class="ui-g">\n                        <div class="ui-g-6">\n                            <button type="button" [label]="_locale.today" (click)="onTodayButtonClick($event)" pButton [ngClass]="[todayButtonStyleClass]"></button>\n                        </div>\n                        <div class="ui-g-6">\n                            <button type="button" [label]="_locale.clear" (click)="onClearButtonClick($event)" pButton [ngClass]="[clearButtonStyleClass]"></button>\n                        </div>\n                    </div>\n                </div>\n                <ng-content select="p-footer"></ng-content>\n            </div>\n        </span>\n    ',animations:[a.trigger("overlayState",[a.state("hidden",a.style({opacity:0})),a.state("visible",a.style({opacity:1})),a.transition("visible => hidden",a.animate("400ms ease-in")),a.transition("hidden => visible",a.animate("400ms ease-out"))])],host:{"[class.ui-inputwrapper-filled]":"filled","[class.ui-inputwrapper-focus]":"focus"},providers:[d.DomHandler,t.CALENDAR_VALUE_ACCESSOR]})],e)}();t.Calendar=h,t.CalendarModule=function(){return i([r.NgModule({imports:[l.CommonModule,s.ButtonModule,c.SharedModule],exports:[h,s.ButtonModule,c.SharedModule],declarations:[h]})],function(){})}()},u11H:function(e,t,n){"use strict";var i=n("TToO").__decorate,o=n("TToO").__metadata;Object.defineProperty(t,"__esModule",{value:!0});var r=n("WT6e"),a=n("Xjw4"),l=n("NtYx"),s=n("7DMc");t.SELECTBUTTON_VALUE_ACCESSOR={provide:s.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return d}),multi:!0};var d=function(){function e(e,t){this.objectUtils=e,this.cd=t,this.onOptionClick=new r.EventEmitter,this.onChange=new r.EventEmitter,this.onModelChange=function(){},this.onModelTouched=function(){}}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){var t=this.optionLabel||this.itemTemplate?this.objectUtils.generateSelectItems(e,this.optionLabel):e;this._options=t},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e,this.cd.markForCheck()},e.prototype.registerOnChange=function(e){this.onModelChange=e},e.prototype.registerOnTouched=function(e){this.onModelTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.onItemClick=function(e,t,n,i){if(!this.disabled){if(n.focus(),this.multiple){var o=this.findItemIndex(t);this.value=-1!=o?this.value.filter(function(e,t){return t!=o}):(this.value||[]).concat([t.value])}else this.value=t.value;this.onOptionClick.emit({originalEvent:e,option:t,index:i}),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}},e.prototype.onFocus=function(e){this.focusedItem=e.target},e.prototype.onBlur=function(e){this.focusedItem=null,this.onModelTouched()},e.prototype.isSelected=function(e){return this.multiple?-1!=this.findItemIndex(e):this.objectUtils.equals(e.value,this.value,this.dataKey)},e.prototype.findItemIndex=function(e){var t=-1;if(this.value)for(var n=0;n<this.value.length;n++)if(this.value[n]==e.value){t=n;break}return t},i([r.Input(),o("design:type",Number)],e.prototype,"tabindex",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"multiple",void 0),i([r.Input(),o("design:type",Object)],e.prototype,"style",void 0),i([r.Input(),o("design:type",String)],e.prototype,"styleClass",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"disabled",void 0),i([r.Input(),o("design:type",String)],e.prototype,"dataKey",void 0),i([r.Input(),o("design:type",String)],e.prototype,"optionLabel",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onOptionClick",void 0),i([r.Output(),o("design:type",r.EventEmitter)],e.prototype,"onChange",void 0),i([r.ContentChild(r.TemplateRef),o("design:type",Object)],e.prototype,"itemTemplate",void 0),i([r.Input(),o("design:type",Array),o("design:paramtypes",[Array])],e.prototype,"options",null),i([r.Component({selector:"p-selectButton",template:'\n        <div [ngClass]="\'ui-selectbutton ui-buttonset ui-widget ui-corner-all ui-buttonset-\' + options.length" [ngStyle]="style" [class]="styleClass">\n            <div *ngFor="let option of options; let i = index" class="ui-button ui-widget ui-state-default ui-button-text-only {{option.styleClass}}"\n                [ngClass]="{\'ui-state-active\':isSelected(option), \'ui-state-disabled\':disabled, \'ui-state-focus\': cbox == focusedItem, \n                \'ui-button-text-icon-left\': (option.icon != null), \'ui-button-icon-only\': (option.icon && !option.label)}" (click)="onItemClick($event,option,cbox,i)" [attr.title]="option.title">\n                <ng-container *ngIf="!itemTemplate else customcontent">\n                    <span [ngClass]="[\'ui-clickable\', \'ui-button-icon-left\']" [class]="option.icon" *ngIf="option.icon"></span>\n                    <span class="ui-button-text ui-clickable">{{option.label||\'ui-btn\'}}</span>\n                </ng-container>\n                <ng-template #customcontent>\n                    <ng-container *ngTemplateOutlet="itemTemplate; context: {$implicit: option.value, index: i}"></ng-container>\n                </ng-template>\n                <div class="ui-helper-hidden-accessible">\n                    <input #cbox type="checkbox" [checked]="isSelected(option)" (focus)="onFocus($event)" (blur)="onBlur($event)" [attr.tabindex]="tabindex" [attr.disabled]="disabled">\n                </div>\n            </div>\n        </div>\n    ',providers:[l.ObjectUtils,t.SELECTBUTTON_VALUE_ACCESSOR]})],e)}();t.SelectButton=d,t.SelectButtonModule=function(){return i([r.NgModule({imports:[a.CommonModule],exports:[d],declarations:[d]})],function(){})}()},vtaX:function(e,t,n){"use strict";var i=n("TToO").__decorate,o=n("TToO").__metadata,r=n("TToO").__param;Object.defineProperty(t,"__esModule",{value:!0});var a=n("WT6e"),l=(n("7DMc"),n("Xjw4")),s=function(){function e(e,t){this.el=e,this.ngModel=t,this.rows=2,this.cols=20,this.onResize=new a.EventEmitter}return e.prototype.ngOnInit=function(){this.rowsDefault=this.rows,this.colsDefault=this.cols},e.prototype.ngDoCheck=function(){this.updateFilledState()},e.prototype.onInput=function(e){this.updateFilledState()},e.prototype.updateFilledState=function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model},e.prototype.onFocus=function(e){this.autoResize&&this.resize(e)},e.prototype.onBlur=function(e){this.autoResize&&this.resize(e)},e.prototype.onKeyup=function(e){this.autoResize&&this.resize(e)},e.prototype.resize=function(e){for(var t=0,n=this.el.nativeElement.value.split("\n"),i=n.length-1;i>=0;--i)t+=Math.floor(n[i].length/this.colsDefault+1);this.rows=t>=this.rowsDefault?t+1:this.rowsDefault,this.onResize.emit(e||{})},i([a.Input(),o("design:type",Boolean)],e.prototype,"autoResize",void 0),i([a.Input(),o("design:type",Number)],e.prototype,"rows",void 0),i([a.Input(),o("design:type",Number)],e.prototype,"cols",void 0),i([a.Output(),o("design:type",a.EventEmitter)],e.prototype,"onResize",void 0),i([a.HostListener("input",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onInput",null),i([a.HostListener("focus",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onFocus",null),i([a.HostListener("blur",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onBlur",null),i([a.HostListener("keyup",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onKeyup",null),i([a.Directive({selector:"[pInputTextarea]",host:{"[class.ui-inputtext]":"true","[class.ui-corner-all]":"true","[class.ui-state-default]":"true","[class.ui-widget]":"true","[class.ui-state-filled]":"filled","[attr.rows]":"rows","[attr.cols]":"cols"}}),r(1,a.Optional())],e)}();t.InputTextarea=s,t.InputTextareaModule=function(){return i([a.NgModule({imports:[l.CommonModule],exports:[s],declarations:[s]})],function(){})}()},yqSP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("WT6e"),o=function(){},r=n("pyCL"),a=n("JTlP"),l=n("ixpr"),s=n("YKDW"),d=n("bYwb"),c=n("tM/A"),u=n("Pdsd"),h=n("Xjw4"),p=n("xwW5"),f=n("CR5U"),g=n("N+YK"),m=n("hOcw"),v=n("7DMc"),y=n("axfU"),b=n("L8l5"),w=n("R7t/"),C=n("nUnJ"),x=n("LNIi"),S=n("h/ZS"),T=n("bfOx"),E=n("RwJ4"),_=n("GcUz"),k=n("bruD"),D=n("sPbG"),A=n("jBXq"),O=n("TToO"),I=function(){function e(){}return e.ENTITY_NAME="productNomenclature",e.GET_PRODUCT_BY_NOMENCLATURE="composantsByIdNomenclature",e.PRODUCTNOMENCLATURE_URL="",e.PAGEABLE="pageable",e.TOTAL_ITEMS="totalItems",e.EDIT_PRODUCTNOMENCLATURE_TITLE="EDIT product Nomenclautre",e.ADD_PRODUCTNOMENCLATURE="Add productNomenclautre",e.REFERENCE_FILIED="nomenclature",e.REFERENCE_TITLE="Nomenclature",e.PRODUCTID_FILIED="productId",e.PRODUCTID_TITLE="Product Id",e.PRODUCTNAME_QUANTITE_FILIED="quantity",e.PRODUCTNAME_QUANTITE_TITLE="Quantity",e.SUCCESS_OPERATION="SUCCESS_OPERATION",e.FAILURE_OPERATION="FAILURE_OPERATION",e}(),P=n("Q5IX"),R=function(e){function t(t,n){return e.call(this,t,n,"manufacturing",I.ENTITY_NAME)||this}return Object(O.__extends)(t,e),t}(P.a),M=n("l5y7"),N=n("kwWP"),L=n("y2HD"),H=n("xIwP"),B=n("HXLs"),j=function(){function e(e,t,n,i,o,r,a,l,s,d){this.authService=e,this.nomenclatureService=t,this.tiersService=n,this.itemService=i,this.productNomenclatureService=o,this.router=r,this.swalWarrings=a,this.fb=l,this.growlService=s,this.translate=d,this.size=N.a.TEN,this.value="",this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.gridState={skip:N.a.ZERO,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:_.a.REFERENCE_FILIED,title:_.a.REFERENCE_TITLE,filterable:!0},{field:_.a.TYPE_NOMENCLATURE_FILIED,title:_.a.TYPE_NOMENCLATURE_TITLE,filterable:!0},{field:_.a.PRODUCT_NAME_FILIED,title:_.a.PRODUCT_NAME_TITLE,filterable:!0}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.currentPage=N.a.ZERO,this.MANUFACTURINGPermissions=B.a.MANUFATORINGPermissions,this.predicate=x.n.prepareTiersPredicate(S.a.CUSTOMER_TYPE),this.btnEditVisible=!0}return e.prototype.initGridDataSource=function(e){null!=e&&(this.currentPage=e),this.loadAndSearchByNomenclatureReference()},e.prototype.loadAndSearchByNomenclatureReference=function(){var e=this;this.subscription$=this.nomenclatureService.getJavaGenericService().getEntityList(_.a.GET_NOMENCLATURES_PAGEABLE+"?reference="+this.value+"&page="+this.currentPage+"&size="+this.size).subscribe(function(t){var n=t.content.length,i=[];t.content.forEach(function(e){i.push(e.productId)}),e.itemService.getItemDetails(i).subscribe(function(n){n.forEach(function(e){t.content.find(function(t){return t.productId===e.Id}).description=e.Description}),e.gridSettings.gridData={data:t.content,total:t.totalElements}}),n===N.a.ZERO&&e.loadAndSearchByArticle()})},e.prototype.loadAndSearchByArticle=function(){var e=this;this.itemService.getByCodeAndDesignation(this.value).flatMap(function(t){return e.nomenclatureService.checkProductsExistInNomenclature(t,e.currentPage,e.size)}).subscribe(function(t){var n=0;t.content.map(function(i){e.itemService.getById(i.productId).subscribe(function(e){i.description=e[_.a.NOMENCLATURE_DESCRIPTION]},function(e){},function(){t.content.length===++n&&(e.gridSettings.gridData={data:t.content,total:t.totalElements})})})})},e.prototype.removeHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){n.value&&t.toDeleteNomenclature(e)})},e.prototype.toDeleteNomenclature=function(e){var t=this;this.nomenclatureService.isNomenclatureUsedInGamme(e.id).subscribe(function(n){t.canBeDeleted=n,t.canBeDeleted>0?t.growlService.ErrorNotification(t.translate.instant(_.a.CANNOT_DELETE_NOMENCLATURE)):t.deleteNomenclature(e)})},e.prototype.deleteNomenclature=function(e){var t=this;this.nomenclatureService.getJavaGenericService().deleteEntity(e.id,_.a.NOMENCLATURES_URL).subscribe(function(){t.growlService.successNotification(t.translate.instant(_.a.SUCCESS_OPERATION)),t.initGridDataSource()},function(){t.growlService.ErrorNotification(t.translate.instant(_.a.FAILURE_OPERATION))})},e.prototype.goToAdvancedEdit=function(e){this.router.navigate([_.a.URI_ADVANCED_EDIT.concat(e.id)],{queryParams:M.filter,skipLocationChange:!0})},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.goPage(),this.initGridDataSource()},e.prototype.goPage=function(){var e=this;this.nomenclatureService.getJavaGenericService().getEntityList(_.a.GET_NOMENCLATURES_PAGEABLE+"?page="+this.currentPage+"&size="+this.size).subscribe(function(t){e.gridSettings.gridData.data=t.content})},e.prototype.onSearch=function(){""===this.value||this.value.length<N.a.THREE?(this.value="",this.initGridDataSource()):this.value.length>=N.a.THREE&&this.initGridDataSource(0)},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe()},e.prototype.ngOnInit=function(){this.initGridDataSource()},e}(),z=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function U(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","row"],["style","float :right; margin-right: 40px;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](2,0,null,null,1,"app-btn-grid",[["style","margin-top: -5%;    display: inline-flex;"]],null,null,null,r.b,r.a)),i["\u0275did"](3,114688,null,0,a.a,[l.a,s.k,d.a,c.a,u.a],{advencedAdd:[0,"advencedAdd"],add:[1,"add"],export:[2,"export"],addLink:[3,"addLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,3,0,!0,!1,!1,"add")},null)}function F(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](16777216,null,null,2,null,U)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](3,1),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,2,0,n.authService.hasAuthorities(e(t,3,0,n.MANUFACTURINGPermissions.MANUFACTURING_ADD_NOMENCLATURE_PERMISSION)))},null)}function G(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"app-grid-cell-input-template",[["controlName","Reference"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](1,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){e(t,1,0,t.component.formGroup,"Reference","text")},null)}function q(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"app-grid-cell-input-template",[["controlName","TypeNomenclature"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](1,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){e(t,1,0,t.component.formGroup,"TypeNomenclature","text")},null)}function V(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"app-grid-cell-input-template",[["controlName","ProductId"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](1,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){e(t,1,0,t.component.formGroup,"ProductId","text")},null)}function W(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,G)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,q)),i["\u0275did"](7,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,V)),i["\u0275did"](11,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){e(t,3,0,"REFERENCE"==t.parent.context.$implicit.field),e(t,7,0,"TYPENOMENCLATURE"==t.parent.context.$implicit.field),e(t,11,0,"PRODUCTID"==t.parent.context.$implicit.field)},null)}function Y(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](1,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],format:[3,"format"],filter:[4,"filter"],filterable:[5,"filterable"]},null),i["\u0275qud"](603979776,8,{headerTemplates:1}),i["\u0275qud"](335544320,9,{footerTemplate:0}),i["\u0275qud"](603979776,10,{columnMenuTemplates:1}),i["\u0275qud"](335544320,11,{template:0}),i["\u0275qud"](335544320,12,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,13,{groupFooterTemplate:0}),i["\u0275qud"](335544320,14,{editTemplate:0}),i["\u0275qud"](335544320,15,{filterCellTemplate:0}),i["\u0275qud"](335544320,16,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](0,null,null,1,null,W)),i["\u0275did"](15,16384,[[14,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,1,0,i["\u0275unv"](t,1,0,i["\u0275nov"](t,11).transform(t.context.$implicit.title)),t.context.$implicit._width,t.context.$implicit.field,t.context.$implicit.format,t.context.$implicit.filter,t.context.$implicit.filterable)},null)}function X(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","las la-pen cursor-pointer edit-pencil la-lg mx-3"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.goToAdvancedEdit(e.parent.context.dataItem)&&i),i},null,null))],null,null)}function Z(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","text-danger cursor-pointer fa fa-trash-o la-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.removeHandler(e.parent.context.dataItem)&&i),i},null,null))],null,null)}function J(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n\n                      "])),(e()(),i["\u0275and"](16777216,null,null,2,null,X)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](3,1),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,2,null,Z)),i["\u0275did"](7,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](8,1),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,2,0,n.authService.hasAuthorities(e(t,3,0,n.MANUFACTURINGPermissions.MANUFACTURING_UPDATE_NOMENCLATURE_PERMISSION))),e(t,7,0,n.authService.hasAuthorities(e(t,8,0,n.MANUFACTURINGPermissions.MANUFACTURING_DELETE_NOMENCLATURE_PERMISSION)))},null)}function K(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{grid:0}),(e()(),i["\u0275eld"](1,0,null,null,135,"div",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](3,0,null,null,132,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](5,0,null,null,129,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](7,0,null,null,126,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](10,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](12,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](14,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](15,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n        "])),(e()(),i["\u0275eld"](23,0,null,null,108,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](25,0,null,null,26,"div",[["class","row d-flex justify-content-between mt-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](27,0,null,null,23,"div",[["class","col-lg-4 col-md-6 col-sm-12 col-xs-12 d-flex justify-content-center"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](29,0,null,null,20,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](31,0,null,null,17,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](33,0,null,null,9,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](35,0,null,null,6,"input",[["aria-describedby","addon-wrapping"],["aria-label","Search"],["autocomplete","off"],["class","form-control"],["name","value"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"focusout"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,36)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,36).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,36)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,36)._compositionEnd(n.target.value)&&o),"ngModelChange"===t&&(o=!1!==(r.value=n)&&o),"keyup.enter"===t&&(o=!1!==r.onSearch()&&o),"focusout"===t&&(o=!1!==r.onSearch()&&o),o},null,null)),i["\u0275did"](36,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](38,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](40,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](44,0,null,null,3,"div",[["class","col-2 p-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](46,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-search fa-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onSearch()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n          "])),(e()(),i["\u0275eld"](53,0,null,null,77,"div",[["class","card  mt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](55,0,null,null,74,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](57,0,null,null,71,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"],[null,"remove"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"remove"===t&&(i=!1!==o.removeHandler(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](89,8110080,[[1,4]],6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",remove:"remove"}),i["\u0275qud"](603979776,2,{columns:1}),i["\u0275qud"](603979776,3,{detailTemplateChildren:1}),i["\u0275qud"](603979776,4,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,5,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,6,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,7,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,F)),i["\u0275did"](100,16384,[[6,4]],0,m._110,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Y)),i["\u0275did"](105,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](109,0,null,null,10,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](110,49152,null,4,m.J,[[8,null]],{width:[0,"width"]},null),i["\u0275qud"](603979776,17,{headerTemplates:1}),i["\u0275qud"](335544320,18,{footerTemplate:0}),i["\u0275qud"](603979776,19,{columnMenuTemplates:1}),i["\u0275qud"](335544320,20,{template:0}),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](0,null,null,1,null,J)),i["\u0275did"](118,16384,[[20,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](123,0,null,null,3,"app-grid-export",[["api","getDataSourcePredicateTiers"],["excel","true"],["pdf","true"]],null,null,null,w.b,w.a)),i["\u0275did"](124,49152,null,0,C.a,[s.k],{gridSettings:[0,"gridSettings"],fileName:[1,"fileName"],pdf:[2,"pdf"],excel:[3,"excel"],service:[4,"service"],predicate:[5,"predicate"],api:[6,"api"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,38,0,"value",n.value),e(t,89,0,n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,"menu",!0,n.pagerSettings,!0,!0),e(t,105,0,n.gridSettings.columnsConfig),e(t,110,0,170),e(t,124,0,n.gridSettings,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,124,1,i["\u0275nov"](t,125).transform("NOMENCLATURE_LIST")),""),"true","true",n.tiersService,n.predicate,"getDataSourcePredicateTiers")},function(e,t){e(t,15,0,i["\u0275unv"](t,15,0,i["\u0275nov"](t,16).transform("NOMENCLATURE_LIST"))),e(t,35,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,35,0,i["\u0275nov"](t,41).transform("SEARCH_NOMENCLATURE")),""),i["\u0275nov"](t,40).ngClassUntouched,i["\u0275nov"](t,40).ngClassTouched,i["\u0275nov"](t,40).ngClassPristine,i["\u0275nov"](t,40).ngClassDirty,i["\u0275nov"](t,40).ngClassValid,i["\u0275nov"](t,40).ngClassInvalid,i["\u0275nov"](t,40).ngClassPending),e(t,57,0,i["\u0275nov"](t,89).dir,i["\u0275nov"](t,89).hostClasses,i["\u0275nov"](t,89).hostClasses,i["\u0275nov"](t,89).lockedClasses,i["\u0275nov"](t,89).virtualClasses,i["\u0275nov"](t,89).columnResizing,i["\u0275nov"](t,89).noScrollbarClass)})}var Q=i["\u0275ccf"]("app-list-nomenclature",j,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-list-nomenclature",[],null,null,null,K,z)),i["\u0275did"](1,245760,null,0,j,[H.a,k.a,D.a,l.a,R,T.Router,E.a,v.FormBuilder,A.a,s.k],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),$=n("rDmE"),ee=n("sDRf"),te=n("mt/0"),ne=n("v7o9"),ie=n("S/9f"),oe=n("MOmh"),re=n("6HX5"),ae=n("68A+"),le=n("q0cx"),se=n("PUzs"),de=n("2S/T"),ce=n("lRQP"),ue=n("0zf6"),he=n("9Sd6"),pe=n("yQQh"),fe=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ge(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"div",[["class","ui-treetable-header ui-widget-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),i["\u0275ncd"](null,0),(e()(),i["\u0275ted"](-1,null,["\n            "]))],null,null)}function me(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"span",[["class","ui-column-title"]],null,null,null,null,null)),(e()(),i["\u0275ted"](1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.header)})}function ve(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"span",[["class","ui-column-title"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                                    "])),(e()(),i["\u0275eld"](2,16777216,null,null,1,"ay-columnHeaderTemplateLoader",[],null,null,null,Pe,Ie)),i["\u0275did"](3,245760,null,0,pe.k,[i.ViewContainerRef],{column:[0,"column"]},null),(e()(),i["\u0275ted"](-1,null,["\n                                "]))],function(e,t){e(t,3,0,t.parent.context.$implicit)},null)}function ye(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,[["headerCell",1]],null,9,"th",[],[[4,"display",null]],null,null,null,null)),i["\u0275did"](1,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275did"](2,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,me)),i["\u0275did"](5,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ve)),i["\u0275did"](8,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],function(e,t){e(t,1,0,t.context.$implicit.styleClass,"ui-state-default ui-unselectable-text"),e(t,2,0,t.context.$implicit.style),e(t,5,0,!t.context.$implicit.headerTemplate),e(t,8,0,t.context.$implicit.headerTemplate)},function(e,t){e(t,0,0,t.context.$implicit.hidden?"none":"table-cell")})}function be(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"span",[["class","ui-column-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.footer)})}function we(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"span",[["class","ui-column-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                                    "])),(e()(),i["\u0275eld"](2,16777216,null,null,1,"ay-columnFooterTemplateLoader",[],null,null,null,Me,Re)),i["\u0275did"](3,245760,null,0,pe.l,[i.ViewContainerRef],{column:[0,"column"]},null),(e()(),i["\u0275ted"](-1,null,["\n                                "]))],function(e,t){e(t,3,0,t.parent.context.$implicit)},null)}function Ce(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"td",[],null,null,null,null,null)),i["\u0275did"](1,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](2,{"ui-state-default":0}),i["\u0275did"](3,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,be)),i["\u0275did"](6,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,we)),i["\u0275did"](9,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],function(e,t){e(t,1,0,t.context.$implicit.styleClass,e(t,2,0,!0)),e(t,3,0,t.context.$implicit.style),e(t,6,0,!t.context.$implicit.footerTemplate),e(t,9,0,t.context.$implicit.footerTemplate)},null)}function xe(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,7,"tfoot",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](2,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ce)),i["\u0275did"](5,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){e(t,5,0,t.component.columns)},null)}function Se(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"tbody",[["class","ui-widget-content"],["pTreeRow",""]],null,null,null,Ze,ze)),i["\u0275did"](1,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](2,{"ui-treetable-even":0,"ui-treetable-odd":1}),i["\u0275did"](3,638976,null,0,pe.s,[pe.b],{node:[0,"node"],level:[1,"level"],labelExpand:[2,"labelExpand"],labelCollapse:[3,"labelCollapse"]},null)],function(e,t){var n=t.component;e(t,1,0,"ui-widget-content",e(t,2,0,t.context.even,t.context.odd)),e(t,3,0,t.context.$implicit,0,n.labelExpand,n.labelCollapse)},null)}function Te(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"ay-paginator",[["styleClass","ui-paginator-bottom"]],null,[[null,"onPageChange"]],function(e,t,n){var i=!0;return"onPageChange"===t&&(i=!1!==e.component.paginate(n)&&i),i},je,Ne)),i["\u0275did"](1,49152,null,0,pe.q,[],{pageLinkSize:[0,"pageLinkSize"],styleClass:[1,"styleClass"],rowsPerPageOptions:[2,"rowsPerPageOptions"],totalRecords:[3,"totalRecords"],first:[4,"first"],rows:[5,"rows"]},{onPageChange:"onPageChange"})],function(e,t){var n=t.component;e(t,1,0,n.pageLinks,"ui-paginator-bottom",n.rowsPerPageOptions,n.totalRecords,n.first,n.rows)},null)}function Ee(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"div",[["class","ui-treetable-footer ui-widget-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),i["\u0275ncd"](null,1),(e()(),i["\u0275ted"](-1,null,["\n            "]))],null,null)}function _e(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](1,0,null,null,34,"div",[],null,null,null,null,null)),i["\u0275did"](2,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275did"](3,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ge)),i["\u0275did"](6,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](8,0,null,null,20,"div",[["class","ui-treetable-tablewrapper"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](10,0,null,null,17,"table",[["class","ui-widget-content"]],[[8,"className",0]],null,null,null,null)),i["\u0275did"](11,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](13,0,null,null,7,"thead",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](15,0,null,null,4,"tr",[["class","ui-state-default"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ye)),i["\u0275did"](18,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,xe)),i["\u0275did"](23,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Se)),i["\u0275did"](26,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Te)),i["\u0275did"](31,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ee)),i["\u0275did"](34,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,2,0,n.styleClass,"ui-treetable ui-widget"),e(t,3,0,n.style),e(t,6,0,n.header),e(t,11,0,n.tableStyle),e(t,18,0,n.columns),e(t,23,0,n.hasFooter()),e(t,26,0,n.dataToRender),e(t,31,0,n.paginator),e(t,34,0,n.footer)},function(e,t){e(t,10,0,t.component.tableStyleClass)})}var ke=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function De(e){return i["\u0275vid"](0,[],null,null)}var Ae=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Oe(e){return i["\u0275vid"](0,[],null,null)}var Ie=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Pe(e){return i["\u0275vid"](0,[],null,null)}var Re=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Me(e){return i["\u0275vid"](0,[],null,null)}var Ne=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Le(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"a",[["class","ui-paginator-page ui-paginator-element ui-state-default ui-corner-all"],["href","#"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.changePage(e.context.$implicit-1,n)&&i),i},null,null)),i["\u0275did"](1,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](2,{"ui-state-active":0}),(e()(),i["\u0275ted"](3,null,["",""]))],function(e,t){e(t,1,0,"ui-paginator-page ui-paginator-element ui-state-default ui-corner-all",e(t,2,0,t.context.$implicit-1==t.component.getPage()))},function(e,t){e(t,3,0,t.context.$implicit)})}function He(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"option",[],[[8,"value",0],[8,"selected",0]],null,null,null,null)),(e()(),i["\u0275ted"](1,null,["",""]))],null,function(e,t){e(t,0,0,t.context.$implicit,t.component.rows==t.context.$implicit),e(t,1,0,t.context.$implicit)})}function Be(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"select",[["class","ui-paginator-rpp-options ui-widget ui-state-default"]],null,[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.onRppChange(n)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,He)),i["\u0275did"](3,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,3,0,t.component.rowsPerPageOptions)},null)}function je(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](1,0,null,null,40,"div",[],null,null,null,null,null)),i["\u0275did"](2,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275did"](3,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](5,0,null,null,5,"a",[["class","ui-paginator-first ui-paginator-element ui-state-default ui-corner-all"],["href","#"]],[[8,"tabIndex",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.changePageToFirst(n)&&i),i},null,null)),i["\u0275did"](6,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](7,{"ui-state-disabled":0}),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](9,0,null,null,0,"span",[["class","fa fa-step-backward"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](12,0,null,null,5,"a",[["class","ui-paginator-prev ui-paginator-element ui-state-default ui-corner-all"],["href","#"]],[[8,"tabIndex",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.changePageToPrev(n)&&i),i},null,null)),i["\u0275did"](13,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](14,{"ui-state-disabled":0}),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](16,0,null,null,0,"span",[["class","fa fa-backward"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](19,0,null,null,4,"span",[["class","ui-paginator-pages"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Le)),i["\u0275did"](22,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](25,0,null,null,5,"a",[["class","ui-paginator-next ui-paginator-element ui-state-default ui-corner-all"],["href","#"]],[[8,"tabIndex",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.changePageToNext(n)&&i),i},null,null)),i["\u0275did"](26,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](27,{"ui-state-disabled":0}),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](29,0,null,null,0,"span",[["class","fa fa-forward"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](32,0,null,null,5,"a",[["class","ui-paginator-last ui-paginator-element ui-state-default ui-corner-all"],["href","#"]],[[8,"tabIndex",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.changePageToLast(n)&&i),i},null,null)),i["\u0275did"](33,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](34,{"ui-state-disabled":0}),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](36,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Be)),i["\u0275did"](40,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,2,0,n.styleClass,"ui-paginator ui-widget ui-widget-header ui-unselectable-text"),e(t,3,0,n.style),e(t,6,0,"ui-paginator-first ui-paginator-element ui-state-default ui-corner-all",e(t,7,0,n.isFirstPage())),e(t,13,0,"ui-paginator-prev ui-paginator-element ui-state-default ui-corner-all",e(t,14,0,n.isFirstPage())),e(t,22,0,n.pageLinks),e(t,26,0,"ui-paginator-next ui-paginator-element ui-state-default ui-corner-all",e(t,27,0,n.isLastPage())),e(t,33,0,"ui-paginator-last ui-paginator-element ui-state-default ui-corner-all",e(t,34,0,n.isLastPage())),e(t,40,0,n.rowsPerPageOptions)},function(e,t){var n=t.component;e(t,5,0,n.isFirstPage()?-1:null),e(t,12,0,n.isFirstPage()?-1:null),e(t,25,0,n.isLastPage()?-1:null),e(t,32,0,n.isLastPage()?-1:null)})}var ze=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ue(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"a",[["class","ui-treetable-toggler fa fa-fw ui-c"],["href","#"]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.toggle(n)&&i),i},null,null)),i["\u0275did"](1,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](2,{"fa-caret-down":0,"fa-caret-right":1}),i["\u0275did"](3,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](4,{"margin-left":0,visibility:1}),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,1,0,"ui-treetable-toggler fa fa-fw ui-c",e(t,2,0,n.node.expanded,!n.node.expanded)),e(t,3,0,e(t,4,0,16*n.level+"px",n.isLeaf()?"hidden":"visible"))},function(e,t){var n=t.component;e(t,0,0,n.node.expanded?n.labelCollapse:n.labelExpand)})}function Fe(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,8,"div",[["class","ui-chkbox ui-treetable-checkbox"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](2,0,null,null,5,"div",[["class","ui-chkbox-box ui-widget ui-corner-all ui-state-default"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](4,0,null,null,2,"span",[["class","ui-chkbox-icon ui-c fa"]],null,null,null,null,null)),i["\u0275did"](5,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](6,{"fa-check":0,"fa-minus":1}),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,5,0,"ui-chkbox-icon ui-c fa",e(t,6,0,n.isSelected(),n.node.partialSelected))},null)}function Ge(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](1,null,["",""]))],null,function(e,t){var n=t.component;e(t,1,0,n.resolveFieldData(n.node.data,t.parent.context.$implicit.field))})}function qe(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,16777216,null,null,1,"ay-columnBodyTemplateLoader",[],null,null,null,Oe,Ae)),i["\u0275did"](1,245760,null,0,pe.j,[i.ViewContainerRef],{column:[0,"column"],rowData:[1,"rowData"]},null),(e()(),i["\u0275and"](0,null,null,0))],function(e,t){e(t,1,0,t.parent.context.$implicit,t.component.node)},null)}function Ve(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,14,"td",[],[[8,"className",0],[4,"display",null]],[[null,"click"],[null,"touchend"],[null,"contextmenu"]],function(e,t,n){var i=!0,o=e.component;return"click"===t&&(i=!1!==o.onRowClick(n)&&i),"touchend"===t&&(i=!1!==o.onRowTouchEnd()&&i),"contextmenu"===t&&(i=!1!==o.onRowRightClick(n)&&i),i},null,null)),i["\u0275did"](1,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ue)),i["\u0275did"](4,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Fe)),i["\u0275did"](7,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ge)),i["\u0275did"](10,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,qe)),i["\u0275did"](13,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,1,0,t.context.$implicit.style),e(t,4,0,0==t.context.index),e(t,7,0,"checkbox"==n.treeTable.selectionMode&&0==t.context.index),e(t,10,0,!t.context.$implicit.template),e(t,13,0,t.context.$implicit.template)},function(e,t){e(t,0,0,t.context.$implicit.styleClass,t.context.$implicit.hidden?"none":"table-cell")})}function We(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,6,"div",[["class","ui-treetable-row"]],null,null,null,null,null)),i["\u0275did"](1,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](2,{"ui-state-highlight":0,"ui-treetable-row-selectable":1}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ve)),i["\u0275did"](5,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "]))],function(e,t){var n=t.component;e(t,1,0,n.treeTable.getRowStyleClass(n.node),e(t,2,0,n.isSelected(),n.treeTable.selectionMode&&!1!==n.node.selectable)),e(t,5,0,n.treeTable.columns)},null)}function Ye(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"tbody",[["pTreeRow",""]],null,null,null,Ze,ze)),i["\u0275did"](1,638976,null,0,pe.s,[pe.b],{node:[0,"node"],parentNode:[1,"parentNode"],level:[2,"level"],labelExpand:[3,"labelExpand"],labelCollapse:[4,"labelCollapse"]},null)],function(e,t){var n=t.component;e(t,1,0,t.context.$implicit,n.node,n.level+1,n.labelExpand,n.labelCollapse)},null)}function Xe(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[["class","ui-treetable-row"],["style","display:table-row;white-space: nowrap"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](2,0,null,null,7,"td",[["class","ui-treetable-child-table-container"]],[[1,"colspan",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](4,0,null,null,4,"table",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ye)),i["\u0275did"](7,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n        "]))],function(e,t){e(t,7,0,t.component.node.children)},function(e,t){e(t,2,0,t.component.treeTable.shownColumns().length)})}function Ze(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275and"](16777216,null,null,1,null,We)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Xe)),i["\u0275did"](5,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n    "]))],function(e,t){var n=t.component;e(t,2,0,n.treeTable.isFiltered(n.node)),e(t,5,0,n.node.children&&n.node.expanded)},null)}var Je=n("SALZ"),Ke=n("YaPU"),Qe=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},$e=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},et=function(){function e(e,t,n,i){this.router=e,this.itemService=t,this.productNomenclatureService=n,this.nomenclatureService=i,this.data=[]}return e.prototype.collapseChild=function(e){e.originalEvent.srcElement.nextElementSibling.style=_.a.NOMENCLATURE_STRUCTURE_NO_EXPAND_STYLE,e.originalEvent.path[N.a.ZERO].style=_.a.NOMENCLATURE_STRUCTURE_NO_EXPAND_STYLE,e.originalEvent.path[N.a.TWO].style=_.a.NOMENCLATURE_STRUCTURE_NO_EXPAND_STYLE},e.prototype.expandChild=function(e){var t=this;e.originalEvent.path[N.a.ZERO].style=_.a.NOMENCLATURE_STRUCTURE_TOGGLER_LARGE_STYLE,e.originalEvent.path[N.a.TWO].style=_.a.NOMENCLATURE_STRUCTURE_EXPAND_STYLE,e.node.children=[],Object(Je.a)(this.nomenclatureService.getJavaGenericService().getEntityById(e.node.data.id,_.a.GET_PRODUCT_BY_PARENT_PRODUCT_ID),this.nomenclatureService.getJavaGenericService().getEntityById(e.node.data.id,_.a.GET_FIRST_LEVEL_CHILDREN_BY_PRODUCT_ID).pipe(Object(M.flatMap)(function(e){return t.itemService.getAmountPerItem(e)}))).subscribe(function(n){n[1].forEach(function(i){return Qe(t,void 0,void 0,function(){var t,o;return $e(this,function(r){return t=n[N.a.ZERO].find(function(e){return e.productId===i.IdItem!==void 0}),i.nomenclatureId=t.nomenclatureId.id,i.description=i[_.a.PRODUCT_Description],i.unite=i[_.a.MESURE_UNIT],i.Quantity=parseInt(i.Quantity)*parseInt(e.node.data.quantity),0!==i[_.a.TOTAL_AMOUNT_WITH_CURRENCY]&&(i.unitHtpurchasePrice=Number(i[_.a.AMOUNT_WITH_CURRENCY])*Number(i[_.a.ITEM_QUANTITY]),i.unitHtpurchasePrice=i.unitHtpurchasePrice+" "+i[_.a.CURRENCY_SYMBOLE]),o=this.checkComposantsExist(i.IdItem,i),void 0===e.node.children.find(function(e){return e.data.id===o.data.id})&&e.node.children.push(o),[2]})})})})},e.prototype.nodeParentToUpdateComponent=function(e,t){this.idNomenclatureOnUpdate=void 0!==t?t:e.node.data.nomenclatureId,this.router.navigate([_.a.URI_ADVANCED_EDIT.concat(String(this.idNomenclatureOnUpdate))],{queryParams:M.filter,skipLocationChange:!0})},e.prototype.checkComposantsExist=function(e,t){var n={data:{id:e,nomenclatureId:t.nomenclatureId,name:t.description,quantity:t.Quantity,unite:t.unite,unitHtpurchasePrice:t.unitHtpurchasePrice},children:""};return this.nomenclatureService.getJavaGenericService().getEntityById(e,_.a.GET_PRODUCT_BY_PARENT_PRODUCT_ID).subscribe(function(e){n.children=0!=e.length?"[{}]":""}),n},e.prototype.getNomenclatureCostFromTreeView=function(e,t){return Qe(this,void 0,void 0,function(){var n,i=this;return $e(this,function(o){switch(o.label){case 0:return n=N.a.ZERO,[4,this.nomenclatureService.getJavaGenericService().getEntityById(e,_.a.GET_CHILDREN_BY_PRODUCT_ID).toPromise().then(function(e){e.forEach(function(e){var o=Number(e.quantity)*Number(t.Quantity);i.allChildrenByProductParent.subscribe(function(i){var r=i.find(function(t){return t.IdItem===e.idItem&&t.Quantity===o});n+=Number(r[_.a.TOTAL_AMOUNT_WITH_CURRENCY]),t.unitHtpurchasePrice=n})})})];case 1:return o.sent(),[2,new Promise(function(e){e(t.unitHtpurchasePrice)})]}})})},e.prototype.loadNomenclaturesDetails=function(){var e=this;this.data=[],Object(Je.a)(this.productNomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,I.GET_PRODUCT_BY_NOMENCLATURE),this.nomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,_.a.NOMENCLATURES_URL).pipe(Object(M.flatMap)(function(t){return e.nomenclatureService.getJavaGenericService().getEntityById(t.productId,_.a.GET_FIRST_LEVEL_CHILDREN_BY_PRODUCT_ID)}),Object(M.flatMap)(function(t){return e.itemService.getAmountPerItem(t)}))).subscribe(function(t){t[N.a.ONE].forEach(function(n){return Qe(e,void 0,void 0,function(){var e,i;return $e(this,function(o){return e=t[N.a.ZERO].find(function(e){return e.productId===n.IdItem!==void 0}),n.nomenclatureId=e.nomenclatureId.id,n.description=n[_.a.PRODUCT_Description],n.unite=n[_.a.MESURE_UNIT],0!==n[_.a.TOTAL_AMOUNT_WITH_CURRENCY]&&(n.unitHtpurchasePrice=n[_.a.TOTAL_AMOUNT_WITH_CURRENCY]+" "+n[_.a.CURRENCY_SYMBOLE]),i=this.checkComposantsExist(n.IdItem,n),this.data.push(i),[2]})})})})},e.prototype.ngOnInit=function(){var e=this;this.nomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,_.a.NOMENCLATURES_URL).pipe(Object(M.flatMap)(function(t){return e.nomenclatureService.getJavaGenericService().getEntityById(t.productId,_.a.GET_CHILDREN_BY_PRODUCT_ID)}),Object(M.flatMap)(function(t){return e.itemService.getAmountPerItem(t)})).subscribe(function(t){e.allChildrenByProductParent=new Ke.a(function(e){e.next(t)}),e.loadNomenclaturesDetails()})},e}(),tt=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function nt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"ay-column",[["field","name"]],null,null,null,De,ke)),i["\u0275did"](1,1097728,[[3,4]],2,pe.f,[],{field:[0,"field"],header:[1,"header"]},null),i["\u0275qud"](603979776,4,{templates:1}),i["\u0275qud"](335544320,5,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],function(e,t){e(t,1,0,"name",i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,1,1,i["\u0275nov"](t,4).transform("DESCRIPTION")),""))},null)}function it(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"ay-column",[["field","quantity"]],null,null,null,De,ke)),i["\u0275did"](1,1097728,[[3,4]],2,pe.f,[],{field:[0,"field"],header:[1,"header"],style:[2,"style"]},null),i["\u0275qud"](603979776,6,{templates:1}),i["\u0275qud"](335544320,7,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pod"](5,{textAlign:0})],function(e,t){e(t,1,0,"quantity",i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,1,1,i["\u0275nov"](t,4).transform("QUANTITY")),""),e(t,5,0,"center"))},null)}function ot(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"ay-column",[["field","unite"]],null,null,null,De,ke)),i["\u0275did"](1,1097728,[[3,4]],2,pe.f,[],{field:[0,"field"],header:[1,"header"],style:[2,"style"]},null),i["\u0275qud"](603979776,8,{templates:1}),i["\u0275qud"](335544320,9,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pod"](5,{textAlign:0})],function(e,t){e(t,1,0,"unite",i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,1,1,i["\u0275nov"](t,4).transform("UNIT")),""),e(t,5,0,"center"))},null)}function rt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"ay-column",[["field","unitHtpurchasePrice"]],null,null,null,De,ke)),i["\u0275did"](1,1097728,[[3,4]],2,pe.f,[],{field:[0,"field"],header:[1,"header"],style:[2,"style"]},null),i["\u0275qud"](603979776,10,{templates:1}),i["\u0275qud"](335544320,11,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pod"](5,{textAlign:0})],function(e,t){e(t,1,0,"unitHtpurchasePrice",i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,1,1,i["\u0275nov"](t,4).transform("PURCHASING_PRICE")),""),e(t,5,0,"center"))},null)}function at(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,17,"ay-treeTable",[["selectionMode","single"]],null,[[null,"onNodeExpand"],[null,"onNodeSelect"],[null,"onNodeCollapse"]],function(e,t,n){var i=!0,o=e.component;return"onNodeExpand"===t&&(i=!1!==o.expandChild(n)&&i),"onNodeSelect"===t&&(i=!1!==o.nodeParentToUpdateComponent(n)&&i),"onNodeCollapse"===t&&(i=!1!==o.collapseChild(n)&&i),i},_e,fe)),i["\u0275did"](1,4964352,null,3,pe.b,[i.Renderer2],{value:[0,"value"],selectionMode:[1,"selectionMode"]},{onNodeSelect:"onNodeSelect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse"}),i["\u0275qud"](335544320,1,{header:0}),i["\u0275qud"](335544320,2,{footer:0}),i["\u0275qud"](603979776,3,{columns:1}),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275and"](16777216,null,null,1,null,nt)),i["\u0275did"](7,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275and"](16777216,null,null,1,null,it)),i["\u0275did"](10,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ot)),i["\u0275did"](13,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275and"](16777216,null,null,1,null,rt)),i["\u0275did"](16,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.data,"single"),e(t,7,0,n.data),e(t,10,0,n.data),e(t,13,0,n.data),e(t,16,0,n.data)},null)}var lt,st=n("GbeB"),dt=n("m12j"),ct=n("uGaY"),ut=function(){},ht=function(){return function(e){this.tauxChute=0,this.quantityChute=0,e&&(Object.assign(this,e),this.productId=e.IdItem)}}();!function(e){e.PF="PF",e.PSF="PSF"}(lt||(lt={}));var pt=n("q13R"),ft=n("b7+w"),gt=n("EpHs"),mt=n("DGI0"),vt=n("1pib"),yt=function(e){function t(t,n){var i=e.call(this,t,n,"manufacturing",vt.a.ENTITY_NAME)||this;return i.sectionFab="manufacturing",i.endpointFab="of",i.connectionFab=n.getConfig("root_api"),i}return Object(O.__extends)(t,e),t.prototype.readReport=function(e,t){return this.http.post(this.connectionFab+"/"+this.sectionFab+"/"+this.endpointFab+"/"+e,t,{responseType:"blob"})},t}(P.a),bt=n("P5P4"),wt=n("R0iV");function Ct(e){var t=new x.n;return t.Filter=[],t.Relation=[],t.Filter.push(new x.a("Id",1,e,!1,!1)),t.Relation.push(new x.o("IdTiersNavigation"),new x.o("ItemWarehouse"),new x.o("TaxeItem"),new x.o("IdNatureNavigation"),new x.o("ItemKitIdKitNavigation"),new x.o("ItemKitIdItemNavigation"),new x.o("ItemVehicleBrandModelSubModel"),new x.o("IdProductItemNavigation"),new x.o("ItemTiers"),new x.o("ItemTiers.IdTiersNavigation"),new x.o("OemItem"),new x.o("OemItem.IdBrandNavigation"),new x.o("ItemSalesPrice")),t}var xt=n("ioQz"),St=n("qLRS"),Tt=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},Et=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},_t=function(){function e(e,t,n,i,o,r,a,l,s,d,c,u){var h=this;this.activatedRoute=e,this.router=t,this.swalWarrings=n,this.validationService=i,this.translate=o,this.itemService=r,this.productNomenclatureService=a,this.nomenclatureService=l,this.companyService=s,this.purchaseRequestService=d,this.growlService=c,this.fabricationArrangementService=u,this.isUpdateMode=!1,this.nomenclature=new ut,this.item=new pt.a,this.hideSearch=!0,this.isSave=!1,this.rowProductsList=[],this.getTypesFromEnum=lt,this.typesList=[],this.data=[],this.editMode=!1,this.montantTotal=0,this.countTotalInsert=0,this.currentPage=N.a.ZERO,this.size=N.a.TEN,this.usedInProgressFabricationArrangnement=!1,this.filtersItemDropdown=new bt.a,this.nomenclatureReference="",this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.selectedValue=this.typesList[N.a.ONE],this.gridStateNomenclatures={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:_.a.PRODUCT_ID_FILIED,title:_.a.PRODUCT_ID_TITLE,filterable:!0},{field:_.a.REFERENCE_FILIED,title:_.a.REFERENCE_TITLE,filterable:!0},{field:_.a.TYPE_NOMENCLATURE_FILIED,title:_.a.TYPE_NOMENCLATURE_TITLE,filterable:!1}],this.columnsConfigProducts=[{field:_.a.PRODUCT_NAME_FILIED,title:_.a.PRODUCT_ARTICLE_NAME_TITLE,filterable:!1},{field:_.a.PRODUCT_NAME_QUANTITE_FILIED,title:_.a.PRODUCT_NAME_QUANTITE_TITLE,filterable:!1},{field:_.a.PRODUCT_NAME_UNITE_FILIED,title:_.a.PRODUCT_NAME_UNITE_TITLE,filterable:!1},{field:_.a.UNIT_HT_PURCHASE_PRICE_FILIED,title:_.a.UNIT_HT_PURCHASE_PRICE_TITLE,filterable:!1},{field:_.a.TAUX_CHUTE_FILIED,title:_.a.TAUX_CHUTE_TITLE,filterable:!1},{field:_.a.QUANTITY_CHUTE_FILIED,title:_.a.QUANTITY_CHUTE_TITLE,filterable:!1},{field:_.a.QUANTITY_NET_FILIED,title:_.a.QUANTITY_NET_TITLE,filterable:!1}],this.gridSettingsNomenclatures={state:this.gridStateNomenclatures,columnsConfig:this.columnsConfigProducts},this.isFromProduct=!1,this.showFilter=!0,this.activatedRoute.params.subscribe(function(e){h.idNomenclatureOnUpdate=+e.id||0}),this.activatedRoute.queryParams.subscribe(function(e){h.oldIdNomenclatureOnUpdate=+e.old||0}),this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},this.getTypesList(),this.initFormGroup()}return e.prototype.initFormGroup=function(){this.formGroup=new v.FormGroup({IdItem:new v.FormControl("",v.Validators.required),reference:new v.FormControl("",v.Validators.required),typeNomenclature:new v.FormControl("",v.Validators.required)})},e.prototype.disableFormInputs=function(){var e=this;this.idNomenclatureOnUpdate>0&&this.checkNomenclatureInProgressFarbricationArrangement().then(function(t){t&&(e.usedInProgressFabricationArrangnement=!0,e.formGroup.controls.IdItem.disable(),e.formGroup.controls.reference.disable(),e.formGroup.controls.typeNomenclature.disable())})},e.prototype.checkNomenclatureInProgressFarbricationArrangement=function(){return Tt(this,void 0,void 0,function(){var e;return Et(this,function(t){switch(t.label){case 0:return[4,this.nomenclatureService.getJavaGenericService().getEntityList(_.a.CHECK_NOMENCLATURE_IN_PROGRESS_FARBRICATION_ARRANGEMENT+"?id="+this.idNomenclatureOnUpdate).toPromise().then(function(t){e=t})];case 1:return t.sent(),[2,new Promise(function(t){return t(e)})]}})})},e.prototype.addHandler=function(e){var t=e.sender;this.closeEditor(t),this.createProductLineForm(new ht),t.addRow(this.productLineFormGroup),this.btnEditVisible=!1},e.prototype.handleEditHandler=function(){this.editMode=!0},e.prototype.handledEditHandler=function(){this.editMode=!1},e.prototype.editHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.dataItem;this.closeEditor(t),this.editedRowIndex=n,this.productLineFormGroup=new v.FormGroup({IdItem:new v.FormControl(i.productId,v.Validators.required),quantity:new v.FormControl(i.quantity,v.Validators.required),unite:new v.FormControl(i.unite),tauxChute:new v.FormControl(i.tauxChute,[v.Validators.min(N.a.ZERO),v.Validators.max(N.a.ONE_HUNDRED)]),quantityChute:new v.FormControl(i.quantityChute),quantityNet:new v.FormControl(i.quantityNet),unitHtpurchasePrice:new v.FormControl(i.unitHtpurchasePrice)}),t.editRow(n,this.productLineFormGroup),this.btnEditVisible=!0,this.productOnUpdate=i},e.prototype.handleKeyAction=function(e){var t=this;this.keyAction=function(n){n.code===xt.a.NUMPAD_MULTIPLY&&t.saveHandler({sender:e,rowIndex:t.editedRowIndex,formGroup:t.productLineFormGroup,isNew:!0})},document.addEventListener(St.a.KEY_DOWN,this.keyAction)},e.prototype.cancelHandler=function(e){this.closeEditor(e.sender,e.rowIndex),this.btnEditVisible=!0},e.prototype.saveHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.formGroup,o=e.isNew;return Tt(this,void 0,void 0,function(){var e,r=this;return Et(this,function(a){switch(a.label){case 0:return this.montantTotal=0,e=!1,this.productLineFormGroup.valid?[4,this.checkSubProductExistanceInChildProduct(i).then(function(t){e=t})]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.productLineFormGroup.valid&&this.checkPositiveQuantity(i.value.quantity)&&e?this.purchaseRequestService.getItemDetails(i.value.IdItem).subscribe(function(e){o?r.checkNewRowDuplication(i,e,t,n):r.checkUpdateRowDuplication(i,n,e),t.closeRow(n)}):this.validationService.validateAllFormFields(this.productLineFormGroup),[2]}})})},e.prototype.checkSubProductExistanceInChildProduct=function(e){return Tt(this,void 0,void 0,function(){var t;return Et(this,function(n){switch(n.label){case 0:return void 0===this.nomenclature.productId&&(this.nomenclature.productId=e.value.IdItem),[4,this.nomenclatureService.getJavaGenericService().getEntityList(_.a.CHECK_CHILD_PRODUCT_EXIST_IN_SUB_PRODUCT+"?idProductChild="+e.value.IdItem+"&idProductNomenclature="+this.nomenclature.productId).toPromise().then(function(e){t=e})];case 1:return n.sent(),[2,new Promise(function(e){return e(t)})]}})})},e.prototype.closeEditor=function(e,t){void 0===t&&(t=this.editedRowIndex),e.closeRow(t),this.editedRowIndex=void 0,this.productLineFormGroup=void 0},e.prototype.getTypesList=function(){this.typesList=ct.EnumValues.getNamesAndValues(this.getTypesFromEnum)},e.prototype.createProductLineForm=function(e){this.productLineFormGroup=new v.FormGroup({IdItem:new v.FormControl(e.productId,v.Validators.required),quantity:new v.FormControl(e.quantity,v.Validators.required),unite:new v.FormControl(e.unite),tauxChute:new v.FormControl(e.tauxChute,[v.Validators.min(N.a.ZERO),v.Validators.max(N.a.ONE_HUNDRED)]),quantityChute:new v.FormControl(e.quantityChute,[v.Validators.min(N.a.ZERO)]),quantityNet:new v.FormControl,unitHtpurchasePrice:new v.FormControl(e.unitHtpurchasePrice)})},e.prototype.removeProductHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){if(n.value){t.montantTotal=0;var i=t.rowProductsList.indexOf(e.dataItem);t.isUpdateMode&&(t.subscription$=Object(Je.a)(t.productNomenclatureService.getJavaGenericService().deleteEntity(e.dataItem.id,I.PRODUCTNOMENCLATURE_URL),t.productNomenclatureService.getJavaGenericService().getEntityById(t.idNomenclatureOnUpdate,I.TOTAL_ITEMS)).subscribe(function(e){t.growlService.successNotification(t.translate.instant(_.a.SUCCESS_OPERATION)),t.gridSettingsNomenclatures.gridData.total=e[N.a.ONE]},function(){t.growlService.ErrorNotification(t.translate.instant(_.a.FAILURE_OPERATION))})),-1!==i&&(t.rowProductsList.splice(i,1),t.montantTotal=0,t.rowProductsList.forEach(function(e){t.montantTotal+=e.HtTotalAmount}))}})},e.prototype.saveNomenclatureClick=function(){this.findInRowProductList(this.formGroup)?this.prepareSaveNomenclatureClick():this.growlService.ErrorNotification(_.a.DUPLICATED_PARENT_PRODUCT)},e.prototype.checkProductLineNotEmpty=function(){return this.rowProductsList.length>0||(this.growlService.ErrorNotification(_.a.TABS_COMPOSANTS_EMPTY),!1)},e.prototype.prepareSaveNomenclatureClick=function(){var e=this;this.formGroup.valid&&this.checkProductLineNotEmpty()?this.subscription$=this.nomenclatureService.getJavaGenericService().saveEntity({productId:this.formGroup.value.IdItem,reference:String(this.formGroup.value.reference).trim(),typeNomenclature:this.formGroup.value.typeNomenclature},"").subscribe(function(t){e.rowProductsList.forEach(function(n){n.nomenclature={id:t.id},e.productNomenclatureService.getJavaGenericService().saveEntity(n,I.PRODUCTNOMENCLATURE_URL).subscribe()}),e.growlService.successNotification(e.translate.instant(_.a.SUCCESS_OPERATION)),e.router.navigateByUrl(_.a.URI_NOMENCLATURES)}):this.validationService.validateAllFormFields(this.formGroup)},e.prototype.prepareEditSaveComposants=function(e){var t,n=this;this.checkProductLineNotEmpty()?((t=this.rowProductsList.find(-1===e?function(e){return n.rowProductsList.indexOf(e)===n.rowProductsList.length-1}:function(t){return n.rowProductsList.indexOf(t)===e})).nomenclature={id:this.idNomenclatureOnUpdate},this.subscription$=Object(Je.a)(this.productNomenclatureService.getJavaGenericService().saveEntity(t,I.PRODUCTNOMENCLATURE_URL),this.productNomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,I.TOTAL_ITEMS)).subscribe(function(e){t.id=e[N.a.ZERO].id,n.gridSettingsNomenclatures.gridData.total=e[N.a.ONE]},function(e){n.growlService.ErrorNotification(n.translate.instant(_.a.FAILURE_OPERATION))}),this.growlService.successNotification(this.translate.instant(_.a.SUCCESS_OPERATION))):this.validationService.validateAllFormFields(this.productLineFormGroup)},e.prototype.prepareEditNomenclature=function(){var e=this;this.formGroup.valid&&this.checkProductLineNotEmpty()?this.subscription$=this.formGroup.value.IdItem===this.product.Description?this.nomenclatureService.getJavaGenericService().updateEntity({productId:this.nomenclature.productId,reference:String(this.formGroup.value.reference).trim(),typeNomenclature:this.formGroup.value.typeNomenclature},this.idNomenclatureOnUpdate,_.a.NOMENCLATURES_URL).subscribe(function(){e.growlService.successNotification(e.translate.instant(_.a.SUCCESS_OPERATION)),e.router.navigateByUrl(_.a.URI_NOMENCLATURES)}):this.nomenclatureService.getJavaGenericService().updateEntity({productId:this.formGroup.value.IdItem,reference:String(this.formGroup.value.reference).trim(),typeNomenclature:this.formGroup.value.typeNomenclature},this.idNomenclatureOnUpdate,_.a.NOMENCLATURES_URL).subscribe(function(){e.growlService.successNotification(e.translate.instant(_.a.SUCCESS_OPERATION)),e.router.navigateByUrl(_.a.URI_NOMENCLATURES)}):this.validationService.validateAllFormFields(this.formGroup)},e.prototype.editNomenclatureClick=function(){this.findInRowProductList(this.formGroup)?this.prepareEditNomenclature():this.growlService.ErrorNotification(_.a.DUPLICATED_PARENT_PRODUCT)},e.prototype.itemSelectProductLineForm=function(e){if(e.itemFiltredDataSource&&e.formGroup&&e.formGroup.value[_.a.ID_ITEM]){var t=e.itemFiltredDataSource.filter(function(t){return t.Id===e.formGroup.value[_.a.ID_ITEM]});t&&t.length>0&&(this.item=t[0])}},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe()},e.prototype.initGridData=function(e){var t=this;e&&(this.currentPage=e),this.montantTotal=0,this.isUpdateMode=!0,Object(Je.a)(this.nomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,_.a.NOMENCLATURES_URL),this.productNomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,I.GET_PRODUCT_BY_NOMENCLATURE),this.nomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,_.a.NOMENCLATURES_URL).pipe(Object(M.flatMap)(function(e){return t.nomenclatureService.getJavaGenericService().getEntityById(e.productId,_.a.GET_CHILDREN_BY_PRODUCT_ID)}),Object(M.flatMap)(function(e){return t.itemService.getAmountPerItem(e)})),this.productNomenclatureService.getJavaGenericService().getEntityList(I.PAGEABLE+"?idNomenclature="+this.idNomenclatureOnUpdate+"&page="+this.currentPage+"&size="+this.size).pipe(Object(M.flatMap)(function(e){return t.itemService.getAmountPerItem(e)})),this.productNomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,I.TOTAL_ITEMS)).subscribe(function(e){t.nomenclature=e[N.a.ZERO],t.itemService.getProductById(t.nomenclature.productId).subscribe(function(n){t.product=n,t.formGroup.patchValue({IdItem:n.Id,reference:t.nomenclature.reference,typeNomenclature:t.nomenclature.typeNomenclature}),t.itemDropDown.ngOnInit(),t.allChildrenByProductParent=new Ke.a(function(t){t.next(e[N.a.TWO])});var i=[];e[N.a.THREE].forEach(function(e){i.push(e.IdItem)}),t.itemService.getItemDetails(i).subscribe(function(n){e[N.a.THREE].forEach(function(i){i.unitHtpurchasePrice=null==n.filter(function(e){return e.Id===i.IdItem})[0].CostPrice?N.a.ZERO:n.filter(function(e){return e.Id===i.IdItem})[0].CostPrice,i.CurrencySymbole=t.currentCurrency,i.HtTotalAmount=n.filter(function(e){return e.Id===i.IdItem})[0].CostPrice*i.Quantity,t.montantTotal+=Number(i.HtTotalAmount);var o=e[1].find(function(e){return e.productId===i.IdItem&&e.quantity===i.Quantity!==void 0});i.id=o.id,i.productId=i.IdItem,i.description=i[_.a.PRODUCT_Description],i.quantity=i[_.a.ITEM_QUANTITY],i.unite=i[_.a.MESURE_UNIT],i.tauxChute=o[_.a.TAUX_CHUTE],i.quantityChute=o[_.a.QUANTITY_CHUTE],i.quantityNet=Number(i.quantity-i.quantityChute),i.unitHtpurchasePrice=i[_.a.UNIT_HT_PURCHASE_PRICE_FILIED]+"\n                   "+i[_.a.CURRENCY_SYMBOLE]})}),t.rowProductsList=e[N.a.THREE],t.gridSettingsNomenclatures.gridData={data:t.rowProductsList,total:e[N.a.FOUR]}})})},e.prototype.nodeParentToUpdateComponent=function(e,t){this.oldIdNomenclatureOnUpdate=this.idNomenclatureOnUpdate,this.idNomenclatureOnUpdate=void 0!==t?t:e.node.data.nomenclatureId,this.router.navigate([_.a.URI_ADVANCED_EDIT.concat(String(this.idNomenclatureOnUpdate))],{queryParams:{old:this.oldIdNomenclatureOnUpdate},skipLocationChange:!0})},e.prototype.findInRowProductList=function(e){return void 0===this.rowProductsList.find(function(t){return t.productId===e.value.IdItem})},e.prototype.checkItemNotEqualsSubItem=function(e){return this.isUpdateMode&&this.formGroup.value.IdItem===this.product.Description?e.value.IdItem!==this.nomenclature.productId:e.value.IdItem!==this.formGroup.value.IdItem},e.prototype.checkUnitPrecsion=function(e){return Tt(this,void 0,void 0,function(){var t,n,i,o,r=this;return Et(this,function(a){switch(a.label){case 0:return n=new gt.a(e.value.IdItem,e.value.quantity),(i=[]).push(n),[4,new Promise(function(n){return r.itemService.getAmountPerItem(i).subscribe(function(i){i[N.a.ZERO][_.a.MESURE_UNIT_PRESCION]=N.a.TWO,t=Number(e.value.quantity),n(t)})})];case 1:return o=a.sent(),[2,new Promise(function(e){e(o)})]}})})},e.prototype.checkPositiveQuantity=function(e){return parseInt(e)>=0||(this.growlService.ErrorNotification(_.a.CHECK_QUANTITY_POSITIVE),!1)},e.prototype.checkNotEquivalentArticle=function(e){return parseInt(e)>0||(this.growlService.ErrorNotification(_.a.CHECK_QUANTITY_POSITIVE),!1)},e.prototype.onUpdateTauxChuteOrQuantityChute=function(e){var t;"quantity"===e.target.name&&this.productLineFormGroup.patchValue({quantityNet:this.productLineFormGroup.value.quantity,tauxChute:N.a.ZERO,quantityChute:N.a.ZERO}),t=null===this.productLineFormGroup.value.quantityNet?this.productLineFormGroup.value.quantity:this.productLineFormGroup.value.quantityNet,"quantityChute"===e.target.name?this.productLineFormGroup.patchValue({tauxChute:Number(e.target.value*N.a.ONE_HUNDRED/t).toFixed(N.a.FOUR)}):"tauxChute"===e.target.name&&this.productLineFormGroup.patchValue({quantityChute:Number(t*e.target.value/N.a.ONE_HUNDRED)})},e.prototype.pushNewRow=function(e,t,n,i){return Tt(this,void 0,void 0,function(){var n,o,r=this;return Et(this,function(a){switch(a.label){case 0:return n=0,o="",[4,this.checkUnitPrecsion(e).then(function(t){e.value.quantity=t})];case 1:return a.sent(),this.itemService.getModelByCondition(Ct(e.value.IdItem)).subscribe(function(a){n=null==a.CostPrice?N.a.ZERO:a.CostPrice,o=r.currentCurrency,r.productLineFormGroup.value.quantityNet=N.a.ZERO,r.rowProductsList.push({productId:e.value.IdItem,nomenclature:r.idNomenclatureOnUpdate,quantity:Number(e.value.quantity)+Number(e.value.quantityChute),description:t[_.a.PRODUTCT_Designation],unite:t[_.a.PRODUCT_IdMeasureUnitNavigation][_.a.PRODUCT_Description],tauxChute:e.value.tauxChute,quantityChute:e.value.quantityChute,quantityNet:e.value.quantity,unitHtpurchasePrice:n+" "+o,HtTotalAmount:a.CostPrice=Number(a.CostPrice*e.value.Quantity)}),r.montantTotal=0,r.rowProductsList.forEach(function(e){e.HtTotalAmount&&(r.montantTotal+=Number(e.HtTotalAmount))}),r.countTotalInsert++,r.gridSettingsNomenclatures.gridData={data:r.rowProductsList,total:r.countTotalInsert},r.isUpdateMode&&r.prepareEditSaveComposants(i)}),[2]}})})},e.prototype.checkNewRowDuplication=function(e,t,n,i){this.findInRowProductList(e)&&this.checkItemNotEqualsSubItem(e)?this.pushNewRow(e,t,n,i):this.growlService.ErrorNotification(this.translate.instant(_.a.DUPLICATED_PRODUCT))},e.prototype.checkIfProductIsTheSameInUpdateRow=function(e){return e.value.IdItem===this.productOnUpdate.productId},e.prototype.checkIfArticleIsTheSomeInChildArticle=function(e){return e.value==this.formGroup.value},e.prototype.setRowByIndexRow=function(e,t,n){return Tt(this,void 0,void 0,function(){var i,o=this;return Et(this,function(r){switch(r.label){case 0:return e>=this.size&&(e-=this.size),i=0,[4,this.checkUnitPrecsion(t).then(function(e){t.value.quantity=e})];case 1:return r.sent(),this.itemService.getModelByCondition(Ct(t.value.IdItem)).subscribe(function(r){var a=0;(i=null==r.CostPrice?N.a.ZERO:r.CostPrice)&&(a=i*t.value.quantity),o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).unitHtpurchasePrice=i+" "+o.currentCurrency,o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).productId=t.value.IdItem,o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).quantity=Number(t.value.quantityNet)+Number(t.value.quantityChute),o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).description=n[_.a.PRODUTCT_Designation],o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).unite=t.value.unite,o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).tauxChute=t.value.tauxChute,o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).quantityChute=t.value.quantityChute,o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).quantityNet=t.value.quantityNet,o.rowProductsList.find(function(t){return o.rowProductsList.indexOf(t)===e}).HtTotalAmount=Number(a),o.montantTotal=0,o.rowProductsList.forEach(function(e){o.montantTotal+=Number(e.HtTotalAmount)}),o.isUpdateMode&&o.prepareEditSaveComposants(e)}),[2]}})})},e.prototype.checkUpdateRowDuplication=function(e,t,n){this.checkIfProductIsTheSameInUpdateRow(e)||this.findInRowProductList(e)&&this.checkItemNotEqualsSubItem(e)?this.setRowByIndexRow(t,e,n):this.growlService.ErrorNotification(this.translate.instant(_.a.DUPLICATED_PRODUCT))},e.prototype.getNomenclaturePrice=function(e,t,n,i,o,r){var a=this,l=N.a.ZERO;this.nomenclatureService.getJavaGenericService().getEntityById(t,_.a.GET_CHILDREN_BY_PRODUCT_ID).subscribe(function(t){t.forEach(function(t){return Tt(a,void 0,void 0,function(){var a=this;return Et(this,function(s){switch(s.label){case 0:return[4,this.getServiceByProduct(e,t)];case 1:return(e=s.sent()).subscribe(function(e){return l=a.getCostPriceByProductWithNomenclature(n,void 0,t,e,l),l=a.getCostProductInCaseNewLineProduct(i,l,e,t),l=a.getCostProductInCaseUpdateLineProduct(o,r,l,e,t),!0}),[2]}})})})})},e.prototype.getCostProductInCaseUpdateLineProduct=function(e,t,n,i,o){var r=this;return null!=e&&null!=t&&(n+=Number(i[_.a.UNIT_HT_PURCHASE_PRICE_FILIED_API_DOTNET])*Number(o.quantity)*Number(t),this.unitHtPriceWithCurrency=n+" "+this.currentCurrency,this.rowProductsList.find(function(t){return r.rowProductsList.indexOf(t)===e}).unitHtpurchasePrice=this.unitHtPriceWithCurrency),n},e.prototype.getCostProductInCaseNewLineProduct=function(e,t,n,i){var o=this;return null!=e&&(t+=Number(n[_.a.UNIT_HT_PURCHASE_PRICE_FILIED_API_DOTNET])*Number(i.quantity)*Number(e.value.quantity),this.unitHtPriceWithCurrency=t+" "+this.currentCurrency,this.rowProductsList.find(function(e){return o.rowProductsList.indexOf(e)===o.rowProductsList.length-1}).unitHtpurchasePrice=this.unitHtPriceWithCurrency),t},e.prototype.getCostPriceByProductWithNomenclature=function(e,t,n,i,o){if(null!=e){t=Number(n.quantity)*Number(e.Quantity);var r=i.find(function(e){return e.IdItem===n.idItem&&e.Quantity===t!==void 0});o+=Number(r[_.a.AMOUNT_WITH_CURRENCY])*Number(n.quantity)*Number(e.quantity),e.unitHtpurchasePrice=""+o+e[_.a.CURRENCY_SYMBOLE]}return o},e.prototype.getServiceByProduct=function(e,t){return Tt(this,void 0,void 0,function(){var n,i=this;return Et(this,function(o){switch(o.label){case 0:return e!==_.a.ITEM_SERVICE?[3,2]:[4,new Promise(function(e){return e(i.itemService.getById(t.idItem))})];case 1:return n=o.sent(),[3,3];case 2:n=e,o.label=3;case 3:return[2,e=n]}})})},e.prototype.costNomenclature=function(){var e=this;this.isUpdateMode&&(this.montantTotal=0,this.nomenclatureService.getJavaGenericService().getEntityById(this.idNomenclatureOnUpdate,_.a.NOMENCLATURES_URL).pipe(Object(M.flatMap)(function(t){return e.nomenclatureService.getJavaGenericService().getEntityById(t.productId,_.a.GET_CHILDREN_BY_PRODUCT_ID)}),Object(M.flatMap)(function(t){return e.itemService.getAmountPerItem(t)})).subscribe(function(t){t.forEach(function(t){e.montantTotal+=t.TotalAmountWithCurrency,e.currency=t[_.a.CURRENCY_SYMBOLE]}),e.montantTotal+=e.currency}))},e.prototype.navigationFromProductToNomenclatureView=function(){var e=this;this.nomenclatureService.getJavaGenericService().getEntityById(this.itemClicked,_.a.CHECK_PRODUCT_NOMENCLATURE_EXIST).subscribe(function(t){e.nodeParentToUpdateComponent("",t)})},e.prototype.getCurrentDataItem=function(e){this.itemClicked=e.dataItem.IdItem},e.prototype.lineClickHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.dataItem;this.isSave?this.isSave=!1:this.editHandler({sender:t,rowIndex:n,dataItem:i})},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.initGridData(this.currentPage)},e.prototype.dataStateChange=function(e){this.gridSettingsNomenclatures.state=e},e.prototype.loadNomenclaturesDetails=function(){this.loadComponentNomenclatureTreeView=!0},e.prototype.getCurrentCompanyCurrency=function(){var e=this;this.companyService.getCurrentCompany().subscribe(function(t){e.currentCurrency=t.IdCurrencyNavigation.Code})},e.prototype.backtoOldNomenclatureClick=function(){this.nodeParentToUpdateComponent("",this.oldIdNomenclatureOnUpdate)},e.prototype.ngOnInit=function(){this.idNomenclatureOnUpdate>0?this.initGridData():this.getLastReference(),this.getCurrentCompanyCurrency()},e.prototype.enableForm=function(){this.formGroup.controls.IdItem.enable(),this.formGroup.controls.reference.enable(),this.formGroup.controls.typeNomenclature.enable(),this.usedInProgressFabricationArrangnement=!1},e.prototype.getLastReference=function(){var e=this;this.nomenclatureService.callService(wt.a.GET,"get-last-reference").subscribe(function(t){e.nomenclatureReference=t.NOMENCLATURE_REFERENCE,e.formGroup=new v.FormGroup({IdItem:new v.FormControl(e.nomenclature.productId,v.Validators.required),reference:new v.FormControl(e.nomenclatureReference,v.Validators.required),typeNomenclature:new v.FormControl(e.nomenclature.typeNomenclature,v.Validators.required),productLines:new v.FormControl(e.rowProductsList)})})},e.prototype.goToFabbricationArrangement=function(){var e=this;this.fabricationArrangementService.getJavaGenericService().getEntityList(vt.a.FABRICATION_ARRANGEMENT_BY_PRODUCT_ID_AND_STATUS+"?id="+this.nomenclature.productId).subscribe(function(t){e.router.navigateByUrl(vt.a.URI_ADVANCED_EDIT.concat(t.id))})},e.prototype.itemNomenclatureSelect=function(e){e&&e.itemComponent&&e.itemComponent.dataItem&&(this.itemClicked=e.itemComponent.dataItem.Id,this.nomenclature.id=e.itemComponent.dataItem.Id)},e.prototype.checkPositive=function(e,t){var n=+e.key;(t.value+(isNaN(n)?"":n.toString())).match("[0-9]+")||e.preventDefault()},e.prototype.valueChange=function(e){this.isPF=e===lt.PF,this.isPSF=e===lt.PSF},e}(),kt=i["\u0275crt"]({encapsulation:0,styles:[[".montant[_ngcontent-%COMP%]{font-family:Roboto,serif;color:#505253;text-align:right;padding-right:4%;font-size:25px}"]],data:{}});function Dt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,11,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](2,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](8,0,null,null,2,"app-dropdown-product-items",[],null,[[null,"Selected"]],function(e,t,n){var i=!0;return"Selected"===t&&(i=!1!==e.component.itemNomenclatureSelect(n)&&i),i},$.b,$.a)),i["\u0275did"](9,770048,[[1,4],["item",4]],0,ee.a,[l.a,k.a,te.a,ne.a,ie.a,oe.a,re.a,i.ElementRef,ae.a],{itemForm:[0,"itemForm"],parentViewContainerRef:[1,"parentViewContainerRef"],activeKeyPress:[2,"activeKeyPress"],hideSearch:[3,"hideSearch"],ignoreCharges:[4,"ignoreCharges"],removeFilter:[5,"removeFilter"],showFilter:[6,"showFilter"],disabled:[7,"disabled"]},{Selected:"Selected"}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){var n=t.component;e(t,9,0,n.formGroup,n.viewRef,!0,n.hideSearch,!1,!0,!0,!n.isPF&&!n.isPSF)},function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("ARTICLE")))})}function At(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,15,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](2,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](8,0,null,null,2,"app-dropdown-product-items",[],null,[[null,"Selected"]],function(e,t,n){var i=!0;return"Selected"===t&&(i=!1!==e.component.itemNomenclatureSelect(n)&&i),i},$.b,$.a)),i["\u0275did"](9,770048,[[1,4],["item",4]],0,ee.a,[l.a,k.a,te.a,ne.a,ie.a,oe.a,re.a,i.ElementRef,ae.a],{itemForm:[0,"itemForm"],parentViewContainerRef:[1,"parentViewContainerRef"],source:[2,"source"],activeKeyPress:[3,"activeKeyPress"],hideSearch:[4,"hideSearch"],ignoreCharges:[5,"ignoreCharges"],removeFilter:[6,"removeFilter"],showFilter:[7,"showFilter"],isSubFinal:[8,"isSubFinal"],isOnlyProductNature:[9,"isOnlyProductNature"]},{Selected:"Selected"}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](11,null,["\n            ","\n            "])),(e()(),i["\u0275eld"](12,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](13,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){var n=t.component;e(t,9,0,n.formGroup,n.viewRef,"NOMENCLATURE",!0,n.hideSearch,!1,!0,!0,!0,!0),e(t,13,0,n.formGroup.controls.IdItem)},function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("ARTICLE"))),e(t,11,0,i["\u0275nov"](t,9).id)})}function Ot(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,15,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](2,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](8,0,null,null,2,"app-dropdown-product-items",[],null,[[null,"Selected"]],function(e,t,n){var i=!0;return"Selected"===t&&(i=!1!==e.component.itemNomenclatureSelect(n)&&i),i},$.b,$.a)),i["\u0275did"](9,770048,[[1,4],["item",4]],0,ee.a,[l.a,k.a,te.a,ne.a,ie.a,oe.a,re.a,i.ElementRef,ae.a],{itemForm:[0,"itemForm"],parentViewContainerRef:[1,"parentViewContainerRef"],source:[2,"source"],activeKeyPress:[3,"activeKeyPress"],hideSearch:[4,"hideSearch"],ignoreCharges:[5,"ignoreCharges"],removeFilter:[6,"removeFilter"],showFilter:[7,"showFilter"],isOnlyProductNature:[8,"isOnlyProductNature"]},{Selected:"Selected"}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](11,null,["\n            ","\n            "])),(e()(),i["\u0275eld"](12,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](13,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){var n=t.component;e(t,9,0,n.formGroup,n.viewRef,"NOMENCLATURE",!0,n.hideSearch,!0,!0,!0,!0),e(t,13,0,n.formGroup.controls.IdItem)},function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("ARTICLE"))),e(t,11,0,i["\u0275nov"](t,9).id)})}function It(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](2,0,null,null,4,"a",[["aria-controls","home2"],["aria-selected","false"],["class","nav-link"],["data-toggle","tab"],["href","#home2"],["role","tab"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.loadNomenclaturesDetails()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](4,0,null,null,0,"i",[["class","fa fa-sitemap"]],null,null,null,null,null)),(e()(),i["\u0275ted"](5,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "]))],null,function(e,t){e(t,5,0,i["\u0275unv"](t,5,0,i["\u0275nov"](t,6).transform("STRUCTURE_NOMENCLATURE")))})}function Pt(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,11,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"],["id","addButton1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](3,0,null,null,8,"a",[["class","btn-Add k-button btn btn-add"],["id","addButton2"],["kendoGridAddCommand",""],["style"," border: 2px double #4c9aae!important;"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[2,"k-grid-add-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,4).click(n)&&o),o},null,null)),i["\u0275did"](4,9125888,null,0,m.a,[m._3,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](6,0,null,null,0,"i",[["class","fa fa-plus fa AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](8,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](9,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,4,0)},function(e,t){e(t,3,0,i["\u0275nov"](t,4).classButton,i["\u0275nov"](t,4).classDisabled,i["\u0275nov"](t,4).classPrimary,i["\u0275nov"](t,4).isFlat,i["\u0275nov"](t,4).isBare,i["\u0275nov"](t,4).isOutline,i["\u0275nov"](t,4).classActive,i["\u0275nov"](t,4).dir,i["\u0275nov"](t,4).commandClass),e(t,9,0,i["\u0275unv"](t,9,0,i["\u0275nov"](t,10).transform("ADD_LINE")))})}function Rt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](3,0,null,null,1,"app-dropdown-product-items",[],null,null,null,$.b,$.a)),i["\u0275did"](4,770048,[[1,4],["item",4]],0,ee.a,[l.a,k.a,te.a,ne.a,ie.a,oe.a,re.a,i.ElementRef,ae.a],{itemForm:[0,"itemForm"],parentViewContainerRef:[1,"parentViewContainerRef"],activeKeyPress:[2,"activeKeyPress"],hideSearch:[3,"hideSearch"],idItemToIgnore:[4,"idItemToIgnore"],ignoreCharges:[5,"ignoreCharges"],removeFilter:[6,"removeFilter"],showFilter:[7,"showFilter"],filtersItemDropdown:[8,"filtersItemDropdown"],isOnlyProductNature:[9,"isOnlyProductNature"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](6,0,[["anchorProductId",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](8,0,null,null,2,"app-control-message-grid-cell",[["controlName","IdItem"]],null,null,null,ce.b,ce.a)),i["\u0275did"](9,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,4,0,n.productLineFormGroup,n.viewRef,!0,n.hideSearch,n.itemClicked,!0,!0,!0,n.filtersItemDropdown,!0),e(t,9,0,n.productLineFormGroup,"IdItem",i["\u0275nov"](t,6))},null)}function Mt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,[["inputProductQty",1]],null,6,"input",[["class","form-control"],["formControlName","quantity"],["min","0"],["name","quantity"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,1)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,1).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,2).onTouched()&&o),"keydown"===t&&(o=!1!==r.checkPositive(n,i["\u0275nov"](e,0))&&o),"input"===t&&(o=!1!==r.onUpdateTauxChuteOrQuantityChute(n)&&o),o},null,null)),i["\u0275did"](1,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](2,16384,null,0,v["\u0275bc"],[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v["\u0275bc"]]),i["\u0275did"](4,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](6,16384,null,0,v.NgControlStatus,[v.NgControl],null,null)],function(e,t){e(t,4,0,"quantity")},function(e,t){e(t,0,0,i["\u0275nov"](t,6).ngClassUntouched,i["\u0275nov"](t,6).ngClassTouched,i["\u0275nov"](t,6).ngClassPristine,i["\u0275nov"](t,6).ngClassDirty,i["\u0275nov"](t,6).ngClassValid,i["\u0275nov"](t,6).ngClassInvalid,i["\u0275nov"](t,6).ngClassPending)})}function Nt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Mt)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorQuantity",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","quantity"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"quantity"==t.parent.parent.context.$implicit.field),e(t,8,0,n.productLineFormGroup,"quantity",i["\u0275nov"](t,5))},null)}function Lt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"input",[["class","form-control"],["disabled",""],["formControlName","unite"],["name","unite"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,1)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,1).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](1,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](3,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](5,16384,null,0,v.NgControlStatus,[v.NgControl],null,null)],function(e,t){e(t,3,0,"unite","")},function(e,t){e(t,0,0,i["\u0275nov"](t,5).ngClassUntouched,i["\u0275nov"](t,5).ngClassTouched,i["\u0275nov"](t,5).ngClassPristine,i["\u0275nov"](t,5).ngClassDirty,i["\u0275nov"](t,5).ngClassValid,i["\u0275nov"](t,5).ngClassInvalid,i["\u0275nov"](t,5).ngClassPending)})}function Ht(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Lt)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorUnite",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","unite"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"unite"==t.parent.parent.context.$implicit.field),e(t,8,0,n.productLineFormGroup,"unite",i["\u0275nov"](t,5))},null)}function Bt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,[["inputTauxChute",1]],null,6,"input",[["class","form-control"],["formControlName","tauxChute"],["min","0"],["name","tauxChute"],["style","text-align: right;"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,1)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,1).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,2).onTouched()&&o),"keydown"===t&&(o=!1!==r.checkPositive(n,i["\u0275nov"](e,0))&&o),"input"===t&&(o=!1!==r.onUpdateTauxChuteOrQuantityChute(n)&&o),o},null,null)),i["\u0275did"](1,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](2,16384,null,0,v["\u0275bc"],[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v["\u0275bc"]]),i["\u0275did"](4,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](6,16384,null,0,v.NgControlStatus,[v.NgControl],null,null)],function(e,t){e(t,4,0,"tauxChute")},function(e,t){e(t,0,0,i["\u0275nov"](t,6).ngClassUntouched,i["\u0275nov"](t,6).ngClassTouched,i["\u0275nov"](t,6).ngClassPristine,i["\u0275nov"](t,6).ngClassDirty,i["\u0275nov"](t,6).ngClassValid,i["\u0275nov"](t,6).ngClassInvalid,i["\u0275nov"](t,6).ngClassPending)})}function jt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Bt)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorTauxChute",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","tauxChute"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"tauxChute"==t.parent.parent.context.$implicit.field),e(t,8,0,n.productLineFormGroup,"tauxChute",i["\u0275nov"](t,5))},null)}function zt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,6,"input",[["class","form-control"],["formControlName","quantityChute"],["min","0"],["name","quantityChute"],["style","text-align: right;"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,1)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,1).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,2).onTouched()&&o),"input"===t&&(o=!1!==r.onUpdateTauxChuteOrQuantityChute(n)&&o),o},null,null)),i["\u0275did"](1,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](2,16384,null,0,v["\u0275bc"],[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v["\u0275bc"]]),i["\u0275did"](4,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](6,16384,null,0,v.NgControlStatus,[v.NgControl],null,null)],function(e,t){e(t,4,0,"quantityChute")},function(e,t){e(t,0,0,t.component.productLineFormGroup.value.quantity,i["\u0275nov"](t,6).ngClassUntouched,i["\u0275nov"](t,6).ngClassTouched,i["\u0275nov"](t,6).ngClassPristine,i["\u0275nov"](t,6).ngClassDirty,i["\u0275nov"](t,6).ngClassValid,i["\u0275nov"](t,6).ngClassInvalid,i["\u0275nov"](t,6).ngClassPending)})}function Ut(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,zt)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorQuantityChute",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","quantityChute"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"quantityChute"==t.parent.parent.context.$implicit.field),e(t,8,0,n.productLineFormGroup,"quantityChute",i["\u0275nov"](t,5))},null)}function Ft(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,6,"input",[["class","form-control"],["formControlName","quantityNet"],["name","quantityNet"],["type","number"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,1)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,1).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,2).onTouched()&&o),o},null,null)),i["\u0275did"](1,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](2,16384,null,0,v["\u0275bc"],[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v["\u0275bc"]]),i["\u0275did"](4,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](6,16384,null,0,v.NgControlStatus,[v.NgControl],null,null)],function(e,t){e(t,4,0,"quantityNet")},function(e,t){e(t,0,0,!0,i["\u0275nov"](t,6).ngClassUntouched,i["\u0275nov"](t,6).ngClassTouched,i["\u0275nov"](t,6).ngClassPristine,i["\u0275nov"](t,6).ngClassDirty,i["\u0275nov"](t,6).ngClassValid,i["\u0275nov"](t,6).ngClassInvalid,i["\u0275nov"](t,6).ngClassPending)})}function Gt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ft)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorQuantityNet",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","quantityNet"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"quantityNet"==t.parent.parent.context.$implicit.field),e(t,8,0,n.productLineFormGroup,"quantityNet",i["\u0275nov"](t,5))},null)}function qt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"input",[["class","form-control"],["disabled",""],["formControlName","unitHtpurchasePrice"],["name","unitHtpurchasePrice"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,1)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,1).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,1)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](1,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](3,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](5,16384,null,0,v.NgControlStatus,[v.NgControl],null,null)],function(e,t){e(t,3,0,"unitHtpurchasePrice","")},function(e,t){e(t,0,0,i["\u0275nov"](t,5).ngClassUntouched,i["\u0275nov"](t,5).ngClassTouched,i["\u0275nov"](t,5).ngClassPristine,i["\u0275nov"](t,5).ngClassDirty,i["\u0275nov"](t,5).ngClassValid,i["\u0275nov"](t,5).ngClassInvalid,i["\u0275nov"](t,5).ngClassPending)})}function Vt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,qt)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorUnitHtpurchasePrice",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","unitHtpurchasePrice"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"unitHtpurchasePrice"==t.parent.parent.context.$implicit.field),e(t,8,0,n.productLineFormGroup,"unitHtpurchasePrice",i["\u0275nov"](t,5))},null)}function Wt(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n\n                  "])),(e()(),i["\u0275eld"](1,0,null,null,26,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,3).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,3).onReset()&&o),o},null,null)),i["\u0275did"](2,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](3,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](5,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Rt)),i["\u0275did"](8,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Nt)),i["\u0275did"](11,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ht)),i["\u0275did"](14,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,jt)),i["\u0275did"](17,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ut)),i["\u0275did"](20,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Gt)),i["\u0275did"](23,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Vt)),i["\u0275did"](26,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,3,0,n.productLineFormGroup),e(t,8,0,"description"===t.parent.context.$implicit.field),e(t,11,0,"quantity"===t.parent.context.$implicit.field),e(t,14,0,"unite"===t.parent.context.$implicit.field&&n.isUpdateMode),e(t,17,0,"tauxChute"===t.parent.context.$implicit.field),e(t,20,0,"quantityChute"===t.parent.context.$implicit.field),e(t,23,0,"quantityNet"===t.parent.context.$implicit.field),e(t,26,0,"unitHtpurchasePrice"===t.parent.context.$implicit.field&&n.isUpdateMode)},function(e,t){e(t,1,0,i["\u0275nov"](t,5).ngClassUntouched,i["\u0275nov"](t,5).ngClassTouched,i["\u0275nov"](t,5).ngClassPristine,i["\u0275nov"](t,5).ngClassDirty,i["\u0275nov"](t,5).ngClassValid,i["\u0275nov"](t,5).ngClassInvalid,i["\u0275nov"](t,5).ngClassPending)})}function Yt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](1,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],format:[3,"format"],filter:[4,"filter"],filterable:[5,"filterable"]},null),i["\u0275qud"](603979776,14,{headerTemplates:1}),i["\u0275qud"](335544320,15,{footerTemplate:0}),i["\u0275qud"](603979776,16,{columnMenuTemplates:1}),i["\u0275qud"](335544320,17,{template:0}),i["\u0275qud"](335544320,18,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,19,{groupFooterTemplate:0}),i["\u0275qud"](335544320,20,{editTemplate:0}),i["\u0275qud"](335544320,21,{filterCellTemplate:0}),i["\u0275qud"](335544320,22,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[8,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,Wt)),i["\u0275did"](15,16384,[[20,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n              "]))],function(e,t){e(t,1,0,i["\u0275unv"](t,1,0,i["\u0275nov"](t,11).transform(t.context.$implicit.title)),t.context.$implicit._width,t.context.$implicit.field,t.context.$implicit.format,t.context.$implicit.filter,t.context.$implicit.filterable)},null)}function Xt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,7,"button",[["dir","ltr"],["kendoGridEditCommand",""],["style","background-color: white;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-edit-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,4).click(n)&&o),"click"===t&&(o=!1!==r.handleEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](2,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](3,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](4,9388032,null,0,m._2,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](6,0,null,null,0,"i",[["class","las la-pen cursor-pointer edit-pencil la-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,2,0,"ltr"),e(t,4,0)},function(e,t){e(t,0,1,[i["\u0275nov"](t,2).dir,i["\u0275nov"](t,4).classButton,i["\u0275nov"](t,4).classDisabled,i["\u0275nov"](t,4).classPrimary,i["\u0275nov"](t,4).isFlat,i["\u0275nov"](t,4).isBare,i["\u0275nov"](t,4).isOutline,i["\u0275nov"](t,4).classActive,i["\u0275nov"](t,4).dir,i["\u0275nov"](t,4).visible,i["\u0275nov"](t,4).commandClass])})}function Zt(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Xt)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](4,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridSaveCommand",""]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-save-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,8).click(n)&&o),"click"===t&&(o=!1!==r.handledEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](6,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](7,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](8,9388032,null,0,m._88,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](10,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-check fa-lg AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](13,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridCancelCommand",""],["style","border: none; color: #E91E63 !important;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-cancel-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,17).click(n)&&o),"click"===t&&(o=!1!==r.handledEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](15,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](16,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](17,9388032,null,0,m.l,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](19,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-ban fa-lg"],["style","color: #E91E63;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](22,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridRemoveCommand",""],["style","border: none; color: #E91E63 !important;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-remove-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,26).click(n)&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](24,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](25,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](26,9388032,null,0,m._82,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](28,0,null,null,0,"i",[["class","fa fa-times fa-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){e(t,2,0,!t.component.editMode),e(t,6,0,"ltr"),e(t,8,0),e(t,15,0,"ltr"),e(t,17,0),e(t,24,0,"ltr"),e(t,26,0)},function(e,t){e(t,4,1,[i["\u0275nov"](t,6).dir,i["\u0275nov"](t,8).classButton,i["\u0275nov"](t,8).classDisabled,i["\u0275nov"](t,8).classPrimary,i["\u0275nov"](t,8).isFlat,i["\u0275nov"](t,8).isBare,i["\u0275nov"](t,8).isOutline,i["\u0275nov"](t,8).classActive,i["\u0275nov"](t,8).dir,i["\u0275nov"](t,8).visible,i["\u0275nov"](t,8).commandClass]),e(t,13,1,[i["\u0275nov"](t,15).dir,i["\u0275nov"](t,17).classButton,i["\u0275nov"](t,17).classDisabled,i["\u0275nov"](t,17).classPrimary,i["\u0275nov"](t,17).isFlat,i["\u0275nov"](t,17).isBare,i["\u0275nov"](t,17).isOutline,i["\u0275nov"](t,17).classActive,i["\u0275nov"](t,17).dir,i["\u0275nov"](t,17).visible,i["\u0275nov"](t,17).commandClass]),e(t,22,1,[i["\u0275nov"](t,24).dir,i["\u0275nov"](t,26).classButton,i["\u0275nov"](t,26).classDisabled,i["\u0275nov"](t,26).classPrimary,i["\u0275nov"](t,26).isFlat,i["\u0275nov"](t,26).isBare,i["\u0275nov"](t,26).isOutline,i["\u0275nov"](t,26).classActive,i["\u0275nov"](t,26).dir,i["\u0275nov"](t,26).visible,i["\u0275nov"](t,26).commandClass])})}function Jt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-tree-nomenclature",[],null,null,null,at,tt)),i["\u0275did"](1,114688,null,0,et,[T.Router,l.a,R,k.a],{idNomenclatureOnUpdate:[0,"idNomenclatureOnUpdate"]},null)],function(e,t){e(t,1,0,t.component.idNomenclatureOnUpdate)},null)}function Kt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","montant"]],null,null,null,null,null)),(e()(),i["\u0275ted"](1,null,[" ","\n        : ","\n      "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){var n=t.component;e(t,1,0,i["\u0275unv"](t,1,0,i["\u0275nov"](t,2).transform("COST_NOMENCLATURE")),"NaN"!=n.montantTotal.toFixed(3).toString()?n.montantTotal.toFixed(3).toString()+n.currentCurrency:"0"+n.currentCurrency)})}function Qt(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.saveNomenclatureClick()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,["","\n                "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("SAVE_NOMENCLATURE")))})}function $t(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.editNomenclatureClick()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ","\n                "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("EDIT_NOMENCLATURE")))})}function en(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-sm btn-back-to-list btn-primary"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.backtoOldNomenclatureClick()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-chevron-circle-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ","\n                "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("BACK_TO_OLD_NOMENCLATURE_LIST")))})}function tn(e){return i["\u0275vid"](0,[i["\u0275qud"](671088640,1,{itemDropDown:0}),(e()(),i["\u0275eld"](1,0,null,null,229,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](3,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](5,0,null,null,5,"div",[["class","col-sm-12 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"h3",[["class","card-title mb-0"],["style"," float:left;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](8,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](13,0,null,null,216,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](15,0,null,null,213,"form",[["class","form-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,17).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,17).onReset()&&o),o},null,null)),i["\u0275did"](16,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](17,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](19,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](21,0,null,null,67,"div",[["class","col-lg-12 col-sm-12 col-md-12 mr-5"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](23,0,null,null,64,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](25,0,null,null,32,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](27,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](28,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](30,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](33,0,null,null,19,"kendo-combobox",[["class","form-control"],["formControlName","typeNomenclature"]],[[2,"k-widget",null],[2,"k-combobox",null],[2,"k-header",null],[2,"k-combobox-clearable",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"valueChange"]],function(e,t,n){var i=!0,o=e.component;return"ngModelChange"===t&&(i=!1!==(o.selectedValue=n)&&i),"valueChange"===t&&(i=!1!==o.valueChange(n)&&i),i},st.g,st.b)),i["\u0275prd"](6144,null,dt.m,null,[dt.c]),i["\u0275prd"](256,null,b.b,"kendo.combobox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](41,770048,null,6,dt.c,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.ChangeDetectorRef,i.Renderer2,i.ElementRef,[2,dt.E]],{data:[0,"data"],textField:[1,"textField"],valueField:[2,"valueField"],valuePrimitive:[3,"valuePrimitive"],filterable:[4,"filterable"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,2,{template:0}),i["\u0275qud"](335544320,3,{headerTemplate:0}),i["\u0275qud"](335544320,4,{footerTemplate:0}),i["\u0275qud"](335544320,5,{noDataTemplate:0}),i["\u0275qud"](335544320,6,{groupTemplate:0}),i["\u0275qud"](335544320,7,{fixedGroupTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.c]),i["\u0275did"](49,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](51,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](54,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](55,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Dt)),i["\u0275did"](60,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,At)),i["\u0275did"](63,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ot)),i["\u0275did"](66,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](68,0,null,null,18,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](70,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](71,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](73,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](76,0,null,null,5,"input",[["class","form-control"],["disabled",""],["formControlName","reference"],["name","reference"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,77)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,77).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,77)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,77)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](77,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](79,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](81,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](83,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](84,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n\n      "])),(e()(),i["\u0275eld"](90,0,null,null,98,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](92,0,null,null,13,"ul",[["class","nav nav-tabs"],["role","tablist"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](94,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](96,0,null,null,4,"a",[["aria-controls","home1"],["aria-selected","true"],["class","nav-link active show"],["data-toggle","tab"],["href","#home1"],["role","tab"],["style","font-size: larger;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](98,0,null,null,0,"i",[["class","cui-list"]],null,null,null,null,null)),(e()(),i["\u0275ted"](99,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,It)),i["\u0275did"](104,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275eld"](107,0,null,null,80,"div",[["class","tab-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](109,0,null,null,66,"div",[["class","tab-pane active show"],["id","home1"],["role","tabpanel"]],null,null,null,null,null)),i["\u0275did"](110,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](111,{"min-height":0,"max-height":1,"overflow-y":2}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](113,0,null,null,61,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"],[null,"edit"],[null,"cancel"],[null,"save"],[null,"remove"],[null,"add"],[null,"cellClick"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"edit"===t&&(i=!1!==o.editHandler(n)&&i),"cancel"===t&&(i=!1!==o.cancelHandler(n)&&i),"save"===t&&(i=!1!==o.saveHandler(n)&&i),"remove"===t&&(i=!1!==o.removeProductHandler(n)&&i),"add"===t&&(i=!1!==o.addHandler(n)&&i),"cellClick"===t&&(i=!1!==o.getCurrentDataItem(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](145,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",edit:"edit",cancel:"cancel",save:"save",remove:"remove",add:"add",cellClick:"cellClick"}),i["\u0275qud"](603979776,8,{columns:1}),i["\u0275qud"](603979776,9,{detailTemplateChildren:1}),i["\u0275qud"](603979776,10,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,11,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,12,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,13,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Pt)),i["\u0275did"](156,16384,[[12,4]],0,m._110,[[2,i.TemplateRef]],{position:[0,"position"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Yt)),i["\u0275did"](160,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](162,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](163,49152,null,4,m.J,[[8,null]],{title:[0,"title"]},null),i["\u0275qud"](603979776,23,{headerTemplates:1}),i["\u0275qud"](335544320,24,{footerTemplate:0}),i["\u0275qud"](603979776,25,{columnMenuTemplates:1}),i["\u0275qud"](335544320,26,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[8,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,Zt)),i["\u0275did"](172,16384,[[26,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](177,0,null,null,9,"div",[["class","tab-pane"],["id","home2"],["role","tabpanel"]],null,null,null,null,null)),i["\u0275did"](178,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](179,{"min-height":0,"max-height":1,"overflow-y":2}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](181,0,null,null,4,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Jt)),i["\u0275did"](184,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Kt)),i["\u0275did"](191,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](194,0,null,null,32,"div",[["class","fixed-card-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](196,0,null,null,29,"div",[["class","footerStyle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](198,0,null,null,26,"footer",[["class","app-footer"],["style","margin-left: 0;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](200,0,null,null,23,"div",[["class","w-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](202,0,null,null,20,"div",[["class","d-flex justify-content-end p-3 footer-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](204,0,null,null,8,"a",[["routerLink","/main/manufacturing/nomenclature"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,205).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&o),o},null,null)),i["\u0275did"](205,671744,null,0,T.RouterLinkWithHref,[T.Router,T.ActivatedRoute,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](207,0,null,null,4,"span",[["class","btn btn-sm btn-back-to-list btn-primary"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](209,0,null,null,0,"i",[["class","fa fa-chevron-circle-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](210,null,[" ","\n                  "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Qt)),i["\u0275did"](215,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,$t)),i["\u0275did"](218,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,en)),i["\u0275did"](221,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,17,0,n.formGroup),e(t,41,0,n.typesList,"name","value",!0,!0),e(t,49,0,"typeNomenclature",n.selectedValue),e(t,55,0,n.formGroup.controls.typeNomenclature),e(t,60,0,!n.selectedValue&&!n.isPF&&!n.isPSF),e(t,63,0,n.isPF||"PF"===n.selectedValue),e(t,66,0,n.isPSF||"PSF"===n.selectedValue),e(t,79,0,"reference",""),e(t,84,0,n.formGroup.controls.reference),e(t,104,0,n.isUpdateMode),e(t,110,0,e(t,111,0,"auto","auto","auto")),e(t,145,0,n.gridSettingsNomenclatures.gridData,n.gridSettingsNomenclatures.state.take,n.gridSettingsNomenclatures.state.skip,n.gridSettingsNomenclatures.state.sort,n.gridSettingsNomenclatures.state.filter,"menu",!0,n.pagerSettings,!0,!1),e(t,156,0,"bottom"),e(t,160,0,n.gridSettingsNomenclatures.columnsConfig),e(t,163,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,163,0,i["\u0275nov"](t,168).transform("ACTION")),"")),e(t,178,0,e(t,179,0,"400px","400px","auto")),e(t,184,0,n.loadComponentNomenclatureTreeView),e(t,191,0,n.isUpdateMode),e(t,205,0,"/main/manufacturing/nomenclature"),e(t,215,0,!n.isUpdateMode),e(t,218,0,n.isUpdateMode),e(t,221,0,n.isUpdateMode&&n.oldIdNomenclatureOnUpdate)},function(e,t){var n=t.component;e(t,8,0,i["\u0275unv"](t,8,0,i["\u0275nov"](t,9).transform(n.isUpdateMode?"EDIT_NOMENCLATURE":"NEW_NOMENCLATURE"))),e(t,15,0,i["\u0275nov"](t,19).ngClassUntouched,i["\u0275nov"](t,19).ngClassTouched,i["\u0275nov"](t,19).ngClassPristine,i["\u0275nov"](t,19).ngClassDirty,i["\u0275nov"](t,19).ngClassValid,i["\u0275nov"](t,19).ngClassInvalid,i["\u0275nov"](t,19).ngClassPending),e(t,28,0,i["\u0275unv"](t,28,0,i["\u0275nov"](t,29).transform("Product"))),e(t,33,1,[i["\u0275nov"](t,41).widgetClasses,i["\u0275nov"](t,41).widgetClasses,i["\u0275nov"](t,41).widgetClasses,i["\u0275nov"](t,41).clearable,i["\u0275nov"](t,41).dir,i["\u0275nov"](t,51).ngClassUntouched,i["\u0275nov"](t,51).ngClassTouched,i["\u0275nov"](t,51).ngClassPristine,i["\u0275nov"](t,51).ngClassDirty,i["\u0275nov"](t,51).ngClassValid,i["\u0275nov"](t,51).ngClassInvalid,i["\u0275nov"](t,51).ngClassPending]),e(t,71,0,i["\u0275unv"](t,71,0,i["\u0275nov"](t,72).transform("REFERENCE"))),e(t,76,0,i["\u0275nov"](t,81).ngClassUntouched,i["\u0275nov"](t,81).ngClassTouched,i["\u0275nov"](t,81).ngClassPristine,i["\u0275nov"](t,81).ngClassDirty,i["\u0275nov"](t,81).ngClassValid,i["\u0275nov"](t,81).ngClassInvalid,i["\u0275nov"](t,81).ngClassPending),e(t,99,0,i["\u0275unv"](t,99,0,i["\u0275nov"](t,100).transform("COMPOSANT_NOMENCATURE"))),e(t,113,0,i["\u0275nov"](t,145).dir,i["\u0275nov"](t,145).hostClasses,i["\u0275nov"](t,145).hostClasses,i["\u0275nov"](t,145).lockedClasses,i["\u0275nov"](t,145).virtualClasses,i["\u0275nov"](t,145).columnResizing,i["\u0275nov"](t,145).noScrollbarClass),e(t,204,0,i["\u0275nov"](t,205).target,i["\u0275nov"](t,205).href),e(t,210,0,i["\u0275unv"](t,210,0,i["\u0275nov"](t,211).transform("BACK_TO_LIST")))})}var nn=i["\u0275ccf"]("app-add-nomenclature",_t,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-add-nomenclature",[],null,null,null,tn,kt)),i["\u0275did"](1,245760,null,0,_t,[T.ActivatedRoute,T.Router,E.a,de.b,s.k,l.a,R,k.a,mt.a,ft.a,A.a,yt],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),on=n("sfyH"),rn=function(){function e(){}return e.ENTITY_NAME="machine",e.MACHINE_URL="",e.DESCRPTION_TITLE="MACHINE_NAME",e.DESCRPTION_FIELD="description",e.REFERENCE_TITLE="REFERENCE_MACHINE",e.REFERENCE_FIELD="reference",e.WORKSHOP_TITLE="WORKSHOP",e.SECTION_TITLE="Section",e.WORKSHOP_FIELD="areaId",e.RESPONSIBLE_TITLE="RESPONSIBLE",e.RESPONSIBLE_FIELD="responsibleName",e.STATUS_TITLE="STATE",e.STATUS_FIELD="stateMachine",e.FULLNAME="FullName",e.RESPONSIBLE_NAME="responsibleName",e.DESIGNATION="designation",e.SECTION_NAME_FIELD="sectionName",e.URI_MACHINES="main/settings/manufacturing/machine",e.URI_FIND_MACHINES="/",e.URI_ADVANCED_EDIT="main/settings/manufacturing/machine/edit/",e.MACHINE_DESCRIPTION="machineDescription",e.AREA_ID="areaId",e.SECTION_ID="sectionId",e.PAGEABLE="pageable",e.EXIST_SPARE="EXIST_SPARE",e.AVAILABLE="AVAILABLE",e.COST="costPerHour",e.COST_PER_HOUR="COST_PER_HOUR",e.NOT_ASSIGNED="notAssigned",e.MACHINE_TITLE="MACHINE",e.MACHINE_LIST_REPORT="reportList",e.MACHINE_LIST_NOT_DELETED="/notDeleted",e.END_DATE_AMORTISATION="endDateAmortisation",e.FAIL_FORM_VALIDATION="FAIL_FORM_MACHINE_VALIDATION",e.FAIL_MULTIPLE_VALIDATION_PART_ONE="FAIL_MULTIPLE_FORM_MACHINE_VALIDATION_PART_ONE",e.FAIL_MULTIPLE_VALIDATION_PART_TWO="FAIL_MULTIPLE_FORM_MACHINE_VALIDATION_PART_TWO",e.FAIL_VALIDATION_PART_ONE="FAIL_FORM_MACHINE_VALIDATION_PART_ONE",e.FAIL_VALIDATION_PART_TWO="FAIL_FORM_MACHINE_VALIDATION_PART_TWO",e.MACHINE_FAMILY_FIELD="MACHINE_FAMILY_FIELD",e.MACHINE_RESPONSIBLE_FIELD="MACHINE_RESPONSIBLE_FIELD",e.MACHINE_DATE_AMORTISATION_FIELD="MACHINE_DATE_AMORTISATION_FIELD",e.MACHINE_DESCRIPTION_FIELD="MACHINE_DESCRIPTION_FIELD",e.MACHINE_COST_FIELD="MACHINE_COST_FIELD",e.INVALID_MACHINE_SIZE="INVALID_MACHINE_SIZE",e.MACHINE_IMAGE_MAX_SIZE=1e6,e}(),an=function(e){function t(t,n){var i=e.call(this,t,n,"manufacturing",rn.ENTITY_NAME)||this;return i.sectionFab="manufacturing",i.endpointFab="machine",i.connectionFab=n.getConfig("root_api"),i}return Object(O.__extends)(t,e),t.prototype.readReport=function(e,t){return this.http.post(this.connectionFab+"/"+this.sectionFab+"/"+this.endpointFab+"/"+e,t,{responseType:"blob"})},t}(P.a),ln=function(){function e(){}return e.ENTITY_NAME="section",e.SUCCESS_OPERATION="SUCCESS_OPERATION",e.FAILURE_OPERATION="FAILURE_OPERATION",e.URL_LIST="main/settings/manufacturing/section",e.AREA_ID="areaId",e.GET_BY_SECTION_ID="bySectionId",e.SET_MACHINE_SECTION_TO_NULL="machineSectionNull",e.STATUS_TITLE="STATE",e.DESIGNATION="designation",e.AVAILABLE="AVAILABLE",e.REFERENCE_FIELD="reference",e.REFERENCE_TITLE="REFERENCE",e.DESIGNATION_FIELD="designation",e.DESIGNATION_TITLE="DESIGNATION",e.AREA_FIELD="areaDesignation",e.AREA_TITLE="WORKSHOP",e.URI_ADVANCED_EDIT="main/settings/manufacturing/section/edit/",e.PAGEABLE="pageable",e.SECTION_URL="",e.SUCCESS_OPERATION_MACHINE_UNASSIGNED="SUCCESS_OPERATION_MACHINE_UNASSIGNED",e.DELETE_SECTION_MESSAGE="DELETE_SECTION_MSG",e.SECTION_DELETE_TEXT_MESSAGE="SECTION_DELETE_TEXT_MESSAGE",e}(),sn=function(e){function t(t,n){return e.call(this,t,n,"manufacturing",ln.ENTITY_NAME)||this}return Object(O.__extends)(t,e),t}(P.a),dn=n("VfSu"),cn=function(){function e(e,t,n,i,o,r,a){this.machineService=e,this.userService=t,this.sectionService=n,this.swalWarrings=i,this.router=o,this.growlService=r,this.translate=a,this.size=N.a.TEN,this.currentPage=N.a.ZERO,this.value="",this.machineList=[],this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.gridState={skip:N.a.ZERO,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:rn.REFERENCE_FIELD,title:rn.REFERENCE_TITLE,tooltip:rn.REFERENCE_TITLE,filterable:!0,width:N.a.ONE_HUNDRED},{field:rn.DESCRPTION_FIELD,title:rn.DESCRPTION_TITLE,tooltip:rn.DESCRPTION_TITLE,filterable:!0,width:N.a.ONE_HUNDRED},{field:rn.FULLNAME,title:rn.RESPONSIBLE_TITLE,tooltip:rn.RESPONSIBLE_TITLE,filterable:!0,width:N.a.ONE_HUNDRED},{field:rn.STATUS_FIELD,title:rn.STATUS_TITLE,tooltip:rn.STATUS_TITLE,filterable:!0,width:N.a.ONE_HUNDRED}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig}}return e.prototype.ngOnInit=function(){this.initGridDataSource()},e.prototype.initGridDataSource=function(e){var t=this;null!=e&&(this.currentPage=e),this.subscription$=this.machineService.getJavaGenericService().getEntityList(rn.PAGEABLE+"?searchValue="+this.value+"&page="+this.currentPage+"&size="+this.size).flatMap(function(e){t.machineList=e;var n=[];return e.content.forEach(function(e){n.push(e.responsibleId)}),t.userService.getUsersFromListId(n)}).subscribe(function(e){t.machineList.content.forEach(function(t){e.forEach(function(e){e.Id===t.responsibleId&&(t.FullName=e.FullName)}),null!=t.section&&(t.sectionName=t.section.designation)}),t.gridSettings.gridData={data:t.machineList.content,total:t.machineList.totalElements}})},e.prototype.removeHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){n.value&&t.machineService.getJavaGenericService().deleteEntity(e.id,rn.MACHINE_URL).subscribe(function(){t.growlService.successNotification(t.translate.instant(_.a.SUCCESS_OPERATION)),t.initGridDataSource()},function(){t.growlService.ErrorNotification(t.translate.instant(_.a.FAILURE_OPERATION))})})},e.prototype.goToAdvancedEdit=function(e){this.router.navigateByUrl(rn.URI_ADVANCED_EDIT.concat(e.id),{queryParams:M.filter,skipLocationChange:!0})},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.goPage(),this.initGridDataSource()},e.prototype.goPage=function(){var e=this;this.sectionService.getJavaGenericService().getEntityList(rn.PAGEABLE+"?page="+this.currentPage+"&size="+this.size).subscribe(function(t){e.gridSettings.gridData.data=t.content})},e.prototype.onSearch=function(){""===this.value?this.initGridDataSource():this.initGridDataSource(0)},e.prototype.exportListMachine=function(){var e,t=this,n={};this.subscription$=this.machineService.getJavaGenericService().getEntityList(rn.MACHINE_LIST_NOT_DELETED).flatMap(function(n){var i=[];return(e=n).forEach(function(e){i.push(e.responsibleId)}),t.userService.getUsersFromListId(i)}).flatMap(function(i){return e.forEach(function(e){i.forEach(function(t){e.responsibleId===t.Id&&(n[e.id]=t.FullName)})}),t.machineService.readReport(rn.MACHINE_LIST_REPORT,n)}).subscribe(function(e){var t=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})},e}(),un=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function hn(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](1,0,null,null,1,"div",[["class","btn-group col-lg-3 col-md-8 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](4,0,null,null,5,"div",[["class","row"],["style","float :right; margin-right: 40px;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](6,0,null,null,2,"app-btn-grid",[["style","margin-top: -5%;    display: inline-flex;"]],null,[[null,"exportReportEvent"]],function(e,t,n){var i=!0;return"exportReportEvent"===t&&(i=!1!==e.component.exportListMachine()&&i),i},r.b,r.a)),i["\u0275did"](7,114688,null,0,a.a,[l.a,s.k,d.a,c.a,u.a],{advencedAdd:[0,"advencedAdd"],add:[1,"add"],addLink:[2,"addLink"],exportReport:[3,"exportReport"]},{exportReportEvent:"exportReportEvent"}),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,7,0,!0,!1,"add",!0)},null)}function pn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,2,"span",[["class","badge badge-success"]],null,null,null,null,null)),(e()(),i["\u0275ted"](2,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,2,0,i["\u0275unv"](t,2,0,i["\u0275nov"](t,3).transform("AVAILABLE")))})}function fn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,2,"span",[["class","badge badge-warning"]],null,null,null,null,null)),(e()(),i["\u0275ted"](2,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,2,0,i["\u0275unv"](t,2,0,i["\u0275nov"](t,3).transform("NOT_AVAILABLE")))})}function gn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,2,"span",[["class","badge badge-danger"]],null,null,null,null,null)),(e()(),i["\u0275ted"](2,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,2,0,i["\u0275unv"](t,2,0,i["\u0275nov"](t,3).transform("OUT_OF_ORDER")))})}function mn(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,pn)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,fn)),i["\u0275did"](5,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,gn)),i["\u0275did"](8,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){e(t,2,0,"AVAILABLE"==t.context.$implicit.stateMachine),e(t,5,0,"NOT_AVAILABLE"==t.context.$implicit.stateMachine),e(t,8,0,"BROKEN"==t.context.$implicit.stateMachine)},null)}function vn(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"],["class","las la-pen cursor-pointer edit-pencil la-lg mx-3"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.goToAdvancedEdit(e.context.dataItem)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](4,0,null,null,0,"i",[["aria-hidden","true"],["class","text-danger cursor-pointer fa fa-trash-o la-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.removeHandler(e.context.dataItem)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],null,null)}function yn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,184,"div",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,181,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,178,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,175,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](8,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](10,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](12,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](13,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](20,0,null,null,160,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](22,0,null,null,27,"div",[["class","row d-flex justify-content-between mt-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](24,0,null,null,24,"div",[["class","col-lg-4 col-md-6 col-sm-12 col-xs-12 d-flex justify-content-center"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](26,0,null,null,21,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](28,0,null,null,18,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](30,0,null,null,10,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](32,0,null,null,7,"input",[["aria-describedby","addon-wrapping"],["class","form-control"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"afterValueChanged"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,33)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,33).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,33)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,33)._compositionEnd(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,38).onValueChange(n)&&o),"ngModelChange"===t&&(o=!1!==(r.value=n)&&o),"afterValueChanged"===t&&(o=!1!==r.onSearch()&&o),o},null,null)),i["\u0275did"](33,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](35,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](37,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),i["\u0275did"](38,147456,null,0,on.a,[],null,{afterValueChanged:"afterValueChanged"}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](42,0,null,null,3,"div",[["class","col-2 p-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](44,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-search fa-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onSearch()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](51,0,null,null,128,"div",[["class","card  mt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](53,0,null,null,125,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](55,0,null,null,122,"div",[["class","card-body p-3"],["style","min-height: fit-content;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](57,0,null,null,119,"kendo-grid",[],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"remove"],[null,"pageChange"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"remove"===t&&(i=!1!==o.removeHandler(n)&&i),"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](89,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],groupable:[8,"groupable"],reorderable:[9,"reorderable"],columnMenu:[10,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",remove:"remove"}),i["\u0275qud"](603979776,1,{columns:1}),i["\u0275qud"](603979776,2,{detailTemplateChildren:1}),i["\u0275qud"](603979776,3,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,4,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,5,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,6,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](0,null,null,1,null,hn)),i["\u0275did"](99,16384,[[5,4]],0,m._110,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n                  "])),(e()(),i["\u0275eld"](101,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](102,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,7,{headerTemplates:1}),i["\u0275qud"](335544320,8,{footerTemplate:0}),i["\u0275qud"](603979776,9,{columnMenuTemplates:1}),i["\u0275qud"](335544320,10,{template:0}),i["\u0275qud"](335544320,11,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,12,{groupFooterTemplate:0}),i["\u0275qud"](335544320,13,{editTemplate:0}),i["\u0275qud"](335544320,14,{filterCellTemplate:0}),i["\u0275qud"](335544320,15,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](116,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](117,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,16,{headerTemplates:1}),i["\u0275qud"](335544320,17,{footerTemplate:0}),i["\u0275qud"](603979776,18,{columnMenuTemplates:1}),i["\u0275qud"](335544320,19,{template:0}),i["\u0275qud"](335544320,20,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,21,{groupFooterTemplate:0}),i["\u0275qud"](335544320,22,{editTemplate:0}),i["\u0275qud"](335544320,23,{filterCellTemplate:0}),i["\u0275qud"](335544320,24,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n\n                  "])),(e()(),i["\u0275eld"](131,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](132,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,25,{headerTemplates:1}),i["\u0275qud"](335544320,26,{footerTemplate:0}),i["\u0275qud"](603979776,27,{columnMenuTemplates:1}),i["\u0275qud"](335544320,28,{template:0}),i["\u0275qud"](335544320,29,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,30,{groupFooterTemplate:0}),i["\u0275qud"](335544320,31,{editTemplate:0}),i["\u0275qud"](335544320,32,{filterCellTemplate:0}),i["\u0275qud"](335544320,33,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n\n                  "])),(e()(),i["\u0275eld"](146,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](147,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,34,{headerTemplates:1}),i["\u0275qud"](335544320,35,{footerTemplate:0}),i["\u0275qud"](603979776,36,{columnMenuTemplates:1}),i["\u0275qud"](335544320,37,{template:0}),i["\u0275qud"](335544320,38,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,39,{groupFooterTemplate:0}),i["\u0275qud"](335544320,40,{editTemplate:0}),i["\u0275qud"](335544320,41,{filterCellTemplate:0}),i["\u0275qud"](335544320,42,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](0,null,null,1,null,mn)),i["\u0275did"](161,16384,[[37,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n                  "])),(e()(),i["\u0275eld"](164,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](165,49152,null,4,m.J,[[8,null]],{title:[0,"title"],width:[1,"width"]},null),i["\u0275qud"](603979776,43,{headerTemplates:1}),i["\u0275qud"](335544320,44,{footerTemplate:0}),i["\u0275qud"](603979776,45,{columnMenuTemplates:1}),i["\u0275qud"](335544320,46,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](0,null,null,1,null,vn)),i["\u0275did"](174,16384,[[46,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n\n"]))],function(e,t){var n=t.component;e(t,35,0,n.value),e(t,89,1,[n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,!1,!1,n.pagerSettings,!1,!0,!1]),e(t,102,0,i["\u0275unv"](t,102,0,i["\u0275nov"](t,112).transform(n.gridSettings.columnsConfig[0].title)),n.gridSettings.columnsConfig[0].field),e(t,117,0,i["\u0275unv"](t,117,0,i["\u0275nov"](t,127).transform(n.gridSettings.columnsConfig[1].title)),n.gridSettings.columnsConfig[1].field),e(t,132,0,i["\u0275unv"](t,132,0,i["\u0275nov"](t,142).transform(n.gridSettings.columnsConfig[2].title)),n.gridSettings.columnsConfig[2].field),e(t,147,0,i["\u0275unv"](t,147,0,i["\u0275nov"](t,157).transform(n.gridSettings.columnsConfig[3].title)),n.gridSettings.columnsConfig[3].field),e(t,165,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,165,0,i["\u0275nov"](t,170).transform("ACTION")),""),150)},function(e,t){e(t,13,0,i["\u0275unv"](t,13,0,i["\u0275nov"](t,14).transform("MACHINE_LIST"))),e(t,32,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,32,0,i["\u0275nov"](t,39).transform("SEARCH")),""),i["\u0275nov"](t,37).ngClassUntouched,i["\u0275nov"](t,37).ngClassTouched,i["\u0275nov"](t,37).ngClassPristine,i["\u0275nov"](t,37).ngClassDirty,i["\u0275nov"](t,37).ngClassValid,i["\u0275nov"](t,37).ngClassInvalid,i["\u0275nov"](t,37).ngClassPending),e(t,57,0,i["\u0275nov"](t,89).dir,i["\u0275nov"](t,89).hostClasses,i["\u0275nov"](t,89).hostClasses,i["\u0275nov"](t,89).lockedClasses,i["\u0275nov"](t,89).virtualClasses,i["\u0275nov"](t,89).columnResizing,i["\u0275nov"](t,89).noScrollbarClass)})}var bn,wn=i["\u0275ccf"]("app-list-machine",cn,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-list-machine",[],null,null,null,yn,un)),i["\u0275did"](1,114688,null,0,cn,[an,dn.a,sn,E.a,T.Router,A.a,s.k],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Cn=n("5ODU"),xn=n("8kRG"),Sn=n("zbUj"),Tn=n("ZSZO"),En=n("LV3g"),_n=n("SvmP"),kn=n("gBgf"),Dn=n("WWxD"),An=n("VSKV"),On=function(){function e(){}return e.ENTITY_NAME="machineSpare",e.GET_SPARE_BY_MACHINE="byMachineId",e.MACHINESPARE_URL="",e.EDIT_PRODUCTNOMENCLATURE_TITLE="EDIT product Nomenclautre",e.ADD_PRODUCTNOMENCLATURE="Add productNomenclautre",e.REFERENCE_FILIED="nomenclature",e.REFERENCE_TITLE="Nomenclature",e.PRODUCTID_FILIED="productId",e.PRODUCTID_TITLE="Product Id",e.PRODUCTNAME_QUANTITE_FILIED="quantity",e.PRODUCTNAME_QUANTITE_TITLE="Quantity",e.SUCCESS_OPERATION="SUCCESS_OPERATION",e.FAILURE_OPERATION="FAILURE_OPERATION",e.MANUFACTURING="manufacturing",e.SPARES_NAME_FILIED="description",e.SPARE_NAME_TITLE="SPARE_PART",e}(),In=n("4nnk");!function(e){e["Available "]="AVAILABLE",e["Not Available"]="NOT_AVAILABLE",e["Out Of Order"]="BROKEN"}(bn||(bn={}));var Pn,Rn=function(){},Mn=function(e){function t(t,n){return e.call(this,t,n,On.MANUFACTURING,On.ENTITY_NAME)||this}return Object(O.__extends)(t,e),t}(P.a);!function(e){e.MANUAL="MANUAL",e.SEMI_AUTOMATIC="SEMI_AUTOMATIC",e.AUTOMATIC="AUTOMATIC"}(Pn||(Pn={}));var Nn,Ln=n("wnIO"),Hn=function(e){function t(t,n){return e.call(this,t,n,Ln.a.MANUFACTURING,Ln.a.OPERATION)||this}return Object(O.__extends)(t,e),t.prototype.convertDuration=function(e){var t;return t=(e=e.substring(N.a.TWO,e.length)).indexOf(vt.a.ALPHABETIC_H.toString().toUpperCase())===N.a.MINUS_ONE?vt.a.DOUBLE_ZERO:e.substring(N.a.ZERO,e.indexOf(vt.a.ALPHABETIC_H.toString().toUpperCase())).length===N.a.TWO?e.substring(N.a.ZERO,e.indexOf(vt.a.ALPHABETIC_H.toString().toUpperCase())):String(N.a.ZERO)+e.substring(N.a.ZERO,e.indexOf(vt.a.ALPHABETIC_H.toString().toUpperCase())),t+="h:",e.indexOf(vt.a.ALPHABETIC_M.toString().toUpperCase())===N.a.MINUS_ONE?t+=vt.a.DOUBLE_ZERO:e.substring(e.indexOf(vt.a.ALPHABETIC_H.toString().toUpperCase())+N.a.ONE,e.indexOf(vt.a.ALPHABETIC_M.toString().toUpperCase())).length===N.a.TWO?t+=e.substring(e.indexOf(vt.a.ALPHABETIC_H.toString().toUpperCase())+N.a.ONE,e.indexOf(vt.a.ALPHABETIC_M.toString().toUpperCase())):t+=N.a.ZERO+e.substring(e.indexOf(vt.a.ALPHABETIC_H.toString().toUpperCase())+N.a.ONE,e.indexOf(vt.a.ALPHABETIC_M.toString().toUpperCase())),t+vt.a.ALPHABETIC_M},t}(P.a);!function(e){e.TYPE1="TYPE1",e.TYPE2="TYPE2",e.TYPE3="TYPE3"}(Nn||(Nn={}));var Bn=n("ld1j"),jn=n("OE0E"),zn=function(){function e(e,t,n,i,o,r,a,l,s,d,c,u,h){var p=this;this.sanitizer=e,this.userService=t,this.activatedRoute=n,this.router=i,this.validationService=o,this.translate=r,this.machineService=a,this.itemService=l,this.swalWarrings=s,this.machineSpareService=d,this.operationService=c,this.companyService=u,this.growlService=h,this.isUpdateMode=!1,this.machine=new Rn,this.item=new pt.a,this.rowSparesList=[],this.getTypesFromEnum=bn,this.getFamiliesFromEnum=Pn,this.getTypeMachineFromEnum=Nn,this.rowCost=[],this.listOperations=[],this.machineOperations=[],this.listUsers=[],this.changePicture=!1,this.imageData=null,this.gridStateSpares={skip:0,take:10,filter:{logic:"and",filters:[]}},this.gridData=Object(An.f)(this.rowSparesList,this.gridStateSpares),this.columnsConfigSpares=[{field:On.SPARES_NAME_FILIED,title:On.SPARE_NAME_TITLE,filterable:!0}],this.gridSettingsSpares={state:this.gridStateSpares,columnsConfig:this.columnsConfigSpares},this.activatedRoute.params.subscribe(function(e){p.idMachineOnUpdate=+e.id||0}),this.getTypesList(),this.getFamiliesList(),this.getTypeMachineList(),this.formGroup=new v.FormGroup({reference:new v.FormControl("",v.Validators.required),description:new v.FormControl("",v.Validators.required),machineImage:new v.FormControl(""),brand:new v.FormControl(""),serialNumber:new v.FormControl(""),typeMachine:new v.FormControl(""),stateMachine:new v.FormControl("",v.Validators.required),IdResponsible:new v.FormControl("",v.Validators.required),costPerHour:new v.FormControl("",v.Validators.required),familyMachine:new v.FormControl("",v.Validators.required),price:new v.FormControl("",v.Validators.required),purchaseDate:new v.FormControl("",v.Validators.required),endDateAmortisation:new v.FormControl("",v.Validators.required),periodAmortisation:new v.FormControl("",[v.Validators.required,v.Validators.min(N.a.ZERO),v.Validators.max(N.a.ONE_HUNDRED)])})}return e.prototype.getBase64File=function(e){var t=this;null!==e?this.machineService.getJavaGenericService().getFile("getmachineimage?fileName="+e).subscribe(function(e){t.imageData=""!==e.base64File?"data:image/"+e.name.split("?")[0].split(".").pop()+";base64,"+e.base64File:null}):this.imageData=null},e.prototype.displayFile=function(e,t){var n=this;this.machineImageFile=t,this.machineImageBase64Picture=e;var i=new FileReader;i.readAsDataURL(t),i.onload=function(e){n.pictureFileInfo=new Bn.a,n.pictureFileInfo.Name=t.name,n.pictureFileInfo.Extension=t.type,n.pictureFileInfo.FileData=i.result.split(",")[1],n.pictureMachineSrc=i.result,n.changePicture=!0}},e.prototype.saveMachineImage=function(e,t){var n=this;this.machineService.getJavaGenericService().uploadFile("uploadmachineimage",{base64File:e,name:t.name,directoryName:"machinePictureStore"}).subscribe(function(e){if(null!==e){n.pathPicture=e,n.saveMachine();var i=new FileReader;i.readAsDataURL(t),i.onload=function(e){n.pictureFileInfo=new Bn.a,n.pictureFileInfo.Name=t.name,n.pictureFileInfo.Extension=t.type,n.pictureFileInfo.FileData=i.result.split(",")[1],n.pictureMachineSrc=i.result}}})},e.prototype.uploadPictureFile=function(e){e.target.files[0].size>rn.MACHINE_IMAGE_MAX_SIZE?this.growlService.ErrorNotification(this.translate.instant(rn.INVALID_MACHINE_SIZE,{maxSize:N.a.ONE})):(this.currentFileUpload=e.target.files[0],this.currentFileUpload&&((new FileReader).readAsBinaryString(this.currentFileUpload),this.handleInputChange(this.currentFileUpload)))},e.prototype.handleInputChange=function(e){var t=new FileReader;e.type.match(/image-*/)?(t.onloadend=this._handleReaderLoaded.bind(this,e),t.readAsDataURL(e)):alert("invalid format")},e.prototype._handleReaderLoaded=function(e,t){var n=t.target,i=n.result.substr(n.result.indexOf(",")+1);void 0!==i&&this.displayFile(i,e)},e.prototype.addHandler=function(e){var t=e.sender;this.closeEditor(t),this.createProductLineForm(new function(){}),t.addRow(this.productLineFormGroup),this.btnEditVisible=!1},e.prototype.editHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.dataItem;this.closeEditor(t),this.closeEditor(t,-1),this.editedRowIndex=n,this.productLineFormGroup=new v.FormGroup({IdItem:new v.FormControl(i.productId,v.Validators.required)}),t.editRow(n,this.productLineFormGroup),this.btnEditVisible=!0},e.prototype.cancelHandler=function(e){this.closeEditor(e.sender,e.rowIndex),this.btnEditVisible=!0},e.prototype.saveHandler=function(e){var t=this,n=e.sender,i=e.rowIndex,o=e.formGroup,r=e.isNew;this.productLineFormGroup.valid?(this.itemService.getById(o.value.IdItem).subscribe(function(e){void 0===t.rowSparesList.find(function(e){return e.productId===o.value.IdItem})?r?t.saveNewHandler(o,e):t.saveExistedHandler(o,i,e):t.growlService.ErrorNotification(t.translate.instant(rn.EXIST_SPARE))}),n.closeRow(i)):this.validationService.validateAllFormFields(this.productLineFormGroup)},e.prototype.saveExistedHandler=function(e,t,n){var i=this;this.rowSparesList.find(function(e){return i.rowSparesList.indexOf(e)===t}).productId=e.value.IdItem,this.rowSparesList.find(function(e){return i.rowSparesList.indexOf(e)===t}).description=n.Description,this.idMachineOnUpdate>0&&this.machineSpareService.getJavaGenericService().updateEntity({id:this.rowSparesList[t].id,machineId:this.idMachineOnUpdate,productId:e.value.IdItem},this.rowSparesList[t].id,"").subscribe()},e.prototype.saveNewHandler=function(e,t){var n=this;this.idMachineOnUpdate>0?this.machineSpareService.getJavaGenericService().saveEntity({machineId:this.idMachineOnUpdate,productId:e.value.IdItem},"").subscribe(function(i){n.rowSparesList.push({id:i.id,productId:e.value.IdItem,machineId:n.idMachineOnUpdate,description:t.Description}),n.dataStateChange(n.gridStateSpares)}):this.rowSparesList.push({productId:e.value.IdItem,machineId:this.idMachineOnUpdate,description:t.Description})},e.prototype.closeEditor=function(e,t){void 0===t&&(t=this.editedRowIndex),void 0!==t&&(e.closeRow(t),this.editedRowIndex=void 0,this.productLineFormGroup=void 0)},e.prototype.getTypesList=function(){this.typesList=ct.EnumValues.getNamesAndValues(this.getTypesFromEnum)},e.prototype.getFamiliesList=function(){var e=this;this.familiesList=ct.EnumValues.getNames(this.getFamiliesFromEnum).map(function(t){return{enumValue:t,enumText:e.translate.instant(t)}})},e.prototype.getTypeMachineList=function(){var e=this;this.typeMachineList=ct.EnumValues.getNames(this.getTypeMachineFromEnum).map(function(t){return{enumValue:t,enumText:e.translate.instant(t)}})},e.prototype.createProductLineForm=function(e){this.productLineFormGroup=new v.FormGroup({IdItem:new v.FormControl(e.productId,v.Validators.required)})},e.prototype.removeSpareHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){if(n.value)if(t.idMachineOnUpdate>N.a.ZERO)t.subscription$=t.machineSpareService.getJavaGenericService().deleteEntity(e.dataItem.id,On.MACHINESPARE_URL).subscribe(function(){t.growlService.successNotification(t.translate.instant(_.a.SUCCESS_OPERATION));var n=t.rowSparesList.indexOf(e.dataItem);n!==N.a.MINUS_ONE&&t.rowSparesList.splice(n,N.a.ONE),t.dataStateChange(t.gridStateSpares)},function(){t.growlService.ErrorNotification(t.translate.instant(_.a.FAILURE_OPERATION))});else{var i=t.rowSparesList.indexOf(e.dataItem);-1!==i&&t.rowSparesList.splice(i,1),t.dataStateChange(t.gridStateSpares)}})},e.prototype.dataStateChange=function(e){this.gridStateSpares=e,this.gridData=Object(An.f)(this.rowSparesList,this.gridStateSpares)},e.prototype.itemSelect=function(e){if(e&&e.itemFiltredDataSource&&e.itemForm&&e.itemForm.value[In.a.ID_ITEM]){var t=e.itemFiltredDataSource.filter(function(t){return t.Id===e.itemForm.value[In.a.ID_ITEM]});t&&t.length>0&&(this.item=t[0],this.formGroup.patchValue({IdItem:this.item.Id}))}},e.prototype.itemSelectProductLineForm=function(e){if(e&&e.itemFiltredDataSource&&e.itemForm&&e.itemForm.value[In.a.ID_ITEM]){var t=e.itemFiltredDataSource.filter(function(t){return t.Id===e.itemForm.value[In.a.ID_ITEM]});t&&t.length>0&&(this.item=t[0])}},e.prototype.saveMachineClick=function(){var e=this;this.formGroup.valid?this.subscription$=this.machineService.getJavaGenericService().saveEntity({reference:this.machineReference,description:this.formGroup.value.description,sectionId:null,operations:this.machineOperations,responsibleId:this.formGroup.value.IdResponsible,stateMachine:rn.AVAILABLE,costPerHour:this.formGroup.value.costPerHour,typeMachine:""===this.formGroup.value.typeMachine?null:this.formGroup.value.typeMachine,machineImage:this.pathPicture?this.pathPicture:null,serialNumber:this.formGroup.value.serialNumber,brand:this.formGroup.value.brand,familyMachine:this.formGroup.value.familyMachine,price:this.formGroup.value.price,purchaseDate:this.formGroup.value.purchaseDate,periodAmortisation:this.formGroup.value.periodAmortisation,endDateAmortisation:this.formGroup.value.endDateAmortisation},"").subscribe(function(t){e.rowSparesList.forEach(function(n){e.machineSpareService.getJavaGenericService().saveEntity({machineId:t.id,productId:n.productId},"").subscribe()}),e.growlService.successNotification(e.translate.instant(_.a.SUCCESS_OPERATION)),e.router.navigateByUrl(rn.URI_MACHINES)}):(this.displayValidator(),this.validationService.validateAllFormFields(this.formGroup))},e.prototype.displayValidator=function(){var e=this,t="";Object.keys(this.formGroup.controls).forEach(function(n){"INVALID"!==e.formGroup.get(n).status||"description"!==n&&"IdResponsible"!==n&&"familyMachine"!==n&&"periodAmortisation"!==n&&"price"!==n||(n=e.translateMachineFields(n),t+=" "+n+",")}),t.split(",").length>N.a.TWO?this.growlService.ErrorNotification(this.translate.instant(rn.FAIL_MULTIPLE_VALIDATION_PART_ONE)+t+this.translate.instant(rn.FAIL_MULTIPLE_VALIDATION_PART_TWO)):this.growlService.ErrorNotification(this.translate.instant(rn.FAIL_VALIDATION_PART_ONE)+t+this.translate.instant(rn.FAIL_VALIDATION_PART_TWO))},e.prototype.translateMachineFields=function(e){var t="";switch(e){case"description":t=this.translate.instant(rn.MACHINE_DESCRIPTION_FIELD);break;case"IdResponsible":t=this.translate.instant(rn.MACHINE_RESPONSIBLE_FIELD);break;case"familyMachine":t=this.translate.instant(rn.MACHINE_FAMILY_FIELD);break;case"periodAmortisation":t=this.translate.instant(rn.MACHINE_DATE_AMORTISATION_FIELD);break;case"price":t=this.translate.instant(rn.MACHINE_COST_FIELD);break;default:return}return t},e.prototype.editMachineClick=function(){var e=this;this.formGroup.valid?this.subscription$=this.machineService.getJavaGenericService().updateEntity({id:this.idMachineOnUpdate,reference:this.formGroup.value.reference,description:this.formGroup.value.description,sectionId:this.formGroup.value.sectionId,operations:this.machineOperations,responsibleId:this.formGroup.value.IdResponsible,stateMachine:this.formGroup.value.stateMachine,costPerHour:this.formGroup.value.costPerHour,machineImage:this.changePicture?this.pathPicture:this.formGroup.value.machineImage,typeMachine:""===this.formGroup.value.typeMachine?null:this.formGroup.value.typeMachine,serialNumber:this.formGroup.value.serialNumber,brand:this.formGroup.value.brand,familyMachine:this.formGroup.value.familyMachine,price:this.formGroup.value.price,purchaseDate:this.formGroup.value.purchaseDate,periodAmortisation:this.formGroup.value.periodAmortisation,endDateAmortisation:this.formGroup.value.endDateAmortisation},this.idMachineOnUpdate,rn.MACHINE_URL).subscribe(function(t){e.growlService.successNotification(e.translate.instant(_.a.SUCCESS_OPERATION)),e.router.navigateByUrl(rn.URI_MACHINES)}):(this.growlService.ErrorNotification(this.translate.instant(rn.FAIL_FORM_VALIDATION)),this.validationService.validateAllFormFields(this.formGroup))},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe()},e.prototype.ngOnInit=function(){var e=this;if(this.userService.getAllUserWithoutState().subscribe(function(t){e.listUsers=t.data}),this.getCurrency(),this.operationService.getJavaGenericService().getEntityList().subscribe(function(t){t&&t.length>0&&(e.listOperations=t)}),this.idMachineOnUpdate>0)this.isUpdateMode=!0,this.subscription$=this.machineService.getJavaGenericService().getEntityById(this.idMachineOnUpdate,rn.MACHINE_URL).subscribe(function(t){e.machine=t,e.machine.operations.forEach(function(t){e.machineOperations.push(t)}),e.machine.machineImage&&e.getBase64File(e.machine.machineImage),e.formGroup.patchValue({reference:e.machine.reference,description:e.machine.description,stateMachine:e.machine.stateMachine,IdResponsible:e.machine.responsibleId,costPerHour:e.machine.costPerHour,machineImage:e.machine.machineImage,typeMachine:e.machine.typeMachine,serialNumber:e.machine.serialNumber,brand:e.machine.brand,familyMachine:e.machine.familyMachine,price:e.machine.price,purchaseDate:new Date(e.machine.purchaseDate),endDateAmortisation:new Date(e.machine.endDateAmortisation),periodAmortisation:e.machine.periodAmortisation}),e.rowCost.push(e.formGroup.value)}),this.subscription$=this.machineSpareService.getJavaGenericService().getEntityById(this.idMachineOnUpdate,On.GET_SPARE_BY_MACHINE).subscribe(function(t){t.forEach(function(t){e.itemService.getById(t.productId).subscribe(function(e){t.description=e.Description+" "+e.Code})}),e.rowSparesList=t});else{this.rowCost.push({});var t=new Rn;this.formGroup=new v.FormGroup({reference:new v.FormControl(t.reference,v.Validators.required),description:new v.FormControl(t.description,v.Validators.required),IdResponsible:new v.FormControl("",v.Validators.required),costPerHour:new v.FormControl(t.costPerHour,v.Validators.required),machineImage:new v.FormControl(""),brand:new v.FormControl(""),serialNumber:new v.FormControl(""),typeMachine:new v.FormControl(""),familyMachine:new v.FormControl(t.familyMachine,v.Validators.required),machineSpare:new v.FormControl(this.rowSparesList),price:new v.FormControl("",v.Validators.required),purchaseDate:new v.FormControl("",v.Validators.required),endDateAmortisation:new v.FormControl("",v.Validators.required),periodAmortisation:new v.FormControl("",v.Validators.required)}),this.formGroup.patchValue({purchaseDate:new Date}),this.getLastReference()}},e.prototype.save=function(){this.changePicture&&this.machineImageBase64Picture&&this.machineImageFile?this.saveMachineImage(this.machineImageBase64Picture,this.machineImageFile):this.saveMachine()},e.prototype.saveMachine=function(){this.isUpdateMode?this.editMachineClick():this.saveMachineClick()},e.prototype.calculateCost=function(){var e=this.formGroup.value.price,t=this.formGroup.value.periodAmortisation,n=this.formGroup.value.purchaseDate;t&&n&&this.formGroup.controls[rn.END_DATE_AMORTISATION].setValue(new Date(n.getFullYear()+t,n.getMonth(),n.getDay())),t&&n&&e&&(this.formGroup.controls[rn.COST].patchValue((e/t/365/24).toFixed(4)),this.rowCost=[],this.rowCost.push(this.formGroup.value))},e.prototype.editCostHandler=function(e){e.sender.editRow(e.rowIndex,this.formGroup),this.btnEditVisible=!0},e.prototype.cancelCostHandler=function(e){this.closeCostEditor(e.sender,e.rowIndex),this.btnEditVisible=!0},e.prototype.closeCostEditor=function(e,t){void 0===t&&(t=this.editedRowIndex),void 0!==t&&e.closeRow(t)},e.prototype.saveCostHandler=function(e){var t=e.sender,n=e.rowIndex;this.calculateCost(),t.closeRow(n)},e.prototype.getLastReference=function(){var e=this;this.machineService.callService(wt.a.GET,"get-last-reference").subscribe(function(t){e.machineReference=t,e.formGroup.controls.reference.patchValue(t),e.formGroup.controls.reference.disable()})},e.prototype.getCurrency=function(){var e=this;this.companyService.getCurrentCompanyWithContactPictures().subscribe(function(t){e.currency=t.IdCurrencyNavigation.Code})},e.prototype.checkPositive=function(e,t){var n=+e.key;(t.value+(isNaN(n)?"":n.toString())).match("[0-9]+")||e.preventDefault()},e}(),Un=i["\u0275crt"]({encapsulation:0,styles:[["input[type=file][_ngcontent-%COMP%]{display:none}.imgSize[_ngcontent-%COMP%]{border:3px groove #b4d78a4d;padding:3px;height:200px}@media only screen and (min-width:1450px){.imgSize[_ngcontent-%COMP%]{width:200px}#imagemachinediv[_ngcontent-%COMP%]{height:85%}}@media screen and (max-width:1450px) and (min-width:1200px){.imgSize[_ngcontent-%COMP%]{width:150px}#imagemachinediv[_ngcontent-%COMP%]{height:75%}}@media screen and (min-width:992px) and (max-width:1200px){.imgSize[_ngcontent-%COMP%]{width:120px}#imagemachinediv[_ngcontent-%COMP%]{height:60%}}@media screen and (max-width:992px){.imgSize[_ngcontent-%COMP%]{width:200px}}"]],data:{}});function Fn(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],null,function(e,t){e(t,6,0,t.context.$implicit.description)})}function Gn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,32,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](2,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](8,0,null,null,19,"kendo-combobox",[["class","form-control"],["formControlName","stateMachine"]],[[2,"k-widget",null],[2,"k-combobox",null],[2,"k-header",null],[2,"k-combobox-clearable",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,st.g,st.b)),i["\u0275prd"](6144,null,dt.m,null,[dt.c]),i["\u0275prd"](256,null,b.b,"kendo.combobox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](16,770048,null,6,dt.c,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.ChangeDetectorRef,i.Renderer2,i.ElementRef,[2,dt.E]],{data:[0,"data"],textField:[1,"textField"],valueField:[2,"valueField"],valuePrimitive:[3,"valuePrimitive"],filterable:[4,"filterable"]},null),i["\u0275qud"](335544320,17,{template:0}),i["\u0275qud"](335544320,18,{headerTemplate:0}),i["\u0275qud"](335544320,19,{footerTemplate:0}),i["\u0275qud"](335544320,20,{noDataTemplate:0}),i["\u0275qud"](335544320,21,{groupTemplate:0}),i["\u0275qud"](335544320,22,{fixedGroupTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.c]),i["\u0275did"](24,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](26,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](29,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](30,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){var n=t.component;e(t,16,0,n.typesList,"name","value",!0,!0),e(t,24,0,"stateMachine"),e(t,30,0,n.formGroup.controls.stateMachine)},function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("STATE"))),e(t,8,1,[i["\u0275nov"](t,16).widgetClasses,i["\u0275nov"](t,16).widgetClasses,i["\u0275nov"](t,16).widgetClasses,i["\u0275nov"](t,16).clearable,i["\u0275nov"](t,16).dir,i["\u0275nov"](t,26).ngClassUntouched,i["\u0275nov"](t,26).ngClassTouched,i["\u0275nov"](t,26).ngClassPristine,i["\u0275nov"](t,26).ngClassDirty,i["\u0275nov"](t,26).ngClassValid,i["\u0275nov"](t,26).ngClassInvalid,i["\u0275nov"](t,26).ngClassPending])})}function qn(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],null,function(e,t){e(t,6,0,t.context.$implicit.FullName)})}function Vn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"img",[["alt","Illustration des probl\xe8mes de suddation"],["border","0"],["class","img-upload"],["id","machineImage"],["style","height: 100%;width: 100%;"]],[[8,"src",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e.parent,392).click()&&o),o},null,null))],null,function(e,t){e(t,0,0,t.component.pictureMachineSrc||"../../../assets/image/machine_place_holder.png")})}function Wn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"img",[["alt","Illustration des probl\xe8mes de suddation"],["border","0"],["class","img-upload"],["id","updateMachineImage"],["style","height: 100%;width: 100%;"]],[[8,"src",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e.parent,392).click()&&o),o},null,null))],null,function(e,t){var n=t.component;e(t,0,0,n.changePicture?n.pictureMachineSrc:null!==n.imageData?n.sanitizer.bypassSecurityTrustResourceUrl(n.imageData):"../../../assets/image/machine_place_holder.png")})}function Yn(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](1,0,null,null,8,"button",[["class","noPadding btn-Add k-button"],["kendoGridAddCommand",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[2,"k-grid-add-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,2).click(n)&&o),o},null,null)),i["\u0275did"](2,9125888,null,0,m.a,[m._3,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](4,0,null,null,0,"i",[["class","fa fa-plus-circle fa-lg AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](6,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](7,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){e(t,2,0)},function(e,t){e(t,1,0,i["\u0275nov"](t,2).classButton,i["\u0275nov"](t,2).classDisabled,i["\u0275nov"](t,2).classPrimary,i["\u0275nov"](t,2).isFlat,i["\u0275nov"](t,2).isBare,i["\u0275nov"](t,2).isOutline,i["\u0275nov"](t,2).classActive,i["\u0275nov"](t,2).dir,i["\u0275nov"](t,2).commandClass),e(t,7,0,i["\u0275unv"](t,7,0,i["\u0275nov"](t,8).transform("ADD_SPARE_PART")))})}function Xn(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n\n                        "])),(e()(),i["\u0275eld"](1,0,null,null,15,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,3).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,3).onReset()&&o),o},null,null)),i["\u0275did"](2,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](3,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](5,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-item-dropdown",[],null,[[null,"Selected"]],function(e,t,n){var i=!0;return"Selected"===t&&(i=!1!==e.component.itemSelectProductLineForm(n)&&i),i},Cn.b,Cn.a)),i["\u0275did"](8,770048,null,0,xn.a,[l.a,oe.a,re.a,i.ElementRef,ae.a],{itemForm:[0,"itemForm"],parentViewContainerRef:[1,"parentViewContainerRef"]},{Selected:"Selected"}),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](11,0,[["anchorProductId",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](13,0,null,null,2,"app-control-message-grid-cell",[["controlName","IdItem"]],null,null,null,ce.b,ce.a)),i["\u0275did"](14,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275ted"](-1,null,["\n\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){var n=t.component;e(t,3,0,n.productLineFormGroup),e(t,8,0,n.productLineFormGroup,n.viewRef),e(t,14,0,n.productLineFormGroup,"IdItem",i["\u0275nov"](t,11))},function(e,t){e(t,1,0,i["\u0275nov"](t,5).ngClassUntouched,i["\u0275nov"](t,5).ngClassTouched,i["\u0275nov"](t,5).ngClassPristine,i["\u0275nov"](t,5).ngClassDirty,i["\u0275nov"](t,5).ngClassValid,i["\u0275nov"](t,5).ngClassInvalid,i["\u0275nov"](t,5).ngClassPending)})}function Zn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](1,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],format:[3,"format"],filter:[4,"filter"],filterable:[5,"filterable"]},null),i["\u0275qud"](603979776,59,{headerTemplates:1}),i["\u0275qud"](335544320,60,{footerTemplate:0}),i["\u0275qud"](603979776,61,{columnMenuTemplates:1}),i["\u0275qud"](335544320,62,{template:0}),i["\u0275qud"](335544320,63,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,64,{groupFooterTemplate:0}),i["\u0275qud"](335544320,65,{editTemplate:0}),i["\u0275qud"](335544320,66,{filterCellTemplate:0}),i["\u0275qud"](335544320,67,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[53,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n\n                      "])),(e()(),i["\u0275and"](0,null,null,1,null,Xn)),i["\u0275did"](15,16384,[[65,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n                    "]))],function(e,t){e(t,1,0,i["\u0275unv"](t,1,0,i["\u0275nov"](t,11).transform(t.context.$implicit.title)),t.context.$implicit._width,t.context.$implicit.field,t.context.$implicit.format,t.context.$implicit.filter,t.context.$implicit.filterable)},null)}function Jn(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](1,0,null,null,5,"button",[["kendoGridEditCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-edit-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,3).click(n)&&o),o},null,null)),i["\u0275did"](2,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](3,9388032,null,0,m._2,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](5,0,null,null,0,"i",[["aria-hidden","true"],["class","las la-pen cursor-pointer edit-pencil la-lg mx-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](9,0,null,null,5,"button",[["class","btnKendoGrid"],["kendoGridRemoveCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-remove-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,11).click(n)&&o),o},null,null)),i["\u0275did"](10,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](11,9388032,null,0,m._82,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](13,0,null,null,0,"i",[["aria-hidden","true"],["class","text-danger cursor-pointer fa fa-trash-o la-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](17,0,null,null,4,"button",[["class","btnKendoGrid"],["kendoGridSaveCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-save-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,19).click(n)&&o),o},null,null)),i["\u0275did"](18,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](19,9388032,null,0,m._88,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](21,0,null,null,0,"span",[["class","fa fa-save"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](24,0,null,null,4,"button",[["class","btnKendoGrid"],["kendoGridCancelCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-cancel-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,26).click(n)&&o),o},null,null)),i["\u0275did"](25,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](26,9388032,null,0,m.l,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](28,0,null,null,0,"span",[["class","fa fa-close"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){e(t,3,0),e(t,11,0),e(t,19,0),e(t,26,0)},function(e,t){e(t,1,0,i["\u0275nov"](t,3).classButton,i["\u0275nov"](t,3).classDisabled,i["\u0275nov"](t,3).classPrimary,i["\u0275nov"](t,3).isFlat,i["\u0275nov"](t,3).isBare,i["\u0275nov"](t,3).isOutline,i["\u0275nov"](t,3).classActive,i["\u0275nov"](t,3).dir,i["\u0275nov"](t,3).visible,i["\u0275nov"](t,3).commandClass),e(t,9,0,i["\u0275nov"](t,11).classButton,i["\u0275nov"](t,11).classDisabled,i["\u0275nov"](t,11).classPrimary,i["\u0275nov"](t,11).isFlat,i["\u0275nov"](t,11).isBare,i["\u0275nov"](t,11).isOutline,i["\u0275nov"](t,11).classActive,i["\u0275nov"](t,11).dir,i["\u0275nov"](t,11).visible,i["\u0275nov"](t,11).commandClass),e(t,17,0,i["\u0275nov"](t,19).classButton,i["\u0275nov"](t,19).classDisabled,i["\u0275nov"](t,19).classPrimary,i["\u0275nov"](t,19).isFlat,i["\u0275nov"](t,19).isBare,i["\u0275nov"](t,19).isOutline,i["\u0275nov"](t,19).classActive,i["\u0275nov"](t,19).dir,i["\u0275nov"](t,19).visible,i["\u0275nov"](t,19).commandClass),e(t,24,0,i["\u0275nov"](t,26).classButton,i["\u0275nov"](t,26).classDisabled,i["\u0275nov"](t,26).classPrimary,i["\u0275nov"](t,26).isFlat,i["\u0275nov"](t,26).isBare,i["\u0275nov"](t,26).isOutline,i["\u0275nov"](t,26).classActive,i["\u0275nov"](t,26).dir,i["\u0275nov"](t,26).visible,i["\u0275nov"](t,26).commandClass)})}function Kn(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,523,"div",[["class","card h-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,5,"div",[["class","col-sm-12 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](7,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](12,0,null,null,478,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](14,0,null,null,475,"form",[["class","form-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,16).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,16).onReset()&&o),o},null,null)),i["\u0275did"](15,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](16,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](18,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n      "])),(e()(),i["\u0275eld"](20,0,null,null,375,"div",[["class","col-lg-12 col-sm-12 co\n      l-md-12 mr-5"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](22,0,null,null,372,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](24,0,null,null,352,"div",[["class","col-lg-10 col-sm-12 col-md-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](26,0,null,null,349,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](28,0,null,null,18,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](30,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](31,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](33,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](36,0,null,null,5,"input",[["class","form-control"],["disabled",""],["formControlName","reference"],["name","reference"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,37)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,37).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,37)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,37)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](37,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](39,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](41,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](43,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](44,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](48,0,null,null,16,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](50,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](51,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](54,0,null,null,5,"input",[["class","form-control"],["formControlName","brand"],["name","brand"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,55)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,55).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,55)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,55)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](55,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](57,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](59,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](61,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](62,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](66,0,null,null,31,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](68,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](69,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](72,0,null,null,20,"kendo-dropdownlist",[["formControlName","typeMachine"],["style","width: 100%; !important;"],["textField","enumText"],["valueField","enumValue"]],[[2,"k-widget",null],[2,"k-dropdown",null],[2,"k-header",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,st.i,st.d)),i["\u0275prd"](6144,null,dt.m,null,[dt.i]),i["\u0275prd"](256,null,b.b,"kendo.dropdownlist",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](80,770048,null,7,dt.i,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.Renderer2,i.ElementRef,i.ChangeDetectorRef,[2,dt.E]],{data:[0,"data"],textField:[1,"textField"],valueField:[2,"valueField"],valuePrimitive:[3,"valuePrimitive"]},null),i["\u0275qud"](335544320,1,{itemTemplate:0}),i["\u0275qud"](335544320,2,{groupTemplate:0}),i["\u0275qud"](335544320,3,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,4,{valueTemplate:0}),i["\u0275qud"](335544320,5,{headerTemplate:0}),i["\u0275qud"](335544320,6,{footerTemplate:0}),i["\u0275qud"](335544320,7,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.i]),i["\u0275did"](89,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](91,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](94,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](95,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](99,0,null,null,16,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](101,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](102,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](105,0,null,null,5,"input",[["class","form-control"],["formControlName","serialNumber"],["name","serialNumber"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,106)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,106).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,106)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,106)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](106,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](108,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](110,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](112,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](113,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](117,0,null,null,18,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](119,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](120,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](122,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](125,0,null,null,5,"input",[["class","form-control"],["formControlName","description"],["name","description"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,126)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,126).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,126)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,126)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](126,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](128,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](130,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](132,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](133,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](137,0,null,null,33,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](139,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](140,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](143,0,null,null,26,"kendo-multiselect",[],[[2,"k-widget",null],[2,"k-multiselect",null],[2,"k-header",null],[1,"dir",0],[2,"k-state-focused",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var i=!0;return"ngModelChange"===t&&(i=!1!==(e.component.machineOperations=n)&&i),i},st.j,st.e)),i["\u0275prd"](6144,null,dt.m,null,[dt.u]),i["\u0275prd"](256,null,b.b,"kendo.multiselect",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](151,7323648,null,9,dt.u,[b.c,y.g,dt.g,dt.A,dt.w,dt.h,i.ChangeDetectorRef,i.KeyValueDiffers,i.Renderer2,i.ElementRef,i.NgZone,[2,dt.E]],{data:[0,"data"],valueField:[1,"valueField"],textField:[2,"textField"]},null),i["\u0275qud"](335544320,8,{template:0}),i["\u0275qud"](335544320,9,{customItemTemplate:0}),i["\u0275qud"](335544320,10,{groupTemplate:0}),i["\u0275qud"](335544320,11,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,12,{headerTemplate:0}),i["\u0275qud"](335544320,13,{footerTemplate:0}),i["\u0275qud"](335544320,14,{tagTemplate:0}),i["\u0275qud"](335544320,15,{groupTagTemplate:0}),i["\u0275qud"](335544320,16,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.u]),i["\u0275did"](162,671744,null,0,v.NgModel,[[2,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),i["\u0275pod"](163,{standalone:0}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](165,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Fn)),i["\u0275did"](168,16384,[[8,4]],0,dt.p,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Gn)),i["\u0275did"](173,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](175,0,null,null,35,"div",[["class","col-lg-4 col-md-12 col-sm-12"],["style","margin-bottom:15px"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](177,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](178,null,[" ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](180,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](183,0,null,null,23,"kendo-dropdownlist",[["class","form-control"],["formControlName","IdResponsible"]],[[2,"k-widget",null],[2,"k-dropdown",null],[2,"k-header",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"valueChange"]],function(e,t,n){var i=!0;return"valueChange"===t&&(i=!1!==(e.component.selectedUsers=n)&&i),i},st.i,st.d)),i["\u0275prd"](6144,null,dt.m,null,[dt.i]),i["\u0275prd"](256,null,b.b,"kendo.dropdownlist",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](191,770048,null,7,dt.i,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.Renderer2,i.ElementRef,i.ChangeDetectorRef,[2,dt.E]],{data:[0,"data"],value:[1,"value"],textField:[2,"textField"],valueField:[3,"valueField"],valuePrimitive:[4,"valuePrimitive"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,23,{itemTemplate:0}),i["\u0275qud"](335544320,24,{groupTemplate:0}),i["\u0275qud"](335544320,25,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,26,{valueTemplate:0}),i["\u0275qud"](335544320,27,{headerTemplate:0}),i["\u0275qud"](335544320,28,{footerTemplate:0}),i["\u0275qud"](335544320,29,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.i]),i["\u0275did"](200,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](202,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,qn)),i["\u0275did"](205,16384,[[23,4]],0,dt.p,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](208,0,null,null,1,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](209,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](212,0,null,null,33,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](214,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](215,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](217,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](220,0,null,null,20,"kendo-dropdownlist",[["formControlName","familyMachine"],["style","width: 100%; !important;"],["textField","enumText"],["valueField","enumValue"]],[[2,"k-widget",null],[2,"k-dropdown",null],[2,"k-header",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,st.i,st.d)),i["\u0275prd"](6144,null,dt.m,null,[dt.i]),i["\u0275prd"](256,null,b.b,"kendo.dropdownlist",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](228,770048,null,7,dt.i,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.Renderer2,i.ElementRef,i.ChangeDetectorRef,[2,dt.E]],{data:[0,"data"],textField:[1,"textField"],valueField:[2,"valueField"],valuePrimitive:[3,"valuePrimitive"]},null),i["\u0275qud"](335544320,30,{itemTemplate:0}),i["\u0275qud"](335544320,31,{groupTemplate:0}),i["\u0275qud"](335544320,32,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,33,{valueTemplate:0}),i["\u0275qud"](335544320,34,{headerTemplate:0}),i["\u0275qud"](335544320,35,{footerTemplate:0}),i["\u0275qud"](335544320,36,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.i]),i["\u0275did"](237,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](239,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](242,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](243,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](247,0,null,null,20,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](249,0,null,null,5,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"],[null,"click"]],function(e,t,n){var o=!0;return"focusin"===t&&(o=!1!==i["\u0275nov"](e,250).onMouseEnter()&&o),"mouseenter"===t&&(o=!1!==i["\u0275nov"](e,250).onMouseEnter()&&o),"focusout"===t&&(o=!1!==i["\u0275nov"](e,250).onMouseLeave()&&o),"mouseleave"===t&&(o=!1!==i["\u0275nov"](e,250).onMouseLeave()&&o),"click"===t&&(o=!1!==i["\u0275nov"](e,250).onClick()&&o),o},null,null)),i["\u0275did"](250,737280,null,0,Sn.b,[[2,Sn.d],i.ElementRef,i.ComponentFactoryResolver,i.ApplicationRef,i.Injector],{tooltipValue:[0,"tooltipValue"]},null),(e()(),i["\u0275ted"](251,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](253,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](256,0,null,null,6,"input",[["class","form-control text-right"],["formControlName","price"],["min","1"],["name","price"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,257)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,257).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,257)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,257)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,258).onChange(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,258).onChange(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,258).onTouched()&&o),"ngModelChange"===t&&(o=!1!==r.calculateCost()&&o),o},null,null)),i["\u0275did"](257,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](258,16384,null,0,v["\u0275bc"],[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v["\u0275bc"]]),i["\u0275did"](260,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](262,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](264,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](265,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](269,0,null,null,31,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](271,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](272,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](274,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](277,0,null,null,18,"kendo-datepicker",[["class","form-control"],["formControlName","purchaseDate"],["name","purchaseDate"]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"valueChange"]],function(e,t,n){var i=!0;return"valueChange"===t&&(i=!1!==e.component.calculateCost()&&i),i},Tn.f,Tn.b)),i["\u0275prd"](256,null,b.b,"kendo.datepicker",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,En.X,En.X,[]),i["\u0275did"](281,770048,null,8,En.o,[i.NgZone,b.c,i.ChangeDetectorRef,y.g,i.ElementRef,i.Renderer2,i.Injector,En.X,[2,En._2]],{format:[0,"format"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,37,{cellTemplate:0}),i["\u0275qud"](335544320,38,{monthCellTemplate:0}),i["\u0275qud"](335544320,39,{yearCellTemplate:0}),i["\u0275qud"](335544320,40,{decadeCellTemplate:0}),i["\u0275qud"](335544320,41,{centuryCellTemplate:0}),i["\u0275qud"](335544320,42,{weekNumberTemplate:0}),i["\u0275qud"](335544320,43,{headerTitleTemplate:0}),i["\u0275qud"](335544320,44,{navigationItemTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[En.o]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[En.o]),i["\u0275did"](292,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](294,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](297,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](298,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](302,0,null,null,22,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](304,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](305,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](307,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](310,0,null,null,9,"kendo-numerictextbox",[["class","form-control text-right"],["formControlName","periodAmortisation"],["name","periodAmortisation"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown"],[null,"valueChange"]],function(e,t,n){var o=!0,r=e.component;return"keydown"===t&&(o=!1!==r.checkPositive(n,i["\u0275nov"](e,313))&&o),"valueChange"===t&&(o=!1!==r.calculateCost()&&o),o},_n.e,_n.b)),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](313,770048,[["inputAmortisation",4]],0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{autoCorrect:[0,"autoCorrect"],max:[1,"max"],min:[2,"min"]},{valueChange:"valueChange"}),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275did"](316,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](318,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n               "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](321,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](322,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n         "])),(e()(),i["\u0275ted"](-1,null,["\n\n         "])),(e()(),i["\u0275eld"](326,0,null,null,29,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](328,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](329,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](332,0,null,null,18,"kendo-datepicker",[["class","form-control"],["formControlName","endDateAmortisation"],["name","endDateAmortisation"]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tn.f,Tn.b)),i["\u0275prd"](256,null,b.b,"kendo.datepicker",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,En.X,En.X,[]),i["\u0275did"](336,770048,null,8,En.o,[i.NgZone,b.c,i.ChangeDetectorRef,y.g,i.ElementRef,i.Renderer2,i.Injector,En.X,[2,En._2]],{readonly:[0,"readonly"],format:[1,"format"]},null),i["\u0275qud"](335544320,45,{cellTemplate:0}),i["\u0275qud"](335544320,46,{monthCellTemplate:0}),i["\u0275qud"](335544320,47,{yearCellTemplate:0}),i["\u0275qud"](335544320,48,{decadeCellTemplate:0}),i["\u0275qud"](335544320,49,{centuryCellTemplate:0}),i["\u0275qud"](335544320,50,{weekNumberTemplate:0}),i["\u0275qud"](335544320,51,{headerTitleTemplate:0}),i["\u0275qud"](335544320,52,{navigationItemTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[En.o]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[En.o]),i["\u0275did"](347,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](349,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](352,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](353,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](357,0,null,null,17,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](359,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](360,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](363,0,null,null,6,"input",[["class","form-control text-right"],["formControlName","costPerHour"],["name","costPerHour"],["type","number"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,364)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,364).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,364)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,364)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,365).onChange(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,365).onChange(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,365).onTouched()&&o),o},null,null)),i["\u0275did"](364,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](365,16384,null,0,v["\u0275bc"],[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v["\u0275bc"]]),i["\u0275did"](367,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](369,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](371,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](372,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](379,0,null,null,14,"div",[["class","col-lg-2 col-sm-4 col-md-5 d-flex justify-content-center"],["id","imagemachinediv"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](381,0,[["fileInput",1]],null,9,"label",[["class","img-border  d-flex justify-content-center"],["for","machineImage"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Vn)),i["\u0275did"](384,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Wn)),i["\u0275did"](387,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](389,0,null,null,0,"i",[["class","fa fa-camera fa-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](392,0,[["fileInput",1]],null,0,"input",[["accept","image/x-png,image/gif,image/jpeg"],["type","file"]],null,[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.uploadPictureFile(n)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n\n      "])),(e()(),i["\u0275eld"](397,0,null,null,91,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](399,0,null,null,10,"ul",[["class","nav nav-tabs"],["role","tablist"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](401,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](403,0,null,null,4,"a",[["aria-controls","home1"],["aria-selected","false"],["class","nav-link"],["data-toggle","tab"],["href","#home1"],["role","tab"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](405,0,null,null,0,"i",[["class","cui-list"]],null,null,null,null,null)),(e()(),i["\u0275ted"](406,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](411,0,null,null,76,"div",[["class","tab-content border-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](413,0,null,null,73,"div",[["class","tab-pane fade  px-0 pt-0 active show"],["id","home1"],["role","tabpanel"]],null,null,null,null,null)),i["\u0275did"](414,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](415,{"min-height":0,"max-height":1,"overflow-y":2}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](417,0,null,null,68,"div",[["class","card  mt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](419,0,null,null,65,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](421,0,null,null,62,"div",[["class","card-body p-3"],["style","min-height: fit-content;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](423,0,null,null,59,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"edit"],[null,"cancel"],[null,"save"],[null,"remove"],[null,"add"]],function(e,t,n){var i=!0,o=e.component;return"edit"===t&&(i=!1!==o.editHandler(n)&&i),"cancel"===t&&(i=!1!==o.cancelHandler(n)&&i),"save"===t&&(i=!1!==o.saveHandler(n)&&i),"remove"===t&&(i=!1!==o.removeSpareHandler(n)&&i),"add"===t&&(i=!1!==o.addHandler(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](455,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],skip:[1,"skip"],sort:[2,"sort"],filter:[3,"filter"],filterable:[4,"filterable"],sortable:[5,"sortable"],reorderable:[6,"reorderable"],columnMenu:[7,"columnMenu"]},{edit:"edit",cancel:"cancel",save:"save",remove:"remove",add:"add"}),i["\u0275qud"](603979776,53,{columns:1}),i["\u0275qud"](603979776,54,{detailTemplateChildren:1}),i["\u0275qud"](603979776,55,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,56,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,57,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,58,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](0,null,null,1,null,Yn)),i["\u0275did"](465,16384,[[57,4]],0,m._110,[[2,i.TemplateRef]],{position:[0,"position"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Zn)),i["\u0275did"](468,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](470,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](471,49152,null,4,m.J,[[8,null]],{title:[0,"title"]},null),i["\u0275qud"](603979776,68,{headerTemplates:1}),i["\u0275qud"](335544320,69,{footerTemplate:0}),i["\u0275qud"](603979776,70,{columnMenuTemplates:1}),i["\u0275qud"](335544320,71,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[53,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](0,null,null,1,null,Jn)),i["\u0275did"](480,16384,[[71,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](493,0,null,null,29,"div",[["class","fixed-card-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](495,0,null,null,26,"div",[["class","footerStyle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](497,0,null,null,23,"footer",[["class","app-footer ml-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](499,0,null,null,20,"div",[["class","w-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](501,0,null,null,17,"div",[["class","d-flex justify-content-end p-3 flex-align footer-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](503,0,null,null,8,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,504).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&o),o},null,null)),i["\u0275did"](504,671744,null,0,T.RouterLinkWithHref,[T.Router,T.ActivatedRoute,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](506,0,null,null,4,"span",[["class","btn btn-sm btn-back-to-list btn-primary"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](508,0,null,null,0,"i",[["class","fa fa-chevron-circle-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](509,null,["\n                ","\n              "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](513,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.save()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](515,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](516,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,16,0,n.formGroup),e(t,39,0,"reference",""),e(t,44,0,n.formGroup.controls.reference),e(t,57,0,"brand"),e(t,62,0,n.formGroup.controls.brand),e(t,80,0,n.typeMachineList,"enumText","enumValue",!0),e(t,89,0,"typeMachine"),e(t,95,0,n.formGroup.controls.typeMachine),e(t,108,0,"serialNumber"),e(t,113,0,n.formGroup.controls.serialNumber),e(t,128,0,"description"),e(t,133,0,n.formGroup.controls.description),e(t,151,0,n.listOperations,"id","description"),e(t,162,0,n.machineOperations,e(t,163,0,!0)),e(t,173,0,n.isUpdateMode),e(t,191,0,n.listUsers,n.selectedUsers,"FullName","Id",!0),e(t,200,0,"IdResponsible"),e(t,209,0,n.formGroup.controls.IdResponsible),e(t,228,0,n.familiesList,"enumText","enumValue",!0),e(t,237,0,"familyMachine"),e(t,243,0,n.formGroup.controls.familyMachine),e(t,250,0,i["\u0275inlineInterpolate"](1,"",n.currency,"")),e(t,260,0,"price"),e(t,265,0,n.formGroup.controls.price),e(t,281,0,"dd-MMM-yyyy"),e(t,292,0,"purchaseDate"),e(t,298,0,n.formGroup.controls.purchaseDate),e(t,313,0,!0,100,0),e(t,316,0,"periodAmortisation"),e(t,322,0,n.formGroup.controls.periodAmortisation),e(t,336,0,!0,"dd-MMM-yyyy"),e(t,347,0,"endDateAmortisation"),e(t,353,0,n.formGroup.controls.endDateAmortisation),e(t,367,0,"costPerHour"),e(t,372,0,n.formGroup.controls.costPerHour),e(t,384,0,!n.isUpdateMode),e(t,387,0,n.isUpdateMode),e(t,414,0,e(t,415,0,"400px","400px","auto")),e(t,455,0,n.rowSparesList,n.gridSettingsSpares.state.skip,n.gridSettingsSpares.state.sort,n.gridSettingsSpares.state.filter,"menu",!0,!0,!0),e(t,465,0,"bottom"),e(t,468,0,n.gridSettingsSpares.columnsConfig),e(t,471,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,471,0,i["\u0275nov"](t,476).transform("ACTION")),"")),e(t,504,0,"/main/settings/manufacturing/machine")},function(e,t){var n=t.component;e(t,7,0,i["\u0275unv"](t,7,0,i["\u0275nov"](t,8).transform(n.isUpdateMode?"EDIT_MACHINE":"SAVE_MACHINE"))),e(t,14,0,i["\u0275nov"](t,18).ngClassUntouched,i["\u0275nov"](t,18).ngClassTouched,i["\u0275nov"](t,18).ngClassPristine,i["\u0275nov"](t,18).ngClassDirty,i["\u0275nov"](t,18).ngClassValid,i["\u0275nov"](t,18).ngClassInvalid,i["\u0275nov"](t,18).ngClassPending),e(t,31,0,i["\u0275unv"](t,31,0,i["\u0275nov"](t,32).transform("REFERENCE_MACHINE"))),e(t,36,0,i["\u0275nov"](t,41).ngClassUntouched,i["\u0275nov"](t,41).ngClassTouched,i["\u0275nov"](t,41).ngClassPristine,i["\u0275nov"](t,41).ngClassDirty,i["\u0275nov"](t,41).ngClassValid,i["\u0275nov"](t,41).ngClassInvalid,i["\u0275nov"](t,41).ngClassPending),e(t,51,0,i["\u0275unv"](t,51,0,i["\u0275nov"](t,52).transform("BRAND_MACHINE"))),e(t,54,0,i["\u0275nov"](t,59).ngClassUntouched,i["\u0275nov"](t,59).ngClassTouched,i["\u0275nov"](t,59).ngClassPristine,i["\u0275nov"](t,59).ngClassDirty,i["\u0275nov"](t,59).ngClassValid,i["\u0275nov"](t,59).ngClassInvalid,i["\u0275nov"](t,59).ngClassPending),e(t,69,0,i["\u0275unv"](t,69,0,i["\u0275nov"](t,70).transform("TYPE_MACHINE"))),e(t,72,1,[i["\u0275nov"](t,80).widgetClasses,i["\u0275nov"](t,80).widgetClasses,i["\u0275nov"](t,80).widgetClasses,i["\u0275nov"](t,80).dir,i["\u0275nov"](t,91).ngClassUntouched,i["\u0275nov"](t,91).ngClassTouched,i["\u0275nov"](t,91).ngClassPristine,i["\u0275nov"](t,91).ngClassDirty,i["\u0275nov"](t,91).ngClassValid,i["\u0275nov"](t,91).ngClassInvalid,i["\u0275nov"](t,91).ngClassPending]),e(t,102,0,i["\u0275unv"](t,102,0,i["\u0275nov"](t,103).transform("SERIAL_NUMBER_MACHINE"))),e(t,105,0,i["\u0275nov"](t,110).ngClassUntouched,i["\u0275nov"](t,110).ngClassTouched,i["\u0275nov"](t,110).ngClassPristine,i["\u0275nov"](t,110).ngClassDirty,i["\u0275nov"](t,110).ngClassValid,i["\u0275nov"](t,110).ngClassInvalid,i["\u0275nov"](t,110).ngClassPending),e(t,120,0,i["\u0275unv"](t,120,0,i["\u0275nov"](t,121).transform("DESCRIPTION_MACHINE"))),e(t,125,0,i["\u0275nov"](t,130).ngClassUntouched,i["\u0275nov"](t,130).ngClassTouched,i["\u0275nov"](t,130).ngClassPristine,i["\u0275nov"](t,130).ngClassDirty,i["\u0275nov"](t,130).ngClassValid,i["\u0275nov"](t,130).ngClassInvalid,i["\u0275nov"](t,130).ngClassPending),e(t,140,0,i["\u0275unv"](t,140,0,i["\u0275nov"](t,141).transform("OPERATION"))),e(t,143,1,[i["\u0275nov"](t,151).widgetClasses,i["\u0275nov"](t,151).widgetClasses,i["\u0275nov"](t,151).widgetClasses,i["\u0275nov"](t,151).dir,i["\u0275nov"](t,151).focusedClass,i["\u0275nov"](t,151).disabledClass,i["\u0275nov"](t,165).ngClassUntouched,i["\u0275nov"](t,165).ngClassTouched,i["\u0275nov"](t,165).ngClassPristine,i["\u0275nov"](t,165).ngClassDirty,i["\u0275nov"](t,165).ngClassValid,i["\u0275nov"](t,165).ngClassInvalid,i["\u0275nov"](t,165).ngClassPending]),e(t,178,0,i["\u0275unv"](t,178,0,i["\u0275nov"](t,179).transform("RESPONSIBLE"))),e(t,183,1,[i["\u0275nov"](t,191).widgetClasses,i["\u0275nov"](t,191).widgetClasses,i["\u0275nov"](t,191).widgetClasses,i["\u0275nov"](t,191).dir,i["\u0275nov"](t,202).ngClassUntouched,i["\u0275nov"](t,202).ngClassTouched,i["\u0275nov"](t,202).ngClassPristine,i["\u0275nov"](t,202).ngClassDirty,i["\u0275nov"](t,202).ngClassValid,i["\u0275nov"](t,202).ngClassInvalid,i["\u0275nov"](t,202).ngClassPending]),e(t,215,0,i["\u0275unv"](t,215,0,i["\u0275nov"](t,216).transform("FAMILY"))),e(t,220,1,[i["\u0275nov"](t,228).widgetClasses,i["\u0275nov"](t,228).widgetClasses,i["\u0275nov"](t,228).widgetClasses,i["\u0275nov"](t,228).dir,i["\u0275nov"](t,239).ngClassUntouched,i["\u0275nov"](t,239).ngClassTouched,i["\u0275nov"](t,239).ngClassPristine,i["\u0275nov"](t,239).ngClassDirty,i["\u0275nov"](t,239).ngClassValid,i["\u0275nov"](t,239).ngClassInvalid,i["\u0275nov"](t,239).ngClassPending]),e(t,251,0,i["\u0275unv"](t,251,0,i["\u0275nov"](t,252).transform("PURCHASE_PRICE"))),e(t,256,0,i["\u0275nov"](t,262).ngClassUntouched,i["\u0275nov"](t,262).ngClassTouched,i["\u0275nov"](t,262).ngClassPristine,i["\u0275nov"](t,262).ngClassDirty,i["\u0275nov"](t,262).ngClassValid,i["\u0275nov"](t,262).ngClassInvalid,i["\u0275nov"](t,262).ngClassPending),e(t,272,0,i["\u0275unv"](t,272,0,i["\u0275nov"](t,273).transform("PURCHASE_DATE"))),e(t,277,1,[i["\u0275nov"](t,281).wrapperClasses,i["\u0275nov"](t,281).wrapperClasses,i["\u0275nov"](t,281).wrapperClasses,i["\u0275nov"](t,281).disabledClass,i["\u0275nov"](t,294).ngClassUntouched,i["\u0275nov"](t,294).ngClassTouched,i["\u0275nov"](t,294).ngClassPristine,i["\u0275nov"](t,294).ngClassDirty,i["\u0275nov"](t,294).ngClassValid,i["\u0275nov"](t,294).ngClassInvalid,i["\u0275nov"](t,294).ngClassPending]),e(t,305,0,i["\u0275unv"](t,305,0,i["\u0275nov"](t,306).transform("AMORTISATION_PERIOD"))),e(t,310,0,i["\u0275nov"](t,313).direction,i["\u0275nov"](t,313).widgetClasses,i["\u0275nov"](t,313).widgetClasses,i["\u0275nov"](t,318).ngClassUntouched,i["\u0275nov"](t,318).ngClassTouched,i["\u0275nov"](t,318).ngClassPristine,i["\u0275nov"](t,318).ngClassDirty,i["\u0275nov"](t,318).ngClassValid,i["\u0275nov"](t,318).ngClassInvalid,i["\u0275nov"](t,318).ngClassPending),e(t,329,0,i["\u0275unv"](t,329,0,i["\u0275nov"](t,330).transform("END_DATE_AMORTISATION"))),e(t,332,1,[i["\u0275nov"](t,336).wrapperClasses,i["\u0275nov"](t,336).wrapperClasses,i["\u0275nov"](t,336).wrapperClasses,i["\u0275nov"](t,336).disabledClass,i["\u0275nov"](t,349).ngClassUntouched,i["\u0275nov"](t,349).ngClassTouched,i["\u0275nov"](t,349).ngClassPristine,i["\u0275nov"](t,349).ngClassDirty,i["\u0275nov"](t,349).ngClassValid,i["\u0275nov"](t,349).ngClassInvalid,i["\u0275nov"](t,349).ngClassPending]),e(t,360,0,i["\u0275unv"](t,360,0,i["\u0275nov"](t,361).transform("COST_PER_HOUR"))),e(t,363,0,!0,i["\u0275nov"](t,369).ngClassUntouched,i["\u0275nov"](t,369).ngClassTouched,i["\u0275nov"](t,369).ngClassPristine,i["\u0275nov"](t,369).ngClassDirty,i["\u0275nov"](t,369).ngClassValid,i["\u0275nov"](t,369).ngClassInvalid,i["\u0275nov"](t,369).ngClassPending),e(t,406,0,i["\u0275unv"](t,406,0,i["\u0275nov"](t,407).transform("SPARE_PART"))),e(t,423,0,i["\u0275nov"](t,455).dir,i["\u0275nov"](t,455).hostClasses,i["\u0275nov"](t,455).hostClasses,i["\u0275nov"](t,455).lockedClasses,i["\u0275nov"](t,455).virtualClasses,i["\u0275nov"](t,455).columnResizing,i["\u0275nov"](t,455).noScrollbarClass),e(t,503,0,i["\u0275nov"](t,504).target,i["\u0275nov"](t,504).href),e(t,509,0,i["\u0275unv"](t,509,0,i["\u0275nov"](t,510).transform("BACK_TO_LIST"))),e(t,516,0,i["\u0275unv"](t,516,0,i["\u0275nov"](t,517).transform("SAVE")))})}var Qn=i["\u0275ccf"]("app-add-machine",zn,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-add-machine",[],null,null,null,Kn,Un)),i["\u0275did"](1,245760,null,0,zn,[jn.DomSanitizer,dn.a,T.ActivatedRoute,T.Router,de.b,s.k,an,l.a,E.a,Mn,Hn,mt.a,A.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),$n=function(){this.operationBeforeDtos=[]},ei=n("VwZZ"),ti=n("hl8n"),ni=function(){function e(){}return e.OPERATION_URL="/main/settings/manufacturing/operation",e.OPERATION_URL_EDIT="/main/settings/manufacturing/operation/edit/",e.LIST_PAGEABLE="pageable",e}(),ii=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},oi=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},ri=function(e){return"tr"===e.tagName.toLowerCase()},ai=function(){function e(e,t,n,i,o,r,a,l,s){this.router=e,this.swalWarrings=t,this.translate=n,this.operationService=i,this.growlService=o,this.renderer=r,this.viewRef=a,this.formModalDialogService=l,this.zone=s,this.size=N.a.TEN,this.currentPage=N.a.ZERO,this.columnsConfig=[{field:Ln.a.CODE_FIELD,title:Ln.a.CODE_TITLE,filterable:!0},{field:Ln.a.OPERATION_DESCRIPTION_FIELD,title:Ln.a.OPERATION_DESCRIPTION_TITLE,filterable:!0}],this.gridState={skip:N.a.ZERO,take:this.size,filter:{logic:"and",filters:[]}},this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.rowOperationsList=[],this.listItems=[],this.selectedOperationBeforeDtos=[],this.value=[],this.sectionDescription=Ln.a.OPERATION_SECTION_DESCRIPTION_FIELD,this.operationBeforeDtos=Ln.a.OPERATIONS_BEFORE_LIST_FIELD,this.duration=Ln.a.OPERATION_DURATION_FIELD,this.description=Ln.a.OPERATION_DESCRIPTION_FIELD,this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.selectedOperationList=[],this.gridData=Object(An.f)(this.rowOperationsList,this.gridState)}return e.prototype.ngOnInit=function(){this.initGridData()},e.prototype.ngOnDestroy=function(){this.dragAndDropSubscription$&&this.dragAndDropSubscription$.unsubscribe()},e.prototype.initGridData=function(){var e=this;this.subscription$=this.operationService.getJavaGenericService().getEntityList(ni.LIST_PAGEABLE+"?searchValue="+this.value+"&page="+this.currentPage+"&size="+this.size).subscribe(function(t){e.gridSettings.gridData={data:t.content,total:t.totalElements}})},e.prototype.addHandler=function(e){var t=e.sender;return ii(this,void 0,void 0,function(){var e;return oi(this,function(n){switch(n.label){case 0:return this.selectedOperationBeforeDtos=[],this.closeEditor(t),e=this,[4,this.fillOperationsDropDownList()];case 1:return e.listItems=n.sent(),this.createOperationLineForm(new $n),t.addRow(this.operationFormGroup),this.btnEditVisible=!1,[2]}})})},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.goPage(),this.initGridData()},e.prototype.goPage=function(){var e=this;this.subscription$=this.operationService.getJavaGenericService().getEntityList(ni.LIST_PAGEABLE+"?page="+this.currentPage+"&size="+this.size).subscribe(function(t){e.gridSettings.gridData.data=t.content})},e.prototype.fillOperationsDropDownList=function(e){return ii(this,void 0,void 0,function(){var t=this;return oi(this,function(n){switch(n.label){case 0:return this.listItems=[],void 0!==e?[3,2]:[4,this.operationService.getJavaGenericService().getEntityList().subscribe(function(e){return t.listItems=e,new Promise(function(t){t(e)})})];case 1:return n.sent(),[3,4];case 2:return[4,this.operationService.getJavaGenericService().getEntityById(e.id,Ln.a.ALLOWDED_OPERATION).subscribe(function(e){return t.listItems=e,new Promise(function(t){t(e)})})];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.createOperationLineForm=function(e){this.operationFormGroup=new v.FormGroup({description:new v.FormControl(e.description,v.Validators.required),duration:new v.FormControl(e.duration,v.Validators.required),operationBeforeDtos:new v.FormControl(e.operationBeforeDtos)})},e.prototype.closeEditor=function(e,t){void 0===t&&(t=this.editedRowIndex),void 0!==t&&(this.selectedOperationBeforeDtos=[],e.closeRow(t),this.editedRowIndex=void 0,this.operationFormGroup=void 0)},e.prototype.editHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.dataItem;return ii(this,void 0,void 0,function(){var e,o=this;return oi(this,function(r){switch(r.label){case 0:return this.selectedOperationBeforeDtos=[],e=this,[4,this.fillOperationsDropDownList(i)];case 1:return e.listItems=r.sent(),this.operationService.getJavaGenericService().getEntityById(i.id).subscribe(function(e){o.closeEditor(t),o.closeEditor(t,-1),o.editedRowIndex=n,i.duration=""+i.duration.substring(N.a.ZERO,N.a.TWO)+i.duration.substring(N.a.FOUR,N.a.SIX),o.createOperationForm(i,e),o.selectedOperationList=e.operationBeforeDtos,t.editRow(n,o.operationFormGroup),o.btnEditVisible=!0}),[2]}})})},e.prototype.goToAdvancedEdit=function(e){this.router.navigateByUrl(ni.OPERATION_URL_EDIT.concat(e.id),{queryParams:M.filter,skipLocationChange:!0})},e.prototype.substringDuration=function(e){return e.substring(N.a.ZERO,N.a.TWO)+"h:"+e.substring(N.a.TWO,N.a.FOUR)+"m"},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.ngAfterViewInit=function(){this.dragAndDropSubscription$=this.handleDragAndDrop()},e.prototype.handleDragAndDrop=function(){var e,t=this,n=new ei.a(function(){});return Array.from(document.querySelectorAll(".k-grid tr")).forEach(function(i){t.renderer.setAttribute(i,"draggable","true");var o=Object(ti.a)(i,"dragstart"),r=Object(ti.a)(i,"dragover"),a=Object(ti.a)(i,"dragend");n.add(o.pipe(Object(M.tap)(function(e){var t=e.dataTransfer;try{var n=document.createElement("span");n.setAttribute("style","position: absolute; display: block; top: 0; left: 0; width: 0; height: 0;"),document.body.appendChild(n),t.setDragImage(n,0,0)}catch(e){}try{t.setData("application/json","{}")}catch(e){}})).subscribe(function(n){t.gridData.data[e=n.target.rowIndex].dragging=!0})),n.add(r.subscribe(function(n){n.preventDefault();var i=t.gridData.data.splice(e,1)[0],o=function(e,t){for(;e&&!t(e);)e=e.parentNode;return e}(n.target,ri).rowIndex;e=o,t.zone.run(function(){return t.gridData.data.splice(o,0,i)})})),n.add(a.subscribe(function(n){n.preventDefault(),t.gridData.data[e].dragging=!1,t.gridData.data.forEach(function(e,n){t.idGammeOnUpdate>0&&(e.duration=t.convertDurationToSeconds(e.duration,N.a.ZERO,N.a.FOUR),t.operationService.getJavaGenericService().updateEntity(e,e.id,Ln.a.SAVE_OPERATION_URL).subscribe(function(n){e.duration=t.convertDurationToTime(n.duration)}))}),t.rowOperationsList=t.gridData.data}))}),n},e.prototype.createOperationForm=function(e,t){this.operationFormGroup=new v.FormGroup({description:new v.FormControl(e.description,v.Validators.required),duration:new v.FormControl(e.duration,v.Validators.required),operationBeforeDtos:new v.FormControl(t.operationBeforeDtos)})},e.prototype.removeOperationHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){n.value&&t.operationService.getJavaGenericService().deleteEntity(e.dataItem.id,Ln.a.DELETE_OPERATION_URL).subscribe(function(){var n=t.rowOperationsList.indexOf(e.dataItem);-1!==n&&t.rowOperationsList.splice(n,1),t.initGridData(),t.growlService.successNotification(t.translate.instant(Ln.a.SUCCESS_OPERATION))},function(){t.growlService.ErrorNotification(t.translate.instant(Ln.a.FAILURE_OPERATION))})})},e.prototype.rowCallback=function(e){return{dragging:e.dataItem.dragging}},e.prototype.onSelectOperation=function(e){this.selectedOperationBeforeDtos=e},e.prototype.convertDurationToSeconds=function(e,t,n){return+e.substring(t,t+N.a.TWO)*N.a.ONE_HOUR_SECONDS+ +e.substring(n,n+N.a.TWO)*N.a.SIXTY},e.prototype.convertDurationToTime=function(e){var t="";return e=e.substring(N.a.TWO,e.length),(t+=this.getHoursAndMinutesFromDuration(e,0,e.indexOf("H"))+"h:")+this.getHoursAndMinutesFromDuration(e,e.indexOf("H")+1,e.indexOf("M"))+"m"},e.prototype.getHoursAndMinutesFromDuration=function(e,t,n){var i="";return-1===n?i+=Ln.a.DOUBLE_ZERO:e.substring(t,n).length===N.a.TWO?i+=e.substring(t,n):i+=""+N.a.ZERO+e.substring(t,n),i},e.prototype.onSearch=function(){this.gridSettings.state.skip=N.a.ZERO,this.currentPage=N.a.ZERO,this.initGridData()},e}(),li=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function si(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](1,0,null,null,1,"div",[["class","btn-group col-lg-3 col-md-8 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](4,0,null,null,5,"div",[["class","row"],["style","float :right; margin-right: 40px;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](6,0,null,null,2,"app-btn-grid",[["style","margin-top: -5%;    display: inline-flex;"]],null,null,null,r.b,r.a)),i["\u0275did"](7,114688,null,0,a.a,[l.a,s.k,d.a,c.a,u.a],{advencedAdd:[0,"advencedAdd"],add:[1,"add"],addLink:[2,"addLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,7,0,!0,!1,"add")},null)}function di(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275eld"](1,0,null,null,5,"button",[["kendoGridEditCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-edit-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,3).click(n)&&o),"click"===t&&(o=!1!==r.goToAdvancedEdit(e.context.dataItem)&&o),o},null,null)),i["\u0275did"](2,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](3,9388032,null,0,m._2,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](5,0,null,null,0,"i",[["aria-hidden","true"],["class","las la-pen cursor-pointer edit-pencil la-lg mx-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n                "])),(e()(),i["\u0275eld"](8,0,null,null,3,"button",[["class","btnKendoGrid"],["kendoGridSaveCommand",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-save-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,10).click(n)&&o),o},null,null)),i["\u0275did"](9,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](10,9388032,null,0,m._88,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275eld"](11,0,null,null,0,"span",[["class","fa fa-save"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](13,0,null,null,3,"button",[["class","btnKendoGrid"],["kendoGridCancelCommand",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-cancel-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,15).click(n)&&o),o},null,null)),i["\u0275did"](14,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](15,9388032,null,0,m.l,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275eld"](16,0,null,null,0,"span",[["class","fa fa-close"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](18,0,null,null,5,"button",[["class","btnKendoGrid"],["kendoGridRemoveCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-remove-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,20).click(n)&&o),o},null,null)),i["\u0275did"](19,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](20,9388032,null,0,m._82,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](22,0,null,null,0,"i",[["aria-hidden","true"],["class","text-danger cursor-pointer fa fa-trash-o la-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n\n              "]))],function(e,t){e(t,3,0),e(t,10,0),e(t,15,0),e(t,20,0)},function(e,t){e(t,1,0,i["\u0275nov"](t,3).classButton,i["\u0275nov"](t,3).classDisabled,i["\u0275nov"](t,3).classPrimary,i["\u0275nov"](t,3).isFlat,i["\u0275nov"](t,3).isBare,i["\u0275nov"](t,3).isOutline,i["\u0275nov"](t,3).classActive,i["\u0275nov"](t,3).dir,i["\u0275nov"](t,3).visible,i["\u0275nov"](t,3).commandClass),e(t,8,0,i["\u0275nov"](t,10).classButton,i["\u0275nov"](t,10).classDisabled,i["\u0275nov"](t,10).classPrimary,i["\u0275nov"](t,10).isFlat,i["\u0275nov"](t,10).isBare,i["\u0275nov"](t,10).isOutline,i["\u0275nov"](t,10).classActive,i["\u0275nov"](t,10).dir,i["\u0275nov"](t,10).visible,i["\u0275nov"](t,10).commandClass),e(t,13,0,i["\u0275nov"](t,15).classButton,i["\u0275nov"](t,15).classDisabled,i["\u0275nov"](t,15).classPrimary,i["\u0275nov"](t,15).isFlat,i["\u0275nov"](t,15).isBare,i["\u0275nov"](t,15).isOutline,i["\u0275nov"](t,15).classActive,i["\u0275nov"](t,15).dir,i["\u0275nov"](t,15).visible,i["\u0275nov"](t,15).commandClass),e(t,18,0,i["\u0275nov"](t,20).classButton,i["\u0275nov"](t,20).classDisabled,i["\u0275nov"](t,20).classPrimary,i["\u0275nov"](t,20).isFlat,i["\u0275nov"](t,20).isBare,i["\u0275nov"](t,20).isOutline,i["\u0275nov"](t,20).classActive,i["\u0275nov"](t,20).dir,i["\u0275nov"](t,20).visible,i["\u0275nov"](t,20).commandClass)})}function ci(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,140,"div",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,137,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,134,"div",[["class","card full-screen-card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,131,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](8,0,null,null,8,"div",[["class","card-header bg-white border-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](10,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](12,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](13,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](18,0,null,null,118,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](20,0,null,null,27,"div",[["class","row d-flex justify-content-between mt-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](22,0,null,null,24,"div",[["class","col-lg-4 col-md-6 col-sm-12 col-xs-12 d-flex justify-content-center"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](24,0,null,null,21,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](26,0,null,null,18,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](28,0,null,null,10,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](30,0,null,null,7,"input",[["aria-describedby","addon-wrapping"],["class","form-control"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"afterValueChanged"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,31)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,31).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,31)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,31)._compositionEnd(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,36).onValueChange(n)&&o),"ngModelChange"===t&&(o=!1!==(r.value=n)&&o),"afterValueChanged"===t&&(o=!1!==r.onSearch()&&o),o},null,null)),i["\u0275did"](31,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](33,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](35,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),i["\u0275did"](36,147456,null,0,on.a,[],null,{afterValueChanged:"afterValueChanged"}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](40,0,null,null,3,"div",[["class","col-2 p-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](42,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-search fa-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onSearch()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](49,0,null,null,86,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"remove"],[null,"add"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"remove"===t&&(i=!1!==o.removeOperationHandler(n)&&i),"add"===t&&(i=!1!==o.addHandler(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](81,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],filter:[3,"filter"],filterable:[4,"filterable"],pageable:[5,"pageable"],rowClass:[6,"rowClass"],reorderable:[7,"reorderable"],columnMenu:[8,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",remove:"remove",add:"add"}),i["\u0275qud"](603979776,1,{columns:1}),i["\u0275qud"](603979776,2,{detailTemplateChildren:1}),i["\u0275qud"](603979776,3,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,4,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,5,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,6,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,si)),i["\u0275did"](91,16384,[[5,4]],0,m._110,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](93,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](94,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,7,{headerTemplates:1}),i["\u0275qud"](335544320,8,{footerTemplate:0}),i["\u0275qud"](603979776,9,{columnMenuTemplates:1}),i["\u0275qud"](335544320,10,{template:0}),i["\u0275qud"](335544320,11,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,12,{groupFooterTemplate:0}),i["\u0275qud"](335544320,13,{editTemplate:0}),i["\u0275qud"](335544320,14,{filterCellTemplate:0}),i["\u0275qud"](335544320,15,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](108,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](109,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,16,{headerTemplates:1}),i["\u0275qud"](335544320,17,{footerTemplate:0}),i["\u0275qud"](603979776,18,{columnMenuTemplates:1}),i["\u0275qud"](335544320,19,{template:0}),i["\u0275qud"](335544320,20,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,21,{groupFooterTemplate:0}),i["\u0275qud"](335544320,22,{editTemplate:0}),i["\u0275qud"](335544320,23,{filterCellTemplate:0}),i["\u0275qud"](335544320,24,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n            "])),(e()(),i["\u0275eld"](123,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](124,49152,null,4,m.J,[[8,null]],{title:[0,"title"],width:[1,"width"]},null),i["\u0275qud"](603979776,25,{headerTemplates:1}),i["\u0275qud"](335544320,26,{footerTemplate:0}),i["\u0275qud"](603979776,27,{columnMenuTemplates:1}),i["\u0275qud"](335544320,28,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,di)),i["\u0275did"](133,16384,[[28,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,33,0,n.value),e(t,81,0,n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.filter,"menu",n.pagerSettings,n.rowCallback,!0,!0),e(t,94,0,i["\u0275unv"](t,94,0,i["\u0275nov"](t,104).transform(n.gridSettings.columnsConfig[0].title)),n.gridSettings.columnsConfig[0].field),e(t,109,0,i["\u0275unv"](t,109,0,i["\u0275nov"](t,119).transform(n.gridSettings.columnsConfig[1].title)),n.gridSettings.columnsConfig[1].field),e(t,124,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,124,0,i["\u0275nov"](t,129).transform("ACTION")),""),160)},function(e,t){e(t,13,0,i["\u0275unv"](t,13,0,i["\u0275nov"](t,14).transform("OPERATION_LIST"))),e(t,30,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,30,0,i["\u0275nov"](t,37).transform("SEARCH")),""),i["\u0275nov"](t,35).ngClassUntouched,i["\u0275nov"](t,35).ngClassTouched,i["\u0275nov"](t,35).ngClassPristine,i["\u0275nov"](t,35).ngClassDirty,i["\u0275nov"](t,35).ngClassValid,i["\u0275nov"](t,35).ngClassInvalid,i["\u0275nov"](t,35).ngClassPending),e(t,49,0,i["\u0275nov"](t,81).dir,i["\u0275nov"](t,81).hostClasses,i["\u0275nov"](t,81).hostClasses,i["\u0275nov"](t,81).lockedClasses,i["\u0275nov"](t,81).virtualClasses,i["\u0275nov"](t,81).columnResizing,i["\u0275nov"](t,81).noScrollbarClass)})}var ui=i["\u0275ccf"]("app-operation-list",ai,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,16777216,null,null,1,"app-operation-list",[],null,null,null,ci,li)),i["\u0275did"](1,4440064,null,0,ai,[T.Router,E.a,s.k,Hn,A.a,i.Renderer2,i.ViewContainerRef,oe.a,i.NgZone],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),hi=function(){function e(e,t,n,i,o,r,a,l){var s=this;this.operationService=e,this.growlService=t,this.router=n,this.fb=i,this.activatedRoute=o,this.validationService=r,this.translate=a,this.modalService=l,this.isUpdateMode=!1,this.operationModalOpenedFromGamme=!1,this.activatedRoute.params.subscribe(function(e){s.idOperationOnUpdate=+e.id||0,s.isUpdateMode=s.idOperationOnUpdate>0})}return e.prototype.ngOnInit=function(){this.createFormGroup(),this.idOperationOnUpdate>0&&!this.operationModalOpenedFromGamme?this.getDataToUpdate():this.getLastCode()},e.prototype.createFormGroup=function(){this.formGroup=this.fb.group({code:new v.FormControl("",v.Validators.required),description:new v.FormControl("",v.Validators.required)})},e.prototype.getDataToUpdate=function(){var e=this;this.idOperationOnUpdate&&this.operationService.getJavaGenericService().getEntityById(this.idOperationOnUpdate).subscribe(function(t){e.operationToBeUpdated=t,e.formGroup.patchValue({code:t.code,description:t.description})})},e.prototype.save=function(){this.isUpdateMode&&!this.operationModalOpenedFromGamme?this.editOperation():this.saveOperation()},e.prototype.editOperation=function(){var e=this;this.operationService.getJavaGenericService().updateEntity({code:this.formGroup.value.code,description:this.formGroup.value.description},this.operationToBeUpdated.id).subscribe(function(t){e.growlService.successNotification(e.translate.instant(_.a.SUCCESS_OPERATION)),e.router.navigateByUrl(ni.OPERATION_URL)})},e.prototype.saveOperation=function(){var e=this;if(this.formGroup.valid){var t={code:this.formGroup.controls.code.value,description:this.formGroup.controls.description.value};this.operationService.getJavaGenericService().saveEntity(t,"").subscribe(function(t){e.growlService.successNotification(e.translate.instant(_.a.SUCCESS_OPERATION)),e.operationModalOpenedFromGamme?(e.dialogOptions.data=t,e.dialogOptions.data.source=L.a.GAMME,e.dialogOptions.onClose()):e.router.navigateByUrl(ni.OPERATION_URL)})}else this.validationService.validateAllFormFields(this.formGroup)},e.prototype.getLastCode=function(){var e=this;this.operationService.callService(wt.a.GET,"get-last-code").subscribe(function(t){e.formGroup.controls.code.patchValue(t),e.formGroup.controls.code.disable()})},e.prototype.dialogInit=function(e,t){this.operationModalOpenedFromGamme=!0,this.dialogOptions=t},e}(),pi=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function fi(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,8,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&o),o},null,null)),i["\u0275did"](1,671744,null,0,T.RouterLinkWithHref,[T.Router,T.ActivatedRoute,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](3,0,null,null,4,"span",[["class","btn btn-sm btn-back-to-list btn-primary"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](5,0,null,null,0,"i",[["class","fa fa-chevron-circle-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["\n                ","\n              "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,1,0,"/main/settings/manufacturing/operation")},function(e,t){e(t,0,0,i["\u0275nov"](t,1).target,i["\u0275nov"](t,1).href),e(t,6,0,i["\u0275unv"](t,6,0,i["\u0275nov"](t,7).transform("BACK_TO_LIST")))})}function gi(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,90,"div",[["class","card h-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,5,"div",[["class","col-sm-12 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](7,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](12,0,null,null,52,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](14,0,null,null,49,"form",[["class","form-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,16).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,16).onReset()&&o),o},null,null)),i["\u0275did"](15,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](16,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](18,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](20,0,null,null,42,"div",[["class","col-lg-12 col-sm-12 col-md-12 mr-5"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](22,0,null,null,39,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](24,0,null,null,18,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](26,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](27,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](29,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](32,0,null,null,5,"input",[["class","form-control"],["disabled",""],["formControlName","code"],["name","code"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,33)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,33).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,33)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,33)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](33,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](35,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](37,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](39,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](40,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](44,0,null,null,16,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](46,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](47,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](50,0,null,null,5,"input",[["class","form-control"],["formControlName","description"],["name","description"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,51)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,51).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,51)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,51)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](51,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](53,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](55,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](57,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](58,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](67,0,null,null,22,"div",[["class","fixed-card-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](69,0,null,null,19,"div",[["class","footerStyle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](71,0,null,null,16,"footer",[["class","app-footer ml-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](73,0,null,null,13,"div",[["class","w-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](75,0,null,null,10,"div",[["class","d-flex justify-content-end p-3 flex-align footer-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,fi)),i["\u0275did"](78,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](80,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.save()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](82,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](83,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,16,0,n.formGroup),e(t,35,0,"code",""),e(t,40,0,n.formGroup.controls.code),e(t,53,0,"description"),e(t,58,0,n.formGroup.controls.description),e(t,78,0,!n.operationModalOpenedFromGamme)},function(e,t){var n=t.component;e(t,7,0,i["\u0275unv"](t,7,0,i["\u0275nov"](t,8).transform(n.isUpdateMode?"EDIT_OPERATION":"SAVE_OPERATION"))),e(t,14,0,i["\u0275nov"](t,18).ngClassUntouched,i["\u0275nov"](t,18).ngClassTouched,i["\u0275nov"](t,18).ngClassPristine,i["\u0275nov"](t,18).ngClassDirty,i["\u0275nov"](t,18).ngClassValid,i["\u0275nov"](t,18).ngClassInvalid,i["\u0275nov"](t,18).ngClassPending),e(t,27,0,i["\u0275unv"](t,27,0,i["\u0275nov"](t,28).transform("CODE"))),e(t,32,0,i["\u0275nov"](t,37).ngClassUntouched,i["\u0275nov"](t,37).ngClassTouched,i["\u0275nov"](t,37).ngClassPristine,i["\u0275nov"](t,37).ngClassDirty,i["\u0275nov"](t,37).ngClassValid,i["\u0275nov"](t,37).ngClassInvalid,i["\u0275nov"](t,37).ngClassPending),e(t,47,0,i["\u0275unv"](t,47,0,i["\u0275nov"](t,48).transform("DESCRIPTION"))),e(t,50,0,i["\u0275nov"](t,55).ngClassUntouched,i["\u0275nov"](t,55).ngClassTouched,i["\u0275nov"](t,55).ngClassPristine,i["\u0275nov"](t,55).ngClassDirty,i["\u0275nov"](t,55).ngClassValid,i["\u0275nov"](t,55).ngClassInvalid,i["\u0275nov"](t,55).ngClassPending),e(t,83,0,i["\u0275unv"](t,83,0,i["\u0275nov"](t,84).transform("SAVE")))})}var mi=i["\u0275ccf"]("app-add-operation",hi,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-add-operation",[],null,null,null,gi,pi)),i["\u0275did"](1,114688,null,0,hi,[Hn,A.a,T.Router,v.FormBuilder,T.ActivatedRoute,de.b,s.k,re.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),vi=function(){function e(){}return e.ENTITY_NAME="area",e.SUCCESS_OPERATION="SUCCESS_OPERATION",e.REFERENCE_FIELD="reference",e.REFERENCE_TITLE="REFERENCE",e.DESIGNATION_FIELD="designation",e.DESIGNATION_TITLE="DESIGNATION",e.SAVE_AREA="",e.DELETE_AREA="",e.MANUFACTURING="manufacturing",e.LIST_PAGEABLE="pageable",e.DELETE_AREA_MSG="DELETE_AREA_MSG",e.AREA_DELETE_TEXT_MESSAGE="AREA_DELETE_TEXT_MESSAGE",e}(),yi=function(e){function t(t,n){return e.call(this,t,n,vi.MANUFACTURING,vi.ENTITY_NAME)||this}return Object(O.__extends)(t,e),t}(P.a),bi=function(){function e(e,t,n,i,o,r,a){this.machineService=e,this.sectionService=t,this.areaService=n,this.swalWarring=i,this.router=o,this.growlService=r,this.translate=a,this.size=N.a.TWENTY,this.currentPage=N.a.ZERO,this.value="",this.gridState={skip:N.a.ZERO,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:ln.REFERENCE_FIELD,title:ln.REFERENCE_TITLE,filterable:!0},{field:ln.DESIGNATION_FIELD,title:ln.DESIGNATION_TITLE,filterable:!0},{field:ln.AREA_FIELD,title:ln.AREA_TITLE,filterable:!0}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS}return e.prototype.ngOnInit=function(){this.initGridDataSource()},e.prototype.initGridDataSource=function(e){var t=this;null!=e&&(this.currentPage=e),this.sectionService.getJavaGenericService().getEntityList(rn.PAGEABLE+"?designation="+this.value+"&page="+this.currentPage+"&size="+this.size).subscribe(function(e){e.content.forEach(function(e){e.areaDesignation=e.area.designation}),t.gridSettings.gridData={data:e.content,total:e.totalElements}})},e.prototype.goToAdvancedEdit=function(e){this.router.navigateByUrl(ln.URI_ADVANCED_EDIT.concat(e.id),{queryParams:M.filter,skipLocationChange:!0})},e.prototype.removeHandler=function(e){var t=this;this.swalWarring.CreateSwal(ln.SECTION_DELETE_TEXT_MESSAGE,ln.DELETE_SECTION_MESSAGE).then(function(n){n.value&&t.sectionService.getJavaGenericService().deleteEntity(e.id,ln.SECTION_URL).subscribe(function(){t.growlService.successNotification(t.translate.instant(ln.SUCCESS_OPERATION_MACHINE_UNASSIGNED)),t.gridSettings.gridData.data=t.gridSettings.gridData.data.filter(function(t){return t.id!==e.id})},function(){t.growlService.ErrorNotification(t.translate.instant(ln.FAILURE_OPERATION))})})},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.initGridDataSource()},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.onSearch=function(){""===this.value?this.initGridDataSource():this.initGridDataSource(0)},e}(),wi=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ci(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](1,0,null,null,1,"div",[["class","btn-group col-lg-3 col-md-8 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](4,0,null,null,4,"div",[["class","row"],["style","float :right;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](6,0,null,null,1,"app-btn-grid",[["style","margin-top: -5%;    display: inline-flex;"]],null,null,null,r.b,r.a)),i["\u0275did"](7,114688,null,0,a.a,[l.a,s.k,d.a,c.a,u.a],{isExportExcel:[0,"isExportExcel"],advencedAdd:[1,"advencedAdd"],add:[2,"add"],addLink:[3,"addLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,7,0,!0,!0,!1,"add")},null)}function xi(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","las la-pen cursor-pointer edit-pencil la-lg mx-3"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.goToAdvancedEdit(e.context.dataItem)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](5,0,null,null,0,"i",[["aria-hidden","true"],["class","text-danger cursor-pointer fa fa-trash-o la-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.removeHandler(e.context.dataItem)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n              "]))],null,null)}function Si(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,155,"div",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,152,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,149,"div",[["class","card full-screen-card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,146,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](8,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](10,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](12,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](13,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275eld"](18,0,null,null,133,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](20,0,null,null,27,"div",[["class","row d-flex justify-content-between mt-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](22,0,null,null,24,"div",[["class","col-lg-4 col-md-6 col-sm-12 col-xs-12 d-flex justify-content-center"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](24,0,null,null,21,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](26,0,null,null,18,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](28,0,null,null,10,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](30,0,null,null,7,"input",[["aria-describedby","addon-wrapping"],["class","form-control"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focusout"],[null,"ngModelChange"],[null,"afterValueChanged"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,31)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,31).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,31)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,31)._compositionEnd(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,36).onValueChange(n)&&o),"focusout"===t&&(o=!1!==r.onSearch()&&o),"ngModelChange"===t&&(o=!1!==(r.value=n)&&o),"afterValueChanged"===t&&(o=!1!==r.onSearch()&&o),o},null,null)),i["\u0275did"](31,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](33,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](35,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),i["\u0275did"](36,147456,null,0,on.a,[],null,{afterValueChanged:"afterValueChanged"}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](40,0,null,null,3,"div",[["class","col-2 p-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](42,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-search fa-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onSearch()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](49,0,null,null,101,"kendo-grid",[],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"remove"],[null,"pageChange"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"remove"===t&&(i=!1!==o.removeHandler(n)&&i),"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](81,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],groupable:[8,"groupable"],reorderable:[9,"reorderable"],columnMenu:[10,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",remove:"remove"}),i["\u0275qud"](603979776,1,{columns:1}),i["\u0275qud"](603979776,2,{detailTemplateChildren:1}),i["\u0275qud"](603979776,3,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,4,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,5,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,6,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,Ci)),i["\u0275did"](91,16384,[[5,4]],0,m._110,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](93,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](94,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,7,{headerTemplates:1}),i["\u0275qud"](335544320,8,{footerTemplate:0}),i["\u0275qud"](603979776,9,{columnMenuTemplates:1}),i["\u0275qud"](335544320,10,{template:0}),i["\u0275qud"](335544320,11,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,12,{groupFooterTemplate:0}),i["\u0275qud"](335544320,13,{editTemplate:0}),i["\u0275qud"](335544320,14,{filterCellTemplate:0}),i["\u0275qud"](335544320,15,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](108,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](109,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,16,{headerTemplates:1}),i["\u0275qud"](335544320,17,{footerTemplate:0}),i["\u0275qud"](603979776,18,{columnMenuTemplates:1}),i["\u0275qud"](335544320,19,{template:0}),i["\u0275qud"](335544320,20,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,21,{groupFooterTemplate:0}),i["\u0275qud"](335544320,22,{editTemplate:0}),i["\u0275qud"](335544320,23,{filterCellTemplate:0}),i["\u0275qud"](335544320,24,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](123,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](124,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,25,{headerTemplates:1}),i["\u0275qud"](335544320,26,{footerTemplate:0}),i["\u0275qud"](603979776,27,{columnMenuTemplates:1}),i["\u0275qud"](335544320,28,{template:0}),i["\u0275qud"](335544320,29,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,30,{groupFooterTemplate:0}),i["\u0275qud"](335544320,31,{editTemplate:0}),i["\u0275qud"](335544320,32,{filterCellTemplate:0}),i["\u0275qud"](335544320,33,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](138,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](139,49152,null,4,m.J,[[8,null]],{title:[0,"title"],width:[1,"width"]},null),i["\u0275qud"](603979776,34,{headerTemplates:1}),i["\u0275qud"](335544320,35,{footerTemplate:0}),i["\u0275qud"](603979776,36,{columnMenuTemplates:1}),i["\u0275qud"](335544320,37,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,xi)),i["\u0275did"](148,16384,[[37,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,33,0,n.value),e(t,81,1,[n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,!1,!1,n.pagerSettings,!1,!0,!1]),e(t,94,0,i["\u0275unv"](t,94,0,i["\u0275nov"](t,104).transform(n.gridSettings.columnsConfig[0].title)),n.gridSettings.columnsConfig[0].field),e(t,109,0,i["\u0275unv"](t,109,0,i["\u0275nov"](t,119).transform(n.gridSettings.columnsConfig[1].title)),n.gridSettings.columnsConfig[1].field),e(t,124,0,i["\u0275unv"](t,124,0,i["\u0275nov"](t,134).transform(n.gridSettings.columnsConfig[2].title)),n.gridSettings.columnsConfig[2].field),e(t,139,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,139,0,i["\u0275nov"](t,144).transform("ACTION")),""),150)},function(e,t){e(t,13,0,i["\u0275unv"](t,13,0,i["\u0275nov"](t,14).transform("SECTION_LIST"))),e(t,30,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,30,0,i["\u0275nov"](t,37).transform("SEARCH")),""),i["\u0275nov"](t,35).ngClassUntouched,i["\u0275nov"](t,35).ngClassTouched,i["\u0275nov"](t,35).ngClassPristine,i["\u0275nov"](t,35).ngClassDirty,i["\u0275nov"](t,35).ngClassValid,i["\u0275nov"](t,35).ngClassInvalid,i["\u0275nov"](t,35).ngClassPending),e(t,49,0,i["\u0275nov"](t,81).dir,i["\u0275nov"](t,81).hostClasses,i["\u0275nov"](t,81).hostClasses,i["\u0275nov"](t,81).lockedClasses,i["\u0275nov"](t,81).virtualClasses,i["\u0275nov"](t,81).columnResizing,i["\u0275nov"](t,81).noScrollbarClass)})}var Ti=i["\u0275ccf"]("app-list-machine",bi,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-list-machine",[],null,null,null,Si,wi)),i["\u0275did"](1,114688,null,0,bi,[an,sn,yi,E.a,T.Router,A.a,s.k],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Ei=function(){function e(e,t){this.translate=e,this.machineService=t,this.selectedMachineId=new i.EventEmitter,this.machineFiltredList=[],this.machineId=[]}return e.prototype.initDataSource=function(){!0===this.assignedToSection?this.getMachinesNotAssignedToSection():this.sectionId>0?this.getMachinesAssignedToSectionId():this.getAllMachines()},e.prototype.handleFilterParentCode=function(e){this.machineFiltredList=this.machineId.filter(function(t){return t.description.toLocaleLowerCase().includes(e.toLowerCase())})},e.prototype.onSelect=function(e){this.selectedMachineId.emit(e)},e.prototype.ngOnInit=function(){this.initDataSource()},e.prototype.getMachinesNotAssignedToSection=function(){var e=this;this.machineService.getJavaGenericService().getEntityList(rn.NOT_ASSIGNED).subscribe(function(t){e.prepareData(t)})},e.prototype.getMachinesAssignedToSectionId=function(){var e=this;this.machineService.getJavaGenericService().getEntityById(this.sectionId,ln.GET_BY_SECTION_ID).subscribe(function(t){e.prepareData(t)})},e.prototype.getAllMachines=function(){var e=this;this.machineService.getJavaGenericService().getEntityList().subscribe(function(t){e.prepareData(t)})},e.prototype.prepareData=function(e){this.machineId=e,this.machineFiltredList=this.machineId.slice(0)},e}(),_i=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function ki(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "]))],null,function(e,t){e(t,6,0,t.context.$implicit.description)})}function Di(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,28,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,1).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,1).onReset()&&o),o},null,null)),i["\u0275did"](1,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](3,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](5,0,null,null,22,"kendo-combobox",[["class","form-control"],["formControlName","machineId"]],[[2,"k-widget",null],[2,"k-combobox",null],[2,"k-header",null],[2,"k-combobox-clearable",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"filterChange"],[null,"valueChange"]],function(e,t,n){var i=!0,o=e.component;return"filterChange"===t&&(i=!1!==o.handleFilterParentCode(n)&&i),"valueChange"===t&&(i=!1!==o.onSelect(n)&&i),i},st.g,st.b)),i["\u0275prd"](6144,null,dt.m,null,[dt.c]),i["\u0275prd"](256,null,b.b,"kendo.combobox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](13,770048,null,6,dt.c,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.ChangeDetectorRef,i.Renderer2,i.ElementRef,[2,dt.E]],{data:[0,"data"],textField:[1,"textField"],valueField:[2,"valueField"],valuePrimitive:[3,"valuePrimitive"],filterable:[4,"filterable"]},{valueChange:"valueChange",filterChange:"filterChange"}),i["\u0275qud"](335544320,1,{template:0}),i["\u0275qud"](335544320,2,{headerTemplate:0}),i["\u0275qud"](335544320,3,{footerTemplate:0}),i["\u0275qud"](335544320,4,{noDataTemplate:0}),i["\u0275qud"](335544320,5,{groupTemplate:0}),i["\u0275qud"](335544320,6,{fixedGroupTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.c]),i["\u0275did"](21,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](23,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n    "])),(e()(),i["\u0275and"](0,null,null,1,null,ki)),i["\u0275did"](26,16384,[[1,4]],0,dt.p,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form),e(t,13,0,n.machineFiltredList,"description","id",!0,!0),e(t,21,0,"machineId")},function(e,t){e(t,0,0,i["\u0275nov"](t,3).ngClassUntouched,i["\u0275nov"](t,3).ngClassTouched,i["\u0275nov"](t,3).ngClassPristine,i["\u0275nov"](t,3).ngClassDirty,i["\u0275nov"](t,3).ngClassValid,i["\u0275nov"](t,3).ngClassInvalid,i["\u0275nov"](t,3).ngClassPending),e(t,5,1,[i["\u0275nov"](t,13).widgetClasses,i["\u0275nov"](t,13).widgetClasses,i["\u0275nov"](t,13).widgetClasses,i["\u0275nov"](t,13).clearable,i["\u0275nov"](t,13).dir,i["\u0275nov"](t,23).ngClassUntouched,i["\u0275nov"](t,23).ngClassTouched,i["\u0275nov"](t,23).ngClassPristine,i["\u0275nov"](t,23).ngClassDirty,i["\u0275nov"](t,23).ngClassValid,i["\u0275nov"](t,23).ngClassInvalid,i["\u0275nov"](t,23).ngClassPending])})}var Ai=function(){},Oi=n("WFBk"),Ii=function(){function e(e,t,n,i,o,r,a,l,s){var d=this;this.activatedRoute=e,this.router=t,this.swalWarrings=n,this.validationService=i,this.sectionService=o,this.translate=r,this.machineService=a,this.employeeService=l,this.growlService=s,this.isUpdateMode=!1,this.rowMachinesList=[],this.machinesListToSave=[],this.section=new Ai,this.getTypesFromEnum=bn,this.gridStateSections={skip:0,take:10,filter:{logic:"and",filters:[]}},this.gridData=Object(An.f)(this.rowMachinesList,this.gridStateSections),this.columnsConfigMachines=[{field:rn.DESCRPTION_FIELD,title:rn.MACHINE_TITLE,filterable:!0},{field:rn.COST,title:rn.COST_PER_HOUR,filterable:!0},{field:rn.RESPONSIBLE_NAME,title:rn.RESPONSIBLE_TITLE,filterable:!0},{field:rn.STATUS_FIELD,title:rn.STATUS_TITLE,filterable:!0}],this.gridSettingsSections={state:this.gridStateSections,columnsConfig:this.columnsConfigMachines},this.isEditingMode=!1,this.activatedRoute.params.subscribe(function(e){d.idSectionOnUpdate=+e.id||0}),this.getTypesList(),this.formGroup=new v.FormGroup({reference:new v.FormControl("",v.Validators.required),designation:new v.FormControl("",v.Validators.required),areaId:new v.FormControl("",v.Validators.required)})}return e.prototype.rowCallback=function(e){return{dragging:e.dataItem.dragging}},e.prototype.getTypesList=function(){this.typesList=ct.EnumValues.getNamesAndValues(this.getTypesFromEnum)},e.prototype.dataStateChange=function(e){this.gridStateSections=e,this.gridData=Object(An.f)(this.rowMachinesList,this.gridStateSections)},e.prototype.initGridData=function(){var e=this;this.idSectionOnUpdate>0&&(this.isUpdateMode=!0),this.subscription$=this.sectionService.getJavaGenericService().getEntityById(this.idSectionOnUpdate).subscribe(function(t){e.section=t,e.formGroup.patchValue({reference:e.section.reference,designation:e.section.designation,areaId:e.section.areaId})}),this.subscription$=this.machineService.getJavaGenericService().getEntityById(this.idSectionOnUpdate,ln.GET_BY_SECTION_ID).flatMap(function(t){e.rowMachinesList=t;var n=[];return t.forEach(function(e){n.push(e.responsibleId)}),e.employeeService.getEmployeesDetails(n)}).subscribe(function(t){e.rowMachinesList.map(function(e){t.forEach(function(t){t.Id===e.responsibleId&&(e.responsibleName=t.FullName)})}),e.dataStateChange(e.gridStateSections)})},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe()},e.prototype.ngOnInit=function(){if(this.idSectionOnUpdate>0)this.initGridData();else{var e=new Ai;this.createSectionForm(e)}},e.prototype.editSectionClick=function(){var e=this;if(this.formGroup.valid){var t={reference:this.formGroup.value.reference,designation:this.formGroup.value.designation,areaId:this.formGroup.value.areaId};this.subscription$=this.sectionService.getJavaGenericService().updateEntity(t,this.idSectionOnUpdate).subscribe(function(){e.growlService.successNotification(e.translate.instant(ln.SUCCESS_OPERATION)),e.router.navigateByUrl(ln.URL_LIST)})}else this.validationService.validateAllFormFields(this.formGroup)},e.prototype.saveSectionClick=function(){var e=this;if(this.formGroup.valid){var t={reference:this.formGroup.value.reference,designation:this.formGroup.value.designation,areaId:this.formGroup.value.areaId};this.subscription$=this.sectionService.getJavaGenericService().saveEntity(t).subscribe(function(t){0===e.idSectionOnUpdate&&(e.rowMachinesList.forEach(function(n){var i={id:n.id,description:n.description,costPerHour:n.costPerHour,sectionId:t.id,responsibleId:n.responsibleId,stateMachine:n.stateMachine};e.machineService.getJavaGenericService().updateEntity(i,n.id,rn.MACHINE_URL).subscribe()}),e.growlService.successNotification(e.translate.instant(ln.SUCCESS_OPERATION)),e.router.navigateByUrl(ln.URL_LIST))})}else this.validationService.validateAllFormFields(this.formGroup)},e.prototype.save=function(){this.isUpdateMode?this.editSectionClick():this.saveSectionClick()},e.prototype.selectedAreaId=function(e){e.areaFiltredList&&e.form&&e.form.value[rn.AREA_ID]&&(this.currentArea=e.areaFiltredList.filter(function(t){return t.id===e.form.value[rn.AREA_ID]})[0],this.formGroup.controls[ln.AREA_ID].setValue(this.currentArea.designation))},e.prototype.addHandler=function(e){var t=e.sender;this.closeEditor(t),this.createMachineLineForm(new Rn),t.addRow(this.machineFormGroup),this.btnEditVisible=!1},e.prototype.closeEditor=function(e,t){void 0===t&&(t=this.editedRowIndex),void 0!==t&&(e.closeRow(t),this.editedRowIndex=void 0,this.machineFormGroup=void 0)},e.prototype.createMachineLineForm=function(e){this.isEditingMode=!0,this.machineFormGroup=new v.FormGroup({description:new v.FormControl(e.id,v.Validators.required),costPerHour:new v.FormControl({value:e?e.costPerHour:"",disabled:!0}),responsibleId:new v.FormControl({value:e?e.responsibleId:"",disabled:!0}),stateMachine:new v.FormControl({value:e?e.stateMachine:"",disabled:!0}),responsibleFullName:new v.FormControl({value:e?e.responsibleFullName:"",disabled:!0}),machineId:new v.FormControl(e.id,v.Validators.required)})},e.prototype.saveHandler=function(e){var t=this,n=e.sender,i=e.rowIndex;this.machineFormGroup.valid?this.idSectionOnUpdate>0?(this.selectedMachine.sectionId=this.idSectionOnUpdate,this.subscription$=this.machineService.getJavaGenericService().updateEntity(this.selectedMachine,this.selectedMachine.id,rn.MACHINE_URL).subscribe(function(e){t.employeeService.getById(t.selectedMachine.responsibleId).subscribe(function(e){t.selectedMachine.responsibleName=e[rn.FULLNAME]}),t.rowMachinesList.push(t.selectedMachine),t.dataStateChange(t.gridStateSections),t.closeEditor(n,i),t.growlService.successNotification(t.translate.instant(_.a.SUCCESS_OPERATION))})):(this.employeeService.getById(this.selectedMachine.responsibleId).subscribe(function(e){t.selectedMachine.responsibleName=e[rn.FULLNAME]}),this.rowMachinesList.push(this.selectedMachine),this.dataStateChange(this.gridStateSections),this.closeEditor(n,i)):this.validationService.validateAllFormFields(this.machineFormGroup)},e.prototype.removeMachineHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){if(n.value){var i=t.rowMachinesList.indexOf(e.dataItem);-1!==i&&t.rowMachinesList.splice(i,1),t.dataStateChange(t.gridStateSections),t.idSectionOnUpdate>0&&(t.subscription$=t.machineService.getJavaGenericService().updateEntity({id:e.dataItem.id,description:e.dataItem.description,costPerHour:e.dataItem.costPerHour,sectionId:null,responsibleId:e.dataItem.responsibleId,stateMachine:e.dataItem.stateMachine},e.dataItem.id,rn.MACHINE_URL).subscribe(function(e){t.growlService.successNotification(t.translate.instant(Ln.a.SUCCESS_OPERATION))}))}})},e.prototype.cancelHandler=function(e){this.closeEditor(e.sender,e.rowIndex),this.btnEditVisible=!0,this.dataStateChange(this.gridStateSections)},e.prototype.onselectedMachineId=function(e){var t=this;void 0!==e&&this.machineService.getJavaGenericService().getEntityById(e,rn.MACHINE_URL).subscribe(function(e){t.selectedMachine=e,t.employeeService.getById(t.selectedMachine.responsibleId).subscribe(function(e){t.selectedMachine.responsibleFullName=e[rn.FULLNAME],t.machineFormGroup.patchValue(t.selectedMachine)})})},e.prototype.createSectionForm=function(e){this.formGroup=new v.FormGroup({reference:new v.FormControl(e.reference,v.Validators.required),designation:new v.FormControl(e.designation,v.Validators.required),areaId:new v.FormControl(e.areaId,v.Validators.required),operationLines:new v.FormControl(this.rowMachinesList)})},e}(),Pi=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ri(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](1,0,null,null,8,"button",[["class","noPadding btn-Add k-button"],["kendoGridAddCommand",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[2,"k-grid-add-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,2).click(n)&&o),o},null,null)),i["\u0275did"](2,9125888,null,0,m.a,[m._3,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](4,0,null,null,0,"i",[["class","fa fa-plus-circle fa-lg AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](6,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](7,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,2,0)},function(e,t){e(t,1,0,i["\u0275nov"](t,2).classButton,i["\u0275nov"](t,2).classDisabled,i["\u0275nov"](t,2).classPrimary,i["\u0275nov"](t,2).isFlat,i["\u0275nov"](t,2).isBare,i["\u0275nov"](t,2).isOutline,i["\u0275nov"](t,2).classActive,i["\u0275nov"](t,2).dir,i["\u0275nov"](t,2).commandClass),e(t,7,0,i["\u0275unv"](t,7,0,i["\u0275nov"](t,8).transform("ADD_LINE")))})}function Mi(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-machine-dropdown",[["controlName","description"]],null,[[null,"selectedMachineId"]],function(e,t,n){var i=!0;return"selectedMachineId"===t&&(i=!1!==e.component.onselectedMachineId(n)&&i),i},Di,_i)),i["\u0275did"](2,114688,null,0,Ei,[s.k,an],{form:[0,"form"],assignedToSection:[1,"assignedToSection"]},{selectedMachineId:"selectedMachineId"}),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](5,0,[["anchor",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","machineId"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){var n=t.component;e(t,2,0,n.machineFormGroup,!0),e(t,8,0,n.machineFormGroup,"machineId",i["\u0275nov"](t,5))},null)}function Ni(e){return i["\u0275vid"](0,[(e()(),i["\u0275and"](0,null,null,1,null,Mi)),i["\u0275did"](1,16384,[[13,4]],0,m._4,[[2,i.TemplateRef]],null,null)],null,null)}function Li(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","costPerHour"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.machineFormGroup,"costPerHour")},null)}function Hi(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                ","\n              "]))],null,function(e,t){e(t,0,0,t.context.dataItem.costPerHour)})}function Bi(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","responsibleFullName"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.machineFormGroup,"responsibleFullName")},null)}function ji(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                ","\n              "]))],null,function(e,t){e(t,0,0,t.context.dataItem.responsibleName)})}function zi(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","stateMachine"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.machineFormGroup,"stateMachine")},null)}function Ui(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                ","\n              "]))],null,function(e,t){e(t,0,0,t.context.dataItem.stateMachine)})}function Fi(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275eld"](1,0,null,null,3,"button",[["class","btnKendoGrid"],["kendoGridSaveCommand",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-save-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,3).click(n)&&o),o},null,null)),i["\u0275did"](2,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](3,9388032,null,0,m._88,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275eld"](4,0,null,null,0,"span",[["class","fa fa-save"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275eld"](6,0,null,null,3,"button",[["class","btnKendoGrid"],["kendoGridCancelCommand",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-cancel-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,8).click(n)&&o),o},null,null)),i["\u0275did"](7,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](8,9388032,null,0,m.l,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275eld"](9,0,null,null,0,"span",[["class","fa fa-close"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275eld"](11,0,null,null,3,"button",[["class","btnKendoGrid"],["kendoGridRemoveCommand",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-remove-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,13).click(n)&&o),o},null,null)),i["\u0275did"](12,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](13,9388032,null,0,m._82,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275eld"](14,0,null,null,0,"i",[["class","fa fa-trash-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n              "]))],function(e,t){e(t,3,0),e(t,8,0),e(t,13,0)},function(e,t){e(t,1,0,i["\u0275nov"](t,3).classButton,i["\u0275nov"](t,3).classDisabled,i["\u0275nov"](t,3).classPrimary,i["\u0275nov"](t,3).isFlat,i["\u0275nov"](t,3).isBare,i["\u0275nov"](t,3).isOutline,i["\u0275nov"](t,3).classActive,i["\u0275nov"](t,3).dir,i["\u0275nov"](t,3).visible,i["\u0275nov"](t,3).commandClass),e(t,6,0,i["\u0275nov"](t,8).classButton,i["\u0275nov"](t,8).classDisabled,i["\u0275nov"](t,8).classPrimary,i["\u0275nov"](t,8).isFlat,i["\u0275nov"](t,8).isBare,i["\u0275nov"](t,8).isOutline,i["\u0275nov"](t,8).classActive,i["\u0275nov"](t,8).dir,i["\u0275nov"](t,8).visible,i["\u0275nov"](t,8).commandClass),e(t,11,0,i["\u0275nov"](t,13).classButton,i["\u0275nov"](t,13).classDisabled,i["\u0275nov"](t,13).classPrimary,i["\u0275nov"](t,13).isFlat,i["\u0275nov"](t,13).isBare,i["\u0275nov"](t,13).isOutline,i["\u0275nov"](t,13).classActive,i["\u0275nov"](t,13).dir,i["\u0275nov"](t,13).visible,i["\u0275nov"](t,13).commandClass)})}function Gi(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,255,"div",[["class","card h-100"],["style","border: 1px solid #c0c0c0 !important;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](7,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](12,0,null,null,210,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](14,0,null,null,207,"form",[["class","form-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,16).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,16).onReset()&&o),o},null,null)),i["\u0275did"](15,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](16,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](18,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](20,0,null,null,53,"div",[["class","col-lg-12 col-sm-12 col-md-12 mr-5"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](22,0,null,null,50,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](24,0,null,null,18,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](26,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](27,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](29,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](32,0,null,null,5,"input",[["class","form-control"],["formControlName","reference"],["name","reference"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,33)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,33).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,33)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,33)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](33,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](35,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](37,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](39,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](40,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](44,0,null,null,18,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](46,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](47,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](49,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](52,0,null,null,5,"input",[["class","form-control"],["formControlName","designation"],["name","designation"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,53)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,53).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,53)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,53)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](53,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](55,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](57,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](59,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](60,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](64,0,null,null,7,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](66,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](67,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](69,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n\n      "])),(e()(),i["\u0275eld"](75,0,null,null,145,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](77,0,null,null,142,"div",[["class","tab-pane active show"],["id","home1"],["role","tabpanel"]],null,null,null,null,null)),i["\u0275did"](78,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](79,{"min-height":0,"max-height":1,"overflow-y":2}),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](81,0,null,null,137,"kendo-grid",[],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"cancel"],[null,"save"],[null,"remove"],[null,"add"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"cancel"===t&&(i=!1!==o.cancelHandler(n)&&i),"save"===t&&(i=!1!==o.saveHandler(n)&&i),"remove"===t&&(i=!1!==o.removeMachineHandler(n)&&i),"add"===t&&(i=!1!==o.addHandler(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](113,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],rowClass:[7,"rowClass"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{dataStateChange:"dataStateChange",cancel:"cancel",save:"save",remove:"remove",add:"add"}),i["\u0275qud"](603979776,1,{columns:1}),i["\u0275qud"](603979776,2,{detailTemplateChildren:1}),i["\u0275qud"](603979776,3,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,4,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,5,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,6,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,Ri)),i["\u0275did"](123,16384,[[5,4]],0,m._110,[[2,i.TemplateRef]],{position:[0,"position"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](125,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](126,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,7,{headerTemplates:1}),i["\u0275qud"](335544320,8,{footerTemplate:0}),i["\u0275qud"](603979776,9,{columnMenuTemplates:1}),i["\u0275qud"](335544320,10,{template:0}),i["\u0275qud"](335544320,11,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,12,{groupFooterTemplate:0}),i["\u0275qud"](603979776,13,{editTemplate:0}),i["\u0275qud"](335544320,14,{filterCellTemplate:0}),i["\u0275qud"](335544320,15,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ni)),i["\u0275did"](140,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](143,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](144,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,16,{headerTemplates:1}),i["\u0275qud"](335544320,17,{footerTemplate:0}),i["\u0275qud"](603979776,18,{columnMenuTemplates:1}),i["\u0275qud"](335544320,19,{template:0}),i["\u0275qud"](335544320,20,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,21,{groupFooterTemplate:0}),i["\u0275qud"](335544320,22,{editTemplate:0}),i["\u0275qud"](335544320,23,{filterCellTemplate:0}),i["\u0275qud"](335544320,24,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Li)),i["\u0275did"](158,16384,[[22,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Hi)),i["\u0275did"](161,16384,[[19,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](164,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](165,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,25,{headerTemplates:1}),i["\u0275qud"](335544320,26,{footerTemplate:0}),i["\u0275qud"](603979776,27,{columnMenuTemplates:1}),i["\u0275qud"](335544320,28,{template:0}),i["\u0275qud"](335544320,29,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,30,{groupFooterTemplate:0}),i["\u0275qud"](335544320,31,{editTemplate:0}),i["\u0275qud"](335544320,32,{filterCellTemplate:0}),i["\u0275qud"](335544320,33,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Bi)),i["\u0275did"](179,16384,[[31,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,ji)),i["\u0275did"](182,16384,[[28,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](185,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](186,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,34,{headerTemplates:1}),i["\u0275qud"](335544320,35,{footerTemplate:0}),i["\u0275qud"](603979776,36,{columnMenuTemplates:1}),i["\u0275qud"](335544320,37,{template:0}),i["\u0275qud"](335544320,38,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,39,{groupFooterTemplate:0}),i["\u0275qud"](335544320,40,{editTemplate:0}),i["\u0275qud"](335544320,41,{filterCellTemplate:0}),i["\u0275qud"](335544320,42,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,zi)),i["\u0275did"](200,16384,[[40,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Ui)),i["\u0275did"](203,16384,[[37,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n            "])),(e()(),i["\u0275eld"](206,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](207,49152,null,4,m.J,[[8,null]],{title:[0,"title"]},null),i["\u0275qud"](603979776,43,{headerTemplates:1}),i["\u0275qud"](335544320,44,{footerTemplate:0}),i["\u0275qud"](603979776,45,{columnMenuTemplates:1}),i["\u0275qud"](335544320,46,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Fi)),i["\u0275did"](216,16384,[[46,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](225,0,null,null,29,"div",[["class","fixed-card-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](227,0,null,null,26,"div",[["class","footerStyle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](229,0,null,null,23,"footer",[["class","app-footer ml-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](231,0,null,null,20,"div",[["class","w-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](233,0,null,null,17,"div",[["class","d-flex justify-content-end p-3 flex-align footer-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](235,0,null,null,8,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,236).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&o),o},null,null)),i["\u0275did"](236,671744,null,0,T.RouterLinkWithHref,[T.Router,T.ActivatedRoute,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](238,0,null,null,4,"span",[["class","btn btn-sm btn-back-to-list btn-primary"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](240,0,null,null,0,"i",[["class","fa fa-chevron-circle-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](241,null,["\n                ","\n              "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](245,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.save()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](247,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](248,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n\n\n"]))],function(e,t){var n=t.component;e(t,16,0,n.formGroup),e(t,35,0,"reference"),e(t,40,0,n.formGroup.controls.reference),e(t,55,0,"designation"),e(t,60,0,n.formGroup.controls.designation),e(t,78,0,e(t,79,0,"400px","400px","auto")),e(t,113,0,n.gridData,n.gridSettingsSections.state.take,n.gridSettingsSections.state.skip,n.gridSettingsSections.state.sort,n.gridSettingsSections.state.filter,!1,!1,n.rowCallback,!0,!1),e(t,123,0,"bottom"),e(t,126,0,i["\u0275unv"](t,126,0,i["\u0275nov"](t,136).transform(n.columnsConfigMachines[0].title)),n.columnsConfigMachines[0].field),e(t,140,0,n.isEditingMode),e(t,144,0,i["\u0275unv"](t,144,0,i["\u0275nov"](t,154).transform(n.columnsConfigMachines[1].title)),n.columnsConfigMachines[1].field),e(t,165,0,i["\u0275unv"](t,165,0,i["\u0275nov"](t,175).transform(n.columnsConfigMachines[2].title)),n.columnsConfigMachines[2].field),e(t,186,0,i["\u0275unv"](t,186,0,i["\u0275nov"](t,196).transform(n.columnsConfigMachines[3].title)),n.columnsConfigMachines[3].field),e(t,207,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,207,0,i["\u0275nov"](t,212).transform("ACTION")),"")),e(t,236,0,"/main/settings/manufacturing/section")},function(e,t){var n=t.component;e(t,7,0,i["\u0275unv"](t,7,0,i["\u0275nov"](t,8).transform(n.isUpdateMode?"EDIT_SECTION":"NEW_SECTION"))),e(t,14,0,i["\u0275nov"](t,18).ngClassUntouched,i["\u0275nov"](t,18).ngClassTouched,i["\u0275nov"](t,18).ngClassPristine,i["\u0275nov"](t,18).ngClassDirty,i["\u0275nov"](t,18).ngClassValid,i["\u0275nov"](t,18).ngClassInvalid,i["\u0275nov"](t,18).ngClassPending),e(t,27,0,i["\u0275unv"](t,27,0,i["\u0275nov"](t,28).transform("REFERENCE"))),e(t,32,0,i["\u0275nov"](t,37).ngClassUntouched,i["\u0275nov"](t,37).ngClassTouched,i["\u0275nov"](t,37).ngClassPristine,i["\u0275nov"](t,37).ngClassDirty,i["\u0275nov"](t,37).ngClassValid,i["\u0275nov"](t,37).ngClassInvalid,i["\u0275nov"](t,37).ngClassPending),e(t,47,0,i["\u0275unv"](t,47,0,i["\u0275nov"](t,48).transform("DESIGNATION"))),e(t,52,0,i["\u0275nov"](t,57).ngClassUntouched,i["\u0275nov"](t,57).ngClassTouched,i["\u0275nov"](t,57).ngClassPristine,i["\u0275nov"](t,57).ngClassDirty,i["\u0275nov"](t,57).ngClassValid,i["\u0275nov"](t,57).ngClassInvalid,i["\u0275nov"](t,57).ngClassPending),e(t,67,0,i["\u0275unv"](t,67,0,i["\u0275nov"](t,68).transform("WORKSHOP"))),e(t,81,0,i["\u0275nov"](t,113).dir,i["\u0275nov"](t,113).hostClasses,i["\u0275nov"](t,113).hostClasses,i["\u0275nov"](t,113).lockedClasses,i["\u0275nov"](t,113).virtualClasses,i["\u0275nov"](t,113).columnResizing,i["\u0275nov"](t,113).noScrollbarClass),e(t,235,0,i["\u0275nov"](t,236).target,i["\u0275nov"](t,236).href),e(t,241,0,i["\u0275unv"](t,241,0,i["\u0275nov"](t,242).transform("BACK_TO_LIST"))),e(t,248,0,i["\u0275unv"](t,248,0,i["\u0275nov"](t,249).transform("SAVE")))})}var qi=i["\u0275ccf"]("app-add-machine",Ii,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-add-machine",[],null,null,null,Gi,Pi)),i["\u0275did"](1,245760,null,0,Ii,[T.ActivatedRoute,T.Router,E.a,de.b,sn,s.k,an,Oi.a,A.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Vi=n("s9ry"),Wi=n("Upba"),Yi=n("UH8o"),Xi=n("RNf5"),Zi=n("loVl"),Ji=n("OMJi"),Ki=n("Z+ZU"),Qi=n("qEeE"),$i=n("4xF2"),eo=function(){function e(e){this.datePipe=e}return e.prototype.isNullAndUndefinedAndEmpty=function(e){if(null===e||void 0===e||""===e)return!0},e.prototype.getFilterType=function(e){return e===Qi.a.TEXT_TYPE?$i.a.FILTER_TYPES.STRING:e===Qi.a.DATE_TYPE?$i.a.FILTER_TYPES.DATE:e===Qi.a.PROD_ARTICLE_TEXT?$i.a.FILTER_TYPES.STRING:e===Qi.a.PROD_STATUS_DROPDOWN||Qi.a.PROD_ARTICLE_DROPDOWN?$i.a.FILTER_TYPES.STRING:e},e.prototype.getOperation=function(e,t,n){var i=this.getType(e,t,n);return ct.EnumValues.getNameFromValue(i===Qi.a.TEXT_TYPE?x.j:i===Qi.a.DATE_TYPE?x.g:i===Qi.a.PROD_ARTICLE_TEXT||Qi.a.PROD_ARTICLE_DROPDOWN||Qi.a.PROD_STATUS_DROPDOWN?x.e:x.h,e.operation)},e.prototype.getType=function(e,t,n){var i=t.filter(function(t){return t.columnName===e.prop}),o=n.filter(function(t){return t.columnName===e.prop});return i.length===N.a.ONE?i[N.a.ZERO].type:o.length===N.a.ONE?o[N.a.ZERO].type:void 0},e.prototype.getValue=function(e,t){return Object(Ki.c)(t)&&(e=Number.parseFloat(e).toFixed(t.minimumFractionDigits)),e},e.prototype.getSortParams=function(e){return 0===e.length?"":"&sort="+e[0].field+","+(void 0===e[0].dir?"":e[0].dir)},e}(),to=function(){function e(e,t,n,i,o,r,a,l,s,d,c,u){this.authService=e,this.employeeService=t,this.advancedSearchProduction=n,this.fabricationArrangementService=i,this.tiersService=o,this.itemService=r,this.router=a,this.swalWarrings=l,this.fb=s,this.datePipe=d,this.growlService=c,this.translate=u,this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.currentPage=N.a.ZERO,this.size=N.a.TEN,this.value="",this.currentStatus="confirmed",this.listFabs=[],this.filterFieldsColumns=[],this.filterFieldsInputs=[],this.searchType=N.a.ONE,this.sortParams="",this.filters=new Array,this.gridState={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:vt.a.FABRICATION_ID_FIELD,title:vt.a.FABRICATION_ID_TITLE,filterable:!0},{field:vt.a.FABRICATION_STATUS_FIELD,title:vt.a.FABRICATION_STATUS_TITLE,filterable:!0},{field:vt.a.FABRICATION_DATE_DELIVERY_FIELD,title:vt.a.FABRICATION_DATE_DELIVERY_TITLE,filterable:!0}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.MANUFACTURINGPermissions=B.a.MANUFATORINGPermissions,this.predicate=x.n.prepareTiersPredicate(S.a.CUSTOMER_TYPE),this.btnEditVisible=!0}return e.prototype.gridDataSource=function(e){var t=this;null!=e&&(this.currentPage=e),this.subscription$=this.fabricationArrangementService.callService(wt.a.POST,vt.a.GET_FABRICATIONARRANGEMENT_PAGEABLE+"?page="+this.currentPage+"&size="+this.size+this.sortParams,this.filters).subscribe(function(e){e.content.map(function(e){return e.status=t.translate.instant(e.status),e.dateDelivery=t.datePipe.transform(e.dateDelivery,L.a.PIPE_FORMAT_DATE__DD_MM_YYYY),e}),t.gridSettings.gridData={data:e.content,total:e.totalElements}})},e.prototype.removeHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){n.value&&t.fabricationArrangementService.getJavaGenericService().deleteEntity(e.id,vt.a.FABRICATION_URL).subscribe(function(){t.growlService.successNotification(t.translate.instant(vt.a.SUCCESS_OPERATION)),t.gridDataSource()},function(){t.growlService.ErrorNotification(t.translate.instant(vt.a.FAILURE_OPERATION))})})},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.gridDataSource(this.currentPage)},e.prototype.goPage=function(){var e=this;this.fabricationArrangementService.getJavaGenericService().getEntityList(vt.a.GET_FABRICATIONARRANGEMENT_PAGEABLE+"?page="+this.currentPage+"&size="+this.size).subscribe(function(t){t.forEach(function(t){e.itemService.getById(t.productId).subscribe(function(e){t.description=e[vt.a.FABRICATION_DESCRIPTION]}),e.employeeService.getById(t.responsableId).subscribe(function(e){t.FullName=e[vt.a.FABRICATION_RESPONSIBLE]})}),e.gridSettings.gridData={data:t.content,total:t.totalElements}})},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.goToAdvancedEdit=function(e){this.router.navigateByUrl(vt.a.URI_ADVANCED_EDIT.concat(e.id),{queryParams:Yi.filter,skipLocationChange:!0})},e.prototype.ngOnInit=function(){this.initPredicateAdvancedSearch(),this.initFilterFiledConfig(),this.gridDataSource()},e.prototype.export=function(){var e=this,t={},n={},i=[];this.subscription$=this.fabricationArrangementService.getJavaGenericService().getEntityList(vt.a.GET_FABRICATIONARRANGEMENT_PAGEABLE+"?page="+this.currentPage+"&size="+this.size).flatMap(function(t){e.listFabs=t.content;var n=[];return e.listFabs.forEach(function(e){n.push(e.responsableId),i.push(e.productId)}),e.employeeService.getEmployeesDetails(n)}).flatMap(function(n){return e.listFabs.forEach(function(e){n.forEach(function(n){e.responsableId===n.Id&&(t[e.id]=n.FullName)})}),e.itemService.getItemListDetailByIds(i)}).flatMap(function(i){return e.listFabs.forEach(function(e){i.forEach(function(t){e.productId===t.Id&&(n[e.id]=t.Description)})}),e.fabricationArrangementService.readReport(vt.a.REPORT_LIST_FAB,{responsible:t,product:n})}).subscribe(function(e){var t=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank")})},e.prototype.initPredicateAdvancedSearch=function(){this.filters=[],this.predicateAdvancedSearch=new x.n,this.predicateAdvancedSearch.Filter=new Array},e.prototype.initFilterFiledConfig=function(){this.filterFieldsColumns.push(new Zi.a(vt.a.FABRICATION_ID_TITLE,vt.a.STRING_TYPE,vt.a.FABRICATION_ID_FIELD),new Zi.a(vt.a.FABRICATION_LINE_ITEM_TITLE,vt.a.DROPDOWN_ARTICLE_TYPE,vt.a.FABRICATION_LINE_ITEM_FIELD),new Zi.a(vt.a.FABRICATION_DATE_DELIVERY_TITLE,vt.a.DATE_TYPE,vt.a.FABRICATION_DATE_DELIVERY_FIELD),new Zi.a(vt.a.FABRICATION_STATUS_TITLE,vt.a.DROPDOWN_TYPE,vt.a.FABRICATION_STATUS_FIELD))},e.prototype.prepareFiltreFromAdvancedSearch=function(e){this.predicateAdvancedSearch.Filter=this.predicateAdvancedSearch.Filter.filter(function(t){return t.prop!==e.prop}),e.isDateFiltreBetween&&this.prepareDatesFiltres(e),!e.operation||Object(Ji.isNullOrUndefined)(e.value)||e.SpecificFiltre||this.predicateAdvancedSearch.Filter.push(e)},e.prototype.prepareDatesFiltres=function(e){Object(Ki.c)(e.filtres[N.a.ZERO].value)&&this.predicateAdvancedSearch.Filter.push(e.filtres[N.a.ZERO]),Object(Ki.c)(e.filtres[N.a.ONE].value)&&this.predicateAdvancedSearch.Filter.push(e.filtres[N.a.ONE])},e.prototype.getOperatorPredicate=function(e){this.predicateAdvancedSearch.Operator=e},e.prototype.resetClickEvent=function(){this.initPredicateAdvancedSearch(),this.gridDataSource()},e.prototype.getFieldType=function(e){var t=this.advancedSearchProduction.getType(e,this.filterFieldsColumns,this.filterFieldsInputs);return this.advancedSearchProduction.getFilterType(t)},e.prototype.getOperation=function(e){return this.advancedSearchProduction.getOperation(e,this.filterFieldsColumns,this.filterFieldsInputs)},e.prototype.prepareFilter=function(){var e=this,t=new Array;return this.predicateAdvancedSearch.Filter.forEach(function(n){t.push(new Xi.a(e.getFieldType(n),e.getOperation(n),n.prop,n.value))}),t},e.prototype.searchClick=function(){this.filters=this.prepareFilter(),this.gridSettings.state.skip=N.a.ZERO,this.gridDataSource()},e}(),no=i["\u0275crt"]({encapsulation:0,styles:[["body[_ngcontent-%COMP%]{background:#efefef;font-family:Raleway,sans-serif;color:#666}main[_ngcontent-%COMP%]{width:60vw;margin:5px 10px 1px 400px}fieldset[_ngcontent-%COMP%]{padding:0 3% 7px}legend[_ngcontent-%COMP%]{padding:0 20px;font-size:1.25em;width:auto!important;color:#4b9aad!important}label[_ngcontent-%COMP%]{position:relative}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{position:absolute;clip:rect(0,0,0,0)}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]::before, input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]::before{content:'\\a0';display:inline-block;margin:.2em .5em;width:.8em;height:.8em;line-height:.75em;-webkit-transition:.5s;transition:.5s;border:1px solid silver}input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]::before{border-radius:50%}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]::before, input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]::before{content:'\\a0';background:#5bb3bb;border:1px solid #fff;-webkit-box-shadow:inset 0 0 0 1px #fff,0 0 0 1px #5bb3bb;box-shadow:inset 0 0 0 1px #fff,0 0 0 1px #5bb3bb}"]],data:{}});function io(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","row"],["style","float :right; margin-right: 40px;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](2,0,null,null,1,"app-btn-grid",[["style","margin-top: -5%;    display: inline-flex;"]],null,[[null,"exportReportEvent"]],function(e,t,n){var i=!0;return"exportReportEvent"===t&&(i=!1!==e.component.export()&&i),i},r.b,r.a)),i["\u0275did"](3,114688,null,0,a.a,[l.a,s.k,d.a,c.a,u.a],{advencedAdd:[0,"advencedAdd"],add:[1,"add"],addLink:[2,"addLink"],exportReport:[3,"exportReport"]},{exportReportEvent:"exportReportEvent"}),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,3,0,!0,!1,"add",!1)},null)}function oo(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,2,null,io)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](3,1),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,2,0,n.authService.hasAuthorities(e(t,3,0,n.MANUFACTURINGPermissions.MANUFACTURING_ADD_OF_PERMISSION)))},null)}function ro(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","las la-pen cursor-pointer edit-pencil la-lg p-3"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.goToAdvancedEdit(e.parent.context.dataItem)&&i),i},null,null))],null,null)}function ao(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-times fa-lg p-3"],["style","border: none; color: #E91E63 !important;"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.removeHandler(e.parent.context.dataItem)&&i),i},null,null))],null,null)}function lo(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,2,null,ro)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](4,1),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,2,null,ao)),i["\u0275did"](8,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](9,1),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){var n=t.component;e(t,3,0,n.authService.hasAuthorities(e(t,4,0,n.MANUFACTURINGPermissions.MANUFACTURING_EDIT_OF_PERMISSION))),e(t,8,0,n.authService.hasAuthorities(e(t,9,0,n.MANUFACTURINGPermissions.MANUFACTURING_DELETE_OF_PERMISSION)))},null)}function so(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{grid:0}),(e()(),i["\u0275eld"](1,0,null,null,141,"div",[["class","animated fadeIn"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](3,0,null,null,138,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](5,0,null,null,135,"div",[["class","col-lg-12 col-sm-12 col-md-12 col-xs-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](7,0,null,null,132,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](9,0,null,null,14,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](11,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](13,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](14,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](18,0,null,null,4,"div",[["class","d-flex flex-row mt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](20,0,null,null,1,"div",[["class","col-auto float-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275eld"](25,0,null,null,113,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](27,0,null,null,2,"app-advanced-search",[],null,[[null,"filtrePredicateToSend"],[null,"predicateOperator"],[null,"searchClickEvent"],[null,"resetClickEvent"]],function(e,t,n){var i=!0,o=e.component;return"filtrePredicateToSend"===t&&(i=!1!==o.prepareFiltreFromAdvancedSearch(n)&&i),"predicateOperator"===t&&(i=!1!==o.getOperatorPredicate(n)&&i),"searchClickEvent"===t&&(i=!1!==o.searchClick()&&i),"resetClickEvent"===t&&(i=!1!==o.resetClickEvent()&&i),i},Vi.b,Vi.a)),i["\u0275did"](28,114688,null,0,Wi.a,[],{filtreFieldsColumns:[0,"filtreFieldsColumns"],filtreFieldsInputs:[1,"filtreFieldsInputs"]},{filtrePredicateToSend:"filtrePredicateToSend",predicateOperator:"predicateOperator",searchClickEvent:"searchClickEvent",resetClickEvent:"resetClickEvent"}),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](31,0,null,null,106,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"],[null,"remove"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"remove"===t&&(i=!1!==o.removeHandler(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](63,8110080,[[1,4]],6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",remove:"remove"}),i["\u0275qud"](603979776,2,{columns:1}),i["\u0275qud"](603979776,3,{detailTemplateChildren:1}),i["\u0275qud"](603979776,4,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,5,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,6,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,7,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,oo)),i["\u0275did"](74,16384,[[6,4]],0,m._110,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](78,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](79,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,8,{headerTemplates:1}),i["\u0275qud"](335544320,9,{footerTemplate:0}),i["\u0275qud"](603979776,10,{columnMenuTemplates:1}),i["\u0275qud"](335544320,11,{template:0}),i["\u0275qud"](335544320,12,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,13,{groupFooterTemplate:0}),i["\u0275qud"](335544320,14,{editTemplate:0}),i["\u0275qud"](335544320,15,{filterCellTemplate:0}),i["\u0275qud"](335544320,16,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](93,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](94,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,17,{headerTemplates:1}),i["\u0275qud"](335544320,18,{footerTemplate:0}),i["\u0275qud"](603979776,19,{columnMenuTemplates:1}),i["\u0275qud"](335544320,20,{template:0}),i["\u0275qud"](335544320,21,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,22,{groupFooterTemplate:0}),i["\u0275qud"](335544320,23,{editTemplate:0}),i["\u0275qud"](335544320,24,{filterCellTemplate:0}),i["\u0275qud"](335544320,25,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](108,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](109,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"]},null),i["\u0275qud"](603979776,26,{headerTemplates:1}),i["\u0275qud"](335544320,27,{footerTemplate:0}),i["\u0275qud"](603979776,28,{columnMenuTemplates:1}),i["\u0275qud"](335544320,29,{template:0}),i["\u0275qud"](335544320,30,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,31,{groupFooterTemplate:0}),i["\u0275qud"](335544320,32,{editTemplate:0}),i["\u0275qud"](335544320,33,{filterCellTemplate:0}),i["\u0275qud"](335544320,34,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](125,0,null,null,10,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](126,49152,null,4,m.J,[[8,null]],{width:[0,"width"]},null),i["\u0275qud"](603979776,35,{headerTemplates:1}),i["\u0275qud"](335544320,36,{footerTemplate:0}),i["\u0275qud"](603979776,37,{columnMenuTemplates:1}),i["\u0275qud"](335544320,38,{template:0}),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,lo)),i["\u0275did"](134,16384,[[38,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,28,0,n.filterFieldsColumns,n.filterFieldsInputs),e(t,63,0,n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,"menu",!0,n.pagerSettings,!0,!0),e(t,79,0,i["\u0275unv"](t,79,0,i["\u0275nov"](t,89).transform(n.gridSettings.columnsConfig[0].title)),130,n.gridSettings.columnsConfig[0].field),e(t,94,0,i["\u0275unv"](t,94,0,i["\u0275nov"](t,104).transform(n.gridSettings.columnsConfig[1].title)),n.gridSettings.columnsConfig[1].field),e(t,109,0,i["\u0275unv"](t,109,0,i["\u0275nov"](t,119).transform(n.gridSettings.columnsConfig[2].title)),n.gridSettings.columnsConfig[2].field),e(t,126,0,170)},function(e,t){e(t,14,0,i["\u0275unv"](t,14,0,i["\u0275nov"](t,15).transform("OF_LIST"))),e(t,31,0,i["\u0275nov"](t,63).dir,i["\u0275nov"](t,63).hostClasses,i["\u0275nov"](t,63).hostClasses,i["\u0275nov"](t,63).lockedClasses,i["\u0275nov"](t,63).virtualClasses,i["\u0275nov"](t,63).columnResizing,i["\u0275nov"](t,63).noScrollbarClass)})}var co=i["\u0275ccf"]("app-list-fabrication-arrangement",to,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-list-fabrication-arrangement",[],null,null,null,so,no)),i["\u0275did"](1,114688,null,0,to,[H.a,Oi.a,eo,yt,D.a,l.a,T.Router,E.a,v.FormBuilder,h.DatePipe,A.a,s.k],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),uo=n("kiEh"),ho=n("nCB3"),po=n("LLKh"),fo=function(){},go=function(){return function(e){e&&(Object.assign(this,e),this.idItem=e.idItem)}}(),mo=n("zvGU"),vo=function(){function e(){this.ofProductLineList=[],this.mpOfsDispo=[],this.isModal=!1,this.allChildrenProduct=[]}return e.prototype.ngOnInit=function(){this.initGridDataSource()},e.prototype.initGridDataSource=function(){this.mpOfsDispo=this.dialogOptions.data[0]},e.prototype.dialogInit=function(e,t){this.isModal=!0,this.dialogOptions=t,this.data=this.dialogOptions.data,this.idOperation=this.data},e.prototype.emptyForm=function(e){e.patchValue({article:""})},e.prototype.createTaskForm=function(){this.ModelFormGroup=new v.FormGroup({article:new v.FormControl("",v.Validators.required)})},e.prototype.absoluteValue=function(e){return Math.abs(e)},e}(),yo=function(){function e(e,t,n,i,o,r,a,l,s,d,c,u,h,p,f,g,m,v,y,b,w){var C=this;this.authService=e,this.fb=t,this.modalService=n,this.productNomenclatureService=i,this.nomenclatureService=o,this.gammeService=r,this.viewContainerRef=a,this.formModalDialogService=l,this.activatedRoute=s,this.router=d,this.swalWarrings=c,this.validationService=u,this.translate=h,this.itemService=p,this.formBuilder=f,this.tiersService=g,this.growlService=m,this.datePipe=v,this.fabricationArrangementService=y,this.purchaseRequestService=b,this.detailOfService=w,this.formatDate=this.translate.instant(L.a.DATE_FORMAT),this.isUpdateMode=!1,this.isValidItem=!0,this.customerType=S.a.CUSTOMER_TYPE,this.CHOOSE_CUSTOMER_PLACEHOLDER=L.a.CHOOSE_CUSTOMER_PLACEHOLDER,this.btnEditVisible=!1,this.ofProductLineList=[],this.ofProductLineIdToDeleteList=[],this.item=new pt.a,this.isEditable=!0,this.isSave=!1,this.editMode=!1,this.isValidateButtonVisible=!1,this.isTotallyLoaded=!1,this.minQuantitySeized=N.a.ONE,this.mpOfsDispo=[],this.currentOf=new fo,this.currentPage=N.a.ZERO,this.size=N.a.TEN,this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.MANUFACTURINGPermissions=B.a.MANUFATORINGPermissions,this.gridState={skip:N.a.ZERO,take:N.a.TEN,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:vt.a.FABRICATION_LINE_ITEM_FIELD,title:vt.a.FABRICATION_LINE_ITEM_TITLE,filterable:!0},{field:vt.a.FABRICATION_LINE_QUANTITY_SEIZED_FIELD,title:vt.a.FABRICATION_LINE_QUANTITY_SEIZED_TITLE,filterable:!1},{field:vt.a.FABRICATION_LINE_QUANTITY_TO_MANUFACTURE_FIELD,title:vt.a.FABRICATION_LINE_QUANTITY_TO_MANUFACTURE_TITLE,filterable:!1},{field:vt.a.FABRICATION_LINE_UNITE_PRODUCT_FIELD,title:vt.a.FABRICATION_LINE_UNITE_PRODUCT_TITLE,filterable:!1}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.currentOf.ofProductLines=[],this.activatedRoute.params.subscribe(function(e){C.idOfOnUpdate=+e.id||N.a.ZERO,C.isUpdateMode=C.idOfOnUpdate>N.a.ZERO})}return e.prototype.addHandler=function(e){var t=e.sender;this.isValidItem=!1,this.closeEditor(t),this.initOfLineFormGroup(new go),t.addRow(this.ofLineFormGroup)},e.prototype.handleEditHandler=function(){this.editMode=!0},e.prototype.handledEditHandler=function(){this.editMode=!1},e.prototype.editHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.dataItem;this.closeEditor(t,-1),this.editedRowIndex=n,this.initOfLineFormGroup(i),t.editRow(n,this.ofLineFormGroup)},e.prototype.cancelHandler=function(e){this.closeEditor(e.sender,e.rowIndex),this.btnEditVisible=!0},Object.defineProperty(e.prototype,"id",{get:function(){return this.formGroup.get("id")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reference",{get:function(){return this.formGroup.get("reference")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idTiers",{get:function(){return this.formGroup.get("IdTiers")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateCreation",{get:function(){return this.formGroup.get("dateCreation")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateDelivery",{get:function(){return this.formGroup.get("dateDelivery")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idItem",{get:function(){return this.ofLineFormGroup.get("IdItem")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.ofLineFormGroup.get("description")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idOfDetail",{get:function(){return this.ofLineFormGroup.get("of")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quantitySeized",{get:function(){return this.ofLineFormGroup.get("quantitySeized")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quantityToManufacture",{get:function(){return this.ofLineFormGroup.get("quantityToManufacture")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unite",{get:function(){return this.ofLineFormGroup.get("unite")},enumerable:!0,configurable:!0}),e.prototype.saveHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.formGroup;this.ofLineFormGroup.valid&&this.isValidItem&&(e.isNew?this.addNewRow(i):this.setRowByIndex(i,n),t.closeRow(n),this.loadOfLineList(),this.gridSettings.gridData={data:this.ofProductLineList,total:this.ofProductLineList.length}),this.validationService.validateAllFormFields(this.ofLineFormGroup)},e.prototype.addNewRow=function(e){this.currentOf.ofProductLines.push({id:e.value.id,idItem:e.value.IdItem,description:this.item.Description,of:e.value.of,quantitySeized:e.value.quantitySeized,quantityToManufacture:e.value.quantitySeized,unite:e.value.unite,status:vt.a.OF_IN_PROGRESS}),this.setItemUnite(e.value.IdItem,this.currentOf.ofProductLines.length-1)},e.prototype.setRowByIndex=function(e,t){this.isProductExist(e,t,!0)?this.growlService.warningNotification(this.translate.instant(vt.a.IETM_ALREADY_EXIST)):(this.currentOf.ofProductLines[t].idItem=this.idItem.value,this.currentOf.ofProductLines[t].description=this.item.Description,this.currentOf.ofProductLines[t].of=this.idOfDetail.value,this.currentOf.ofProductLines[t].quantitySeized=this.quantitySeized.value,this.currentOf.ofProductLines[t].quantityToManufacture=this.quantitySeized.value,this.setItemUnite(this.idItem.value,t))},e.prototype.closeEditor=function(e,t){void 0===t&&(t=this.editedRowIndex),void 0!==t&&(e.closeRow(t),this.editedRowIndex=void 0,this.ofLineFormGroup=void 0)},e.prototype.initGridData=function(){var e=this;Object(Je.a)(this.fabricationArrangementService.getJavaGenericService().getEntityById(this.idOfOnUpdate),this.detailOfService.getJavaGenericService().getEntityList(vt.a.GET_DETAIL_OF_LIST_BY_OF_ID,this.idOfOnUpdate)).subscribe(function(t){e.currentOf=t[N.a.ZERO],e.currentOf.ofProductLines=t[N.a.ONE],e.patchOfFormGroup(t[N.a.ZERO]),e.mapOfProductLineList(),e.loadOfLineList(),e.checkOfStatus(t[0]),e.gridSettings.gridData={data:e.ofProductLineList,total:e.ofProductLineList.length}})},e.prototype.goToOfList=function(){this.router.navigateByUrl(vt.a.URI_FABRICATIONS)},e.prototype.removeProductHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){n.value&&(e.dataItem.id&&t.ofProductLineIdToDeleteList.push(e.dataItem.id),t.currentOf.ofProductLines=t.currentOf.ofProductLines.filter(function(t){return t.idItem!==e.dataItem.idItem}),t.loadOfLineList())})},e.prototype.onPageChange=function(e){this.currentPage=e.skip/this.gridState.take,this.loadOfLineList()},e.prototype.loadOfLineList=function(){this.ofProductLineList=[];for(var e=this.currentPage*this.gridState.take,t=e+this.gridState.take,n=e;n<t;n++)this.currentOf.ofProductLines[n]&&this.ofProductLineList.push(this.currentOf.ofProductLines[n]);this.gridSettings.gridData={data:this.ofProductLineList,total:this.currentOf.ofProductLines.length}},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.ngOnInit=function(){this.initOfFormGroup(),this.idOfOnUpdate>N.a.ZERO?this.initGridData():this.getLastReference()},e.prototype.onProduitSelect=function(e){if(e&&e.itemFiltredDataSource&&e.itemForm&&e.itemForm.value[In.a.ID_ITEM]){var t=e.itemFiltredDataSource.filter(function(t){return t.Id===e.itemForm.value[In.a.ID_ITEM]});t&&t.length>N.a.ZERO&&(this.item=t[N.a.ZERO],this.checkIfItemHasGamme(this.item.Id))}},e.prototype.isProductExist=function(e,t,n){var i=this;return(!n||this.currentOf.ofProductLines[t].idItem!==this.idItem.value)&&void 0!==this.currentOf.ofProductLines.find(function(e){return e.idItem===i.idItem.value})},e.prototype.setItemUnite=function(e,t){var n=this;this.purchaseRequestService.getItemDetails(e).subscribe(function(e){n.currentOf.ofProductLines[t].unite=e[_.a.PRODUCT_IdMeasureUnitNavigation][_.a.PRODUCT_Description]})},e.prototype.mapOfProductLineList=function(){var e=this,t=[];this.currentOf.ofProductLines.forEach(function(e){t.push(e.idItem)}),this.itemService.getItemListDetailByIds(t).subscribe(function(t){e.currentOf.ofProductLines.map(function(n){return n.description=e.getItemById(t,n).Description,n.unite=e.getItemById(t,n).IdUnitSalesNavigation.Label,n})},function(){},function(){e.prepareDataForModalBeforeOfValidation()})},e.prototype.getItemById=function(e,t){return e.find(function(e){return e.Id===t.idItem})},e.prototype.initOfFormGroup=function(){this.formGroup=new v.FormGroup({id:new v.FormControl({value:"",disabled:!0}),reference:new v.FormControl({value:"",disabled:!0}),dateCreation:new v.FormControl("",v.Validators.required),IdTiers:new v.FormControl("",v.Validators.required),dateDelivery:new v.FormControl("",v.Validators.required),ofProductLines:new v.FormControl(this.ofProductLineList)}),this.addDatesDependenceControls()},e.prototype.onOfBtnSaveClick=function(){var e=this;if(this.formGroup.valid&&this.isValidItem&&this.ofProductLineList.length>N.a.ZERO&&!this.checkOfHasProductLine()){var t=this.formGroup.getRawValue();t.idTiers=this.idTiers.value,t.dateCreation=this.datePipe.transform(t.dateCreation,L.a.YYYY_MM_DD_HH_MM_SS),t.dateDelivery=this.datePipe.transform(t.dateDelivery,L.a.PIPE_FORMAT_DATE_DD_MM_YYYY),t.ofProductLines=this.ofProductLineList,this.subscription$=this.fabricationArrangementService.getJavaGenericService().saveEntity(t).subscribe(function(t){e.ofProductLineList.forEach(function(e){e.of={id:t.id}}),e.detailOfService.getJavaGenericService().saveEntity(e.currentOf.ofProductLines,mo.a.DETAIL_OF_URL).subscribe(function(){e.deleteDetailOfLine(),e.growlService.successNotification(e.translate.instant(vt.a.SUCCESS_OPERATION)),e.isUpdateMode?e.goToOfList():(e.prepareDataForModalBeforeOfValidation(),e.idOfOnUpdate=t.id)})})}else this.validationService.validateAllFormFields(this.formGroup)},e.prototype.onOfValidation=function(){var e=this;this.isTotallyLoaded&&this.swalWarrings.CreateSwal(this.translate.instant(vt.a.DO_YOU_WANT_TO_VALIDATE_OF),""+this.translate.instant(L.a.ARE_YOU_SURE),L.a.YES,L.a.NO).then(function(t){t.value?e.openModalOrSaveOF():e.goToOfList()})},e.prototype.prepareDataForModalBeforeOfValidation=function(){var e=this;this.ofProductLineList.forEach(function(t){var n=new function(){};n.articleChildren=[],n.article=t.description,e.nomenclatureService.getJavaGenericService().getEntityById(t.idItem,_.a.GET_NOMENCLATURE_BY_PRODUCT_ID).flatMap(function(t){return e.productNomenclatureService.getJavaGenericService().getEntityById(t.id,I.GET_PRODUCT_BY_NOMENCLATURE)}).subscribe(function(i){var o=N.a.ZERO;i.forEach(function(r){var a=new function(){};Object(Je.a)(e.itemService.getProductById(r.productId),e.itemService.getItemWarhouseOfSelectedItem(r.productId)).subscribe(function(i){a.components=i[N.a.ZERO].Description,a.remaining_quantity=e.calculateRemainingQuantity(r,e.calculateAllAvailableQuantityAllWarehouses(i[N.a.ONE]),t.quantityToManufacture),n.articleChildren.push(a)},function(){},function(){i.length===++o&&(e.isTotallyLoaded=!0,e.isUpdateMode||e.isValidateButtonVisible||e.onOfValidation())})})}),e.mpOfsDispo.push(n)})},e.prototype.openModalOrSaveOF=function(){this.authService.hasAuthorities([this.MANUFACTURINGPermissions.MANUFACTURING_VALIDATE_OF_PERMISSION])?this.prepareModalToBeOpendOrNot()?this.validerOf():this.openModal():(this.growlService.ErrorNotification(this.translate.instant("UNAUTHRIZED_ERROR_MSG")),this.goToOfList())},e.prototype.openModal=function(){var e=this.mpOfsDispo.map(function(e){return e.articleChildren=e.articleChildren.filter(function(e){return e.remaining_quantity<N.a.ZERO}),e}),t=this.idOfOnUpdate;this.formModalDialogService.openDialog(vt.a.DISPONIBLITY_MP,vo,this.viewContainerRef,this.isUpdateMode?this.closeModal.bind(this):this.goToOfList.bind(this),[e,t],!0,L.a.MODAL_DIALOG_SIZE_L,!0)},e.prototype.calculateAllAvailableQuantityAllWarehouses=function(e){var t=0;return e.forEach(function(e){return t+=e.AvailableQuantity}),t},e.prototype.validerOf=function(){var e=this;this.subscription$=this.fabricationArrangementService.getJavaGenericService().getData(vt.a.VALIDATE_OF_URL+"?id="+this.idOfOnUpdate).subscribe(function(){e.formGroup.disable(),e.isEditable=!1,e.isValidateButtonVisible=!1,e.growlService.successNotification(e.translate.instant(vt.a.SUCCESS_OPERATION))})},e.prototype.closeModal=function(){this.modalService.closeAnyExistingModalDialog(),this.isUpdateMode=!0,this.isEditable=!0,this.isValidateButtonVisible=!0},e.prototype.calculateRemainingQuantity=function(e,t,n){return t===N.a.ZERO?N.a.ZERO:t-e.quantity*n},e.prototype.prepareModalToBeOpendOrNot=function(){return!(this.mpOfsDispo.findIndex(function(e){return e.articleChildren.findIndex(function(e){return e.remaining_quantity<N.a.ZERO})>N.a.MINUS_ONE})>N.a.MINUS_ONE)},e.prototype.checkIfItemHasGamme=function(e){var t=this;this.isValidItem=!1,this.gammeService.getJavaGenericService().getEntityById(e,Ln.a.GET_GAMME_BY_ITEM_URL).subscribe(function(){t.isValidItem=!0})},e.prototype.initOfLineFormGroup=function(e){this.ofLineFormGroup=new v.FormGroup({id:new v.FormControl(e.id),of:new v.FormControl(e.of),IdItem:new v.FormControl(e.idItem,v.Validators.required),quantitySeized:new v.FormControl(e.quantitySeized,[v.Validators.required,v.Validators.min(this.minQuantitySeized),v.Validators.pattern("[0-9]+")]),quantityToManufacture:new v.FormControl({value:e.quantityToManufacture,disabled:!0}),unite:new v.FormControl({value:e.unite,disabled:!0})})},e.prototype.patchOfFormGroup=function(e){this.formGroup.patchValue({id:e.id,reference:e.reference,dateCreation:new Date(e.dateCreation),dateDelivery:new Date(this.datePipe.transform(e.dateDelivery,L.a.YYYY_MM_DD_HH_MM_SS)),IdTiers:e.idTiers,ofProductLines:[]})},e.prototype.deleteDetailOfLine=function(){this.ofProductLineIdToDeleteList.length>N.a.ZERO&&this.detailOfService.getJavaGenericService().deleteList(vt.a.DELETE_DETAIL_OF_BY_LIST_IDS+"?ids="+this.ofProductLineIdToDeleteList).subscribe()},e.prototype.checkOfStatus=function(e){e.status===vt.a.STATUS_CREATED||e.status===vt.a.STATUS_LAUNCHED||e.status===vt.a.STATUS_PARTIALLY_LAUNCHED?(this.formGroup.disable(),this.isEditable=!1,this.isValidateButtonVisible=!1):(this.isEditable=!0,this.isValidateButtonVisible=!0)},e.prototype.addDatesDependenceControls=function(){var e=this;this.dateCreation.setValidators([v.Validators.required,Object(de.i)(new Ke.a(function(t){return t.next(e.dateDelivery.value)}))]),this.dateDelivery.setValidators([v.Validators.required,Object(de.h)(new Ke.a(function(t){return t.next(e.dateCreation.value)}))])},e.prototype.checkOfHasProductLine=function(){return this.ofProductLineList.length===N.a.ZERO&&(this.growlService.InfoNotification(this.translate.instant(vt.a.OF_DETAIL_LINE_EMPTY)),!0)},e.prototype.onUpdateAnyField=function(){this.idOfOnUpdate&&(this.isValidateButtonVisible=!1)},e.prototype.getLastReference=function(){var e=this;this.fabricationArrangementService.callService(wt.a.GET,vt.a.FABRICATION_LAST_REFERENCE).subscribe(function(t){e.formGroup.patchValue({reference:t.OF_REFERENCE})})},e.prototype.isPositiveQuantitySeized=function(e){if(!(e.keyCode>95&&e.keyCode<106||e.keyCode>47&&e.keyCode<58||8===e.keyCode))return!1},e}(),bo=i["\u0275crt"]({encapsulation:2,styles:[['.label{display:block;font-weight:700;text-indent:2px;color:#656565}.mt-0{margin-top:30px!important}.page-template{font-family:"DejaVu Sans",Arial,sans-serif;font-size:13px;position:absolute;width:100%;height:90%;top:0;left:0}.page-template .header{position:absolute;top:5px;left:5px;right:5px;border-bottom:1px solid #4032b6;color:#353485}.page-template .footer{position:absolute;bottom:30px;left:30px;right:30px;border-top:1px solid #888;text-align:center;color:#888}.k-grid{font-family:"DejaVu Sans",Arial,sans-serif}']],data:{}});function wo(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,25,"kendo-datepicker",[["class","form-control"],["formControlName","dateCreation"]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tn.f,Tn.b)),i["\u0275prd"](256,null,b.b,"kendo.datepicker",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,En.X,En.X,[]),i["\u0275did"](4,770048,null,8,En.o,[i.NgZone,b.c,i.ChangeDetectorRef,y.g,i.ElementRef,i.Renderer2,i.Injector,En.X,[2,En._2]],{format:[0,"format"]},null),i["\u0275qud"](335544320,2,{cellTemplate:0}),i["\u0275qud"](335544320,3,{monthCellTemplate:0}),i["\u0275qud"](335544320,4,{yearCellTemplate:0}),i["\u0275qud"](335544320,5,{decadeCellTemplate:0}),i["\u0275qud"](335544320,6,{centuryCellTemplate:0}),i["\u0275qud"](335544320,7,{weekNumberTemplate:0}),i["\u0275qud"](335544320,8,{headerTitleTemplate:0}),i["\u0275qud"](335544320,9,{navigationItemTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[En.o]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[En.o]),i["\u0275did"](15,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](17,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](19,0,null,null,5,"kendo-datepicker-messages",[],null,null,null,Tn.g,Tn.c)),i["\u0275prd"](6144,null,En.N,null,[En.p]),i["\u0275did"](21,770048,null,0,En.p,[b.c],{today:[0,"today"],toggle:[1,"toggle"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,4,0,t.component.formatDate),e(t,15,0,"dateCreation"),e(t,21,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,21,0,i["\u0275nov"](t,22).transform("TODAY")),""),i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,21,1,i["\u0275nov"](t,23).transform("CALENDAR.MENU_TITLE")),""))},function(e,t){e(t,0,1,[i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).disabledClass,i["\u0275nov"](t,17).ngClassUntouched,i["\u0275nov"](t,17).ngClassTouched,i["\u0275nov"](t,17).ngClassPristine,i["\u0275nov"](t,17).ngClassDirty,i["\u0275nov"](t,17).ngClassValid,i["\u0275nov"](t,17).ngClassInvalid,i["\u0275nov"](t,17).ngClassPending])})}function Co(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,25,"kendo-datepicker",[["class","form-control"],["formControlName","dateCreation"]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"valueChange"]],function(e,t,n){var i=!0;return"valueChange"===t&&(i=!1!==e.component.onUpdateAnyField()&&i),i},Tn.f,Tn.b)),i["\u0275prd"](256,null,b.b,"kendo.datepicker",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,En.X,En.X,[]),i["\u0275did"](4,770048,null,8,En.o,[i.NgZone,b.c,i.ChangeDetectorRef,y.g,i.ElementRef,i.Renderer2,i.Injector,En.X,[2,En._2]],{format:[0,"format"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,10,{cellTemplate:0}),i["\u0275qud"](335544320,11,{monthCellTemplate:0}),i["\u0275qud"](335544320,12,{yearCellTemplate:0}),i["\u0275qud"](335544320,13,{decadeCellTemplate:0}),i["\u0275qud"](335544320,14,{centuryCellTemplate:0}),i["\u0275qud"](335544320,15,{weekNumberTemplate:0}),i["\u0275qud"](335544320,16,{headerTitleTemplate:0}),i["\u0275qud"](335544320,17,{navigationItemTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[En.o]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[En.o]),i["\u0275did"](15,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](17,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](19,0,null,null,5,"kendo-datepicker-messages",[],null,null,null,Tn.g,Tn.c)),i["\u0275prd"](6144,null,En.N,null,[En.p]),i["\u0275did"](21,770048,null,0,En.p,[b.c],{today:[0,"today"],toggle:[1,"toggle"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,4,0,t.component.formatDate),e(t,15,0,"dateCreation"),e(t,21,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,21,0,i["\u0275nov"](t,22).transform("TODAY")),""),i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,21,1,i["\u0275nov"](t,23).transform("CALENDAR.MENU_TITLE")),""))},function(e,t){e(t,0,1,[i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).disabledClass,i["\u0275nov"](t,17).ngClassUntouched,i["\u0275nov"](t,17).ngClassTouched,i["\u0275nov"](t,17).ngClassPristine,i["\u0275nov"](t,17).ngClassDirty,i["\u0275nov"](t,17).ngClassValid,i["\u0275nov"](t,17).ngClassInvalid,i["\u0275nov"](t,17).ngClassPending])})}function xo(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,25,"kendo-datepicker",[["class","form-control"],["formControlName","dateDelivery"]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tn.f,Tn.b)),i["\u0275prd"](256,null,b.b,"kendo.datepicker",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,En.X,En.X,[]),i["\u0275did"](4,770048,null,8,En.o,[i.NgZone,b.c,i.ChangeDetectorRef,y.g,i.ElementRef,i.Renderer2,i.Injector,En.X,[2,En._2]],{format:[0,"format"]},null),i["\u0275qud"](335544320,18,{cellTemplate:0}),i["\u0275qud"](335544320,19,{monthCellTemplate:0}),i["\u0275qud"](335544320,20,{yearCellTemplate:0}),i["\u0275qud"](335544320,21,{decadeCellTemplate:0}),i["\u0275qud"](335544320,22,{centuryCellTemplate:0}),i["\u0275qud"](335544320,23,{weekNumberTemplate:0}),i["\u0275qud"](335544320,24,{headerTitleTemplate:0}),i["\u0275qud"](335544320,25,{navigationItemTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[En.o]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[En.o]),i["\u0275did"](15,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](17,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](19,0,null,null,5,"kendo-datepicker-messages",[],null,null,null,Tn.g,Tn.c)),i["\u0275prd"](6144,null,En.N,null,[En.p]),i["\u0275did"](21,770048,null,0,En.p,[b.c],{today:[0,"today"],toggle:[1,"toggle"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,4,0,t.component.formatDate),e(t,15,0,"dateDelivery"),e(t,21,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,21,0,i["\u0275nov"](t,22).transform("TODAY")),""),i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,21,1,i["\u0275nov"](t,23).transform("CALENDAR.MENU_TITLE")),""))},function(e,t){e(t,0,1,[i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).disabledClass,i["\u0275nov"](t,17).ngClassUntouched,i["\u0275nov"](t,17).ngClassTouched,i["\u0275nov"](t,17).ngClassPristine,i["\u0275nov"](t,17).ngClassDirty,i["\u0275nov"](t,17).ngClassValid,i["\u0275nov"](t,17).ngClassInvalid,i["\u0275nov"](t,17).ngClassPending])})}function So(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,25,"kendo-datepicker",[["class","form-control"],["formControlName","dateDelivery"]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"valueChange"]],function(e,t,n){var i=!0;return"valueChange"===t&&(i=!1!==e.component.onUpdateAnyField()&&i),i},Tn.f,Tn.b)),i["\u0275prd"](256,null,b.b,"kendo.datepicker",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,En.X,En.X,[]),i["\u0275did"](4,770048,null,8,En.o,[i.NgZone,b.c,i.ChangeDetectorRef,y.g,i.ElementRef,i.Renderer2,i.Injector,En.X,[2,En._2]],{format:[0,"format"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,26,{cellTemplate:0}),i["\u0275qud"](335544320,27,{monthCellTemplate:0}),i["\u0275qud"](335544320,28,{yearCellTemplate:0}),i["\u0275qud"](335544320,29,{decadeCellTemplate:0}),i["\u0275qud"](335544320,30,{centuryCellTemplate:0}),i["\u0275qud"](335544320,31,{weekNumberTemplate:0}),i["\u0275qud"](335544320,32,{headerTitleTemplate:0}),i["\u0275qud"](335544320,33,{navigationItemTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[En.o]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[En.o]),i["\u0275did"](15,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](17,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](19,0,null,null,5,"kendo-datepicker-messages",[],null,null,null,Tn.g,Tn.c)),i["\u0275prd"](6144,null,En.N,null,[En.p]),i["\u0275did"](21,770048,null,0,En.p,[b.c],{today:[0,"today"],toggle:[1,"toggle"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,4,0,t.component.formatDate),e(t,15,0,"dateDelivery"),e(t,21,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,21,0,i["\u0275nov"](t,22).transform("TODAY")),""),i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,21,1,i["\u0275nov"](t,23).transform("CALENDAR.MENU_TITLE")),""))},function(e,t){e(t,0,1,[i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).wrapperClasses,i["\u0275nov"](t,4).disabledClass,i["\u0275nov"](t,17).ngClassUntouched,i["\u0275nov"](t,17).ngClassTouched,i["\u0275nov"](t,17).ngClassPristine,i["\u0275nov"](t,17).ngClassDirty,i["\u0275nov"](t,17).ngClassValid,i["\u0275nov"](t,17).ngClassInvalid,i["\u0275nov"](t,17).ngClassPending])})}function To(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,11,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"],["id","addButton1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](2,0,null,null,8,"a",[["class","btn-Add k-button btn btn-add"],["id","addButton2"],["kendoGridAddCommand",""],["style"," border: 2px double #4c9aae!important;"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[2,"k-grid-add-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,3).click(n)&&o),o},null,null)),i["\u0275did"](3,9125888,null,0,m.a,[m._3,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](5,0,null,null,0,"i",[["class","fa fa-plus fa AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](7,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](8,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){e(t,3,0)},function(e,t){e(t,2,0,i["\u0275nov"](t,3).classButton,i["\u0275nov"](t,3).classDisabled,i["\u0275nov"](t,3).classPrimary,i["\u0275nov"](t,3).isFlat,i["\u0275nov"](t,3).isBare,i["\u0275nov"](t,3).isOutline,i["\u0275nov"](t,3).classActive,i["\u0275nov"](t,3).dir,i["\u0275nov"](t,3).commandClass),e(t,8,0,i["\u0275unv"](t,8,0,i["\u0275nov"](t,9).transform("ADD_LINE")))})}function Eo(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,To)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "]))],function(e,t){e(t,2,0,t.component.isEditable)},null)}function _o(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](2,0,null,null,2,"app-dropdown-product-items",[],null,[[null,"Selected"],[null,"afterValueChanged"],[null,"input"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,4).onValueChange(n)&&o),"Selected"===t&&(o=!1!==r.onProduitSelect(n)&&o),"afterValueChanged"===t&&(o=!1!==r.onUpdateAnyField()&&o),o},$.b,$.a)),i["\u0275did"](3,770048,[[1,4]],0,ee.a,[l.a,k.a,te.a,ne.a,ie.a,oe.a,re.a,i.ElementRef,ae.a],{itemForm:[0,"itemForm"],source:[1,"source"],activeKeyPress:[2,"activeKeyPress"]},{Selected:"Selected"}),i["\u0275did"](4,147456,null,0,on.a,[],null,{afterValueChanged:"afterValueChanged"}),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](6,0,[["anchorIdItem",1]],null,0,"i",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](8,0,null,null,2,"app-control-message-grid-cell",[["controlName","IdItem"]],null,null,null,ce.b,ce.a)),i["\u0275did"](9,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){var n=t.component;e(t,3,0,n.ofLineFormGroup,"OF",!0),e(t,9,0,n.ofLineFormGroup,"IdItem",i["\u0275nov"](t,6))},null)}function ko(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,15,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](2,0,null,null,6,"input",[["class","form-control"],["formControlName","quantitySeized"],["name","quantitySeized"],["type","number"]],[[8,"min",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,3)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,3).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,3)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,3)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,4).onChange(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,4).onChange(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,4).onTouched()&&o),"keydown"===t&&(o=!1!==r.isPositiveQuantitySeized(n)&&o),"input"===t&&(o=!1!==r.onUpdateAnyField()&&o),o},null,null)),i["\u0275did"](3,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](4,16384,null,0,v["\u0275bc"],[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v["\u0275bc"]]),i["\u0275did"](6,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](8,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](10,0,[["anchorQuantitySeized",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](12,0,null,null,2,"app-control-message-grid-cell",[["controlName","quantitySeized"]],null,null,null,ce.b,ce.a)),i["\u0275did"](13,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){var n=t.component;e(t,6,0,"quantitySeized"),e(t,13,0,n.ofLineFormGroup,"quantitySeized",i["\u0275nov"](t,10))},function(e,t){e(t,2,0,t.component.minQuantitySeized,i["\u0275nov"](t,8).ngClassUntouched,i["\u0275nov"](t,8).ngClassTouched,i["\u0275nov"](t,8).ngClassPristine,i["\u0275nov"](t,8).ngClassDirty,i["\u0275nov"](t,8).ngClassValid,i["\u0275nov"](t,8).ngClassInvalid,i["\u0275nov"](t,8).ngClassPending)})}function Do(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,15,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](2,0,null,null,6,"input",[["class","form-control"],["formControlName","quantityToManufacture"],["name","quantityToManufacture"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,3)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,3).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,3)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,3)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,4).onChange(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,4).onChange(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,4).onTouched()&&o),o},null,null)),i["\u0275did"](3,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](4,16384,null,0,v["\u0275bc"],[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v["\u0275bc"]]),i["\u0275did"](6,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](8,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](10,0,[["anchorQuantityToManufacture",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](12,0,null,null,2,"app-control-message-grid-cell",[["controlName","quantityToManufacture"]],null,null,null,ce.b,ce.a)),i["\u0275did"](13,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){var n=t.component;e(t,6,0,"quantityToManufacture"),e(t,13,0,n.ofLineFormGroup,"quantityToManufacture",i["\u0275nov"](t,10))},function(e,t){e(t,2,0,i["\u0275nov"](t,8).ngClassUntouched,i["\u0275nov"](t,8).ngClassTouched,i["\u0275nov"](t,8).ngClassPristine,i["\u0275nov"](t,8).ngClassDirty,i["\u0275nov"](t,8).ngClassValid,i["\u0275nov"](t,8).ngClassInvalid,i["\u0275nov"](t,8).ngClassPending)})}function Ao(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,14,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](2,0,null,null,5,"input",[["class","form-control"],["formControlName","unite"],["name","unite"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,3)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,3).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,3)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,3)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](3,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](5,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](7,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](9,0,[["anchorUnite",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](11,0,null,null,2,"app-control-message-grid-cell",[["controlName","unite"]],null,null,null,ce.b,ce.a)),i["\u0275did"](12,114688,null,0,ue.a,[],{group:[0,"group"],controlName:[1,"controlName"],anchor:[2,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){var n=t.component;e(t,5,0,"unite"),e(t,12,0,n.ofLineFormGroup,"unite",i["\u0275nov"](t,9))},function(e,t){e(t,2,0,i["\u0275nov"](t,7).ngClassUntouched,i["\u0275nov"](t,7).ngClassTouched,i["\u0275nov"](t,7).ngClassPristine,i["\u0275nov"](t,7).ngClassDirty,i["\u0275nov"](t,7).ngClassValid,i["\u0275nov"](t,7).ngClassInvalid,i["\u0275nov"](t,7).ngClassPending)})}function Oo(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](1,0,null,null,17,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,3).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,3).onReset()&&o),o},null,null)),i["\u0275did"](2,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](3,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](5,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,_o)),i["\u0275did"](8,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ko)),i["\u0275did"](11,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Do)),i["\u0275did"](14,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ao)),i["\u0275did"](17,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){e(t,3,0,t.component.ofLineFormGroup),e(t,8,0,"description"===t.parent.context.$implicit.field),e(t,11,0,"quantitySeized"===t.parent.context.$implicit.field),e(t,14,0,"quantityToManufacture"===t.parent.context.$implicit.field),e(t,17,0,"unite"===t.parent.context.$implicit.field)},function(e,t){e(t,1,0,i["\u0275nov"](t,5).ngClassUntouched,i["\u0275nov"](t,5).ngClassTouched,i["\u0275nov"](t,5).ngClassPristine,i["\u0275nov"](t,5).ngClassDirty,i["\u0275nov"](t,5).ngClassValid,i["\u0275nov"](t,5).ngClassInvalid,i["\u0275nov"](t,5).ngClassPending)})}function Io(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](1,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],format:[3,"format"],filter:[4,"filter"],filterable:[5,"filterable"]},null),i["\u0275qud"](603979776,40,{headerTemplates:1}),i["\u0275qud"](335544320,41,{footerTemplate:0}),i["\u0275qud"](603979776,42,{columnMenuTemplates:1}),i["\u0275qud"](335544320,43,{template:0}),i["\u0275qud"](335544320,44,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,45,{groupFooterTemplate:0}),i["\u0275qud"](335544320,46,{editTemplate:0}),i["\u0275qud"](335544320,47,{filterCellTemplate:0}),i["\u0275qud"](335544320,48,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[34,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](0,null,null,1,null,Oo)),i["\u0275did"](15,16384,[[46,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n        "]))],function(e,t){e(t,1,0,i["\u0275unv"](t,1,0,i["\u0275nov"](t,11).transform(t.context.$implicit.title)),t.context.$implicit._width,t.context.$implicit.field,t.context.$implicit.format,t.context.$implicit.filter,t.context.$implicit.filterable)},null)}function Po(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,7,"button",[["dir","ltr"],["kendoGridEditCommand",""],["style","background-color: white;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-edit-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,4).click(n)&&o),"click"===t&&(o=!1!==r.handleEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](2,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](3,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](4,9388032,null,0,m._2,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](6,0,null,null,0,"i",[["class","las la-pen cursor-pointer edit-pencil la-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,2,0,"ltr"),e(t,4,0)},function(e,t){e(t,0,1,[i["\u0275nov"](t,2).dir,i["\u0275nov"](t,4).classButton,i["\u0275nov"](t,4).classDisabled,i["\u0275nov"](t,4).classPrimary,i["\u0275nov"](t,4).isFlat,i["\u0275nov"](t,4).isBare,i["\u0275nov"](t,4).isOutline,i["\u0275nov"](t,4).classActive,i["\u0275nov"](t,4).dir,i["\u0275nov"](t,4).visible,i["\u0275nov"](t,4).commandClass])})}function Ro(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Po)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](4,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridSaveCommand",""]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-save-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,8).click(n)&&o),"click"===t&&(o=!1!==r.handledEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](6,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](7,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](8,9388032,null,0,m._88,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],{disabled:[0,"disabled"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](10,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-check fa-lg AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](13,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridCancelCommand",""],["style","border: none; color: #E91E63 !important;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-cancel-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,17).click(n)&&o),"click"===t&&(o=!1!==r.handledEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](15,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](16,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](17,9388032,null,0,m.l,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](19,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-ban fa-lg"],["style","color: #E91E63;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](22,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridRemoveCommand",""],["style","border: none; color: #E91E63 !important;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-remove-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,26).click(n)&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](24,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](25,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](26,9388032,null,0,m._82,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](28,0,null,null,0,"i",[["class","fa fa-times fa-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){var n=t.component;e(t,2,0,!n.editMode),e(t,6,0,"ltr"),e(t,8,0,!n.isValidItem),e(t,15,0,"ltr"),e(t,17,0),e(t,24,0,"ltr"),e(t,26,0)},function(e,t){e(t,4,1,[i["\u0275nov"](t,6).dir,i["\u0275nov"](t,8).classButton,i["\u0275nov"](t,8).classDisabled,i["\u0275nov"](t,8).classPrimary,i["\u0275nov"](t,8).isFlat,i["\u0275nov"](t,8).isBare,i["\u0275nov"](t,8).isOutline,i["\u0275nov"](t,8).classActive,i["\u0275nov"](t,8).dir,i["\u0275nov"](t,8).visible,i["\u0275nov"](t,8).commandClass]),e(t,13,1,[i["\u0275nov"](t,15).dir,i["\u0275nov"](t,17).classButton,i["\u0275nov"](t,17).classDisabled,i["\u0275nov"](t,17).classPrimary,i["\u0275nov"](t,17).isFlat,i["\u0275nov"](t,17).isBare,i["\u0275nov"](t,17).isOutline,i["\u0275nov"](t,17).classActive,i["\u0275nov"](t,17).dir,i["\u0275nov"](t,17).visible,i["\u0275nov"](t,17).commandClass]),e(t,22,1,[i["\u0275nov"](t,24).dir,i["\u0275nov"](t,26).classButton,i["\u0275nov"](t,26).classDisabled,i["\u0275nov"](t,26).classPrimary,i["\u0275nov"](t,26).isFlat,i["\u0275nov"](t,26).isBare,i["\u0275nov"](t,26).isOutline,i["\u0275nov"](t,26).classActive,i["\u0275nov"](t,26).dir,i["\u0275nov"](t,26).visible,i["\u0275nov"](t,26).commandClass])})}function Mo(e){return i["\u0275vid"](0,[(e()(),i["\u0275and"](0,null,null,1,null,Ro)),i["\u0275did"](1,16384,[[52,4]],0,m.n,[[2,i.TemplateRef]],null,null)],null,null)}function No(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onOfBtnSaveClick()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ","\n                "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("SAVE_FABRICATION_ORDRE")))})}function Lo(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onOfBtnSaveClick()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ","\n                "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("EDIT_FABRICATION_ORDRE")))})}function Ho(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onOfValidation()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ","\n                "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,0,0,!t.component.isTotallyLoaded),e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("VALIDATE_FABRICATION_ORDRE")))})}function Bo(e){return i["\u0275vid"](0,[i["\u0275qud"](671088640,1,{itemDropDown:0}),(e()(),i["\u0275eld"](1,0,null,null,203,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](3,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](5,0,null,null,5,"div",[["class","col-sm-12 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"h3",[["class","card-title mb-0"],["style"," float:left;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](8,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](13,0,null,null,190,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](15,0,null,null,187,"form",[["class","form-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,17).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,17).onReset()&&o),o},null,null)),i["\u0275did"](16,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](17,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](19,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](21,0,null,null,80,"div",[["class","col-lg-12 col-sm-12 col-md-12 mr-5"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](23,0,null,null,77,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](25,0,null,null,18,"div",[["class","col-lg-6 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](27,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](28,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](30,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](33,0,null,null,5,"input",[["class","form-control"],["formControlName","reference"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,34)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,34).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,34)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,34)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](34,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](36,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](38,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](40,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](41,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](45,0,null,null,17,"div",[["class","col-lg-6 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](47,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](48,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](50,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,wo)),i["\u0275did"](54,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Co)),i["\u0275did"](57,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](59,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](60,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275eld"](64,0,null,null,16,"div",[["class","col-lg-6 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](66,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](67,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](69,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](72,16777216,null,null,3,"app-supplier-dropdown",[],null,[[null,"afterValueChanged"],[null,"input"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,74).onValueChange(n)&&o),"afterValueChanged"===t&&(o=!1!==r.onUpdateAnyField()&&o),o},uo.b,uo.a)),i["\u0275did"](73,4833280,null,0,ho.a,[D.a,po.a,i.ViewContainerRef,oe.a,s.k,H.a],{itemForm:[0,"itemForm"],type:[1,"type"],selectedValue:[2,"selectedValue"],placeholder:[3,"placeholder"]},null),i["\u0275did"](74,147456,null,0,on.a,[],null,{afterValueChanged:"afterValueChanged"}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](77,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](78,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](82,0,null,null,17,"div",[["class","col-lg-6 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](84,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](85,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](87,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,xo)),i["\u0275did"](91,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,So)),i["\u0275did"](94,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](96,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](97,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](103,0,null,null,61,"kendo-grid",[["filterable","menu"],["style","width: 100%;height:100%;"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"],[null,"edit"],[null,"cancel"],[null,"save"],[null,"remove"],[null,"add"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"edit"===t&&(i=!1!==o.editHandler(n)&&i),"cancel"===t&&(i=!1!==o.cancelHandler(n)&&i),"save"===t&&(i=!1!==o.saveHandler(n)&&i),"remove"===t&&(i=!1!==o.removeProductHandler(n)&&i),"add"===t&&(i=!1!==o.addHandler(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](135,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",edit:"edit",cancel:"cancel",save:"save",remove:"remove",add:"add"}),i["\u0275qud"](603979776,34,{columns:1}),i["\u0275qud"](603979776,35,{detailTemplateChildren:1}),i["\u0275qud"](603979776,36,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,37,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,38,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,39,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275and"](0,null,null,1,null,Eo)),i["\u0275did"](146,16384,[[38,4]],0,m._110,[[2,i.TemplateRef]],{position:[0,"position"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Io)),i["\u0275did"](150,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](152,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](153,49152,null,4,m.J,[[8,null]],{title:[0,"title"]},null),i["\u0275qud"](603979776,49,{headerTemplates:1}),i["\u0275qud"](335544320,50,{footerTemplate:0}),i["\u0275qud"](603979776,51,{columnMenuTemplates:1}),i["\u0275qud"](603979776,52,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[34,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Mo)),i["\u0275did"](162,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](167,0,null,null,33,"div",[["class","fixed-card-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](169,0,null,null,30,"div",[["class","footerStyle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](171,0,null,null,27,"footer",[["class","app-footer ml-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](173,0,null,null,24,"div",[["class","w-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](175,0,null,null,21,"div",[["class","d-flex justify-content-end p-3 flex-align footer-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](177,0,null,null,8,"a",[["routerLink","/main/manufacturing/fabricationArrangement"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,178).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&o),o},null,null)),i["\u0275did"](178,671744,null,0,T.RouterLinkWithHref,[T.Router,T.ActivatedRoute,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](180,0,null,null,4,"span",[["class","btn btn-sm btn-back-to-list btn-primary"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](182,0,null,null,0,"i",[["class","fa fa-chevron-circle-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](183,null,[" ","\n              "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,No)),i["\u0275did"](188,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Lo)),i["\u0275did"](191,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,2,null,Ho)),i["\u0275did"](194,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](195,1),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,17,0,n.formGroup),e(t,36,0,"reference"),e(t,41,0,n.formGroup.controls.reference),e(t,54,0,!n.isUpdateMode),e(t,57,0,n.isUpdateMode),e(t,60,0,n.formGroup.controls.dateCreation),e(t,73,0,n.formGroup,n.customerType,n.selectedSupplier,n.CHOOSE_CUSTOMER_PLACEHOLDER),e(t,78,0,n.formGroup.controls.IdTiers),e(t,91,0,!n.isUpdateMode),e(t,94,0,n.isUpdateMode),e(t,97,0,n.formGroup.controls.dateDelivery),e(t,135,0,n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,"menu",!0,n.pagerSettings,!0,!0),e(t,146,0,"bottom"),e(t,150,0,n.gridSettings.columnsConfig),e(t,153,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,153,0,i["\u0275nov"](t,158).transform("ACTION")),"")),e(t,162,0,n.isEditable),e(t,178,0,"/main/manufacturing/fabricationArrangement"),e(t,188,0,!n.isUpdateMode&&n.isEditable),e(t,191,0,n.isUpdateMode&&n.isEditable),e(t,194,0,n.isValidateButtonVisible&&n.authService.hasAuthorities(e(t,195,0,n.MANUFACTURINGPermissions.MANUFACTURING_VALIDATE_OF_PERMISSION)))},function(e,t){var n=t.component;e(t,8,0,i["\u0275unv"](t,8,0,i["\u0275nov"](t,9).transform(n.isUpdateMode?"EDIT_OF":"CREATION_OF"))),e(t,15,0,i["\u0275nov"](t,19).ngClassUntouched,i["\u0275nov"](t,19).ngClassTouched,i["\u0275nov"](t,19).ngClassPristine,i["\u0275nov"](t,19).ngClassDirty,i["\u0275nov"](t,19).ngClassValid,i["\u0275nov"](t,19).ngClassInvalid,i["\u0275nov"](t,19).ngClassPending),e(t,28,0,i["\u0275unv"](t,28,0,i["\u0275nov"](t,29).transform("FABRICATION_ID"))),e(t,33,0,i["\u0275nov"](t,38).ngClassUntouched,i["\u0275nov"](t,38).ngClassTouched,i["\u0275nov"](t,38).ngClassPristine,i["\u0275nov"](t,38).ngClassDirty,i["\u0275nov"](t,38).ngClassValid,i["\u0275nov"](t,38).ngClassInvalid,i["\u0275nov"](t,38).ngClassPending),e(t,48,0,i["\u0275unv"](t,48,0,i["\u0275nov"](t,49).transform("FABRICATION_CREATION_DATE"))),e(t,67,0,i["\u0275unv"](t,67,0,i["\u0275nov"](t,68).transform("CLIENT"))),e(t,85,0,i["\u0275unv"](t,85,0,i["\u0275nov"](t,86).transform("FABRICATION_DATE_DELIVERY"))),e(t,103,0,i["\u0275nov"](t,135).dir,i["\u0275nov"](t,135).hostClasses,i["\u0275nov"](t,135).hostClasses,i["\u0275nov"](t,135).lockedClasses,i["\u0275nov"](t,135).virtualClasses,i["\u0275nov"](t,135).columnResizing,i["\u0275nov"](t,135).noScrollbarClass),e(t,177,0,i["\u0275nov"](t,178).target,i["\u0275nov"](t,178).href),e(t,183,0,i["\u0275unv"](t,183,0,i["\u0275nov"](t,184).transform("BACK_TO_LIST")))})}var jo,zo,Uo=i["\u0275ccf"]("app-add-fabication-arrangement",yo,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,16777216,null,null,1,"app-add-fabication-arrangement",[],null,null,null,Bo,bo)),i["\u0275did"](1,114688,null,0,yo,[H.a,v.FormBuilder,re.a,R,k.a,te.a,i.ViewContainerRef,oe.a,T.ActivatedRoute,T.Router,E.a,de.b,s.k,l.a,v.FormBuilder,D.a,A.a,h.DatePipe,yt,ft.a,ie.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]);!function(e){e.DETAIL_OF_IN_PROGRESS="DOF_IN_PROGRESS",e.DETAIL_OF_CREATED="DOF_CREATED"}(jo||(jo={})),function(e){e.OF_IN_PROGRESS="OF_IN_PROGRESS",e.OF_CREATED="OF_CREATED",e.OF_PARTIALLY_LAUNCHED="OF_PARTIALLY_LAUNCHED"}(zo||(zo={}));var Fo=function(e){function t(t,n){var i=e.call(this,t,n,Ln.a.MANUFACTURING,mo.a.ENTITY)||this;return i.sectionFab="manufacturing",i.endpointFab="Of",i}return Object(O.__extends)(t,e),t}(P.a),Go=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},qo=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},Vo=function(){function e(e,t,n,i,o,r,a,l,s,d,c){this.fabricationArrangementService=e,this.tiersService=t,this.itemService=n,this.swalWarrings=i,this.validationService=o,this.detailOfService=r,this.ofService=a,this.growlService=l,this.userService=s,this.translate=d,this.datePipe=c,this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.currentPage=N.a.ZERO,this.size=N.a.TEN,this.value="",this.currentStatus="confirmed",this.listFabs=[],this.filterType="allOF",this.isChecked=!1,this.selectedArticles=[],this.listUsers=[],this.formatDate=this.translate.instant(L.a.DATE_FORMAT),this.gridState={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.gridState2={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.gridState3={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:vt.a.FABRICATION_ID_OF_FIELD,title:vt.a.FABRICATION_ID_TITLE,filterable:!0},{field:vt.a.FABRICATION_REF_FIELD,title:vt.a.FABRICATION_REF_TITLE,filterable:!0},{field:vt.a.FABRICATION_QTY_FIELD,title:vt.a.FABRICATION_QTY_TITLE,filterable:!0},{field:vt.a.FABRICATION_CREATION_DATE_FIELD,title:vt.a.FABRICATION_CREATION_DATE_TITLE,filterable:!0}],this.columnsConfig2=[{field:vt.a.FABRICATION_REF_FIELD,title:vt.a.FABRICATION_REF_TITLE,filterable:!0},{field:vt.a.FABRICATION_QTY_TOTAL_FIELD,title:vt.a.FABRICATION_QTY_TOTAL_TITLE,filterable:!0},{field:vt.a.FABRICATION_CREER_FIELD,title:vt.a.FABRICATION_CREER_TITLE,filterable:!0},{field:vt.a.FABRICATION_LANCER_FIELD,title:vt.a.FABRICATION_LANCER_TITLE,filterable:!0}],this.columnsConfig3=[{field:vt.a.FABRICATION_ID_OF_FIELD,title:vt.a.FABRICATION_ID_TITLE,filterable:!0},{field:vt.a.FABRICATION_QTY_FIELD,title:vt.a.FABRICATION_QTY_TITLE,filterable:!0},{field:vt.a.FABRICATION_CREATION_DATE_FIELD,title:vt.a.FABRICATION_CREATION_DATE_TITLE,filterable:!0}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.gridSettings2={state:this.gridState2,columnsConfig:this.columnsConfig2},this.gridSettings3={state:this.gridState3,columnsConfig:this.columnsConfig3},this.predicate=x.n.prepareTiersPredicate(S.a.CUSTOMER_TYPE),this.formGroup=new v.FormGroup({matricule:new v.FormControl("",v.Validators.required),launchingDate:new v.FormControl("",v.Validators.required),responsibleId:new v.FormControl("",v.Validators.required),launchingHour:new v.FormControl("",v.Validators.required)})}return e.prototype.allDetailOfDataSource=function(e,t){var n=this;null!=t&&(this.currentPage=t),this.currentStatus=e,this.subscription$=this.fabricationArrangementService.getJavaGenericService().getEntityList(vt.a.GET_DETAIL_FABRICATIONARRANGEMENT_NOT_LAUNCHED_PAGEABLE+"?page="+this.currentPage+"&size="+this.size).subscribe(function(e){e.content=e.content.filter(function(e){return e.status===jo.DETAIL_OF_CREATED}),e.content.map(function(e){return n.itemService.getProductById(e.idItem).subscribe(function(t){e.ref_article=t.Description}),e.id_of=e.of.id,e.reference=e.of.reference,e.creationDate_of=e.of.createdDate,e.isChecked=!1,e}),n.gridSettings.gridData={data:e.content,total:e.totalElements},n.size=N.a.TEN})},e.prototype.onPageAllDOFChange=function(e){this.currentPage=e.skip/10,this.size=e.take,this.allDetailOfDataSource(this.currentStatus)},e.prototype.onPageByItemChange=function(e){this.gridSettings3.state=this.gridState3,this.gridSettings2.state.skip=e.skip,this.currentPage=e.skip/10,this.size=e.take,this.DetailOfByItemDataSource(this.currentStatus)},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.ngOnInit=function(){var e=this;this.userService.getAllUserWithoutState().subscribe(function(t){e.listUsers=t.data}),this.allDetailOfDataSource()},e.prototype.filterOF=function(e){this.size=N.a.TEN,this.currentPage=N.a.ZERO,this.gridSettings.state=this.gridState,this.gridSettings2.state=this.gridState2,this.gridSettings3.state=this.gridState3,this.filterType=e,this.selectedArticles=[],"allOF"===this.filterType?this.allDetailOfDataSource():this.DetailOfByItemDataSource()},e.prototype.DetailOfByItemDataSource=function(e,t){var n=this;this.gridSettings3.gridData={data:[],total:0},null!=t&&(this.currentPage=t),this.currentStatus=e,this.subscription$=this.detailOfService.callService(wt.a.GET,vt.a.GET_DETAIL_FABRICATIONARRANGEMENT_PAGEABLE+"GroupByItem?page="+ +this.currentPage+"&size="+this.size).subscribe(function(e){e.content.map(function(e){return n.itemService.getProductById(e.idItem).subscribe(function(t){e.ref_article=t.Description}),e.creer=e.nbTotalOf,e.qty_total=e.nbtotalQuantityToManufacture,e.lancer=e.nbOfLaunched,e.selectedOf=[],e}),n.gridSettings2.gridData={data:e.content,total:e.totalElements},n.size=N.a.TEN})},e.prototype.onSelectionChange=function(e){var t=this;this.gridSettings3.state=this.gridState3,this.selectedArticle=e.selectedRows[0].dataItem;var n=e.selectedRows[0].dataItem;this.detailOfService.getJavaGenericService().getEntityList(vt.a.GET_DETAIL_FABRICATIONARRANGEMENT_PAGEABLE+"ByItem/"+n.idItem+"?page=0&size="+this.size).subscribe(function(e){e.content=e.content.filter(function(e){return e.of.status===zo.OF_CREATED}),e.content.map(function(e){return e.id_of=e.of.id,e.reference=e.of.reference,e.creationDate_of=e.of.createdDate,e.isChecked=-1!==n.selectedOf.indexOf(e.id_of),e}),t.gridSettings3.gridData={data:e.content,total:e.totalElements},t.size=N.a.TEN})},e.prototype.eventCheckOfByItem=function(e,t){var n=this;this.gridSettings2.gridData.data.map(t.isChecked?function(e){if(e[0]===n.selectedArticle[0])return e.lancer+=1,e.selectedOf.push(t.id_of),e.selectedOf.push(t.reference),n.selectedArticles.push(t),e}:function(e){if(e[0]===n.selectedArticle[0])return e.lancer-=1,e.selectedOf.splice(e.selectedOf.indexOf(t),1),n.selectedArticles.splice(n.selectedArticles.indexOf(t),1),e})},e.prototype.launchOF=function(){var e=this;if(this.formGroup.valid){var t=this.formGroup.getRawValue();t.launchingDate=this.datePipe.transform(t.launchingDate,vt.a.YYYY_MM_DD)+" "+this.datePipe.transform(t.launchingHour,vt.a.HH_MM_SS),t.launchingHour=this.datePipe.transform(t.launchingDate,vt.a.YYYY_MM_DD)+" "+this.datePipe.transform(t.launchingHour,vt.a.HH_MM_SS),this.swalWarrings.CreateSwal(this.translate.instant(vt.a.SWAL_TITLE_VALIDATION_LAUNCH_OF),""+this.translate.instant(L.a.ARE_YOU_SURE),L.a.YES,L.a.NO).then(function(n){n.value&&(e.ofService.getJavaGenericService().updateEntity(t,e.ofId).toPromise().then(function(){return Go(e,void 0,void 0,function(){return qo(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(this.showSuccessMessage())];case 1:return e.sent(),[2]}})})}),e.selectedArticles.forEach(function(t){"orderbyRef"===e.filterType?e.itemService.getProductById(t.idItem).subscribe(function(n){e.exportPDF(t.id,t.idItem,n.Code)}):e.exportPDF(t.id,t.idItem,t.ref_article)}),e.selectedArticles=[])})}else this.validationService.validateAllFormFields(this.formGroup)},e.prototype.showSuccessMessage=function(){this.growlService.successNotification(this.translate.instant(Ln.a.SUCCESS_OPERATION))},e.prototype.exportPDF=function(e,t,n){var i=this;this.detailOfService.readReport(vt.a.LAUNCH_DETAILS_OF+"/"+e+"/"+t+"?ref_article="+n).subscribe(function(e){var t=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open(n,"_blank"),i.allDetailOfDataSource(),i.DetailOfByItemDataSource(),i.closeModal()})},e.prototype.eventCheckItemByOF=function(e,t){t.isChecked?(t.status="OF_LAUNCHED",this.ofId=t.id_of,this.selectedArticles.push(t)):this.selectedArticles.splice(this.selectedArticles.indexOf(t),1)},e.prototype.openModal=function(){this.formGroup=new v.FormGroup({matricule:new v.FormControl("",v.Validators.required),launchingDate:new v.FormControl("",v.Validators.required),responsibleId:new v.FormControl("",v.Validators.required),launchingHour:new v.FormControl("",v.Validators.required)})},e.prototype.closeModal=function(){this.closeModalBtn.nativeElement.click()},e.prototype.onPageChange=function(e){this.gridSettings3.state.skip=e.skip,this.currentPage=e.skip/10,this.size=e.take,this.ofDataSource(this.currentStatus)},e.prototype.ofDataSource=function(e,t){var n=this;null!=t&&(this.currentPage=t),this.currentStatus=e,this.fabricationArrangementService.getJavaGenericService().getEntityList(vt.a.GET_DETAIL_FABRICATIONARRANGEMENT_PAGEABLE+"ByItem/"+this.selectedArticle[0]+"?page=0&size="+this.size).subscribe(function(e){e.content=e.content.filter(function(e){return e.of.status===jo.DETAIL_OF_CREATED}),e.content.map(function(e){return e.id_of=e.of.id,e.reference=e.of.reference,e.creationDate_of=e.of.createdDate,e.isChecked=-1!==n.selectedArticle.selectedOf.indexOf(e.id_of),e}),n.gridSettings3.gridData={data:e.content,total:e.totalElements},n.size=N.a.TEN})},e}(),Wo=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Yo(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                ","\n              "])),i["\u0275ppd"](1,2)],null,function(e,t){e(t,0,0,i["\u0275unv"](t,0,0,e(t,1,0,i["\u0275nov"](t.parent.parent,0),t.context.$implicit.creationDate_of,"MM/dd/yyyy")))})}function Xo(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275eld"](1,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var o=!0,r=e.component;return"change"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.checked)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,2).onTouched()&&o),"ngModelChange"===t&&(o=!1!==(e.context.$implicit.isChecked=n)&&o),"change"===t&&(o=!1!==r.eventCheckItemByOF(n,e.context.$implicit)&&o),o},null,null)),i["\u0275did"](2,16384,null,0,v.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.CheckboxControlValueAccessor]),i["\u0275did"](4,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](6,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,4,0,t.context.$implicit.isChecked)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).ngClassUntouched,i["\u0275nov"](t,6).ngClassTouched,i["\u0275nov"](t,6).ngClassPristine,i["\u0275nov"](t,6).ngClassDirty,i["\u0275nov"](t,6).ngClassValid,i["\u0275nov"](t,6).ngClassInvalid,i["\u0275nov"](t,6).ngClassPending)})}function Zo(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,118,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageAllDOFChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](32,8110080,[[2,4]],6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange"}),i["\u0275qud"](603979776,3,{columns:1}),i["\u0275qud"](603979776,4,{detailTemplateChildren:1}),i["\u0275qud"](603979776,5,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,6,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,7,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,8,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](43,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](44,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,9,{headerTemplates:1}),i["\u0275qud"](335544320,10,{footerTemplate:0}),i["\u0275qud"](603979776,11,{columnMenuTemplates:1}),i["\u0275qud"](335544320,12,{template:0}),i["\u0275qud"](335544320,13,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,14,{groupFooterTemplate:0}),i["\u0275qud"](335544320,15,{editTemplate:0}),i["\u0275qud"](335544320,16,{filterCellTemplate:0}),i["\u0275qud"](335544320,17,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[3,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](58,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](59,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,18,{headerTemplates:1}),i["\u0275qud"](335544320,19,{footerTemplate:0}),i["\u0275qud"](603979776,20,{columnMenuTemplates:1}),i["\u0275qud"](335544320,21,{template:0}),i["\u0275qud"](335544320,22,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,23,{groupFooterTemplate:0}),i["\u0275qud"](335544320,24,{editTemplate:0}),i["\u0275qud"](335544320,25,{filterCellTemplate:0}),i["\u0275qud"](335544320,26,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[3,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](73,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](74,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,27,{headerTemplates:1}),i["\u0275qud"](335544320,28,{footerTemplate:0}),i["\u0275qud"](603979776,29,{columnMenuTemplates:1}),i["\u0275qud"](335544320,30,{template:0}),i["\u0275qud"](335544320,31,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,32,{groupFooterTemplate:0}),i["\u0275qud"](335544320,33,{editTemplate:0}),i["\u0275qud"](335544320,34,{filterCellTemplate:0}),i["\u0275qud"](335544320,35,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[3,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](88,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](89,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,36,{headerTemplates:1}),i["\u0275qud"](335544320,37,{footerTemplate:0}),i["\u0275qud"](603979776,38,{columnMenuTemplates:1}),i["\u0275qud"](335544320,39,{template:0}),i["\u0275qud"](335544320,40,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,41,{groupFooterTemplate:0}),i["\u0275qud"](335544320,42,{editTemplate:0}),i["\u0275qud"](335544320,43,{filterCellTemplate:0}),i["\u0275qud"](335544320,44,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[3,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Yo)),i["\u0275did"](103,16384,[[39,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](106,0,null,null,10,"kendo-grid-checkbox-column",[],null,null,null,g.y,g.g)),i["\u0275did"](107,49152,null,4,m.p,[[8,null]],{width:[0,"width"]},null),i["\u0275qud"](603979776,45,{headerTemplates:1}),i["\u0275qud"](335544320,46,{footerTemplate:0}),i["\u0275qud"](603979776,47,{columnMenuTemplates:1}),i["\u0275qud"](335544320,48,{template:0}),i["\u0275prd"](2048,[[3,4]],m.r,null,[m.p]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Xo)),i["\u0275did"](115,16384,[[48,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){var n=t.component;e(t,32,0,n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,"menu",!0,n.pagerSettings,!0,!0),e(t,44,0,i["\u0275unv"](t,44,0,i["\u0275nov"](t,54).transform(n.gridSettings.columnsConfig[0].title)),200,n.gridSettings.columnsConfig[0].field),e(t,59,0,i["\u0275unv"](t,59,0,i["\u0275nov"](t,69).transform(n.gridSettings.columnsConfig[1].title)),200,n.gridSettings.columnsConfig[1].field),e(t,74,0,i["\u0275unv"](t,74,0,i["\u0275nov"](t,84).transform(n.gridSettings.columnsConfig[2].title)),200,n.gridSettings.columnsConfig[2].field),e(t,89,0,i["\u0275unv"](t,89,0,i["\u0275nov"](t,99).transform(n.gridSettings.columnsConfig[3].title)),200,n.gridSettings.columnsConfig[3].field),e(t,107,0,100)},function(e,t){e(t,0,0,i["\u0275nov"](t,32).dir,i["\u0275nov"](t,32).hostClasses,i["\u0275nov"](t,32).hostClasses,i["\u0275nov"](t,32).lockedClasses,i["\u0275nov"](t,32).virtualClasses,i["\u0275nov"](t,32).columnResizing,i["\u0275nov"](t,32).noScrollbarClass)})}function Jo(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,102,"kendo-grid",[["class","col"],["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"],[null,"selectionChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageByItemChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"selectionChange"===t&&(i=!1!==o.onSelectionChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](32,8110080,[[2,4]],6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],selectable:[3,"selectable"],sort:[4,"sort"],filter:[5,"filter"],filterable:[6,"filterable"],sortable:[7,"sortable"],pageable:[8,"pageable"],reorderable:[9,"reorderable"],columnMenu:[10,"columnMenu"]},{pageChange:"pageChange",selectionChange:"selectionChange",dataStateChange:"dataStateChange"}),i["\u0275qud"](603979776,49,{columns:1}),i["\u0275qud"](603979776,50,{detailTemplateChildren:1}),i["\u0275qud"](603979776,51,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,52,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,53,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,54,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](43,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](44,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,55,{headerTemplates:1}),i["\u0275qud"](335544320,56,{footerTemplate:0}),i["\u0275qud"](603979776,57,{columnMenuTemplates:1}),i["\u0275qud"](335544320,58,{template:0}),i["\u0275qud"](335544320,59,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,60,{groupFooterTemplate:0}),i["\u0275qud"](335544320,61,{editTemplate:0}),i["\u0275qud"](335544320,62,{filterCellTemplate:0}),i["\u0275qud"](335544320,63,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[49,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](58,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](59,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,64,{headerTemplates:1}),i["\u0275qud"](335544320,65,{footerTemplate:0}),i["\u0275qud"](603979776,66,{columnMenuTemplates:1}),i["\u0275qud"](335544320,67,{template:0}),i["\u0275qud"](335544320,68,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,69,{groupFooterTemplate:0}),i["\u0275qud"](335544320,70,{editTemplate:0}),i["\u0275qud"](335544320,71,{filterCellTemplate:0}),i["\u0275qud"](335544320,72,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[49,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](73,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](74,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,73,{headerTemplates:1}),i["\u0275qud"](335544320,74,{footerTemplate:0}),i["\u0275qud"](603979776,75,{columnMenuTemplates:1}),i["\u0275qud"](335544320,76,{template:0}),i["\u0275qud"](335544320,77,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,78,{groupFooterTemplate:0}),i["\u0275qud"](335544320,79,{editTemplate:0}),i["\u0275qud"](335544320,80,{filterCellTemplate:0}),i["\u0275qud"](335544320,81,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[49,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](88,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](89,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,82,{headerTemplates:1}),i["\u0275qud"](335544320,83,{footerTemplate:0}),i["\u0275qud"](603979776,84,{columnMenuTemplates:1}),i["\u0275qud"](335544320,85,{template:0}),i["\u0275qud"](335544320,86,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,87,{groupFooterTemplate:0}),i["\u0275qud"](335544320,88,{editTemplate:0}),i["\u0275qud"](335544320,89,{filterCellTemplate:0}),i["\u0275qud"](335544320,90,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[49,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,32,1,[n.gridSettings2.gridData,n.gridSettings2.state.take,n.gridSettings2.state.skip,!0,n.gridSettings2.state.sort,n.gridSettings2.state.filter,"menu",!0,n.pagerSettings,!0,!0]),e(t,44,0,i["\u0275unv"](t,44,0,i["\u0275nov"](t,54).transform(n.gridSettings2.columnsConfig[0].title)),100,n.gridSettings2.columnsConfig[0].field),e(t,59,0,i["\u0275unv"](t,59,0,i["\u0275nov"](t,69).transform(n.gridSettings2.columnsConfig[1].title)),100,n.gridSettings2.columnsConfig[1].field),e(t,74,0,i["\u0275unv"](t,74,0,i["\u0275nov"](t,84).transform(n.gridSettings2.columnsConfig[2].title)),100,n.gridSettings2.columnsConfig[2].field),e(t,89,0,i["\u0275unv"](t,89,0,i["\u0275nov"](t,99).transform(n.gridSettings2.columnsConfig[3].title)),100,n.gridSettings2.columnsConfig[3].field)},function(e,t){e(t,0,0,i["\u0275nov"](t,32).dir,i["\u0275nov"](t,32).hostClasses,i["\u0275nov"](t,32).hostClasses,i["\u0275nov"](t,32).lockedClasses,i["\u0275nov"](t,32).virtualClasses,i["\u0275nov"](t,32).columnResizing,i["\u0275nov"](t,32).noScrollbarClass)})}function Ko(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                  ","\n                "])),i["\u0275ppd"](1,2)],null,function(e,t){e(t,0,0,i["\u0275unv"](t,0,0,e(t,1,0,i["\u0275nov"](t.parent.parent,0),t.context.$implicit.creationDate_of,"MM/dd/yyyy")))})}function Qo(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](1,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var o=!0,r=e.component;return"change"===t&&(o=!1!==i["\u0275nov"](e,2).onChange(n.target.checked)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,2).onTouched()&&o),"ngModelChange"===t&&(o=!1!==(e.context.$implicit.isChecked=n)&&o),"change"===t&&(o=!1!==r.eventCheckOfByItem(n,e.context.$implicit)&&o),o},null,null)),i["\u0275did"](2,16384,null,0,v.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.CheckboxControlValueAccessor]),i["\u0275did"](4,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](6,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){e(t,4,0,t.context.$implicit.isChecked)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).ngClassUntouched,i["\u0275nov"](t,6).ngClassTouched,i["\u0275nov"](t,6).ngClassPristine,i["\u0275nov"](t,6).ngClassDirty,i["\u0275nov"](t,6).ngClassValid,i["\u0275nov"](t,6).ngClassInvalid,i["\u0275nov"](t,6).ngClassPending)})}function $o(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,103,"kendo-grid",[["class","col"],["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](32,8110080,[[2,4]],6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],selectable:[3,"selectable"],sort:[4,"sort"],filter:[5,"filter"],filterable:[6,"filterable"],sortable:[7,"sortable"],pageable:[8,"pageable"],reorderable:[9,"reorderable"],columnMenu:[10,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange"}),i["\u0275qud"](603979776,91,{columns:1}),i["\u0275qud"](603979776,92,{detailTemplateChildren:1}),i["\u0275qud"](603979776,93,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,94,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,95,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,96,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](44,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](45,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,97,{headerTemplates:1}),i["\u0275qud"](335544320,98,{footerTemplate:0}),i["\u0275qud"](603979776,99,{columnMenuTemplates:1}),i["\u0275qud"](335544320,100,{template:0}),i["\u0275qud"](335544320,101,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,102,{groupFooterTemplate:0}),i["\u0275qud"](335544320,103,{editTemplate:0}),i["\u0275qud"](335544320,104,{filterCellTemplate:0}),i["\u0275qud"](335544320,105,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[91,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](59,0,null,null,13,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](60,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,106,{headerTemplates:1}),i["\u0275qud"](335544320,107,{footerTemplate:0}),i["\u0275qud"](603979776,108,{columnMenuTemplates:1}),i["\u0275qud"](335544320,109,{template:0}),i["\u0275qud"](335544320,110,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,111,{groupFooterTemplate:0}),i["\u0275qud"](335544320,112,{editTemplate:0}),i["\u0275qud"](335544320,113,{filterCellTemplate:0}),i["\u0275qud"](335544320,114,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[91,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](74,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](75,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"]},null),i["\u0275qud"](603979776,115,{headerTemplates:1}),i["\u0275qud"](335544320,116,{footerTemplate:0}),i["\u0275qud"](603979776,117,{columnMenuTemplates:1}),i["\u0275qud"](335544320,118,{template:0}),i["\u0275qud"](335544320,119,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,120,{groupFooterTemplate:0}),i["\u0275qud"](335544320,121,{editTemplate:0}),i["\u0275qud"](335544320,122,{filterCellTemplate:0}),i["\u0275qud"](335544320,123,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[91,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,Ko)),i["\u0275did"](89,16384,[[118,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n\n              "])),(e()(),i["\u0275eld"](92,0,null,null,10,"kendo-grid-checkbox-column",[],null,null,null,g.y,g.g)),i["\u0275did"](93,49152,null,4,m.p,[[8,null]],{width:[0,"width"]},null),i["\u0275qud"](603979776,124,{headerTemplates:1}),i["\u0275qud"](335544320,125,{footerTemplate:0}),i["\u0275qud"](603979776,126,{columnMenuTemplates:1}),i["\u0275qud"](335544320,127,{template:0}),i["\u0275prd"](2048,[[91,4]],m.r,null,[m.p]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,Qo)),i["\u0275did"](101,16384,[[127,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,32,1,[n.gridSettings3.gridData,n.gridSettings3.state.take,n.gridSettings3.state.skip,!0,n.gridSettings.state.sort,n.gridSettings3.state.filter,"menu",!0,n.pagerSettings,!0,!0]),e(t,45,0,i["\u0275unv"](t,45,0,i["\u0275nov"](t,55).transform(n.gridSettings3.columnsConfig[0].title)),100,n.gridSettings3.columnsConfig[0].field),e(t,60,0,i["\u0275unv"](t,60,0,i["\u0275nov"](t,70).transform(n.gridSettings3.columnsConfig[1].title)),100,n.gridSettings3.columnsConfig[1].field),e(t,75,0,i["\u0275unv"](t,75,0,i["\u0275nov"](t,85).transform(n.gridSettings3.columnsConfig[2].title)),100,n.gridSettings3.columnsConfig[2].field),e(t,93,0,100)},function(e,t){e(t,0,0,i["\u0275nov"](t,32).dir,i["\u0275nov"](t,32).hostClasses,i["\u0275nov"](t,32).hostClasses,i["\u0275nov"](t,32).lockedClasses,i["\u0275nov"](t,32).virtualClasses,i["\u0275nov"](t,32).columnResizing,i["\u0275nov"](t,32).noScrollbarClass)})}function er(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "]))],null,function(e,t){e(t,6,0,t.context.$implicit.FullName)})}function tr(e){return i["\u0275vid"](0,[i["\u0275pid"](0,h.DatePipe,[i.LOCALE_ID]),i["\u0275qud"](402653184,1,{closeModalBtn:0}),i["\u0275qud"](671088640,2,{grid:0}),(e()(),i["\u0275eld"](3,0,null,null,64,"div",[["class","animated fadeIn"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](5,0,null,null,61,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](7,0,null,null,58,"div",[["class","col-lg-12 col-sm-12 col-md-12 col-xs-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](9,0,null,null,55,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](11,0,null,null,27,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](13,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](15,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](16,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](22,0,null,null,15,"div",[["class","k-form-field row"],["style","margin-left:2%"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](24,0,null,null,0,"input",[["class","k-radio"],["id","myActionsButton"],["name","action"],["type","radio"]],[[8,"defaultChecked",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.filterOF("allOF")&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](26,0,null,null,2,"label",[["class","k-radio-label"],["for","myActionsButton"]],null,null,null,null,null)),(e()(),i["\u0275ted"](27,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](30,0,null,null,0,"span",[["style","margin-left: inherit"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](32,0,null,null,0,"input",[["class","k-radio"],["id","allActionsButton"],["name","action"],["type","radio"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.filterOF("orderbyRef")&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](34,0,null,null,2,"label",[["class","k-radio-label"],["for","allActionsButton"]],null,null,null,null,null)),(e()(),i["\u0275ted"](35,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275eld"](40,0,null,null,23,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](42,0,null,null,8,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"],["id","addButton1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](44,0,null,null,5,"a",[["class","btn-Add k-button btn btn-add"],["data-target","#exampleModalCenter"],["data-toggle","modal"],["id","addButton2"],["style"," border: 2px double #4c9aae!important; margin-bottom: 2%"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.openModal()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](46,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](47,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Zo)),i["\u0275did"](53,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](55,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Jo)),i["\u0275did"](58,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,$o)),i["\u0275did"](61,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n\n\n"])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275eld"](70,0,null,null,178,"div",[["aria-hidden","true"],["aria-labelledby","exampleModalCenterTitle"],["class","modal fade"],["id","exampleModalCenter"],["role","dialog"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](72,0,null,null,175,"div",[["class","modal-dialog modal-dialog-centered"],["role","document"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](74,0,null,null,172,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](76,0,null,null,11,"div",[["class","modal-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](78,0,null,null,2,"h5",[],null,null,null,null,null)),(e()(),i["\u0275ted"](79,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](82,0,[[1,0],["closeModalBtn",1]],null,4,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["id","closeModal"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.closeModal()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](84,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xd7"])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](89,0,null,null,134,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](91,0,null,null,131,"form",[["class","form-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,93).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,93).onReset()&&o),o},null,null)),i["\u0275did"](92,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](93,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](95,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](97,0,null,null,62,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](99,0,null,null,19,"div",[["class","col-lg-6 col-md-6 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](101,0,null,null,5,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](102,null,["\n                ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](104,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,[" "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](108,0,null,null,5,"input",[["class","form-control"],["formControlName","matricule"],["name","reference"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,109)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,109).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,109)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,109)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](109,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](111,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](113,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](115,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](116,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](120,0,null,null,38,"div",[["class","col-lg-6 col-md-6 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](122,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](123,null,["\n                ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](125,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](128,0,null,null,25,"kendo-datepicker",[["class","form-control"],["formControlName","launchingDate"]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tn.f,Tn.b)),i["\u0275prd"](256,null,b.b,"kendo.datepicker",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,En.X,En.X,[]),i["\u0275did"](132,770048,null,8,En.o,[i.NgZone,b.c,i.ChangeDetectorRef,y.g,i.ElementRef,i.Renderer2,i.Injector,En.X,[2,En._2]],{format:[0,"format"]},null),i["\u0275qud"](335544320,128,{cellTemplate:0}),i["\u0275qud"](335544320,129,{monthCellTemplate:0}),i["\u0275qud"](335544320,130,{yearCellTemplate:0}),i["\u0275qud"](335544320,131,{decadeCellTemplate:0}),i["\u0275qud"](335544320,132,{centuryCellTemplate:0}),i["\u0275qud"](335544320,133,{weekNumberTemplate:0}),i["\u0275qud"](335544320,134,{headerTitleTemplate:0}),i["\u0275qud"](335544320,135,{navigationItemTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[En.o]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[En.o]),i["\u0275did"](143,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](145,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](147,0,null,null,5,"kendo-datepicker-messages",[],null,null,null,Tn.g,Tn.c)),i["\u0275prd"](6144,null,En.N,null,[En.p]),i["\u0275did"](149,770048,null,0,En.p,[b.c],{today:[0,"today"],toggle:[1,"toggle"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](155,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](156,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](161,0,null,null,60,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](163,0,null,null,32,"div",[["class","col-lg-6 col-md-6 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](165,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](166,null,["\n                ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](168,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](171,0,null,null,23,"kendo-dropdownlist",[["formControlName","responsibleId"],["style","width: 220px;margin: auto;"]],[[2,"k-widget",null],[2,"k-dropdown",null],[2,"k-header",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"valueChange"]],function(e,t,n){var i=!0;return"valueChange"===t&&(i=!1!==(e.component.selectedUsers=n)&&i),i},st.i,st.d)),i["\u0275prd"](6144,null,dt.m,null,[dt.i]),i["\u0275prd"](256,null,b.b,"kendo.dropdownlist",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](179,770048,null,7,dt.i,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.Renderer2,i.ElementRef,i.ChangeDetectorRef,[2,dt.E]],{data:[0,"data"],value:[1,"value"],textField:[2,"textField"],valueField:[3,"valueField"],valuePrimitive:[4,"valuePrimitive"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,136,{itemTemplate:0}),i["\u0275qud"](335544320,137,{groupTemplate:0}),i["\u0275qud"](335544320,138,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,139,{valueTemplate:0}),i["\u0275qud"](335544320,140,{headerTemplate:0}),i["\u0275qud"](335544320,141,{footerTemplate:0}),i["\u0275qud"](335544320,142,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.i]),i["\u0275did"](188,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](190,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,er)),i["\u0275did"](193,16384,[[136,4]],0,dt.p,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](197,0,null,null,23,"div",[["class","col-lg-6 col-md-6 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](199,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](200,null,["\n                ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](202,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](205,0,null,null,10,"kendo-timepicker",[["class","form-control"],["formControlName","launchingHour"]],[[2,"k-widget",null],[2,"k-timepicker",null],[2,"k-header",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tn.h,Tn.d)),i["\u0275prd"](256,null,b.b,"kendo.timepicker",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,En.X,En.X,[]),i["\u0275did"](209,770048,null,0,En._5,[i.NgZone,b.c,i.ChangeDetectorRef,y.g,i.ElementRef,i.Renderer2,i.Injector,En.X,[2,En._2]],{format:[0,"format"]},null),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[En._5]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[En._5]),i["\u0275did"](212,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](214,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](217,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](218,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](225,0,null,null,20,"div",[["class","modal-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](227,0,null,null,17,"div",[["class","footerStyle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](229,0,null,null,14,"footer",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](231,0,null,null,11,"div",[["class","w-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](233,0,null,null,8,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](235,0,null,null,5,"a",[["class","btn-Add k-button btn btn-add"],["id","addButton4"],["style","border: 2px double #4c9aae!important;"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.launchOF()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](237,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](238,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n\n\n\n"]))],function(e,t){var n=t.component;e(t,53,0,"allOF"===n.filterType),e(t,58,0,"orderbyRef"===n.filterType),e(t,61,0,"orderbyRef"===n.filterType),e(t,93,0,n.formGroup),e(t,111,0,"matricule"),e(t,116,0,n.formGroup.controls.matricule),e(t,132,0,n.formatDate),e(t,143,0,"launchingDate"),e(t,149,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,149,0,i["\u0275nov"](t,150).transform("TODAY")),""),i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,149,1,i["\u0275nov"](t,151).transform("CALENDAR.MENU_TITLE")),"")),e(t,156,0,n.formGroup.controls.launchingDate),e(t,179,0,n.listUsers,n.selectedUsers,"FullName","Id",!0),e(t,188,0,"responsibleId"),e(t,209,0,"HH:mm"),e(t,212,0,"launchingHour"),e(t,218,0,n.formGroup.controls.launchingHour)},function(e,t){e(t,16,0,i["\u0275unv"](t,16,0,i["\u0275nov"](t,17).transform("OF_LIST"))),e(t,24,0,!0),e(t,27,0,i["\u0275unv"](t,27,0,i["\u0275nov"](t,28).transform("ALL_OF"))),e(t,35,0,i["\u0275unv"](t,35,0,i["\u0275nov"](t,36).transform("FABRICATION_ARRANGMENT_ORDERBY_REF"))),e(t,47,0,i["\u0275unv"](t,47,0,i["\u0275nov"](t,48).transform("LAUNCH"))),e(t,79,0,i["\u0275unv"](t,79,0,i["\u0275nov"](t,80).transform("LAUNCH"))),e(t,91,0,i["\u0275nov"](t,95).ngClassUntouched,i["\u0275nov"](t,95).ngClassTouched,i["\u0275nov"](t,95).ngClassPristine,i["\u0275nov"](t,95).ngClassDirty,i["\u0275nov"](t,95).ngClassValid,i["\u0275nov"](t,95).ngClassInvalid,i["\u0275nov"](t,95).ngClassPending),e(t,102,0,i["\u0275unv"](t,102,0,i["\u0275nov"](t,103).transform("REGISTRATION_NUMBER"))),e(t,108,0,i["\u0275nov"](t,113).ngClassUntouched,i["\u0275nov"](t,113).ngClassTouched,i["\u0275nov"](t,113).ngClassPristine,i["\u0275nov"](t,113).ngClassDirty,i["\u0275nov"](t,113).ngClassValid,i["\u0275nov"](t,113).ngClassInvalid,i["\u0275nov"](t,113).ngClassPending),e(t,123,0,i["\u0275unv"](t,123,0,i["\u0275nov"](t,124).transform("DATE"))),e(t,128,1,[i["\u0275nov"](t,132).wrapperClasses,i["\u0275nov"](t,132).wrapperClasses,i["\u0275nov"](t,132).wrapperClasses,i["\u0275nov"](t,132).disabledClass,i["\u0275nov"](t,145).ngClassUntouched,i["\u0275nov"](t,145).ngClassTouched,i["\u0275nov"](t,145).ngClassPristine,i["\u0275nov"](t,145).ngClassDirty,i["\u0275nov"](t,145).ngClassValid,i["\u0275nov"](t,145).ngClassInvalid,i["\u0275nov"](t,145).ngClassPending]),e(t,166,0,i["\u0275unv"](t,166,0,i["\u0275nov"](t,167).transform("RESPONSIBLE"))),e(t,171,1,[i["\u0275nov"](t,179).widgetClasses,i["\u0275nov"](t,179).widgetClasses,i["\u0275nov"](t,179).widgetClasses,i["\u0275nov"](t,179).dir,i["\u0275nov"](t,190).ngClassUntouched,i["\u0275nov"](t,190).ngClassTouched,i["\u0275nov"](t,190).ngClassPristine,i["\u0275nov"](t,190).ngClassDirty,i["\u0275nov"](t,190).ngClassValid,i["\u0275nov"](t,190).ngClassInvalid,i["\u0275nov"](t,190).ngClassPending]),e(t,200,0,i["\u0275unv"](t,200,0,i["\u0275nov"](t,201).transform("HOUR"))),e(t,205,1,[i["\u0275nov"](t,209).wrapperClasses,i["\u0275nov"](t,209).wrapperClasses,i["\u0275nov"](t,209).wrapperClasses,i["\u0275nov"](t,209).disabledClass,i["\u0275nov"](t,214).ngClassUntouched,i["\u0275nov"](t,214).ngClassTouched,i["\u0275nov"](t,214).ngClassPristine,i["\u0275nov"](t,214).ngClassDirty,i["\u0275nov"](t,214).ngClassValid,i["\u0275nov"](t,214).ngClassInvalid,i["\u0275nov"](t,214).ngClassPending]),e(t,238,0,i["\u0275unv"](t,238,0,i["\u0275nov"](t,239).transform("VALIDATE")))})}var nr=i["\u0275ccf"]("app-launch-fabrication-arrangement",Vo,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-launch-fabrication-arrangement",[],null,null,null,tr,Wo)),i["\u0275did"](1,114688,null,0,Vo,[yt,D.a,l.a,E.a,de.b,ie.a,Fo,A.a,dn.a,s.k,h.DatePipe],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),ir=function(){function e(e,t,n,i,o,r){this.growlService=e,this.translate=t,this.validationService=n,this.swalWarrings=i,this.fb=o,this.areaService=r,this.size=N.a.TWENTY,this.currentPage=N.a.ZERO,this.value="",this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.gridState={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:vi.REFERENCE_FIELD,title:vi.REFERENCE_TITLE,filterable:!0},{field:vi.DESIGNATION_FIELD,title:vi.DESIGNATION_TITLE,filterable:!0}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.btnEditVisible=!0}return e.prototype.initGridDataSource=function(){var e=this;this.subscription$=this.areaService.getJavaGenericService().getEntityList(vi.LIST_PAGEABLE+"?designation="+this.value+"&page="+this.currentPage+"&size="+this.size).subscribe(function(t){e.gridSettings.gridData={data:t.content,total:t.totalElements}})},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.goPage()},e.prototype.goPage=function(){var e=this;this.subscription$=this.areaService.getJavaGenericService().getEntityList(vi.LIST_PAGEABLE+"?designation="+this.value+"&page="+this.currentPage+"&size="+this.size).subscribe(function(t){e.gridSettings.gridData.data=t.content})},e.prototype.onSearch=function(){this.gridSettings.state.skip=N.a.ZERO,this.currentPage=N.a.ZERO,this.initGridDataSource()},e.prototype.closeEditor=function(e,t){void 0===t&&(t=this.editedRowIndex),void 0!==t&&(e.closeRow(t),this.editedRowIndex=void 0,this.areaFormGroup=void 0),this.btnEditVisible=!0},e.prototype.addHandler=function(e){var t=e.sender;this.closeEditor(t),this.areaFormGroup=new v.FormGroup({reference:new v.FormControl("",v.Validators.required),designation:new v.FormControl("",[v.Validators.required,v.Validators.minLength(N.a.FIVE)])}),t.addRow(this.areaFormGroup),this.btnEditVisible=!1},e.prototype.editHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.dataItem;this.closeEditor(t),this.closeEditor(t,-1),this.areaFormGroup=this.fb.group({id:[i.id,v.Validators.required],reference:[i.reference,v.Validators.required],designation:[i.designation,[v.Validators.required,v.Validators.minLength(N.a.FIVE)]]}),this.editedRowIndex=n,t.editRow(n,this.areaFormGroup),this.btnEditVisible=!1},e.prototype.cancelHandler=function(e){this.closeEditor(e.sender,e.rowIndex),this.btnEditVisible=!0},e.prototype.saveHandler=function(e){var t=this,n=e.sender,i=e.rowIndex,o=e.formGroup;o.valid||this.areaFormGroup.valid?(this.subscription$=this.areaService.getJavaGenericService().saveEntity(o.value).subscribe(function(){t.initGridDataSource(),t.growlService.successNotification(t.translate.instant(vi.SUCCESS_OPERATION))}),n.closeRow(i),this.btnEditVisible=!0):this.validationService.validateAllFormFields(this.areaFormGroup||o)},e.prototype.removeHandler=function(e){var t=this;this.swalWarrings.CreateSwal(vi.AREA_DELETE_TEXT_MESSAGE,vi.DELETE_AREA_MSG).then(function(n){n.value&&t.areaService.getJavaGenericService().deleteEntity(e.dataItem.id).subscribe(function(){t.gridSettings.gridData.data.length===N.a.ONE&&t.currentPage!==N.a.ZERO&&(t.gridSettings.state.skip-=N.a.ONE,t.currentPage-=N.a.ONE),t.initGridDataSource(),t.growlService.successNotification(t.translate.instant(vi.SUCCESS_OPERATION))})})},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe()},e.prototype.ngOnInit=function(){this.initGridDataSource()},e}(),or=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function rr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](1,0,null,null,4,"div",[["class","row"],["style","float :right; margin-right: 40px;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](3,0,null,null,1,"app-btn-grid",[["style","margin-top: -5%;    display: inline-flex;"]],null,null,null,r.b,r.a)),i["\u0275did"](4,114688,null,0,a.a,[l.a,s.k,d.a,c.a,u.a],{add:[0,"add"],export:[1,"export"],addLink:[2,"addLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,4,0,!0,!0,"AdvancedAdd")},null)}function ar(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","reference"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.areaFormGroup,"reference","text")},null)}function lr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","designation"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.areaFormGroup,"designation","text")},null)}function sr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](2,0,null,null,5,"button",[["kendoGridEditCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-edit-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,4).click(n)&&o),o},null,null)),i["\u0275did"](3,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](4,9388032,null,0,m._2,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](6,0,null,null,0,"i",[["aria-hidden","true"],["class","las la-pen cursor-pointer edit-pencil la-lg mx-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](10,0,null,null,5,"button",[["class","btnKendoGrid"],["kendoGridRemoveCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-remove-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,12).click(n)&&o),o},null,null)),i["\u0275did"](11,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](12,9388032,null,0,m._82,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](14,0,null,null,0,"i",[["aria-hidden","true"],["class","text-danger cursor-pointer fa fa-trash-o la-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.removeHandler(n)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](18,0,null,null,4,"button",[["class","btnKendoGrid"],["kendoGridSaveCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-save-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,20).click(n)&&o),o},null,null)),i["\u0275did"](19,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](20,9388032,null,0,m._88,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](22,0,null,null,0,"span",[["class","fa fa-save"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](25,0,null,null,4,"button",[["class","btnKendoGrid"],["kendoGridCancelCommand",""],["style","background: transparent"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-cancel-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,27).click(n)&&o),o},null,null)),i["\u0275did"](26,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](27,9388032,null,0,m.l,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](29,0,null,null,0,"span",[["class","fa fa-close"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n              "]))],function(e,t){e(t,4,0),e(t,12,0),e(t,20,0),e(t,27,0)},function(e,t){e(t,2,0,i["\u0275nov"](t,4).classButton,i["\u0275nov"](t,4).classDisabled,i["\u0275nov"](t,4).classPrimary,i["\u0275nov"](t,4).isFlat,i["\u0275nov"](t,4).isBare,i["\u0275nov"](t,4).isOutline,i["\u0275nov"](t,4).classActive,i["\u0275nov"](t,4).dir,i["\u0275nov"](t,4).visible,i["\u0275nov"](t,4).commandClass),e(t,10,0,i["\u0275nov"](t,12).classButton,i["\u0275nov"](t,12).classDisabled,i["\u0275nov"](t,12).classPrimary,i["\u0275nov"](t,12).isFlat,i["\u0275nov"](t,12).isBare,i["\u0275nov"](t,12).isOutline,i["\u0275nov"](t,12).classActive,i["\u0275nov"](t,12).dir,i["\u0275nov"](t,12).visible,i["\u0275nov"](t,12).commandClass),e(t,18,0,i["\u0275nov"](t,20).classButton,i["\u0275nov"](t,20).classDisabled,i["\u0275nov"](t,20).classPrimary,i["\u0275nov"](t,20).isFlat,i["\u0275nov"](t,20).isBare,i["\u0275nov"](t,20).isOutline,i["\u0275nov"](t,20).classActive,i["\u0275nov"](t,20).dir,i["\u0275nov"](t,20).visible,i["\u0275nov"](t,20).commandClass),e(t,25,0,i["\u0275nov"](t,27).classButton,i["\u0275nov"](t,27).classDisabled,i["\u0275nov"](t,27).classPrimary,i["\u0275nov"](t,27).isFlat,i["\u0275nov"](t,27).isBare,i["\u0275nov"](t,27).isOutline,i["\u0275nov"](t,27).classActive,i["\u0275nov"](t,27).dir,i["\u0275nov"](t,27).visible,i["\u0275nov"](t,27).commandClass)})}function dr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,152,"div",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,149,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,146,"div",[["class","card full-screen-card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,143,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](8,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](10,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](12,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](13,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](20,0,null,null,127,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](22,0,null,null,27,"div",[["class","row d-flex justify-content-between mt-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](24,0,null,null,24,"div",[["class","col-lg-4 col-md-6 col-sm-12 col-xs-12 d-flex justify-content-center"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](26,0,null,null,21,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](28,0,null,null,18,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](30,0,null,null,10,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](32,0,null,null,7,"input",[["aria-describedby","addon-wrapping"],["class","form-control"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"afterValueChanged"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,33)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,33).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,33)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,33)._compositionEnd(n.target.value)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,38).onValueChange(n)&&o),"ngModelChange"===t&&(o=!1!==(r.value=n)&&o),"afterValueChanged"===t&&(o=!1!==r.onSearch()&&o),o},null,null)),i["\u0275did"](33,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](35,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](37,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),i["\u0275did"](38,147456,null,0,on.a,[],null,{afterValueChanged:"afterValueChanged"}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](42,0,null,null,3,"div",[["class","col-2 p-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](44,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-search fa-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onSearch()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](51,0,null,null,95,"kendo-grid",[],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"],[null,"edit"],[null,"cancel"],[null,"save"],[null,"remove"],[null,"add"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"edit"===t&&(i=!1!==o.editHandler(n)&&i),"cancel"===t&&(i=!1!==o.cancelHandler(n)&&i),"save"===t&&(i=!1!==o.saveHandler(n)&&i),"remove"===t&&(i=!1!==o.removeHandler(n)&&i),"add"===t&&(i=!1!==o.addHandler(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](83,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],groupable:[8,"groupable"],reorderable:[9,"reorderable"],columnMenu:[10,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",edit:"edit",cancel:"cancel",save:"save",remove:"remove",add:"add"}),i["\u0275qud"](603979776,1,{columns:1}),i["\u0275qud"](603979776,2,{detailTemplateChildren:1}),i["\u0275qud"](603979776,3,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,4,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,5,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,6,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n\n\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,rr)),i["\u0275did"](93,16384,[[5,4]],0,m._110,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](96,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](97,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,7,{headerTemplates:1}),i["\u0275qud"](335544320,8,{footerTemplate:0}),i["\u0275qud"](603979776,9,{columnMenuTemplates:1}),i["\u0275qud"](335544320,10,{template:0}),i["\u0275qud"](335544320,11,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,12,{groupFooterTemplate:0}),i["\u0275qud"](335544320,13,{editTemplate:0}),i["\u0275qud"](335544320,14,{filterCellTemplate:0}),i["\u0275qud"](335544320,15,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,ar)),i["\u0275did"](111,16384,[[13,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](115,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](116,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,16,{headerTemplates:1}),i["\u0275qud"](335544320,17,{footerTemplate:0}),i["\u0275qud"](603979776,18,{columnMenuTemplates:1}),i["\u0275qud"](335544320,19,{template:0}),i["\u0275qud"](335544320,20,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,21,{groupFooterTemplate:0}),i["\u0275qud"](335544320,22,{editTemplate:0}),i["\u0275qud"](335544320,23,{filterCellTemplate:0}),i["\u0275qud"](335544320,24,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,lr)),i["\u0275did"](130,16384,[[22,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](134,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](135,49152,null,4,m.J,[[8,null]],{title:[0,"title"],width:[1,"width"],columnMenu:[2,"columnMenu"]},null),i["\u0275qud"](603979776,25,{headerTemplates:1}),i["\u0275qud"](335544320,26,{footerTemplate:0}),i["\u0275qud"](603979776,27,{columnMenuTemplates:1}),i["\u0275qud"](335544320,28,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,sr)),i["\u0275did"](144,16384,[[28,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,35,0,n.value),e(t,83,1,[n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,!1,!1,n.pagerSettings,!0,!0,!1]),e(t,97,0,i["\u0275unv"](t,97,0,i["\u0275nov"](t,107).transform(n.gridSettings.columnsConfig[0].title)),n.gridSettings.columnsConfig[0]._width,n.gridSettings.columnsConfig[0].field,n.gridSettings.columnsConfig[0].filter,n.gridSettings.columnsConfig[0].filterable),e(t,116,0,i["\u0275unv"](t,116,0,i["\u0275nov"](t,126).transform(n.gridSettings.columnsConfig[1].title)),n.gridSettings.columnsConfig[1]._width,n.gridSettings.columnsConfig[1].field,n.gridSettings.columnsConfig[1].filter,n.gridSettings.columnsConfig[1].filterable),e(t,135,0,i["\u0275unv"](t,135,0,i["\u0275nov"](t,140).transform("ACTIONS")),150,!1)},function(e,t){e(t,13,0,i["\u0275unv"](t,13,0,i["\u0275nov"](t,14).transform("LIST_AREAS"))),e(t,32,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,32,0,i["\u0275nov"](t,39).transform("SEARCH")),""),i["\u0275nov"](t,37).ngClassUntouched,i["\u0275nov"](t,37).ngClassTouched,i["\u0275nov"](t,37).ngClassPristine,i["\u0275nov"](t,37).ngClassDirty,i["\u0275nov"](t,37).ngClassValid,i["\u0275nov"](t,37).ngClassInvalid,i["\u0275nov"](t,37).ngClassPending),e(t,51,0,i["\u0275nov"](t,83).dir,i["\u0275nov"](t,83).hostClasses,i["\u0275nov"](t,83).hostClasses,i["\u0275nov"](t,83).lockedClasses,i["\u0275nov"](t,83).virtualClasses,i["\u0275nov"](t,83).columnResizing,i["\u0275nov"](t,83).noScrollbarClass)})}var cr=i["\u0275ccf"]("app-list-area",ir,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-list-area",[],null,null,null,dr,or)),i["\u0275did"](1,245760,null,0,ir,[A.a,s.k,de.b,E.a,v.FormBuilder,yi],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),ur=n("Uw6n"),hr=function(){function e(e,t,n,i,o,r,a){this.authService=e,this.gammeService=t,this.router=n,this.swalWarrings=i,this.growlService=o,this.translate=r,this.itemService=a,this.size=N.a.TEN,this.value="",this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.gridState={skip:N.a.ZERO,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:Ln.a.REFERENCE_FIELD,title:Ln.a.REFERENCE_TITLE,filterable:!0},{field:Ln.a.DESIGNATION_FIELD,title:Ln.a.DESIGNATION_TITLE,filterable:!0}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.currentPage=N.a.ZERO,this.filtersItemDropdown=new bt.a,this.MANUFACTURINGPermissions=B.a.MANUFATORINGPermissions,this.btnEditVisible=!0}return e.prototype.initGridDataSource=function(){var e=this;this.subscription$=this.gammeService.getJavaGenericService().getEntityList(Ln.a.GET_GAMME_LIST_PAGEABLE+"?reference="+this.value+"&page="+this.currentPage+"&size="+this.size).subscribe(function(t){var n=[];t.content.forEach(function(e){n.push(e.articleId)}),e.itemService.getItemDetails(n).subscribe(function(n){n.forEach(function(e){t.content.find(function(t){return t.articleId===e.Id}).article=e.Description}),e.gridSettings.gridData={data:t.content,total:t.totalElements}}),t.content.length===N.a.ZERO&&e.loadAndSearchByArticle()})},e.prototype.loadAndSearchByArticle=function(){var e=this;this.itemService.getByCodeAndDesignation(this.value).flatMap(function(t){return e.gammeService.checkProductsExistInGamme(t,e.currentPage,e.size)}).subscribe(function(t){var n=[];t.content.forEach(function(e){n.push(e.articleId)}),e.itemService.getItemDetails(n).subscribe(function(n){n.forEach(function(e){t.content.find(function(t){return t.articleId===e.Id}).article=e.Description}),e.gridSettings.gridData={data:t.content,total:t.totalElements}})})},e.prototype.removeHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){n.value&&t.deleteGamme(e.id)})},e.prototype.deleteGamme=function(e){var t=this;this.subscription$=this.gammeService.getJavaGenericService().deleteEntity(e).subscribe(function(){t.gridSettings.gridData.data.length===N.a.ONE&&t.currentPage!==N.a.ZERO&&(t.gridSettings.state.skip-=N.a.ONE,t.currentPage-=N.a.ONE),t.initGridDataSource(),t.growlService.successNotification(t.translate.instant(Ln.a.SUCCESS_OPERATION))},function(){t.growlService.ErrorNotification(t.translate.instant(Ln.a.FAILURE_OPERATION))})},e.prototype.goToAdvancedEdit=function(e){this.router.navigate([Ln.a.URL_EDIT_GAMME.concat(e.id)],{queryParams:ur.a,skipLocationChange:!0})},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.goPage(),this.initGridDataSource()},e.prototype.goPage=function(){var e=this;this.gammeService.getJavaGenericService().getEntityList(Ln.a.GET_GAMME_LIST_PAGEABLE+"?page="+this.currentPage+"&size="+this.size).subscribe(function(t){e.gridSettings.gridData.data=t.content})},e.prototype.onSearch=function(){this.gridSettings.state.skip=N.a.ZERO,this.currentPage=N.a.ZERO,this.initGridDataSource()},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe()},e.prototype.ngOnInit=function(){this.initGridDataSource()},e}(),pr=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function fr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","row"],["style","float :right; margin-right: 40px;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](2,0,null,null,1,"app-btn-grid",[["style","margin-top: -5%;    display: inline-flex;"]],null,null,null,r.b,r.a)),i["\u0275did"](3,114688,null,0,a.a,[l.a,s.k,d.a,c.a,u.a],{advencedAdd:[0,"advencedAdd"],add:[1,"add"],export:[2,"export"],addLink:[3,"addLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,3,0,!0,!1,!1,"add")},null)}function gr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,2,null,fr)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](3,1),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){var n=t.component;e(t,2,0,n.authService.hasAuthorities(e(t,3,0,n.MANUFACTURINGPermissions.MANUFACTURING_ADD_GAMME_PERMISSION)))},null)}function mr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"app-grid-cell-input-template",[["controlName","Reference"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](1,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){e(t,1,0,t.component.formGroup,"Reference","text")},null)}function vr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"app-grid-cell-input-template",[["controlName","TypeNomenclature"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](1,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){e(t,1,0,t.component.formGroup,"TypeNomenclature","text")},null)}function yr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,mr)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,vr)),i["\u0275did"](7,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n              "]))],function(e,t){e(t,3,0,"REFERENCE"==t.parent.context.$implicit.field),e(t,7,0,"article"==t.parent.context.$implicit.field)},null)}function br(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](1,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],format:[3,"format"],filter:[4,"filter"],filterable:[5,"filterable"]},null),i["\u0275qud"](603979776,7,{headerTemplates:1}),i["\u0275qud"](335544320,8,{footerTemplate:0}),i["\u0275qud"](603979776,9,{columnMenuTemplates:1}),i["\u0275qud"](335544320,10,{template:0}),i["\u0275qud"](335544320,11,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,12,{groupFooterTemplate:0}),i["\u0275qud"](335544320,13,{editTemplate:0}),i["\u0275qud"](335544320,14,{filterCellTemplate:0}),i["\u0275qud"](335544320,15,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,yr)),i["\u0275did"](15,16384,[[13,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,1,0,i["\u0275unv"](t,1,0,i["\u0275nov"](t,11).transform(t.context.$implicit.title)),t.context.$implicit._width,t.context.$implicit.field,t.context.$implicit.format,t.context.$implicit.filter,t.context.$implicit.filterable)},null)}function wr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","las la-pen cursor-pointer edit-pencil la-lg mx-3"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.goToAdvancedEdit(e.parent.context.dataItem)&&i),i},null,null))],null,null)}function Cr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","text-danger cursor-pointer fa fa-trash-o la-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.removeHandler(e.parent.context.dataItem)&&i),i},null,null))],null,null)}function xr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,2,null,wr)),i["\u0275did"](6,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](7,1),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,2,null,Cr)),i["\u0275did"](11,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pad"](12,1),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){var n=t.component;e(t,6,0,n.authService.hasAuthorities(e(t,7,0,n.MANUFACTURINGPermissions.MANUFACTURING_EDIT_GAMME_PERMISSION))),e(t,11,0,n.authService.hasAuthorities(e(t,12,0,n.MANUFACTURINGPermissions.MANUFACTURING_DELETE_GAMME_PERMISSION)))},null)}function Sr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,131,"div",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,128,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,125,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,122,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](9,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](11,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](13,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](14,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](22,0,null,null,104,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](24,0,null,null,26,"div",[["class","row d-flex justify-content-between mt-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](26,0,null,null,23,"div",[["class","col-lg-4 col-md-6 col-sm-12 col-xs-12 d-flex justify-content-center"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](28,0,null,null,20,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](30,0,null,null,17,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](32,0,null,null,9,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](34,0,null,null,6,"input",[["aria-describedby","addon-wrapping"],["class","form-control"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,35)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,35).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,35)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,35)._compositionEnd(n.target.value)&&o),"ngModelChange"===t&&(o=!1!==(r.value=n)&&o),"keyup.enter"===t&&(o=!1!==r.onSearch()&&o),o},null,null)),i["\u0275did"](35,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](37,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](39,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](43,0,null,null,3,"div",[["class","col-2 p-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](45,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-search fa-lg"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onSearch()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](52,0,null,null,73,"div",[["class","card  mt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](54,0,null,null,70,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](56,0,null,null,67,"div",[["class","card-body p-3"],["style","min-height: fit-content;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](58,0,null,null,64,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"],[null,"remove"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"remove"===t&&(i=!1!==o.removeHandler(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](90,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],groupable:[8,"groupable"],reorderable:[9,"reorderable"],columnMenu:[10,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange",remove:"remove"}),i["\u0275qud"](603979776,1,{columns:1}),i["\u0275qud"](603979776,2,{detailTemplateChildren:1}),i["\u0275qud"](603979776,3,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,4,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,5,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,6,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,gr)),i["\u0275did"](101,16384,[[5,4]],0,m._110,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,br)),i["\u0275did"](106,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](110,0,null,null,10,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](111,49152,null,4,m.J,[[8,null]],{width:[0,"width"]},null),i["\u0275qud"](603979776,16,{headerTemplates:1}),i["\u0275qud"](335544320,17,{footerTemplate:0}),i["\u0275qud"](603979776,18,{columnMenuTemplates:1}),i["\u0275qud"](335544320,19,{template:0}),i["\u0275prd"](2048,[[1,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,xr)),i["\u0275did"](119,16384,[[19,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,37,0,n.value),e(t,90,1,[n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,!1,!1,n.pagerSettings,!1,!0,!1]),e(t,106,0,n.gridSettings.columnsConfig),e(t,111,0,170)},function(e,t){e(t,14,0,i["\u0275unv"](t,14,0,i["\u0275nov"](t,15).transform("GAMME_LIST"))),e(t,34,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,34,0,i["\u0275nov"](t,40).transform("SEARCH")),""),i["\u0275nov"](t,39).ngClassUntouched,i["\u0275nov"](t,39).ngClassTouched,i["\u0275nov"](t,39).ngClassPristine,i["\u0275nov"](t,39).ngClassDirty,i["\u0275nov"](t,39).ngClassValid,i["\u0275nov"](t,39).ngClassInvalid,i["\u0275nov"](t,39).ngClassPending),e(t,58,0,i["\u0275nov"](t,90).dir,i["\u0275nov"](t,90).hostClasses,i["\u0275nov"](t,90).hostClasses,i["\u0275nov"](t,90).lockedClasses,i["\u0275nov"](t,90).virtualClasses,i["\u0275nov"](t,90).columnResizing,i["\u0275nov"](t,90).noScrollbarClass)})}var Tr=i["\u0275ccf"]("app-gamme-list",hr,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-gamme-list",[],null,null,null,Sr,pr)),i["\u0275did"](1,245760,null,0,hr,[H.a,te.a,T.Router,E.a,A.a,s.k,l.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Er=n("kQfz"),_r=n("AOQ1"),kr=n("W1Mu"),Dr=n("9ngK"),Ar=function(){function e(e,t){this.translate=e,this.areaService=t,this.selectedAreaId=new i.EventEmitter,this.areaFiltredList=[],this.areaId=[],this.initDataSource()}return e.prototype.initDataSource=function(){var e=this;this.areaService.getJavaGenericService().getEntityList().subscribe(function(t){e.areaId=t,e.areaFiltredList=e.areaId.slice(0)})},e.prototype.handleFilterParentCode=function(e){this.areaFiltredList=this.areaId.filter(function(t){return t.reference.toString().includes(e)||t.designation.toLocaleLowerCase().includes(e.toLowerCase())})},e.prototype.onSelect=function(e){this.selectedAreaId.emit(e)},e.prototype.ngOnInit=function(){},e}(),Or=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ir(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "]))],null,function(e,t){e(t,6,0,t.context.$implicit.designation)})}function Pr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,28,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,1).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,1).onReset()&&o),o},null,null)),i["\u0275did"](1,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](3,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](5,0,null,null,22,"kendo-combobox",[["class","form-control"],["formControlName","areaId"]],[[2,"k-widget",null],[2,"k-combobox",null],[2,"k-header",null],[2,"k-combobox-clearable",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"filterChange"],[null,"valueChange"]],function(e,t,n){var i=!0,o=e.component;return"filterChange"===t&&(i=!1!==o.handleFilterParentCode(n)&&i),"valueChange"===t&&(i=!1!==o.onSelect(o)&&i),i},st.g,st.b)),i["\u0275prd"](6144,null,dt.m,null,[dt.c]),i["\u0275prd"](256,null,b.b,"kendo.combobox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](13,770048,null,6,dt.c,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.ChangeDetectorRef,i.Renderer2,i.ElementRef,[2,dt.E]],{data:[0,"data"],textField:[1,"textField"],valueField:[2,"valueField"],valuePrimitive:[3,"valuePrimitive"],filterable:[4,"filterable"]},{valueChange:"valueChange",filterChange:"filterChange"}),i["\u0275qud"](335544320,1,{template:0}),i["\u0275qud"](335544320,2,{headerTemplate:0}),i["\u0275qud"](335544320,3,{footerTemplate:0}),i["\u0275qud"](335544320,4,{noDataTemplate:0}),i["\u0275qud"](335544320,5,{groupTemplate:0}),i["\u0275qud"](335544320,6,{fixedGroupTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.c]),i["\u0275did"](21,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](23,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n    "])),(e()(),i["\u0275and"](0,null,null,1,null,Ir)),i["\u0275did"](26,16384,[[1,4]],0,dt.p,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form),e(t,13,0,n.areaFiltredList,"designation","id",!0,!0),e(t,21,0,"areaId")},function(e,t){e(t,0,0,i["\u0275nov"](t,3).ngClassUntouched,i["\u0275nov"](t,3).ngClassTouched,i["\u0275nov"](t,3).ngClassPristine,i["\u0275nov"](t,3).ngClassDirty,i["\u0275nov"](t,3).ngClassValid,i["\u0275nov"](t,3).ngClassInvalid,i["\u0275nov"](t,3).ngClassPending),e(t,5,1,[i["\u0275nov"](t,13).widgetClasses,i["\u0275nov"](t,13).widgetClasses,i["\u0275nov"](t,13).widgetClasses,i["\u0275nov"](t,13).clearable,i["\u0275nov"](t,13).dir,i["\u0275nov"](t,23).ngClassUntouched,i["\u0275nov"](t,23).ngClassTouched,i["\u0275nov"](t,23).ngClassPristine,i["\u0275nov"](t,23).ngClassDirty,i["\u0275nov"](t,23).ngClassValid,i["\u0275nov"](t,23).ngClassInvalid,i["\u0275nov"](t,23).ngClassPending])})}var Rr=function(){},Mr=function(){function e(){}return e.MANUFACTURING="manufacturing",e.ENTITY_NAME="gammeOperation",e.DELETE_GAMME_OPERATION_URL="",e}(),Nr=n("JVkW"),Lr=n("eAG5"),Hr=n("+GBK"),Br=function(e){function t(t,n){return e.call(this,t,n,Mr.MANUFACTURING,Mr.ENTITY_NAME)||this}return Object(O.__extends)(t,e),t.prototype.getGammeOpByGamme=function(e,t,n){return this.callService(wt.a.GET,"list-gamme-operations-by-gamme-id?idGamme="+e+"?page="+t+"&size="+n)},t}(P.a),jr=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},zr=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},Ur=function(){function e(e,t,n,i,o,r,a,l,s,d,c,u,h,p,f,g,m,y,b,w){var C=this;this.userService=e,this.activatedRoute=t,this.router=n,this.swalWarrings=i,this.validationService=o,this.translate=r,this.operationService=a,this.productNomenclatureService=l,this.nomenclatureService=s,this.gammeService=d,this.gammeOperationService=c,this.growlService=u,this.sectionService=h,this.viewRef=p,this.itemService=f,this.machineService=g,this.formModalDialogService=m,this.modalDialogInstanceService=y,this.unitOfMesureJavaService=b,this.zone=w,this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.emptyGammePorducts=!1,this.isSave=!1,this.editMode=!1,this.isUpdateMode=!1,this.gamme=new Rr,this.rowOperationsList=[],this.listItems=[],this.selectedOperationBeforeDtos=[],this.listProductNomenclatureFromJava=[],this.value=[],this.sectionDescription=Ln.a.OPERATION_SECTION_DESCRIPTION_FIELD,this.operationBeforeDtos=Ln.a.OPERATIONS_BEFORE_LIST_FIELD,this.duration=Ln.a.OPERATION_DURATION_FIELD,this.description=Ln.a.OPERATION_DESCRIPTION_FIELD,this.listOperations=[],this.listMachines=[],this.operationsGamme=[],this.listUnitOfMeasure=[],this.listProductNomenclature=[],this.listUsers=[],this.selectedMachines=[],this.selectedUsers=[],this.selectedProductNomenclatures=[],this.selectedValue={},this.nbGammeOperations=0,this.currentPage=N.a.ZERO,this.size=N.a.TEN,this.allSelectedProductNomenclatures=[],this.item=new pt.a,this.entityNameSource=Ln.a.ENTITY_NAME,this.gridStateGammes={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.gridData=[],this.columnsConfig=[{field:Ln.a.REFERENCE_FIELD,title:Ln.a.REFERENCE_TITLE,filterable:!0},{field:Ln.a.ARTICLE_FIELD,title:Ln.a.ARTICLE_TITLE,filterable:!0}],this.columnsConfigOperations=[{field:Ln.a.ORDER_FIELD,title:Ln.a.ORDER_TITLE,filterable:!0,_width:150},{field:Ln.a.OPERATION_FIELD,title:Ln.a.OPERATION_TITLE,filterable:!0,_width:150},{field:Ln.a.MEASUREUNIT_FIELD,title:Ln.a.MEASUREUNIT_TITLE,filterable:!0,_width:150},{field:Ln.a.EQUIPMENT_FIELD,title:Ln.a.EQUIPMENT_TITLE,filterable:!0,_width:150},{field:Ln.a.NET_TIME_EQUIPMENTS_FIELD,title:Ln.a.NET_TIME_EQUIPMENTS_TITLE,filterable:!0,_width:100},{field:Ln.a.PERSON_FIELD,title:Ln.a.PERSON_TITLE,filterable:!1,_width:150},{field:Ln.a.NET_TIME_FIELD,title:Ln.a.NET_TIME_TITLE,filterable:!0,_width:100},{field:Ln.a.OPERATIONS_BEFORE_LIST_FIELD,title:Ln.a.OPERATIONS_BEFORE_LIST_TITLE,filterable:!1,_width:150},{field:Ln.a.NOMENCLATURE_FIELD,title:Ln.a.NOMENCLATURE_TITLE,filterable:!1,_width:200}],this.gridSettingsGammes={state:this.gridStateGammes,columnsConfig:this.columnsConfigOperations},this.spinner=!1,this.activatedRoute.params.subscribe(function(e){C.idGammeOnUpdate=+e.id||0}),this.formGroup=new v.FormGroup({reference:new v.FormControl(""),IdItem:new v.FormControl(""),areaId:new v.FormControl("",v.Validators.required)})}return e.prototype.ngAfterViewInit=function(){this.dragAndDropSubscription$=this.handleDragAndDrop()},e.prototype.dataStateChange=function(e){var t=this;this.gridStateGammes=e,this.zone.onStable.pipe(Object(M.take)(1)).subscribe(function(){return t.dragAndDropSubscription$=t.handleDragAndDrop()})},e.prototype.rowCallback=function(e){return{dragging:e.dataItem.dragging}},e.prototype.handleDragAndDrop=function(){return null},e.prototype.addHandler=function(e){var t=e.sender;return jr(this,void 0,void 0,function(){return zr(this,function(e){return this.selectedUsers=[],this.selectedMachines=[],this.selectedOperationBeforeDtos=[],this.selectedProductNomenclatures=[],this.closeEditor(t),this.createOperationLineForm(new $n),this.nbGammeOperations++,t.addRow(this.operationFormGroup),this.btnEditVisible=!1,[2]})})},e.prototype.handleKeyAction=function(e){var t=this;this.keyAction=function(n){n.code===xt.a.NUMPAD_MULTIPLY&&t.saveHandler({sender:e,rowIndex:t.editedRowIndex,formGroup:t.operationFormGroup,isNew:!0})},document.addEventListener(St.a.KEY_DOWN,this.keyAction)},e.prototype.lineClickHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.dataItem;this.isSave?this.isSave=!1:this.editHandler({sender:t,rowIndex:n,dataItem:i})},e.prototype.handleEditHandler=function(){this.editMode=!0},e.prototype.handledEditHandler=function(){this.editMode=!1},e.prototype.getCurrentDataItem=function(e){this.itemClicked=e.dataItem.IdItem},e.prototype.editHandler=function(e){var t=e.sender,n=e.rowIndex,i=e.dataItem;return jr(this,void 0,void 0,function(){var e=this;return zr(this,function(o){return this.selectedUsers=[],this.selectedMachines=[],this.selectedOperationBeforeDtos=[],this.selectedProductNomenclatures=[],this.closeEditor(t),this.closeEditor(t,-1),this.editedRowIndex=n,this.operationFormGroup=new v.FormGroup({id:new v.FormControl(this.operationsGamme[n].id?this.operationsGamme[n].id:null),operation:new v.FormControl(this.operationsGamme[n].operation),equipment:new v.FormControl(this.operationsGamme[n].machines?this.operationsGamme[n].machines:this.operationsGamme[n].equipment),equipmentTimeNet:new v.FormControl(this.operationsGamme[n].machineTimeNet?this.operationsGamme[n].machineTimeNet:this.operationsGamme[n].equipmentTimeNet),operationBeforeDtos:new v.FormControl(this.operationsGamme[n].operationBefore?this.operationsGamme[n].operationBefore:this.operationsGamme[n].operationBeforeDtos),unitOfMeasure:new v.FormControl(this.operationsGamme[n].unitOfMeasure?this.operationsGamme[n].unitOfMeasure.code?this.operationsGamme[n].unitOfMeasure.code:this.operationsGamme[n].unitOfMeasure:""),productNomenclatures:new v.FormControl(this.operationsGamme[n].productNomenclatures),responsibleId:new v.FormControl(this.operationsGamme[n].responsibles?this.operationsGamme[n].responsibles:this.operationsGamme[n].responsibleId),personTimeNet:new v.FormControl(this.operationsGamme[n].personTimeNet),costMachines:new v.FormControl(this.operationsGamme[n].costMachines),costPersons:new v.FormControl(this.operationsGamme[n].costPersons),order:new v.FormControl(this.operationsGamme[n].order),disabledEquipmentTimeNetColumn:new v.FormControl(this.operationsGamme[n].disabledEquipmentTimeNetColumn),disabledPersonTimeNetColumn:new v.FormControl(this.operationsGamme[n].disabledPersonTimeNetColumn)}),this.operationsGamme[n].machines||(this.operationsGamme[n].machines=this.operationsGamme[n].equipment),this.operationsGamme[n].responsibles||(this.operationsGamme[n].responsibles=this.operationsGamme[n].responsibleId),this.selectedMachines=this.operationsGamme[n].machines,this.operationsGamme[n].productNomenclatures&&this.operationsGamme[n].productNomenclatures.forEach(function(t){(t.productId||t.Id)&&e.itemService.getProductById(t.productId?t.productId:t.Id).subscribe(function(n){n.id=t.Id,e.selectedProductNomenclatures.push(n)})}),this.userService.getAllUserWithoutState().subscribe(function(t){e.listUsers=t.data,e.listUsers.forEach(function(t){e.operationsGamme[n].responsibles&&e.operationsGamme[n].responsibles.find(function(e){return(e.idResponsable?e.idResponsable:e.Id)===t.Id})&&e.selectedUsers.push(t)}),e.selectedUsers.length>=N.a.ONE&&e.operationFormGroup.patchValue({responsibleId:new v.FormArray(e.selectedUsers)})}),this.listOperations.push(this.operationsGamme[n].operation),this.eliminateSelectedItemInPredecesseurColumn(i.operation),i.gamme&&this.getProductNomenclatureList(i.gamme.articleId),t.editRow(n,this.operationFormGroup),this.btnEditVisible=!0,[2]})})},e.prototype.cancelHandler=function(e){this.closeEditor(e.sender,e.rowIndex),this.btnEditVisible=!0,this.dataStateChange(this.gridStateGammes)},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.operationsGamme=[],this.gamme=new Rr,this.initGridData()},e.prototype.saveHandler=function(e){var t=this,n=e.sender,i=e.rowIndex,o=e.formGroup,r=e.isNew;this.operationFormGroup.valid?(this.subscription$=this.sectionService.getJavaGenericService().getEntityById(o.value.sectionId,rn.MACHINE_URL).map(function(e){return e.description}).subscribe(function(e){t.selectedProductNomenclatures=[],r?t.saveNewHandler(o,e):t.saveEditedHandler(i,o,e)}),n.closeRow(i)):this.validationService.validateAllFormFields(this.operationFormGroup)},e.prototype.saveNewHandler=function(e,t){var n=e.value,i={};i.operation=this.operationFormGroup.value.operation,i.NET_TIME_EQUIPMENTS=this.operationFormGroup.value.equipmentTimeNet,i.equipment="",i.productNomenclature="",i.person="",i.unitOfMeasure=this.selectedUnitOfMesure?this.selectedUnitOfMesure.code:"",i.order=this.operationFormGroup.value.order,i.operationBeforeDtos=this.operationFormGroup.value.operationBeforeDtos.description,i.personTimeNet=this.operationFormGroup.value.personTimeNet,this.operationFormGroup.value.equipment.forEach(function(e){i.equipment+=e.description+","}),this.operationFormGroup.value.productNomenclatures.forEach(function(e){i.productNomenclature+=e.Code+","}),this.operationFormGroup.value.responsibleId.forEach(function(e){i.person+=e.FullName+","}),this.gridData.push(i),this.gridSettingsGammes.gridData={data:this.gridData,total:this.gridData.length},this.operationsGamme.push(this.operationFormGroup.value),this.addNewOperationToRowOperationList(n)},e.prototype.addNewOperationToRowOperationList=function(e){this.rowOperationsList.push(e),this.dataStateChange(this.gridStateGammes)},e.prototype.getUnitOfMesureCode=function(e){return this.selectedUnitOfMesure=e,e.code},e.prototype.saveEditedHandler=function(e,t,n){var i=this,o=this.operationsGamme[e];o.id=this.operationFormGroup.value.id,o.operation=this.operationFormGroup.value.operation,o.NET_TIME_EQUIPMENTS=this.operationFormGroup.value.equipmentTimeNet,o.equipment="",o.productNomenclature="",o.person="",o.unitOfMeasure=this.selectedUnitOfMesure?this.selectedUnitOfMesure.code:this.operationFormGroup.value.unitOfMeasure?this.getUnitOfMesureCode(this.listUnitOfMeasure.filter(function(e){return e.code===i.operationFormGroup.value.unitOfMeasure})[0]):"",o.order=this.operationFormGroup.value.order,o.personTimeNet=this.operationFormGroup.value.personTimeNet,o.operationBeforeDtos=this.operationFormGroup.value.operationBeforeDtos?this.operationFormGroup.value.operationBeforeDtos.description:null,this.operationFormGroup.value.equipment&&this.operationFormGroup.value.equipment.forEach(function(e){o.equipment+=e.description+","}),this.operationFormGroup.value.productNomenclatures&&this.operationFormGroup.value.productNomenclatures.forEach(function(e){o.productNomenclature+=e.Code+","}),this.operationFormGroup.value.responsibleId&&this.operationFormGroup.value.responsibleId.forEach(function(e){o.person+=e.FullName+","});var r=this.operationFormGroup.value;r.gamme=o.gamme,r.id=o.id,this.gridData.splice(e,1,o),this.gridSettingsGammes.gridData={data:this.gridData,total:this.gridData.length},this.operationsGamme.splice(e,1,this.operationFormGroup.value),this.addNewOperationToRowOperationList(o),this.dataStateChange(this.gridStateGammes)},e.prototype.closeEditor=function(e,t){void 0===t&&(t=this.editedRowIndex),void 0!==t&&e.closeRow(t)},e.prototype.createOperationLineForm=function(e){var t=this;this.userService.getAllUserWithoutState().subscribe(function(e){t.listUsers=e.data}),this.getOperationsListAndBeforeTodoList(),this.beforeOperation=null,this.operationFormGroup=new v.FormGroup({id:new v.FormControl,operation:new v.FormControl(e.operation,v.Validators.required),equipment:new v.FormControl(e.equipment),equipmentTimeNet:new v.FormControl(e.equipmentTimeNet),operationBeforeDtos:this.nbGammeOperations>0?new v.FormControl(e.operationBeforeDtos,v.Validators.required):new v.FormControl(e.operationBeforeDtos),unitOfMeasure:new v.FormControl(e.unitOfMeasure,v.Validators.required),productNomenclatures:new v.FormControl(""),responsibleId:new v.FormControl(""),personTimeNet:new v.FormControl(e.personTimeNet),costMachines:new v.FormControl(""),costPersons:new v.FormControl(""),order:new v.FormControl("",v.Validators.required),disabledEquipmentTimeNetColumn:new v.FormControl(!0),disabledPersonTimeNetColumn:new v.FormControl(!0)}),this.setOrderNumberBeforAddingNewLineOperationOrUpdatedOrDeleted()},e.prototype.setOrderNumberBeforAddingNewLineOperationOrUpdatedOrDeleted=function(e){if(this.operationsGamme.length===N.a.ZERO)this.operationFormGroup.patchValue({order:N.a.ONE});else if(e){var t=parseInt(e)+N.a.ONE;this.operationFormGroup.patchValue({order:t})}},e.prototype.changeCurrentPredecessor=function(e){var t=this.operationsGamme.find(function(t){return t.operation.id===e.id});this.setOrderNumberBeforAddingNewLineOperationOrUpdatedOrDeleted(t.order)},e.prototype.removeOperationHandler=function(e){var t=this;this.swalWarrings.CreateSwal().then(function(n){if(n.value)if(t.isUpdateMode)t.subscription$=t.gammeOperationService.getJavaGenericService().deleteEntity(e.dataItem.id,Mr.DELETE_GAMME_OPERATION_URL).subscribe(function(){var n=t.gridSettingsGammes.gridData.data.indexOf(e.dataItem);-1!==n&&(t.operationsGamme.content.splice(n,1),t.gridSettingsGammes.gridData.data.splice(n,1)),t.dataStateChange(t.gridStateGammes),t.growlService.successNotification(t.translate.instant(Ln.a.SUCCESS_OPERATION))},function(){t.growlService.ErrorNotification(t.translate.instant(Ln.a.FAILURE_OPERATION))});else{var i=t.rowOperationsList.indexOf(e.dataItem);-1!==i&&(t.operationsGamme.splice(i,1),t.gridSettingsGammes.gridData.data.splice(i,1)),t.dataStateChange(t.gridStateGammes)}})},e.prototype.initializeProductNomenclatureAndResponsiblesIdsFromJava=function(){var e=this;Object(Je.a)(this.gammeService.getAllResponsibles(),this.productNomenclatureService.getJavaGenericService().getEntityList()).subscribe(function(t){e.listResponsiblesJava=t[N.a.ZERO],e.listProductNomenclatureFromJava=t[N.a.ONE]})},e.prototype.saveOrEditGammeClick=function(){var e=this;this.getAllSelectedProductNomenclature(),this.formGroup.valid&&this.isOperationsGammesNotEmpty()?this.gammeService.callService(wt.a.POST,"",this.mapToGammeDto()).subscribe(function(){e.growlService.successNotification(e.translate.instant(Ln.a.SUCCESS_OPERATION)),e.router.navigateByUrl(Ln.a.URL_GAMME_LIST)}):(this.validationService.validateAllFormFields(this.formGroup),this.validationService.validateAllFormFields(this.operationFormGroup))},e.prototype.mapToGammeDto=function(){var e=this,t=new Rr,n=[];this.idGammeOnUpdate>0?(t.reference=this.gamme.reference,t.costPrice=this.gamme.costPrice,t.costPriceCalculatedDate=this.gamme.costPriceCalculatedDate,t.id=this.idGammeOnUpdate):t.reference=this.gammeReference;var i=new function(){};return i.id=1,t.area=i,t.articleId=this.formGroup.value.IdItem,t.area=this.formGroup.value.areaId,this.operationsGamme.forEach(function(t){n.push(e.mapToGammeOperationDto(t))}),t.gammeOperations=n,t},e.prototype.mapToProductNomenclaturesDto=function(e){var t=[];if(this.idGammeOnUpdate>0){var n=this.listProductNomenclatureFromJava.filter(function(t){return e.find(function(e){return t.productId===(e.productId||e.Id)})});n.length>0&&n.forEach(function(e){t.push(e)})}return t},e.prototype.mapToGammeOperationDto=function(e){var t={};return t.id=e.id,t.machineTimeNet=e.equipmentTimeNet?e.equipmentTimeNet:e.machineTimeNet,t.operation=e.operation,t.personTimeNet=e.personTimeNet,t.productNomenclatures=this.idGammeOnUpdate>0?this.mapToProductNomenclaturesDto(e.productNomenclatures):e.productNomenclatures,t.machines=e.equipment?e.equipment:e.machines,t.unitOfMeasure=this.listUnitOfMeasure.filter(function(t){return e.unitOfMeasure===t.code})[0],t.operationBefore=e.operationBeforeDtos&&e.operationBeforeDtos.length!==N.a.ZERO||e.operationBefore?e.operationBeforeDtos?e.operationBeforeDtos:e.operationBefore:null,t.order=e.order,t.responsibles=e.responsibleId?this.mapResponsiblesDto(e.responsibleId):e.responsibles,t.costMachines=e.costMachines,t.costPersons=e.costPersons,t},e.prototype.mapResponsiblesDto=function(e){var t=this,n=[];this.listResponsiblesJava.forEach(function(t){e.forEach(function(e){t.email===e.Email&&n.push(t)})});var i=e.filter(function(e){return!t.listResponsiblesJava.find(function(t){return e.Email===t.email})});return i.length>0&&i.forEach(function(e){n.push({idResponsable:e.Id,email:e.Email,costPerson:N.a.ONE})}),n},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe(),this.dragAndDropSubscription$&&this.dragAndDropSubscription$.unsubscribe()},e.prototype.initGridData=function(){var e=this;this.spinner=!0,this.isUpdateMode=!0,this.subscription$=this.gammeService.getJavaGenericService().getEntityById(this.idGammeOnUpdate).subscribe(function(t){e.gamme=JSON.parse(JSON.stringify(t)),e.operationsGamme=e.operationsGamme.concat(t.gammeOperations),e.userService.getAllUserWithoutState().subscribe(function(t){e.listUsers=t.data,e.gamme.gammeOperations.forEach(function(t){t.hasOwnProperty("machines")&&(t.equipment="",t.machines.forEach(function(e){t.equipment+=e.description+","}),delete t.machines),t.hasOwnProperty("unitOfMeasure")&&(t.unitOfMeasure=t.unitOfMeasure?t.unitOfMeasure.code:""),t.hasOwnProperty("machineTimeNet")&&(t.NET_TIME_EQUIPMENTS=t.machineTimeNet,delete t.machineTimeNet),t.hasOwnProperty("responsibles")&&(t.person="",e.listUsers.forEach(function(e){t.responsibles.find(function(t){return t.idResponsable===e.Id})&&(t.person+=e.FullName+",")}),delete t.responsibles),t.hasOwnProperty("operationBefore")&&(t.operationBeforeDtos=t.operationBefore?t.operationBefore.description:t.operationBefore,delete t.operationBefore),t.hasOwnProperty("productNomenclatures")&&e.caseProductNomenclatures(t),e.listOperations=e.listOperations.concat(t.operation)})});var n=[];e.operationsGamme.forEach(function(e){n.push(e.operation)}),n.filter(function(t){e.listOperations=e.listOperations.filter(function(e){return e.id!==t.id})}),e.idItemSelected=e.gamme.articleId,e.listItems=Array.from(new Set(e.listItems.concat(n))),e.gridData=e.gridData.concat(e.gamme.gammeOperations),e.gridSettingsGammes.gridData={data:e.gridData,total:e.gridData.length},e.formGroup.patchValue({reference:e.gamme.reference,IdItem:e.gamme.articleId,areaId:e.gamme.area,operationLines:e.gamme.gammeOperations}),e.spinner=!1,e.itemDropDown.ngOnInit(),e.createOperationLineForm(new $n)})},e.prototype.caseProductNomenclatures=function(e){var t=this,n=[],i=[];e.productNomenclature="",e.productNomenclatures.forEach(function(e){n.push(e.productId)}),this.itemService.getItemListDetailByIds(n).subscribe(function(n){i=n,e.productNomenclatures.forEach(function(n){var o=i.find(function(e){return e.Id===n.productId});t.allSelectedProductNomenclatures.push(o),e.productNomenclature+=o.Description+","}),delete e.productNomenclatures})},e.prototype.initUnitOfMesureDropDown=function(){var e=this;this.unitOfMesureJavaService.callService(wt.a.GET,"").subscribe(function(t){e.listUnitOfMeasure=[],e.listUnitOfMeasure=t})},e.prototype.ngOnInit=function(){var e=this;if(this.initUnitOfMesureDropDown(),this.userService.getAllUserWithoutState().subscribe(function(t){e.listUsers=t.data}),this.getMachinesList(),this.initializeProductNomenclatureAndResponsiblesIdsFromJava(),this.idGammeOnUpdate>0)this.initGridData();else{this.getLastCode(),this.itemDropDown.ngOnInit();var t=new Rr;this.formGroup=new v.FormGroup({reference:new v.FormControl(t.reference),IdItem:new v.FormControl(t.articleId),areaId:new v.FormControl(t.area),operationLines:new v.FormControl(this.rowOperationsList)})}},e.prototype.onSelectOperation=function(e){this.selectedOperationBeforeDtos=e},e.prototype.itemSelect=function(e){return jr(this,void 0,void 0,function(){var t;return zr(this,function(n){return e&&e.itemFiltredDataSource&&e.itemForm&&e.itemForm.value[In.a.ID_ITEM]&&(t=e.itemFiltredDataSource.filter(function(t){return t.Id===e.itemForm.value[In.a.ID_ITEM]}))&&t.length>0&&(this.item=t[0],this.formGroup.patchValue({IdItem:this.item.Id}),this.getProductNomenclatureList(this.item.Id)),[2]})})},e.prototype.onEquipmentsChanged=function(){if(this.operationFormGroup.value.equipment.length){this.operationFormGroup.get("equipmentTimeNet").setValidators([v.Validators.required]);var e=this.operationFormGroup.value.equipment.reduce(function(e,t){return e+t.costPerHour},0);this.operationFormGroup.patchValue({disabledEquipmentTimeNetColumn:!1,costMachines:(e/this.operationFormGroup.value.equipment.length).toFixed(4)})}else this.operationFormGroup.get("equipmentTimeNet").clearValidators(),this.operationFormGroup.patchValue({disabledEquipmentTimeNetColumn:!0,costMachines:"0"});this.operationFormGroup.controls.equipmentTimeNet.updateValueAndValidity()},e.prototype.onUnitOfMeasureChanged=function(e){var t=this;this.listUnitOfMeasure.forEach(function(n){n.id===e&&(t.selectedUnitOfMesure=n)}),this.unitOfMeasure=e,this.operationFormGroup.patchValue({unitOfMeasure:e})},e.prototype.onPersonsChanged=function(e){var t=this;if(e.length>=N.a.ONE){this.operationFormGroup.get("personTimeNet").setValidators([v.Validators.required]);var n=0;e.forEach(function(i,o){n+=N.a.ONE,o===e.length-1&&(n=n/e.length/365/24),t.operationFormGroup.patchValue({disabledPersonTimeNetColumn:!1,costPersons:n.toFixed(4)})})}else this.operationFormGroup.patchValue({disabledPersonTimeNetColumn:!0}),this.operationFormGroup.get("personTimeNet").clearValidators();this.operationFormGroup.controls.personTimeNet.updateValueAndValidity()},e.prototype.getProductNomenclatureList=function(e){var t=this;this.nomenclatureService.getJavaGenericService().getEntityList().subscribe(function(n){n&&n.length>0&&(t.listProductNomenclature=[],t.checkIfSelectedGammeContainsNomenclatureProducts(n,e)?t.emptyGammePorducts=!1:(t.emptyGammePorducts=!0,t.growlService.ErrorNotification(t.translate.instant(Ln.a.FAIL_GAMME_GET_NOMENCLATURE))),n.forEach(function(n){n.productId===e&&t.productNomenclatureService.getJavaGenericService().getEntityList().subscribe(function(e){e.forEach(function(e){n.id===e.nomenclatureId.id&&t.itemService.getProductById(e.productId).subscribe(function(n){n.id=e.id,-1===t.listProductNomenclature.indexOf(n)&&t.listProductNomenclature.push(n)})})})}))})},e.prototype.checkIfSelectedGammeContainsNomenclatureProducts=function(e,t){return e.findIndex(function(e){return e.productId===t})>-1},e.prototype.getOperationsListAndBeforeTodoList=function(e){var t=this;if(0===this.listOperations.length||e===L.a.GAMME)this.operationService.getJavaGenericService().getEntityList().subscribe(function(e){e&&e.length>0&&(t.listOperations=e)});else if(this.operationsGamme.length){var n=[];this.operationsGamme.forEach(function(e){n.push(e.operation)}),n.filter(function(e){t.listOperations=t.listOperations.filter(function(t){return t.id!==e.id})}),this.listItems=Array.from(new Set(this.listItems.concat(n)))}},e.prototype.eliminateSelectedItemInPredecesseurColumn=function(e){var t=this.listItems.findIndex(function(t){return t.id===e.id});t>0?this.listItems.splice(t,1):t===N.a.ZERO&&(this.listItems=[])},e.prototype.getLastCode=function(){var e=this;this.gammeService.callService(wt.a.GET,"get-last-code").subscribe(function(t){e.gammeReference=t.GAMME_REFERENCE,e.formGroup.controls.reference.patchValue(e.gammeReference),e.formGroup.controls.reference.disable()})},e.prototype.onProductNomenclaturesChanged=function(e){this.selectedProductNomenclatures=e,this.idGammeOnUpdate>0&&(this.allSelectedProductNomenclatures=this.allSelectedProductNomenclatures.concat(e))},e.prototype.removeTag=function(e){this.idGammeOnUpdate>0&&-1!==this.allSelectedProductNomenclatures.indexOf(this.allSelectedProductNomenclatures.find(function(t){return t.Id===e.dataItem.Id}))&&this.allSelectedProductNomenclatures.splice(this.allSelectedProductNomenclatures.indexOf(this.allSelectedProductNomenclatures.find(function(t){return t.Id===e.dataItem.Id})),1)},e.prototype.getMachinesList=function(){var e=this;this.machineService.getJavaGenericService().getEntityList().subscribe(function(t){e.listMachines=t})},e.prototype.checkPositive=function(e,t){var n=+e.key;(t.value+(isNaN(n)?"":n.toString())).match("[0-9]+")||e.preventDefault()},e.prototype.getAllSelectedProductNomenclature=function(){var e=this;this.allSelectedProductNomenclatures=[],this.operationsGamme.forEach(function(t){e.allSelectedProductNomenclatures=e.allSelectedProductNomenclatures.concat(t.productNomenclatures)})},e.prototype.selectedAreaId=function(e){e.areaFiltredList&&e.form&&e.form.value[rn.AREA_ID]&&(this.currentArea=e.areaFiltredList.filter(function(t){return t.id===e.form.value[rn.AREA_ID]})[0],this.formGroup.controls.areaId.setValue(this.currentArea))},e.prototype.addNew=function(e){"unitOfMeasure"===e?this.formModalDialogService.openDialog(Lr.a.CREATE_STOCKUNIT,Hr.a,this.viewRef,this.close.bind(this),{source:L.a.GAMME},!0,L.a.MODAL_DIALOG_SIZE_L):"operation"===e&&this.formModalDialogService.openDialog(Lr.a.CREATE_OPERATION,hi,this.viewRef,this.close.bind(this),{source:L.a.GAMME},!0,L.a.MODAL_DIALOG_SIZE_L)},Object.defineProperty(e.prototype,"IdUnitStock",{get:function(){return this.formGroup.get("unitOfMeasure")},enumerable:!0,configurable:!0}),e.prototype.close=function(e){e&&(e.source===L.a.GAMME?(this.getOperationsListAndBeforeTodoList(L.a.GAMME),this.operationFormGroup.patchValue({operation:e})):(this.initUnitOfMesureDropDown(),this.selectedUnitOfMesure=e,this.operationFormGroup.patchValue({unitOfMeasure:e.code}))),this.modalDialogInstanceService.closeAnyExistingModalDialog()},e.prototype.splitItAndReturnArray=function(e){if(e){var t=e.split(",");return t.map(function(e,n){return t[n]!==t[t.length-N.a.ONE]?e+",":e})}},e.prototype.isOperationsGammesNotEmpty=function(){return(this.isUpdateMode&&this.operationsGamme.content?this.operationsGamme.content.length:this.operationsGamme.length)!==N.a.ZERO||(this.growlService.ErrorNotification(this.translate.instant(Ln.a.GAMME_OPERATION_DELETE_OPERATION)),!1)},e}(),Fr=i["\u0275crt"]({encapsulation:2,styles:[[""]],data:{}});function Gr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-spinner",[["class","spinner"]],null,null,null,Er.b,Er.a)),i["\u0275did"](1,114688,null,0,_r.a,[],null,null)],function(e,t){e(t,1,0)},null)}function qr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,11,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"],["id","addButton1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](3,0,null,null,8,"button",[["class","btn-Add k-button btn btn-add"],["id","addButton2"],["kendoGridAddCommand",""],["style"," border: 2px double #4c9aae!important;"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[2,"k-grid-add-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,4).click(n)&&o),o},null,null)),i["\u0275did"](4,9125888,null,0,m.a,[m._3,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](6,0,null,null,0,"i",[["class","fa fa-plus fa AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](8,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](9,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,4,0)},function(e,t){e(t,3,0,i["\u0275nov"](t,4).classButton,i["\u0275nov"](t,4).classDisabled,i["\u0275nov"](t,4).classPrimary,i["\u0275nov"](t,4).isFlat,i["\u0275nov"](t,4).isBare,i["\u0275nov"](t,4).isOutline,i["\u0275nov"](t,4).classActive,i["\u0275nov"](t,4).dir,i["\u0275nov"](t,4).commandClass),e(t,9,0,i["\u0275unv"](t,9,0,i["\u0275nov"](t,10).transform("ADD_LINE")))})}function Vr(e){return i["\u0275vid"](0,[(e()(),i["\u0275and"](0,null,null,1,null,qr)),i["\u0275did"](1,16384,[[6,4]],0,m._110,[[2,i.TemplateRef]],{position:[0,"position"]},null)],function(e,t){e(t,1,0,"bottom")},null)}function Wr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,11,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"],["id","addButton1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](3,0,null,null,8,"button",[["class","btn-Add k-button btn btn-add"],["disabled","true"],["id","addButton2"],["kendoGridAddCommand",""],["style"," border: 2px double #4c9aae!important;"]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[2,"k-grid-add-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,4).click(n)&&o),o},null,null)),i["\u0275did"](4,9125888,null,0,m.a,[m._3,i.ElementRef,i.Renderer2,b.c,i.NgZone],{disabled:[0,"disabled"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](6,0,null,null,0,"i",[["class","fa fa-plus fa AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](8,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](9,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,4,0,"true")},function(e,t){e(t,3,0,i["\u0275nov"](t,4).classButton,i["\u0275nov"](t,4).classDisabled,i["\u0275nov"](t,4).classPrimary,i["\u0275nov"](t,4).isFlat,i["\u0275nov"](t,4).isBare,i["\u0275nov"](t,4).isOutline,i["\u0275nov"](t,4).classActive,i["\u0275nov"](t,4).dir,i["\u0275nov"](t,4).commandClass),e(t,9,0,i["\u0275unv"](t,9,0,i["\u0275nov"](t,10).transform("ADD_LINE")))})}function Yr(e){return i["\u0275vid"](0,[(e()(),i["\u0275and"](0,null,null,1,null,Wr)),i["\u0275did"](1,16384,[[6,4]],0,m._110,[[2,i.TemplateRef]],{position:[0,"position"]},null)],function(e,t){e(t,1,0,"bottom")},null)}function Xr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,14,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](2,0,null,null,5,"input",[["class","form-control"],["disabled",""],["formControlName","order"],["name","order"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,3)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,3).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,3)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,3)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](3,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](5,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](7,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](9,0,[["anchorOrder",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](11,0,null,null,2,"app-control-message-grid-cell",[["controlName","order"]],null,null,null,ce.b,ce.a)),i["\u0275did"](12,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,5,0,"order",""),e(t,12,0,n.operationFormGroup,n.entityNameSource,"order",i["\u0275nov"](t,9))},function(e,t){e(t,2,0,i["\u0275nov"](t,7).ngClassUntouched,i["\u0275nov"](t,7).ngClassTouched,i["\u0275nov"](t,7).ngClassPristine,i["\u0275nov"](t,7).ngClassDirty,i["\u0275nov"](t,7).ngClassValid,i["\u0275nov"](t,7).ngClassInvalid,i["\u0275nov"](t,7).ngClassPending)})}function Zr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](1,0,null,null,1,"app-drop-down-footer",[],null,null,null,kr.b,kr.a)),i["\u0275did"](2,114688,null,0,Dr.a,[],{addNew:[0,"addNew"],hideBtn:[1,"hideBtn"]},null),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],function(e,t){var n=t.component;e(t,2,0,n.addNew.bind(n,"unitOfMeasure"),!1)},null)}function Jr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](1,0,null,null,3,"h5",[],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("NO_DATA_FOUND")))})}function Kr(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,43,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](2,0,null,null,34,"kendo-combobox",[["class","form-control"],["formControlName","unitOfMeasure"]],[[2,"k-widget",null],[2,"k-combobox",null],[2,"k-header",null],[2,"k-combobox-clearable",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"valueChange"]],function(e,t,n){var i=!0;return"valueChange"===t&&(i=!1!==e.component.onUnitOfMeasureChanged(n)&&i),i},st.g,st.b)),i["\u0275prd"](6144,null,dt.m,null,[dt.c]),i["\u0275prd"](256,null,b.b,"kendo.combobox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](10,770048,null,6,dt.c,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.ChangeDetectorRef,i.Renderer2,i.ElementRef,[2,dt.E]],{allowCustom:[0,"allowCustom"],data:[1,"data"],textField:[2,"textField"],valueField:[3,"valueField"],valuePrimitive:[4,"valuePrimitive"],readonly:[5,"readonly"],filterable:[6,"filterable"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,17,{template:0}),i["\u0275qud"](335544320,18,{headerTemplate:0}),i["\u0275qud"](335544320,19,{footerTemplate:0}),i["\u0275qud"](335544320,20,{noDataTemplate:0}),i["\u0275qud"](335544320,21,{groupTemplate:0}),i["\u0275qud"](335544320,22,{fixedGroupTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.c]),i["\u0275did"](18,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](20,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n\n                        "])),(e()(),i["\u0275and"](0,null,null,1,null,Zr)),i["\u0275did"](24,16384,[[19,4]],0,dt.n,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](0,null,null,1,null,Jr)),i["\u0275did"](29,16384,[[20,4]],0,dt.x,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](31,0,null,null,3,"kendo-combobox-messages",[],null,null,null,st.h,st.c)),i["\u0275prd"](6144,null,dt.t,null,[dt.f]),i["\u0275did"](33,770048,null,0,dt.f,[b.c],{clearTitle:[0,"clearTitle"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](38,0,[["anchorUnitOfMeasure",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](40,0,null,null,2,"app-control-message-grid-cell",[["controlName","unitOfMeasure"]],null,null,null,ce.b,ce.a)),i["\u0275did"](41,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,10,0,"allowCustom",n.listUnitOfMeasure,"code","code",!0,!1,!0),e(t,18,0,"unitOfMeasure"),e(t,33,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,33,0,i["\u0275nov"](t,34).transform("CLEAR")),"")),e(t,41,0,n.operationFormGroup,n.entityNameSource,"unitOfMeasure",i["\u0275nov"](t,38))},function(e,t){e(t,2,1,[i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).clearable,i["\u0275nov"](t,10).dir,i["\u0275nov"](t,20).ngClassUntouched,i["\u0275nov"](t,20).ngClassTouched,i["\u0275nov"](t,20).ngClassPristine,i["\u0275nov"](t,20).ngClassDirty,i["\u0275nov"](t,20).ngClassValid,i["\u0275nov"](t,20).ngClassInvalid,i["\u0275nov"](t,20).ngClassPending])})}function Qr(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](1,0,null,null,1,"app-drop-down-footer",[],null,null,null,kr.b,kr.a)),i["\u0275did"](2,114688,null,0,Dr.a,[],{addNew:[0,"addNew"],hideBtn:[1,"hideBtn"]},null),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],function(e,t){var n=t.component;e(t,2,0,n.addNew.bind(n,"operation"),!1)},null)}function $r(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](1,0,null,null,3,"h5",[],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("NO_DATA_FOUND")))})}function ea(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,34,"kendo-combobox",[["class","form-control"],["formControlName","operation"],["name","operation"]],[[2,"k-widget",null],[2,"k-combobox",null],[2,"k-header",null],[2,"k-combobox-clearable",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,st.g,st.b)),i["\u0275prd"](6144,null,dt.m,null,[dt.c]),i["\u0275prd"](256,null,b.b,"kendo.combobox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](8,770048,null,6,dt.c,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.ChangeDetectorRef,i.Renderer2,i.ElementRef,[2,dt.E]],{data:[0,"data"],textField:[1,"textField"],valueField:[2,"valueField"]},null),i["\u0275qud"](335544320,23,{template:0}),i["\u0275qud"](335544320,24,{headerTemplate:0}),i["\u0275qud"](335544320,25,{footerTemplate:0}),i["\u0275qud"](335544320,26,{noDataTemplate:0}),i["\u0275qud"](335544320,27,{groupTemplate:0}),i["\u0275qud"](335544320,28,{fixedGroupTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.c]),i["\u0275did"](16,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](18,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n\n                        "])),(e()(),i["\u0275and"](0,null,null,1,null,Qr)),i["\u0275did"](22,16384,[[25,4]],0,dt.n,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](0,null,null,1,null,$r)),i["\u0275did"](27,16384,[[26,4]],0,dt.x,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](29,0,null,null,3,"kendo-combobox-messages",[],null,null,null,st.h,st.c)),i["\u0275prd"](6144,null,dt.t,null,[dt.f]),i["\u0275did"](31,770048,null,0,dt.f,[b.c],{clearTitle:[0,"clearTitle"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){e(t,8,0,t.component.listOperations,"description","id"),e(t,16,0,"operation"),e(t,31,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,31,0,i["\u0275nov"](t,32).transform("CLEAR")),""))},function(e,t){e(t,0,1,[i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).clearable,i["\u0275nov"](t,8).dir,i["\u0275nov"](t,18).ngClassUntouched,i["\u0275nov"](t,18).ngClassTouched,i["\u0275nov"](t,18).ngClassPristine,i["\u0275nov"](t,18).ngClassDirty,i["\u0275nov"](t,18).ngClassValid,i["\u0275nov"](t,18).ngClassInvalid,i["\u0275nov"](t,18).ngClassPending])})}function ta(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ea)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorOperation",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","operation"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"operation.description"==t.parent.parent.context.$implicit.field),e(t,8,0,n.operationFormGroup,n.entityNameSource,"operation",i["\u0275nov"](t,5))},null)}function na(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275eld"](3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                              "])),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],null,function(e,t){e(t,6,0,t.context.$implicit.description)})}function ia(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,25,"kendo-multiselect",[["class","form-control"],["formControlName","equipment"],["name","equipment"]],[[2,"k-widget",null],[2,"k-multiselect",null],[2,"k-header",null],[1,"dir",0],[2,"k-state-focused",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"valueChange"]],function(e,t,n){var i=!0,o=e.component;return"ngModelChange"===t&&(i=!1!==(o.selectedMachines=n)&&i),"valueChange"===t&&(i=!1!==o.onEquipmentsChanged()&&i),i},st.j,st.e)),i["\u0275prd"](6144,null,dt.m,null,[dt.u]),i["\u0275prd"](256,null,b.b,"kendo.multiselect",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](8,7323648,null,9,dt.u,[b.c,y.g,dt.g,dt.A,dt.w,dt.h,i.ChangeDetectorRef,i.KeyValueDiffers,i.Renderer2,i.ElementRef,i.NgZone,[2,dt.E]],{data:[0,"data"],valueField:[1,"valueField"],textField:[2,"textField"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,29,{template:0}),i["\u0275qud"](335544320,30,{customItemTemplate:0}),i["\u0275qud"](335544320,31,{groupTemplate:0}),i["\u0275qud"](335544320,32,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,33,{headerTemplate:0}),i["\u0275qud"](335544320,34,{footerTemplate:0}),i["\u0275qud"](335544320,35,{tagTemplate:0}),i["\u0275qud"](335544320,36,{groupTagTemplate:0}),i["\u0275qud"](335544320,37,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.u]),i["\u0275did"](19,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](21,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](0,null,null,1,null,na)),i["\u0275did"](24,16384,[[29,4]],0,dt.p,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){var n=t.component;e(t,8,0,n.listMachines,"id","description"),e(t,19,0,"equipment",n.selectedMachines)},function(e,t){e(t,0,1,[i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).dir,i["\u0275nov"](t,8).focusedClass,i["\u0275nov"](t,8).disabledClass,i["\u0275nov"](t,21).ngClassUntouched,i["\u0275nov"](t,21).ngClassTouched,i["\u0275nov"](t,21).ngClassPristine,i["\u0275nov"](t,21).ngClassDirty,i["\u0275nov"](t,21).ngClassValid,i["\u0275nov"](t,21).ngClassInvalid,i["\u0275nov"](t,21).ngClassPending])})}function oa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ia)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorEquipment",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","equipment"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"equipment"==t.parent.parent.context.$implicit.field),e(t,8,0,n.operationFormGroup,n.entityNameSource,"equipment",i["\u0275nov"](t,5))},null)}function ra(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,8,"kendo-maskedtextbox",[["class","form-control"],["formControlName","equipmentTimeNet"],["name","equipmentTimeNet"],["type","number"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-maskedtextbox",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown"],[null,"paste"],[null,"input"]],function(e,t,n){var o=!0,r=e.component;return"paste"===t&&(o=!1!==i["\u0275nov"](e,2).pasteHandler(n)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,2).inputHandler(n)&&o),"keydown"===t&&(o=!1!==r.checkPositive(n,i["\u0275nov"](e,2))&&o),o},_n.d,_n.a)),i["\u0275prd"](512,null,kn.s,kn.s,[]),i["\u0275did"](2,638976,[["inputEquipmentTimeNet",4]],0,kn.d,[kn.s,i.Renderer2,i.ElementRef,i.NgZone,i.Injector,[2,b.e]],{disabled:[0,"disabled"]},null),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[kn.d]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.d]),i["\u0275did"](5,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](7,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){var n=t.component;e(t,2,0,n.operationFormGroup.controls.disabledEquipmentTimeNetColumn.value),e(t,5,0,"equipmentTimeNet",n.operationFormGroup.controls.disabledEquipmentTimeNetColumn.value)},function(e,t){e(t,0,1,[i["\u0275nov"](t,2).direction,i["\u0275nov"](t,2).hostClasses,i["\u0275nov"](t,2).hostClasses,i["\u0275nov"](t,2).hostDisabledClass,i["\u0275nov"](t,7).ngClassUntouched,i["\u0275nov"](t,7).ngClassTouched,i["\u0275nov"](t,7).ngClassPristine,i["\u0275nov"](t,7).ngClassDirty,i["\u0275nov"](t,7).ngClassValid,i["\u0275nov"](t,7).ngClassInvalid,i["\u0275nov"](t,7).ngClassPending])})}function aa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ra)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorEquipmentTimeNet",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","equipmentTimeNet"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"NET_TIME_EQUIPMENTS"==t.parent.parent.context.$implicit.field),e(t,8,0,n.operationFormGroup,n.entityNameSource,"equipmentTimeNet",i["\u0275nov"](t,5))},null)}function la(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275eld"](3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                              "])),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],null,function(e,t){e(t,6,0,t.context.$implicit.FullName)})}function sa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,25,"kendo-multiselect",[["class","form-control"],["formControlName","responsibleId"],["name","person"],["textField","FullName"],["valueField","Id"]],[[2,"k-widget",null],[2,"k-multiselect",null],[2,"k-header",null],[1,"dir",0],[2,"k-state-focused",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"valueChange"]],function(e,t,n){var i=!0,o=e.component;return"ngModelChange"===t&&(i=!1!==(o.selectedUsers=n)&&i),"valueChange"===t&&(i=!1!==o.onPersonsChanged(n)&&i),i},st.j,st.e)),i["\u0275prd"](6144,null,dt.m,null,[dt.u]),i["\u0275prd"](256,null,b.b,"kendo.multiselect",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](8,7323648,null,9,dt.u,[b.c,y.g,dt.g,dt.A,dt.w,dt.h,i.ChangeDetectorRef,i.KeyValueDiffers,i.Renderer2,i.ElementRef,i.NgZone,[2,dt.E]],{data:[0,"data"],valueField:[1,"valueField"],textField:[2,"textField"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,38,{template:0}),i["\u0275qud"](335544320,39,{customItemTemplate:0}),i["\u0275qud"](335544320,40,{groupTemplate:0}),i["\u0275qud"](335544320,41,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,42,{headerTemplate:0}),i["\u0275qud"](335544320,43,{footerTemplate:0}),i["\u0275qud"](335544320,44,{tagTemplate:0}),i["\u0275qud"](335544320,45,{groupTagTemplate:0}),i["\u0275qud"](335544320,46,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.u]),i["\u0275did"](19,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](21,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](0,null,null,1,null,la)),i["\u0275did"](24,16384,[[38,4]],0,dt.p,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){var n=t.component;e(t,8,0,n.listUsers,"Id","FullName"),e(t,19,0,"responsibleId",n.selectedUsers)},function(e,t){e(t,0,1,[i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).widgetClasses,i["\u0275nov"](t,8).dir,i["\u0275nov"](t,8).focusedClass,i["\u0275nov"](t,8).disabledClass,i["\u0275nov"](t,21).ngClassUntouched,i["\u0275nov"](t,21).ngClassTouched,i["\u0275nov"](t,21).ngClassPristine,i["\u0275nov"](t,21).ngClassDirty,i["\u0275nov"](t,21).ngClassValid,i["\u0275nov"](t,21).ngClassInvalid,i["\u0275nov"](t,21).ngClassPending])})}function da(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,sa)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorPersons",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","responsibleId"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"person"==t.parent.parent.context.$implicit.field),e(t,8,0,n.operationFormGroup,n.entityNameSource,"responsibleId",i["\u0275nov"](t,5))},null)}function ca(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,8,"kendo-maskedtextbox",[["class","form-control"],["formControlName","personTimeNet"],["name","personTimeNet"],["type","number"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-maskedtextbox",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown"],[null,"paste"],[null,"input"]],function(e,t,n){var o=!0,r=e.component;return"paste"===t&&(o=!1!==i["\u0275nov"](e,2).pasteHandler(n)&&o),"input"===t&&(o=!1!==i["\u0275nov"](e,2).inputHandler(n)&&o),"keydown"===t&&(o=!1!==r.checkPositive(n,i["\u0275nov"](e,2))&&o),o},_n.d,_n.a)),i["\u0275prd"](512,null,kn.s,kn.s,[]),i["\u0275did"](2,638976,[["inputPersonTimeNet",4]],0,kn.d,[kn.s,i.Renderer2,i.ElementRef,i.NgZone,i.Injector,[2,b.e]],{disabled:[0,"disabled"]},null),i["\u0275prd"](1024,null,v.NG_VALIDATORS,function(e){return[e]},[kn.d]),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.d]),i["\u0275did"](5,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[2,v.NG_VALIDATORS],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](7,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],function(e,t){var n=t.component;e(t,2,0,n.operationFormGroup.controls.disabledPersonTimeNetColumn.value),e(t,5,0,"personTimeNet",n.operationFormGroup.controls.disabledPersonTimeNetColumn.value)},function(e,t){e(t,0,1,[i["\u0275nov"](t,2).direction,i["\u0275nov"](t,2).hostClasses,i["\u0275nov"](t,2).hostClasses,i["\u0275nov"](t,2).hostDisabledClass,i["\u0275nov"](t,7).ngClassUntouched,i["\u0275nov"](t,7).ngClassTouched,i["\u0275nov"](t,7).ngClassPristine,i["\u0275nov"](t,7).ngClassDirty,i["\u0275nov"](t,7).ngClassValid,i["\u0275nov"](t,7).ngClassInvalid,i["\u0275nov"](t,7).ngClassPending])})}function ua(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ca)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](5,0,[["anchorPersonTimeNet",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"app-control-message-grid-cell",[["controlName","personTimeNet"]],null,null,null,ce.b,ce.a)),i["\u0275did"](8,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,3,0,"personTimeNet"==t.parent.parent.context.$implicit.field),e(t,8,0,n.operationFormGroup,n.entityNameSource,"personTimeNet",i["\u0275nov"](t,5))},null)}function ha(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,29,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](2,0,null,null,20,"kendo-dropdownlist",[["class","form-control"],["formControlName","operationBeforeDtos"],["name","operationBeforeDtos"]],[[2,"k-widget",null],[2,"k-dropdown",null],[2,"k-header",null],[1,"dir",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"valueChange"]],function(e,t,n){var i=!0;return"valueChange"===t&&(i=!1!==e.component.changeCurrentPredecessor(n)&&i),i},st.i,st.d)),i["\u0275prd"](6144,null,dt.m,null,[dt.i]),i["\u0275prd"](256,null,b.b,"kendo.dropdownlist",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](10,770048,null,7,dt.i,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.Renderer2,i.ElementRef,i.ChangeDetectorRef,[2,dt.E]],{data:[0,"data"],textField:[1,"textField"],valueField:[2,"valueField"]},{valueChange:"valueChange"}),i["\u0275qud"](335544320,47,{itemTemplate:0}),i["\u0275qud"](335544320,48,{groupTemplate:0}),i["\u0275qud"](335544320,49,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,50,{valueTemplate:0}),i["\u0275qud"](335544320,51,{headerTemplate:0}),i["\u0275qud"](335544320,52,{footerTemplate:0}),i["\u0275qud"](335544320,53,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.i]),i["\u0275did"](19,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](21,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](24,0,[["anchorOperationBefore",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](26,0,null,null,2,"app-control-message-grid-cell",[["controlName","operationBeforeDtos"]],null,null,null,ce.b,ce.a)),i["\u0275did"](27,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,10,0,n.listItems,"description","id"),e(t,19,0,"operationBeforeDtos"),e(t,27,0,n.operationFormGroup,n.entityNameSource,"operationBeforeDtos",i["\u0275nov"](t,24))},function(e,t){e(t,2,1,[i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).dir,i["\u0275nov"](t,21).ngClassUntouched,i["\u0275nov"](t,21).ngClassTouched,i["\u0275nov"](t,21).ngClassPristine,i["\u0275nov"](t,21).ngClassDirty,i["\u0275nov"](t,21).ngClassValid,i["\u0275nov"](t,21).ngClassInvalid,i["\u0275nov"](t,21).ngClassPending])})}function pa(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275eld"](3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                              "])),(e()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],null,function(e,t){e(t,6,0,t.context.$implicit.Code)})}function fa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,34,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](2,0,null,null,25,"kendo-multiselect",[["formControlName","productNomenclatures"],["name","productNomenclatures"]],[[2,"k-widget",null],[2,"k-multiselect",null],[2,"k-header",null],[1,"dir",0],[2,"k-state-focused",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"removeTag"],[null,"valueChange"],[null,"ngModelChange"]],function(e,t,n){var i=!0,o=e.component;return"removeTag"===t&&(i=!1!==o.removeTag(n)&&i),"valueChange"===t&&(i=!1!==o.onProductNomenclaturesChanged(n)&&i),"ngModelChange"===t&&(i=!1!==(o.selectedProductNomenclatures=n)&&i),i},st.j,st.e)),i["\u0275prd"](6144,null,dt.m,null,[dt.u]),i["\u0275prd"](256,null,b.b,"kendo.multiselect",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](10,7323648,null,9,dt.u,[b.c,y.g,dt.g,dt.A,dt.w,dt.h,i.ChangeDetectorRef,i.KeyValueDiffers,i.Renderer2,i.ElementRef,i.NgZone,[2,dt.E]],{data:[0,"data"],valueField:[1,"valueField"],textField:[2,"textField"],clearButton:[3,"clearButton"]},{valueChange:"valueChange",removeTag:"removeTag"}),i["\u0275qud"](335544320,54,{template:0}),i["\u0275qud"](335544320,55,{customItemTemplate:0}),i["\u0275qud"](335544320,56,{groupTemplate:0}),i["\u0275qud"](335544320,57,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,58,{headerTemplate:0}),i["\u0275qud"](335544320,59,{footerTemplate:0}),i["\u0275qud"](335544320,60,{tagTemplate:0}),i["\u0275qud"](335544320,61,{groupTagTemplate:0}),i["\u0275qud"](335544320,62,{noDataTemplate:0}),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.u]),i["\u0275did"](21,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](23,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](0,null,null,1,null,pa)),i["\u0275did"](26,16384,[[54,4]],0,dt.p,[i.TemplateRef],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n\n                      "])),(e()(),i["\u0275eld"](29,0,[["anchorProductNomenclature",1]],null,0,"i",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](31,0,null,null,2,"app-control-message-grid-cell",[["controlName","productNomenclatures"]],null,null,null,ce.b,ce.a)),i["\u0275did"](32,114688,null,0,ue.a,[],{group:[0,"group"],source:[1,"source"],controlName:[2,"controlName"],anchor:[3,"anchor"]},null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "]))],function(e,t){var n=t.component;e(t,10,0,n.listProductNomenclature,"Id","Code",!1),e(t,21,0,"productNomenclatures",n.selectedProductNomenclatures),e(t,32,0,n.operationFormGroup,n.entityNameSource,"productNomenclatures",i["\u0275nov"](t,29))},function(e,t){e(t,2,1,[i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).widgetClasses,i["\u0275nov"](t,10).dir,i["\u0275nov"](t,10).focusedClass,i["\u0275nov"](t,10).disabledClass,i["\u0275nov"](t,23).ngClassUntouched,i["\u0275nov"](t,23).ngClassTouched,i["\u0275nov"](t,23).ngClassPristine,i["\u0275nov"](t,23).ngClassDirty,i["\u0275nov"](t,23).ngClassValid,i["\u0275nov"](t,23).ngClassInvalid,i["\u0275nov"](t,23).ngClassPending])})}function ga(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](1,0,null,null,32,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,3).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,3).onReset()&&o),o},null,null)),i["\u0275did"](2,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](3,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](5,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Xr)),i["\u0275did"](8,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Kr)),i["\u0275did"](11,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ta)),i["\u0275did"](14,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,oa)),i["\u0275did"](17,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,aa)),i["\u0275did"](20,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,da)),i["\u0275did"](23,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ua)),i["\u0275did"](26,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ha)),i["\u0275did"](29,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,fa)),i["\u0275did"](32,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,3,0,n.operationFormGroup),e(t,8,0,"order"===t.parent.context.$implicit.field),e(t,11,0,"unitOfMeasure"===t.parent.context.$implicit.field),e(t,14,0,"operation.description"===t.parent.context.$implicit.field),e(t,17,0,"equipment"===t.parent.context.$implicit.field),e(t,20,0,"NET_TIME_EQUIPMENTS"===t.parent.context.$implicit.field),e(t,23,0,"person"===t.parent.context.$implicit.field),e(t,26,0,"personTimeNet"===t.parent.context.$implicit.field),e(t,29,0,t.parent.context.$implicit.field===n.operationBeforeDtos),e(t,32,0,"productNomenclature"===t.parent.context.$implicit.field)},function(e,t){e(t,1,0,i["\u0275nov"](t,5).ngClassUntouched,i["\u0275nov"](t,5).ngClassTouched,i["\u0275nov"](t,5).ngClassPristine,i["\u0275nov"](t,5).ngClassDirty,i["\u0275nov"](t,5).ngClassValid,i["\u0275nov"](t,5).ngClassInvalid,i["\u0275nov"](t,5).ngClassPending)})}function ma(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,4,"span",[["theme","light"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"],[null,"click"]],function(e,t,n){var o=!0;return"focusin"===t&&(o=!1!==i["\u0275nov"](e,2).onMouseEnter()&&o),"mouseenter"===t&&(o=!1!==i["\u0275nov"](e,2).onMouseEnter()&&o),"focusout"===t&&(o=!1!==i["\u0275nov"](e,2).onMouseLeave()&&o),"mouseleave"===t&&(o=!1!==i["\u0275nov"](e,2).onMouseLeave()&&o),"click"===t&&(o=!1!==i["\u0275nov"](e,2).onClick()&&o),o},null,null)),i["\u0275did"](2,737280,null,0,Sn.b,[[2,Sn.d],i.ElementRef,i.ComponentFactoryResolver,i.ApplicationRef,i.Injector],{tooltipValue:[0,"tooltipValue"],theme:[1,"theme"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](4,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,2,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,2,0,i["\u0275nov"](t,3).transform("SECONDS")),""),"light")},function(e,t){e(t,4,0,i["\u0275unv"](t,4,0,i["\u0275nov"](t,5).transform("NET_TIME_PERSON")))})}function va(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](0,null,null,1,null,ma)),i["\u0275did"](3,16384,[[8,4]],0,m._45,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "]))],null,null)}function ya(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,4,"span",[["theme","light"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"],[null,"click"]],function(e,t,n){var o=!0;return"focusin"===t&&(o=!1!==i["\u0275nov"](e,2).onMouseEnter()&&o),"mouseenter"===t&&(o=!1!==i["\u0275nov"](e,2).onMouseEnter()&&o),"focusout"===t&&(o=!1!==i["\u0275nov"](e,2).onMouseLeave()&&o),"mouseleave"===t&&(o=!1!==i["\u0275nov"](e,2).onMouseLeave()&&o),"click"===t&&(o=!1!==i["\u0275nov"](e,2).onClick()&&o),o},null,null)),i["\u0275did"](2,737280,null,0,Sn.b,[[2,Sn.d],i.ElementRef,i.ComponentFactoryResolver,i.ApplicationRef,i.Injector],{tooltipValue:[0,"tooltipValue"],theme:[1,"theme"]},null),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](4,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,2,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,2,0,i["\u0275nov"](t,3).transform("SECONDS")),""),"light")},function(e,t){e(t,4,0,i["\u0275unv"](t,4,0,i["\u0275nov"](t,5).transform("NET_TIME_EQUIPMENTS")))})}function ba(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](0,null,null,1,null,ya)),i["\u0275did"](3,16384,[[8,4]],0,m._45,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "]))],null,null)}function wa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"span",[["style"," white-space: pre-line"]],null,null,null,null,null)),(e()(),i["\u0275ted"](1,null,["",""])),(e()(),i["\u0275eld"](2,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function Ca(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,wa)),i["\u0275did"](2,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,2,0,t.component.splitItAndReturnArray(t.context.dataItem.equipment))},null)}function xa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](0,null,null,1,null,Ca)),i["\u0275did"](3,16384,[[11,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "]))],null,null)}function Sa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"span",[["style"," white-space: pre-line"]],null,null,null,null,null)),(e()(),i["\u0275ted"](1,null,["",""])),(e()(),i["\u0275eld"](2,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function Ta(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Sa)),i["\u0275did"](2,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,2,0,t.component.splitItAndReturnArray(t.context.dataItem.person))},null)}function Ea(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](0,null,null,1,null,Ta)),i["\u0275did"](3,16384,[[11,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "]))],null,null)}function _a(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"span",[["style"," white-space: pre-line"]],null,null,null,null,null)),(e()(),i["\u0275ted"](1,null,["",""])),(e()(),i["\u0275eld"](2,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function ka(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275and"](16777216,null,null,1,null,_a)),i["\u0275did"](2,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,2,0,t.component.splitItAndReturnArray(t.context.dataItem.productNomenclature))},null)}function Da(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](0,null,null,1,null,ka)),i["\u0275did"](3,16384,[[11,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "]))],null,null)}function Aa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,31,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](1,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],format:[3,"format"],filter:[4,"filter"],filterable:[5,"filterable"]},null),i["\u0275qud"](603979776,8,{headerTemplates:1}),i["\u0275qud"](335544320,9,{footerTemplate:0}),i["\u0275qud"](603979776,10,{columnMenuTemplates:1}),i["\u0275qud"](603979776,11,{template:0}),i["\u0275qud"](335544320,12,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,13,{groupFooterTemplate:0}),i["\u0275qud"](335544320,14,{editTemplate:0}),i["\u0275qud"](335544320,15,{filterCellTemplate:0}),i["\u0275qud"](335544320,16,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,ga)),i["\u0275did"](15,16384,[[14,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,va)),i["\u0275did"](18,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ba)),i["\u0275did"](21,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,xa)),i["\u0275did"](24,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ea)),i["\u0275did"](27,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Da)),i["\u0275did"](30,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,1,0,i["\u0275unv"](t,1,0,i["\u0275nov"](t,11).transform(t.context.$implicit.title)),t.context.$implicit._width,t.context.$implicit.field,t.context.$implicit.format,t.context.$implicit.filter,t.context.$implicit.filterable),e(t,18,0,"personTimeNet"===t.context.$implicit.field),e(t,21,0,"NET_TIME_EQUIPMENTS"===t.context.$implicit.field),e(t,24,0,"equipment"===t.context.$implicit.field),e(t,27,0,"person"===t.context.$implicit.field),e(t,30,0,"productNomenclature"===t.context.$implicit.field)},null)}function Oa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,7,"button",[["dir","ltr"],["kendoGridEditCommand",""],["style","background-color: white;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-edit-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,4).click(n)&&o),"click"===t&&(o=!1!==r.handleEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](2,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](3,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](4,9388032,null,0,m._2,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](6,0,null,null,0,"i",[["class","las la-pen cursor-pointer edit-pencil la-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "]))],function(e,t){e(t,2,0,"ltr"),e(t,4,0)},function(e,t){e(t,0,1,[i["\u0275nov"](t,2).dir,i["\u0275nov"](t,4).classButton,i["\u0275nov"](t,4).classDisabled,i["\u0275nov"](t,4).classPrimary,i["\u0275nov"](t,4).isFlat,i["\u0275nov"](t,4).isBare,i["\u0275nov"](t,4).isOutline,i["\u0275nov"](t,4).classActive,i["\u0275nov"](t,4).dir,i["\u0275nov"](t,4).visible,i["\u0275nov"](t,4).commandClass])})}function Ia(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Oa)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](4,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridSaveCommand",""]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-save-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,8).click(n)&&o),"click"===t&&(o=!1!==r.handledEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](6,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](7,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](8,9388032,null,0,m._88,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](10,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-check fa-lg AddIcon"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](13,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridCancelCommand",""],["style","border: none; color: #E91E63 !important;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-cancel-command",null]],[[null,"click"]],function(e,t,n){var o=!0,r=e.component;return"click"===t&&(o=!1!==i["\u0275nov"](e,17).click(n)&&o),"click"===t&&(o=!1!==r.handledEditHandler()&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](15,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](16,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](17,9388032,null,0,m.l,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](19,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-ban fa-lg"],["style","color: #E91E63;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](22,0,null,null,7,"button",[["class","noPadding btn-Add k-button"],["dir","ltr"],["kendoGridRemoveCommand",""],["style","border: none; color: #E91E63 !important;"]],[[8,"dir",0],[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0],[4,"display",null],[2,"k-grid-remove-command",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,26).click(n)&&o),o},null,null)),i["\u0275prd"](6144,null,he.d,null,[he.c]),i["\u0275did"](24,1196032,null,0,he.c,[],{dir:[0,"dir"]},null),i["\u0275did"](25,4341760,null,0,m._28,[[3,m.k],i.ElementRef,i.Renderer2],null,null),i["\u0275did"](26,9388032,null,0,m._82,[m._3,m.k,i.ElementRef,i.Renderer2,b.c,i.NgZone],null,null),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](28,0,null,null,0,"i",[["class","fa fa-times fa-lg"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){e(t,2,0,!t.component.editMode),e(t,6,0,"ltr"),e(t,8,0),e(t,15,0,"ltr"),e(t,17,0),e(t,24,0,"ltr"),e(t,26,0)},function(e,t){e(t,4,1,[i["\u0275nov"](t,6).dir,i["\u0275nov"](t,8).classButton,i["\u0275nov"](t,8).classDisabled,i["\u0275nov"](t,8).classPrimary,i["\u0275nov"](t,8).isFlat,i["\u0275nov"](t,8).isBare,i["\u0275nov"](t,8).isOutline,i["\u0275nov"](t,8).classActive,i["\u0275nov"](t,8).dir,i["\u0275nov"](t,8).visible,i["\u0275nov"](t,8).commandClass]),e(t,13,1,[i["\u0275nov"](t,15).dir,i["\u0275nov"](t,17).classButton,i["\u0275nov"](t,17).classDisabled,i["\u0275nov"](t,17).classPrimary,i["\u0275nov"](t,17).isFlat,i["\u0275nov"](t,17).isBare,i["\u0275nov"](t,17).isOutline,i["\u0275nov"](t,17).classActive,i["\u0275nov"](t,17).dir,i["\u0275nov"](t,17).visible,i["\u0275nov"](t,17).commandClass]),e(t,22,1,[i["\u0275nov"](t,24).dir,i["\u0275nov"](t,26).classButton,i["\u0275nov"](t,26).classDisabled,i["\u0275nov"](t,26).classPrimary,i["\u0275nov"](t,26).isFlat,i["\u0275nov"](t,26).isBare,i["\u0275nov"](t,26).isOutline,i["\u0275nov"](t,26).classActive,i["\u0275nov"](t,26).dir,i["\u0275nov"](t,26).visible,i["\u0275nov"](t,26).commandClass])})}function Pa(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.saveOrEditGammeClick()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("EDIT_GAMME")))})}function Ra(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-sm btn-save mx-1"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.saveOrEditGammeClick()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef])],null,function(e,t){e(t,3,0,i["\u0275unv"](t,3,0,i["\u0275nov"](t,4).transform("SAVE_GAMME")))})}function Ma(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{itemDropDown:0}),(e()(),i["\u0275and"](16777216,null,null,1,null,Gr)),i["\u0275did"](2,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275eld"](4,0,null,null,186,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](6,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](8,0,null,null,5,"div",[["class","col-sm-12 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](10,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](11,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](16,0,null,null,141,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](18,0,null,null,138,"form",[["class","form-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,20).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,20).onReset()&&o),o},null,null)),i["\u0275did"](19,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](20,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](22,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](24,0,null,null,58,"div",[["class","col-lg-12 col-sm-12 col-md-12 mr-5"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](26,0,null,null,55,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](28,0,null,null,18,"div",[["class","col-lg-3 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](30,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](31,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](33,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](36,0,null,null,5,"input",[["class","form-control"],["formControlName","reference"],["name","reference"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,37)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,37).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,37)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,37)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](37,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](39,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](41,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](43,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](44,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](48,0,null,null,15,"div",[["class","col-lg-3 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](50,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](51,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](53,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](56,0,null,null,2,"app-dropdown-product-items",[],null,[[null,"Selected"]],function(e,t,n){var i=!0;return"Selected"===t&&(i=!1!==e.component.itemSelect(n)&&i),i},$.b,$.a)),i["\u0275did"](57,770048,[[1,4],["item",4]],0,ee.a,[l.a,k.a,te.a,ne.a,ie.a,oe.a,re.a,i.ElementRef,ae.a],{itemForm:[0,"itemForm"],selectedItemId:[1,"selectedItemId"],parentViewContainerRef:[2,"parentViewContainerRef"],source:[3,"source"],activeKeyPress:[4,"activeKeyPress"],hideSearch:[5,"hideSearch"],ignoreCharges:[6,"ignoreCharges"],removeFilter:[7,"removeFilter"],showFilter:[8,"showFilter"]},{Selected:"Selected"}),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](60,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](61,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](65,0,null,null,15,"div",[["class","col-lg-3 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](67,0,null,null,4,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](68,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](70,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["*"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](73,0,null,null,2,"app-dropdown-area",[["controlName","areaId"]],null,[[null,"selectedAreaId"]],function(e,t,n){var i=!0;return"selectedAreaId"===t&&(i=!1!==e.component.selectedAreaId(n)&&i),i},Pr,Or)),i["\u0275did"](74,114688,null,0,Ar,[s.k,yi],{form:[0,"form"]},{selectedAreaId:"selectedAreaId"}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](77,0,null,null,2,"app-control-messages",[["class","error-msg messages text-left text-danger"]],null,null,null,le.b,le.a)),i["\u0275did"](78,49152,null,0,se.a,[de.b],{control:[0,"control"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](84,0,null,null,71,"div",[["class","card  mt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](86,0,null,null,68,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](88,0,null,null,65,"div",[["class","card-body p-3"],["style","min-height: fit-content;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](90,0,null,null,62,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"edit"],[null,"cancel"],[null,"save"],[null,"remove"],[null,"add"],[null,"dataStateChange"],[null,"cellClick"]],function(e,t,n){var i=!0,o=e.component;return"edit"===t&&(i=!1!==o.editHandler(n)&&i),"cancel"===t&&(i=!1!==o.cancelHandler(n)&&i),"save"===t&&(i=!1!==o.saveHandler(n)&&i),"remove"===t&&(i=!1!==o.removeOperationHandler(n)&&i),"add"===t&&(i=!1!==o.addHandler(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"cellClick"===t&&(i=!1!==o.getCurrentDataItem(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](122,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],groupable:[8,"groupable"],rowClass:[9,"rowClass"],reorderable:[10,"reorderable"],columnMenu:[11,"columnMenu"]},{dataStateChange:"dataStateChange",edit:"edit",cancel:"cancel",save:"save",remove:"remove",add:"add",cellClick:"cellClick"}),i["\u0275qud"](603979776,2,{columns:1}),i["\u0275qud"](603979776,3,{detailTemplateChildren:1}),i["\u0275qud"](603979776,4,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,5,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,6,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,7,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Vr)),i["\u0275did"](132,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Yr)),i["\u0275did"](135,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Aa)),i["\u0275did"](138,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n              "])),(e()(),i["\u0275eld"](140,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](141,49152,null,4,m.J,[[8,null]],{title:[0,"title"],width:[1,"width"]},null),i["\u0275qud"](603979776,63,{headerTemplates:1}),i["\u0275qud"](335544320,64,{footerTemplate:0}),i["\u0275qud"](603979776,65,{columnMenuTemplates:1}),i["\u0275qud"](335544320,66,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,Ia)),i["\u0275did"](150,16384,[[66,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](160,0,null,null,29,"div",[["class","fixed-card-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](162,0,null,null,26,"div",[["class","footerStyle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](164,0,null,null,23,"footer",[["class","app-footer ml-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](166,0,null,null,20,"div",[["class","w-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](168,0,null,null,17,"div",[["class","d-flex justify-content-end p-3 flex-align footer-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](170,0,null,null,8,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,171).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&o),o},null,null)),i["\u0275did"](171,671744,null,0,T.RouterLinkWithHref,[T.Router,T.ActivatedRoute,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](173,0,null,null,4,"span",[["class","btn btn-sm btn-back-to-list btn-primary"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](175,0,null,null,0,"i",[["class","fa fa-chevron-circle-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](176,null,["\n                ","\n              "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Pa)),i["\u0275did"](181,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,Ra)),i["\u0275did"](184,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,n.spinner),e(t,20,0,n.formGroup),e(t,39,0,"reference"),e(t,44,0,n.formGroup.controls.reference),e(t,57,0,n.formGroup,n.idItemSelected,n.viewRef,"GAMME",!0,!0,!0,!0,!0),e(t,61,0,n.formGroup.controls.IdItem),e(t,74,0,n.formGroup),e(t,78,0,n.formGroup.controls.areaId),e(t,122,1,[n.gridSettingsGammes.gridData,n.gridSettingsGammes.state.take,n.gridSettingsGammes.state.skip,n.gridSettingsGammes.state.sort,n.gridSettingsGammes.state.filter,!1,!1,n.pagerSettings,!1,n.rowCallback,!0,!1]),e(t,132,0,!n.emptyGammePorducts),e(t,135,0,n.emptyGammePorducts),e(t,138,0,n.gridSettingsGammes.columnsConfig),e(t,141,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,141,0,i["\u0275nov"](t,146).transform("ACTION")),""),100),e(t,171,0,"/main/manufacturing/gamme"),e(t,181,0,n.isUpdateMode),e(t,184,0,!n.isUpdateMode)},function(e,t){var n=t.component;e(t,11,0,i["\u0275unv"](t,11,0,i["\u0275nov"](t,12).transform(n.isUpdateMode?"EDIT_GAMME":"NEW_GAMME"))),e(t,18,0,i["\u0275nov"](t,22).ngClassUntouched,i["\u0275nov"](t,22).ngClassTouched,i["\u0275nov"](t,22).ngClassPristine,i["\u0275nov"](t,22).ngClassDirty,i["\u0275nov"](t,22).ngClassValid,i["\u0275nov"](t,22).ngClassInvalid,i["\u0275nov"](t,22).ngClassPending),e(t,31,0,i["\u0275unv"](t,31,0,i["\u0275nov"](t,32).transform("REFERENCE"))),e(t,36,0,!0,i["\u0275nov"](t,41).ngClassUntouched,i["\u0275nov"](t,41).ngClassTouched,i["\u0275nov"](t,41).ngClassPristine,i["\u0275nov"](t,41).ngClassDirty,i["\u0275nov"](t,41).ngClassValid,i["\u0275nov"](t,41).ngClassInvalid,i["\u0275nov"](t,41).ngClassPending),e(t,51,0,i["\u0275unv"](t,51,0,i["\u0275nov"](t,52).transform("PRODUCT"))),e(t,68,0,i["\u0275unv"](t,68,0,i["\u0275nov"](t,69).transform("WORKSHOP"))),e(t,90,0,i["\u0275nov"](t,122).dir,i["\u0275nov"](t,122).hostClasses,i["\u0275nov"](t,122).hostClasses,i["\u0275nov"](t,122).lockedClasses,i["\u0275nov"](t,122).virtualClasses,i["\u0275nov"](t,122).columnResizing,i["\u0275nov"](t,122).noScrollbarClass),e(t,170,0,i["\u0275nov"](t,171).target,i["\u0275nov"](t,171).href),e(t,176,0,i["\u0275unv"](t,176,0,i["\u0275nov"](t,177).transform("BACK_TO_LIST")))})}var Na=i["\u0275ccf"]("app-add-gamme",Ur,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,16777216,null,null,1,"app-add-gamme",[],null,null,null,Ma,Fr)),i["\u0275did"](1,4440064,null,0,Ur,[dn.a,T.ActivatedRoute,T.Router,E.a,de.b,s.k,Hn,R,k.a,te.a,Br,A.a,sn,i.ViewContainerRef,l.a,an,oe.a,re.a,Nr.a,i.NgZone],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),La="ej2_instances",Ha=0,Ba=!1;function ja(e,t){var n=t;return n.unshift(void 0),new(Function.prototype.bind.apply(e,n))}function za(e,t){for(var n=t,i=e.replace(/\[/g,".").replace(/\]/g,"").split("."),o=0;o<i.length&&!Wa(n);o++)n=n[i[o]];return n}function Ua(e,t,n){var i,o,r=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=n||{},l=a,s=r.length;for(i=0;i<s;i++)o=r[i],i+1===s?l[o]=void 0===t?{}:t:Va(l[o])&&(l[o]={}),l=l[o];return a}function Fa(e){return!Va(e)&&e.constructor==={}.constructor}function Ga(e,t){if(!Va(t))for(var n=e,i=t,o=0,r=Object.keys(t);o<r.length;o++){var a=r[o];Va(n.deepMerge)||-1===n.deepMerge.indexOf(a)||!Fa(i[a])&&!Array.isArray(i[a])?n[a]=i[a]:qa(n[a],n[a],i[a],!0)}}function qa(e,t,n,i){var o=e&&"object"==typeof e?e:{},r=arguments.length;i&&(r-=1);for(var a=function(e){if(!l[e])return"continue";var t=l[e];Object.keys(t).forEach(function(e){var n,r=o[e],a=t[e],l=Array.isArray(a)&&Array.isArray(r)&&a.length!==r.length,s=!Ka()||!(r instanceof Event||l);i&&s&&(Fa(a)||Array.isArray(a))?Fa(a)?(n=r||{},Array.isArray(n)&&n.hasOwnProperty("isComplexArray")?qa(n,{},a,i):o[e]=qa(n,{},a,i)):(n=Ka()?r&&Object.keys(a).length:r||[],o[e]=qa([],n,a,i)):o[e]=a})},l=arguments,s=1;s<r;s++)a(s);return o}function Va(e){return void 0===e||null===e}function Wa(e){return"undefined"==typeof e}function Ya(e){return e+"_"+Ha++}function Xa(e,t){return e===t||!(e===document||!e)&&Xa(e.parentNode,t)}function Za(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function Ja(e){var t=e+"";return t.match(/auto|%|px|vh|vm|vmax|vmin|em/)?t:t+"px"}function Ka(){return Ba}function Qa(e,t){var n="string"==typeof e?document.querySelector(e):e;if(n[La])for(var i=0,o=n[La];i<o.length;i++){var r=o[i];if(r instanceof t)return r}return null}var $a,el={latn:{_digits:"0123456789",_type:"numeric"}},tl={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},nl=[0,1,2,3,4,5,6,7,8,9],il=function(){function e(){}return e.getMainObject=function(e,t){return za(Ka()?t:"main."+t,e)},e.getNumberingSystem=function(e){return za("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var n={},i=0,o=t||Object.keys(e);i<o.length;i++){var r=o[i];n.hasOwnProperty(e[r])||(n[e[r]]=r)}return n},e.getSymbolRegex=function(e){var t=e.map(function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},n=0,i=Object.keys(tl);n<i.length;n++){var o=i[n];t[e[o]]=tl[o]}return t},e.constructRegex=function(e){for(var t=e.length,n="",i=0;i<t;i++)n+=i!==t-1?e[i]+"|":e[i];return n},e.convertValueParts=function(e,t,n){return e.replace(t,function(e){return n[e]})},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=za("numbers",e),t.nSystem=za("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,n,i){var o={},r=this.getDefaultNumberingSystem(e);if(!Wa(r.nSystem)||i){var a=i?za("obj.mapperDigits",r):za(r.nSystem+"._digits",t);Wa(a)||(o.numericPair=this.reverseObject(a,nl),o.numberParseRegex=new RegExp(this.constructRegex(a),"g"),o.numericRegex="["+a[0]+"-"+a[9]+"]",n&&(o.numericRegex=a[0]+"-"+a[9],o.symbolNumberSystem=za(i?"numberSymbols":"symbols-numberSystem-"+r.nSystem,r.obj),o.symbolMatch=this.getSymbolMatch(o.symbolNumberSystem),o.numberSystem=r.nSystem))}return o},e.getNumberMapper=function(e,t,n){var i={mapper:{}},o=this.getDefaultNumberingSystem(e);if(!Wa(o.nSystem)){i.numberSystem=o.nSystem,i.numberSymbols=za("symbols-numberSystem-"+o.nSystem,o.obj),i.timeSeparator=za("timeSeparator",i.numberSymbols);var r=za(o.nSystem+"._digits",t);if(!Wa(r))for(var a=0,l=nl;a<l.length;a++){var s=l[a];i.mapper[s]=r[s]}}return i},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=el,e}(),ol={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};!function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var n=e.getDate(),i=e.getMonth(),o=e.getFullYear(),r=i+1,a=o;r<3&&(a-=1,r+=12);var l=Math.floor(a/100),s=l-Math.floor(l/4)-2,d=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(r+1))+n-s-1524,c=d+(s=(l=Math.floor((d-1867216.25)/36524.25))-Math.floor(l/4)+1)+1524,u=Math.floor((c-122.1)/365.25),h=Math.floor(365.25*u),p=Math.floor((c-h)/30.6001);n=c-h-Math.floor(30.6001*p),(i=Math.floor((c-h)/20.6001))>13&&(u+=1,i-=12),i-=1,o=u-4716;var f=d-24e5,g=d-1948084,m=Math.floor(g/10631);g-=10631*m;var v=Math.floor((g-.1335)/(10631/30)),y=30*m+v;g-=Math.floor(v*(10631/30)+.1335);var b=Math.floor((g+28.5001)/29.5);13===b&&(b=12);for(var w=g-Math.floor(29.5001*b-29),C=0;C<t.length&&!(t[C]>f);C++);var x=C+16260,S=Math.floor((x-1)/12),T=S+1,E=x-12*S,_=f-t[C-1]+1;return(_+"").length>2&&(_=w,E=b,T=y),{year:T,month:E,date:_}},e.toGregorian=function(e,n,i){var o=Math.floor(i+t[12*(e-1)+1+(n-1)-16260-1]-1+24e5+.5),r=Math.floor((o-1867216.25)/36524.25),a=1524+(r=o+1+r-Math.floor(r/4)),l=Math.floor((a-122.1)/365.25),s=Math.floor(365.25*l),d=Math.floor((a-s)/30.6001),c=a-s-Math.floor(30.6001*d),u=d-(d>13.5?13:1),h=l-(u>2.5?4716:4715);return h<=0&&u--,new Date(h+"/"+u+"/"+c)}}($a||($a={}));var rl,al=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,ll=["sun","mon","tue","wed","thu","fri","sat"],sl={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},dl=function(){function e(){}return e.dateFormat=function(e,t,n){var i=this,o=rl.getDependables(n,e,t.calendar),r=za("parserObject.numbers",o),a=o.dateObject,l={isIslamic:rl.islamicRegex.test(t.calendar)};Ka()&&t.isServerRendered&&(t=rl.compareBlazorDateFormats(t,e));var s=t.format||rl.getResultantPattern(t.skeleton,o.dateObject,t.type,!1,Ka()?e:"");if(l.dateSeperator=Ka()?za("dateSeperator",a):rl.getDateSeparator(o.dateObject),Wa(s))Za("Format options or type given must be invalid");else{s=rl.ConvertDateToWeekFormat(s),Ka()&&(s=s.replace(/tt/,"a")),l.pattern=s,l.numMapper=Ka()?qa({},r):il.getNumberMapper(o.parserObject,il.getNumberingSystem(n));for(var d=0,c=s.match(al)||[];d<c.length;d++){var u=c[d],h=u.length,p=u[0];switch("K"===p&&(p="h"),p){case"E":case"c":l.weekday=Ka()?za("days."+rl.monthIndex[h],a):o.dateObject[rl.days]["stand-alone"][rl.monthIndex[h]];break;case"M":case"L":l.month=Ka()?za("months."+rl.monthIndex[h],a):o.dateObject[rl.month]["stand-alone"][rl.monthIndex[h]];break;case"a":l.designator=Ka()?za("dayPeriods",a):za("dayPeriods.format.wide",a);break;case"G":var f=h<=3?"eraAbbr":4===h?"eraNames":"eraNarrow";l.era=Ka()?za("eras",a):za("eras."+f,o.dateObject);break;case"z":l.timeZone=za("dates.timeZoneNames",o.parserObject)}}}return function(e){return isNaN(e.getDate())?null:i.intDateFormatter(e,l)}},e.intDateFormatter=function(e,t){for(var n="",i=t.pattern.match(rl.dateParseRegex),o=this.getCurrentDateValue(e,t.isIslamic),r=0,a=i;r<a.length;r++){var l=a[r],s=l.length,d=l[0];"K"===d&&(d="h");var c=void 0,u="",h=void 0,p=void 0,f="";switch(d){case"M":case"L":c=o.month,s>2?n+=t.month[c]:h=!0;break;case"E":case"c":n+=t.weekday[ll[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(h=!0,"d"===d)c=o.date;else if("f"===d){h=!1,p=!0;var g=(u=(u=e[sl[d]]().toString()).substring(0,s)).length;if(s!==g){if(s>3)continue;for(var m=0;m<s-g;m++)u="0"+u.toString()}f+=u}else c=e[sl[d]]();"h"===d&&(c=c%12||12);break;case"y":p=!0,f+=o.year,2===s&&(f=f.substr(f.length-2));break;case"a":var v=e.getHours()<12?"am":"pm";n+=t.designator[v];break;case"G":var y=e.getFullYear()<0?0:1,b=t.era[y];Va(b)&&(b=t.era[y?0:1]),n+=b||"";break;case"'":n+="''"===l?"'":l.replace(/\'/g,"");break;case"z":var w=e.getTimezoneOffset(),C=s<4?"+H;-H":t.timeZone.hourFormat;C=C.replace(/:/g,t.numMapper.timeSeparator),0===w?n+=t.timeZone.gmtZeroFormat:(p=!0,f=this.getTimeZoneValue(w,C)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":n+=t.numMapper.numberSymbols.timeSeparator;break;case"/":n+=t.dateSeperator;break;case"W":h=!0,c=rl.getWeekOfYear(e);break;default:n+=l}h&&(p=!0,f=this.checkTwodigitNumber(c,s)),p&&(n+=il.convertValueParts(f,rl.latnParseRegex,t.numMapper.mapper))}return n},e.getCurrentDateValue=function(e,t){return t?$a.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var n=e+"";return 2===t&&2!==n.length?"0"+n:n},e.getTimeZoneValue=function(e,t){var n=this,i=t.split(";")[e>0?1:0],o=Math.abs(e);return i.replace(/HH?|mm/g,function(e){var t=e.length,i=-1!==e.indexOf("H");return n.checkTwodigitNumber(Math.floor(i?o/60:o%60),t)})},e}(),cl={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},ul=["infinity","nan","group","decimal","exponential"],hl=function(){function e(){}return e.numberFormatter=function(e,t,n){var i,o=this,r=qa({},t),a={},l={},s=rl.getDependables(n,e,"",!0),d=s.numericObject;l.numberMapper=Ka()?qa({},d):il.getNumberMapper(s.parserObject,il.getNumberingSystem(n),!0),l.currencySymbol=Ka()?za("currencySymbol",d):rl.getCurrencySymbol(s.numericObject,r.currency||vl,t.altSymbol),l.percentSymbol=Ka()?za("numberSymbols.percentSign",d):l.numberMapper.numberSymbols.percentSign,l.minusSymbol=Ka()?za("numberSymbols.minusSign",d):l.numberMapper.numberSymbols.minusSign;var c=l.numberMapper.numberSymbols;if(t.format&&!rl.formatRegex.test(t.format))a=rl.customFormat(t.format,l,s.numericObject);else{if(qa(r,rl.getProperNumericSkeleton(t.format||"N")),r.isCurrency="currency"===r.type,r.isPercent="percent"===r.type,Ka()||(i=rl.getSymbolPattern(r.type,l.numberMapper.numberSystem,s.numericObject,r.isAccount)),r.groupOne=this.checkValueRange(r.maximumSignificantDigits,r.minimumSignificantDigits,!0),this.checkValueRange(r.maximumFractionDigits,r.minimumFractionDigits,!1,!0),Wa(r.fractionDigits)||(r.minimumFractionDigits=r.maximumFractionDigits=r.fractionDigits),Wa(r.useGrouping)&&(r.useGrouping=!0),r.isCurrency&&!Ka()&&(i=i.replace(/\u00A4/g,rl.defaultCurrency)),Ka())a.nData=qa({},{},za(r.type+"nData",d)),a.pData=qa({},{},za(r.type+"pData",d)),"currency"===r.type&&t.currency&&rl.replaceBlazorCurrency([a.pData,a.nData],l.currencySymbol,t.currency);else{var u=i.split(";");a.nData=rl.getFormatData(u[1]||"-"+u[0],!0,l.currencySymbol),a.pData=rl.getFormatData(u[0],!1,l.currencySymbol),r.useGrouping&&(r.groupSeparator=c[ul[2]],r.groupData=this.getGroupingDetails(u[0]))}if(Wa(r.minimumFractionDigits)&&(r.minimumFractionDigits=a.nData.minimumFraction),Wa(r.maximumFractionDigits)){var h=a.nData.maximumFraction;r.maximumFractionDigits=Wa(h)&&r.isPercent?0:h}var p=r.minimumFractionDigits,f=r.maximumFractionDigits;Wa(p)||Wa(f)||p>f&&(r.maximumFractionDigits=p)}return qa(a.nData,r),qa(a.pData,r),function(e){return isNaN(e)?c[ul[1]]:isFinite(e)?o.intNumberFormatter(e,a,l):c[ul[0]]}},e.getGroupingDetails=function(e){var t={},n=e.match(rl.negativeDataRegex);if(n&&n[4]){var i=n[4],o=i.lastIndexOf(",");if(-1!==o){var r=i.split(".")[0];t.primary=r.length-o-1;var a=i.lastIndexOf(",",o-1);-1!==a&&(t.secondary=o-1-a)}}return t},e.checkValueRange=function(e,t,n,i){var o=i?"f":"s",r=0,a=cl["l"+o],l=cl["m"+o];if(Wa(e)||(this.checkRange(e,a,i),r++),Wa(t)||(this.checkRange(t,l,i),r++),2===r){if(!(e<t))return!0;Za(l+"specified must be less than the"+a)}else n&&1===r&&Za("Both"+l+"and"+l+"must be present");return!1},e.checkRange=function(e,t,n){var i=n?[0,20]:[1,21];(e<i[0]||e>i[1])&&Za(t+"value must be within the range"+i[0]+"to"+i[1])},e.intNumberFormatter=function(e,t,n){var i;if(!Wa(t.nData.type)){e<0?(e*=-1,i=t.nData):i=0===e&&t.zeroData||t.pData;var o="";return i.isPercent&&(e*=100),i.groupOne?o=this.processSignificantDigits(e,i.minimumSignificantDigits,i.maximumSignificantDigits):(o=this.processFraction(e,i.minimumFractionDigits,i.maximumFractionDigits),i.minimumIntegerDigits&&(o=this.processMinimumIntegers(o,i.minimumIntegerDigits))),"scientific"===i.type&&(o=(o=e.toExponential(i.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[ul[4]])),o=o.replace(".",n.numberMapper.numberSymbols[ul[3]]),i.useGrouping&&(o=this.groupNumbers(o,i.groupData.primary,i.groupSeparator||",",n.numberMapper.numberSymbols[ul[3]]||".",i.groupData.secondary)),o=il.convertValueParts(o,rl.latnParseRegex,n.numberMapper.mapper),"N/A"===i.nlead?i.nlead:i.nlead+o+i.nend}},e.processSignificantDigits=function(e,t,n){var i=e+"";return i.length<t?e.toPrecision(t):+(i=e.toPrecision(n))+""},e.groupNumbers=function(e,t,n,i,o){for(var r=!Va(o)&&0!==o,a=e.split(i),l=a[0],s=l.length,d="";s>t;)d=l.slice(s-t,s)+(d.length?n+d:""),s-=t,r&&(t=o,r=!1);return a[0]=l.slice(0,s)+(d.length?n:"")+d,a.join(i)},e.processFraction=function(e,t,n){var i=(e+"").split(".")[1],o=i?i.length:0;if(t&&o<t){var r="";if(0!==o){r+=e;for(var a=0;a<t-o;a++)r+="0";return r}return r=e.toFixed(t),e.toFixed(t)}return!Va(n)&&(o>n||0===n)?e.toFixed(n):e+""},e.processMinimumIntegers=function(e,t){var n=e.split("."),i=n[0],o=i.length;if(o<t){for(var r=0;r<t-o;r++)i="0"+i;n[0]=i}return n.join(".")},e}(),pl=function(){function e(e){this.ranArray=[],this.boundedEvents={},Va(e)||(this.context=e)}return e.prototype.on=function(e,t,n,i){if(!Va(t)){var o=n||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:o}]:Va(i)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:o}):-1===this.ranArray.indexOf(i)&&(this.ranArray.push(i),this.boundedEvents[e].push({handler:t,context:o,id:i}))}},e.prototype.off=function(e,t,n){if(!this.notExist(e)){var i=za(e,this.boundedEvents);if(t){for(var o=0;o<i.length;o++)if(n){if(i[o].id===n){i.splice(o,1);var r=this.ranArray.indexOf(n);-1!==r&&this.ranArray.splice(r,1);break}}else if(t===i[o].handler){i.splice(o,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t,n,i){if(this.notExist(e))n&&n.call(this,t);else{t&&(t.name=e);var o=za(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,t,n,i,0);for(var r=0,a=o;r<a.length;r++){var l=a[r];l.handler.call(l.context,t)}n&&n.call(this,t)}},e.prototype.blazorCallback=function(e,t,n,i,o){var r=this,a=o===e.length-1;if(o<e.length){var l=e[o],s=l.handler.call(l.context,t);if(s&&"function"==typeof s.then){if(!n)return s;s.then(function(s){if(s="string"==typeof s&&r.isJson(s)?JSON.parse(s,r.dateReviver):s,qa(t,t,s,!0),!n||!a)return r.blazorCallback(e,t,n,i,o+1);n.call(l.context,t)}).catch(function(e){i&&i.call(l.context,"string"==typeof e&&r.isJson(e)?JSON.parse(e,r.dateReviver):e)})}else{if(!n||!a)return this.blazorCallback(e,t,n,i,o+1);n.call(l.context,t)}}},e.prototype.dateReviver=function(e,t){return Ka&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var n=0,i=e;n<i.length;n++)if(i[n].handler===t)return!0;return!1},e}(),fl=new pl,gl=!1,ml="en-US",vl="USD",yl={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var n=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,o={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi,e.islamicRegex=/^islamic/;var r={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(t,n,i,o,r){var a,l=i||"date";if(r)a=u({skeleton:t},r).format||u({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(a=za(l+"Formats."+t,n),"dateTime"===l){var s=za("dateFormats."+t,n),d=za("timeFormats."+t,n);a=a.replace("{1}",s).replace("{0}",d)}}else a=za("dateTimeFormats.availableFormats."+t,n);Wa(a)&&"yMd"===t&&(a="M/d/y")}return a}function s(t,n,i,o){var r={},a=i||"gregorian";if(r.parserObject=il.getMainObject(t,n)||(Ka()?e.blazorDefaultObject:e.defaultObject),o)r.numericObject=za("numbers",r.parserObject);else{var l=Ka()?"dates":"dates.calendars."+a;r.dateObject=za(l,r.parserObject)}return r}function d(e,t,n,i){return za(e+"Formats-numberSystem-"+t+(i?".accounting":".standard"),n)||(i?za(e+"Formats-numberSystem-"+t+".standard",n):"")}function c(t){var n=t.match(e.dateConverterMapper);return n&&Ka()?t.replace(e.dateConverterMapper,3===n[0].length?"EEE":"EEEE"):t}function u(e,t){var n=e.format||e.skeleton,i=za((t||"en-US")+"."+n,yl);return i||(i=za("en-US."+n,yl)),i&&(i=c(i),e.format=i.replace(/tt/,"a")),e}function h(t){var n=t.match(e.formatRegex),i={},o=n[1].toUpperCase();return i.isAccount="A"===o,i.type=e.patternMatcher[o],t.length>1&&(i.fractionDigits=parseInt(n[2],10)),i}function p(n,i,o,r){var a=r?{}:{nlead:"",nend:""},l=n.match(e.customRegex);if(l){r||(a.nlead=f(l[1],o),a.nend=f(l[10],o),a.groupPattern=l[4]);var s=l[7];if(s&&i){var d=s.match(t);a.minimumFraction=Va(d)?0:d.length,a.maximumFraction=s.length-1}}return a}function f(t,n){return t?t.replace(e.defaultCurrency,n):""}function g(e,t,n){return za("currencies."+t+(n?"."+n:".symbol"),e)||za("currencies."+t+".symbol-alt-narrow",e)||"$"}function m(t,i,o){var r={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=t.match(e.customRegex);if(Va(a)||""===a[5]&&"N/A"!==t)return r.type=void 0,r;r.nlead=a[1],r.nend=a[10];var l=a[6];r.useGrouping=-1!==l.indexOf(","),l=l.replace(/,/g,"");var s=a[7];if(-1!==l.indexOf("0")&&(r.minimumIntegerDigits=l.length-l.indexOf("0")),Va(s)||(r.minimumFractionDigits=s.lastIndexOf("0"),r.maximumFractionDigits=s.lastIndexOf("#"),-1===r.minimumFractionDigits&&(r.minimumFractionDigits=0),(-1===r.maximumFractionDigits||r.maximumFractionDigits<r.minimumFractionDigits)&&(r.maximumFractionDigits=r.minimumFractionDigits)),Va(i)?qa(r,v([r.nlead,r.nend],"%","%")):(qa(r,v([r.nlead,r.nend],"$",i.currencySymbol)),r.isCurrency||qa(r,v([r.nlead,r.nend],"%",i.percentSymbol))),!Va(o)){var c=d(r.type,i.numberMapper.numberSystem,o,!1);r.useGrouping&&(r.groupSeparator=i.numberMapper.numberSymbols[n[2]],r.groupData=hl.getGroupingDetails(c.split(";")[0])),r.nlead=r.nlead.replace(/\'/g,""),r.nend=r.nend.replace(/\'/g,"")}return r}function v(e,t,n){for(var i={nlead:e[0],nend:e[1]},o=0;o<2;o++){var r=e[o],l=r.indexOf(t);if(-1!==l&&(l<r.indexOf("'")||l>r.lastIndexOf("'"))){i[a[o]]=r.substr(0,l)+n+r.substr(l+1),i[a[t]]=!0,i.type=i.isCurrency?"currency":"percent";break}}return i}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=l,e.getDependables=s,e.getSymbolPattern=d,e.ConvertDateToWeekFormat=c,e.compareBlazorDateFormats=u,e.getProperNumericSkeleton=h,e.getFormatData=p,e.getCurrencySymbol=g,e.customFormat=function(e,t,n){for(var i={},o=e.split(";"),r=["pData","nData","zeroData"],a=0;a<o.length;a++)i[r[a]]=m(o[a],t,n);return Va(i.nData)&&(i.nData=qa({},i.pData),i.nData.nlead=Va(t)?"-"+i.nData.nlead:t.minusSymbol+i.nData.nlead),i},e.isCurrencyPercent=v,e.getDateSeparator=function(e){var t=(za("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,n,r){var a=s(n,e,t.calendar);Ka()&&(t=u(t,e));var d=t.format||l(t.skeleton,a.dateObject,t.type);if(r){if(-1!==(d=d.replace(i,function(e){return o[e]})).indexOf("z")){var c=d.match(/z/g).length,h=void 0,p={timeZone:{}};p.numMapper=il.getNumberMapper(a.parserObject,il.getNumberingSystem(n)),p.timeZone=za("dates.timeZoneNames",a.parserObject);var f=(new Date).getTimezoneOffset(),g=c<4?"+H;-H":p.timeZone.hourFormat;g=g.replace(/:/g,p.numMapper.timeSeparator),0===f?h=p.timeZone.gmtZeroFormat:(h=dl.getTimeZoneValue(f,g),h=p.timeZone.gmtFormat.replace(/\{0\}/,h)),d=d.replace(/[z]+/,'"'+h+'"')}d=d.replace(/ $/,"")}return d},e.getActualNumberFormat=function(t,n,i,o){var r,a,l=s(i,t,"",!0),c={custom:!0},u=l.numericObject,f={},m=(n.format||"").match(e.currencyFormatRegex),v=e.formatRegex.test(n.format)?h(n.format||"N"):{},y={};if(m){y.numberMapper=Ka()?qa({},l.numericObject):il.getNumberMapper(l.parserObject,il.getNumberingSystem(i),!0);var b=Ka()?za("currencySymbol",l.numericObject):g(l.numericObject,n.currency||vl,n.altSymbol),w=d("currency",y.numberMapper.numberSystem,l.numericObject,/a/i.test(n.format)),C=(w=w.replace(/\u00A4/g,b)).split(";");f.hasNegativePattern=!!Ka()||C.length>1,f.nData=Ka()?za(v.type+"nData",u):p(C[1]||"-"+C[0],!0,b),f.pData=Ka()?za(v.type+"pData",u):p(C[0],!1,b),m[2]||n.minimumFractionDigits||n.maximumFractionDigits||(r=p(w.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(n.format)||!n.format){if(qa(c,h(n.format||"N")),c.custom=!1,a="###0",(c.fractionDigits||n.minimumFractionDigits||n.maximumFractionDigits||r)&&(c.fractionDigits&&(n.minimumFractionDigits=n.maximumFractionDigits=c.fractionDigits),a=function(e,t,n){e+=".";for(var i=0;i<t;i++)e+="0";if(t<n)for(var o=n-t,r=0;r<o;r++)e+="#";return e}(a,r||c.fractionDigits||n.minimumFractionDigits||0,n.maximumFractionDigits||0)),n.minimumIntegerDigits&&(a=function(e,t){for(var n=a.split("."),i="",o=0;o<t;o++)i+="0";return n[1]?i+"."+n[1]:i}(0,n.minimumIntegerDigits)),n.useGrouping&&(a=function(e){var t=e.split("."),n=t[0],i=3-n.length%3;e="";for(var o=(n=(i&&1===i?"#":2===i?"##":"")+n).length-1;o>0;o-=3)e=","+n[o-2]+n[o-1]+n[o]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(a)),"currency"===c.type||c.type&&Ka()){Ka()&&"currency"!==c.type&&(f.pData=za(c.type+"pData",u),f.nData=za(c.type+"nData",u));var x=a;a=f.pData.nlead+x+f.pData.nend,(f.hasNegativePattern||Ka())&&(a+=";"+f.nData.nlead+x+f.nData.nend)}"percent"!==c.type||Ka()||(a+=" %")}else a=n.format.replace(/\'/g,'"');return Object.keys(y).length>0&&(a=o?a:function(e,t){if(-1!==e.indexOf(",")){var n=e.split(",");e=n[0]+za("numberMapper.numberSymbols.group",t)+n[1].replace(".",za("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",za("numberMapper.numberSymbols.decimal",t));return e}(a,y)),a},e.getWeekData=function(e,t){var n="sun",i=za("supplemental.weekData.firstDay",t),o=e;return/en-/.test(o)&&(o=o.slice(3)),o=o.slice(0,2).toUpperCase()+o.substr(2),i&&(n=i[o]||"sun"),r[n]},e.replaceBlazorCurrency=function(e,t,n){var i=za(n||"",ol);if(t!==i)for(var o=0,r=e;o<r.length;o++){var a=r[o];a.nend=a.nend.replace(t,i),a.nlead=a.nlead.replace(t,i)}},e.getWeekOfYear=function(e){var t,n=new Date(e.getFullYear(),0,1),i=n.getDay();i=i>=0?i:i+7;var o=Math.floor((e.getTime()-n.getTime()-6e4*(e.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)+1;if(i<4){if((t=Math.floor((o+i-1)/7)+1)>52){var r=new Date(this.getFullYear()+1,0,1).getDay();t=(r=r>=0?r:r+7)<4?1:53}}else t=Math.floor((o+i-1)/7);return t}}(rl||(rl={}));var bl=/^(.*?):[ \t]*([^\r\n]*)$/gm,wl="GET",Cl=function(){function e(e,t,n,i){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():wl,this.mode=!!Va(n)||n):"object"==typeof e&&(this.options=e,Ga(this,this.options)),this.type=this.type?this.type.toUpperCase():wl,this.contentType=void 0!==this.contentType?this.contentType:i}return e.prototype.send=function(e){var t=this;this.data=Va(e)?this.data:e;var n={cancel:!1,httpRequest:null};return new Promise(function(e,i){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,i)},Va(t.onLoad)||(t.httpRequest.onload=t.onLoad),Va(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),Va(t.onAbort)||(t.httpRequest.onabort=t.onAbort),Va(t.onError)||(t.httpRequest.onerror=t.onError),Va(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),Va(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(n.httpRequest=t.httpRequest,t.beforeSend(n)),n.cancel||t.httpRequest.send(Va(t.data)?null:t.data)})},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var n=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===n)n=void 0;else try{n=JSON.parse(n)}catch(e){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(n)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,n;t={};for(var i=bl.exec(this.httpRequest.getAllResponseHeaders());i;)t[i[1].toLowerCase()]=i[2],i=bl.exec(this.httpRequest.getAllResponseHeaders());return Va(n=t[e.toLowerCase()])?null:n},e}(),xl=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,Sl=/msie|trident/i,Tl=/Trident\/7\./,El=/(ipad|iphone|ipod touch)/i,_l=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,kl=/android/i,Dl=/trident|windows phone|edge/i,Al=/(version)[ \/]([\w.]+)/i,Ol={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var Il=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},n=[],i=0,o=Object.keys(Ol);i<o.length;i++)if(n=e.userAgent.match(Ol[o[i]])){if(t.name="opr"===n[1].toLowerCase()?"opera":n[1].toLowerCase(),t.name="crios"===n[1].toLowerCase()?"chrome":t.name,t.version=n[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(Tl)){t.name="msie";break}var r=e.userAgent.match(Al);"safari"===t.name&&r&&(t.version=r[2]);break}return t},e.getEvent=function(t){var n={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer&&!e.isWindows?n[t].isPointer:e.isTouch?n[t].isTouch+(e.isDevice?"":" "+n[t].isDevice):n[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,n){var i=window.browserDetails;return"undefined"==typeof i[t]?i[t]=n.test(e.userAgent):i[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return Wa(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",Sl)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return Wa(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return Wa(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return Wa(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",xl)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",El)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",_l)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",kl)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return Wa(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(Wa(window.cordova)&&Wa(window.PhoneGap)&&Wa(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",Dl)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return Wa(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return Wa(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return Wa(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return Wa(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}(),Pl=function(){function e(){}return e.addOrGetEventData=function(e){return e?"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[]):[]},e.add=function(t,n,i,o,r){var a,l,s,d,c=e.addOrGetEventData(t);a=r?(l=i,s=r,function(){var e=this,t=arguments;clearTimeout(d),d=setTimeout(function(){return d=null,l.apply(e,t)},s)}):i,o&&(a=a.bind(o));for(var u=n.split(" "),h=0;h<u.length;h++)c.push({name:u[h],listener:i,debounce:a}),Il.isIE?t.addEventListener(u[h],a):t.addEventListener(u[h],a,{passive:!1});return a},e.remove=function(t,n,i){for(var o=e.addOrGetEventData(t),r=n.split(" "),a=function(e){var n,a=-1;o&&0!==o.length&&o.some(function(t,o){return t.name===r[e]&&t.listener===i&&(a=o,n=t.debounce,!0)}),-1!==a&&o.splice(a,1),n&&t.removeEventListener(r[e],n)},l=0;l<r.length;l++)a(l)},e.clearEvents=function(t){var n,i;i=qa([],i,n=e.addOrGetEventData(t));for(var o=0;o<i.length;o++)t.removeEventListener(i[o].name,i[o].debounce),n.shift()},e.trigger=function(t,n,i){for(var o=0,r=e.addOrGetEventData(t);o<r.length;o++){var a=r[o];a.name===n&&a.debounce.call(this,i)}},e}(),Rl=new RegExp("\\n|\\r|\\s\\s+","g"),Ml=new RegExp(/'|"/g),Nl=new RegExp("if ?\\("),Ll=new RegExp("else if ?\\("),Hl=new RegExp("else"),Bl=new RegExp("for ?\\("),jl=new RegExp("(/if|/for)"),zl=new RegExp("\\((.*)\\)",""),Ul=new RegExp("^[0-9]+$","g"),Fl=new RegExp("[\\w\"'.\\s+]+","g"),Gl=new RegExp('"(.*?)"',"g"),ql=new RegExp("[\\w\"'@#$.\\s+]+","g"),Vl=new RegExp("\\${([^}]*)}","g"),Wl=/^\..*/gm,Yl=/\\/gi,Xl=/\\\\/gi,Zl=new RegExp("[\\w\"'@#$.\\s+]+","g"),Jl=/\window\./gm;function Kl(e,t,n,i,o){return o&&""===e?e:t&&!Ul.test(e)&&-1===i.indexOf(e.split(".")[0])?n+"."+e:e}function Ql(e,t,n,i){return t&&!Ul.test(e)&&-1===i.indexOf(e.split(".")[0])?n+'["'+e:e}function $l(e){return e.match(Xl)?e:e.replace(Yl,"\\\\")}function es(e,t,n,i){if(e=e.trim(),/\window\./gm.test(e))return e;var o=/'|"/gm;return/\@|\$|\#/gm.test(e)&&(e=Ql(e,-1===n.indexOf(e),t,n)+'"]'),Wl.test(e)?function(e,t,n,i){return!t||Ul.test(e)||-1!==i.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:n+"."+e}(e,!o.test(e)&&-1===n.indexOf(e),t,n):Kl(e,!o.test(e)&&-1===n.indexOf(e),t,n,i)}var ts=/^[\n\r.]+\<tr|^\<tr/,ns=/^[\n\r.]+\<svg|^\<path|^\<g/,is={};function os(){return"-"+Math.random().toString(36).substr(2,5)}function rs(e,t){var n=ds.compile(e,t);return function(e,t,i,o,r,a,l){var s=n(e,t,i,l);if(Ka()&&!r){var d=o+os();if(is[o]||(is[o]=[]),Va(a))e.BlazorTemplateId=d,is[o].push(e);else for(var c=0,u=Object.keys(is[o][a]);c<u.length;c++){var h=u[c];"BlazorTemplateId"!==h&&e[h]&&(is[o][a][h]=e[h]),"BlazorTemplateId"===h&&(d=is[o][a][h])}return"rowTemplate"===i?[ks("tr",{id:d,className:"e-blazor-template"})]:[ks("div",{id:d,className:"e-blazor-template"})]}return"string"==typeof s?ns.test(s)?ks("svg",{innerHTML:s}).childNodes:ks(ts.test(s)?"table":"div",{innerHTML:s}).childNodes:s}}function as(e,t,n,i,o){Ka()&&(window.sfBlazor.updateTemplate(t,is[e],e,n,o),!1!==i&&(is[e]=[]))}function ls(e,t,n){var i=document.getElementById(e);if(i)for(var o=i.getElementsByClassName("blazor-inner-template"),r=0;r<o.length;r++){var a;a=Va(n)?o[r].getAttribute("data-templateId"):o[n].getAttribute("data-templateId");var l=document.getElementById(a);if(l)for(var s=l.childNodes.length,d=0;d<s;d++)Va(n)?o[r].appendChild(l.childNodes[0]):(o[n].appendChild(l.childNodes[0]),r=o.length)}}var ss,ds={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),function(t,n){var i=function(e,t,n){var i=0,o=[],r=e.match(/class="([^\"]+|)\s{2}/g),a="";return r&&r.forEach(function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}),e.replace(Rl,"").replace(Gl,"'$1'").replace(Vl,function(e,t,r,a){var l=t.match(zl);if(l){var s=l[1];if(Ll.test(t))t='";} '+t.replace(l[1],s.replace(Fl,function(e){return Kl(e=e.trim(),!Ml.test(e)&&-1===o.indexOf(e),"data",o)}))+'{ \n str = str + "';else if(Nl.test(t))t='"; '+t.replace(l[1],s.replace(ql,function(e){return es(e,"data",o,!0)}))+'{ \n str = str + "';else if(Bl.test(t)){var d=l[1].split(" of ");t='"; '+t.replace(l[1],function(e){return o.push(d[0]),o.push(d[0]+"Index"),"var i"+(i+=1)+"=0; i"+i+" < "+Kl(d[1],!0,"data",o)+".length; i"+i+"++"})+"{ \n var "+d[0]+"= "+Kl(d[1],!0,"data",o)+"[i"+i+"]; \n var "+d[0]+"Index=i"+i+'; \n str = str + "'}else{var c=t.split("("),u=n&&n.hasOwnProperty(c[0])?"this.":"global";u=/\./.test(c[0])?"":u;var h=l[1].split(",");0===l[1].length||/data/.test(h[0])||/window./.test(h[0])||(l[1]="global"===u?"data."+l[1]:l[1]),Jl.test(t)&&/\]\./gm.test(t)||/\@|\$|\#/gm.test(t)?/\@|\$|\#|\]\./gm.test(t)&&(t='"+ '+("global"===u?"":u)+t.replace(l[1],s.replace(Zl,function(e){return es(e,"data",o)}))+'+ "'):t='" + '+("global"===u?"":u)+t.replace(s,Kl(l[1].replace(/,( |)data.|,/gi,",data.").replace(/,( |)data.window/gi,",window"),"global"!==u,"data",o))+'+"'}}else Hl.test(t)?t='"; '+t.replace(Hl,'} else { \n str = str + "'):t.match(jl)?t=t.replace(jl,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(t)?(t.match(Yl)&&(t=$l(t)),t='"+'+Ql(t,-1===o.indexOf(t),"data",o)+'"]+"'):t=t.match(Yl)?'"+'+Ql(t=$l(t),-1===o.indexOf(t),"data",o)+'"]+"':'"+'+Kl(t.replace(/\,/gi,"+data."),-1===o.indexOf(t),"data",o)+'+"';return t})}(e,0,n);return new Function("data",'var str="'+i+'"; return str;').bind(n)}(0,t)},e}())).compile},cs=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,us=/(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,hs=/^(\.|#)/,ps={".":"className","#":"id"},fs="(?=.*?\\b{value}\\b)",gs={className:"attributes.className",id:"attributes.id",tagName:"tagName"},ms=["area","base","basefont","br","col","frame","hr","img","input","link","meta","param","embed","command","keygen","source","track","wbr"],vs=["a","address","article","applet","aside","audio","blockquote","button","canvas","center","dd","del","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","ins","isindex","li","map","menu","noframes","noscript","object","ol","output","p","pre","section","script","table","tbody","td","tfoot","th","thead","tr","ul","video"],ys=["abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"],bs=["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"],ws=["checked","compact","declare","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","readonly","selected"],Cs=["Script","style"],xs={tabindex:"tabIndex"},Ss=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,Ts=/^<\/([-A-Za-z0-9_]+)[^>]*>/,Es=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;!function(e){function t(e,t){t&&e&&e.forEach(function(e){return Fa(e)&&(e.parent&&n(e),e.parent=t),e})}function n(e){var t=e.parent;if(t){var n=t.children.indexOf(e);-1!==n&&t.children.splice(n)}return t}function i(e,t){var n=e.match(hs),i={};if(n){var o=ps[n[0]];if("className"===o){var r=t.filter(function(e){return e.hasOwnProperty("className")})[0],a=!1;r||(a=!0,r={}),r[o]=(r[o]||"")+fs.replace("{value}",e.replace(".","")),a&&t.push(r)}else i[o]=e.replace(n[0],""),t.push(i)}else t.push({tagName:e})}function o(e,t,n,i){if(e.children){var r=e.children.filter(function(e){if("string"!=typeof e){for(var n=!0,i=0,o=t;i<o.length;i++){var r=o[i],a=Object.keys(r)[0],l=r[a],s=za(gs[a],e);if("className"===a){if(!new RegExp("^"+l+".*$").test(s)){n=!1;break}}else if(s!==l){n=!1;break}}return n}return!1});return i||r.length&&!n||e.children.forEach(function(e){Fa(e)&&(r=r.concat(o(e,t,n)))}),r}return[]}function r(e){for(var t,n=[],i=[],o=[];e;){t=!0;var r=a(i);if(r&&l(Cs,r))e=e.replace(new RegExp("([\\s\\S]*?)</"+a(o)+"[^>]*>"),function(e,t){return p(t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2")),""}),h(0,a(i));else{if(0===e.indexOf("</"))(s=e.match(Ts))&&(e=e.substring(s[0].length),s[0].replace(Ts,h)),t=!1;else if(0===e.indexOf("<")){var s;(s=e.match(Ss))&&(e=e.substring(s[0].length),s[0].replace(Ss,u)),t=!1}if(t){var d=e.indexOf("<"),c=d<0?e:e.substring(0,d);e=d<0?"":e.substring(d),p(c)}}}function u(e,t,r){if(t=t.toLowerCase(),l(vs,t))for(;a(i)&&l(ys,a(i));)h(0,a(i));l(bs,t)&&a(i)&&h(0,t);var s=l(ms,t);s||i.push(t);var d={};r.replace(Es,function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=n[2]?n[2]:n[3]?n[3]:n[4]?n[4]:l(ws,t)?t:"";if("style"===t){for(var r=o.split(";"),a={},s=0,c=r.length;s<c;s++){var u=r[s].split(":");a[u[0]]=u[1]}o=a}d[t=xs[t]||t]=o}),d["data-id"]=os();var c={tagName:t,attributes:d};if(s){var u=o[0]||n;void 0===u.children&&(u.children=[]),c.parent=u,u.children.push(c)}else o.unshift(c)}function h(e,t){var r;if(t)for(r=i.length-1;r>=0&&i[r]!==t;r--);else r=0;if(r>=0){for(var a=o.length-1;a>=r;a--){var l=o.shift();if(0===o.length)n.push(l);else{var s=o[0];void 0===s.children&&(s.children=[]),l.parent=s,s.children.push(l)}}i.length=r}}function p(e){if(0===o.length)n.push(e);else{var t=o[0];void 0===t.children&&(t.children=[]),t.children.push(e)}}return n}function a(e){return e[e.length-1]}function l(e,t){return-1!==e.indexOf(t)}e.createElement=function(e,t){var n=[],i=qa({},{},t,!0);if(!Va(t)&&Object.keys(t).length&&(i.innerHTML&&(n=r(i.innerHTML),delete i.innerHTML),i.attrs&&(qa(i,i.attrs),delete i.attrs),i.styles)){for(var o=i.styles.split(";"),a={},l=0,s=o.length;l<s;l++){var d=o[l].split(":");a[d[0]]=d[1]}delete i.styles,i.style=a}return{tagName:e,attributes:i||{},children:n}},e.assignParent=t,e.append=function(e,n){t(e,n),n.children=n.children?n.children.concat(e):[].concat(e)},e.prepend=function(e,n){if(t(e,n),n.children&&n.children.length)for(var i=e.length-1;i>=0;i--)n.children.unshift(e[i]);else n.children=[],n.children.concat(e)},e.detach=n,e.vDomSelector=function e(t){for(var n=t.ele,r=t.selectAll,a=t.immediateParent,l=t.selector.split(" "),s=n,d=0,c=l.length;d<c;d++){var u=!1,h=s,p=l[d],f=[];if(cs.test(p))i(p,f);else if(-1===p.indexOf(">"))for(var g=0,m=p.match(us);g<m.length;g++)i(m[g],f);else if(-1!==p.indexOf(">")){u=!0;for(var v=n,y=void 0,b=0,w=0,C=p.split(">");w<C.length;w++){var x=C[w];if(!v)break;if(v.length){for(var S=[],T=0,E=v;T<E.length;T++)S=S.concat(e({ele:E[T],selector:x,selectAll:r,immediateParent:!!b}));y=S}else y=e({ele:v,selector:x,selectAll:r,immediateParent:!!b});b++,v=y}y&&(s=y)}if(!u)if(h.length){for(var _=[],k=0,D=h;k<D.length;k++)_=_.concat(o(D[k],f,r,a));s=_}else s=o(h,f,r,a)}return r?s:s[0]||null},e.accessElement=o,e.ConvertHTMLToJSon=r,e.cloneNode=function(e,t){return Fa(e)?t?qa({},{},e,!0):{tagName:e.tagName,attributes:e.attributes}:e.cloneNode(t)},e.setStyleAttribute=function(e,t){e.attributes.style=qa(e.attributes.style?{}:e.attributes.style,t)}}(ss||(ss={}));var _s=/^svg|^path|^g/;function ks(e,t){var n=_s.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"==typeof t?n:(n.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(n.className=t.className),void 0!==t.id&&(n.id=t.id),void 0!==t.styles&&n.setAttribute("style",t.styles),void 0!==t.attrs&&Hs(n,t.attrs),n)}function Ds(e,t){for(var n=Os(t),i=0,o=e;i<o.length;i++){var r=o[i];if(r&&n)for(var a=0,l=n;a<l.length;a++){var s=l[a];if(Fa(r)){var d=za("attributes.className",r);Va(d)?Ua("attributes.className",s,r):new RegExp("\\b"+s+"\\b","i").test(d)||Ua("attributes.className",d+" "+s,r)}else r.classList.contains(s)||r.classList.add(s)}}return e}function As(e,t){for(var n=Os(t),i=0,o=e;i<o.length;i++){var r=o[i];if(r&&n){var a=Fa(r);if(a?za("attributes.className",r):""!==r.className)for(var l=0,s=n;l<s.length;l++){var d=s[l];if(a){var c=za("attributes.className",r).split(" "),u=c.indexOf(d);-1!==u&&c.splice(u,1),Ua("attributes.className",c.join(" "),r)}else r.classList.remove(d)}}}return e}function Os(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function Is(e){return""===e.style.visibility&&e.offsetWidth>0}function Ps(e,t,n){if(Fa(t))ss.prepend(e,t);else{for(var i=document.createDocumentFragment(),o=0,r=e;o<r.length;o++)i.appendChild(r[o]);t.insertBefore(i,t.firstElementChild),n&&Ms(t)}return e}function Rs(e,t,n){if(Fa(t))ss.append(e,t);else{for(var i=document.createDocumentFragment(),o=0,r=e;o<r.length;o++)i.appendChild(r[o]);t.appendChild(i),n&&Ms(t)}return e}function Ms(e){e.querySelectorAll("script").forEach(function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),Ns(t)})}function Ns(e){if(Fa(e))return ss.detach(e);var t=e.parentNode;return t?t.removeChild(e):void 0}function Ls(e){if(Fa(e))ss.detach(e);else{var t=e.parentNode;Pl.clearEvents(e),t.removeChild(e)}}function Hs(e,t){var n=Object.keys(t),i=e;if(i)for(var o=0,r=n;o<r.length;o++){var a=r[o];if(Fa(i)){var l=a;"tabindex"===a&&(l="tabIndex"),i.attributes[l]=t[a]}else i.setAttribute(a,t[a])}return i}function Bs(e,t,n){return void 0===t&&(t=document),Fa(t)&&n?ss.vDomSelector({ele:t,selector:e,selectAll:!1}):(e=zs(e),t.querySelector(e))}function js(e,t,n){return void 0===t&&(t=document),Fa(t)&&!n?ss.vDomSelector({ele:t,selector:e,selectAll:!0}):(e=zs(e),t.querySelectorAll(e))}function zs(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var n=e.split(","),i=0;i<n.length;i++){for(var o=n[i].split(" "),r=0;r<o.length;r++)if(o[r].indexOf("#")>-1&&!o[r].match(/\[.*\]/)){var a=o[r].split("#");if(a[1].match(/^\d/)||a[1].match(t)){var l=o[r].split(".");l[0]=l[0].replace(/#/,"[id='")+"']",o[r]=l.join(".")}}n[i]=o.join(" ")}return n.join(",")}return e}function Us(e,t){var n=e;if("function"==typeof n.closest)return n.closest(t);for(;n&&1===n.nodeType;){if(qs(n,t))return n;n=n.parentNode}return null}function Fs(e,t){void 0!==t&&(Fa(e)?ss.setStyleAttribute(e,t):Object.keys(t).forEach(function(n){e.style[n]=t[n]}))}function Gs(e,t,n){Ds([e],t),As([e],n)}function qs(e,t){var n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return n?n.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var Vs=new RegExp("]"),Ws=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new pl(this),Wa(t)||(this.element="string"==typeof t?document.querySelector(t):t,Va(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),Wa(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var n=this.isProtectedOnChange;this.isProtectedOnChange=!!t,Ga(this,e),!0!==t?(Ga(this.changedProperties,e),this.dataBind()):Ka()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=n},e.callChildDataBind=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(t[o]instanceof Array)for(var r=0,a=t[o];r<a.length;r++){var l=a[r];void 0!==l.dataBind&&l.dataBind()}else t[o].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,n=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(n,i),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){Ka()&&(qa(this.bulkChanges,{},e=e||{},!0),this.allowServerDataBinding&&window.sfBlazor.updateModel&&(window.sfBlazor.updateModel(this),this.bulkChanges={}))},e.prototype.saveChanges=function(e,t,n){if(Ka()){var i={};i[e]=t,this.serverDataBind(i)}this.isProtectedOnChange||(this.oldProperties[e]=n,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,n=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(n);var i="ej2"+function(e){for(var t="",n=0;n<5;n++)t+=(n?",":"")+e[n];return t}(n),o=function(n){n.source===window&&"string"==typeof n.data&&n.data.length<=32&&n.data===i&&(e(),t())};return window.addEventListener("message",o,!1),window.postMessage(i,"*"),t=function(){window.removeEventListener("message",o),e=o=i=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,n,i){var o=this;if(!0!==this.isDestroyed){var r=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(e,t,n,i);if(Vs.test(e)){var l=za(e,this);if(l)if(window.Blazor){var s=l.call(this,t);s&&"function"==typeof s.then?n?s.then(function(e){n&&(e="string"==typeof e&&o.modelObserver.isJson(e)?JSON.parse(e):e,n.call(o,e))}).catch(function(e){i&&(e="string"==typeof e&&o.modelObserver.isJson(e)?JSON.parse(e):e,i.call(o,e))}):a=s:n&&n.call(this,t)}else l.call(this,t),n&&n.call(this,t);else n&&n.call(this,t)}return this.isProtectedOnChange=r,a}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();Ds([this.element],["e-lib",e]),Va(this.element.ej2_instances)?Ua("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(t){return t!==e}),As([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&As([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function Ys(e,t,n,i){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof i||(e.properties[t]=ja(i,[e,t,n])),e.properties[t]}function Xs(e,t,n,i,o,r){for(var a=[],l=n?n.length:0,s=0;s<l;s++){var d=i;if(r&&(d=i(n[s],e)),o){var c=ja(d,[e,t,{},!0]);c.setProperties(n[s],!0),a.push(c)}else a.push(ja(d,[e,t,n[s],!1]))}return a}function Zs(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function Js(e,t,n,i){var o=e;return n&&((o={})[e]=t,t&&"object"==typeof t)&&(o[e].ejsAction=i),o}function Ks(e){return function(t,n){var i={set:function(e,t){return function(n){if(this.properties[t]!==n){var i=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,n,i),this.properties[t]=n}}}(e,n),get:Zs(e,n),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i),od(t,n,"prop",e)}}function Qs(e,t){return function(n,i){var o={set:function(e,t,n){return function(i){Ys(this,t,e,n).setProperties(i)}}(e,i,t),get:function(e,t,n){return function(){return Ys(this,t,e,n)}}(e,i,t),enumerable:!0,configurable:!0};Object.defineProperty(n,i,o),od(n,i,"complexProp",e,t)}}function $s(e){return function(t,n){var i={set:function(e,t,n){return function(i){var o=n(i,this);Ys(this,t,e,o).setProperties(i)}}({},n,e),get:function(e,t,n){return function(){var i=n({});return this.properties.hasOwnProperty(t)?this.properties[t]:Ys(this,t,e,i)}}({},n,e),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i),od(t,n,"complexProp",{},e)}}function ed(e,t){return function(n,i){var o={set:function(e,t,n){return function(i){this.isComplexArraySetter=!0;var o=Xs(this,t,e,n,!1),r=Xs(this,t,i,n,!0);this.isComplexArraySetter=!1,this.saveChanges(t,r,o),this.properties[t]=r}}(e,i,t),get:function(e,t,n){return function(){var i=this;if(!this.properties.hasOwnProperty(t)){var o=Xs(this,t,e,n,!1);this.properties[t]=o}var r=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||r||["push","pop"].forEach(function(e){var n={value:function(e,t,n,i){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var a=0;a<n.length;a++){Array.prototype[e].apply(i,[n[a]]);var l=Js(r+(i.length-1),n[a],!this.controlParent,e);this.serverDataBind(l,n[a],!1,e)}break;case"pop":Array.prototype[e].apply(i);var s=Js(r+i.length,null,!this.controlParent,e);this.serverDataBind(s,{ejsAction:"pop"},!1,e)}return i}}(e,t,0,i.properties[t]).bind(i),configurable:!0};Object.defineProperty(i.properties[t],e,n)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}(e,i,t),enumerable:!0,configurable:!0};Object.defineProperty(n,i,o),od(n,i,"colProp",e,t)}}function td(e){return function(t,n){var i={set:function(e,t,n){return function(i){var o=this.properties.hasOwnProperty(t)?this.properties[t]:e,r=Xs(this,t,i,n,!0,!0);this.saveChanges(t,r,o),this.properties[t]=r}}([],n,e),get:function(e,t,n){return function(){var i=n({});if(!this.properties.hasOwnProperty(t)){var o=Xs(this,t,e,i,!1);this.properties[t]=o}return this.properties[t]}}([],n,e),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i),od(t,n,"colProp",{},e)}}function nd(){return function(e,t){var n={set:function(e){var n=this.properties[t];if(n!==e){var i=function e(t,n){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:n};var i=za("propName",t);return i&&(n=i+"-"+n),e(za("parentObj",t),n)}(this,t);!1===Wa(n)&&i.context.removeEventListener(i.prefix,n),i.context.addEventListener(i.prefix,e),this.properties[t]=e}},get:Zs(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,n),od(e,t,"event")}}function id(e){}function od(e,t,n,i,o){Wa(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[n+"s"].push({propertyName:t,defaultValue:i,type:o}),e.propList[n+"Names"].push(t)}var rd=function(e){function t(t){var n=e.call(this,t,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var n;return Object(O.__extends)(t,e),n=t,t.prototype.animate=function(e,t){var i=this.getModel(t=t||{});if("string"==typeof e)for(var o=0,r=Array.prototype.slice.call(js(e,document));o<r.length;o++)i.element=r[o],n.delayAnimation(i);else i.element=e,n.delayAnimation(i)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var n=e.getAttribute("e-animation-id");if(n){var i=parseInt(n,10);cancelAnimationFrame(i),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){e.delay?setTimeout(function(){n.applyAnimation(e)},e.delay):n.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var n=0,i=0,o=0,r=e.duration;e.element.setAttribute("e-animate","true");var a=function(l){try{l?(e.timeStamp=l+e.timeStamp-(o=0===o?l:o),o=l,!n&&e.begin&&e.begin.call(t,e),n+=1,e.timeStamp<r&&e.timeStamp+e.timeStamp/n<r&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(a)):(cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))):(performance.now(),i=requestAnimationFrame(a),e.element.setAttribute("e-animation-id",i.toString()))}catch(n){cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,n)}};a()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},Object(O.__decorate)([Ks("FadeIn")],t.prototype,"name",void 0),Object(O.__decorate)([Ks(400)],t.prototype,"duration",void 0),Object(O.__decorate)([Ks("ease")],t.prototype,"timingFunction",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"delay",void 0),Object(O.__decorate)([nd()],t.prototype,"progress",void 0),Object(O.__decorate)([nd()],t.prototype,"begin",void 0),Object(O.__decorate)([nd()],t.prototype,"end",void 0),Object(O.__decorate)([nd()],t.prototype,"fail",void 0),n=Object(O.__decorate)([id],t)}(Ws);function ad(e,t,n){var i=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===i.rippleFlag||void 0===i.rippleFlag&&!hd?Function:(e.setAttribute("data-ripple","true"),Pl.add(e,"mousedown",ld,{parent:e,rippleOptions:i}),Pl.add(e,"mouseup",sd,{parent:e,rippleOptions:i,done:n}),Pl.add(e,"mouseleave",dd,{parent:e,rippleOptions:i}),Il.isPointer&&Pl.add(e,"transitionend",dd,{parent:e,rippleOptions:i}),function(){e.removeAttribute("data-ripple"),Pl.remove(e,"mousedown",ld),Pl.remove(e,"mouseup",sd),Pl.remove(e,"mouseleave",dd),Pl.remove(e,"transitionend",dd)})}function ld(e){var t=e.target,n=this.rippleOptions.selector,i=n?Us(t,n):t;if(!(!i||this.rippleOptions&&Us(t,this.rippleOptions.ignore))){var o=i.getBoundingClientRect(),r=e.pageX-document.body.scrollLeft,a=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),l=Math.max(Math.abs(r-o.left),Math.abs(r-o.right)),s=Math.max(Math.abs(a-o.top),Math.abs(a-o.bottom)),d=Math.sqrt(l*l+s*s),c=2*d+"px",u=r-o.left-d,h=a-o.top-d;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(u=0,h=0,c="100%"),i.classList.add("e-ripple");var p=ks("div",{className:"e-ripple-element",styles:"width: "+c+";height: "+c+";left: "+u+"px;top: "+h+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(p),window.getComputedStyle(p).getPropertyValue("opacity"),p.style.transform="scale(1)",i!==this.parent&&Pl.add(i,"mouseleave",dd,{parent:this.parent,rippleOptions:this.rippleOptions})}}function sd(e){cd(e,this)}function dd(e){cd(e,this)}function cd(e,t){var n=t.rippleOptions.duration,i=e.target,o=t.rippleOptions.selector,r=o?Us(i,o):i;if(r&&(!r||-1!==r.className.indexOf("e-ripple"))){var a=js(".e-ripple-element",r),l=a[a.length-1];l&&(l.style.opacity="0.5"),t.parent!==r&&Pl.remove(r,"mouseleave",dd),setTimeout(function(){l&&l.parentNode&&l.parentNode.removeChild(l),r.getElementsByClassName("e-ripple-element").length||r.classList.remove("e-ripple"),t.done&&t.done(e)},n)}}var ud,hd=!1,pd=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var n=e.length;if(0!==n){this.loadedModules.length&&this.clearUnusedModule(e);for(var i=0;i<n;i++)for(var o=e[i],r=0,a=t;r<a.length;r++){var l=a[r],s=o.member;if(l.prototype.getModuleName()===o.member&&!this.isModuleLoaded(s)){var d=ja(l,o.args),c=this.getMemberName(s);Ua(c,o.isProperty?l:d,this.parent);var u=o;u.member=c,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var n=t[e];n.isProperty||za(n.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t=this,n=e.map(function(e){return t.getMemberName(e.member)}),i=0,o=this.loadedModules.filter(function(e){return-1===n.indexOf(e.member)});i<o.length;i++){var r=o[i];r.isProperty||za(r.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(r),1),delete this.parent[r.member]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,n=this.loadedModules;t<n.length;t++)if(n[t].member===this.getMemberName(e))return!0;return!1},e}(),fd=function(){function e(e,t,n,i){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=za("callChildDataBind",Ws),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=i,this.setProperties(n,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(Ga(this,e),this.updateChange(!1,this.propName),this.clearChanges()):Ga(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(Ua(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),Ua(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,n,i){this.controlParent.isProtectedOnChange||(i||this.serverDataBind(e,t,!0),this.oldProperties[e]=n,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,n,i){if(Ka()&&!this.parentObj.isComplexArraySetter){var o,r={},a=n?this.getParentKey(!0)+"."+e:e;if(-1!==a.indexOf(".")){var l=a.split(".");o=r;for(var s=0;s<l.length;s++){var d=s===l.length-1;o[l[s]]=d?t:{},o=d?o:o[l[s]]}}else r[a]={},o=r[a],r[a][e]=t;this.isParentArray&&(o.ejsAction=i||"none"),this.controlParent.serverDataBind(r)}},e.prototype.getParentKey=function(e){var t="",n=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var i=this.parentObj[this.propName].length;i=e?i:i>0?i-1:0,n+=t=-1!==t?"-"+t:"-"+i}return this.controlParent!==this.parentObj&&(n=this.parentObj.getParentKey()+"."+this.propName+t),n},e}(),gd=0,md=0,vd=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.randomId=function(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),i.isStringTemplate=!1,i.needsID=!1,i.isReactHybrid=!1,Va(i.enableRtl)&&i.setProperties({enableRtl:gl},!0),Va(i.locale)&&i.setProperties({locale:ml},!0),i.moduleLoader=new pd(i),i.localObserver=new pl(i),fl.on("notifyExternalChange",i.detectFunction,i,i.randomId),Wa(n)||i.appendTo(),i}return Object(O.__extends)(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(As([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),fl.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new pl(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)},t.prototype.appendTo=function(t){if(Va(t)||"string"!=typeof t?Va(t)||(this.element=t):this.element=Bs(t,document),!Va(this.element)){var n="e-"+this.getModuleName().toLowerCase();Ds([this.element],["e-control",n]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var i=za("ej2_instances",this.element);i&&-1!==i.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){Ka()&&window.sfBlazor.renderComplete(this.element,e),this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,n){if("string"==typeof e)this.localObserver.on(e,t,n);else for(var i=0,o=e;i<o.length;i++){var r=o[i];this.localObserver.on(r.event,r.handler,r.context)}},t.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var n=0,i=e;n<i.length;n++){var o=i[n];this.localObserver.off(o.event,o.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[n])&&this.prototype.injectedModules.push(e[n])},t.prototype.createElement=function(e,t,n){return n&&this.isReactHybrid?(t&&(t={}),t["data-id"]=os(),ss.createElement(e,t)):ks(e,t)},t.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e;Va(e=window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.renderReactTemplates=function(){},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(gd=0),ud=this.pageID(location.href),md=history.length,e+"_"+ud+"_"+gd++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t)},t.prototype.isHistoryChanged=function(){return ud!==this.pageID(location.href)||md!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,n={},i=0,o=e;i<o.length;i++){var r,a=o[i];Wa(r=za(a,this))||Ua(a,this.getActualProperties(r),n)}return JSON.stringify(n,function(e,n){return t.getActualProperties(n)})},t.prototype.getActualProperties=function(e){return e instanceof fd?za("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var n={},i=function(i){if(-1===t.indexOf(i)){var r=e[i];if("object"!=typeof r||r instanceof Array)n[i]=r;else{var a=t.filter(function(e){return new RegExp(i+".").test(e)}).map(function(e){return e.replace(i+".","")});n[i]=o.iterateJsonProperties(o.getActualProperties(r),a)}}},o=this,r=0,a=Object.keys(e);r<a.length;r++)i(a[r]);return n},Object(O.__decorate)([Ks(!1)],t.prototype,"enablePersistence",void 0),Object(O.__decorate)([Ks()],t.prototype,"enableRtl",void 0),Object(O.__decorate)([Ks()],t.prototype,"locale",void 0),Object(O.__decorate)([id],t)}(Ws);"undefined"!=typeof window&&window.addEventListener("popstate",function(){gd=0});var yd={left:0,top:0,bottom:0,right:0},bd={isDragged:!1},wd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(0)],t.prototype,"left",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"top",void 0),t}(fd),Cd=function(e){function t(t,i){var o=e.call(this,i,t)||this;return o.dragLimit=n.getDefaultPosition(),o.borderWidth=n.getDefaultPosition(),o.padding=n.getDefaultPosition(),o.diffX=0,o.prevLeft=0,o.prevTop=0,o.dragProcessStarted=!1,o.tapHoldTimer=0,o.externalInitialize=!1,o.diffY=0,o.parentScrollX=0,o.parentScrollY=0,o.droppables={},o.bind(),o}var n;return Object(O.__extends)(t,e),n=t,t.prototype.bind=function(){this.toggleEvents(),Il.isIE&&Ds([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return qa({},yd)},t.prototype.toggleEvents=function(e){var t;Wa(this.handle)||(t=Bs(this.handle,this.element));var n=this.enableTapHold&&Il.isDevice&&Il.isTouch?this.mobileInitialize:this.initialize;e?Pl.remove(t||this.element,Il.touchStartEvent,n):Pl.add(t||this.element,Il.touchStartEvent,n,this)},t.prototype.mobileInitialize=function(e){var t=this,n=e.currentTarget;this.tapHoldTimer=setTimeout(function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,n)},this.tapHoldThreshold),Pl.add(document,Il.touchMoveEvent,this.removeTapholdTimer,this),Pl.add(document,Il.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),Pl.remove(document,Il.touchMoveEvent,this.removeTapholdTimer),Pl.remove(document,Il.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return Va(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),Va(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var n=this.abort;"string"==typeof n&&(n=[n]);for(var i=0;i<n.length;i++)if(!Va(Us(e.target,n[i])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!Wa(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var o=this.getCoordinates(e);if(this.initialPosition={x:o.pageX,y:o.pageY},!this.clone){var r=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=o.pageX-(r.left+this.parentScrollX),this.relativeYPosition=o.pageY-(r.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(Pl.add(document,Il.touchMoveEvent,this.intDragStart,this),Pl.add(document,Il.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,Pl.trigger(document.documentElement,Il.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!Wa(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var n,i=this.getCoordinates(e),o=getComputedStyle(this.element);this.margin={left:parseInt(o.marginLeft,10),top:parseInt(o.marginTop,10),right:parseInt(o.marginRight,10),bottom:parseInt(o.marginBottom,10)};var r=this.element;if(this.clone&&this.dragTarget){var a=Us(e.target,this.dragTarget);Va(a)||(r=a)}this.isReplaceDragEle&&(r=this.currentStateCheck(e.target,r)),this.offset=this.calculateParentPosition(r),this.position=this.getMousePosition(e,this.isDragScroll);var l=this.initialPosition.x-i.pageX,s=this.initialPosition.y-i.pageY;if(Math.sqrt(l*l+s*s)>=this.distance||this.externalInitialize){var d=this.getHelperElement(e);if(!d||Va(d))return;var c=this.helperElement=d;if(this.parentClientRect=this.calculateParentPosition(c.offsetParent),this.dragStart){var u={event:e,element:r,target:this.getProperTargetElement(e),bindEvents:Ka()?this.bindDragEvents.bind(this):null,dragElement:c};this.trigger("dragStart",u)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),n={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var h=getComputedStyle(r),p=parseFloat(h.marginTop);this.clone&&0!==p&&(n.top+=p);var f=this.getProcessedPositionValue({top:n.top-this.diffY+"px",left:n.left-this.diffX+"px"});this.dragElePosition={top:n.top,left:n.left},Fs(c,this.getDragPosition({position:"absolute",left:f.left,top:f.top})),Pl.remove(document,Il.touchMoveEvent,this.intDragStart),Pl.remove(document,Il.touchEndEvent,this.intDestroy),Ka()||this.bindDragEvents(c)}}},t.prototype.bindDragEvents=function(e){Is(e)?(Pl.add(document,Il.touchMoveEvent,this.intDrag,this),Pl.add(document,Il.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)this.top+=(e=e.offsetParent).offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(Va(e))return{left:0,top:0};var t=e.getBoundingClientRect(),n=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(n.marginLeft,10),top:t.top+window.pageYOffset-parseInt(n.marginTop,10)}},t.prototype.intDrag=function(e){if(Wa(e.changedTouches)||1===e.changedTouches.length){var t,n;this.position=this.getMousePosition(e,this.isDragScroll);var i=this.getDocumentWidthHeight("Height");i<this.position.top&&(this.position.top=i);var o=this.getDocumentWidthHeight("Width");if(o<this.position.left&&(this.position.left=o),this.drag){var r=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:r})}var a=this.checkTargetElement(e);if(a.target&&a.instance){var l=!0;this.hoverObject&&(this.hoverObject.instance!==a.instance?this.triggerOutFunction(e,a):l=!1),l&&(a.instance.dragData[this.scope]=this.droppables[this.scope],a.instance.intOver(e,a.target),this.hoverObject=a)}else this.hoverObject&&this.triggerOutFunction(e,a);var s=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var d=this.parentClientRect.left,c=this.parentClientRect.top,u=this.getCoordinates(e),h=u.pageX,p=u.pageY,f=this.position.left-this.diffX,g=this.position.top-this.diffY,m=getComputedStyle(s),v=parseFloat(m.marginTop);if(this.dragArea){if(this.pageX!==h||this.skipDistanceCheck){var y=s.offsetWidth+(parseFloat(m.marginLeft)+parseFloat(m.marginRight));t=this.dragLimit.left>f&&f>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<f+y&&f>0?f-(f-this.dragLimit.right)+window.pageXOffset-y:f<0?this.dragLimit.left:f}if(this.pageY!==p||this.skipDistanceCheck){var b=s.offsetHeight+(parseFloat(m.marginTop)+parseFloat(m.marginBottom));n=this.dragLimit.top>g&&g>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<g+b&&g>0?g-(g-this.dragLimit.bottom)+window.pageYOffset-b:g<0?this.dragLimit.top:g}}else t=f,n=g;var w,C,x=c+this.borderWidth.top,S=d+this.borderWidth.left;if(this.dragProcessStarted&&(Va(n)&&(n=this.prevTop),Va(t)&&(t=this.prevLeft)),this.dragArea){if(this.dragLimit.top=this.clone?this.dragLimit.top:0,w=n-x<0?this.dragLimit.top:n-x,C=t-S<0?this.dragElePosition.left:t-S,v>0&&(this.clone&&(w+=this.element.offsetTop,g<0&&(this.element.offsetTop+g>=0?w=this.element.offsetTop+g:w-=this.element.offsetTop),w=this.dragLimit.bottom<w?this.dragLimit.bottom:w),n-x<0))if(g+v+(s.offsetHeight-x)>=0){var T=this.dragLimit.top+g-x;T+v+x<0?w-=v+x:w=T}else w-=v+x}else w=n-x,C=t-S;var E=this.getProcessedPositionValue({top:w+"px",left:C+"px"});Fs(s,this.getDragPosition(E)),!this.elementInViewport(s)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=n,this.position.left=t,this.position.top=n,this.pageX=h,this.pageY=p}},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=qa({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,n=document.documentElement;return Math.max(t["scroll"+e],n["scroll"+e],t["offset"+e],n["offset"+e],n["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,Wa(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var n=this.checkTargetElement(e);n.target&&n.instance&&(n.instance.dragStopCalled=!0,n.instance.dragData[this.scope]=this.droppables[this.scope],n.instance.intDrop(e,n.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),Pl.remove(document,Il.touchMoveEvent,this.intDragStart),Pl.remove(document,Il.touchEndEvent,this.intDragStop),Pl.remove(document,Il.touchEndEvent,this.intDestroy),Pl.remove(document,Il.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(bd.isDragged=!bd.isDragged),bd.isDragged},t.prototype.setDragArea=function(){var e,t,n,i=0,o=0;if(n="string"==typeof this.dragArea?Bs(this.dragArea):this.dragArea){var r=n.getBoundingClientRect();e=n.scrollWidth?n.scrollWidth:r.right-r.left,t=n.scrollHeight?n.scrollHeight:r.bottom-r.top;for(var a=["Top","Left","Bottom","Right"],l=getComputedStyle(n),s=0;s<a.length;s++){var d=a[s],c=l["border"+d+"Width"],u=l["padding"+d],h=d.toLowerCase();this.borderWidth[h]=isNaN(parseFloat(c))?0:parseFloat(c),this.padding[h]=isNaN(parseFloat(u))?0:parseFloat(u)}i=r.top,this.dragLimit.left=(o=r.left)+this.borderWidth.left+this.padding.left,this.dragLimit.top=n.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=i+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,n=this.getCoordinates(e),i=this.helperElement.style.pointerEvents||"";return Xa(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.pointerEvents=i):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return Va(this.currentStateTarget)||this.currentStateTarget===e?Va(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var n,i,o=void 0!==e.srcElement?e.srcElement:e.target,r=this.getCoordinates(e),a=Va(o.offsetParent);return t?(n=this.clone?r.pageX:r.pageX+(a?0:o.offsetParent.scrollLeft)-this.relativeXPosition,i=this.clone?r.pageY:r.pageY+(a?0:o.offsetParent.scrollTop)-this.relativeYPosition):(n=this.clone?r.pageX:r.pageX+window.pageXOffset-this.relativeXPosition,i=this.clone?r.pageY:r.pageY+window.pageYOffset-this.relativeYPosition),this.clone||(this.getScrollableValues(),i-=this.tempScrollHeight?this.parentScrollY:0,n-=this.tempScrollWidth?this.parentScrollY:0),{left:n-(this.margin.left+this.cursorAt.left),top:i-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=ks("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,n){this.droppables[this.scope]=e?null:{draggable:t,helper:n,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),n=this.getDropInstance(t);if(!n&&t&&!Va(t.parentNode)){var i=Us(t.parentNode,".e-droppable")||t.parentElement;i&&(n=this.getDropInstance(i))}return{target:t,instance:n}},t.prototype.getDropInstance=function(e){var t,n=e&&e.ej2_instances;if(n)for(var i=0,o=n;i<o.length;i++){var r=o[i];if("droppable"===r.getModuleName()){t=r;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},Object(O.__decorate)([Qs({},wd)],t.prototype,"cursorAt",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"clone",void 0),Object(O.__decorate)([Ks()],t.prototype,"dragArea",void 0),Object(O.__decorate)([Ks()],t.prototype,"isDragScroll",void 0),Object(O.__decorate)([Ks()],t.prototype,"isReplaceDragEle",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"isPreventSelect",void 0),Object(O.__decorate)([nd()],t.prototype,"drag",void 0),Object(O.__decorate)([nd()],t.prototype,"dragStart",void 0),Object(O.__decorate)([nd()],t.prototype,"dragStop",void 0),Object(O.__decorate)([Ks(1)],t.prototype,"distance",void 0),Object(O.__decorate)([Ks()],t.prototype,"handle",void 0),Object(O.__decorate)([Ks()],t.prototype,"abort",void 0),Object(O.__decorate)([Ks()],t.prototype,"helper",void 0),Object(O.__decorate)([Ks("default")],t.prototype,"scope",void 0),Object(O.__decorate)([Ks("")],t.prototype,"dragTarget",void 0),Object(O.__decorate)([Ks()],t.prototype,"axis",void 0),Object(O.__decorate)([Ks()],t.prototype,"queryPositionInfo",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableTailMode",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"skipDistanceCheck",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"preventDefault",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableAutoScroll",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableTapHold",void 0),Object(O.__decorate)([Ks(750)],t.prototype,"tapHoldThreshold",void 0),n=Object(O.__decorate)([id],t)}(Ws),xd=function(e){function t(t,n){var i=e.call(this,n,t)||this;return i.mouseOver=!1,i.dragData={},i.dragStopCalled=!1,i.bind(),i}return Object(O.__extends)(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){Pl.add(this.element,Il.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){this.mouseOver||(this.trigger("over",{event:e,target:t,dragData:this.dragData[this.scope]}),this.mouseOver=!0)},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var n,i=!0,o=this.dragData[this.scope],r=!!o&&o.helper&&Is(o.helper);r&&(n=this.isDropArea(e,o.helper,t),this.accept&&(i=qs(o.helper,this.accept))),r&&this.drop&&n.canDrop&&i&&this.trigger("drop",{event:e,target:n.target,droppedElement:o.helper,dragData:o}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,n){var i={canDrop:!0,target:n||e.target},o="touchend"===e.type;if(o||i.target===t){t.style.display="none";var r=o?e.changedTouches[0]:e,a=document.elementFromPoint(r.clientX,r.clientY);i.canDrop=!1,i.canDrop=Xa(a,this.element),i.canDrop&&(i.target=a),t.style.display=""}return i},t.prototype.destroy=function(){Pl.remove(this.element,Il.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},Object(O.__decorate)([Ks()],t.prototype,"accept",void 0),Object(O.__decorate)([Ks("default")],t.prototype,"scope",void 0),Object(O.__decorate)([nd()],t.prototype,"drop",void 0),Object(O.__decorate)([nd()],t.prototype,"over",void 0),Object(O.__decorate)([nd()],t.prototype,"out",void 0),Object(O.__decorate)([id],t)}(Ws),Sd={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Td=function(e){function t(t,i){var o=e.call(this,i,t)||this;return o.keyPressHandler=function(e){for(var t=e.altKey,i=e.ctrlKey,r=e.shiftKey,a=e.which,l=0,s=Object.keys(o.keyConfigs);l<s.length;l++)for(var d=s[l],c=0,u=o.keyConfigs[d].split(",");c<u.length;c++){var h=n.getKeyConfigData(u[c].trim());t===h.altKey&&i===h.ctrlKey&&r===h.shiftKey&&a===h.keyCode&&(e.action=d,o.keyAction&&o.keyAction(e))}},o.bind(),o}var n;return Object(O.__extends)(t,e),n=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),i={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return i.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):n.getKeyCode(t[t.length-1]),n.configCache[e]=i,i},t.getKeyCode=function(e){return Sd[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Object(O.__decorate)([Ks({})],t.prototype,"keyConfigs",void 0),Object(O.__decorate)([Ks("keyup")],t.prototype,"eventName",void 0),Object(O.__decorate)([nd()],t.prototype,"keyAction",void 0),n=Object(O.__decorate)([id],t)}(Ws),Ed=function(){function e(e,t,n){this.controlName=e,this.localeStrings=t,this.setLocale(n||ml)}return e.prototype.setLocale=function(t){var n=this.intGetControlConstant(e.locale,t);this.currentLocale=n||this.localeStrings},e.load=function(e){this.locale=qa(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return Va(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]},e.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},e.locale={},e}(),_d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(50)],t.prototype,"swipeThresholdDistance",void 0),t}(fd),kd=/(Up|Down)/,Dd=function(e){function t(t,n){var i=e.call(this,n,t)||this;return i.touchAction=!0,i.tapCount=0,i.startEvent=function(e){if(!0===i.touchAction){var t=i.updateChangeTouches(e);void 0!==e.changedTouches&&(i.touchAction=!1),i.isTouchMoved=!1,i.movedDirection="",i.startPoint=i.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},i.startEventData=t,i.hScrollLocked=i.vScrollLocked=!1,i.tStampStart=Date.now(),i.timeOutTapHold=setTimeout(function(){i.tapHoldEvent(e)},i.tapHoldThreshold),Pl.add(i.element,Il.touchMoveEvent,i.moveEvent,i),Pl.add(i.element,Il.touchEndEvent,i.endEvent,i),Pl.add(i.element,Il.touchCancelEvent,i.cancelEvent,i)}},i.moveEvent=function(e){var t=i.updateChangeTouches(e);i.movedPoint=t,i.isTouchMoved=!(t.clientX===i.startPoint.clientX&&t.clientY===i.startPoint.clientY);var n={};i.isTouchMoved&&(clearTimeout(i.timeOutTapHold),i.calcScrollPoints(e),n=qa(n,{},{startEvents:i.startEventData,originalEvent:e,startX:i.startPoint.clientX,startY:i.startPoint.clientY,distanceX:i.distanceX,distanceY:i.distanceY,scrollDirection:i.scrollDirection,velocity:i.getVelocity(t)}),i.trigger("scroll",n),i.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},i.cancelEvent=function(e){clearTimeout(i.timeOutTapHold),clearTimeout(i.timeOutTap),i.tapCount=0,i.swipeFn(e),Pl.remove(i.element,Il.touchCancelEvent,i.cancelEvent)},i.endEvent=function(e){i.swipeFn(e),i.isTouchMoved||"function"==typeof i.tap&&(i.trigger("tap",{originalEvent:e,tapCount:++i.tapCount}),i.timeOutTap=setTimeout(function(){i.tapCount=0},i.tapThreshold)),i.modeclear()},i.swipeFn=function(e){clearTimeout(i.timeOutTapHold),clearTimeout(i.timeOutTap);var t=i.updateChangeTouches(e),n=t.clientX-i.startPoint.clientX,o=t.clientY-i.startPoint.clientY;n=Math.floor(n<0?-1*n:n),o=Math.floor(o<0?-1*o:n),i.isTouchMoved=n>1||o>1,/Mozilla|Firefox/.test(Il.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(i.isTouchMoved=!1),i.endPoint=t,i.calcPoints(e);var r={originalEvent:e,startEvents:i.startEventData,startX:i.startPoint.clientX,startY:i.startPoint.clientY,distanceX:i.distanceX,distanceY:i.distanceY,swipeDirection:i.movedDirection,velocity:i.getVelocity(t)};if(i.isTouchMoved){var a=void 0,l=i.swipeSettings.swipeThresholdDistance;a=qa(a,i.defaultArgs,r);var s=!1,d=i.element,c=i.isScrollable(d),u=kd.test(i.movedDirection);(l<i.distanceX&&!u||l<i.distanceY&&u)&&(s=!c||i.checkSwipe(d,u)),s&&i.trigger("swipe",a)}i.modeclear()},i.modeclear=function(){i.modeClear=setTimeout(function(){i.touchAction=!0},"function"!=typeof i.tap?0:20),i.lastTapTime=(new Date).getTime(),Pl.remove(i.element,Il.touchMoveEvent,i.moveEvent),Pl.remove(i.element,Il.touchEndEvent,i.endEvent),Pl.remove(i.element,Il.touchCancelEvent,i.cancelEvent)},i.bind(),i}return Object(O.__extends)(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),Il.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){Pl.add(this.element,Il.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){Pl.remove(this.element,Il.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e);return!!/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)},t.prototype.tapHoldEvent=function(e){this.tapCount=0,this.touchAction=!0,Pl.remove(this.element,Il.touchMoveEvent,this.moveEvent),Pl.remove(this.element,Il.touchEndEvent,this.endEvent),this.trigger("tapHold",{originalEvent:e}),Pl.remove(this.element,Il.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?t.clientX>this.startPoint.clientX?"Right":"Left":t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,n=e.clientY,i=Date.now(),o=t-this.startPoint.clientX,r=n-this.startPoint.clientX,a=i-this.tStampStart;return Math.sqrt(o*o+r*r)/a},t.prototype.checkSwipe=function(e,t){var n=["scroll","offset"],i=t?["Height","Top"]:["Width","Left"];return e[n[0]+i[0]]<=e[n[1]+i[0]]||0===e[n[0]+i[1]]||e[n[1]+i[0]]+e[n[0]+i[1]]>=e[n[0]+i[0]]},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Object(O.__decorate)([nd()],t.prototype,"tap",void 0),Object(O.__decorate)([nd()],t.prototype,"tapHold",void 0),Object(O.__decorate)([nd()],t.prototype,"swipe",void 0),Object(O.__decorate)([nd()],t.prototype,"scroll",void 0),Object(O.__decorate)([Ks(350)],t.prototype,"tapThreshold",void 0),Object(O.__decorate)([Ks(750)],t.prototype,"tapHoldThreshold",void 0),Object(O.__decorate)([Qs({},_d)],t.prototype,"swipeSettings",void 0),Object(O.__decorate)([id],t)}(Ws),Ad=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Od=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Id=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],Pd=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:Ad,attributes:Od}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var n=this.wrapElement.innerHTML;return this.removeElement(),n},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var n=e[t].attributes,i=0;i<n.length;i++)this.wrapElement.children[t].removeAttribute(n[i].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach(function(e){Ns(e)})},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+Id.join("],[")+"]");e.length>0&&e.forEach(function(e){Id.forEach(function(t){e.hasAttribute(t)&&e.removeAttribute(t)})})},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach(function(t,n){var i=e.wrapElement.querySelectorAll(t.selector);i.length>0&&i.forEach(function(e){e.removeAttribute(t.attribute)})})},e}();function Rd(e){return function(t){!function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype.hasOwnProperty(n)&&!t.isFormBase||(e.prototype[n]=t.prototype[n])})})}(t,e)}}function Md(e,t,n){for(var i=e.replace(/\[/g,".").replace(/\]/g,"").split("."),o=n||{},r=0;r<i.length;r++){var a=i[r];r+1===i.length?o[a]=void 0===t?{}:t:void 0===o[a]&&(o[a]={}),o=o[a]}return o}var Nd=function(){function e(){this.isProtectedOnChange=!0,this.isFormInit=!0}return e.prototype.saveChanges=function(e,t,n){if(!this.isProtectedOnChange){this.oldProperties[e]=n,this.changedProperties[e]=t,this.finalUpdate();var i=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(i)}}},e.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,t.isFormInit=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(e,n){var i=t.srenderer?t.srenderer.createElement(e):ks(e);return"undefined"==typeof n?i:(i.innerHTML=n.innerHTML?n.innerHTML:"",void 0!==n.className&&(i.className=n.className),void 0!==n.id&&(i.id=n.id),void 0!==n.styles&&i.setAttribute("style",n.styles),void 0!==t.ngAttr&&i.setAttribute(t.ngAttr,""),void 0!==n.attrs&&Hs(i,n.attrs),i)};for(var n=0,i=t.tags;n<i.length;n++){var o=i[n],r={instance:za("child"+o.substring(0,1).toUpperCase()+o.substring(1),t),name:o};t.tagObjects.push(r)}for(var a=Object.keys(t),l=0,s=a=a.filter(function(e){return/Ref$/i.test(e)&&/\_/i.test(e)});l<s.length;l++){var d=s[l].replace("Ref",""),c={};Ua(d.replace("_","."),za(d,t),c),t.setProperties(c,!0)}},e.prototype.getAngularAttr=function(e){for(var t,n=e.attributes,i=n.length,o=0;o<i;o++)/_ngcontent/g.test(n[o].name)&&(t=n[o].name);return t},e.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");for(var n=Object.keys(t),i=0,o=n=n.filter(function(e){return/Ref$/i.test(e)});i<o.length;i++){var r=o[i].replace("Ref","");Ua(r.replace("_","."),za(r+"Ref",t),t)}setTimeout(function(){"undefined"!=typeof window&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility="")})},e.prototype.ngOnDestroy=function(e){var t=e||this;setTimeout(function(){"undefined"!=typeof window&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null),t.ngBoundedEvents={},t.tagObjects={},t.ngEle=null)})},e.prototype.clearTemplate=function(e,t){!function(e,t,n){var i=Object.keys(e.registeredTemplate);if(i.length)for(var o=t&&t.filter(function(e){return!/\./g.test(e)}),r=0,a=o&&o||i;r<a.length;r++){var l=a[r];if(n&&n.length)for(var s=0;s<n.length;s++)for(var d=0;d<e.registeredTemplate.template.length;d++)e.registeredTemplate.template[d].rootNodes[0]===n[s]&&(h=e.registeredTemplate[l])[d].destroy();else if(e.registeredTemplate[l])for(var c=0,u=e.registeredTemplate[l];c<u.length;c++){var h;if(!(h=u[c]).destroyed){if(h._view){var p=h._view.renderer.parentNode(h.rootNodes[0]);if(!Va(p))for(d=0;d<h.rootNodes.length;d++)p.appendChild(h.rootNodes[d])}h.destroy()}}delete e.registeredTemplate[l]}for(var f=function(e){e.instance&&e.instance.clearTemplate(t&&t.filter(function(t){return!!new RegExp(e.name).test(t)}))},g=0,m=e.tagObjects;g<m.length;g++)f(m[g])}(this,e,t)},e.prototype.ngAfterContentChecked=function(e){for(var t=e||this,n=0,i=t.tagObjects;n<i.length;n++){var o=i[n];if(!Wa(o.instance)&&(o.instance.isInitChanges||o.instance.hasChanges||o.instance.hasNewChildren))if(o.instance.isInitChanges){var r={},a=void 0;(C=za("instance.list",o))&&C.length&&(a=C[0].directivePropList);var l=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(l=!1),a&&l&&-1===a.indexOf(o.instance.propertyName))for(var s=Object.keys(o.instance.list[0].propCollection),d=0;d<o.instance.list.length;d++){o.instance.list[d].propCollection[o.instance.propertyName]=[];for(var c={},u=0;u<s.length;u++)c[k=s[u]]=o.instance.list[d].propCollection[k];for(var h=0;h<o.instance.list[d].tags.length;h++){var p=o.instance.list[d].tags[h],f=za("child"+p.substring(0,1).toUpperCase()+p.substring(1),o.instance.list[d]);if(f){var g=o.instance.list[d]["child"+p.substring(0,1).toUpperCase()+p.substring(1)];if(g)for(var m=0;m<g.list.length;m++){var v=g.list[0].tags[0];if(v){var y=za("child"+v.substring(0,1).toUpperCase()+v.substring(1),g.list[m]);y&&g.list[m].tagObjects.push({instance:y,name:v})}}o.instance.list[d].tagObjects.push({instance:f,name:p})}}o.instance.list[d].propCollection[o.instance.propertyName].push(c)}r[o.name]=o.instance.getProperties(),t.setProperties(r,o.instance.isInitChanges)}else{t[o.name].length===o.instance.list.length&&"diagram"!==t.getModuleName()||(t[o.name]=o.instance.list);for(var b=0,w=o.instance.list;b<w.length;b++){var C,x=o.instance.list.indexOf(C=w[b]),S=za(o.name,t)[x],T=Object.keys(S);if(T=T.filter(function(e){return/Ref$/i.test(e)}),0!==Object.keys(S.properties).length)for(var E=0,_=T;E<_.length;E++){var k;k=(k=_[E]).replace(/Ref/,""),S.properties[k]=S.properties[k]?S.properties[k]:S.propCollection[k]}Wa(S)||Wa(S.setProperties)||(/diagram|DashboardLayout/.test(t.getModuleName())?S.setProperties(C.getProperties(),!0):S.setProperties(C.getProperties())),C.isUpdated=!0}}}},e.prototype.registerEvents=function(e){!function(e,t,n){var o={};if(e&&e.length){for(var r=0,a=e;r<a.length;r++){var l=a[r];o[l]=new i.EventEmitter(!1)}t.setProperties(o,!0)}}(e,this)},e.prototype.twoWaySetter=function(e,t){var n=za(t,this.properties);n!==e&&(this.saveChanges(t,e,n),Ua(t,Va(e)?null:e,this.properties),za(t+"Change",this).emit(e))},e.prototype.addTwoWay=function(e){for(var t=this,n=function(e){za(e,o),Object.defineProperty(o,e,{get:function(){return za(e,t.properties)},set:function(n){return t.twoWaySetter(n,e)}}),Ua(e+"Change",new i.EventEmitter,o)},o=this,r=0,a=e;r<a.length;r++)n(a[r])},e.prototype.addEventListener=function(e,t){var n=za(e,this);Wa(n)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,n.subscribe(t)))},e.prototype.removeEventListener=function(e,t){Wa(za(e,this))||this.ngBoundedEvents[e].get(t).unsubscribe()},e.prototype.trigger=function(e,t,n){var i=za(e,this),o=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),Wa(i)||i.next(t);var r=za("local"+e.charAt(0).toUpperCase()+e.slice(1),this);Wa(r)||r.call(this,t),this.isProtectedOnChange=o,n&&(this.preventChange=this.isPreventChange,n.call(this,t)),this.isPreventChange=!1},e}(),Ld=ds.compile;function Hd(e){return function(t,n){var i={set:function(e){return function(t){void 0!==t&&(Ua(e+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=e):this.saveChanges&&(this.saveChanges(e,t,void 0),this.dataBind()))}}(n),get:function(e,t){return function(){return za(e+"Ref",this)||t}}(n,e),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i)}}ds.compile=function(e,t){if("string"==typeof e)return Ld(e,t);var n=e.elementRef.nativeElement._viewContainerRef,i=e.elementRef.nativeElement.propName;return function(t,o,r){var a=n||o.viewContainerRef,l=a.createEmbeddedView(e,{$implicit:t});l.markForCheck();var s=o&&o.registeredTemplate?o.registeredTemplate:za("currentInstance.registeredTemplate",a);return"undefined"==typeof s[r=r&&o.registeredTemplate?r:i]&&(s[r]=[]),s[r].push(l),l.rootNodes}};var Bd=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.isEmpty=function(){return 0===this.height&&0===this.width},e.prototype.clone=function(){return new e(this.width,this.height)},e}(),jd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.equals=function(e,t){return e===t||!(!e||!t)&&(!e||!t||e.x===t.x&&e.y===t.y)},t.isEmptyPoint=function(e){return!e.x||!e.y},t.transform=function(e,t,n){var i={x:0,y:0};return i.x=Math.round(100*(e.x+n*Math.cos(t*Math.PI/180)))/100,i.y=Math.round(100*(e.y+n*Math.sin(t*Math.PI/180)))/100,i},t.findLength=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.findAngle=function(e,t){var n=Math.atan2(t.y-e.y,t.x-e.x);return n=180*n/Math.PI,(n%=360)<0&&(n+=360),n},t.distancePoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.getLengthFromListOfPoints=function(e){for(var t=0,n=0;n<e.length-1;n++)t+=this.distancePoints(e[n],e[n+1]);return t},t.adjustPoint=function(e,t,n,i){var o,r=n?{x:e.x,y:e.y}:{x:t.x,y:t.y};return e.x===t.x?e.y<t.y&&n||e.y>t.y&&!n?r.y+=i:r.y-=i:e.y===t.y?e.x<t.x&&n||e.x>t.x&&!n?r.x+=i:r.x-=i:n?(o=this.findAngle(e,t),r=this.transform(e,o,i)):(o=this.findAngle(t,e),r=this.transform(t,o,i)),r},t.direction=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},t.prototype.getClassName=function(){return"Point"},Object(O.__decorate)([Ks(0)],t.prototype,"x",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"y",void 0),t}(fd);function zd(e){var t,n=[],i=function(e){var t=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,n=[],i=[],o={};t.lastIndex=0;var r=!1;for(o=t.exec(e);o;)"e"===o[1]?r=!0:o[1]?("zm"===o[1].toLowerCase()?(n.length&&i.push(n),i.push(["Z"]),n=[o[1].substring(1,2)]):(n.length&&i.push(n),n=[o[1]]),r=!1):(n.length||(n=[]),r||n.push(Number(o[2])),r=!1),o=t.exec(e);return n.length&&i.push(n),i}(e);if(i.length>0)for(var o=0;o<i.length;o++){var r=i[o],a="";switch((a=r[0]).toLowerCase()){case"m":for(t=1;t<r.length;t++)n.push({command:a,x:r[t],y:r[t+1]}),t+=1,"m"===a?a="l":"M"===a&&(a="L");break;case"l":case"t":for(t=1;t<r.length;t++)n.push({command:a,x:r[t],y:r[t+1]}),t+=1;break;case"h":for(t=1;t<r.length;t++)n.push({command:a,x:r[t]});break;case"v":for(t=1;t<r.length;t++)n.push({command:a,y:r[t]});break;case"z":n.push({command:a});break;case"c":for(t=1;t<r.length;t++)n.push({command:a,x1:r[t],y1:r[t+1],x2:r[t+2],y2:r[t+3],x:r[t+4],y:r[t+5]}),t+=5;break;case"s":for(t=1;t<r.length;t++)n.push({command:a,x2:r[t],y2:r[t+1],x:r[t+2],y:r[t+3]}),t+=3;break;case"q":for(t=1;t<r.length;t++)n.push({command:a,x1:r[t],y1:r[t+1],x:r[t+2],y:r[t+3]}),t+=3;break;case"a":for(t=1;t<r.length;t++)n.push({command:a,r1:r[t],r2:r[t+1],angle:r[t+2],largeArc:r[t+3],sweep:r[t+4],x:r[t+5],y:r[t+6]}),t+=6}}return n}function Ud(e){var t,n,i="";for(i="M"+e[0].x+" "+e[0].y,n=1;n<e.length;n++)i+="L"+(t=e[n]).x+" "+t.y;return i+"Z"}function Fd(e){var t,n,i,o,r,a,l,s,d,c,u=[];for(l=0,s=0,c=0,d=e.length;c<d;++c){var h=e[c];"y1"in h&&(o=h.y1),"y2"in h&&(a=h.y2),"x1"in h&&(i=h.x1),"x2"in h&&(r=h.x2),"x"in h&&(l=h.x),"y"in h&&(s=h.y);var p=u[u.length-1];switch(h.command){case"M":u.push({command:"M",x:l,y:s});break;case"L":u.push({command:"L",x0:t,y0:n,x:l,y:s});break;case"H":u.push({command:"L",x0:t,y0:n,x:l,y:n});break;case"V":u.push({command:"L",x0:t,y0:n,x:t,y:s});break;case"C":u.push({command:"C",x0:t,y0:n,x1:i,y1:o,x2:r,y2:a,x:l,y:s});break;case"S":if(p){var f=void 0;u.push({command:"C",x0:t,y0:n,x1:(g={x:2*t-(f="C"===p.command||"S"===p.command?{x:p.x2,y:p.y2}:{x:t,y:n}).x,y:2*n-f.y}).x,y1:g.y,x2:r,y2:a,x:l,y:s})}break;case"Q":u.push({command:"Q",x0:t,y0:n,x1:i,y1:o,x:l,y:s});break;case"T":var g;p&&(f=void 0,u.push({command:"Q",x0:t,y0:n,x1:(g={x:2*t-(f="Q"===p.command?{x:p.x1,y:p.y1}:{x:t,y:n}).x,y:2*n-f.y}).x,y1:g.y,x:l,y:s}));break;case"A":var m=h;m.command="A",u.push(m);break;case"Z":case"z":u.push({command:"Z"}),l=t,s=n}t=l,n=s}return u}function Gd(e,t,n,i,o,r,a,l){var s,d,c,u,h,p,f,g,m;for(h=0,p=0,g=0,f=e.length;g<f;++g){var v=e[g],y=v.command;"x"in v&&(h=v.x),"y"in v&&(p=v.y),"y1"in v&&(d=v.y1),"y2"in v&&(u=v.y2),"x1"in v&&(s=v.x1),"x2"in v&&(c=v.x2),i?(void 0!==h&&(h=Vd(h,t,o,a)),void 0!==p&&(p=Vd(p,n,r,l)),void 0!==s&&(s=Vd(s,t,o,a)),void 0!==d&&(d=Vd(d,n,r,l)),void 0!==c&&(c=Vd(c,t,o,a)),void 0!==u&&(u=Vd(u,n,r,l))):(void 0!==h&&(h=Number((h+t).toFixed(2))),void 0!==p&&(p=Number((p+n).toFixed(2))),void 0!==s&&(s=Number((s+t).toFixed(2))),void 0!==d&&(d=Number((d+n).toFixed(2))),void 0!==c&&(c=Number((c+t).toFixed(2))),void 0!==u&&(u=Number((u+n).toFixed(2)))),(m=qd(v,y,{x:h,y:p,x1:s,y1:d,x2:c,y2:u,r1:v.r1,r2:v.r2},i,t,n))&&(e[g]=m)}return Yd(e)}function qd(e,t,n,i,o,r){switch(t){case"M":case"L":e.x=n.x,e.y=n.y;break;case"H":e.x=n.x;break;case"V":e.y=n.y;break;case"C":e.x=n.x,e.y=n.y,e.x1=n.x1,e.y1=n.y1,e.x2=n.x2,e.y2=n.y2;break;case"S":e.x=n.x,e.y=n.y,e.x2=n.x2,e.y2=n.y2;break;case"Q":e.x=n.x,e.y=n.y,e.x1=n.x1,e.y1=n.y1;break;case"T":e.x=n.x,e.y=n.y;break;case"A":var a=n.r1,l=n.r2;i&&(n.r1=a*=o,n.r2=l*=r),e.x=n.x,e.y=n.y,e.r1=n.r1,e.r2=n.r2;break;case"z":case"Z":e={command:"Z"}}return e}function Vd(e,t,n,i){return e!==n?e=i!==n?e*t-(Number(n)*t-Number(n))+(i-Number(n)):Number(e)*t-(Number(n)*t-Number(n)):i!==n&&(e=i),Number(e.toFixed(2))}function Wd(e){var t,n,i,o,r,a,l,s,d,c;for(l=0,s=0,c=0,d=e.length;c<d;++c){var u=e[c],h=u.command;if(/[MLHVCSQTA]/.test(h))"x"in u&&(u.x=l=u.x),"y"in u&&(u.y=s=u.y);else{"x1"in u&&(u.x1=i=l+u.x1),"x2"in u&&(u.x2=r=l+u.x2),"y1"in u&&(u.y1=o=s+u.y1),"y2"in u&&(u.y2=a=s+u.y2),"x"in u&&(u.x=l+=u.x),"y"in u&&(u.y=s+=u.y);var p=void 0;switch(h){case"m":case"M":p={command:"M",x:l,y:s};break;case"l":case"L":p={command:"L",x:l,y:s};break;case"h":case"H":p={command:"H",x:l};break;case"v":case"V":p={command:"V",y:s};break;case"c":case"C":p={command:"C",x:l,y:s,x1:i,y1:o,x2:r,y2:a};break;case"s":case"S":p={command:"S",x:l,y:s,x2:r,y2:a};break;case"q":case"Q":p={command:"Q",x:l,y:s,x1:i,y1:o};break;case"t":case"T":p={command:"T",x:l,y:s};break;case"a":case"A":(p={command:"A",x:l,y:s}).r1=u.r1,p.r2=u.r2,p.angle=u.angle,p.largeArc=u.largeArc,p.sweep=u.sweep;break;case"z":case"Z":p={command:"Z"},l=t,s=n,p=e[c]}p&&(e[c]=p)}"M"!==h&&"m"!==h||(t=l,n=s)}return e}function Yd(e){var t,n="";for(t=0;t<e.length;t++)n+=0===t?Xd(e[t]):" "+Xd(e[t]);return n}function Xd(e){var t="";switch(e.command){case"Z":case"z":t=e.command;break;case"M":case"m":case"L":case"l":t=e.command+" "+e.x+" "+e.y;break;case"C":case"c":t=e.command+" "+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"Q":case"q":t=e.command+" "+e.x1+" "+e.y1+" "+e.x+" "+e.y;break;case"A":case"a":t=e.command+" "+e.r1+" "+e.r2+" "+e.angle+" "+(e.largeArc?"1":"0")+" "+(e.sweep?"1":"0")+" "+e.x+" "+e.y;break;case"H":case"h":t=e.command+" "+e.x;break;case"V":case"v":t=e.command+" "+e.y;break;case"S":case"s":t=e.command+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"T":case"t":t=e.command+" "+e.x+" "+e.y}return t}var Zd=function(){function e(e,t,n,i){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,n=i=0):(void 0===n&&(n=0),void 0===i&&(i=0)),this.x=e,this.y=t,this.width=n,this.height=i}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),e.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},e.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),n=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=n-this.y,this},e.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),n=Math.min(this.top,e.y),i=Math.max(this.right,e.x),o=Math.max(this.bottom,e.y);this.x=t,this.y=n,this.width=i-this.x,this.height=o-this.y},e.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},e.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},e.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},e.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},e.toBounds=function(t){for(var n=new e,i=0,o=t;i<o.length;i++)n.unitePoint(o[i]);return n},e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}(),Jd=function(e){return e[e.Identity=0]="Identity",e[e.Translation=1]="Translation",e[e.Scaling=2]="Scaling",e[e.Unknown=4]="Unknown",e}({}),Kd=function(e,t,n,i,o,r,a){this.m11=e,this.m12=t,this.m21=n,this.m22=i,this.offsetX=o,this.offsetY=r,this.type=a};function Qd(){return new Kd(1,0,0,1,0,0,Jd.Identity)}function $d(e,t){var n=function(e,t,n){switch(e.type){case Jd.Identity:break;case Jd.Translation:t+=e.offsetX,n+=e.offsetY;break;case Jd.Scaling:t*=e.m11,n*=e.m22;break;case Jd.Translation|Jd.Scaling:t*=e.m11,t+=e.offsetX,n*=e.m22,n+=e.offsetY;break;default:var i=t*e.m12+e.offsetY;t*=e.m11,t+=n*e.m21+e.offsetX,n*=e.m22,n+=i}return{x:t,y:n}}(e,t.x,t.y);return{x:Math.round(100*n.x)/100,y:Math.round(100*n.y)/100}}function ec(e,t,n,i){ic(e,function(e,t,n){var i=Qd(),o=Math.sin(e),r=Math.cos(e),a=t*(1-r)+n*o,l=n*(1-r)-t*o;return i.type=Jd.Unknown,oc(i,r,o,-o,r,a,l),i}(.017453292519943295*(t%=360),n||0,i||0))}function tc(e,t,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0),ic(e,function(e,t,n,i){var o=Qd();return o.type=n||i?Jd.Scaling|Jd.Translation:Jd.Scaling,oc(o,e,0,0,t,n-e*n,i-t*i),o}(t,n,i,o))}function nc(e,t,n){return e.type&Jd.Identity?(e.type=Jd.Translation,void oc(e,1,0,0,1,t,n)):e.type&Jd.Unknown?(e.offsetX+=t,void(e.offsetY+=n)):(e.offsetX+=t,e.offsetY+=n,void(e.type|=Jd.Translation))}function ic(e,t){var n=e.type,i=t.type;if(i!==Jd.Identity){if(n===Jd.Identity)return rc(e,t),void(e.type=t.type);if(i===Jd.Translation)return e.offsetX+=t.offsetX,e.offsetY+=t.offsetY,void(n!==Jd.Unknown&&(e.type|=Jd.Translation));if(n!==Jd.Translation){var o=n<<4|i;switch(o){case 34:return e.m11*=t.m11,void(e.m22*=t.m22);case 35:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,void(e.type=Jd.Translation|Jd.Scaling);case 36:break;default:switch(o){case 50:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX*=t.m11,void(e.offsetY*=t.m22);case 51:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.m11*e.offsetX+t.offsetX,void(e.offsetY=t.m22*e.offsetY+t.offsetY);case 52:break;default:switch(o){case 66:case 67:case 68:break;default:return}}}var r=Qd();return oc(r,e.m11*t.m11+e.m12*t.m21,e.m11*t.m12+e.m12*t.m22,e.m21*t.m11+e.m22*t.m21,e.m21*t.m12+e.m22*t.m22,e.offsetX*t.m11+e.offsetY*t.m21+t.offsetX,e.offsetX*t.m12+e.offsetY*t.m22+t.offsetY),r.m21||r.m12?r.type=Jd.Unknown:((r.m11&&1!==r.m11||r.m22&&1!==r.m22)&&(r.type=Jd.Scaling),(r.offsetX||r.offsetY)&&(r.type|=Jd.Translation),(r.type&(Jd.Translation|Jd.Scaling))===Jd.Identity&&(r.type=Jd.Identity),r.type=Jd.Scaling|Jd.Translation),rc(e,r),void(e.type=r.type)}var a=e.offsetX,l=e.offsetY;e.offsetX=a*t.m11+l*t.m21+t.offsetX,e.offsetY=a*t.m12+l*t.m22+t.offsetY,e.type=i!==Jd.Unknown?Jd.Translation|Jd.Scaling:Jd.Unknown}}function oc(e,t,n,i,o,r,a){e.m11=t,e.m12=n,e.m21=i,e.m22=o,e.offsetX=r,e.offsetY=a}function rc(e,t){e.m11=t.m11,e.m12=t.m12,e.m21=t.m21,e.m22=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.type=t.type}var ac,lc,sc=function(e){if(e){if(Ka())return fc;switch(e.type){case"Linear":return gc;case"Radial":return mc;default:return gc}}return gc},dc=function(e,t,n,i){this.left=e,this.right=t,this.top=n,this.bottom=i},cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(0)],t.prototype,"left",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"right",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"top",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"bottom",void 0),t}(fd),uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(45)],t.prototype,"angle",void 0),Object(O.__decorate)([Ks(5)],t.prototype,"distance",void 0),Object(O.__decorate)([Ks(.7)],t.prototype,"opacity",void 0),Object(O.__decorate)([Ks("lightgrey")],t.prototype,"color",void 0),t}(fd),hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Stop"},Object(O.__decorate)([Ks("")],t.prototype,"color",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offset",void 0),Object(O.__decorate)([Ks(1)],t.prototype,"opacity",void 0),t}(fd),pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([ed([],hc)],t.prototype,"stops",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),t}(fd),fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(0)],t.prototype,"x1",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"x2",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"y1",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"y2",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"cx",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"cy",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"fx",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"fy",void 0),Object(O.__decorate)([Ks(50)],t.prototype,"r",void 0),t}(pc),gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(0)],t.prototype,"x1",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"x2",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"y1",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"y2",void 0),t}(pc),mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(0)],t.prototype,"cx",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"cy",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"fx",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"fy",void 0),Object(O.__decorate)([Ks(50)],t.prototype,"r",void 0),t}(pc),vc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("white")],t.prototype,"fill",void 0),Object(O.__decorate)([Ks("black")],t.prototype,"strokeColor",void 0),Object(O.__decorate)([Ks("")],t.prototype,"strokeDashArray",void 0),Object(O.__decorate)([Ks(1)],t.prototype,"strokeWidth",void 0),Object(O.__decorate)([Ks(1)],t.prototype,"opacity",void 0),Object(O.__decorate)([$s(sc)],t.prototype,"gradient",void 0),t}(fd),yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("transparent")],t.prototype,"fill",void 0),t}(vc),bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("black")],t.prototype,"color",void 0),Object(O.__decorate)([Ks("Arial")],t.prototype,"fontFamily",void 0),Object(O.__decorate)([Ks(12)],t.prototype,"fontSize",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"italic",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"bold",void 0),Object(O.__decorate)([Ks("CollapseSpace")],t.prototype,"whiteSpace",void 0),Object(O.__decorate)([Ks("WrapWithOverflow")],t.prototype,"textWrapping",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"textAlign",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"textDecoration",void 0),Object(O.__decorate)([Ks("Wrap")],t.prototype,"textOverflow",void 0),Object(O.__decorate)([Ks("transparent")],t.prototype,"fill",void 0),t}(vc),wc=function(e){return e[e.Default=0]="Default",e[e.expandNode=2]="expandNode",e[e.interaction=4]="interaction",e[e.GroupingInProgress=8]="GroupingInProgress",e[e.GroupClipboardInProcess=16]="GroupClipboardInProcess",e[e.ClearObject=32]="ClearObject",e}({}),Cc=function(e){return e[e.Visible=1]="Visible",e[e.Hidden=2]="Hidden",e[e.Hover=4]="Hover",e[e.Connect=8]="Connect",e}({}),xc=function(e){return e[e.None=0]="None",e[e.ShowHorizontalLines=1]="ShowHorizontalLines",e[e.ShowVerticalLines=2]="ShowVerticalLines",e[e.ShowLines=3]="ShowLines",e[e.SnapToHorizontalLines=4]="SnapToHorizontalLines",e[e.SnapToVerticalLines=8]="SnapToVerticalLines",e[e.SnapToLines=12]="SnapToLines",e[e.SnapToObject=16]="SnapToObject",e[e.All=31]="All",e}({}),Sc=function(e){return e[e.None=1]="None",e[e.ConnectorSourceThumb=2]="ConnectorSourceThumb",e[e.ConnectorTargetThumb=4]="ConnectorTargetThumb",e[e.ResizeSouthEast=8]="ResizeSouthEast",e[e.ResizeSouthWest=16]="ResizeSouthWest",e[e.ResizeNorthEast=32]="ResizeNorthEast",e[e.ResizeNorthWest=64]="ResizeNorthWest",e[e.ResizeEast=128]="ResizeEast",e[e.ResizeWest=256]="ResizeWest",e[e.ResizeSouth=512]="ResizeSouth",e[e.ResizeNorth=1024]="ResizeNorth",e[e.Rotate=2048]="Rotate",e[e.UserHandle=4096]="UserHandle",e[e.ToolTip=8192]="ToolTip",e[e.ResizeAll=2046]="ResizeAll",e[e.All=16382]="All",e}({});!function(e){e.SamePoint="SamePoint",e.DifferentPoint="DifferentPoint"}(ac||(ac={})),function(e){e.Linear="Linear",e.Nonlinear="Nonlinear"}(lc||(lc={}));var Tc=function(e){return e[e.None=1]="None",e[e.Select=2]="Select",e[e.Delete=4]="Delete",e[e.Drag=8]="Drag",e[e.DragSourceEnd=16]="DragSourceEnd",e[e.DragTargetEnd=32]="DragTargetEnd",e[e.DragSegmentThumb=64]="DragSegmentThumb",e[e.AllowDrop=128]="AllowDrop",e[e.Bridging=256]="Bridging",e[e.BridgeObstacle=512]="BridgeObstacle",e[e.InheritBridging=1024]="InheritBridging",e[e.PointerEvents=2048]="PointerEvents",e[e.Tooltip=4096]="Tooltip",e[e.InheritTooltip=8192]="InheritTooltip",e[e.Interaction=4218]="Interaction",e[e.ReadOnly=16384]="ReadOnly",e[e.LineRouting=32768]="LineRouting",e[e.InheritLineRouting=65536]="InheritLineRouting",e[e.ConnectToNearByNode=131072]="ConnectToNearByNode",e[e.ConnectToNearByPort=262144]="ConnectToNearByPort",e[e.ConnectToNearByElement=393216]="ConnectToNearByElement",e[e.Default=470590]="Default",e}({}),Ec=function(e){return e[e.ReadOnly=2]="ReadOnly",e[e.InheritReadOnly=4]="InheritReadOnly",e[e.Select=8]="Select",e[e.Drag=16]="Drag",e[e.Resize=32]="Resize",e[e.Rotate=64]="Rotate",e[e.Interaction=120]="Interaction",e[e.None=0]="None",e}({}),_c=function(e){return e[e.None=0]="None",e[e.Select=2]="Select",e[e.Drag=4]="Drag",e[e.Rotate=8]="Rotate",e[e.Shadow=16]="Shadow",e[e.PointerEvents=32]="PointerEvents",e[e.Delete=64]="Delete",e[e.InConnect=128]="InConnect",e[e.OutConnect=256]="OutConnect",e[e.Individual=512]="Individual",e[e.Expandable=1024]="Expandable",e[e.AllowDrop=2048]="AllowDrop",e[e.Inherit=78]="Inherit",e[e.ResizeNorthEast=4096]="ResizeNorthEast",e[e.ResizeEast=8192]="ResizeEast",e[e.ResizeSouthEast=16384]="ResizeSouthEast",e[e.ResizeSouth=32768]="ResizeSouth",e[e.ResizeSouthWest=65536]="ResizeSouthWest",e[e.ResizeWest=131072]="ResizeWest",e[e.ResizeNorthWest=262144]="ResizeNorthWest",e[e.ResizeNorth=524288]="ResizeNorth",e[e.Resize=1044480]="Resize",e[e.AspectRatio=1048576]="AspectRatio",e[e.Tooltip=2097152]="Tooltip",e[e.InheritTooltip=4194304]="InheritTooltip",e[e.ReadOnly=8388608]="ReadOnly",e[e.HideThumbs=16777216]="HideThumbs",e[e.AllowMovingOutsideLane=33554432]="AllowMovingOutsideLane",e[e.Default=5240814]="Default",e}({}),kc=function(e){return e[e.None=0]="None",e[e.ElementIsPort=2]="ElementIsPort",e[e.ElementIsGroup=4]="ElementIsGroup",e[e.HorizontalLaneHeader=8]="HorizontalLaneHeader",e}({}),Dc=function(e){return e[e.Rotate=2]="Rotate",e[e.ConnectorSource=4]="ConnectorSource",e[e.ConnectorTarget=8]="ConnectorTarget",e[e.ResizeNorthEast=16]="ResizeNorthEast",e[e.ResizeEast=32]="ResizeEast",e[e.ResizeSouthEast=64]="ResizeSouthEast",e[e.ResizeSouth=128]="ResizeSouth",e[e.ResizeSouthWest=256]="ResizeSouthWest",e[e.ResizeWest=512]="ResizeWest",e[e.ResizeNorthWest=1024]="ResizeNorthWest",e[e.ResizeNorth=2048]="ResizeNorth",e[e.Default=4094]="Default",e}({}),Ac=function(e){return e[e.None=1]="None",e[e.Bridging=2]="Bridging",e[e.UndoRedo=4]="UndoRedo",e[e.Tooltip=8]="Tooltip",e[e.UserInteraction=16]="UserInteraction",e[e.ApiUpdate=32]="ApiUpdate",e[e.PageEditable=48]="PageEditable",e[e.Zoom=64]="Zoom",e[e.PanX=128]="PanX",e[e.PanY=256]="PanY",e[e.Pan=384]="Pan",e[e.ZoomTextEdit=512]="ZoomTextEdit",e[e.Virtualization=1024]="Virtualization",e[e.LineRouting=2048]="LineRouting",e[e.Default=500]="Default",e}({}),Oc=function(e){return e[e.None=0]="None",e[e.SingleSelect=1]="SingleSelect",e[e.MultipleSelect=2]="MultipleSelect",e[e.ZoomPan=4]="ZoomPan",e[e.DrawOnce=8]="DrawOnce",e[e.ContinuousDraw=16]="ContinuousDraw",e[e.Default=3]="Default",e}({}),Ic=function(e){return e[e.Self=1]="Self",e[e.Parent=2]="Parent",e}({}),Pc=function(e){return e[e.None=0]="None",e[e.Control=1]="Control",e[e.Meta=1]="Meta",e[e.Alt=2]="Alt",e[e.Shift=4]="Shift",e}({}),Rc=function(e){return e[e.None=null]="None",e[e.Number0=0]="Number0",e[e.Number1=1]="Number1",e[e.Number2=2]="Number2",e[e.Number3=3]="Number3",e[e.Number4=4]="Number4",e[e.Number5=5]="Number5",e[e.Number6=6]="Number6",e[e.Number7=7]="Number7",e[e.Number8=8]="Number8",e[e.Number9=9]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Delete=46]="Delete",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.BackSpace=8]="BackSpace",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.Star=56]="Star",e[e.Plus=187]="Plus",e[e.Minus=189]="Minus",e}({}),Mc=function(e){return e[e.Render=2]="Render",e[e.PublicMethod=4]="PublicMethod",e[e.ToolAction=8]="ToolAction",e[e.UndoRedo=16]="UndoRedo",e[e.TextEdit=32]="TextEdit",e[e.Group=64]="Group",e[e.Clear=128]="Clear",e[e.PreventClearSelection=256]="PreventClearSelection",e[e.Interactions=512]="Interactions",e[e.PreventHistory=1024]="PreventHistory",e[e.PreventIconsUpdate=2048]="PreventIconsUpdate",e[e.PreventCollectionChangeOnDragOver=4096]="PreventCollectionChangeOnDragOver",e[e.PreventZIndexOnDragging=8192]="PreventZIndexOnDragging",e[e.isGroupDragging=16384]="isGroupDragging",e[e.DragUsingMouse=32768]="DragUsingMouse",e[e.DecoratorPropertyChange=65536]="DecoratorPropertyChange",e[e.PreventLaneContainerUpdate=131072]="PreventLaneContainerUpdate",e}({}),Nc=function(e){return e[e.None=2]="None",e[e.DrawSelectorBorder=4]="DrawSelectorBorder",e[e.PreventRenderSelector=8]="PreventRenderSelector",e}({}),Lc=function(e){return e[e.None=0]="None",e[e.PreventDrag=2]="PreventDrag",e[e.PreventScale=4]="PreventScale",e[e.PreventDataInit=8]="PreventDataInit",e[e.hScrollbarMoved=16]="hScrollbarMoved",e[e.vScrollbarMoved=32]="vScrollbarMoved",e[e.AnimationClick=64]="AnimationClick",e[e.EnableGroupAction=128]="EnableGroupAction",e[e.PanInProgress=256]="PanInProgress",e[e.OverViewAction=512]="OverViewAction",e}({}),Hc=function(e){return e[e.None=0]="None",e[e.PropertyChange=1024]="PropertyChange",e[e.Interaction=2048]="Interaction",e}({}),Bc=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e}({}),jc=function(e){return e[e.collectionChange=0]="collectionChange",e[e.rotateChange=1]="rotateChange",e[e.positionChange=2]="positionChange",e[e.propertyChange=3]="propertyChange",e[e.selectionChange=4]="selectionChange",e[e.sizeChange=5]="sizeChange",e[e.drop=6]="drop",e[e.sourcePointChange=7]="sourcePointChange",e[e.targetPointChange=8]="targetPointChange",e[e.connectionChange=9]="connectionChange",e[e.animationComplete=10]="animationComplete",e[e.click=11]="click",e[e.doubleClick=12]="doubleClick",e[e.scrollChange=13]="scrollChange",e[e.dragEnter=14]="dragEnter",e[e.dragLeave=15]="dragLeave",e[e.dragOver=16]="dragOver",e[e.textEdit=17]="textEdit",e[e.paletteSelectionChange=18]="paletteSelectionChange",e[e.historyChange=19]="historyChange",e[e.mouseEnter=20]="mouseEnter",e[e.mouseLeave=21]="mouseLeave",e[e.mouseOver=22]="mouseOver",e[e.expandStateChange=23]="expandStateChange",e[e.segmentCollectionChange=24]="segmentCollectionChange",e[e.commandExecute=25]="commandExecute",e[e.historyStateChange=26]="historyStateChange",e[e.onUserHandleMouseDown=27]="onUserHandleMouseDown",e[e.onUserHandleMouseUp=28]="onUserHandleMouseUp",e[e.onUserHandleMouseEnter=29]="onUserHandleMouseEnter",e[e.onUserHandleMouseLeave=30]="onUserHandleMouseLeave",e[e.onImageLoad=31]="onImageLoad",e[e.onDoBindingInit=32]="onDoBindingInit",e[e.keyUp=33]="keyUp",e[e.keyDown=34]="keyDown",e[e.fixedUserHandleClick=35]="fixedUserHandleClick",e}({}),zc=function(e){return e[e.None=1]="None",e[e.Drag=2]="Drag",e[e.Draw=4]="Draw",e[e.InConnect=8]="InConnect",e[e.OutConnect=16]="OutConnect",e[e.Default=24]="Default",e}({}),Uc=function(){function e(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=Ic.Self|Ic.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new Bd,this.actualSize=new Bd,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new Zd(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=kc.None,this.inversedAlignment=!0,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return e.prototype.setOffsetWithRespectToBounds=function(e,t,n){this.unitMode=n,this.position={x:e,y:t}},e.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(e.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!0,configurable:!0}),e.prototype.measure=function(e,t,n){var i=void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom;return this.id&&0===i&&this.elementActions&kc.HorizontalLaneHeader&&(i=this.actualSize.height),this.desiredSize=new Bd(void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,i),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},e.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},e.prototype.updateBounds=function(){this.bounds=Wy(this)},e.prototype.validateDesiredSize=function(e,t){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(e.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new Bd).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},e}(),Fc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=new dc(0,0,0,0),t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return Object(O.__extends)(t,e),t.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},t.prototype.measure=function(e,n,i){this.desiredBounds=void 0;var o,r,a=void 0;if(this.hasChildren()){for(var l=0;l<this.children.length;l++)"Stretch"!==(o=this.children[l]).horizontalAlignment||e.width||(e.width=o.bounds.width),"Stretch"!==o.verticalAlignment||e.height||(e.height=o.bounds.height),(this.measureChildren||"Stretch"===o.horizontalAlignment||"Stretch"===o.verticalAlignment||o instanceof t&&void 0!==o.measureChildren)&&o.measure(e,n,i),r=this.GetChildrenBounds(o),"Stretch"!==o.horizontalAlignment&&"Stretch"!==o.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=r:this.desiredBounds.uniteRect(r):!this.actualSize||this.actualSize.width||this.actualSize.height||o.preventContainer||"Stretch"!==o.horizontalAlignment||"Stretch"!==o.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=o.bounds:this.desiredBounds.uniteRect(o.bounds));if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var s=ob(this.rotateAngle,void 0,void 0,{x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y});this.desiredBounds.x=s.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=s.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(a=new Bd(this.desiredBounds.width,this.desiredBounds.height))}return a=this.validateDesiredSize(a,e),this.stretchChildren(a),this.desiredSize=a,a},t.prototype.arrange=function(e){var n,i=this.desiredBounds;if(i&&(this.offsetX=i.x+i.width*this.pivot.x,this.offsetY=i.y+i.height*this.pivot.y,this.hasChildren()))for(var o=0;o<this.children.length;o++){var r=!1;"Stretch"===(n=this.children[o]).horizontalAlignment&&(n.offsetX=this.offsetX,n.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&kc.ElementIsGroup&&(n.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-n.parentTransform:n.parentTransform),r=!0),"Stretch"===n.verticalAlignment&&(n.offsetY=this.offsetY,n.parentTransform=this.parentTransform+this.rotateAngle,r=!0),(r||this.measureChildren||n instanceof t&&void 0!==n.measureChildren)&&n.arrange(n.desiredSize)}return this.actualSize=e,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,e},t.prototype.stretchChildren=function(e){if(this.hasChildren())for(var n=0,i=this.children;n<i.length;n++){var o=i[n];"Stretch"!==o.horizontalAlignment&&void 0!==o.desiredSize.width||(o.desiredSize.width=e.width-o.margin.left-o.margin.right),"Stretch"!==o.verticalAlignment&&void 0!==o.desiredSize.height||(o.desiredSize.height=e.height-o.margin.top-o.margin.bottom),o instanceof t&&o.stretchChildren(o.desiredSize)}},t.prototype.applyPadding=function(e){e.width+=this.padding.left+this.padding.right,e.height+=this.padding.top+this.padding.bottom},t.prototype.findChildOffsetFromCenter=function(e,t){var n=function(t,n){return{x:t.x+e.desiredSize.width*e.pivot.x,y:t.y+e.desiredSize.height*e.pivot.y}}({x:t.x-e.desiredSize.width/2,y:t.y-e.desiredSize.height/2});n=ob(e.rotateAngle,t.x,t.y,n),n=ob(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,n),e.offsetX=n.x,e.offsetY=n.y},t.prototype.GetChildrenBounds=function(e){var t;t=e.desiredSize.clone();var n=e.offsetX-t.width*e.pivot.x,i=e.offsetY-t.height*e.pivot.y,o=n+t.width,r=i+t.height,a={x:n,y:i},l={x:o,y:i},s={x:n,y:r},d={x:o,y:r};return a=ob(e.rotateAngle,e.offsetX,e.offsetY,a),l=ob(e.rotateAngle,e.offsetX,e.offsetY,l),s=ob(e.rotateAngle,e.offsetX,e.offsetY,s),d=ob(e.rotateAngle,e.offsetX,e.offsetY,d),0!==this.rotateAngle&&(a=ob(-this.rotateAngle,void 0,void 0,a),l=ob(-this.rotateAngle,void 0,void 0,l),s=ob(-this.rotateAngle,void 0,void 0,s),d=ob(-this.rotateAngle,void 0,void 0,d)),Zd.toBounds([a,l,s,d])},t}(Uc),Gc=function(e){function t(){var t=e.call(this)||this;return t.textContent="",t.canMeasure=!0,t.isLaneOrientation=!1,t.canConsiderBounds=!0,t.hyperlink={color:"blue"},t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return Object(O.__extends)(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.textContent},set:function(e){this.textContent!==e&&(this.textContent=e,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.textNodes},set:function(e){this.textNodes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(e){this.textWrapBounds=e},enumerable:!0,configurable:!0}),t.prototype.refreshTextElement=function(){this.isDirt=!0},t.prototype.measure=function(e){var t,n,i,o,r,a,l;return t=this.isDirt&&this.canMeasure?(n=this,i=this.isLaneOrientation?e.height:this.width||e.width,a=new Bd(0,0),l=function(e,t){var n={fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray,opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,width:t||e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5};return n.fontSize=e.style.fontSize,n.fontFamily=e.style.fontFamily,n.textOverflow=e.style.textOverflow,n.textDecoration=e.style.textDecoration,n.doWrap=e.doWrap,n.whiteSpace=nb(e.style.whiteSpace,e.style.textWrapping),n.content=e.content,n.textWrapping=e.style.textWrapping,n.breakWord=Qy(e.style.textWrapping),n.textAlign=Ky(e.style.textAlign),n.color=e.style.color,n.italic=e.style.italic,n.bold=e.style.bold,n.dashArray="",n.strokeWidth=0,n.fill="",n}(n,i),n.childNodes=o=function(e,t,n){var i,o,r=[],a=0,l=e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(i="",i+=l[0],a=0;a<l.length;a++)if((o=$y(i,e))>=e.width&&i.length>0)r[r.length]={text:i,x:0,dy:0,width:o},i="";else{(i+=l[a+1]||"").indexOf("\n")>-1&&(r[r.length]={text:i,x:0,dy:0,width:$y(i,e)},i="");var s=$y(i,e);Math.ceil(s)+2>=e.width&&i.length>0&&(r[r.length]={text:i,x:0,dy:0,width:s},i=""),a===l.length-1&&i.length>0&&(r[r.length]={text:i,x:0,dy:0,width:s},i="")}else r=function(e,t,n){var i,o,r,a,l=[],s="",d=0,c=0,u="nowrap"!==e.whiteSpace,h=e.content.split("\n");for(d=0;d<h.length;d++)for(i="NoWrap"!==e.textWrapping?h[d].split(" "):"NoWrap"===e.textWrapping?[h[d]]:h,c=0;c<i.length;c++){var p=$y(o=(s+=((0!==c||1===i.length)&&u&&s.length>0?" ":"")+i[c])+" "+(i[c+1]||""),e);Math.floor(p)>(n||e.width)-2&&s.length>0?(l[l.length]={text:s,x:0,dy:0,width:o===s?p:s===a?r:$y(s,e)},s=""):c===i.length-1&&(l[l.length]={text:s,x:0,dy:0,width:p},s=""),a=o,r=p}return l}(e,0,n);else r[r.length]={text:l,x:0,dy:0,width:$y(l,e)};return r}(l,0,n.isLaneOrientation?i:void 0),n.wrapBounds=r=function(e,t){var n,i,o={x:0,width:0},r=0;for(r=0;r<t.length;r++)i=n=t[r].width,n="left"===e.textAlign?0:"center"===e.textAlign?n>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-n/2:"right"===e.textAlign?-n:t.length>1?0:-n/2,t[r].dy=1.2*e.fontSize,t[r].x=n,o?(o.x=Math.min(o.x,n),o.width=Math.max(o.width,i)):o={x:n,width:i};return o}(l,o),a.width=r.width,n.wrapBounds.width>=i&&"Wrap"!==l.textOverflow&&(a.width=i),a.height=o.length*n.style.fontSize*1.2,a):this.desiredSize,this.desiredSize=void 0===this.width||void 0===this.height?new Bd(t.width,t.height):new Bd(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return(e.width!==this.actualSize.width||e.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=e,this.updateBounds(),this.isDirt=!1,this.actualSize},t}(Uc),qc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.measureChildren=void 0,t}return Object(O.__extends)(t,e),t.prototype.measure=function(t,n,i){var o=void 0,r=void 0;if(this.hasChildren()){for(var a=0,l=this.children;a<l.length;a++){var s=l[a];s instanceof Gc?s.canMeasure&&(t.width=t.width||this.maxWidth||this.minWidth,s.measure(t)):s instanceof Gc||s.measure(t,n,i);var d=s.desiredSize.clone();0!==s.rotateAngle&&(d=ib(d,s.rotateAngle));var c=new Zd(s.margin.left,s.margin.top,d.width+s.margin.right,d.height+s.margin.bottom);s.float&&void 0!==s.getAbsolutePosition(d)||s instanceof Gc&&!(s instanceof Gc&&s.canConsiderBounds)||(void 0===r?r=c:r.uniteRect(c))}var u,h;r&&(u=Math.max(r.left,0),h=Math.max(r.top,0),o=new Bd(r.width+u,r.height+h))}return o=e.prototype.validateDesiredSize.call(this,o,t),e.prototype.stretchChildren.call(this,o),o.width+=this.padding.left+this.padding.right,o.height+=this.padding.top+this.padding.bottom,this.desiredSize=o,o},t.prototype.arrange=function(t,n){if(this.outerBounds=new Zd,this.hasChildren()){var i,o;i=this.offsetY-t.height*this.pivot.y+this.padding.top,o=this.offsetX-t.width*this.pivot.x+this.padding.left;for(var r=0,a=this.children;r<a.length;r++){var l=a[r];if(0!=(l.transform&Ic.Parent)){l.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&kc.ElementIsGroup)&&(l.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-l.parentTransform:l.parentTransform);var s,d=l.desiredSize.clone(),c=o,u=i;if("Point"===l.relativeMode){var h=l.getAbsolutePosition(t);void 0!==h&&(c+=h.x,u+=h.y)}s="Object"===l.relativeMode?this.alignChildBasedOnParent(l,d,t,c,u):this.alignChildBasedOnaPoint(l,c,u),e.prototype.findChildOffsetFromCenter.call(this,l,{x:s.x+d.width/2,y:s.y+d.height/2})}!n||"Stretch"!==l.horizontalAlignment&&"Stretch"!==l.verticalAlignment?l instanceof Gc&&l.canMeasure?(l.arrange(l.desiredSize),this.outerBounds.uniteRect(l.outerBounds)):l instanceof Gc||(l.arrange(l.desiredSize),this.outerBounds.uniteRect(l.outerBounds)):l.arrange(t)}}return this.actualSize=t,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),t},t.prototype.alignChildBasedOnParent=function(e,t,n,i,o){switch(e.horizontalAlignment){case"Auto":case"Left":i+=e.margin.left;break;case"Right":i+=n.width-t.width-e.margin.right;break;case"Stretch":case"Center":i+=n.width/2-t.width/2}switch(e.verticalAlignment){case"Auto":case"Top":o+=e.margin.top;break;case"Bottom":o+=n.height-t.height-e.margin.bottom;break;case"Stretch":case"Center":o+=n.height/2-t.height/2}return{x:i,y:o}},t.prototype.alignChildBasedOnaPoint=function(e,t,n){switch(t+=e.margin.left-e.margin.right,n+=e.margin.top-e.margin.bottom,e.horizontalAlignment){case"Auto":case"Left":t=e.inversedAlignment?t:t-e.desiredSize.width;break;case"Stretch":case"Center":t-=e.desiredSize.width*e.pivot.x;break;case"Right":t=e.inversedAlignment?t-e.desiredSize.width:t}switch(e.verticalAlignment){case"Auto":case"Top":n=e.inversedAlignment?n:n-e.desiredSize.height;break;case"Stretch":case"Center":n-=e.desiredSize.height*e.pivot.y;break;case"Bottom":n=e.inversedAlignment?n-e.desiredSize.height:n}return{x:t,y:n}},t}(Fc);function Vc(e){return Wc[e.toString()]}var Wc={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"},Yc=function(e){function t(){var t=e.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new Zd,t}return Object(O.__extends)(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.pathData},set:function(e){this.pathData!==e&&(this.pathData=e,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.getPoints=function(){var e=this;return this.pointTimer||(this.pointTimer=setTimeout(function(){e.points=null,e.pointTimer=null},200)),this.points=this.points||function(e){var t,n,i=[];window.measureElement.style.visibility="visible";var o=hy(window.measureElement.children[2])[0];o.setAttributeNS(null,"d",e.data);var r=gy(e,e.absoluteBounds);o.setAttributeNS(null,"d",r);var a=o.getTotalLength();for(n=0;n<=a;n+=10)t=o.getPointAtLength(n),i.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",i}(this),function(e,t){for(var n=[],i=0,o=t;i<o.length;i++){var r=o[i],a={x:e.offsetX-e.actualSize.width*e.pivot.x+r.x,y:e.offsetY-e.actualSize.height*e.pivot.y+r.y},l=void 0,s=e.rotateAngle+e.parentTransform;s&&ec(l=Qd(),s,e.offsetX,e.offsetY),l&&(a=$d(l,a)),n.push(a)}return n}(this,this.points)},t.prototype.measure=function(e){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new Zd(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=py(this.data?this.data:"")),this.desiredSize=void 0===this.width?new Bd(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?new Bd(this.width||this.absoluteBounds.width,this.absoluteBounds.height):new Bd(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.canMeasurePath=!1,this.desiredSize},t.prototype.arrange=function(e){return(this.isDirt||this.actualSize.width!==e.width||this.actualSize.height!==e.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,e),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},t.prototype.updatePath=function(e,t,n){var i,o=!1,r=-t.x,a=-t.y,l=[];return n.width===t.width&&n.height===t.height||(r=n.width/Number(t.width?t.width:1),a=n.height/Number(t.height?t.height:1),o=!0),l=Wd(l=zd(e)),i=(o||this.isDirt)&&this.transformPath?Gd(l,r,a,o,t.x,t.y,0,0):Yd(l),o=!1,i},t}(Uc),Xc=function(e){function t(){var t=e.call(this)||this;return t.imageSource="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return Object(O.__extends)(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this.imageSource},set:function(e){this.imageSource=e,this.isDirt=!0},enumerable:!0,configurable:!0}),t.prototype.measure=function(e,t,n){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(e,t,n,i){window.measureElement.style.visibility="visible";var o=window.measureElement.children[1];o.setAttribute("src",e);var r=o.getBoundingClientRect();t=new Bd(r.width,r.height),window.measureElement.style.visibility="hidden";var a=document.createElement("img");return a.setAttribute("src",e),By(a,{id:n+"sf-imageNode",style:"display: none;"}),document.body.appendChild(a),a.onload=function(e){var t=e.currentTarget;i&&i(n,{width:t.width,height:t.height})},t}(this.source,this.contentSize,t,n),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new Bd(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new Bd(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(Uc),Zc=function(e){function t(t,n){var i=e.call(this)||this;return i.data="",i.nodeId="",i.diagramId="",i.scale="Stretch",i.diagramId=n,i.nodeId=t,i}return Object(O.__extends)(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.canReset||(this.canReset=!0,this.template=Ny(this,!1),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){if(this.isDirt){var t=function(e){window.measureElement.style.visibility="visible";var t=window.measureElement.children[2];t.appendChild(e);var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),o=n;return o.x=n.left-i.left,o.y=n.top-i.top,t.removeChild(e),window.measureElement.style.visibility="hidden",o}(this.template);this.contentSize=new Bd,this.contentSize.width=t.width,this.contentSize.height=t.height,this.templatePosition={x:t.x,y:t.y},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var n=function(e){window.measureElement.style.visibility="visible";var t=window.measureElement.children[2];t.appendChild(e);var n=t.getBoundingClientRect();return t.removeChild(e),window.measureElement.style.visibility="hidden",n}(this.template);this.desiredSize=new Bd(n.width,n.height)}else this.desiredSize=new Bd(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new Bd(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(Uc),Jc=function(e){function t(t,n,i,o){var r=e.call(this,t,n,i,o)||this;return r.inEdges=[],r.outEdges=[],r}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"horizontalAlignment",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"verticalAlignment",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks(12)],t.prototype,"width",void 0),Object(O.__decorate)([Ks(12)],t.prototype,"height",void 0),Object(O.__decorate)([Qs({},vc)],t.prototype,"style",void 0),Object(O.__decorate)([Ks("Square")],t.prototype,"shape",void 0),Object(O.__decorate)([Ks(Cc.Connect)],t.prototype,"visibility",void 0),Object(O.__decorate)([Ks("")],t.prototype,"pathData",void 0),Object(O.__decorate)([Ks(zc.Default)],t.prototype,"constraints",void 0),Object(O.__decorate)([Ks()],t.prototype,"addInfo",void 0),Object(O.__decorate)([Ks()],t.prototype,"outEdges",void 0),Object(O.__decorate)([Ks()],t.prototype,"inEdges",void 0),t}(fd),Kc=function(e){function t(t,n,i,o){return e.call(this,t,n,i,o)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"PointPort"},Object(O.__decorate)([Qs({x:.5,y:.5},jd)],t.prototype,"offset",void 0),t}(Jc),Qc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("blue")],t.prototype,"color",void 0),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks("")],t.prototype,"link",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"textDecoration",void 0),t}(fd),$c=function(e){function t(t,n,i,o){var r=e.call(this,t,n,i,o)||this;return i.id||(r.id=t.parentObj&&t.parentObj.propName&&"phases"===t.parentObj.propName?t.parentObj.id:Fy()),r}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks(void 0)],t.prototype,"template",void 0),Object(O.__decorate)([Ks("String")],t.prototype,"annotationType",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"visibility",void 0),Object(O.__decorate)([Ks(Ec.InheritReadOnly)],t.prototype,"constraints",void 0),Object(O.__decorate)([Qs(void 0,Qc)],t.prototype,"hyperlink",void 0),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"rotateAngle",void 0),Object(O.__decorate)([Qs({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},bc)],t.prototype,"style",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"horizontalAlignment",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"verticalAlignment",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Qs({top:void 0,bottom:void 0,left:void 0,right:void 0},cc)],t.prototype,"dragLimit",void 0),Object(O.__decorate)([Ks("Shape")],t.prototype,"type",void 0),Object(O.__decorate)([Ks()],t.prototype,"addInfo",void 0),t}(fd),eu=function(e){function t(t,n,i,o){return e.call(this,t,n,i,o)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"ShapeAnnotation"},Object(O.__decorate)([Qs({x:.5,y:.5},jd)],t.prototype,"offset",void 0),t}($c),tu=function(e){function t(t,n,i,o){return e.call(this,t,n,i,o)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"PathAnnotation"},Object(O.__decorate)([Ks(.5)],t.prototype,"offset",void 0),Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"displacement",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"alignment",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"segmentAngle",void 0),t}($c);function nu(e){return iu[e.toString()]}var iu={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},ou={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"};function ru(e){return cu[e.toString()]}var au,lu,su,du,cu={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"};function uu(e,t,n){var i;return i=function(e,t,n,i,o){var r,a,l=e.sourceWrapper,s=e.targetWrapper,d=e.sourcePortWrapper,c=e.targetPortWrapper,u=[],h={corners:void 0,point:t,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}},p={corners:void 0,point:n,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}};if(void 0!==l&&void 0!==s&&(r=Vy(l),a=Vy(s),h.corners=l.corners,p.corners=s.corners),void 0!==d&&(h.direction=qu({x:d.offsetX,y:d.offsetY},r,l.bounds)),void 0!==c&&(p.direction=qu({x:c.offsetX,y:c.offsetY},a,s.bounds)),void 0!==l&&void 0!==s)return void 0!==h.direction&&void 0!==p.direction||(i?function(e,t,n){"LeftToRight"===n?(e.direction=e.direction?e.direction:"Right",t.direction=t.direction?t.direction:"Left"):"RightToLeft"===n?(e.direction=e.direction?e.direction:"Left",t.direction=t.direction?t.direction:"Right"):"TopToBottom"===n?(e.direction=e.direction?e.direction:"Bottom",t.direction=t.direction?t.direction:"Top"):"BottomToTop"===n&&(e.direction=e.direction?e.direction:"Top",t.direction=t.direction?t.direction:"Bottom")}(h,p,i):h.corners.top>p.corners.bottom&&Math.abs(h.corners.top-p.corners.bottom)>h.margin.top+h.margin.bottom?(h.direction=h.direction?h.direction:"Top",p.direction=p.direction?p.direction:"Bottom"):h.corners.bottom<p.corners.top&&Math.abs(h.corners.bottom-p.corners.top)>h.margin.bottom+h.margin.top?(h.direction=h.direction?h.direction:"Bottom",p.direction=p.direction?p.direction:"Top"):h.corners.right<p.corners.left&&Math.abs(h.corners.right-p.corners.left)>h.margin.right+h.margin.left||h.corners.right+13<p.corners.left||p.corners.right>=h.corners.left-13&&h.corners.left>p.corners.left?(h.direction=h.direction?h.direction:"Right",p.direction=p.direction?p.direction:"Left"):h.corners.left>p.corners.right&&Math.abs(h.corners.left-p.corners.right)>h.margin.left+h.margin.right||p.corners.right+13<h.corners.left||h.corners.right>=p.corners.left-13&&h.corners.left<p.corners.left?(h.direction=h.direction?h.direction:"Left",p.direction=p.direction?p.direction:"Right"):l.id!==s.id&&!r.equals(r,a)&&a.containsPoint(r.topCenter,h.margin.top)?(h.direction=h.direction?h.direction:"Bottom",p.direction=p.direction?p.direction:"Top"):(h.direction=h.direction?h.direction:"Top",p.direction=p.direction?p.direction:"Bottom")),function(e,t,n,i,o,r){var a,l=e.sourceWrapper,s=e.targetWrapper,d=e.sourcePortWrapper,c=e.targetPortWrapper,u=[],h=l.corners,p=s.corners,f={corners:h,point:i,direction:t,margin:{left:5,right:5,bottom:5,top:5}},g={corners:p,point:o,direction:n,margin:{left:5,right:5,bottom:5,top:5}},m=Cu(l,h,e.sourceWrapper.bounds),v=Cu(s,p,e.targetWrapper.bounds),y=!1;if(e.sourceWrapper&&e.targetWrapper&&(y=function(t,n,i){for(var o=wu(e.sourceWrapper,i.sourcePadding),r=wu(n,i.targetPadding),a=0;a<o.length-1;a++)for(var l=o[a],s=0;s<r.length-1;s++)if(Rm(l,r[s]).enabled)return!0;return!1}(0,e.targetWrapper,e)),void 0!==d){switch(f.point={x:d.offsetX,y:d.offsetY},f.direction){case"Bottom":case"Top":f.point.y=f.point.y;break;case"Left":case"Right":f.point.x=f.point.x}e.sourcePadding&&!y&&(c&&(g.point={x:c.offsetX,y:c.offsetY}),f.point=bu(e,f,g,!1))}else"Orthogonal"===e.type?(e.segments&&e.segments.length>0&&e.segments[0].direction&&(f.direction=e.segments[0].direction),f.point=Iu(m,f.direction),a=Iu(m,Wu(f.direction)),f.point=Ru(e,0,f.point,a,!1)):f.point=l.corners.center;if(void 0!==c){switch(g.point={x:c.offsetX,y:c.offsetY},g.direction){case"Bottom":case"Top":g.point.y=g.point.y;break;case"Left":case"Right":g.point.x=g.point.x}e.targetPadding&&!y&&(g.point=bu(e,f,g,!0))}else"Orthogonal"===e.type?(g.point=Iu(v,g.direction),a=Iu(v,Wu(g.direction)),g.point=Ru(e,0,g.point,a,!0)):g.point=s.corners.center;if("Orthogonal"!==e.type){var b=void 0,w=void 0;if(Tu(e),void 0===e.sourcePortWrapper){f.point=f.corners.center,e.segments&&e.segments.length>0&&(b=jd.isEmptyPoint((w=e.segments[0]).point)?void 0:w);var C=void 0!==b?b.point:g.point;if("Bezier"===e.type&&e.segments.length>0&&e.segments[0].vector1.angle&&e.segments[0].vector1.distance){var x=Math.max(f.corners.width,f.corners.height);C=jd.transform(f.point,e.segments[0].vector1.angle,x/2)}f.point=y?e.sourceWrapper.bounds.center:Ru(e,0,f.point,C,!1)}if(void 0===e.targetPortWrapper){g.point=g.corners.center,e.segments&&e.segments.length>1&&(b=jd.isEmptyPoint((w=e.segments[e.segments.length-2]).point)?void 0:w);var S=b?b.point:f.point;"Bezier"===e.type&&e.segments.length>0&&e.segments[e.segments.length-1].vector2.angle&&e.segments[e.segments.length-1].vector2.distance&&(x=Math.max(f.corners.width,f.corners.height),S=jd.transform(g.point,e.segments[0].vector2.angle,x/2)),g.point=y?e.targetWrapper.bounds.center:Ru(e,0,S,g.point,!0)}u=xu(e,f,g)}else"Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].direction?u=function(e,t,n,i,o,r,a){var l,s,d,c;Tu(e);for(var u=0;u<e.segments.length;u++){if(s=e.segments[u],i&&t.direction===Wu(s.direction)&&(s.direction=t.direction),u>0&&e.segments[u-1].direction===s.direction)u=Eu(e,u,t);else if(s.direction)t.point=hu(t,e.segments[u]);else{var h=e.segments[u-1];t.point=h.points[h.points.length-1]}if(u===e.segments.length-1)if(ku(e,t),yu(l=void 0===o?_u(e,t,n):mu(e,t,n),e),s.points=[],l.length>=2)for(d=0;d<l.length;d++)s.points.push(l[d]);else c=u;if(void 0!==c&&(c===e.segments.length-1&&(e.segments[c-1].direction=null,e.segments[c-1].length=null),e.segments.splice(c,1)),i&&0===u){var p=vu(e,i,r);p&&(t.point=p)}}return Du(e,[])}(e,f,g,d,c,l):(e.segments[0]||(b=new Af(e,"segments",{type:"Orthogonal"},!0),e.segments.push(b)),e.segments[0].points=u=function(e,t,n,i,o){var r,a,l,s,d,c,u,h;return(a=function(e,n){var i=!1;switch(t.direction){case"Left":switch(n){case"Right":case"Bottom":i=!0}break;case"Top":switch(n){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":switch(n){case"Right":i=!0}}return i}(0,n.direction))&&Gu(t,n),"Right"===t.direction&&"Left"===n.direction?r=function(e,t,n,i){var o,r=Math.round(Math.abs(t.point.y-n.point.y)),a=(Math.round(Math.abs(t.point.x-n.point.x)),{x:Math.max(t.point.x,t.corners.right),y:t.point.y}),l={x:Math.min(n.point.x,n.corners.left),y:n.point.y},s=10;i&&(o=l,l=a,a=o);return t.corners.bottom+s<n.corners.top-s||t.corners.top-s>n.corners.bottom+s||(s=0),t.margin={left:s,right:s,top:s,bottom:s},n.margin={left:s,right:s,top:s,bottom:s},0===r&&(t.corners.right<n.corners.left||i&&t.corners.right<n.corners.left)?Bc.One:t.point.x+t.margin.right<n.point.x-n.margin.left?Bc.Three:e.sourceWrapper!==e.targetWrapper&&(Vy(e.sourceWrapper).containsPoint(l)||Vy(e.targetWrapper).containsPoint(a))?Bc.Three:Bc.Five}(e,t,n,a):"Right"===t.direction&&"Right"===n.direction?(d=e.sourcePortWrapper,c=e.targetPortWrapper,u=(l=t).point.x-(s=n).point.x,h=l.point.y-s.point.y,s.margin={left:10,right:10,top:10,bottom:10},l.margin={left:10,right:10,top:10,bottom:10},r=l.corners.right>=s.corners.right?void 0!==d&&(d.offsetY<s.corners.top||d.offsetY>s.corners.bottom)||void 0===d&&l.corners.middleRight.y<s.corners.top?Bc.Three:void 0!==d&&d.offsetY>s.corners.bottom+s.margin.bottom&&l.corners.top>s.corners.bottom||void 0===d&&l.corners.middleRight.y>s.corners.bottom?Bc.Three:void 0!==d&&d.offsetY<s.corners.top&&l.corners.bottom>s.corners.top||void 0===d&&l.corners.middleRight.y>s.corners.bottom?Bc.Three:l.corners.right<s.corners.left||s.corners.right<l.corners.left?Bc.Five:0===u||0===h?Bc.One:Bc.Three:void 0!==c&&l.corners.bottom<c.offsetY||void 0===c&&l.corners.bottom<s.corners.middleRight.y?Bc.Three:void 0!==c&&l.corners.top>c.offsetY||void 0===c&&l.corners.top>s.corners.middleRight.y?Bc.Three:void 0!==c&&(void 0!==d&&d.offsetX<s.corners.left&&d.offsetX!==c.offsetX&&d.offsetY!==c.offsetY&&Math.abs(l.corners.right-s.corners.left)<=20||void 0===d&&l.corners.right<s.corners.left&&l.corners.center.x!==s.corners.center.x&&l.corners.center.y!==s.corners.center.y)?Bc.Three:l.corners.right<s.corners.left?Bc.Five:0===u||0===h?Bc.One:Bc.Three):"Right"===t.direction&&"Top"===n.direction?r=function(e,t,n,i){var o,r=e.targetPortWrapper,a=e.sourcePortWrapper,l={x:Math.max(t.point.x,t.corners.right),y:t.point.y},s={x:n.point.x,y:Math.min(n.point.y,n.corners.top)};(n.margin={left:5,right:5,top:5,bottom:5},t.margin={top:5,bottom:5,left:5,right:5},i)&&(o=a,a=r,r=o);return void 0!==a&&a.offsetY<n.corners.top-n.margin.top||void 0===a&&t.corners.bottom<n.corners.top-n.margin.top?t.corners.bottom<n.corners.top?void 0!==r&&t.corners.right+t.margin.right<r.offsetX||void 0===r&&t.corners.right+t.margin.right<n.corners.topCenter.x?Bc.Two:Bc.Four:void 0!==r&&t.corners.left>r.offsetX||void 0===r&&t.corners.left>n.corners.topCenter.x?Bc.Four:Bc.Two:void 0!==a&&Math.abs(t.corners.right-n.corners.left)<=25&&Math.abs(a.offsetY-n.corners.top)<=25?Bc.Two:void 0!==r&&Math.abs(r.offsetX-t.corners.topCenter.x)>=25&&t.corners.middleRight.y<r.offsetY?Bc.Two:t.corners.right<n.corners.left?Bc.Four:e.sourceWrapper!==e.targetWrapper&&(Vy(e.sourceWrapper).containsPoint(s)||Vy(e.targetWrapper).containsPoint(l))?Bc.Two:Bc.Four}(e,t,n,a):"Right"===t.direction&&"Bottom"===n.direction?r=function(e,t,n,i){t.margin={left:10,right:10,top:10,bottom:10},n.margin={left:10,right:10,top:10,bottom:10};var o,r=e.sourcePortWrapper,a=e.targetPortWrapper;(Math.max(t.point.x,t.corners.right),Math.max(n.point.y,n.corners.bottom),i)&&(o=r,r=a,a=o);return void 0!==r&&r.offsetY>n.corners.bottom+n.margin.bottom||void 0===r&&t.corners.middleRight.y>n.corners.bottom+n.margin.bottom?t.corners.top>n.corners.bottom?void 0!==a&&t.corners.right+t.margin.right<a.offsetX||void 0===a&&t.corners.right+t.margin.right<n.corners.bottomCenter.x?Bc.Two:Bc.Four:void 0!==a&&t.corners.left>a.offsetX||void 0===a&&t.corners.left>n.corners.bottomCenter.x?Bc.Four:Bc.Two:void 0!==r&&Math.abs(t.corners.right-n.corners.left)<=25&&Math.abs(r.offsetY-n.corners.bottom)<=25?Bc.Two:Bc.Four}(e,t,n,a):"Bottom"===t.direction&&"Top"===n.direction?r=function(e,t){var n=e.point.x-t.point.x,i=(Math.max(e.point.y,e.corners.bottom),Math.min(t.point.y,t.corners.top),10);return e.corners.right+i<t.corners.left-i||e.corners.left-i>t.corners.right+i||(i=0),e.margin={left:i,right:i,top:i,bottom:i},t.margin={left:i,right:i,top:i,bottom:i},0===n&&e.corners.bottom<t.corners.top?Bc.One:e.corners.bottom+e.margin.bottom<t.corners.top-t.margin.top?Bc.Three:Bc.Five}(t,n):"Bottom"===t.direction&&"Bottom"===n.direction?(t.margin={left:10,right:10,top:10,bottom:10},n.margin={left:10,right:10,top:10,bottom:10},r=function(t,n,i){var o=e.sourcePortWrapper,r=e.targetPortWrapper,a=Math.round(Math.abs(n.point.x-i.point.x)),l=Math.round(Math.abs(i.point.y-i.point.y));return n.corners.bottom<i.corners.bottom?void 0!==o&&o.offsetX<i.corners.left-i.margin.left||void 0===o&&n.corners.bottomCenter.x<i.corners.left-i.margin.left?Bc.Three:void 0!==o&&o.offsetX>i.corners.right+i.margin.right||void 0===o&&n.corners.bottomCenter.x>i.corners.right+i.margin.right?Bc.Three:n.corners.bottom<i.corners.top?Bc.Five:0===a||0===l?Bc.One:Bc.Three:void 0!==r&&n.corners.left>r.offsetX||void 0===r&&n.corners.left>i.corners.left?Bc.Three:void 0!==r&&n.corners.right<r.offsetX||void 0===r&&n.corners.right<i.corners.right?Bc.Three:n.corners.top>i.corners.bottom?Bc.Five:0===a||0===l?Bc.One:Bc.Three}(0,t,n)):"Bottom"===t.direction&&"Left"===n.direction?r=function(t,n,i,o){var r,a=e.sourcePortWrapper,l=e.targetPortWrapper;(Math.max(n.point.y,n.corners.bottom),Math.min(i.point.x,i.corners.left),o)&&(r=a,a=l,l=r);return void 0!==a&&a.offsetX<i.corners.left-i.margin.left||void 0===a&&n.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?n.corners.right<i.corners.left?void 0!==l&&n.corners.bottom+n.margin.bottom<l.offsetY||void 0===l&&n.corners.bottom+n.margin.bottom<i.corners.middleLeft.y?Bc.Two:Bc.Four:void 0!==l&&n.corners.top>l.offsetY||void 0===l&&n.corners.top>i.corners.middleLeft.y?Bc.Four:Bc.Two:void 0!==l&&Math.abs(n.corners.right-i.corners.left)<=25&&Math.abs(l.offsetY-n.corners.bottom)<=25?Bc.Two:Bc.Four}(0,t,n,a):"Left"===t.direction&&"Left"===n.direction?r=function(t,n,i){var o=e.sourcePortWrapper,r=e.targetPortWrapper;n.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var a=Math.round(Math.abs(n.point.x-i.point.x)),l=Math.round(Math.abs(n.point.y-i.point.y));return n.corners.left<i.corners.left?void 0!==r&&n.corners.bottom+n.margin.bottom<r.offsetY||void 0===r&&n.corners.bottom+n.margin.bottom<i.corners.middleLeft.y?Bc.Three:void 0!==r&&n.corners.top-n.margin.top>r.offsetY||void 0===r&&n.corners.top-n.margin.top>i.corners.middleLeft.y?Bc.Three:n.corners.right<i.corners.left||i.corners.right<n.corners.left?Bc.Five:0===a||0===l?Bc.One:Bc.Three:void 0!==o&&o.offsetY<i.corners.top-i.margin.top||void 0===o&&n.corners.middleLeft.y<i.corners.top?Bc.Three:void 0!==o&&o.offsetY>i.corners.bottom+i.margin.bottom||void 0===o&&n.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?Bc.Three:n.corners.left>i.corners.right?Bc.Five:0===a||0===l?Bc.One:Bc.Three}(0,t,n):"Left"===t.direction&&"Top"===n.direction?r=function(e,t,n,i){var o,r=e.sourcePortWrapper,a=e.targetPortWrapper,l={x:Math.min(t.point.x,t.corners.left),y:t.point.y},s={x:n.point.x,y:Math.min(n.point.y,n.corners.top)};i&&(o=r,r=a,a=o);return void 0!==r&&r.offsetY<n.corners.top-n.margin.top||void 0===r&&(t.corners.bottom<n.corners.top-n.margin.top||t.corners.middleLeft.y<n.corners.top-n.margin.top)?t.corners.bottom<n.corners.top?void 0!==a&&t.corners.left-t.margin.left>a.offsetX||void 0===a&&t.corners.left-t.margin.left>n.corners.topCenter.x?Bc.Two:Bc.Four:void 0!==a&&t.corners.right<a.offsetX||void 0===a&&t.corners.right<n.corners.topCenter.x?Bc.Four:Bc.Two:void 0!==r&&Math.abs(t.corners.left-n.corners.right)<=25&&Math.abs(r.offsetY-n.corners.top)<=25?Bc.Two:e.sourceWrapper!==e.targetWrapper&&(Vy(e.sourceWrapper).containsPoint(s)||Vy(e.targetWrapper).containsPoint(l))?Bc.Two:Bc.Four}(e,t,n,a):"Top"===t.direction&&"Top"===n.direction&&(r=function(t,n,i){var o=e.sourcePortWrapper,r=e.targetPortWrapper,a=Math.round(Math.abs(n.point.x-i.point.x)),l=Math.round(Math.abs(n.point.y-i.point.y));return n.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},n.corners.top<i.corners.top?void 0!==r&&n.corners.left>r.offsetX||void 0===r&&n.corners.left>i.corners.left?Bc.Three:void 0!==r&&n.corners.right<r.offsetX||void 0===r&&n.corners.right<i.corners.right?Bc.Three:n.corners.bottom<i.corners.top?Bc.Five:0===a||0===l?Bc.One:Bc.Three:void 0!==o&&o.offsetX>i.corners.right||void 0===o&&n.corners.left>i.corners.right?Bc.Three:void 0!==o&&o.offsetX<i.corners.left||void 0===o&&n.corners.bottomRight.x<i.corners.left?Bc.Three:n.corners.top>i.corners.bottom?Bc.Five:0===a||0===l?Bc.One:Bc.Three}(0,t,n)),a&&Gu(t,n),function(e,t,n,i,o,r){var a,l,s=e.sourceWrapper.corners,d=e.targetWrapper.corners,c=20;if(!(n.direction===i.direction&&t!==Bc.Five||n.direction!==Wu(i.direction)&&t!==Bc.Three))switch(n.direction){case"Left":s.middleLeft.x>d.middleRight.x&&(l=(s.middleLeft.x-d.middleRight.x)/2,c=r?l:Math.min(c,l));break;case"Right":s.middleRight.x<d.middleLeft.x&&(l=(d.middleLeft.x-s.middleRight.x)/2,c=r?l:Math.min(c,l));break;case"Top":s.topCenter.y>d.bottomCenter.y&&(l=(s.topCenter.y-d.bottomCenter.y)/2,c=r?l:Math.min(c,l));break;case"Bottom":s.bottomCenter.y<d.topCenter.y&&(l=(d.topCenter.y-s.bottomCenter.y)/2,c=r?l:Math.min(c,l))}return c=Bu(s,n,c),t===Bc.One&&(a=[n.point,i.point]),t===Bc.Two&&(a=ju(n,i)),t===Bc.Three&&(a=zu(e,n,i,c)),t===Bc.Four&&(a=Uu(n,i,void 0,a,c)),t===Bc.Five&&(a=function(e,t,n){void 0===n&&(n=20);var i,o,r=n,a=e.corners.left-e.margin.left,l=e.corners.right+e.margin.right,s=e.corners.bottom+e.margin.bottom,d=e.corners.top-e.margin.top,c=t.corners.left-t.margin.left,u=t.corners.right+t.margin.right,h=t.corners.bottom+t.margin.bottom,p=t.corners.top-t.margin.top;switch(e.direction){case"Left":(d>p&&d<h||s<h&&s>p)&&a>c&&a<=u&&n>=20&&(r=e.point.x-t.corners.left+r),o=Pu(e.point,r,180);break;case"Top":(a>c&&a<u||l<u&&l>c)&&d>p&&d<=h&&n>=20&&(r=e.point.y-t.corners.top+r),o=Pu(e.point,r,270);break;case"Right":(d>p&&d<h||s<h&&s>p)&&l<u&&l>=c&&n>=20&&(r=t.corners.right-e.point.x+r),o=Pu(e.point,r,0);break;case"Bottom":(a>c&&a<u||l<u&&l>c)&&s<h&&s>=p&&n>=20&&(r=t.corners.bottom-e.point.y+r),o=Pu(e.point,r,90)}if(i=[e.point,o],"Top"===e.direction||"Bottom"===e.direction){var f=e.direction;e.direction=o.x>t.point.x?"Left":"Right",e.point=o,i=Uu(e,t,f,i)}else f=e.direction,e.direction=o.y>t.point.y?"Top":"Bottom",e.point=o,i=Uu(e,t,f,i);return i}(n,i,c)),a}(e,r,t,n,0,o)}(e,f,g,0,r));return u}(e,h.direction,p.direction,h.point,p.point,o);if(Tu(e),(e.sourceWrapper||e.targetWrapper)&&function(e,t,n){var i=e.sourcePortWrapper,o=e.targetPortWrapper,r=e.sourceWrapper,a=t.point,l={left:0,right:0,top:0,bottom:0},s={x:0,y:0},d="Top";if(r?(a=n.point,l=t.margin):(r=e.targetWrapper,l=n.margin),"Orthogonal"===e.type)if(e.segments&&e.segments.length>0&&e.sourceWrapper&&e.segments[0].direction)t.direction=e.segments[0].direction,s=Ru(e,0,s=Iu(r.corners,t.direction),Iu(r.corners,Wu(t.direction)),!1);else{var c={corners:null,direction:null,point:null,margin:null};Au(r,{corners:null,direction:null,point:a,margin:l},c,e),s=c.point,d=c.direction}else{var u=void 0;e.segments&&e.segments.length>1&&(u=r===e.sourceWrapper?e.segments[0].point:e.segments[e.segments.length-2].point),s=Ru(e,0,r.bounds.center,e.segments&&e.segments.length>1?u:a,r===e.targetWrapper)}r===e.sourceWrapper?(t.direction=t.direction||d,t.point=s,e.sourcePortWrapper&&(t.point={x:i.offsetX,y:i.offsetY},e.sourcePadding&&(t.point=bu(e,t,n,!1)))):(n.direction=n.direction||d,n.point=s,e.targetPortWrapper&&(n.point={x:o.offsetX,y:o.offsetY},e.targetPadding&&(n.point=bu(e,t,n,!0))))}(e,h,p),"Straight"===e.type||"Bezier"===e.type)u=xu(e,h,p);else if("Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].length&&null!==e.segments[0].direction)u=function(e,t,n,i,o,r,a){var l,s,d,c,u=[];if(Tu(e),e.segments.length>0){for(var h=0;h<e.segments.length;h++){var p=e.segments[h];if(0===h&&void 0!==e.sourcePortWrapper&&(d=qu({x:r.offsetX,y:r.offsetY},Vy(i),i.bounds),p.direction===Wu(d)&&(p.direction=d)),h>0&&e.segments[h-1].direction===p.direction)h=Eu(e,h,t);else{var f=e.segments[h-1];t.point=p.direction?hu(t,p):f.points[f.points.length-1]}if(h===e.segments.length-1&&(a||o?e.targetWrapper&&void 0===e.targetPortWrapper?(ku(e,t),s=fu(e,t,n)):s=mu(e,t,n):s=pu(e,t,n),s))if(yu(s,e),p.points=[],s.length>=2)for(l=0;l<s.length;l++)p.points.push(s[l]);else c=h;if(r&&0===h){var g=vu(e,r,i);g&&(t.point=g)}}void 0!==c&&(c===e.segments.length-1&&(e.segments[c-1].direction=null,e.segments[c-1].length=null),e.segments.splice(c,1)),u=Du(e,u)}return u}(e,h,p,l,s,d,c);else{var f=void 0;h.direction?f=Bu(l.bounds,h,20):h.direction=p.direction?void 0!==e.targetPortWrapper?p.direction:Wu(p.direction):jd.direction(h.point,p.point),e.segments[0].points=u=zu(e,h,p,f)}return u}(e,"Straight"!==e.type&&e.sourceWrapper?e.sourceWrapper.corners.center:function(e){var t;if(e.sourcePortWrapper){var n=e.sourcePortWrapper,i=e.sourceWrapper,o={x:n.offsetX,y:n.offsetY};qu(o,Vy(i),i.bounds),t=o}else t=e.sourceID&&e.sourceWrapper&&e.targetWrapper?Ru(e,0,e.sourceWrapper.corners.center,e.targetWrapper.corners.center,!1):e.sourcePoint;return t}(e),e.targetPoint,t,n),Mu(e,i[0],!1),Mu(e,i[i.length-1],!0),i}function hu(e,t){var n;return e.direction=t.direction,t.points=[],t.points.push(e.point),n=Pu(e.point,"Left"===t.direction||"Top"===t.direction?-t.length:t.length,"Left"===t.direction||"Right"===t.direction?0:90),t.points.push(n),n}function pu(e,t,n){var i,o,r,a;return t.corners=e.sourceWrapper?e.sourceWrapper.corners:void 0,e.sourcePortWrapper&&(r=qu({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Vy(e.sourceWrapper),e.sourceWrapper.bounds),!t.corners||"Bottom"!==t.direction&&"Top"!==t.direction?!t.corners||"Left"!==t.direction&&"Right"!==t.direction||n.point.y>t.corners.top&&n.point.y<t.corners.bottom&&(o=t.point.x>n.point.x?"Left":"Right"):n.point.x>t.corners.left&&n.point.x<t.corners.right&&(o=t.point.y>n.point.y?"Top":"Bottom")),e.sourcePortWrapper&&r===Wu(o)?(("Left"===r||"Right"===r)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.center.y&&n.point.y>=t.corners.top&&n.point.y<=t.corners.center.y?(t.direction="Top",a=t.point.y-t.corners.top+20):("Left"===r||"Right"===r)&&t.point.y>t.corners.center.y&&t.point.y<=t.corners.bottom&&n.point.y>t.corners.center.y&&n.point.y<=t.corners.bottom?(t.direction="Bottom",a=t.corners.bottom-t.point.y+20):("Top"===r||"Bottom"===r)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.center.x&&n.point.x>=t.corners.left&&n.point.x<=t.corners.center.x?(t.direction="Left",a=t.point.x-t.corners.left+20):("Top"===r||"Bottom"===r)&&t.point.x<=t.corners.right&&t.point.x>t.corners.center.x&&n.point.x<=t.corners.right&&n.point.x<t.corners.center.x&&(t.direction="Right",a=t.corners.right-t.point.x+20),t.direction&&a&&(i=zu(e,t,n,a,!0))):(t.direction=o||Su(t.direction,t.point,n.point),i=ju(t,n)),i}function fu(e,t,n){var i;n.corners=e.targetWrapper.corners,Au(e.targetWrapper,t,n,e);var o=Su(n.direction,t.point,n.point);return t.direction!==n.direction||"Left"!==t.direction&&"Right"!==t.direction?(t.direction=o,i=ju(t,n)):(t.direction=o,i=zu(e,t,n,e.targetWrapper.width/2+20),t.point=i[1],Au(e.targetWrapper,t,n,e),i=zu(e,t,n)),i}function gu(e,t,n){var i,o,r;n.corners=e.targetWrapper.corners,"Left"!==t.direction&&"Right"!==t.direction?n.corners.center.y!==t.point.y||n.corners.left<=t.point.x&&t.point.x<=n.corners.right?n.corners.center.y===t.point.y&&"Bottom"===e.segments[e.segments.length-2].direction||n.corners.center.y>t.point.y&&t.point.y>=n.corners.top?(o="Top",r=t.point.y-n.corners.top+20):n.corners.center.y===t.point.y&&"Top"===e.segments[e.segments.length-2].direction||n.corners.center.y<t.point.y&&t.point.y<=n.corners.bottom?(o="Bottom",r=n.corners.bottom-t.point.y+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.top<=t.point.y&&t.point.y<=t.corners.bottom&&(o=t.direction,r=t.point.y>n.point.y?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):(o="Top",r=n.corners.height/2+20):n.corners.center.x!==t.point.x||n.corners.top<t.point.y&&t.point.y<=n.corners.bottom?n.corners.center.x===t.point.x&&"Right"===e.segments[e.segments.length-2].direction||n.corners.center.x>t.point.x&&t.point.x>=n.corners.left?(o="Left",r=t.point.x-n.corners.left+20):n.corners.center.x===t.point.x&&"Left"===e.segments[e.segments.length-2].direction||n.corners.center.x<=t.point.x&&t.point.x<=n.corners.right?(o="Right",r=n.corners.right-t.point.x+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.left<=t.point.x&&t.point.x<=t.corners.right&&(o=t.direction,r=t.point.x>n.point.x?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20):(o="Left",r=n.corners.width/2+20),i=t.point,t.point=Pu(t.point,"Left"===o||"Top"===o?-r:r,"Left"===o||"Right"===o?0:90),t.direction=jd.direction(t.point,n.point),void 0===e.sourcePortWrapper||void 0===e.targetPortWrapper||t.corners.center.x!==n.corners.center.x&&t.corners.center.y!==n.corners.center.y||(t.direction=n.direction);var a=zu(e,t,n);return a.splice(0,0,i),a}function mu(e,t,n){var i,o;n.corners=e.targetWrapper.corners,void 0!==e.sourcePortWrapper&&(o=qu({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Vy(e.sourceWrapper),e.sourceWrapper.bounds));var r=function(e,t,n,i){var o=!1;switch(n.direction){case"Left":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Right"===i&&t.point.x>n.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||("Bottom"===i&&t.point.y>n.point.y||"Top"===i&&t.point.y<n.point.y)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction="Right"===i?t.point.y>n.point.y?"Top":"Bottom":t.point.x<n.point.x?"Right":"Left",o=!0):t.point.x>n.point.x&&(t.point.y>n.point.y||t.point.y<n.point.y)&&!(n.corners.top>t.point.y&&n.corners.bottom<t.point.y)?t.direction="Left":t.point.x<n.point.x&&t.point.y>n.point.y||t.point.x>n.point.x&&t.point.y<=n.point.y&&n.corners.top<t.point.y&&n.corners.center.y>=t.point.y?t.direction="Top":t.point.x<n.point.x&&t.point.y<n.point.y||t.point.x>n.point.x&&t.point.y>n.point.y&&n.corners.bottom<t.point.y&&n.corners.center.y>t.point.y?t.direction="Bottom":t.point.y===n.point.y&&t.point.x<n.point.x&&(t.direction="Right");break;case"Right":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&("Bottom"===i&&t.point.y>n.point.y||"Top"===i&&t.point.y<n.point.y)&&t.point.x>n.point.x&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction=t.point.x>n.point.x?"Left":"Right",o=!0):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Left"===i&&t.point.x<n.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=t.point.y>n.point.y?"Top":"Bottom",o=!0):t.point.x<n.point.x&&n.corners.top<=t.point.y&&n.corners.bottom>=t.point.y&&t.point.y===n.point.y?t.direction="Top":t.point.y>n.point.y&&t.point.x>n.point.x?t.direction="Top":t.point.y<n.point.y&&t.point.x>n.point.x?t.direction="Bottom":t.point.x<n.point.x&&(t.point.y>n.point.y||t.point.y<n.point.y)?t.direction="Right":t.point.y===n.point.y&&t.point.x>n.point.x&&(t.direction="Left");break;case"Top":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Bottom"===i&&t.point.y>n.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right||("Right"===i&&t.point.x>n.point.x||"Left"===i&&n.point.y>t.point.y&&n.point.x>t.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction="Bottom"===i?t.point.x>n.point.x?"Left":"Right":t.point.y<n.point.y?"Bottom":"Top",o=!0):t.point.x===n.point.x&&t.point.y<n.point.y?t.direction="Bottom":t.point.y>n.point.y&&t.point.x>n.corners.left&&t.point.x<n.corners.right?t.direction="Left":t.point.y>=n.point.y?t.direction="Top":t.point.y<n.point.y&&t.point.x>n.point.x?t.direction="Left":t.point.y<n.point.y&&t.point.x<n.point.x&&(t.direction="Right");break;case"Bottom":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&(("Right"===i||"Left"===i&&n.point.x>t.point.x)&&t.point.y>n.point.y&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Top"===i&&t.point.y<n.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?(t.direction="Right"===i||"Left"===i?t.point.y>n.point.y?"Top":"Bottom":t.point.x>n.point.x?"Left":"Right",o=!0):t.point.y<n.point.y&&t.point.x>n.corners.left&&n.corners.right>t.point.x?t.point.y<n.point.y&&t.point.x>n.corners.left&&n.corners.center.x>=t.point.x?t.direction="Left":t.point.y<n.point.y&&t.point.x<n.corners.right&&n.corners.center.x<t.point.x&&(t.direction="Right"):t.point.y>n.point.y&&t.point.x>n.point.x?t.direction="Left":t.point.y>n.point.y&&t.point.x<n.point.x?t.direction="Right":t.point.y<=n.point.y&&(t.point.x>n.point.x||n.point.x>t.point.x)&&(t.direction="Bottom")}return o}(e,t,n,o);return void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&n.direction===Wu(o)&&(("Left"===n.direction&&t.point.x>n.point.x||"Right"===n.direction&&t.point.x<n.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Bottom"===n.direction&&t.point.y<n.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?i=gu(e,t,n):t.direction===n.direction?i=zu(e,t,n):("Left"===n.direction&&t.point.x>n.point.x||"Right"===n.direction&&t.point.x<n.point.x)&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.y<=n.point.y&&n.corners.top<=t.point.y&&n.corners.bottom>=t.point.y||"Top"===n.direction&&t.point.y>n.point.y||"Bottom"===n.direction&&t.point.y<n.point.y&&n.corners.left<=t.point.x&&n.corners.right>=t.point.x?i=gu(e,t,n):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Left"===t.direction||"Right"===t.direction)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom&&("Top"===n.direction||"Bottom"===n.direction)&&n.corners.center.x===t.corners.center.x?(t.direction="Top"===n.direction?"Bottom":"Top",i=zu(e,t,n,"Top"===n.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20)):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&("Left"===n.direction||"Right"===n.direction)&&n.corners.center.y===t.corners.center.y?(t.direction="Left"===n.direction?"Right":"Left",i=zu(e,t,n,"Left"===n.direction?t.corners.right-t.point.x+20:t.point.x-t.corners.left+20)):i=r?zu(e,t,n,"Left"===t.direction||"Right"===t.direction?"Left"===t.direction?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20:"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):ju(t,n),i}function vu(e,t,n){var i,o={x:t.offsetX,y:t.offsetY},r=Vy(n),a=qu(o,r,n.bounds),l=e.segments[0];return l.direction!==a&&(function(e,t,n,i,o,r){var a,l,s=[];s.push(i),i.y===o.y&&("Left"===t&&o.x<i.x||"Right"===t&&o.x>i.x)||i.x===o.x&&("Top"===t&&o.y<i.y||"Bottom"===t&&o.y>i.y)||("Top"===t||"Bottom"===t?"Top"===t&&o.y<i.y&&o.y>i.y-13||"Bottom"===t&&o.y>i.y&&o.y<i.y+13?(s.push({x:i.x,y:l="Top"===t?n.top-13:n.bottom+13}),s.push({x:i.x+(o.x-i.x)/2,y:l}),s.push({x:i.x+(o.x-i.x)/2,y:o.y})):Math.abs(i.x-o.x)>13&&("Top"===t&&o.y<i.y||"Bottom"===t&&o.y>i.y)?s.push({x:i.x,y:o.y}):(l="Top"===t?n.top-13:n.bottom+13,a=o.x<i.x?n.left-13:n.right+13,s.push({x:i.x,y:l}),s.push({x:o.x,y:l})):"Left"===t&&o.x<i.x&&o.x>i.x-13||"right"===t&&o.x>i.x&&o.x<i.x+13?(s.push({x:a="Left"===t?n.left-13:n.right+13,y:i.y}),s.push({x:a,y:i.y+(o.y-i.y)/2}),s.push({x:o.x,y:i.y+(o.y-i.y)/2})):Math.abs(i.y-o.y)>13&&("Left"===t&&o.x<i.x||"Right"===t&&o.x>i.x)?s.push({x:o.x,y:i.y}):(s.push({x:a="Left"===t?n.left-13:n.right+13,y:i.y}),s.push({x:a,y:o.y})),e.points=s)}(l,a,r,l.points[0],l.points[l.points.length-1]),i=l.points[l.points.length-1],l.direction=jd.direction(l.points[l.points.length-2],l.points[l.points.length-1])),i}function yu(e,t,n){var i,o=t.segments[t.segments.length-2],r=o.points[o.points.length-1];("Top"!==o.direction&&"Bottom"!==o.direction||r.x!==e[1].x)&&("Left"!==o.direction&&"Right"!==o.direction||r.y!==e[1].y)||(o.points[o.points.length-1]=e[1],i=jd.direction(o.points[0],o.points[o.points.length-1]),void 0!==t.sourceWrapper&&void 0===t.sourcePortWrapper&&i===Wu(o.direction)&&("Left"===o.direction||"Right"===o.direction?o.points[0].x="Right"===o.direction?o.points[0].x-t.sourceWrapper.corners.width:o.points[0].x+t.sourceWrapper.corners.width:o.points[0].y="Bottom"===o.direction?o.points[0].y-t.sourceWrapper.corners.height:o.points[0].y+t.sourceWrapper.corners.height),o.direction=i,o.length=jd.distancePoints(o.points[0],o.points[o.points.length-1]),e.splice(0,1))}function bu(e,t,n,i){var o=i?e.targetPadding:e.sourcePadding,r=i?e.targetPortWrapper:e.sourcePortWrapper,a=new Zd(r.bounds.x-o,r.bounds.y-o,r.actualSize.width+2*o,r.actualSize.height+2*o),l=[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft];l[l.length]=l[0];var s=i?n.point:t.point;return Nu({x1:t.point.x,y1:t.point.y,x2:n.point.x,y2:n.point.y},l,0,s)||s}function wu(e,t){var n,i,o=[],r=Lm(0,e.corners,t);r.push(r[0]);for(var a=0;a<r.length-1;a++)o.push({x1:(n=r[a]).x,y1:n.y,x2:(i=r[a+1]).x,y2:i.y});return o}function Cu(e,t,n){var i,o=e.rotateAngle+e.parentTransform;if(o){if(o<45)return t;if(o<=135)i={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.middleLeft,topRight:t.topLeft,middleLeft:t.bottomCenter,center:n.center,middleRight:t.topCenter,bottomLeft:t.bottomRight,bottomCenter:t.middleRight,bottomRight:t.topRight,left:n.left,right:n.right,top:n.top,bottom:n.bottom};else if(o<=225)i={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.bottomCenter,topRight:t.bottomRight,middleLeft:t.middleRight,center:n.center,middleRight:t.middleLeft,bottomLeft:t.topLeft,bottomCenter:t.topCenter,bottomRight:t.topRight,left:n.left,right:n.right,top:n.top,bottom:n.bottom};else{if(!(o<=315))return t;i={width:t.width,height:t.height,topLeft:t.topRight,topCenter:t.middleRight,topRight:t.bottomRight,middleLeft:t.topCenter,center:n.center,middleRight:t.bottomCenter,bottomLeft:t.topLeft,bottomCenter:t.middleLeft,bottomRight:t.bottomLeft,left:n.left,right:n.right,top:n.top,bottom:n.bottom}}return i}return t}function xu(e,t,n){var i=[];if(e.segments&&e.segments.length>0){var o=void 0,r=[],a=t.point;for(o=0;o<e.segments.length;o++){var l=e.segments[o];if((r=[]).push(a),o!==e.segments.length-1?(r.push(l.point),a=l.point):r.push(n.point),e.segments[o].points=r,e.segments.length>1&&jd.equals(l.points[0],l.points[1])&&e.segments.splice(o,1),l)for(var s=0;s<l.points.length;s++)(s>0||0===o)&&i.push(l.points[s])}}return i}function Su(e,t,n){return"Top"===e||"Bottom"===e?n.x>t.x?"Right":"Left":n.y>t.y?"Bottom":"Top"}function Tu(e){if("Straight"===e.type||"Bezier"===e.type){if(0===e.segments.length||e.segments.length>0&&!jd.isEmptyPoint(e.segments[e.segments.length-1].point)){var t=void 0;t="Bezier"===e.type?new Df(e,"segments",{type:"Bezier"},!0):new kf(e,"segments",{type:"Straight"},!0),e.segments.push(t)}}else(0===e.segments.length||e.segments[e.segments.length-1].direction)&&(t=new Af(e,"segments",{type:"Orthogonal"},!0),e.segments.push(t))}function Eu(e,t,n){var i=e.segments[t],o=Pu(n.point,"Left"===i.direction||"Top"===i.direction?-i.length:i.length,"Left"===i.direction||"Right"===i.direction?0:90);return e.segments[t-1].length+=i.length,e.segments[t-1].points[1]=n.point=o,e.segments.splice(t,1),--t}function _u(e,t,n){var i,o;e.sourcePortWrapper&&(o=qu({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Vy(e.sourceWrapper),e.sourceWrapper.bounds)),Au(e.targetWrapper,t,n,e);var r=Su(n.direction,t.point,n.point);if(void 0===e.sourcePortWrapper||t.direction!==n.direction||("Top"!==t.direction&&"Bottom"!==t.direction||t.corners.center.x!==n.corners.center.x)&&("Left"!==t.direction&&"Right"!==t.direction||t.corners.center.y!==n.corners.center.y))if(n.point.x>=t.corners.left&&n.point.x<=t.corners.right&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom)t.direction=n.point.y>t.point.y?"Bottom":"Top",i=zu(e,t,n,"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20);else if(e.sourcePortWrapper&&o===Wu(r)){var a;("Left"===o||"Right"===o)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=n.point.y>t.point.y?"Bottom":"Top",a=t.corners.height/2+20):("Top"===o||"Bottom"===o)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&(t.direction=n.point.x>t.point.x?"Right":"Left",a=t.corners.width/2+20),t.direction&&a?i=zu(e,t,n,a,!0):(t.direction=r,i=ju(t,n))}else!e.sourcePortWrapper||o!==n.direction||"Top"!==o&&"Bottom"!==o||t.corners.center.x!==n.corners.center.x?(t.direction=r,i=ju(t,n)):(t.direction=n.point.y>t.point.y?"Bottom":"Top",i=zu(e,t,n,"Bottom"===t.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20));else t.direction=r,i=zu(e,t,n,"Top"===r||"Bottom"===r?e.sourceWrapper.height/2+20:e.sourceWrapper.width/2+20),t.point=i[1],"Left"===r||"Right"===r?(n.direction=r,n.point="Left"===r?n.corners.middleLeft:n.corners.middleRight):Au(e.targetWrapper,t,n,e),i=zu(e,t,n);return i}function ku(e,t){if(void 0!==e.targetWrapper&&void 0===e.targetPortWrapper&&Vy(e.targetWrapper).containsPoint(t.point,1)){var n=e.targetWrapper,i=e.segments[e.segments.length-2],o=i.points[i.points.length-1],r=Wu(i.direction);"Bottom"===r?o.y<n.corners.bottom+1&&(i.points[i.points.length-1].y=n.corners.bottom+20,i.length=jd.distancePoints(i.points[0],i.points[i.points.length-1])):"Top"===r?o.y>n.corners.top-1&&(i.points[i.points.length-1].y=n.corners.top-20,i.length=jd.distancePoints(i.points[0],i.points[i.points.length-1])):"Left"===r?o.x>n.corners.left-1&&(i.points[i.points.length-1].x=n.corners.left-20,i.length=jd.distancePoints(i.points[0],i.points[i.points.length-1])):"Right"===r&&o.x<n.corners.right+1&&(i.points[i.points.length-1].x=n.corners.right+20,i.length=jd.distancePoints(i.points[0],i.points[i.points.length-1])),t.point=i.points[i.points.length-1]}}function Du(e,t){for(var n=0;n<e.segments.length;n++)for(var i=e.segments[n],o=0;o<i.points.length;o++)(o>0||0===n)&&t.push(i.points[o]);return t}function Au(e,t,n,i){var o,r={x:0,y:0},a=Cu(e,e.corners,e.bounds),l=t.margin,s=t.point;if(a.bottomCenter.y+l.bottom<s.y)o="Bottom",r=a.bottomCenter;else if(a.topCenter.y-l.top>s.y)o="Top",r=a.topCenter;else if(a.middleLeft.x-l.left>s.x)o="Left",r=a.middleLeft;else if(a.middleRight.x+l.right<s.x)o="Right",r=a.middleRight;else{var d=Math.abs(s.y-a.topCenter.y),c=Math.abs(s.x-a.middleRight.x),u=Math.abs(s.y-a.bottomCenter.y),h=Math.abs(s.x-a.middleLeft.x),p=Number.MAX_VALUE;o="Top",r=a.topCenter,(p=d)>c&&(p=c,o="Right",r=a.middleRight),p>u&&(p=u,o="Bottom",r=a.bottomCenter),p>h&&(o="Left",r=a.middleLeft)}n.point=r,n.direction=o;var f=Iu(a,Wu(n.direction));n.point=Ru(i,0,n.point,f,e===i.targetWrapper)}function Ou(e,t){var n={x:t.x,y:e.y},i=(jd.findLength(e,n),jd.findLength(n,t)),o=jd.findLength(t,e),r=Math.asin(i/o);return r=180*r/Math.PI,e.x<t.x?e.y>t.y&&(r=360-r):r=e.y<t.y?180-r:180+r,r}function Iu(e,t){var n;switch(t){case"Left":n=e.middleLeft;break;case"Top":n=e.topCenter;break;case"Right":n=e.middleRight;break;case"Bottom":n=e.bottomCenter}return n}function Pu(e,t,n){return jd.transform(e,n,t)}function Ru(e,t,n,i,o){var r,a,l,s=jd.findAngle(i={x:i.x,y:i.y},n={x:n.x,y:n.y}),d=o?e.targetWrapper:e.sourceWrapper,c=o?e.targetPadding:e.sourcePadding,u=o||"Orthogonal"===e.type?n:i;jd.transform(n,s,Math.max(d.actualSize.height/2,d.actualSize.width/2)),r=d;var h=ob(-d.parentTransform,d.offsetX,d.offsetY,n),p=ob(-d.parentTransform,d.offsetX,d.offsetY,i);if("Orthogonal"===e.type)h.x===p.x&&(h.y<p.y?h.y-=5:h.y+=5),h.y===p.y&&(h.x<p.x?h.x-=5:h.x+=5),n=ob(d.parentTransform,d.offsetX,d.offsetY,h);else if(o?jd.findAngle(n,i):jd.findAngle(i,n),o){var f=jd.findAngle(n,i);i=jd.transform({x:i.x,y:i.y},f,Math.max(d.actualSize.width,d.actualSize.height))}else{var g=jd.findAngle(i,n);n=jd.transform({x:n.x,y:n.y},g,Math.max(d.actualSize.width,d.actualSize.height))}return(e.sourcePadding||e.targetPadding)&&(a=new Zd(d.bounds.x-c,d.bounds.y-c,d.actualSize.width+2*c,d.actualSize.height+2*c)),d instanceof Yc&&d.data?(l=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:r.getPoints(),r.data.split("m").length-1+(r.data.split("M").length-1)==1&&(l[l.length]=l[0])):(l=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:Lm(0,d.corners))[l.length]=l[0],Nu({x1:n.x,y1:n.y,x2:i.x,y2:i.y},l,0,u)||n}function Mu(e,t,n){return t.x=Math.round(100*t.x)/100,t.y=Math.round(100*t.y)/100,n?e.targetPoint=t:e.sourcePoint=t,t}function Nu(e,t,n,i){var o,r=t.length,a={x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y},l=Lu(e,a);if(l&&(o=jd.distancePoints(l,i)),isNaN(o)||o>0)for(var s=1;s<r-1;s++){var d=Lu(e,a={x1:t[s].x,y1:t[s].y,x2:t[s+1].x,y2:t[s+1].y});if(d){var c=jd.distancePoints(d,i);if((isNaN(o)||o>c)&&(o=c,l=d),o>=0&&o<=1)break}}return l}function Lu(e,t){var n,i,o,r,a,l,s,d,c,u,h,p,f,g=e.x1,m=e.y1,v=e.x2,y=e.y2,b=t.x1,w=t.y1,C=t.x2,x=t.y2;return u=(n=y-m)*C+(o=g-v)*x+(a=v*m-g*y),0!==(c=n*b+o*w+a)&&0!==u&&Hu(c,u)?null:(d=(i=x-w)*v+(r=b-C)*y+(l=C*w-b*x),0!==(s=i*g+r*m+l)&&0!==d&&Hu(s,d)?null:0==(h=n*r-i*o)?null:(p=h<0?-h/2:h/2,p=0,{x:(f=o*l-r*a)<0?(f-p)/h:(f+p)/h,y:(f=i*a-n*l)<0?(f-p)/h:(f+p)/h}))}function Hu(e,t){return e*t>=0}function Bu(e,t,n){switch(t.direction){case"Left":t.point.x>e.left&&(n=t.point.x-e.left>n?t.point.x-e.left+n:n);break;case"Right":t.point.x<e.right&&(n=e.right-t.point.x>n?e.right-t.point.x+n:n);break;case"Top":t.point.y>e.top&&(n=t.point.y-e.top>n?t.point.y-e.top+n:n);break;case"Bottom":t.point.y<e.bottom&&(n=e.bottom-t.point.y>n?e.bottom-t.point.y+n:n)}return n}function ju(e,t){var n;switch(e.direction){case"Left":case"Right":var i={x:t.point.x,y:e.point.y};n=jd.equals(e.point,i)||jd.equals(t.point,i)?[e.point,t.point]:[e.point,i,t.point];break;case"Top":case"Bottom":var o={x:e.point.x,y:t.point.y};n=jd.equals(e.point,o)||jd.equals(t.point,o)?[e.point,t.point]:[e.point,o,t.point]}return n}function zu(e,t,n,i,o){i||(i=20);var r,a,l,s=e.sourcePortWrapper,d=n.point.x-t.point.x,c=n.point.y-t.point.y;if(!o&&(Math.abs(d)<.001||Math.abs(c)<.001)&&void 0===n.direction)return[t.point,n.point];if(void 0===e.targetWrapper&&Math.abs(d)<=31&&Math.abs(c)<=31){if("Left"===t.direction||"Right"===t.direction?Math.abs(c)<12&&(t.direction=t.point.y>n.point.y?"Top":"Bottom"):Math.abs(d)<12&&(t.direction=t.point.x>n.point.x?"Left":"Right"),Math.abs(d)>12||Math.abs(c)>12)return ju(t,n);i+=5}return"Left"===t.direction||"Right"===t.direction?("Right"===t.direction?(void 0!==n.direction&&"Right"===n.direction&&(i=Math.max(t.point.x,n.point.x)-t.point.x+i),t.point.x>n.point.x&&void 0===s&&(i=-i)):(void 0!==n.direction&&"Left"===n.direction&&(i=t.point.x-Math.min(t.point.x,n.point.x)+i),(t.point.x>n.point.x||void 0!==s||"Left"===t.direction)&&(i=-i)),l=n.point.y-t.point.y,r=Pu(t.point,i,0),0!=(l=n.point.y-r.y)&&(a=Pu(r,n.point.y-r.y,90))):"Top"!==t.direction&&"Bottom"!==t.direction||("Bottom"===t.direction?void 0!==n.direction&&"Bottom"===n.direction&&(i=Math.max(t.point.y,n.point.y)-t.point.y+i):(void 0!==n.direction&&"Top"===n.direction&&(i=t.point.y-Math.min(t.point.y,n.point.y)+i),(t.point.y>n.point.y||void 0!==s||"Top"===t.direction)&&(i=-i)),l=n.point.x-t.point.x,r=Pu(t.point,i,90),0!=(l=n.point.x-r.x)&&(a=Pu(r,n.point.x-r.x,0))),0===l?[t.point,n.point]:[t.point,r,a,n.point]}function Uu(e,t,n,i,o){var r;switch(void 0===o&&(o=20),void 0===n?(e.margin={left:2,right:2,top:2,bottom:2},t.margin={left:0,right:5,top:0,bottom:5}):"Bottom"===e.direction?t.corners.top>e.corners.bottom&&t.corners.top-e.corners.bottom<20&&(o=(t.corners.top-e.corners.bottom)/2):"Top"===e.direction?t.corners.bottom<e.corners.top&&e.corners.top-t.corners.bottom<20&&(o=(e.corners.top-t.corners.bottom)/2):"Right"===e.direction?t.corners.left>e.corners.right&&t.corners.left-e.corners.right<20&&(o=(t.corners.left-e.corners.right)/2):"Left"===e.direction&&t.corners.right<e.corners.left&&e.corners.left-t.corners.right<20&&(o=(e.corners.left-t.corners.right)/2),e.direction){case"Left":o=function(e,t,n,i){return e.corners.left-e.margin.left>t.corners.left-t.margin.left&&e.corners.left-e.margin.left<=t.corners.right+t.margin.right?("Bottom"===t.direction&&e.point.y<t.point.y?i+=e.corners.left-t.corners.left:"Top"===t.direction&&e.point.y>t.point.y&&(i+=e.corners.left-t.corners.left),i+=e.point.x-e.corners.left):i+=void 0!==n&&"Top"!==n&&"Bottom"===t.direction&&e.point.y<t.point.y?Math.abs(e.point.x-t.corners.right):void 0!==n&&"Bottom"!==n&&"Top"===t.direction&&t.point.y<e.point.y?Math.abs(e.point.x-t.corners.right):e.point.x-e.corners.left,i}(e,t,n,o),r=Pu(e.point,o,180);break;case"Right":o=function(e,t,n,i){return e.corners.right+e.margin.right<t.corners.right+t.margin.right&&e.corners.right+e.margin.right>=t.corners.left-t.margin.left?("Bottom"===t.direction&&e.point.y<t.point.y?n+=t.corners.right-e.corners.right:"Top"===t.direction&&e.point.y>t.point.y&&(n+=t.corners.right-e.corners.right),n+=e.corners.right-e.point.x):n+=void 0!==i&&"Top"!==i&&"Bottom"===t.direction&&e.point.y<t.point.y?Math.abs(e.point.x-t.corners.right):void 0!==i&&"Bottom"!==i&&"Top"===t.direction&&t.point.y<e.point.y?Math.abs(e.point.x-t.corners.right):e.corners.right-e.point.x,n}(e,t,o,n),r=Pu(e.point,o,0);break;case"Top":o=function(e,t,n,i){return e.corners.top-e.margin.top>t.corners.top+t.margin.top&&e.corners.top-e.margin.top<=t.corners.bottom+t.margin.bottom?("Right"===t.direction&&e.point.x<t.point.x?i+=e.corners.top-t.corners.top:"Left"===t.direction&&e.point.x>t.point.x&&(i+=e.corners.top-t.corners.top),i+=e.point.y-e.corners.top):i+=void 0!==n&&"Left"!==n&&"Right"===t.direction&&e.point.x<t.point.x?Math.abs(e.point.y-t.corners.bottom):void 0!==n&&"Right"!==n&&"Left"===t.direction&&t.point.x<e.point.x?Math.abs(e.point.y-t.corners.bottom):e.point.y-e.corners.top,i}(e,t,n,o),r=Pu(e.point,o,270);break;case"Bottom":o=function(e,t,n,i){return e.corners.bottom+e.margin.bottom<t.corners.bottom+t.margin.bottom&&e.corners.bottom+e.margin.bottom>=t.corners.top-t.margin.top?("Right"===t.direction&&e.point.x<t.point.x?n+=t.corners.bottom-e.corners.bottom:"Left"===t.direction&&e.point.x>t.point.x&&(n+=t.corners.bottom-e.corners.bottom),n+=e.corners.bottom-e.point.y):n+=void 0!==i&&"Left"!==i&&"Right"===t.direction&&e.point.x<t.point.x?Math.abs(e.point.y-t.corners.bottom):void 0!==i&&"Right"!==i&&"Left"===t.direction&&t.point.x<e.point.x?Math.abs(e.point.y-t.corners.bottom):e.corners.bottom-e.point.y,n}(e,t,o,n),r=Pu(e.point,o,90)}return void 0!==i?i.push(r):i=[e.point,r],"Top"===e.direction||"Bottom"===e.direction?Fu(r,"horizontal",e,t,i):"Right"!==e.direction&&"Left"!==e.direction||Fu(r,"vertical",e,t,i),i}function Fu(e,t,n,i,o){var r,a,l;"horizontal"===t?(n.margin={left:0,right:10,top:0,bottom:10},i.margin={left:0,right:10,top:0,bottom:10}):"vertical"===t&&(n.margin={left:10,right:0,top:10,bottom:0},i.margin={left:10,right:0,top:10,bottom:0});var s=20;if("horizontal"===t){switch(i.direction){case"Left":if(n.corners.right+n.margin.right<i.corners.left-i.margin.left&&(i.corners.left-n.corners.right>s||n.corners.top-n.margin.top<=i.point.y&&n.corners.bottom+n.margin.bottom>=i.point.y)){var d=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);s=n.corners.right-e.x+d}else s="Top"===n.direction&&e.y>i.point.y||"Bottom"===n.direction&&e.y<i.point.y?Math.min(i.corners.left,e.x)-e.x-20:e.x>=n.corners.left-n.margin.left&&e.x<=n.corners.right+n.margin.right?Math.min(i.corners.left,n.corners.left)-e.x-20:i.corners.left-e.x-20;break;case"Right":n.corners.left-n.margin.left>i.corners.right+i.margin.right&&(n.corners.left-i.corners.right>s||n.corners.top-n.margin.top<=i.point.y&&n.corners.bottom+n.margin.bottom>=i.point.y)?(d=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20),s=n.corners.left-e.x-d):s="Top"===n.direction&&e.y>i.point.y||"Bottom"===n.direction&&e.y<i.point.y?Math.max(i.corners.right,e.x)-e.x+20:e.x>=n.corners.left-n.margin.left&&e.x<=n.corners.right+n.margin.right?Math.max(i.corners.right,n.corners.right)-e.x+20:i.corners.right-e.x+20}a=Pu(r=Pu(e,s,0),i.point.y-e.y,90),l=i.point}else if("vertical"===t){switch(i.direction){case"Top":n.corners.bottom+n.margin.bottom<i.corners.top-i.margin.top&&(i.corners.top-n.corners.bottom>s||n.corners.left-n.margin.left<=i.point.x&&n.corners.right+n.margin.right>=i.point.x)?(d=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20),s=n.corners.bottom-e.y+d):s="Left"===n.direction&&e.x>i.point.x||"Right"===n.direction&&e.x<i.point.x?Math.min(i.corners.top,e.y)-e.y-20:e.y>=n.corners.top-n.margin.top&&e.y<=n.corners.bottom+n.margin.bottom?Math.min(i.corners.top,n.corners.top)-e.y-20:i.corners.top-e.y-20;break;case"Bottom":n.corners.top-n.margin.top>i.corners.bottom+i.margin.bottom&&(n.corners.top-i.corners.bottom>s||n.corners.left-n.margin.left<=i.point.x&&n.corners.right+n.margin.right>=i.point.x)?(d=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20),s=n.corners.top-e.y-d):s="Left"===n.direction&&e.x>i.point.x||"Right"===n.direction&&e.x<i.point.x?Math.max(i.corners.bottom,e.y)-e.y+20:e.y>=n.corners.top-n.margin.top&&e.y<=n.corners.bottom+n.margin.bottom?Math.max(i.corners.bottom,n.corners.bottom)-e.y+20:i.corners.bottom-e.y+20}a=Pu(r=Pu(e,s,90),i.point.x-e.x,0),l=i.point}o.push(r),o.push(a),o.push(l)}function Gu(e,t){var n=e.direction;e.direction=t.direction,t.direction=n;var i=e.point;e.point=t.point,t.point=i;var o=e.corners;e.corners=t.corners,t.corners=o}function qu(e,t,n,i){var o=void 0===t?n:t,r=o.topLeft,a=o.topRight,l=o.bottomRight,s=o.bottomLeft,d=o.center,c=Ou(d,e),u=Ou(d,l),h=Ou(d,s),p=Ou(d,r),f=Ou(d,a);return c>p&&c<f?"Top":c>=u&&c<h?"Bottom":c>=h&&c<=p?"Left":"Right"}function Vu(e){var t;return t=e.wrapper.children[0].bounds,"None"!==e.sourceDecorator.shape&&t.uniteRect(e.wrapper.children[1].bounds),"None"!==e.targetDecorator.shape&&t.uniteRect(e.wrapper.children[2].bounds),t}function Wu(e){switch(e){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}var Yu,Xu,Zu=!1;function Ju(e,t,n,i,o){return lu=n+t==="topright"?void 0:o,lu=o,Zu=!!i,e?(t||(t="left"),n||(n="top"),du=e.ownerDocument,su=e,function(e,t,n){switch(au=su.getBoundingClientRect(),t+e){case"topcenter":Ku(ah(),n),Qu(ih(),n);break;case"topright":Ku(rh(),n),Qu(ih(),n);break;case"centercenter":Ku(ah(),n),Qu(nh(),n);break;case"centerright":Ku(rh(),n),Qu(nh(),n);break;case"centerleft":Ku(oh(),n),Qu(nh(),n);break;case"bottomcenter":Ku(ah(),n),Qu(th(),n);break;case"bottomright":Ku(rh(),n),Qu(th(),n);break;case"bottomleft":Ku(oh(),n),Qu(th(),n);break;default:case"topleft":Ku(oh(),n),Qu(ih(),n)}return n}(t.toLowerCase(),n.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function Ku(e,t){t.left=e}function Qu(e,t){t.top=e}function $u(){return du.documentElement.scrollTop||du.body.scrollTop}function eh(){return du.documentElement.scrollLeft||du.body.scrollLeft}function th(){return Zu?au.bottom:au.bottom+$u()}function nh(){return ih()+au.height/2}function ih(){return Zu?au.top:au.top+$u()}function oh(){return au.left+eh()}function rh(){return au.right+eh()-(lu?lu.width:0)}function ah(){return oh()+au.width/2}function lh(e,t,n,i){if(void 0===t&&(t=null),void 0===n&&(n={X:!1,Y:!1}),!n.Y&&!n.X)return{left:0,top:0};var o=e.getBoundingClientRect();if(Xu=t,Yu=e.ownerDocument,i||(i=Ju(e,"left","top")),n.X){var r=Xu?hh():Sh(),a=vh(),l=yh(),s=a-i.left,d=i.left+o.width-l;o.width>r?i.left=s>0&&d<=0?l-o.width:d>0&&s<=0?a:s>d?l-o.width:a:s>0?i.left+=s:d>0&&(i.left-=d)}if(n.Y){var c=Xu?ph():xh(),u=mh(),h=bh(),p=u-i.top,f=i.top+o.height-h;o.height>c?i.top=p>0&&f<=0?h-o.height:f>0&&p<=0?u:p>f?h-o.height:u:p>0?i.top+=p:f>0&&(i.top-=f)}return i}function sh(e,t,n,i){void 0===t&&(t=null);var o=Ju(e,"left","top");n&&(o.left=n),i&&(o.top=i);var r=[];Xu=t,Yu=e.ownerDocument;var a=e.getBoundingClientRect(),l=o.left,s=o.left+a.width,d=uh(o.top,o.top+a.height),c=ch(l,s);return d.topSide&&r.push("top"),c.rightSide&&r.push("right"),c.leftSide&&r.push("left"),d.bottomSide&&r.push("bottom"),r}function dh(e,t,n){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+n.width},e.BL={top:e.TL.top+n.height,left:e.TL.left},e.BR={top:e.TL.top+n.height,left:e.TL.left+n.width}}function ch(e,t){var n=!1,i=!1;return e-Ch()<vh()&&(n=!0),t>yh()&&(i=!0),{leftSide:n,rightSide:i}}function uh(e,t){var n=!1,i=!1;return e-wh()<mh()&&(n=!0),t>bh()&&(i=!0),{topSide:n,bottomSide:i}}function hh(){return Xu.getBoundingClientRect().width}function ph(){return Xu.getBoundingClientRect().height}function fh(){return Xu.getBoundingClientRect().left}function gh(){return Xu.getBoundingClientRect().top}function mh(){return Xu?gh():0}function vh(){return Xu?fh():0}function yh(){return Xu?Ch()+fh()+hh():Ch()+Sh()}function bh(){return Xu?wh()+gh()+ph():wh()+xh()}function wh(){return Yu.documentElement.scrollTop||Yu.body.scrollTop}function Ch(){return Yu.documentElement.scrollLeft||Yu.body.scrollLeft}function xh(){return window.innerHeight}function Sh(){var e=window.innerWidth;return e-(e-(Va(document.documentElement)?0:document.documentElement.offsetWidth))}var Th=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("left")],t.prototype,"X",void 0),Object(O.__decorate)([Ks("top")],t.prototype,"Y",void 0),t}(fd),Eh=function(e){function t(t,n){return e.call(this,n,t)||this}return Object(O.__extends)(t,e),t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"width":Fs(this.element,{width:Ja(e.width)});break;case"height":Fs(this.element,{height:Ja(e.height)});break;case"zIndex":Fs(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var o=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+o).toString()+"px";break;case"offsetY":var r=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+r).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.remove("e-popup","e-rtl","e-popup-open","e-popup-close"),this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=Ja(this.width)),"auto"!==this.height&&(e.height=Ja(this.height)),Fs(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){Il.isDevice&&Pl.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++)Pl.add(t[e],"scroll",this.scrollRefresh,this)},t.prototype.unwireEvents=function(){Il.isDevice&&Pl.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++)Pl.remove(t[e],"scroll",this.scrollRefresh)},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||Va(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var n=this.getScrollableParent(e),i=0;i<n.length;i++)if(!this.isElementVisible(e,n[i]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var n=this.checkGetBoundingClientRect(e);if(!n.height||!n.width)return!1;if(Va(this.checkGetBoundingClientRect(t))){var i=window,o={top:i.scrollY,left:i.scrollX,right:i.scrollX+i.outerWidth,bottom:i.scrollY+i.outerHeight},r=Ju(e),a={top:r.top,left:r.left,right:r.left+n.width,bottom:r.top+n.height},l={top:o.bottom-a.top,left:o.right-a.left,bottom:a.bottom-o.top,right:a.right-o.left};return l.top>0&&l.left>0&&l.right>0&&l.bottom>0}var s=t.getBoundingClientRect();return!(n.bottom<s.top||n.bottom>s.bottom||n.right>s.right||n.left<s.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.setContent=function(){Va(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,t){Va(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,n=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var i=this.element.style.display,o=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(o=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=i,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=o)}else n?(i=this.element.style.display,this.element.style.display="block",e=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=i):e={left:0,top:0};Va(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return null}},t.prototype.getAnchorPosition=function(e,t,n,i,o){var r=this.checkGetBoundingClientRect(t),a=this.checkGetBoundingClientRect(e);if(Va(r)||Va(a))return null;var l=e,s={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?s=Ju(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==l.tagName&&(t=t.parentElement),s=function(e,t){var n=!1,i={left:0,top:0},o=e;if(!e||!t)return i;for(Va(t.offsetParent)&&"fixed"===t.style.position&&(n=!0);(t.offsetParent||n)&&e&&t.offsetParent!==e;)i.left+=e.offsetLeft,i.top+=e.offsetTop,e=e.offsetParent;for(e=o;(t.offsetParent||n)&&e&&t.offsetParent!==e;)i.left-=e.scrollLeft,i.top-=e.scrollTop,e=e.parentElement;return i}(l,t)),n.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?s.left+=window.innerWidth/2-r.width/2:s.left+="container"===this.targetType?a.width/2-r.width/2:a.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?s.left+=window.innerWidth-r.width:s.left+="container"===this.targetType?a.width-r.width:a.width}switch(n.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?s.top+=window.innerHeight/2-r.height/2:s.top+="container"===this.targetType?a.height/2-r.height/2:a.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?s.top+=window.innerHeight-r.height:s.top+="container"===this.targetType?a.height-r.height:a.height}return s.left+=i,s.top+=o,s},t.prototype.callFlip=function(e){var t=this.getRelateToElement();!function(e,t,n,i,o,r,a,l,s){if(void 0===a&&(a=null),void 0===l&&(l={X:!0,Y:!0}),t&&e&&o&&r&&(l.X||l.Y)){var d={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null},u=e.style.visibility;e.style.visibility="hidden",e.style.display="block";var h=e.getBoundingClientRect();e.style.removeProperty("display"),e.style.visibility=u;var p={posX:o,posY:r,offsetX:n,offsetY:i,position:{left:0,top:0}};Xu=a,Yu=t.ownerDocument,function(e,t,n,i,o){n.position=Ju(e,n.posX,n.posY,i,o),t.TL=Ju(e,"left","top",i,o),t.TR=Ju(e,"right","top",i,o),t.BR=Ju(e,"left","bottom",i,o),t.BL=Ju(e,"right","bottom",i,o)}(t,d,p,s,h),dh(c,p,h),l.X&&function e(t,n,i,o,r,a){var l=ch(n.TL.left,n.TR.left);i.TL.left-Ch()<=vh()&&(l.leftSide=!1),i.TR.left>=yh()&&(l.rightSide=!1),(l.leftSide&&!l.rightSide||!l.leftSide&&l.rightSide)&&(o.posX="right"===o.posX?"left":"right",o.offsetX=o.offsetX+r.width,o.offsetX=-1*o.offsetX,o.position=Ju(t,o.posX,o.posY,!1),dh(n,o,r),a&&e(t,n,i,o,r,!1))}(t,c,d,p,h,!0),l.Y&&d.TL.top>-1&&function e(t,n,i,o,r,a){var l=uh(n.TL.top,n.BL.top);i.TL.top-wh()<=mh()&&(l.topSide=!1),i.BL.top>=bh()&&t.getBoundingClientRect().bottom<window.innerHeight&&(l.bottomSide=!1),(l.topSide&&!l.bottomSide||!l.topSide&&l.bottomSide)&&(o.posY="top"===o.posY?"bottom":"top",o.offsetY=o.offsetY+r.height,o.offsetY=-1*o.offsetY,o.position=Ju(t,o.posX,o.posY,!1,r),dh(n,o,r),a&&e(t,n,i,o,r,!1))}(t,c,d,p,h,!0),function(e,t,n){var i=0,o=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var r=Ju(e.offsetParent,"left","top",!1,n);i=r.left,o=r.top}e.style.top=t.position.top+t.offsetY-o+"px",e.style.left=t.position.left+t.offsetX-i+"px"}(e,p,h)}}(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==sh(this.element,this.viewPortElement).length)if(Va(this.viewPortElement)){var t=lh(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var n=this.checkGetBoundingClientRect(this.element),i=this.checkGetBoundingClientRect(this.viewPortElement);if(Va(n)||Va(i))return null;e&&!0===e.Y&&(i.top>n.top?this.element.style.top="0px":i.bottom<n.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(n.bottom-i.bottom)+"px")),e&&!0===e.X&&(i.right<n.right?this.element.style.left=parseInt(this.element.style.left,10)-(n.right-i.right)+"px":i.left>n.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(i.left-n.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var n=this;if(this.wireEvents(),1e3===this.zIndex||!Va(t)){var i=Va(t)?this.element:t;this.zIndex=kh(i),Fs(this.element,{zIndex:this.zIndex})}e=Va(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(As([this.element],"e-popup-close"),Ds([this.element],"e-popup-open"),this.checkCollision(),As([this.element],"e-popup-open"),Ds([this.element],"e-popup-close")),Va(e)?(As([this.element],"e-popup-close"),Ds([this.element],"e-popup-open"),this.trigger("open")):(e.begin=function(){n.isDestroyed||(As([n.element],"e-popup-close"),Ds([n.element],"e-popup-open"))},e.end=function(){n.isDestroyed||n.trigger("open")},new rd(e).animate(this.element))},t.prototype.hide=function(e){var t=this;Va(e=Va(e)||"object"!=typeof e?this.hideAnimation:e)?(As([this.element],"e-popup-open"),Ds([this.element],"e-popup-close"),this.trigger("close")):(e.end=function(){t.isDestroyed||(As([t.element],"e-popup-open"),Ds([t.element],"e-popup-close"),t.trigger("close"))},new rd(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),_h(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var n=getComputedStyle(t);"fixed"===n.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,Va(this.element.offsetParent)&&"fixed"===n.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},Object(O.__decorate)([Ks("auto")],t.prototype,"height",void 0),Object(O.__decorate)([Ks("auto")],t.prototype,"width",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"content",void 0),Object(O.__decorate)([Ks("container")],t.prototype,"targetType",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"viewPortElement",void 0),Object(O.__decorate)([Ks({X:"none",Y:"none"})],t.prototype,"collision",void 0),Object(O.__decorate)([Ks("")],t.prototype,"relateTo",void 0),Object(O.__decorate)([Qs({},Th)],t.prototype,"position",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offsetX",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offsetY",void 0),Object(O.__decorate)([Ks(1e3)],t.prototype,"zIndex",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableRtl",void 0),Object(O.__decorate)([Ks("reposition")],t.prototype,"actionOnScroll",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"showAnimation",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"hideAnimation",void 0),Object(O.__decorate)([nd()],t.prototype,"open",void 0),Object(O.__decorate)([nd()],t.prototype,"close",void 0),Object(O.__decorate)([nd()],t.prototype,"targetExitViewport",void 0),Object(O.__decorate)([id],t)}(vd);function _h(e,t){for(var n=getComputedStyle(e),i=[],o=/(auto|scroll)/,r=e.parentElement;r&&"HTML"!==r.tagName;){var a=getComputedStyle(r);"absolute"===n.position&&"static"===a.position||!o.test(a.overflow+a.overflowY+a.overflowX)||i.push(r),r=r.parentElement}return t||i.push(document),i}function kh(e){for(var t=e.parentElement,n=[];t&&"BODY"!==t.tagName;){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==i&&"static"!==o&&n.push(i),t=t.parentElement}for(var r=[],a=0;a<document.body.children.length;a++)e.isEqualNode(document.body.children[a])||(i=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position"),"auto"!==i&&"static"!==o&&r.push(i));r.push("999");var l=[];if(!Va(e.parentElement)&&"BODY"!==e.parentElement.tagName){var s=[].slice.call(e.parentElement.children);for(a=0;a<s.length;a++)i=document.defaultView.getComputedStyle(s[a],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(s[a],null).getPropertyValue("position"),"auto"!==i&&"static"!==o&&l.push(i)}var d=n.concat(r,l),c=Math.max.apply(Math,d)+1;return c>2147483647?2147483647:c}function Dh(e){for(var t,n=e.childNodes,i=0;i<n.length;i++)if(3===(t=n[i]).nodeType)return t;return null}new pl;var Ah,Oh,Ih,Ph,Rh,Mh,Nh,Lh,Hh=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(O.__extends)(t,e),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=ad(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&Ds([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),!Ka()||Ka()&&"progress-btn"!==this.getModuleName()){if(this.content){var e=this.enableHtmlSanitizer?Pd.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss()}this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var t=this.element.childNodes[0];!t||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,t)}},t.prototype.wireEvents=function(){this.isToggle&&Pl.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&Pl.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var t,n=["e-primary","e-rtl","e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(n=n.concat(this.cssClass.split(" "))),e.prototype.destroy.call(this),As([this.element],n),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,"")),(t=this.element.querySelector("span.e-btn-icon"))&&Ns(t),this.unWireEvents(),hd&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":var o=this.element.querySelector("span.e-btn-icon");o?e.iconCss?(o.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&o.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):Ns(o):this.setIconCss();break;case"iconPosition":As([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(o=this.element.querySelector("span.e-btn-icon"))&&Ns(o),this.setIconCss();break;case"cssClass":t.cssClass&&As([this.element],t.cssClass.split(" ")),e.cssClass&&Ds([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl");break;case"content":Dh(this.element)||this.element.classList.remove("e-icon-btn"),(!Ka()||Ka()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(e.content=Pd.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss());break;case"isToggle":e.isToggle?Pl.add(this.element,"click",this.btnClickHandler,this):(Pl.remove(this.element,"click",this.btnClickHandler),As([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Object(O.__decorate)([Ks("Left")],t.prototype,"iconPosition",void 0),Object(O.__decorate)([Ks("")],t.prototype,"iconCss",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"disabled",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"isPrimary",void 0),Object(O.__decorate)([Ks("")],t.prototype,"cssClass",void 0),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"isToggle",void 0),Object(O.__decorate)([Ks()],t.prototype,"locale",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableHtmlSanitizer",void 0),Object(O.__decorate)([nd()],t.prototype,"created",void 0),Object(O.__decorate)([id],t)}(vd),Bh=["north-west","north","north-east","west","east","south-west","south","south-east"],jh=0,zh=0,Uh=0,Fh=0,Gh=0,qh=0,Vh="e-resize-handle",Wh="e-focused-handle",Yh=["e-restrict-left"],Xh="e-resize-viewport",Zh=null,Jh=null,Kh=null,Qh=!0,$h=0,ep=!0,tp=["north","west","east","south"];function np(e){sp();var t=ks("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),Ah.appendChild(t)}function ip(e){var t;return Va(e)||(t="string"==typeof e?document.querySelector(e):e),t}function op(e){Va(e)&&(e=this);for(var t=Ah.querySelectorAll("."+Vh),n=0;n<t.length;n++)Pl.add(Oh=t[n],"mousedown",ap,e),Pl.add(Oh,"msie"===Il.info.name?"pointerdown":"touchstart",dp,e);var i=Ah.querySelectorAll(".e-dialog-border-resize");if(!Va(i))for(n=0;n<i.length;n++)Pl.add(Oh=i[n],"mousedown",ap,e),Pl.add(Oh,"msie"===Il.info.name?"pointerdown":"touchstart",dp,e)}function rp(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function ap(e){if(e.preventDefault(),Ah=e.target.parentElement,sp(),Gh=e.pageX,qh=e.pageY,e.target.classList.add(Wh),Va(Zh)||!0!==Zh(e,this)){var t=Va(Nh)?document:Nh;Pl.add(t,"mousemove",cp,this),Pl.add(document,"mouseup",lp,this);for(var n=0;n<Yh.length;n++)Qh=!Ah.classList.contains(Yh[n])}}function lp(e){var t="msie"===Il.info.name?"pointermove":"touchmove",n="msie"===Il.info.name?"pointerup":"touchend",i=Va(Nh)?document:Nh;Pl.remove(i,"mousemove",cp),Pl.remove(i,t,cp),Pl.remove(i,"msie"===Il.info.name?"pointerdown":"touchstart",cp),Va(document.body.querySelector("."+Wh))||document.body.querySelector("."+Wh).classList.remove(Wh),Va(Kh)||Kh(e,this),Pl.remove(document,"mouseup",lp),Pl.remove(document,n,lp)}function sp(){jh=parseFloat(getComputedStyle(Ah,null).getPropertyValue("width").replace("px","")),zh=parseFloat(getComputedStyle(Ah,null).getPropertyValue("height").replace("px","")),Uh=Ah.getBoundingClientRect().left,Fh=Ah.getBoundingClientRect().top}function dp(e){Ah=e.target.parentElement,sp();var t=e.touches?e.changedTouches[0]:e;if(Gh=t.pageX,qh=t.pageY,Va(Zh)||!0!==Zh(e,this)){var n="msie"===Il.info.name?"pointermove":"touchmove",i="msie"===Il.info.name?"pointerup":"touchend",o=Va(Nh)?document:Nh;Pl.add(o,n,cp,this),Pl.add(document,i,lp)}}function cp(e){if(e.target.classList.contains(Vh)&&e.target.classList.contains(Wh)?Oh=e.target:Va(document.body.querySelector("."+Wh))||(Oh=document.body.querySelector("."+Wh)),!Va(Oh)){for(var t="",n=0;n<Bh.length;n++)Oh.classList.contains("e-"+Bh[n])&&(t=Bh[n]);switch(Va(Jh)||Jh(e,this),t){case"south":hp(e);break;case"north":pp(e);break;case"west":fp(e);break;case"east":gp(e);break;case"south-east":hp(e),gp(e);break;case"south-west":hp(e),fp(e);break;case"north-east":pp(e),gp(e);break;case"north-west":pp(e),fp(e)}}}function up(e){return e.getBoundingClientRect()}function hp(e){var t,n=document.documentElement.clientHeight,i=!1,o=(e.touches?e.changedTouches[0]:e).pageY,r=up(Ah);Va(Nh)||(t=up(Nh)),Va(Nh)?Va(Nh)&&(n-o>=0||r.top<0)&&(i=!0):i=!0;var a=zh+(o-qh);a=a>Ih?a:Ih;var l=0;Va(Nh)||(l=t.top);var s=Va(Nh)?0:Nh.offsetHeight-Nh.clientHeight,d=r.top-l-s/2;if(d=d<0?0:d,r.top>0&&d+a>Ph){if(i=!1,Ah.classList.contains(Xh))return;Ah.style.height=Ph-parseInt(d.toString(),10)+"px"}else{var c=0;if(i){r.top<0&&n+(r.height+r.top)>0&&a+(c=r.top)<=30&&(a=r.height-(r.height+r.top)+30),a+r.top>=Ph&&(Ah.style.height=r.height+(n-(r.height+r.top))+"px");var u=Va(Nh)?c:d;a>=Ih&&a+u<=Ph&&(Ah.style.height=a+"px")}}}function pp(e){var t,n=!1,i="mouse"===rp(e.type)?e.pageY:e.touches[0].pageY,o=up(Ah);Va(Nh)||(t=up(Nh)),!Va(Nh)&&o.top-t.top>0?n=!0:Va(Nh)&&i>0&&(n=!0);var r=zh-(i-qh);if(n&&r>=Ih&&r<=Ph){var a=0;Va(Nh)||(a=t.top);var l=Fh-a+(i-qh);l=l>0?l:1,Ah.style.height=r+"px",Ah.style.top=l+"px"}}function fp(e){var t,n=document.documentElement.clientWidth,i=!1;Va(Nh)||(t=up(Nh));var o="mouse"===rp(e.type)?e.pageX:e.touches[0].pageX,r=up(Ah),a=Va(Nh)?0:Nh.offsetWidth-Nh.clientWidth,l=Va(Nh)?0:t.left,s=Va(Nh)?0:t.width;Va(Lh)&&(Va(Nh)?Lh=n:(Lh=r.left-l-a/2+r.width,Lh+=s-a-Lh)),!Va(Nh)&&Math.floor(r.left-t.left+r.width+(t.right-r.right))-a<=Mh?i=!0:Va(Nh)&&o>=0&&(i=!0);var d=jh-(o-Gh);if(Qh&&(d=d>Lh?Lh:d),i&&d>=Rh&&d<=Mh){var c=0;Va(Nh)||(c=t.left);var u=Uh-c+(o-Gh);u=u>0?u:1,d!==$h&&ep&&(Ah.style.width=d+"px"),Qh&&(Ah.style.left=u+"px",ep=1!==u)}$h=d}function gp(e){var t,n=document.documentElement.clientWidth,i=!1;Va(Nh)||(t=up(Nh));var o=(e.touches?e.changedTouches[0]:e).pageX,r=up(Ah);!Va(Nh)&&(r.left-t.left+r.width<Mh||r.right-t.left>r.width)?i=!0:Va(Nh)&&n-o>0&&(i=!0);var a=jh+(o-Gh),l=0;if(Va(Nh)||(l=t.left),r.left-l+a>Mh){if(i=!1,Ah.classList.contains(Xh))return;Ah.style.width=Mh-(r.left-l)+"px"}i&&a>=Rh&&a<=Mh&&(Ah.style.width=a+"px")}function mp(){for(var e=Ah.querySelectorAll("."+Vh),t=0;t<e.length;t++)Ns(e[t]);var n=Ah.querySelectorAll(".e-dialog-border-resize");if(!Va(n))for(t=0;t<n.length;t++)Ns(n[t])}var vp,yp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks()],t.prototype,"buttonModel",void 0),Object(O.__decorate)([Ks("Button")],t.prototype,"type",void 0),Object(O.__decorate)([nd()],t.prototype,"click",void 0),t}(fd),bp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("Fade")],t.prototype,"effect",void 0),Object(O.__decorate)([Ks(400)],t.prototype,"duration",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"delay",void 0),t}(fd),wp="e-dialog",Cp="e-dlg-target",xp="e-scroll-disabled",Sp="e-dlg-fullscreen",Tp="Information",Ep=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(O.__extends)(t,e),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=this.minHeight.toString()),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},t.prototype.preRender=function(){var e=this;if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(t){e.hide(t)},this.dlgOverlayClickEventHandler=function(t){t.preventFocus=!1,e.trigger("overlayClick",t,function(t){t.preventFocus||e.focusContent()})},this.l10n=new Ed("dialog",{close:"Close"},this.locale),this.checkPositionData(),Va(this.target)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=t}},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!Va(this.position)){if(!Va(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}Va(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(e=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e)}},t.prototype.getEle=function(e,t){for(var n=void 0,i=0;i<e.length;i++)if(e[i].classList.contains(t)){n=e[i];break}return n},t.prototype.getMinHeight=function(){var e="0px",t="0px";Va(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);var n=this.getEle(this.element.children,"e-footer-content");Va(n)||(t=getComputedStyle(n).height);var i,o=parseInt(e.slice(0,e.indexOf("p")),10),r=parseInt(t.slice(0,t.indexOf("p")),10);return i=o+30+(isNaN(r)?0:r),Ih=i,o+30+r},t.prototype.onResizeStart=function(e,t){return t.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e,t){t.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,t){t.trigger("resizeStop",e)},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!Va(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add("e-dlg-resizable");for(var e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,n="",i=0;i<this.resizeHandles.length;i++){if("All"===this.resizeHandles[i]){n="south north east west north-east north-west south-east south-west";break}var o="";switch(this.resizeHandles[i].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[i].toString()}n+=o.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===n.trim()?n="south-west":this.enableRtl&&"south-west"===n.trim()&&(n="south-east"),this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):this.isModal&&this.target===document.body&&this.element.classList.add("e-resize-viewport"),function(e){Zh=e.resizeBegin,Jh=e.resizing,Kh=e.resizeComplete,Ah=ip(e.element),Nh=ip(e.boundary);for(var t=e.direction.split(" "),n=0;n<t.length;n++)if(tp.indexOf(t[n])>=0&&t[n])np(t[n]);else if(""!==t[n].trim()){var i=ks("div",{className:"e-icons "+Vh+" e-"+t[n]});Ah.appendChild(i)}Ih=e.minHeight,Rh=e.minWidth,Mh=e.maxWidth,Ph=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?op(e.proxy):op()}({element:this.element,direction:n,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else mp(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?"e-restrict-left":"e-resize-viewport"),this.element.classList.remove("e-dlg-resizable")},t.prototype.getFocusElement=function(e){var t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:t[t.length-1]}},t.prototype.keyDown=function(e){var t=this;if(9===e.keyCode&&this.isModal){var n=void 0;Va(this.btnObj)||(n=this.btnObj[this.btnObj.length-1]),Va(this.btnObj)&&!Va(this.ftrTemplateContent)&&(n=this.getFocusElement(this.ftrTemplateContent)),Va(this.btnObj)&&Va(this.ftrTemplateContent)&&!Va(this.contentEle)&&(n=this.getFocusElement(this.contentEle)),Va(n)||document.activeElement!==n.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),Va(n)||n.element.focus())}var i,o=document.activeElement,r=["input","textarea"].indexOf(o.tagName.toLowerCase())>-1,a=!1;r||(a=o.hasAttribute("contenteditable")&&"true"===o.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&this.hide(e),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==o.tagName.toLowerCase()&&r&&!Va(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===o.tagName.toLowerCase()||a)&&!Va(this.primaryButtonEle))&&this.buttons.some(function(e,t){i=t;var n=e.buttonModel;return!Va(n)&&!0===n.isPrimary})&&"function"==typeof this.buttons[i].click&&setTimeout(function(){t.buttons[i].click.call(t,e)})},t.prototype.initialize=function(){Va(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||Ds([this.element],wp),Il.isDevice&&Ds([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||Hs(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&Va(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&Va(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||Va(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||Va(this.footerTemplate)?Va(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(Va(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!Va(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(Hs(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&Va(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var t=0,n=this.dlgContainer.children;t<n.length;t++)n[t].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=n[t])}if(!0!==this.element.classList.contains("e-alert-dialog")&&!0!==this.element.classList.contains("e-confirm-dialog")&&!Va(this.element.parentElement)){var i=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),i.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}Va(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Eh(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(t){var n={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",n,function(t){t.preventFocus||e.focusContent()})},close:function(t){e.isModal&&Ds([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var n=document.activeElement;Va(n)||Va(n.blur)||n.blur(),Va(e.storeActiveElement)||Va(e.storeActiveElement.focus)||e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(Ds([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));Va(t)||(t.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var t;t=Va(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this;this.dragObj=new Cd(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(t){e.trigger("dragStart",t,function(e){Ka()&&e.bindEvents(t.dragElement)})},dragStop:function(t){e.isModal&&(Va(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",t),e.element.classList.remove("e-restrict-left")},drag:function(t){e.trigger("drag",t)}}),Va(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var t=Va(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),n=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(n.outerHTML)}this.setFooterTemplate()}e=0;for(var i,o=this.element.children;e<o.length;e++)o[e].classList.contains("e-footer-content")&&(i=o[e].querySelectorAll("button"));for(e=0;e<this.buttons.length;e++)this.isBlazorServerRender()||(this.btnObj[e]=new Hh(this.buttons[e].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!Va(this.ftrTemplateContent)&&"function"==typeof this.buttons[e].click&&i.length>0&&Pl.add(i[e],"click",this.buttons[e].click,this),this.isBlazorServerRender()||Va(this.ftrTemplateContent)||(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.setContent=function(){Hs(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(Va(this.content)||""===this.content)&&this.initialRender||(Object.keys(window),"string"!=typeof this.content||Ka()?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content"):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),Va(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!Il.isIE||""!==this.element.style.width||Va(this.width)||(this.element.style.width=Ja(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,t,n){var i,o,r;Object.keys(window),o=t.classList.contains("e-dlg-header")?this.element.id+"header":t.classList.contains("e-footer-content")?this.element.id+"footerTemplate":this.element.id+"content",Va(e.outerHTML)?"string"!=typeof e||Ka()&&!this.isStringTemplate?(i=rs(e),r=e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);var a=[];if(!Va(i)){for(var l=0,s=i({},this,n,o,!(Ka()&&!this.isStringTemplate&&0===r.indexOf("<div>Blazor"))||this.isStringTemplate);l<s.length;l++)a.push(s[l]);Rs([].slice.call(a),t)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var t=Pd.beforeSanitize();qa(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!Va(t.helper)?e=t.helper(e):t.cancel||(e=Pd.serializeValue(t,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!Va(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,Il.isIE&&"auto"===this.height&&!Va(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?Ds([this.element],"e-rtl"):As([this.element],"e-rtl")),Va(this.element.querySelector(".e-resize-handle"))||(mp(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(Va(this.content)||""===this.content){var t=""!==this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g,"");(this.element.children.length>0||t)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(t){8!==t.nodeType&&e.innerContentElement.appendChild(t)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Hs(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0])},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:"e-footer-content"}),""===this.footerTemplate||Va(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){Va(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:"e-dlg-header-content"}))},t.prototype.renderCloseIcon=function(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new Hh({cssClass:"e-flat",iconCss:"e-icon-dlg-close e-icons"}),this.closeIconTitle(),Va(this.headerContent)?(this.createHeaderContent(),Ps([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Ps([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){this.cssClass&&Ds([this.element],this.cssClass.split(" ")),e&&As([this.element],e.split(" "))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),Ds([this.element],"e-dlg-modal"),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var t,n=0;n<e.length;n++){if(((t=e[n]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},t.prototype.focusableElements=function(e){if(!Va(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getAutoFocusNode=function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),n=e.querySelectorAll("[autofocus]"),i=this.getValidFocusNode(n);if(Ka()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),Va(i)){if(!Va(i=this.focusableElements(this.contentEle)))return i;if(!Va(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=i;return t},t.prototype.disableElement=function(e,t){var n=e?e.matches||e.webkitMatchesSelector||e.msMatchesSelector:null;if(n)for(;e;e=e.parentNode)if(e instanceof Element&&n.call(e,t))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),t=Va(e)?this.element:e,n=Il.userAgent;(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0)&&this.element.focus(),t.focus(),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){Pl.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){Pl.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return Ka()&&this.isServerRendered},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,t){if(this.element.classList.contains(wp))for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"content":Va(this.content)||""===this.content?Va(this.contentEle)||(Ns(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),Va(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!Va(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),Ns(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||Va(this.header)?this.headerEle&&(Ns(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!Va(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||Va(this.footerTemplate)){if(!this.ftrTemplateContent)return;Ns(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!Va(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName("e-icon-dlg-close").length>0?this.showCloseIcon||""!==this.header&&!Va(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():Ns(this.closeIcon):(Ns(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":Fs(this.element,{height:Ja(e.height)});break;case"width":Fs(this.element,{width:Ja(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":var o=this.buttons.length;Va(this.ftrTemplateContent)||this.isBlazorServerRender()||(Ns(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var r=0;r<o;r++)Va(this.buttons[r].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!Va(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var a=Va(t.position.X)?this.position.X:t.position.X,l=Va(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+a+"-"+l)&&this.dlgContainer.classList.remove("e-dlg-"+a+"-"+l)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",Va(this.targetEle)||this.targetEle.appendChild(this.dlgContainer);else{for(As([this.element],"e-dlg-modal"),As([document.body],[Cp,xp]),Ns(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&Pl.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,t){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=kh(e),this.isProtectedOnChange=n,t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){Mh=this.targetEle.clientWidth,function(e){Ph=e}(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){if(!this.isDestroyed){var t=["e-rtl","e-dlg-modal","e-dlg-resizable","e-restrict-left",Sp,"e-device"],n=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(As([this.targetEle],[Cp,xp]),!Va(this.element)&&this.element.classList.contains(Sp)&&As([document.body],[Cp,xp]),this.isModal&&As([Va(this.targetEle)?document.body:this.targetEle],xp),this.unWireEvents(),!Va(this.btnObj))for(var i=0;i<this.btnObj.length;i++)this.btnObj[i].destroy();if(Va(this.dragObj)||this.dragObj.destroy(),!Va(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),As([this.element],t),Va(this.cssClass)||""===this.cssClass||As([this.element],this.cssClass.split(" ")),Va(this.refElement)||Va(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),Ns(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(Ns(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),Ns(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!Va(this.element.children))for(i=0;i<=this.element.children.length;i++)Ns(this.element.children[i-=i]);for(i=0;i<n.length;i++)this.element.removeAttribute(n[i]);this.isBlazorServerRender()?this.isDestroyed=!0:e.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&Pl.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&Pl.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&Pl.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&Pl.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!Va(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&Pl.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.show=function(e){var t=this;if(this.element.classList.contains(wp)){if(!this.element.classList.contains("e-popup-open")||!Va(e)){Va(e)||this.fullScreen(e);var n=Ka()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",n,function(e){if(!e.cancel){t.element.style.maxHeight!==n.maxHeight&&(t.allowMaxHeight=!1,t.element.style.maxHeight=n.maxHeight),t.storeActiveElement=document.activeElement,t.element.tabIndex=-1,t.isModal&&!Va(t.dlgOverlay)&&(t.dlgOverlay.style.display="block",t.dlgContainer.style.display="flex",As([t.dlgOverlay],"e-fade"),Va(t.targetEle)?Ds([document.body],[Cp,xp]):(t.dlgContainer.style.position=t.targetEle===document.body?"fixed":"absolute",t.dlgOverlay.style.position="absolute",t.element.style.position="relative",Ds([t.targetEle],[Cp,xp])));var i={name:t.animationSettings.effect+"In",duration:t.animationSettings.duration,delay:t.animationSettings.delay};t.calculatezIndex&&(t.setzIndex(t.isModal?t.element.parentElement:t.element,!0),Fs(t.element,{zIndex:t.zIndex}),t.isModal&&t.setOverlayZindex(t.zIndex)),"None"===t.animationSettings.effect?t.popupObj.show():t.popupObj.show(i),t.dialogOpen=!0;var o=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!0,t.preventVisibility=!0,t.isProtectedOnChange=o}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var t=this;if(this.element.classList.contains(wp)&&this.preventVisibility){var n=Ka()?{cancel:!1,isInteracted:!!e,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:e}:{cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e};this.closeArgs=n,this.trigger("beforeClose",n,function(e){if(!e.cancel){t.isModal&&(Va(t.targetEle)?As([document.body],[Cp,xp]):As([t.targetEle],[Cp,xp]));var n={name:t.animationSettings.effect+"Out",duration:t.animationSettings.duration,delay:t.animationSettings.delay};"None"===t.animationSettings.effect?t.popupObj.hide():t.popupObj.hide(n),t.dialogOpen=!1;var i=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!1,t.preventVisibility=!1,t.isProtectedOnChange=i}})}},t.prototype.fullScreen=function(e){if(e){Ds([this.element],Sp);var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=Va(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=t,Ds([document.body],[Cp,xp]),this.allowDragging&&!Va(this.dragObj)&&this.dragObj.destroy()}else As([this.element],Sp),As([document.body],[Cp,xp]),this.allowDragging&&!Va(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return Va(e)?this.btnObj:this.btnObj[e]},Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"enableHtmlSanitizer",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"showCloseIcon",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"isModal",void 0),Object(O.__decorate)([Ks("")],t.prototype,"header",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"visible",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableResize",void 0),Object(O.__decorate)([Ks(["South-East"])],t.prototype,"resizeHandles",void 0),Object(O.__decorate)([Ks("auto")],t.prototype,"height",void 0),Object(O.__decorate)([Ks("")],t.prototype,"minHeight",void 0),Object(O.__decorate)([Ks("100%")],t.prototype,"width",void 0),Object(O.__decorate)([Ks("")],t.prototype,"cssClass",void 0),Object(O.__decorate)([Ks(1e3)],t.prototype,"zIndex",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"target",void 0),Object(O.__decorate)([Ks("")],t.prototype,"footerTemplate",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"allowDragging",void 0),Object(O.__decorate)([ed([{}],yp)],t.prototype,"buttons",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"closeOnEscape",void 0),Object(O.__decorate)([Qs({},bp)],t.prototype,"animationSettings",void 0),Object(O.__decorate)([Qs({X:"center",Y:"center"},Th)],t.prototype,"position",void 0),Object(O.__decorate)([nd()],t.prototype,"created",void 0),Object(O.__decorate)([nd()],t.prototype,"open",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeSanitizeHtml",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeOpen",void 0),Object(O.__decorate)([nd()],t.prototype,"close",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeClose",void 0),Object(O.__decorate)([nd()],t.prototype,"dragStart",void 0),Object(O.__decorate)([nd()],t.prototype,"dragStop",void 0),Object(O.__decorate)([nd()],t.prototype,"drag",void 0),Object(O.__decorate)([nd()],t.prototype,"overlayClick",void 0),Object(O.__decorate)([nd()],t.prototype,"resizeStart",void 0),Object(O.__decorate)([nd()],t.prototype,"resizing",void 0),Object(O.__decorate)([nd()],t.prototype,"resizeStop",void 0),Object(O.__decorate)([nd()],t.prototype,"destroyed",void 0),Object(O.__decorate)([id],t)}(vd);!function(e){function t(e,t){var n=new Ep(e);return n.appendTo(t),n}function n(e,t){return e.header=Va(t.title)?Tp:t.title,e.content=Va(t.content)?"":t.content,e.isModal=!!Va(t.isModal)||t.isModal,e.showCloseIcon=!Va(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!Va(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!Va(t.closeOnEscape)&&t.closeOnEscape,e.position=Va(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=Va(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=Va(t.cssClass)?"":t.cssClass,e.zIndex=Va(t.zIndex)?1e3:t.zIndex,e.open=Va(t.open)?null:t.open,e}function i(e,t,n){var i=n;return Va(t.text)||(i.buttonModel.content=t.text),Va(t.icon)||(i.buttonModel.iconCss=t.icon),Va(t.cssClass)||(i.buttonModel.cssClass=t.cssClass),Va(t.click)||(i.click=t.click),i}e.alert=function(e){var o,r,a=ks("div",{className:"e-alert-dialog"});return document.body.appendChild(a),(o=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:Tp,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e,t){var n=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return Va(t.okButton)?e.buttons=n:e.buttons[0]=i(0,t.okButton,n[0]),e}(n({buttons:[]},r=e),r),a)).close=function(){e&&e.close&&e.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove("e-scroll-disabled")):o.element.remove()},o},e.confirm=function(e){var o,r,a=ks("div",{className:"e-confirm-dialog"});return document.body.appendChild(a),(o=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:Tp,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e,t){var n={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},o={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return e.buttons[0]=Va(t.okButton)?n:i(0,t.okButton,n),e.buttons[1]=Va(t.cancelButton)?o:i(0,t.cancelButton,o),e}(n({buttons:[]},r=e),r),a)).close=function(){e&&e.close&&e.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove("e-scroll-disabled")):o.element.remove()},o}}(vp||(vp={}));var _p,kp,Dp,Ap,Op,Ip,Pp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Object(O.__decorate)([Ks({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(fd),Rp=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.isBlazorTooltip=!1,i.contentTargetValue=null,i.contentEvent=null,i.contentAnimation=null,i}return Object(O.__extends)(t,e),t.prototype.initialize=function(){this.formatPosition(),this.isServerRender()||Ds([this.element],"e-tooltip")},t.prototype.isServerRender=function(){return Ka()&&this.isServerRendered},t.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},t.prototype.renderArrow=function(){var e;this.setTipClass(this.position),this.isServerRender()?(Ds([(e=this.tooltipEle.querySelector(".e-arrow-tip")).querySelector(".e-arrow-tip-outer")],this.tipClass),Ds([e.querySelector(".e-arrow-tip-inner")],this.tipClass),this.tooltipEle.appendChild(e)):((e=this.createElement("div",{className:"e-arrow-tip "+this.tipClass})).appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(this.createElement("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(e))},t.prototype.setTipClass=function(e){this.tipClass=0===e.indexOf("Right")?"e-tip-left":0===e.indexOf("Bottom")?"e-tip-top":0===e.indexOf("Left")?"e-tip-right":"e-tip-bottom"},t.prototype.renderPopup=function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new Eh(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var t=Ju(e,this.tooltipPositionX,this.tooltipPositionY),n=this.calculateTooltipOffset(this.position),i=this.collisionFlipFit(e,t.left+n.left,t.top+n.top);return this.tooltipEle.style.display="",i},t.prototype.reposition=function(e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){ls(this.element.id+"content"),this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},n=this.tooltipEle.offsetWidth,i=this.tooltipEle.offsetHeight,o=this.tooltipEle.querySelector(".e-arrow-tip"),r=o?o.offsetWidth:0,a=o?o.offsetHeight:0,l=this.showTipPointer?0:8,s=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),d=r/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(l+=2),e){case"RightTop":t.left+=r+l,t.top-=i-s;break;case"RightCenter":t.left+=r+l,t.top-=i/2;break;case"RightBottom":t.left+=r+l,t.top-=s;break;case"BottomRight":t.top+=a+l,t.left-=d;break;case"BottomCenter":t.top+=a+l,t.left-=n/2;break;case"BottomLeft":t.top+=a+l,t.left-=n-d;break;case"LeftBottom":t.left-=r+n+l,t.top-=s;break;case"LeftCenter":t.left-=r+n+l,t.top-=i/2;break;case"LeftTop":t.left-=r+n+l,t.top-=i-s;break;case"TopLeft":t.top-=i+a+l,t.left-=n-d;break;case"TopRight":t.top-=i+a+l,t.left-=d;break;default:t.top-=i+a+l,t.left-=n/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},t.prototype.updateTipPosition=function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");As(t,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(e),Ds(t,this.tipClass)},t.prototype.adjustArrow=function(e,t,n,i){if(!1!==this.showTipPointer){var o,r;this.updateTipPosition(t),this.tooltipEle.style.display="block";var a,l=this.tooltipEle.clientWidth,s=this.tooltipEle.clientHeight,d=this.tooltipEle.querySelector(".e-arrow-tip"),c=this.tooltipEle.querySelector(".e-arrow-tip-inner"),u=d.offsetWidth,h=d.offsetHeight;this.tooltipEle.style.display="","e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass?("e-tip-bottom"===this.tipClass?(r="99.9%",c.style.top="-"+(h-2)+"px"):(r=-(h-1)+"px",c.style.top="-"+(h-6)+"px"),e&&(o=(a="Center"!==n||l>e.offsetWidth||this.mouseTrail)&&"Left"===n||!a&&"End"===this.tipPointerPosition?l-u-2+"px":a&&"Right"===n||!a&&"Start"===this.tipPointerPosition?"2px":l/2-u/2+"px")):("e-tip-right"===this.tipClass?(o="99.9%",c.style.left="-"+(u-2)+"px"):(o=-(u-1)+"px",c.style.left=u-2-u+"px"),r=(a="Center"!==i||s>e.offsetHeight||this.mouseTrail)&&"Top"===i||!a&&"End"===this.tipPointerPosition?s-h-2+"px":a&&"Bottom"===i||!a&&"Start"===this.tipPointerPosition?"2px":s/2-h/2+"px"),d.style.top=r,d.style.left=o}},t.prototype.renderContent=function(e){var t=this.tooltipEle.querySelector(".e-tip-content");if(this.cssClass&&Ds([this.tooltipEle],this.cssClass.split(" ")),e&&!Va(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),Va(this.content))e&&!Va(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(this.isBlazorTooltip||!this.isServerRender())if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"==typeof this.content&&this.content.indexOf("<div>Blazor")<0)this.enableHtmlSanitizer&&this.setProperties({content:Pd.sanitize(this.content)},!0),t[this.enableHtmlParse?"innerHTML":"textContent"]=this.content;else{var n=rs(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t);n&&Rs(n,t),this.renderReactTemplates(),"string"==typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,as(this.element.id+"content","Content",this))}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),Pl.add(e,Il.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,t){var n=(e.getAttribute("aria-describedby")||"").split(/\s+/);n.indexOf(t)<0&&n.push(t),Hs(e,{"aria-describedby":n.join(" ").trim(),"data-tooltip-id":t})},t.prototype.removeDescribedBy=function(e){var t=e.getAttribute("data-tooltip-id"),n=(e.getAttribute("aria-describedby")||"").split(/\s+/),i=n.indexOf(t);-1!==i&&n.splice(i,1),e.removeAttribute("data-tooltip-id");var o=n.join(" ").trim();o?e.setAttribute("aria-describedby",o):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var t=this;this.isSticky||(this.autoCloseTimer=setTimeout(function(){t.close()},1500))},t.prototype.targetClick=function(e){var t;Va(t=this.target?Us(e.target,this.target):this.element)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))},t.prototype.targetHover=function(e){var t;if(!(Va(t=this.target?Us(e.target,this.target):this.element)||null!==t.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var n=0,i=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));n<i.length;n++)this.restoreElement(i[n]);this.showTooltip(t,this.animation.open,e)}},t.prototype.showTooltip=function(e,t,n){var i=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:n?n.type:null,cancel:!1,target:e,event:n||null,element:this.tooltipEle,isInteracted:!Va(n)},this.trigger("beforeRender",this.tooltipEventArgs,(function(o){i.beforeRenderCallback(o,e,n,t)}).bind(this))},t.prototype.beforeRenderCallback=function(e,t,n,i){var o=!1;e.cancel?(this.isHidden=!0,this.clear()):(this.isHidden=!1,Va(this.tooltipEle)?(this.isServerRender()?(this.contentTargetValue=t,this.contentEvent=n,this.contentAnimation=i,this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"true"}),o=!0):(this.ctrlId=this.element.getAttribute("id")?Ya(this.element.getAttribute("id")):Ya("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+Ja(this.width)+";height:"+Ja(this.height)+";position:absolute;"}),this.beforeRenderBlazor(t,this)),o||this.afterRenderBlazor(t,n,i,this)):(this.isServerRender()&&(Ds([this.tooltipEle],"e-popup-open"),document.body.appendChild(this.tooltipEle),this.renderCloseIcon(),this.renderPopup(t)),t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),rd.stop(this.tooltipEle),this.reposition(t),this.afterRenderBlazor(t,n,i,this))))},t.prototype.contentUpdated=function(e){Va(this.tooltipEle)&&this.isServerRender()&&(this.ctrlId=this.element.id,this.tooltipEle=document.querySelector("#"+this.ctrlId+"_content"),this.tooltipEle&&(this.tooltipEle.setAttribute("style","width:"+Ja(this.width)+";height:"+Ja(this.height)+";position:absolute;"),this.beforeRenderBlazor(this.contentTargetValue,this),this.afterRenderBlazor(this.contentTargetValue,this.contentEvent,this.contentAnimation,this),this.contentTargetValue=this.contentEvent=this.contentAnimation=null))},t.prototype.beforeRenderBlazor=function(e,t){e&&(Il.isDevice&&Ds([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=Ja(t.width)),this.isServerRender()||t.tooltipEle.appendChild(t.createElement("div",{className:"e-tip-content"})),document.body.appendChild(t.tooltipEle),As([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),Ds([t.tooltipEle],"e-popup-open"),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),rd.stop(t.tooltipEle),t.reposition(e))},t.prototype.afterRenderBlazor=function(e,t,n,i){e&&(As([i.tooltipEle],"e-popup-open"),Ds([i.tooltipEle],"e-popup-close"),i.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:i.tooltipEle,isInteracted:!Va(t)},i.needTemplateReposition()&&!i.mouseTrail&&(i.tooltipEle.style.display="none"),i.trigger("beforeOpen",i.tooltipEventArgs,(function(o){i.beforeOpenCallback(o,e,n,t)}).bind(i)))},t.prototype.beforeOpenCallback=function(e,t,n,i){var o=this;if(e.cancel)this.isHidden=!0,this.clear(),this.restoreElement(t);else{var r={name:n.effect,duration:n.duration,delay:n.delay,timingFunction:"easeOut"};"None"===n.effect&&(r=void 0),this.openDelay>0?this.showTimer=setTimeout(function(){o.mouseTrail&&Pl.add(t,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&o.popupObj.show(r,t)},this.openDelay):this.popupObj&&this.popupObj.show(r,t)}i&&this.wireMouseEvents(i,t)},t.prototype.needTemplateReposition=function(){return!Va(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef||this.isServerRender()&&this.isBlazorTemplate},t.prototype.checkCollision=function(e,t,n){var i={left:t,top:n,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=sh(this.tooltipEle,this.checkCollideTarget(),t,n);return o.length>0&&(i.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,i.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),i},t.prototype.collisionFlipFit=function(e,t,n){var i=this.checkCollision(e,t,n),o=i.position;if(this.tooltipPositionY!==i.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?i.vertical+this.tooltipPositionX:this.tooltipPositionX+i.vertical),this.tooltipPositionX!==i.horizontal&&(0===o.indexOf("Left")&&(i.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=i.vertical+"Left"),0===o.indexOf("Right")&&(i.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=i.vertical+"Right"),i.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs),i.position!==o){var r=Ju(e,i.horizontal,i.vertical);this.adjustArrow(e,o,i.horizontal,i.vertical);var a=this.calculateTooltipOffset(o);a.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(o.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,a.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(o.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,i.position=o,i.left=r.left+a.left,i.top=r.top+a.top}else this.adjustArrow(e,o,i.horizontal,i.vertical);var l={left:i.left,top:i.top},s=lh(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},l).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var d=this.tooltipEle.querySelector(".e-arrow-tip"),c=parseInt(d.style.left,10)-(s-i.left);c<0?c=0:c+d.offsetWidth>this.tooltipEle.clientWidth&&(c=this.tooltipEle.clientWidth-d.offsetWidth),d.style.left=c.toString()+"px"}return this.tooltipEle.style.display="",l.left=s,l},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,t,n){var i=this;this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(function(){i.closeDelay&&i.tooltipEle&&i.isTooltipOpen||i.tooltipHide(e,t,n)},this.closeDelay)):this.tooltipHide(e,t,n)},t.prototype.tooltipHide=function(e,t,n){var i,o=this;i=t?this.target?n||t.target:this.element:document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:i,event:t||null,element:this.tooltipEle,isInteracted:!Va(t)},this.trigger("beforeClose",this.tooltipEventArgs,function(t){t.cancel?o.isHidden=!1:o.isServerRender()?o.blazorHide(e,i):o.popupHide(e,i)})},t.prototype.blazorHide=function(e,t){var n=this;this.popupObj?this.popupHide(e,t):setTimeout(function(){n.popupHide(e,t)},200)},t.prototype.popupHide=function(e,t){t&&this.restoreElement(t),this.isHidden=!0;var n={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),Va(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){this.tooltipEle&&(As([this.tooltipEle],"e-popup-close"),Ds([this.tooltipEle],"e-popup-open")),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.isServerRender()&&this.tooltipEle?(this.tooltipEle.style.display="none",this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"false"}),Ls(this.tooltipEle)):this.tooltipEle&&Ls(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(t&&!this.mouseTrail){var n=Us(t,".e-tooltip-wrap.e-lib.e-popup");n?Pl.add(n,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),Pl.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var t=0,n=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.pageX,n=e.pageY),rd.stop(this.tooltipEle),As([this.tooltipEle],"e-popup-close"),Ds([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var i=this.calculateTooltipOffset(this.position),o=this.checkCollision(e.target,t+i.left+this.offsetX,n+i.top+this.offsetY);if(this.tooltipPositionX!==o.horizontal||this.tooltipPositionY!==o.vertical){var r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?o.vertical+o.horizontal:o.horizontal+o.vertical;o.position=r,this.adjustArrow(e.target,o.position,o.horizontal,o.vertical);var a=this.calculateTooltipOffset(o.position);o.left=t+a.left-this.offsetX,o.top=n+a.top-this.offsetY}this.tooltipEle.style.left=o.left+"px",this.tooltipEle.style.top=o.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===Us(e.target,".e-tooltip")&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&(Us(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var t=0,n=this.getTriggerList(e);t<n.length;t++){var i=n[t];if("Custom"===i)return;"Focus"===i&&this.wireFocusEvents(),"Click"===i&&Pl.add(this.element,Il.touchStartEvent,this.targetClick,this),"Hover"===i&&(Il.isDevice?(this.touchModule=new Dd(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),Pl.add(this.element,Il.touchEndEvent,this.touchEndHandler,this)):(Pl.add(this.element,"mouseover",this.targetHover,this),this.isServerRender()&&!this.isSticky&&Pl.add(this.element,"mouseleave",this.onMouseOut,this)))}Pl.add(document,"touchend",this.touchEnd,this),Pl.add(document,"scroll wheel",this.scrollHandler,this),Pl.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=Il.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(Va(this.target))Pl.add(this.element,"focus",this.targetHover,this);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++)Pl.add(t[e],"focus",this.targetHover,this)},t.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&Pl.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&(this.isServerRender()||Pl.add(t,"mouseleave",this.onMouseOut,this)),this.closeDelay&&(Pl.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),Pl.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&Pl.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var t=0,n=this.getTriggerList(e);t<n.length;t++){var i=n[t];if("Custom"===i)return;"Focus"===i&&this.unwireFocusEvents(),"Click"===i&&Pl.remove(this.element,Il.touchStartEvent,this.targetClick),"Hover"===i&&(Il.isDevice?(this.touchModule&&this.touchModule.destroy(),Pl.remove(this.element,Il.touchEndEvent,this.touchEndHandler)):(Pl.remove(this.element,"mouseover",this.targetHover),this.isServerRender()&&!this.isSticky&&Pl.remove(this.element,"mouseleave",this.onMouseOut)))}Pl.remove(document,"touchend",this.touchEnd),Pl.remove(document,"scroll wheel",this.scrollHandler),Pl.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(Va(this.target))Pl.remove(this.element,"focus",this.targetHover);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++)Pl.remove(t[e],"focus",this.targetHover)},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var t=0,n=this.getTriggerList(this.opensOn);t<n.length;t++){var i=n[t];"Focus"===i&&Pl.remove(e,"blur",this.onMouseOut),"Hover"!==i||Il.isDevice||this.isServerRender()||Pl.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(Pl.remove(e,"mouseenter",this.tooltipHover),Pl.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&Pl.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var n=this.findTarget(),i=0,o=Object.keys(e);i<o.length;i++)switch(o[i]){case"width":this.tooltipEle&&n&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=Ja(e.width),this.reposition(n));break;case"height":this.tooltipEle&&n&&(this.tooltipEle.style.height=Ja(e.height),this.reposition(n));break;case"content":this.tooltipEle?(this.isServerRender()&&(this.isBlazorTooltip=!0),this.renderContent()):this.isServerRender()&&this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{content:e.content});break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&n){var r=this.tooltipEle.querySelector(".e-arrow-tip-inner");r.style.top=r.style.left=null,this.reposition(n)}break;case"tipPointerPosition":this.tooltipEle&&n&&this.reposition(n);break;case"offsetX":if(this.tooltipEle){var a=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+a).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var l=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+l).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&As([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&Ds([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?Ds([this.tooltipEle],"e-rtl"):As([this.tooltipEle],"e-rtl"))}},t.prototype.open=function(e,t){Va(t)&&(t=this.animation.open),Va(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){if(this.isServerRender()||(e.prototype.destroy.call(this),this.tooltipEle&&Ls(this.tooltipEle)),this.isServerRender()&&this.tooltipEle){var t=document.querySelector("#"+this.ctrlId+"_content_placeholder");t&&t.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),As([this.element],"e-tooltip"),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},Object(O.__decorate)([Ks("auto")],t.prototype,"width",void 0),Object(O.__decorate)([Ks("auto")],t.prototype,"height",void 0),Object(O.__decorate)([Ks()],t.prototype,"content",void 0),Object(O.__decorate)([Ks()],t.prototype,"target",void 0),Object(O.__decorate)([Ks("TopCenter")],t.prototype,"position",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offsetX",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offsetY",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"showTipPointer",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"enableHtmlParse",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"windowCollision",void 0),Object(O.__decorate)([Ks("Auto")],t.prototype,"tipPointerPosition",void 0),Object(O.__decorate)([Ks("Auto")],t.prototype,"opensOn",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"mouseTrail",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"isSticky",void 0),Object(O.__decorate)([Qs({},Pp)],t.prototype,"animation",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"openDelay",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"closeDelay",void 0),Object(O.__decorate)([Ks()],t.prototype,"cssClass",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableHtmlSanitizer",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeRender",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeOpen",void 0),Object(O.__decorate)([nd()],t.prototype,"afterOpen",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeClose",void 0),Object(O.__decorate)([nd()],t.prototype,"afterClose",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeCollision",void 0),Object(O.__decorate)([nd()],t.prototype,"created",void 0),Object(O.__decorate)([nd()],t.prototype,"destroyed",void 0),Object(O.__decorate)([id],t)}(vd),Mp=!1;function Np(e,t,n,i,o){return kp=n+t==="topright"?void 0:o,kp=o,Mp=!!i,e?(t||(t="left"),n||(n="top"),Ap=e.ownerDocument,Dp=e,function(e,t,n){switch(_p=Dp.getBoundingClientRect(),t+e){case"topcenter":Lp(Vp(),n),Hp(Fp(),n);break;case"topright":Lp(qp(),n),Hp(Fp(),n);break;case"centercenter":Lp(Vp(),n),Hp(Up(),n);break;case"centerright":Lp(qp(),n),Hp(Up(),n);break;case"centerleft":Lp(Gp(),n),Hp(Up(),n);break;case"bottomcenter":Lp(Vp(),n),Hp(zp(),n);break;case"bottomright":Lp(qp(),n),Hp(zp(),n);break;case"bottomleft":Lp(Gp(),n),Hp(zp(),n);break;default:case"topleft":Lp(Gp(),n),Hp(Fp(),n)}return n}(t.toLowerCase(),n.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function Lp(e,t){t.left=e}function Hp(e,t){t.top=e}function Bp(){return Ap.documentElement.scrollTop||Ap.body.scrollTop}function jp(){return Ap.documentElement.scrollLeft||Ap.body.scrollLeft}function zp(){return Mp?_p.bottom:_p.bottom+Bp()}function Up(){return Fp()+_p.height/2}function Fp(){return Mp?_p.top:_p.top+Bp()}function Gp(){return _p.left+jp()}function qp(){return _p.right+jp()-(kp?kp.width:0)}function Vp(){return Gp()+_p.width/2}function Wp(){return Ip.getBoundingClientRect().width}function Yp(){return Ip.getBoundingClientRect().height}function Xp(){return Ip.getBoundingClientRect().left}function Zp(){return Ip.getBoundingClientRect().top}function Jp(){return Ip?Zp():0}function Kp(){return Ip?Xp():0}function Qp(){return Ip?tf()+Xp()+Wp():tf()+of()}function $p(){return Ip?ef()+Zp()+Yp():ef()+nf()}function ef(){return Op.documentElement.scrollTop||Op.body.scrollTop}function tf(){return Op.documentElement.scrollLeft||Op.body.scrollLeft}function nf(){return window.innerHeight}function of(){var e=window.innerWidth;return e-(e-(Va(document.documentElement)?0:document.documentElement.offsetWidth))}var rf="e-tip-bottom",af=function(){function e(e){this.isBlazorTooltip=!1,this.contentEvent=null,this.width="auto",this.height="auto",this.content="",this.target="",this.position="TopCenter",this.offsetX=0,this.offsetY=0,this.tipPointerPosition="Auto",this.openDelay=0,this.closeDelay=0,this.cssClass="",this.element=e,this.tipClass=rf,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0,this.showTipPointer=!0}return e.prototype.open=function(e,t,n){Va(this.animation.open)&&(this.animation.open=this.element.tooltip&&this.element.tooltip.animation&&this.element.tooltip.animation.open),this.showTooltip(e,t)},e.prototype.updateTooltip=function(e){this.tooltipEle&&(this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),this.reposition(e),this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY))},e.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},e.prototype.destroy=function(){},e.prototype.close=function(){if(this.tooltipEle){As([this.tooltipEle],"e-popup-close"),Ds([this.tooltipEle],"e-popup-open"),rd.stop(this.tooltipEle);var e=void 0,t=this;t.isHidden=!0,this.animation.close&&(e={name:this.animation.close.effect,duration:this.animation.close.duration||0,delay:this.animation.close.delay||0,timingFunction:"easeOut"}),Va(e)?(As([this.tooltipEle],"e-popup-open"),Ds([this.tooltipEle],"e-popup-close"),Ls(this.tooltipEle),this.tooltipEle=null):(e.end=function(){t.isHidden&&(Ls(t.tooltipEle),t.tooltipEle=null)},new rd(e).animate(this.tooltipEle))}},e.prototype.showTooltip=function(e,t,n){var i=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:n?n.type:null,cancel:!1,target:e,event:n||null,element:this.tooltipEle,isInteracted:!Va(n)},this.element.trigger("beforeRender",this.tooltipEventArgs,(function(o){i.beforeRenderCallback(o,e,n,t)}).bind(this))},e.prototype.beforeRenderCallback=function(e,t,n,i){this.formatPosition(),e.cancel?this.isHidden=!0:(this.isHidden=!1,Va(this.tooltipEle)?(this.ctrlId=this.element.element.id,this.tooltipEle=ks("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+Ja(this.width)+";height:"+Ja(this.height)+";position:absolute; pointer-events:none;"}),this.beforeRenderBlazor(t,this),rd.stop(this.tooltipEle),this.afterRenderBlazor(t,n,i,this)):t&&(this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),rd.stop(this.tooltipEle),this.reposition(t),this.afterRenderBlazor(t,n,i,this),this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY)))},e.prototype.afterRenderBlazor=function(e,t,n,i){var o=this;if(e){As([i.tooltipEle],"e-popup-open"),Ds([i.tooltipEle],"e-popup-close"),i.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:i.tooltipEle,isInteracted:!Va(t)};var r=void 0;this.animation.open&&(r={name:this.animation.open.effect,duration:this.animation.open.duration||0,delay:this.animation.open.delay||0,timingFunction:"easeIn"}),Va(r)?(As([i.tooltipEle],"e-popup-close"),Ds([i.tooltipEle],"e-popup-open")):(r.begin=function(){As([i.tooltipEle],"e-popup-close"),Ds([i.tooltipEle],"e-popup-open")},r.end=function(){o.element.trigger("open")},new rd(r).animate(this.tooltipEle))}},e.prototype.setTipClass=function(e){this.tipClass=0===e.indexOf("Right")?"e-tip-left":0===e.indexOf("Bottom")?"e-tip-top":0===e.indexOf("Left")?"e-tip-right":rf},e.prototype.renderArrow=function(){this.setTipClass(this.position);var e=ks("div",{className:"e-arrow-tip "+this.tipClass});e.appendChild(ks("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(ks("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(e)},e.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var t=Np(e,this.tooltipPositionX,this.tooltipPositionY),n=this.calculateTooltipOffset(this.position),i=this.collisionFlipFit(e,t.left+n.left,t.top+n.top);return this.tooltipEle.style.display="",i},e.prototype.checkCollision=function(e,t,n){var i={left:t,top:n,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=function(e,t,n,i){void 0===t&&(t=null);var o=Np(e,"left","top");n&&(o.left=n),i&&(o.top=i);var r=[];Ip=t,Op=e.ownerDocument;var a,l,s,d=e.getBoundingClientRect(),c=o.left,u=o.left+d.width,h=(a=o.top+d.height,l=!1,s=!1,o.top-ef()<Jp()&&(l=!0),a>$p()&&(s=!0),{topSide:l,bottomSide:s}),p=function(e,t){var n=!1,i=!1;return e-tf()<Kp()&&(n=!0),t>Qp()&&(i=!0),{leftSide:n,rightSide:i}}(c,u);return h.topSide&&r.push("top"),p.rightSide&&r.push("right"),p.leftSide&&r.push("left"),h.bottomSide&&r.push("bottom"),r}(this.tooltipEle,this.target?this.element.element:null,t,n);return o.length>0&&(i.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,i.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),i},e.prototype.collisionFlipFit=function(e,t,n){var i=this.checkCollision(e,t,n),o=i.position;if(this.tooltipPositionY!==i.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?i.vertical+this.tooltipPositionX:this.tooltipPositionX+i.vertical),this.tooltipPositionX!==i.horizontal&&(0===o.indexOf("Left")&&(i.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=i.vertical+"Left"),0===o.indexOf("Right")&&(i.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=i.vertical+"Right"),i.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:o},this.element.trigger("beforeCollision",this.tooltipEventArgs),i.position!==o){var r=Np(e,i.horizontal,i.vertical);this.adjustArrow(e,o,i.horizontal,i.vertical);var a=this.calculateTooltipOffset(o);a.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(o.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,a.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(o.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,i.position=o,i.left=r.left+a.left,i.top=r.top+a.top}else this.adjustArrow(e,o,i.horizontal,i.vertical);var l={left:i.left,top:i.top},s=function(e,t,n,i){if(void 0===t&&(t=null),void 0===n&&(n={X:!1,Y:!1}),!n.Y&&!n.X)return{left:0,top:0};var o=e.getBoundingClientRect();if(Ip=t,Op=e.ownerDocument,i||(i=Np(e,"left","top")),n.X){var r=Ip?Wp():of(),a=Kp(),l=Qp(),s=a-i.left,d=i.left+o.width-l;o.width>r?i.left=s>0&&d<=0?l-o.width:d>0&&s<=0?a:s>d?l-o.width:a:s>0?i.left+=s:d>0&&(i.left-=d)}if(n.Y){var c=Ip?Yp():nf(),u=Jp(),h=$p(),p=u-i.top,f=i.top+o.height-h;o.height>c?i.top=p>0&&f<=0?h-o.height:f>0&&p<=0?u:p>f?h-o.height:u:p>0?i.top+=p:f>0&&(i.top-=f)}return i}(this.tooltipEle,this.target?this.element.element:null,{X:!0,Y:!1},l).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var d=this.tooltipEle.querySelector(".e-arrow-tip"),c=parseInt(d.style.left,10)-(s-i.left);c<0?c=0:c+d.offsetWidth>this.tooltipEle.clientWidth&&(c=this.tooltipEle.clientWidth-d.offsetWidth),d.style.left=c.toString()+"px"}return this.tooltipEle.style.display="",l.left=s,l},e.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},n=this.tooltipEle.offsetWidth,i=this.tooltipEle.offsetHeight,o=this.tooltipEle.querySelector(".e-arrow-tip"),r=o?o.offsetWidth:0,a=o?o.offsetHeight:0,l=this.showTipPointer?0:8,s=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),d=r/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(e){case"RightTop":t.left+=r+l,t.top-=i-s;break;case"RightCenter":t.left+=r+l,t.top-=i/2;break;case"RightBottom":t.left+=r+l,t.top-=s;break;case"BottomRight":t.top+=a+l,t.left-=d;break;case"BottomCenter":t.top+=a+l,t.left-=n/2;break;case"BottomLeft":t.top+=a+l,t.left-=n-d;break;case"LeftBottom":t.left-=r+n+l,t.top-=s;break;case"LeftCenter":t.left-=r+n+l,t.top-=i/2;break;case"LeftTop":t.left-=r+n+l,t.top-=i-s;break;case"TopLeft":t.top-=i+a+l,t.left-=n-d;break;case"TopRight":t.top-=i+a+l,t.left-=d;break;default:t.top-=i+a+l,t.left-=n/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},e.prototype.reposition=function(e){var t=this.getTooltipPosition(e);this.tooltipEle.style.left=t.left+"px",this.tooltipEle.style.top=t.top+"px"},e.prototype.beforeRenderBlazor=function(e,t){if(e){Il.isDevice&&Ds([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=Ja(t.width)),t.tooltipEle.appendChild(ks("div",{className:"e-tip-content e-diagramTooltip-content"})),document.body.appendChild(t.tooltipEle),Ds([t.tooltipEle],"e-popup-open"),As([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),Ds([t.tooltipEle],"e-popup-open"),this.showTipPointer&&t.renderArrow();var n=this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.tooltipEle.style.left=n.left+"px",this.tooltipEle.style.top=n.top+"px",t.reposition(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY)}},e.prototype.addDescribedBy=function(e,t){var n=(e.getAttribute("aria-describedby")||"").split(/\s+/);n.indexOf(t)<0&&n.push(t),Hs(e,{"aria-describedby":n.join(" ").trim(),"data-tooltip-id":t})},e.prototype.renderContent=function(e){var t=this.tooltipEle.querySelector(".e-tip-content");this.cssClass&&Ds([this.tooltipEle],this.cssClass.split(" ")),e&&!Va(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),Va(this.content)?e&&!Va(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content")):(t.innerHTML="",this.content instanceof HTMLElement?t.appendChild(this.content):"string"==typeof this.content&&this.content.indexOf("<div>Blazor")<0?t.innerHTML=this.content:(Rs(rs(this.content)({},null,null,this.element.element.id+"content"),t),"string"==typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,as(this.element.element.id+"content","Content",this))))},e.prototype.updateTipPosition=function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");As(t,[rf,"e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(e),Ds(t,this.tipClass)},e.prototype.adjustArrow=function(e,t,n,i){if(this.showTipPointer){var o,r;this.updateTipPosition(t),this.tooltipEle.style.display="block";var a,l=this.tooltipEle.clientWidth,s=this.tooltipEle.clientHeight,d=this.tooltipEle.querySelector(".e-arrow-tip"),c=this.tooltipEle.querySelector(".e-arrow-tip-inner"),u=d.offsetWidth,h=d.offsetHeight;this.tooltipEle.style.display="",this.tipClass===rf||"e-tip-top"===this.tipClass?(this.tipClass===rf?(r="99.9%",c.style.top="-"+(h-2)+"px"):(r=-(h-1)+"px",c.style.top="-"+(h-6)+"px"),e&&(o=(a="Center"!==n||l>e.offsetWidth)&&"Left"===n||!a&&"End"===this.tipPointerPosition?l-u-2+"px":a&&"Right"===n||!a&&"Start"===this.tipPointerPosition?"2px":l/2-u/2+"px")):("e-tip-right"===this.tipClass?(o="99.9%",c.style.left="-"+(u-2)+"px"):(o=-(u-1)+"px",c.style.left=u-2-u+"px"),r=(a="Center"!==i||s>e.offsetHeight)&&"Top"===i||!a&&"End"===this.tipPointerPosition?s-h-2+"px":a&&"Bottom"===i||!a&&"Start"===this.tipPointerPosition?"2px":s/2-h/2+"px"),d.style.top=r,d.style.left=o}},e.prototype.getModuleName=function(){return"BlazorTooltip"},e}(),lf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks("TopLeft")],t.prototype,"position",void 0),Object(O.__decorate)([Ks("Mouse")],t.prototype,"relativeMode",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"showTipPointer",void 0),Object(O.__decorate)([Ks("auto")],t.prototype,"width",void 0),Object(O.__decorate)([Ks("auto")],t.prototype,"height",void 0),Object(O.__decorate)([Ks("Auto")],t.prototype,"openOn",void 0),Object(O.__decorate)([Ks()],t.prototype,"animation",void 0),t}(fd);function sf(e){var t;if(Ka())t=new af(e),t=uf(e.tooltip,t);else{var n=new Rp;n=uf(e.tooltip,n),(t=new Rp(n)).beforeCollision=cf,t.beforeOpen=df,t.cssClass="e-diagram-tooltip",t.opensOn="custom",t.appendTo("#"+e.element.id),t.close()}return t}function df(e){""!==this.content&&void 0!==this.content||(e.element.style.display="none")}function cf(e){e.collidedPosition&&e.collidedPosition!==this.position&&(e.element.style.display="none")}function uf(e,t){return e.content?(t.content=e.content,t.position=e.position,t.showTipPointer=e.showTipPointer,t.width=e.width,t.height=e.height,t.animation=e.animation?e.animation:{close:{effect:"None"}}):t.close(),t}var hf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),t}(fd),pf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),Object(O.__decorate)([Ks()],t.prototype,"fit",void 0),Object(O.__decorate)([Ks()],t.prototype,"description",void 0),Object(O.__decorate)([Ks()],t.prototype,"template",void 0),Object(O.__decorate)([Ks()],t.prototype,"tooltip",void 0),t}(fd),ff=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks(-1)],t.prototype,"zIndex",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"visible",void 0),Object(O.__decorate)([Qs({},lf)],t.prototype,"tooltip",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"excludeFromLayout",void 0),Object(O.__decorate)([Ks()],t.prototype,"addInfo",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"flip",void 0),Object(O.__decorate)([Qs({},pf)],t.prototype,"symbolInfo",void 0),t}(fd),gf=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r.data="",r.nodeId="",r.annotationId="",r.diagramId="",r.diagramId=n,r.nodeId=t,r.annotationId=i,r.templateFn=qy(o),r}return Object(O.__extends)(t,e),t.prototype.getNodeTemplate=function(){return this.templateFn},Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.canReset||(this.canReset=!0,this.isTemplate||(this.template=Ny(this,!0)),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),t}(Uc),mf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks("transparent")],t.prototype,"fill",void 0),Object(O.__decorate)([Ks("black")],t.prototype,"iconStrokeColor",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"iconStrokeWidth",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"visibility",void 0),Object(O.__decorate)([Ks(10)],t.prototype,"width",void 0),Object(O.__decorate)([Ks(10)],t.prototype,"height",void 0),Object(O.__decorate)([Ks("transparent")],t.prototype,"handleStrokeColor",void 0),Object(O.__decorate)([Ks(1)],t.prototype,"handleStrokeWidth",void 0),Object(O.__decorate)([Ks("")],t.prototype,"pathData",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"cornerRadius",void 0),Object(O.__decorate)([Qs({left:0,right:0,top:0,bottom:0},cc)],t.prototype,"padding",void 0),t}(fd),vf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"offset",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),t}(mf),yf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(.5)],t.prototype,"offset",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"alignment",void 0),Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"displacement",void 0),t}(mf),bf=function(e){if(Ka())return jf;if(e)switch(e.type){case"Bpmn":return Ef;case"UmlActivity":return Tf;case"UmlClassifier":return Bf;default:return Sf}return Sf},wf=function(e){if(e){if(Ka())return Of;switch(e.type){case"Straight":return kf;case"Bezier":return Df;case"Orthogonal":return Af;default:return kf}}},Cf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(10)],t.prototype,"width",void 0),Object(O.__decorate)([Ks(10)],t.prototype,"height",void 0),Object(O.__decorate)([Ks("Arrow")],t.prototype,"shape",void 0),Object(O.__decorate)([Qs({fill:"black",strokeColor:"black",strokeWidth:1},vc)],t.prototype,"style",void 0),Object(O.__decorate)([Qs({x:0,y:.5},jd)],t.prototype,"pivot",void 0),Object(O.__decorate)([Ks("")],t.prototype,"pathData",void 0),t}(fd),xf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(0)],t.prototype,"angle",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"distance",void 0),t}(fd),Sf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("None")],t.prototype,"type",void 0),t}(fd),Tf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("Object")],t.prototype,"flow",void 0),Object(O.__decorate)([Ks(30)],t.prototype,"exceptionFlowHeight",void 0),t}(Sf),Ef=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("Sequence")],t.prototype,"flow",void 0),Object(O.__decorate)([Ks("Normal")],t.prototype,"sequence",void 0),Object(O.__decorate)([Ks("Default")],t.prototype,"message",void 0),Object(O.__decorate)([Ks("Default")],t.prototype,"association",void 0),t}(Sf),_f=function(e){function t(t,n,i,o){var r=e.call(this,t,n,i,o)||this;return r.points=[],r}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("Straight")],t.prototype,"type",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"allowDrag",void 0),t}(fd),kf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"StraightSegment"},Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"point",void 0),t}(_f),Df=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BezierSegment"},Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"point1",void 0),Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"point2",void 0),Object(O.__decorate)([Qs({angle:0,distance:0},xf)],t.prototype,"vector1",void 0),Object(O.__decorate)([Qs({angle:0,distance:0},xf)],t.prototype,"vector2",void 0),t}(kf),Af=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"OrthogonalSegment"},Object(O.__decorate)([Ks(null)],t.prototype,"length",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"direction",void 0),t}(_f),Of=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"DiagramConnectorSegment"},Object(O.__decorate)([Ks("Straight")],t.prototype,"type",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"allowDrag",void 0),Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"point",void 0),Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"point1",void 0),Object(O.__decorate)([Qs({x:0,y:0},jd)],t.prototype,"point2",void 0),Object(O.__decorate)([Qs({angle:0,distance:0},xf)],t.prototype,"vector1",void 0),Object(O.__decorate)([Qs({angle:0,distance:0},xf)],t.prototype,"vector2",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"length",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"direction",void 0),t}(fd);function If(e,t,n){var i=n?45:180/(2+2/(e.height/e.width)),o=i,r=180-i,a=r+2*i,l=360-i,s=Ou(t,e.center);return s>o&&s<r?"top":s>r&&s<a?"right":s>a&&s<l?"bottom":"left"}function Pf(e){return!e.distance&&!e.angle}function Rf(e,t,n){var i=60,o={x:0,y:0};switch(n||(n=Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"right":"left":e.y<t.y?"bottom":"top"),n){case"bottom":case"top":i=Math.min(.45*Math.abs(e.y-t.y),i),o={x:e.x,y:e.y+("bottom"===n?i:-i)};break;case"right":case"left":i=Math.min(.45*Math.abs(e.x-t.x),i),o={x:e.x+("right"===n?i:-i),y:e.y}}return o}function Mf(e,t,n,i,o){var r=0,a=0,l=0,s=0,d=Number((o.distance(t,e)+o.distance(n,t)+o.distance(i,n))/3);if(0!==d)for(var c=0;c<=d;c++){var u=c/d,h=(1-u)*(1-u)*(1-u)*e.x+3*u*(1-u)*(1-u)*t.x+3*u*u*(1-u)*n.x+u*u*u*i.x,p=(1-u)*(1-u)*(1-u)*e.y+3*u*(1-u)*(1-u)*t.y+3*u*u*(1-u)*n.y+u*u*u*i.y;0===c?(r=l=h,a=s=p):(r=Math.min(h,r),a=Math.min(p,a),l=Math.max(h,l),s=Math.max(p,s))}return{x:r,y:a,width:l-r,height:s-a,left:r,top:a,right:r+(l-r),bottom:a+(s-a),center:{x:(r+(l-r))/2,y:(a+(s-a))/2}}}function Nf(e,t,n,i,o,r,a){var l={x:0,y:0},s=r/a;return l.x=(1-s)*(1-s)*(1-s)*t.x+3*s*(1-s)*(1-s)*n.x+3*s*s*(1-s)*i.x+s*s*s*o.x,l.y=(1-s)*(1-s)*(1-s)*t.y+3*s*(1-s)*(1-s)*n.y+3*s*s*(1-s)*i.y+s*s*s*o.y,l}var Lf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(!0)],t.prototype,"optional",void 0),Object(O.__decorate)([Ks(void 0)],t.prototype,"lowerBounds",void 0),Object(O.__decorate)([Ks(void 0)],t.prototype,"upperBounds",void 0),t}(fd),Hf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("OneToOne")],t.prototype,"type",void 0),Object(O.__decorate)([Qs({},Lf)],t.prototype,"target",void 0),Object(O.__decorate)([Qs({},Lf)],t.prototype,"source",void 0),t}(fd),Bf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("UmlClassifier")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("Aggregation")],t.prototype,"relationship",void 0),Object(O.__decorate)([Ks("Directional")],t.prototype,"associationType",void 0),Object(O.__decorate)([Qs({},Hf)],t.prototype,"multiplicity",void 0),t}(Sf),jf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("None")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("Directional")],t.prototype,"associationType",void 0),Object(O.__decorate)([Ks("Aggregation")],t.prototype,"relationship",void 0),Object(O.__decorate)([Qs({},Hf)],t.prototype,"multiplicity",void 0),Object(O.__decorate)([Ks("Sequence")],t.prototype,"bpmnFlow",void 0),Object(O.__decorate)([Ks("Default")],t.prototype,"message",void 0),Object(O.__decorate)([Ks("Normal")],t.prototype,"sequence",void 0),Object(O.__decorate)([Ks("Default")],t.prototype,"association",void 0),Object(O.__decorate)([Ks("Object")],t.prototype,"umlActivityFlow",void 0),Object(O.__decorate)([Ks(30)],t.prototype,"exceptionFlowHeight",void 0),t}(fd),zf=function(e){function t(t,n,i,o){var r=e.call(this,t,n,i,o)||this;return r.parentId="",r.bridges=[],r.status="None",r.shape&&"UmlActivity"===r.shape.type&&km(i,r),i&&i.shape&&"None"!==i.shape.type&&Dm(i,r),r}return Object(O.__extends)(t,e),t.prototype.setPortID=function(e,t){if(this.targetID&&this.sourceID)for(var n=e.nameTable[this.targetID],i=e.nameTable[this.sourceID],o=t?n&&n.ports:i&&i.ports,r=void 0,a=0;o&&a<o.length;a++)this.targetPortID===(r=o[a]).id&&t?!(r.constraints&zc.None)&&r.constraints&zc.InConnect||(this.targetPortID=""):this.sourcePortID!==r.id||t||!(r.constraints&zc.None)&&r.constraints&zc.OutConnect||(this.sourcePortID="")},t.prototype.init=function(e){var t;this.id||(this.id=Fy()),this.sourcePortID&&this.setPortID(e),this.targetPortID&&this.setPortID(e,!0);var n=new qc,i=new Yc;i.id=this.id+"_path";var o,r=new Yc,a=new Yc;i=this.getSegmentElement(this,i);var l=[];switch(l=this.getConnectorPoints(this.type),l=this.clipDecorators(this,l),o=Zd.toBounds(l),n.width=o.width,n.height=o.height,n.offsetX=o.x+n.pivot.x*o.width,n.offsetY=o.y+n.pivot.y*o.height,this.shape.type){case"Bpmn":switch(Ka()?this.shape.bpmnFlow:this.shape.flow){case"Sequence":t=this.getBpmnSequenceFlow();break;case"Association":(t=new Yc).visible=!1,this.getBpmnAssociationFlow();break;case"Message":t=this.getBpmnMessageFlow(),i=this.getSegmentElement(this,i),this.updateShapePosition(this,t)}break;case"UmlActivity":switch(Ka()?this.shape.umlActivityFlow:this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(i)}break;case"UmlClassifier":this.getConnectorRelation()}var s=this.intermediatePoints;if("Bezier"===this.type){var d=this.segments[0],c=this.segments[this.segments.length-1];s=[jd.isEmptyPoint(c.point2)?c.bezierPoint2:c.point2,jd.isEmptyPoint(d.point1)?d.bezierPoint1:d.point1]}var u=e.getDescription;if(r=this.getDecoratorElement(l[0],s[1],this.sourceDecorator,!0,u),a=this.getDecoratorElement(l[l.length-1],s[s.length-2],this.targetDecorator,!1,u),r.id=this.id+"_srcDec",a.id=this.id+"_tarDec",i.style=this.style,i.style.fill="transparent",void 0!==u){var h=u(this,e);i.description=h||this.id}n.style.strokeColor="transparent",n.style.fill="transparent",n.style.strokeWidth=0,n.children=[i,r,a],n.id=this.id,void 0!==t&&n.children.push(t),n.offsetX=i.offsetX,n.offsetY=i.offsetY,n.width=i.width,n.height=i.height;for(var p=0;p<this.annotations.length;p++)n.children.push(this.getAnnotationElement(this.annotations[p],this.intermediatePoints,o,u,e.element.id,e.annotationTemplate));for(p=0;p<this.fixedUserHandles.length;p++)n.children.push(this.getfixedUserHandle(this.fixedUserHandles[p],this.intermediatePoints,o));return this.wrapper=n,n},t.prototype.getConnectorRelation=function(){var e=this.shape;"Association"===e.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Aggregation"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===e.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===e.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var t,n,i,o,r="",a="";e.multiplicity.source&&(e.multiplicity.source.lowerBounds=e.multiplicity.source.lowerBounds,e.multiplicity.source.upperBounds=e.multiplicity.source.upperBounds),e.multiplicity.target&&(e.multiplicity.target.lowerBounds=e.multiplicity.target.lowerBounds,e.multiplicity.target.upperBounds=e.multiplicity.target.upperBounds),i=e.multiplicity.target,o=(n=e.multiplicity.source).upperBounds?n.lowerBounds+"..."+n.upperBounds:n.lowerBounds,t=i.upperBounds?i.lowerBounds+"..."+i.upperBounds:i.lowerBounds,"ManyToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,r=o||"*",a="1"),"OneToMany"===e.multiplicity.type&&(e.multiplicity.source.optional=!1,a=t||"*",r="1"),"ManyToOne"===e.multiplicity.type&&(r=o||"*",a=t||"*"),"OneToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,e.multiplicity.source.optional=!1,r="1",a="1"),this.annotations=[{id:this.id+"sourcelabel",content:r,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:a,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},t.prototype.getBpmnSequenceFlow=function(){var e=new Yc,t=new Yc;return"Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence&&(e=this.getSegmentElement(this,e),t=vv(this.intermediatePoints,this),this.targetDecorator.shape="Arrow"),"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",t.id=this.id+this.shape.type),t},t.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var e=0;e<this.annotations.length;e++)this.annotations[e].content="["+this.annotations[e].content+"]"},t.prototype.getUMLExceptionFlow=function(e){this.type="Straight";var t={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=t.x-this.sourcePoint.x,i=t.y-this.sourcePoint.y,o=this.shape.exceptionFlowHeight/2/Math.sqrt(n*n+i*i),r={x:t.x-n*o,y:t.y-i*o},a={x:t.x+n*o,y:t.y+i*o},l=Qd();ec(l,315,t.x,t.y),this.segments=[];var s=new kf(this,"segments",{type:"Straight",point:$d(l,a)},!0);this.segments.push(s),s=new kf(this,"segments",{type:"Straight",point:$d(l,r)},!0),this.segments.push(s),e=this.getSegmentElement(this,e)},t.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"Directional"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Arrow")},t.prototype.getfixedUserHandle=function(e,t,n){var i=new qc;i.float=!0,e.id=e.id||Fy(),i.id=this.id+"_"+e.id,i.children=[],i.visible=e.visibility,i.width=e.width,i.height=e.height,i.style.strokeWidth=e.handleStrokeWidth,i.style.fill=e.fill,i.style.strokeColor=e.handleStrokeColor,i.cornerRadius=e.cornerRadius,this.updateAnnotation(e,t,n,i);var o=jm(e,i);return i.children.push(o),i.description=i.id,i},t.prototype.getBpmnMessageFlow=function(){var e=new Yc;return this.targetDecorator.shape="Arrow",this.targetDecorator.width=5,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(e.id=this.id+"_"+this.shape.message,e.width=25,e.height=15,e.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.horizontalAlignment="Center",e.verticalAlignment="Center",e.transform=Ic.Self,e.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),e},t.prototype.distance=function(e,t){return Cv(e,t)},t.prototype.findPath=function(e,t){return bv(e,t)},t.prototype.getAnnotationElement=function(e,t,n,i,o,r){var a,l;e.id=e.id||Fy(),Ka()&&"Template"===e.annotationType&&(e.template=e.template?e.template:""),o&&(e.template||"Template"===e.annotationType||r&&""===e.content)?a=Uy(a=new gf(this.id,o,e.id,r),e,r):((a=new Gc).content=e.content,a.style.textOverflow="Wrap"),a.constraints=e.constraints,a.visible=e.visibility,a.rotateAngle=e.rotateAngle,a.horizontalAlignment=e.horizontalAlignment,a.verticalAlignment=e.verticalAlignment,a.width=e.width,a.height=e.height,void 0===n.width||e.template||(a.width=(e.width||n.width)-e.margin.left-e.margin.right),a.margin=e.margin,a.id=this.id+"_"+e.id,0===n.width&&(n.width=this.style.strokeWidth),0===n.height&&(n.height=this.style.strokeWidth),a.style=e.style;var s=rb(i);return s&&(l=s(e,this)),a.description=l||a.id,this.updateAnnotation(e,t,n,a),a},t.prototype.updateAnnotation=function(e,t,n,i,o){var r,a,l,s,d,c,u,h,p={x:0,y:0};i instanceof gf||Uc||o||i.refreshTextElement(),i.width=e.width||n.width,a=(r=zm(t,e)).point,e instanceof tu&&e.segmentAngle&&(i.rotateAngle=e.rotateAngle+r.angle,i.rotateAngle=(i.rotateAngle+360)%360),0===n.width&&(n.width=this.style.strokeWidth),0===n.height&&(n.height=this.style.strokeWidth),p.x=n.width*(c={x:(a.x-n.x)/n.width,y:(a.y-n.y)/n.height}).x,p.y=n.height*c.y,l=function(e,t,n){var i,o,r,a;switch(t%=360,e.alignment){case"Before":t>=45&&t<=135?(o="right",i=.5===e.offset?"center":"top"):t>=225&&t<=315?(o="left",i=.5===e.offset?"center":"bottom"):t>45&&t<225?(i="top",o=.5===e.offset?"center":"right"):(i="bottom",o=.5===e.offset?"center":"left");break;case"After":t>=45&&t<=135?(o="left",i=.5===e.offset?"center":"top"):t>=225&&t<=315?(o="right",i=.5===e.offset?"center":"bottom"):t>45&&t<225?(i="bottom",o=.5===e.offset?"center":"right"):(i="top",o=.5===e.offset?"center":"left");break;case"Center":o="center",i="center"}if(0===e.offset||1===e.offset)switch(r=n[0],a=n[1],Math.abs(a.x-r.x)>Math.abs(a.y-r.y)?r.x<a.x?"right":"left":r.y<a.y?"bottom":"top"){case"left":o=0===e.offset?"right":"left";break;case"right":o=0===e.offset?"left":"right";break;case"bottom":i=0===e.offset?"top":"bottom";break;case"top":i=0===e.offset?"bottom":"top"}return{hAlign:o,vAlign:i}}(e,r.angle,t),d=l.vAlign,"left"===(s=l.hAlign)?(u="Left",p.x+=e.displacement.x):"right"===s?(u="Right",p.x-=e.displacement.x):"center"===s&&(u="Center"),"top"===d?(h="Top",p.y+=e.displacement.y):"bottom"===d?(h="Bottom",p.y-=e.displacement.y):"center"===d&&(h="Center"),i.horizontalAlignment=u,i.verticalAlignment=h,i.setOffsetWithRespectToBounds(p.x,p.y,"Absolute"),i.relativeMode="Point"},t.prototype.getConnectorPoints=function(e,t,n,i){Math.abs(this.sourcePoint.x-this.targetPoint.x),Math.abs(this.sourcePoint.y-this.targetPoint.y);var o=uu(this,n,i).slice(0);return o&&o.length>0&&(this.sourcePoint=o[0],this.targetPoint=o[o.length-1]),o},t.prototype.clipDecorator=function(e,t,n,i){var o,r,a={x:0,y:0},l=t.length,s=jd.distancePoints(o=n?t[0]:t[l-1],r=n?t[1]:t[l-2]);s=0===s?1:s;var d=1,c=n?e.sourceWrapper:e.targetWrapper;c&&(d=c.style.strokeWidth,i&&i&Mc.DecoratorPropertyChange&&(d=1));var u=d-1;return a.x=Math.round(o.x+u*(r.x-o.x)/s),a.y=Math.round(o.y+u*(r.y-o.y)/s),(n&&"None"!==e.sourceDecorator.shape||!n&&"None"!==e.targetDecorator.shape)&&(a=jd.adjustPoint(a,r,!0,i&Mc.DecoratorPropertyChange?0:d/2)),a},t.prototype.clipDecorators=function(e,t,n){return"None"!==e.sourceDecorator.shape&&(t[0]=this.clipDecorator(e,t,!0,n)),"None"!==e.targetDecorator.shape&&(t[t.length-1]=this.clipDecorator(e,t,!1,n)),t},t.prototype.updateSegmentElement=function(e,t,n,i){var o,r=new Zd;if(o=this.getSegmentPath(e,t,i),"Bezier"===e.type){if(this.segments.length>0)for(var a=0;a<this.segments.length;a++){var l=this.segments[a],s=e.segments[a],d=jd.isEmptyPoint(l.point1)?s.bezierPoint1:s.point1,c=jd.isEmptyPoint(l.point2)?s.bezierPoint2:s.point2;r.uniteRect(Mf(l.points[0],d,c,l.points[1],e))}}else r=Zd.toBounds(t);return n.width=r.width,n.height=r.height,n.offsetX=r.x+n.width/2,n.offsetY=r.y+n.height/2,n.data=o,e.wrapper&&(e.wrapper.offsetX=n.offsetX,e.wrapper.offsetY=n.offsetY,e.wrapper.width=r.width,e.wrapper.height=r.height),n},t.prototype.getSegmentElement=function(e,t,n,i){var o;return pv(e),o=this.getConnectorPoints(e.type,void 0,n),this.intermediatePoints=o,t.staticSize=!0,this.updateSegmentElement(e,o,t,i)},t.prototype.getDecoratorElement=function(e,t,n,i,o){var r=new Yc;if(r.transform=Ic.Self,this.updateDecoratorElement(r,e,t,n),void 0!==o){var a=o(n,this);r.description=a||"source"}return r},t.prototype.bridgePath=function(e,t,n){var i=t;if(e.bridges.length>0)if("Straight"===e.type&&e.segments.length<2)for(var o=0;o<e.bridges.length;o++)(r=e.bridges[o]).rendered||(i+=" L"+r.startPoint.x+" "+r.startPoint.y,i+=r.path,r.rendered=!0);else if("Orthogonal"===e.type||"Straight"===e.type&&e.segments.length>1)for(o=0;o<e.bridges.length;o++){var r;(r=e.bridges[o]).segmentPointIndex===n&&(r.rendered||r.segmentPointIndex===n&&(i+=" L"+r.startPoint.x+" "+r.startPoint.y,i+=r.path,r.rendered=!0))}return i},t.prototype.updateDecoratorElement=function(e,t,n,i){var o,r;e.offsetX=t.x,e.offsetY=t.y,r=jd.findAngle(t,n),o=function(e,t){return"Custom"===e?t.pathData:ou[e]}(i.shape,i);var a=new Bd(i.width,i.height);e.pivot.x=i.pivot.x,e.pivot.y=i.pivot.y,e.style=i.style,e.rotateAngle=r,e.data=o,e.canMeasurePath=!0,e.width=a.width,e.height=a.height},t.prototype.getSegmentPath=function(e,t,n){for(var i,o,r,a="",l=[],s=0;s<t.length;)l.push({x:t[s].x,y:t[s].y}),s++;for(var d=0;d<e.bridges.length;d++)e.bridges[d].rendered=!1;if(l=this.clipDecorators(e,l,n),this.cornerRadius>0&&"Bezier"!==this.type)for(var c=0;c<l.length-1;c++){i=l[c],0===c&&(a="M"+i.x+" "+i.y);var u=jd.distancePoints(l[c],l[c+1]);u>0&&(o=c<l.length-2?jd.adjustPoint(l[c],l[c+1],!1,u<2*this.cornerRadius?u/2:this.cornerRadius):l[c+1],c>0&&(u<2*this.cornerRadius?(r=jd.adjustPoint(l[c],l[c+1],!0,u/2),c<l.length-2&&(o=null)):r=jd.adjustPoint(l[c],l[c+1],!0,this.cornerRadius)),r&&(a+="Q"+i.x+" "+i.y+" "+r.x+" "+r.y),o&&(e.bridges.length>0&&(a=this.bridgePath(e,a,c),"Orthogonal"===e.type&&(a=this.bridgePath(e,a,c+1))),a+=" L"+o.x+" "+o.y))}else if("Bezier"===this.type){for(var h=void 0,p=this.segments,f=0;f<p.length;f++)l.length>2&&(p[f].bezierPoint1={x:0,y:0},p[f].bezierPoint2={x:0,y:0}),!jd.isEmptyPoint(p[f].point1)||p[f].vector1.angle||p[f].vector1.distance?p[f].bezierPoint1=p[f].vector1.angle||p[f].vector1.distance?jd.transform(l[f],p[f].vector1.angle,p[f].vector1.distance):{x:p[f].point1.x||p[f].bezierPoint1.x,y:p[f].point1.y||p[f].bezierPoint1.y}:((e.sourceID||this.sourcePortID)&&this.sourceWrapper&&(h=If(this.sourceWrapper.bounds,l[f],!0)),p[f].bezierPoint1=Rf(l[f],l[f+1],h)),!jd.isEmptyPoint(p[f].point2)||p[f].vector2.angle||p[f].vector2.distance?p[f].bezierPoint2=p[f].vector2.angle||p[f].vector2.distance?jd.transform(l[f+1],p[f].vector2.angle,p[f].vector2.distance):{x:p[f].point2.x||p[f].bezierPoint2.x,y:p[f].point2.y||p[f].bezierPoint2.y}:((e.targetID||this.targetPortID)&&this.targetWrapper&&(h=If(this.targetWrapper.bounds,l[f+1],!0)),p[f].bezierPoint2=Rf(l[f+1],l[f],h));l.splice(1,0,{x:p[0].bezierPoint1.x,y:p[0].bezierPoint1.y}),l.splice(l.length-1,0,{x:p[p.length-1].bezierPoint2.x,y:p[p.length-1].bezierPoint2.y}),l=this.clipDecorators(e,l,n);for(var g=0;g<p.length;g++)0===g&&(a="M"+l[0].x+" "+l[0].y),a+="C"+p[g].bezierPoint1.x+" "+p[g].bezierPoint1.y+" "+p[g].bezierPoint2.x+" "+p[g].bezierPoint2.y+" "+(g===p.length-1?l[l.length-1].x+" "+l[l.length-1].y:p[g].points[p[g].points.length-1].x+" "+p[g].points[p[g].points.length-1].y)}else for(var m=0;m<l.length;m++)i=l[m],0===m&&(a="M"+i.x+" "+i.y),m>0&&(a=this.bridgePath(e,a,m),a+=" L"+i.x+" "+i.y);return a},t.prototype.updateShapeElement=function(e){var t;switch(e.shape.type){case"Bpmn":e.wrapper.children[3]instanceof Yc&&(t=e.wrapper.children[3]),("Message"===e.shape.flow||Ka()&&"Message"===e.shape.bpmnFlow)&&this.updateShapePosition(e,t);break;case"UmlActivity":("Exception"===e.shape.flow||Ka()&&"Exception"===e.shape.umlActivityFlow)&&this.getUMLExceptionFlow(e.wrapper.children[0])}},t.prototype.updateShapePosition=function(e,t){for(var n,i,o=0,r=this.intermediatePoints,a=0;a<r.length-1;a++){var l=.5*(o+=this.distance(r[a],r[a+1]));o>=l&&(n=Ou(r[a],r[a+1]),i=jd.transform(r[a],n,l))}t.offsetX=i.x,t.offsetY=i.y},t.prototype.scale=function(e,t,n,i,o){var r=0,a=0;if(this.wrapper&&this.wrapper.outerBounds){var l=Vu(this),s=(this.wrapper.bounds.width||this.style.strokeWidth||1)-2,d=(this.wrapper.bounds.height||this.style.strokeWidth||1)-2;r=l.width-s,a=l.height-d,e=(n-Math.max(r,a))/s,t=(i-Math.max(r,a))/d,r=a=Math.min(r,a)}e=t=Math.min(e,t);var c=Qd();ec(c,-(o=o||this.wrapper).rotateAngle,o.offsetX,o.offsetY),tc(c,e,t,o.offsetX,o.offsetY),ec(c,o.rotateAngle,o.offsetX,o.offsetY);var u=function(e,t){for(var n=[],i=0,o=t;i<o.length;i++)n.push($d(e,o[i]));return n}(c,this.intermediatePoints);return this.sourcePoint=u[0],this.targetPoint=u[u.length-1],Qm(this,u=this.intermediatePoints=uu(this)),{x:r,y:a}},t.prototype.getClassName=function(){return"Connector"},Object(O.__decorate)([$s(bf)],t.prototype,"shape",void 0),Object(O.__decorate)([Ks(Tc.Default)],t.prototype,"constraints",void 0),Object(O.__decorate)([Ks(10)],t.prototype,"bridgeSpace",void 0),Object(O.__decorate)([ed([],tu)],t.prototype,"annotations",void 0),Object(O.__decorate)([Qs({},jd)],t.prototype,"sourcePoint",void 0),Object(O.__decorate)([Qs({},jd)],t.prototype,"targetPoint",void 0),Object(O.__decorate)([ed([],yf)],t.prototype,"fixedUserHandles",void 0),Object(O.__decorate)([td(wf)],t.prototype,"segments",void 0),Object(O.__decorate)([Ks("")],t.prototype,"sourceID",void 0),Object(O.__decorate)([Ks("")],t.prototype,"targetID",void 0),Object(O.__decorate)([Ks(10)],t.prototype,"hitPadding",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"connectionPadding",void 0),Object(O.__decorate)([Ks("Straight")],t.prototype,"type",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"cornerRadius",void 0),Object(O.__decorate)([Qs({shape:"None"},Cf)],t.prototype,"sourceDecorator",void 0),Object(O.__decorate)([Qs({shape:"Arrow"},Cf)],t.prototype,"targetDecorator",void 0),Object(O.__decorate)([Qs({},lf)],t.prototype,"tooltip",void 0),Object(O.__decorate)([Ks("")],t.prototype,"sourcePortID",void 0),Object(O.__decorate)([Ks("")],t.prototype,"targetPortID",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"sourcePadding",void 0),Object(O.__decorate)([Qs({},hf)],t.prototype,"previewSize",void 0),Object(O.__decorate)([Qs({},hf)],t.prototype,"dragSize",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"targetPadding",void 0),Object(O.__decorate)([Qs({strokeWidth:1,strokeColor:"black"},yc)],t.prototype,"style",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"wrapper",void 0),t}(ff),Uf=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.offset=0,i.scale=1,i}return Object(O.__extends)(t,e),t.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},t.prototype.getModuleName=function(){return"Ruler"},t.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}},t.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},t.prototype.renderRulerSpace=function(){var e=this.getRulerGeometry(),t=document.getElementById(this.element.id+"_ruler_space");return t||(t=Ay("div",{id:this.element.id+"_ruler_space",style:"height:"+e.height+"px;width:"+e.width+"px;cssFloat:left;"}),this.element.appendChild(t)),t},t.prototype.updateRuler=function(){var e=this.getRulerSize(),t=this.getRulerGeometry(),n=0,i=0,o=new Bd,r=this.getRulerSVG(t);r&&(n=this.length,o.height=e,i=this.offset,n&&n!==1/0)&&this.updateSegments(i,n+this.segmentWidth+Math.abs(i),r,e)},t.prototype.updateSegments=function(e,t,n,i){for(var o=e,r={trans:0};o<t;){var a=this.getNewSegment(o,n);a&&(n.appendChild(a.segment),o=this.updateSegment(e,t,a,o,r,i))}},t.prototype.updateSegment=function(e,t,n,i,o,r){var a=this.updateSegmentWidth(this.scale);return i===e?(this.startValue=Math.floor(e/a)*a/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,n.label.textContent=this.startValue.toString(),this.defStartValue=i=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=e-i:this.vRulerOffset=e-i):(this.startValue=i/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,n.label.textContent=this.startValue.toString()),this.updateTickLabel(n,r),n.segment.setAttribute("transform","translate("+("Horizontal"===this.orientation?o.trans+.5+",0.5":"0.5,"+(o.trans+.5))+")"),o.trans+=a,i+a},t.prototype.updateTickLabel=function(e,t){var n=e.segment.lastChild.getBBox(),i="Horizontal"===this.orientation,o="RightOrBottom"===this.tickAlignment,r=i?2:0,a=i?o?t/2+5.5-5.5:t/2+5.5:n.height;Ly(e.segment.lastChild,i?{x:r,y:a}:{x:r,y:a,transform:"rotate(270)translate("+(o?-(n.width+2)+","+(t/2-n.height):-(n.width+2)+","+(t/2-n.height/2))+")"})},t.prototype.getNewSegment=function(e,t){var n=this.createNewTicks(e,t);return{segment:n,label:this.createTickLabel(t,n)}},t.prototype.createNewTicks=function(e,t){var n,i,o=this.updateSegmentWidth(this.scale);i=Oy("g",{class:"e-ruler-segment"});for(var r=0;r<this.interval;r++)n=this.createTick(t,o/this.interval,r+1,e),i.appendChild(n);return i},t.prototype.getLinePoint=function(e,t,n){var i=this.updateSegmentWidth(this.scale),o=this.getRulerSize();return(t*=n-1)%i==0?o:.3*o},t.prototype.createTick=function(e,t,n,i){var o,r,a=this.getLinePoint(e,t,n),l=this.getRulerSize(),s="Horizontal"===this.orientation,d="RightOrBottom"===this.tickAlignment,c=rb(this.arrangeTick);r={ruler:void 0,tickLength:a,tickInterval:this.segmentWidth/this.interval*(n-1)},c&&c(r),a=r.tickLength;var u=t*(n-1);return(o=Oy("line",{x1:s?u:d?l:0,y1:s?d?l:l-(l-a):u,x2:s?u:d?l-a:l-(l-a),y2:s?d?l-a:0:u,"stroke-width":"1",stroke:"black"})).setAttribute("class","e-ruler-tick"),o},t.prototype.createTickLabel=function(e,t){var n;return t&&(n=Oy("text",{class:"e-ruler-tick-label"}),t.appendChild(n)),n},t.prototype.updateSegmentWidth=function(e){if(100!==this.segmentWidth)return this.segmentWidth;var t,n=1;for(t=100,t=100/Math.pow(2,Math.round(Math.log(e)/Math.log(2)));t>100;)n/=10,t/=10;for(;t<25;)n*=10,t*=10;return t>=25&&t%25!=0&&(t=25*Math.round(t/25)),t*e/n},t.prototype.createMarkerLine=function(e,t,n){var i;return t&&((i=e.getElementById(t.id+"_marker"))&&i.parentNode.removeChild(i),i=Oy("line",n)),i},t.prototype.drawRulerMarker=function(e,t,n){var i,o,r,a,l="Horizontal"===this.orientation,s=e.getElementsByTagName("svg");for(r=0;r<s.length;r++){s[r]&&(i=s[r]);break}if(i){o=this.getRulerSize(),a=this.createMarkerLine(i,e,{id:e.id+"_marker",x1:0,y1:0,x2:l?0:o,y2:l?o:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"});var d=(l?t.x:t.y)*this.scale+n+(this.offset-this.defStartValue);a.setAttribute("transform","translate("+(l?d+.5+" 0.5":"0.5 "+(d+.5))+")"),i.appendChild(a)}},t.prototype.getRulerGeometry=function(){return new Bd(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},t.prototype.getRulerSize=function(){return this.thickness},t.prototype.getRulerSVG=function(e){var t,n,i=this.getRulerSize();if(this.element&&(t=document.getElementById(this.element.id+"_ruler_space"))){if(n=Oy("svg",{id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?e.width+200:i+"px",height:"Horizontal"===this.orientation?i:e.height+200+"px",style:"position:inherit;"}),t.childNodes.length>0)for(var o=t.childNodes.length-1;o>=0;o--)t.childNodes[o].parentNode.removeChild(t.childNodes[o]);t.appendChild(n)}return n},t.prototype.wireEvents=function(){},t.prototype.unWireEvents=function(){},Object(O.__decorate)([Ks(5)],t.prototype,"interval",void 0),Object(O.__decorate)([Ks(100)],t.prototype,"segmentWidth",void 0),Object(O.__decorate)([Ks("Horizontal")],t.prototype,"orientation",void 0),Object(O.__decorate)([Ks("RightOrBottom")],t.prototype,"tickAlignment",void 0),Object(O.__decorate)([Ks("red")],t.prototype,"markerColor",void 0),Object(O.__decorate)([Ks(25)],t.prototype,"thickness",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"arrangeTick",void 0),Object(O.__decorate)([Ks(400)],t.prototype,"length",void 0),t}(vd);function Ff(e,t){var n=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler")),i=Vf(e),o=Wf(e);n||(n=Ay("div",{id:e.element.id+(t?"_hRuler":"_vRuler"),style:"height:"+(t?i.height:o.height+100)+"px;overflow:hidden;width:"+(t?o.width+100:i.width)+"px;position:absolute;font-size:11px;"+(t?"margin-left:"+i.width+"px;":"margin-top:"+i.height+"px;")})),e.element.insertBefore(n,e.element.firstChild);var r=t?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler,a=new Uf(r);a.orientation=t?"Horizontal":"Vertical",a.length=(t?o.width:o.height)+r.segmentWidth,a.appendTo("#"+e.element.id+(t?"_hRuler":"_vRuler")),t?e.hRuler=a:e.vRuler=a;var l=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler"));t?e.hRuler.element=l:e.vRuler.element=l}function Gf(e){var t=-e.scroller.horizontalOffset,n=-e.scroller.verticalOffset;e&&e.rulerSettings.showRulers?(e.hRuler.length=0,e.vRuler.length=0,void 0!==t&&e.hRuler.element&&Yf(e,e.hRuler,t,!0),void 0!==n&&e.vRuler.element&&Yf(e,e.vRuler,n,!1)):qf(e)}function qf(e){My(e.element.id+"_hRuler"),My(e.element.id+"_vRuler"),My(e.element.id+"_overlapRuler")}function Vf(e){var t=0,n=0;return e.rulerSettings.showRulers&&(t=e.rulerSettings.horizontalRuler.thickness,n=e.rulerSettings.verticalRuler.thickness),new Bd(n,t)}function Wf(e){var t=Vf(e),n=e.scroller.viewPortHeight,i=e.scroller.viewPortWidth;return i<e.element.clientWidth-t.width&&(i=e.element.clientWidth-t.width),n<e.element.clientHeight-t.height&&(n=e.element.clientHeight-t.height),e.hRuler&&e.hRuler.length&&(i=e.hRuler.length),e.vRuler&&e.vRuler.length&&(n=e.vRuler.length),new Bd(i,n)}function Yf(e,t,n,i){var o=Vf(e),r=Wf(e),a=i?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler;!function(e,t,n){var i=document.getElementById(e.element.id+(n?"_hRuler":"_vRuler")),o=n?e.hRuler:e.vRuler;i&&e&&t&&(i.style.width=(n?t.width+o.segmentWidth:o.thickness)+"px",i.style.height=(n?o.thickness:t.height+o.segmentWidth)+"px",(i=document.getElementById(e.element.id+"_overlapRuler"))&&(n?i.style.height=o.thickness+"px":i.style.width=o.thickness+"px"))}(e,r,i),function(e,t,n){var i=document.getElementById(e.element.id+(n?"_hRuler_ruler_space":"_vRuler_ruler_space")),o=n?e.hRuler:e.vRuler;i&&e&&t&&(i.style.width=(n?t.width+2*o.segmentWidth:o.thickness)+"px",i.style.height=(n?o.thickness:t.height+2*o.segmentWidth)+"px")}(e,r,i),t.offset=n,t.scale=e.scroller.currentZoom,t.length=(i?r.width:r.height)+100,t.arrangeTick=rb(a.arrangeTick),t.dataBind();var l=i?e.hRuler.element:e.vRuler.element;i?l.style.marginLeft=o.width-t.hRulerOffset+"px":l.style.marginTop=o.height-t.vRulerOffset+"px"}function Xf(e){return e?e instanceof eu||e instanceof tu?e.constraints&Ec.Select:e instanceof zf?e.constraints&Tc.Select:e.constraints&_c.Select:1}function Zf(e){return e?e instanceof eu||e instanceof tu?e.constraints&Ec.Drag:e instanceof zf?e.constraints&Tc.Drag:e instanceof uy?1:e.constraints&_c.Drag:1}function Jf(e){return e instanceof zf?e.constraints&Tc.Delete:e.constraints&_c.Delete}function Kf(e){return e.constraints&Tc.DragSourceEnd}function Qf(e){return e.constraints&Tc.DragTargetEnd}function $f(e){return e.constraints&Tc.DragSegmentThumb}function eg(e){return e instanceof eu||e instanceof tu?e.constraints&Ec.Rotate:e.constraints&_c.Rotate}function tg(e){return e.constraints&_c.Shadow}function ng(e){return e instanceof ry&&e.constraints&_c.InConnect?e.constraints&_c.InConnect:0}function ig(e){return e&&e.constraints&&!(e.constraints&zc.None)&&e.constraints&zc.InConnect?e.constraints&zc.InConnect:0}function og(e){return e instanceof ry&&e.constraints&_c.OutConnect?e.constraints&_c.OutConnect:0}function rg(e){return e&&e.constraints&&!(e.constraints&zc.None)&&e.constraints&zc.OutConnect?e.constraints&zc.OutConnect:0}function ag(e,t){var n=0;return e instanceof eu||e instanceof tu?n=e.constraints&Ec.Resize:e&&("SouthEast"===t?n=e.constraints&_c.ResizeSouthEast:"East"===t?n=e.constraints&_c.ResizeEast:"NorthEast"===t?n=e.constraints&_c.ResizeNorthEast:"South"===t?n=e.constraints&_c.ResizeSouth:"North"===t?n=e.constraints&_c.ResizeNorth:"SouthWest"===t?n=e.constraints&_c.ResizeSouthWest:"West"===t?n=e.constraints&_c.ResizeWest:"NorthWest"===t&&(n=e.constraints&_c.ResizeNorthWest)),n}function lg(e){return e instanceof zf?e.constraints&Tc.AllowDrop:e.constraints&_c.AllowDrop}function sg(e){return e.constraints&Ac.Virtualization}function dg(e){return e.tool&Oc.SingleSelect}function cg(e){return e.tool&Oc.MultipleSelect}function ug(e){return e.tool&Oc.ZoomPan}function hg(e){return e.tool&Oc.ContinuousDraw}function pg(e){return e.tool&Oc.DrawOnce}function fg(e){return e.tool&Oc.SingleSelect||e.tool&Oc.MultipleSelect}function gg(e){return e.constraints&Ac.UserInteraction}function mg(e){return e.constraints&Ac.ZoomTextEdit}function vg(e){return function(e){return e.constraints&Ac.ApiUpdate}(e)||e.diagramActions&Mc.ToolAction}function yg(e,t){return e.constraints&zc.Draw}function bg(e,t){return e.constraints&zc.Drag}function wg(e){return!(e&Nc.DrawSelectorBorder)}function Cg(e){return!!(e&Nc.PreventRenderSelector)}var xg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UserHandle"},Object(O.__decorate)([Ks("")],t.prototype,"name",void 0),Object(O.__decorate)([Ks("")],t.prototype,"pathData",void 0),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks("")],t.prototype,"source",void 0),Object(O.__decorate)([Ks("#000000")],t.prototype,"backgroundColor",void 0),Object(O.__decorate)([Ks("Top")],t.prototype,"side",void 0),Object(O.__decorate)([Ks("")],t.prototype,"borderColor",void 0),Object(O.__decorate)([Ks(.5)],t.prototype,"borderWidth",void 0),Object(O.__decorate)([Ks(25)],t.prototype,"size",void 0),Object(O.__decorate)([Ks("white")],t.prototype,"pathColor",void 0),Object(O.__decorate)([Ks(10)],t.prototype,"displacement",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"visible",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offset",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"horizontalAlignment",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"verticalAlignment",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"disableNodes",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"disableConnectors",void 0),Object(O.__decorate)([Ks("")],t.prototype,"template",void 0),t}(fd);function Sg(e){return Tg[e.toString()]}var Tg={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},Eg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks()],t.prototype,"key",void 0),Object(O.__decorate)([Ks()],t.prototype,"keyModifiers",void 0),t}(fd),_g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Command"},Object(O.__decorate)([Ks("")],t.prototype,"name",void 0),Object(O.__decorate)([Ks()],t.prototype,"canExecute",void 0),Object(O.__decorate)([Ks()],t.prototype,"execute",void 0),Object(O.__decorate)([Qs({},Eg)],t.prototype,"gesture",void 0),Object(O.__decorate)([Ks("")],t.prototype,"parameter",void 0),t}(fd),kg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([ed([],_g)],t.prototype,"commands",void 0),t}(fd),Dg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks()],t.prototype,"show",void 0),Object(O.__decorate)([Ks()],t.prototype,"showCustomMenuOnly",void 0),Object(O.__decorate)([Ks()],t.prototype,"items",void 0),t}(fd),Ag=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childTable=[],t.cellStyle={},t.desiredRowHeight=[],t.desiredCellWidth=[],t}return Object(O.__extends)(t,e),t.prototype.rowDefinitions=function(){return this.rowDefns},t.prototype.columnDefinitions=function(){return this.colDefns},t.prototype.addObject=function(e,t,n,i,o){if(this.rows.length>=t){var r=this.rows[t];if(r.cells.length>n){o=o||1,i=i||1;var a=r.cells[n];a.columnSpan=Math.max(o,a.columnSpan),a.rowSpan=Math.max(i,a.rowSpan);var l=new Mg;(l=e).rowId=t,l.columnId=n,l.columnSpan=o,this.childTable[l.id]=l,this.addObjectToCell(l,a)}}},t.prototype.addObjectToCell=function(e,t){t.children||(t.children=[]),e.style.strokeColor="black",e.style.strokeWidth=1,e.style.fill="white",t.children.push(e)},t.prototype.updateProperties=function(e,t,n,i){this.offsetX=e,this.offsetY=t,this.width=n,this.height=i},t.prototype.setDefinitions=function(e,t){this.rowDefns=e,this.colDefns=t,this.children=[],this.rows=this.rows||[];for(var n=0;n<e.length;n++){var i=e[n],o=new Pg;o.cells=[];var r=new Ig;r.width=this.width;var a=this.colDefns;(void 0===a||a.length<1)&&(a=[r]),this.addCellInRow(a,i,o),this.rows.push(o)}},t.prototype.addCellInRow=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i],r=new Rg;r.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",r.id=Fy(),r.style=this.cellStyle,r.desiredCellWidth=r.minWidth=o.width,r.desiredCellHeight=r.minHeight=t.height,n.cells.push(r),this.children.push(r)}},t.prototype.calculateSize=function(){for(var e=this.rows||[],t=0,n=0,i=0;i<e.length;i++){var o=this.rows[i];n=0;for(var r=0;r<o.cells.length;r++)if(n+=o.cells[r].desiredCellWidth,r===o.cells.length-1&&(this.width&&this.width!==n&&(o.cells[r].desiredCellWidth+=this.width-n,o.cells[r].minWidth=o.cells[r].desiredCellWidth,o.cells[r].children&&o.cells[r].children.length&&(o.cells[r].children[0].width=o.cells[r].desiredCellWidth),this.colDefns[r].width=o.cells[r].desiredCellWidth),t+=o.cells[r].desiredCellHeight,i===e.length-1&&this.height&&this.height!==t)){var a=this.height-t;if(a>0){for(var l=0;l<o.cells.length;l++)o.cells[l].desiredCellHeight+=a,o.cells[l].minHeight=o.cells[l].desiredCellHeight=o.cells[l].desiredCellHeight,o.cells[l].children&&o.cells[l].children.length&&(o.cells[l].children[0].height=o.cells[l].desiredCellHeight);this.rowDefns[i].height+=a}}}},t.prototype.updateRowHeight=function(e,t,n,i){var o=this.rows[e];this.rowDefns[e].height=t,void 0!==this.height&&(this.height+=t-o.cells[0].desiredCellHeight);for(var r=0;r<o.cells.length;r++)o.cells[r].desiredCellHeight=o.cells[r].minHeight=t,o.cells[r].children&&o.cells[r].children.length&&(o.cells[r].children[0].height=t,this.setTextRefresh(o.cells[r].children[0]));if(this.desiredRowHeight[e]=t,this.measure(new Bd(this.width,this.height)),this.arrange(this.desiredSize),n){var a=void 0!==i?this.calculateCellHeightBasedOnChildren(e,i):this.calculateCellHeight(e);a>t&&this.updateRowHeight(e,a,!1)}},t.prototype.setTextRefresh=function(e){if(e.children&&e.children.length)for(var t=e.children,n=0;n<t.length;n++)t[n]instanceof Gc&&t[n].refreshTextElement(),t[n]instanceof qc&&this.setTextRefresh(t[n])},t.prototype.updateColumnWidth=function(e,t,n,i){this.colDefns[e].width=t,void 0!==this.width&&(this.width+=t-this.rows[this.rows.length-1].cells[e].desiredCellWidth);for(var o=0;o<this.rows.length;o++)this.setTextRefresh(this.rows[o].cells[0]),this.rows[o].cells[e].desiredCellWidth=this.rows[o].cells[e].minWidth=t,this.rows[o].cells[e].children&&this.rows[o].cells[e].children.length&&(this.rows[o].cells[e].children[0].width=t);if(this.desiredCellWidth[e]=t,this.measure(new Bd(this.width,this.height)),this.arrange(this.desiredSize),n){var r=void 0!==i?this.calculateCellWidthBasedOnChildren(e,i):this.calculateCellWidth(e);r>t&&this.updateColumnWidth(e,r,!1)}},t.prototype.calculateCellWidth=function(e){for(var t,n,i,o=0;o<this.rows.length;o++)1===(i=this.rows[o].cells[e]).columnSpan&&(n=i.outerBounds.width>i.bounds.width&&(0===i.children.length||void 0===i.children[0].maxWidth)?i.outerBounds.width:i.bounds.width,t=t?t<n?n:t:n);return t},t.prototype.calculateCellHeight=function(e){for(var t,n,i,o=this.rows[e],r=0;r<o.cells.length;r++)n=(i=o.cells[r]).outerBounds.height>i.bounds.height?i.outerBounds.height:i.bounds.height,t=t?t<n?n:t:n;return t},t.prototype.calculateCellSizeBasedOnChildren=function(e,t,n,i){var o,r;if((r=e&&e.children.length>0?e.children[0]:void 0)&&1===e.columnSpan){o="Width"===t?r.bounds.right:r.bounds.bottom,i||(i="Width"===t?r.bounds.width:r.bounds.height);for(var a=0;a<r.children.length;a++){var l=r.children[a];if(l instanceof qc&&-1===l.id.indexOf("header")){var s=("Width"===t?l.bounds.right:l.bounds.bottom)+n;if(s>o){var d=s-o+("Width"===t?r.bounds.width:r.bounds.height);i&&(i=i<d?d:i)}}}}return i},t.prototype.calculateCellWidthBasedOnChildren=function(e,t){for(var n,i=0;i<this.rows.length;i++)n=this.calculateCellSizeBasedOnChildren(this.rows[i].cells[e],"Width",t,n);return n},t.prototype.calculateCellHeightBasedOnChildren=function(e,t){for(var n,i=this.rows[e],o=0;o<i.cells.length;o++)n=this.calculateCellSizeBasedOnChildren(i.cells[o],"Height",t,n);return n},t.prototype.addRow=function(e,t,n){this.rowDefns.length>0?this.rowDefns.splice(e,0,t):this.rowDefns.push(t);var i=new Pg;i.cells=[],(new Ig).width=this.width,this.addCellInRow(this.colDefns,t,i),e>this.rows.length-1?this.rows.push(i):this.rows.splice(e,0,i),n&&(this.measure(new Bd(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.addColumn=function(e,t,n){var i,o,r,a,l=this.rows;this.colDefns.length>0?this.colDefns.splice(e,0,t):this.colDefns.push(t),void 0!==this.width&&(this.width+=t.width);for(var s=0;s<l.length;s++)i=l[s],o=this.rowDefns[s],r=t,(a=new Rg).style=this.cellStyle,a.desiredCellWidth=a.minWidth=r.width,a.desiredCellHeight=a.minHeight=o.height,a.children=[],e>i.cells.length-1?i.cells.push(a):i.cells.splice(e,0,a),this.children.push(a);n&&(this.measure(new Bd(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.removeRow=function(e){var t,n,i=this.rows[e];this.height-=this.rowDefns[e].height;for(var o=0;o<i.cells.length;o++)this.children.splice(this.children.indexOf(t=i.cells[o]),1),(n=document.getElementById(t.id+"_groupElement"))&&n.parentElement&&n.parentElement.removeChild(n);this.rows.splice(e,1),this.rowDefns.splice(e,1),this.measure(new Bd(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.removeColumn=function(e){var t,n,i=this.rows;this.width-=this.colDefns[e].width;for(var o=0;o<i.length;o++)this.children.splice(this.children.indexOf(t=i[o].cells[e]),1),(n=document.getElementById(t.id+"_groupElement"))&&n.parentElement&&n.parentElement.removeChild(n),i[o].cells.splice(e,1);this.colDefns.splice(e,1),this.measure(new Bd(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateRowIndex=function(e,t){var n=this.rows[e];this.rows.splice(e,1),this.rows.splice(t,0,n);var i=this.rowDefns[e];this.rowDefns.splice(e,1),this.rowDefns.splice(t,0,i),this.measure(new Bd(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateColumnIndex=function(e,t,n){for(var i,o,r,a=e;a<this.rows.length;a++)o=this.rows[a].cells[t],(i=this.rows[a]).cells.splice(t,1),i.cells.splice(n,0,o);var l=this.colDefns[t];this.colDefns.splice(t,1),this.colDefns.splice(n,0,l),r=this.desiredCellWidth[t],this.desiredCellWidth.splice(t,1),this.desiredCellWidth.splice(n,0,r),this.measure(new Bd(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.measure=function(t){var n=void 0;if(void 0!==this.rows&&this.rows.length>0){var i=0,o=0;n=new Bd(0,0),this.calculateSize();for(var r=0,a=this.rows;r<a.length;r++){o=0;for(var l=0,s=(p=a[r]).cells;l<s.length;l++){var d=(v=s[l]).measure(new Bd(v.desiredCellWidth,v.desiredCellHeight));1===v.rowSpan&&(this.desiredRowHeight[i]=0===o||void 0===this.desiredRowHeight[i]?d.height:Math.max(d.height,this.desiredRowHeight[i])),1===v.columnSpan&&(this.desiredCellWidth[o]=0===i||void 0===this.desiredCellWidth[o]?d.width:Math.max(d.width,this.desiredCellWidth[o]),i===this.rows.length-1&&(n.width+=this.desiredCellWidth[o])),o++}n.height+=this.desiredRowHeight[i],i++}i=o=0;for(var c=0,u=0,h=this.rows;u<h.length;u++){var p;o=0;for(var f=0,g=0,m=(p=h[u]).cells;g<m.length;g++){var v;if(1!==(v=m[g]).columnSpan){v.desiredSize.width=0;for(var y=0;y<v.columnSpan;y++)y+o<p.cells.length&&(v.desiredSize.width+=this.desiredCellWidth[y+o],v.minWidth=v.desiredSize.width,v.measure(v.desiredSize));o++}else v.desiredSize.width=this.desiredCellWidth[f],v.measure(v.desiredSize);if(1!==v.rowSpan)for(v.desiredSize.height=0,y=0;y<v.rowSpan;y++)y+c<this.rows.length&&(v.desiredSize.height+=this.desiredRowHeight[y+c],v.minHeight=v.desiredSize.height,v.measure(v.desiredSize));else v.desiredSize.height=this.desiredRowHeight[c],v.measure(v.desiredSize);i++,f++}c++}}return void 0===n&&(n=e.prototype.validateDesiredSize.call(this,n,t)),e.prototype.stretchChildren.call(this,n),this.desiredSize=n,n},t.prototype.arrange=function(e,t){var n=0,i=0;if(void 0!==this.rows&&this.rows.length>0){for(var o=this.offsetX-e.width*this.pivot.x,r=this.offsetY-e.height*this.pivot.y,a=o,l=0,s=this.rows;l<s.length;l++){a=o,n=0;for(var d=0,c=(f=s[l]).cells;d<c.length;d++){var u=c[d],h=Math.max(this.desiredCellWidth[n],u.desiredSize.width),p=Math.max(this.desiredRowHeight[i],u.desiredSize.height);u.offsetX=a+h*u.pivot.x,u.offsetY=r+p*u.pivot.y,a+=this.desiredCellWidth[n],u.arrange(new Bd(h,p)),n++}r+=this.desiredRowHeight[i],i++}if(t){u=void 0;var f=void 0,g=void 0,m=void 0;for(i=0;i<this.rows.length;i++)for(f=this.rows[i],n=0;n<f.cells.length;n++)if((u=f.cells[n]).columnSpan>1&&this.children.splice(this.children.indexOf(u)+1,u.columnSpan-1),u.rowSpan>1)for(g=i,m=0;g+u.rowSpan-1<this.rows.length&&m<u.rowSpan-1;g++,m++)this.children.splice(this.children.indexOf(this.rows[g+1].cells[n]),1)}}return this.actualSize=e,this.updateBounds(),e},t}(Fc),Og=function(){this.height=void 0},Ig=function(){this.width=void 0},Pg=function(){this.cells=null},Rg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columnSpan=1,t.rowSpan=1,t}return Object(O.__extends)(t,e),t}(qc),Mg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowId=0,t.columnId=0,t.rowSpan=1,t.columnSpan=1,t}return Object(O.__extends)(t,e),t}(Uc);function Ng(e,t,n,i){var o;if(Hg(e,t,!0)){var r=e.isProtectedOnChange;e.protectPropertyChange(!0);var a=(o=e.nameTable[t.parentId]).wrapper;if(o&&"Canvas"===o.container.type&&!(i||a.bounds.x<=n.x&&a.bounds.right>=n.x&&a.bounds.y<=n.y&&a.bounds.bottom>=n.y||t.constraints&_c.AllowMovingOutsideLane)){var l=Yy(t);e.clearSelection(),jg(e,t),t.parentId="";var s={type:"ChildCollectionChanged",category:"Internal",undoObject:l,redoObject:Yy(t)};e.addHistoryEntry(s),e.commandHandler.isContainer&&(e.commandHandler.isContainer=!1,e.endGroupAction()),Ug(t,e)}e.protectPropertyChange(r)}}function Lg(e,t){var n,i,o;return e.enableServerDataBinding(!1),(!Ka()||Ka()&&e.diagramActions&Mc.ToolAction)&&(e.selectedObject.helperObject?o=e.selectedObject.helperObject:(e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0)&&(t instanceof uy&&t.nodes.length+t.connectors.length===1?(n=t.nodes.length>0?t.nodes[0]:t.connectors[0],i=e.selectedItems.wrapper.children[0]):(n=t,i=Ka()?t===e.selectedItems.nodes[0]?e.selectedItems.wrapper:t.wrapper:e.selectedItems.wrapper),e.selectedObject.actualObject=n,!e.currentSymbol&&(n.isLane&&xm(n,e)&&Hg(e,n)||!n.isLane&&Hg(e,n)||e.constraints&Ac.LineRouting&&e.selectedItems.nodes.length>0)&&(o=function(e,t){for(var n,i={},o=0,r=Object.keys(t);o<r.length;o++){var a=r[o];i[a]=t[a]}return hv(t)===ry&&((n=new ry(e,"nodes",i,!0)).id=t.id,e.initObject(n)),e.updateDiagramObject(n),n}(e,{id:"helper",rotateAngle:i.rotateAngle,offsetX:i.offsetX,offsetY:i.offsetY,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.actualSize.width,height:i.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}}),e.selectedObject.helperObject=o))),e.enableServerDataBinding(!0),o}function Hg(e,t,n){var i=n?e.nameTable[t.parentId]:e.nameTable[t.parentId]||t;return!(!i||!i.container)}function Bg(e,t){var n=e.nameTable[t.parentId];"Canvas"===n.container.type&&(t.margin.left=t.offsetX-n.wrapper.bounds.x-t.width/2,t.margin.top=t.offsetY-n.wrapper.bounds.y-t.height/2),e.nodePropertyChange(t,{},{width:t.width,height:t.height,offsetX:t.offsetX,offsetY:t.offsetY,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},rotateAngle:t.rotateAngle}),n.isLane||(n.wrapper.measure(new Bd),n.wrapper.arrange(n.wrapper.desiredSize))}function jg(e,t){if(t.parentId&&""!==t.parentId){var n=e.nameTable[t.parentId];if(n.isLane&&n.parentId)for(var i=e.nameTable[n.parentId],o=n.id.slice(i.id.length),r=o.substring(0,o.length-1),a=i.shape.lanes,l=void 0,s=0;s<a.length;s++)if(r===(l=a[s]).id)for(var d=0;d<l.children.length;d++)l.children[d].id===t.id&&(l.children.splice(d,1),d--);e.deleteChild(t)}}function zg(e,t,n,i,o){if(!e.currentSymbol){e.protectPropertyChange(!0);var r=e.nameTable[t.parentId];n=e.getObject(n.id)||n;var a=-1!==e.nodes.indexOf(n)?n.id:n;if("Canvas"!==t.container.type||o){if(r){var l=r.wrapper.bounds,s=t.wrapper.bounds;"Horizontal"===r.shape.orientation?n.margin.left-=s.x-l.x:n.margin.top-=s.y-l.y-e.nameTable[t.parentId+r.shape.lanes[0].id+"_0_header"].wrapper.bounds.height}}else{var d=n.wrapper.offsetY-n.wrapper.actualSize.height/2-(t.wrapper.offsetY-t.wrapper.actualSize.height/2);n.margin.left=n.wrapper.offsetX-n.wrapper.actualSize.width/2-(t.wrapper.offsetX-t.wrapper.actualSize.width/2),n.margin.top=d}var c=e.nameTable[t.id];if(c.children||(c.children=[]),-1===c.children.indexOf(n.id)){jg(e,n),e.getObject(n.id)&&e.removeElements(n);var u=Yy(n);if(e.addChild(c,a),n=e.getObject(n.id),c.isLane&&c.parentId)for(var h=(r=e.nameTable[c.parentId]).shape.lanes,p=c.id.slice(r.id.length),f=p.substring(0,p.length-1),g=0;g<h.length;g++)c.isLane&&f===h[g].id&&(n.parentObj instanceof cw||(n.parentObj=h[g]),h[g].children.push(n));if(e.updateDiagramObject(n),Ug(n,e),c.parentId?i||Fg(c,r,n,e):e.updateDiagramObject(c),!(e.diagramActions&Mc.UndoRedo)){var m={type:"ChildCollectionChanged",category:"Internal",undoObject:u,redoObject:Yy(n),historyAction:o?"AddNodeToLane":void 0};e.addHistoryEntry(m)}}e.protectPropertyChange(!1)}}function Ug(e,t){var n=vy(e.id+"_groupElement",t.element.id),i=vy(e.parentId?e.parentId+"_groupElement":t.element.id+"_diagramLayer",t.element.id);n&&i&&i.appendChild(n)}function Fg(e,t,n,i,o){var r,a=Yy(e),l=!1,s=t.shape.padding,d=e.wrapper.bounds,c=e.wrapper.outerBounds,u=n.wrapper.bounds;if(t&&"SwimLane"===t.shape.type&&(d.right<u.right+s||d.bottom<u.bottom+s)){var h=t.wrapper.children[0],p=h.bounds.x,f=h.bounds.y;if(d.right<u.right+s&&c.x<=d.x&&(r=!1,h.updateColumnWidth(e.columnIndex,d.width+(u.right-d.right),!0,s)),d.bottom<u.bottom+s&&c.y<=d.y&&(r=!0,h.updateRowHeight(e.rowIndex,d.height+(u.bottom-d.bottom),!0,s)),!(i.diagramActions&Mc.UndoRedo)&&(o&&(i.startGroupAction(),l=!0),void 0!==r)){var g={category:"Internal",type:r?"RowHeightChanged":"ColumnWidthChanged",undoObject:a,redoObject:Yy(e)};i.addHistoryEntry(g)}t.width=t.wrapper.width=h.width,t.height=t.wrapper.height=h.height,Jg(t),"Horizontal"===t.shape.orientation&&am(t,i,e.wrapper,e.columnIndex),lm(i,t),i.drag(t,p-h.bounds.x,f-h.bounds.y),em(t,i),$g(t)}return function(e,t,n){var i=e.nameTable[t.parentId];if(i&&i.isLane){var o=e.nameTable[i.parentId],r=o.wrapper.children[0];r.updateColumnWidth(i.columnIndex,r.columnDefinitions()[i.columnIndex].width,!0,n),r.updateRowHeight(i.rowIndex,r.rowDefinitions()[i.rowIndex].height,!0,n);var a=i.wrapper,l=void 0;t.margin.left<n&&(t.margin.left=n),t.margin.top<n&&(t.margin.top=n);for(var s=0;s<a.children.length;s++){var d=a.children[s];if(d instanceof qc){var c=e.nameTable[d.id];if(c.isLane){l=c.wrapper;break}}}l&&("Horizontal"===o.shape.orientation?t.margin.left<n+l.actualSize.width&&(t.margin.left=n+l.actualSize.width):t.margin.top<n+l.actualSize.height&&(t.margin.top=n+l.actualSize.height)),o.wrapper.measure(new Bd(o.width,o.height)),o.wrapper.arrange(o.wrapper.desiredSize),t.offsetX=t.wrapper.offsetX,t.offsetY=t.wrapper.offsetY,e.nodePropertyChange(t,{},{margin:{left:t.margin.left,top:t.margin.top}}),r.measure(new Bd(r.width,r.height)),r.arrange(r.desiredSize),o.width=o.wrapper.width=o.wrapper.children[0].actualSize.width,o.height=o.wrapper.height=o.wrapper.children[0].actualSize.height}}(i,n,s),i.updateDiagramElementQuad(),l}function Gg(e,t,n,i,o,r){var a=by(i.element.id);i.diagramRenderer.renderStackHighlighter(e,a,i.scroller.transform,t,n,o,r)}function qg(e,t,n,i,o,r,a,l){var s=new ry(e,"nodes",i,!0);if(s.parentId=n.id,s.isHeader=!!o,s.isPhase=!!r,s.isLane=!!a,l&&(s[r?"PhaseHeaderParent":"LaneHeaderParent"]=l),s.constraints&=~(_c.InConnect|_c.OutConnect),s.constraints|=_c.HideThumbs,e.initObject(s),e.nodes.push(s),s.wrapper.children.length>0){for(var d=0;d<s.wrapper.children.length;d++){var c=s.wrapper.children[d];c instanceof Uc&&(c.isCalculateDesiredSize=!1),c instanceof Gc&&(c.canConsiderBounds=!1,(!o&&"Vertical"===n.shape.orientation&&r||"Vertical"!==n.shape.orientation&&a)&&(c.isLaneOrientation=!0,c.refreshTextElement()))}s.wrapper.measure(new Bd(void 0,void 0)),s.wrapper.arrange(s.wrapper.desiredSize)}return s.wrapper}function Vg(e,t,n,i,o,r){var a,l=0,s=0,d=n.shape;o?(s=r,l=i,a=e.columnDefinitions()[r].width):l=d.header&&d.hasHeader?r+1:r;var c={annotations:[Yy(d.phases[r].header.annotation)],maxWidth:a,id:n.id+d.phases[r].id+"_header",offsetX:n.offsetX,offsetY:n.offsetY,style:d.phases[r].style,rowIndex:l,columnIndex:s,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}};c.annotations[0].rotateAngle=o?0:270,Xf(n)||(c.constraints&=~_c.Select),d.phases[r].header.id=c.id;var u=qg(t,0,n,c,!1,!0,!1,d.phases[r].id);e.addObject(u,l,s)}function Wg(e,t,n,i,o,r){for(var a,l,s,d,c,u=n.shape,h=u.phases.length||1,p=0,f=r?i:u.header&&u.hasHeader?1:0,g=u.phaseSize&&u.phases.length>0?1:0,m=0;m<h;m++)d={id:n.id+u.lanes[o].id+m,rowIndex:f,columnIndex:p=r?m:o+g,width:(s=e.rows[f].cells[p]).minWidth,height:s.minHeight,offsetX:n.offsetX,offsetY:n.offsetY,style:u.lanes[o].style,constraints:_c.Default|_c.ReadOnly|_c.AllowDrop,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}},Xf(n)||(d.constraints&=~_c.Select),(l=qg(t,0,n,d,!1,!1,!0)).children[0].isCalculateDesiredSize=!1,0===m&&((a={id:n.id+u.lanes[o].id+"_"+m+"_header",style:u.lanes[o].header.style,annotations:[Yy(u.lanes[o].header.annotation)],offsetX:n.offsetX,offsetY:n.offsetY,rowIndex:f,columnIndex:p,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}}).annotations[0].rotateAngle=r?270:0,u.lanes[o].header.id=a.id,r?a.width=u.lanes[o].header.width:a.height=u.lanes[o].header.height,Xf(n)||(a.constraints&=~_c.Select),c=qg(t,0,n,a,!1,!1,!0,u.lanes[o].id),r&&(c.children[0].elementActions=c.children[0].elementActions|kc.HorizontalLaneHeader),l.children.push(c)),e.addObject(l,f,p),r||f++,p=r?m:o+1}function Yg(e,t){var n=new Og;n.height=t,e.push(n)}function Xg(e){var t=new Ig;return t.width=e,t}function Zg(e,t,n,i){for(var o,r,a,l,s,d,c=[],u=0,h=t.rowDefinitions().length,p=0;p<h;p++)for(s=t.rows[p],a=0;a<s.cells.length;a++)if((l=s.cells[a].children[0])&&l.children&&l.children.length)for(r=1;r<l.children.length;r++)if((o=e.getObject(l.children[r].id))&&(o.inEdges.length>0||o.outEdges.length>0))for(d=o.inEdges.concat(o.outEdges),u=0;u<d.length;u++)-1===c.indexOf(d[u])&&c.push(d[u]);return c}function Jg(e){var t=e.wrapper;if(t.measure(new Bd(e.width,e.height)),t.children[0]instanceof Ag){var n=t.children[0],i=!1;n.width&&n.width<n.desiredSize.width&&(i=!0,n.width=n.desiredSize.width),n.height&&n.height<n.desiredSize.height&&(i=!0,n.height=n.desiredSize.height),i&&n.measure(new Bd(n.width,n.height))}t.arrange(t.desiredSize)}function Kg(e,t,n){var i,o,r,a,l,s,d,c,u=t.wrapper.children[0];for(i=n;i<u.rows.length;i++)for(s=u.rows[i],o=0;o<s.cells.length;o++)if((d=s.cells[o]).children&&d.children.length>0)for(r=0;r<d.children.length;r++)(a=e.nameTable[(c=d.children[r]).id]).isLane&&c.children.length>1&&(l=e.nameTable[c.children[1].id])&&l.isLane&&(l.rowIndex=i,l.columnIndex=o),a.rowIndex=i,a.columnIndex=o}function Qg(e,t,n){e.measure(new Bd(t.width,t.height)),e.arrange(e.desiredSize);var i=n.getObject(t.parentId);n.addChild(i,t.id)}function $g(e){if("SwimLane"===e.shape.type&&!e.shape.isLane&&!e.shape.isPhase){var t=void 0,n=void 0,i=void 0,o=void 0,r=e.shape.lanes,a=rm(e),l=e.wrapper.children[0].rowDefinitions();for(n=0;n<r.length;n++,a++)t=r[n],"Horizontal"===e.shape.orientation?t.height!==(o=l[a].height)&&(t.height=o):(i=e.wrapper.children[0].columnDefinitions(),t.width!==(o=i[a].width)&&(t.width=o))}}function em(e,t){var n,i,o,r,a=e.shape,l=a.phases,s=a.header&&a.hasHeader?1:0,d=e.wrapper.children[0],c=d.bounds.y+(a.header&&a.hasHeader?a.header.height:0);if("SwimLane"===e.shape.type&&(e=t.getObject(e.id)||e,l.length>0))if(d=e.wrapper.children[0],"Horizontal"===a.orientation)for(o=a.header&&a.hasHeader?d.rows[1]:d.rows[0],n=0;n<l.length;n++)l[n].offset!==(i=(r=o.cells[n].children[0]).bounds.right-d.bounds.x)&&(l[n].offset=i),t.nameTable[r.id].maxWidth=r.maxWidth;else for(n=0;n<l.length;n++)l[n].offset!==(i=(r=d.rows[s+n].cells[0].children[0]).bounds.bottom-c)&&(l[n].offset=i),t.nameTable[r.id].maxWidth=r.maxWidth}function tm(e,t){if(e&&e.length>0){var n=void 0;t.lineRoutingModule&&t.constraints&Ac.LineRouting&&t.lineRoutingModule.renderVirtualRegion(t,!0);for(var i=0;i<e.length;i++)n=t.getObject(e[i]),t.lineRoutingModule&&t.constraints&Ac.LineRouting&&"Orthogonal"===n.type?t.lineRoutingModule.refreshConnectorSegments(t,n,!0):t.connectorPropertyChange(n,{},{sourceID:n.sourceID,targetID:n.targetID})}}function nm(e,t,n,i){var o,r,a,l,s,d,c,u,h=e.getObject(t.parentId),p=h.shape,f=h.wrapper.children[0],g=p.lanes,m=Zg(e,f);if("Horizontal"===p.orientation&&t.rowIndex!==n.rowIndex||"Vertical"===p.orientation&&t.columnIndex!==n.columnIndex){if("Horizontal"===p.orientation)l=t.rowIndex,s=n.rowIndex,u=n.rowIndex-(o=(p.header&&p.hasHeader?1:0)+(p.phases.length&&p.phaseSize?1:0)),g[c=t.rowIndex-o].canMove&&(c<u?i&&n.wrapper.offsetY>i.y&&(s+=u>0?-1:1,u+=u>0?-1:1):i&&n.wrapper.offsetY<i.y&&(s+=1,u+=1),l!==s&&f.updateRowIndex(l,s));else if(l=t.columnIndex,s=n.columnIndex,c=t.columnIndex-(o=p.phases.length&&p.phaseSize?1:0),u=n.columnIndex-o,g[c].canMove&&(c<u?i&&n.wrapper.offsetX>i.x&&(s+=u>0?-1:1,u+=u>0?-1:1):i&&n.wrapper.offsetX<i.x&&(s+=1,u+=1),l!==s)){if(!(0!==p.phaseSize&&0!==p.phases.length||0!==s&&0!==l)&&p.header&&p.hasHeader){var v=0===s?l:s;f.rows[0].cells[v].children=f.rows[0].cells[0].children,f.rows[0].cells[v].columnSpan=f.rows[0].cells[0].columnSpan,f.rows[0].cells[0].children=[]}f.updateColumnIndex(0,l,s)}l!==s&&(d=g[c]).canMove&&(r={target:Yy(n),source:Yy(t)},d=g[c],g.splice(c,1),g.splice(u,0,d),a={target:Yy(r.source),source:Yy(r.target)},e.diagramActions&Mc.UndoRedo||e.commandHandler.addHistoryEntry({type:"LanePositionChanged",redoObject:a,undoObject:r,category:"Internal"}),Kg(e,h,0),tm(m,e),function(e,t){for(var n,i,o=0;o<e.length;o++){n=e[o];for(var r=0;r<n.children.length;r++)(i=t.nameTable[n.children[r].id]).offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY}}(g,e),h.wrapper.measure(new Bd(h.width,h.height)),h.wrapper.arrange(h.wrapper.desiredSize),e.updateDiagramObject(h))}e.updateDiagramElementQuad()}function im(e,t,n,i){var o=e.getObject(n.id),r=o.shape,a=r.header&&r.hasHeader?1:0,l=r.lanes,s=r.phases,d=i.wrapper.actualSize.width,c=i.wrapper.actualSize.height,u=t.wrapper.actualSize.width,h=t.wrapper.actualSize.height;"SwimLane"===o.shape.type&&("Horizontal"===r.orientation?t.isPhase?s[t.columnIndex].offset+=d-u:l[t.rowIndex-(a=r.phaseSize&&r.phases.length>0?a+1:a)].height+=c-h:t.isPhase?s[t.rowIndex-a].offset+=c-h:l[t.columnIndex-(a=r.phaseSize&&r.phases.length>0?1:0)].width+=d-u)}function om(e,t){var n=e.shape,i=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?t.rowIndex-(i+=n.phases.length>0?1:0):t.columnIndex-(n.phaseSize&&n.phases.length>0?1:0)}function rm(e){var t=0,n=e.shape;return"Horizontal"===n.orientation&&(t=n.header&&n.hasHeader?1:0),n.phases.length>0&&n.phaseSize&&(t+=1),t}function am(e,t,n,i){var o=e.shape;if(o.phases.length>0){var r=t.nameTable[o.phases[i].header.id];r&&r.maxWidth<n.outerBounds.width&&(r.maxWidth=n.outerBounds.width,r.wrapper.maxWidth=n.outerBounds.width)}}function lm(e,t){if(t.shape.header&&t.shape.hasHeader){var n=e.nameTable[t.wrapper.children[0].rows[0].cells[0].children[0].id];n&&n.isHeader&&n.maxWidth<t.width&&(n.maxWidth=t.width,n.wrapper.maxWidth=t.width)}}function sm(e,t,n,i){var o,r=e.nameTable[t.id];if("SwimLane"===r.shape.type){e.protectPropertyChange(!0);var a,l,s=r.wrapper.children[0],d=s.bounds,c=r.shape,u=void 0,h=!1,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,C=void 0;if(g=new ly(c,"lanes",n,!0),f=c.header&&c.hasHeader?1:0,"Horizontal"===c.orientation&&(h=!0,f=c.phases.length>0?f+1:f),a=Zg(e,s),f+=l=void 0!==i?i:c.lanes.length,e.triggerEvent(jc.collectionChange,o={element:g,cause:e.diagramActions,state:"Changing",type:"Addition",cancel:!1,laneIndex:l}),!o.cancel){if(h){var x=new Og;x.height=n.height,s.addRow(f,x,!1),r.height=void 0!==r.height?r.height+n.height:r.height,r.wrapper.height=s.height=r.height}else{var S=new Ig;S.width=n.width,s.addColumn(l+1,S,!1),r.width&&(r.width+=n.width,r.wrapper.width=s.width=r.width),e.diagramActions&Mc.UndoRedo||(s.rows[0].cells[0].columnSpan+=1)}if(e.diagramActions&Mc.UndoRedo||(g.id=""===g.id?Fy():g.id),void 0!==i?c.lanes.splice(i,0,g):c.lanes.push(g),e.triggerEvent(jc.collectionChange,o={element:g,cause:e.diagramActions,state:"Changed",type:"Addition",cancel:!1,laneIndex:l}),Wg(s,e,r,f,l,h),u="Horizontal"===c.orientation?e.nameTable[s.rows[f].cells[0].children[0].id]:c.header&&c.hasHeader?e.nameTable[s.rows[1].cells[f].children[0].id]:e.nameTable[s.rows[0].cells[f].children[0].id],e.diagramActions&Mc.UndoRedo||(p={type:"LaneCollectionChanged",changeType:"Insert",undoObject:Yy(g),redoObject:Yy(u),category:"Internal"},e.addHistoryEntry(p)),Kg(e,r,"Horizontal"===c.orientation?f:c.header&&c.hasHeader?1:0),Jg(r),lm(e,r),(m=n.children)&&m.length>0)for(v=0;v<m.length;v++)if(C={x:(w=m[v]).wrapper.offsetX,y:w.wrapper.offsetY},"Horizontal"===c.orientation)for(y=0;y<s.rows[f].cells.length;y++)dm(e,s.rows[f].cells[y],C,w);else for(b=0;b<s.rows.length;b++)dm(e,s.rows[b].cells[f],C,w);tm(a,e),e.drag(r,d.x-s.bounds.x,d.y-s.bounds.y)}e.protectPropertyChange(!1)}}function dm(e,t,n,i){if(t.children&&t.children.length>0){var o=t.children[0],r=e.nameTable[o.id];o.bounds.containsPoint(n)&&e.addChild(r,i)}}function cm(e,t,n){if("SwimLane"===t.shape.type){var i=void 0,o=void 0,r=void 0,a=void 0,l=void 0,s=void 0,d=void 0,c=t.wrapper.bounds.x,u=t.wrapper.bounds.y,h=t.shape,p=h.padding,f=h.phases,g=void 0,m=t.wrapper.children[0],v="Horizontal"===h.orientation;if(i=h.header&&h.hasHeader?0:-1,h.phases.length>0&&(i+=1),n.offset>(v?h.lanes[0].header.width:h.lanes[0].header.height)){for(d=0;d<f.length;d++)if(r=f[d],a=d>0?f[d-1]:r,r.offset>n.offset){if(g=d>0?n.offset-a.offset:n.offset,v){var y=m.columnDefinitions()[d];y.width-=g,(l=e.nameTable[h.phases[d].header.id]).maxWidth=l.wrapper.maxWidth=y.width,m.updateColumnWidth(d,y.width,!1);var b=new Ig;b.width=g,s=d,m.addColumn(d,b,!1);break}var w=m.rowDefinitions()[d+i];w.height-=g,l=e.nameTable[h.phases[d].header.id],m.updateRowHeight(d+i,w.height,!1);var C=new Og;C.height=g,s=d,m.addRow(d+i,C,!1);break}e.diagramActions&Mc.UndoRedo&&void 0===s&&(A=e.historyManager.currentEntry.next).isLastPhase&&function(e,t,n,i,o,r){var a=t.shape.phases[e-2],l=n.previousPhase.offset;if(v){var s=i.columnDefinitions()[e-1],d=new Ig;e>1?(d.width=s.width-(l-a.offset),s.width=l-a.offset):(d.width=s.width-l,s.width=l),i.updateColumnWidth(e-1,s.width,!1),i.addColumn(e,d,!1)}else{s=i.rowDefinitions()[e];var c=new Og;e>1?(c.height=n.undoObject.offset-l,s.height=l-a.offset):(c.height=s.height-l,s.height=l),i.updateRowHeight(e,s.height,!1),i.addRow(1+e,c,!1)}}(s=f.length,t,A,m);var x=new sy(t.shape,"phases",n,!0);if(e.diagramActions&Mc.UndoRedo||(x.id+=Fy()),h.phases.splice(s,0,x),Vg(m,e,t,i,v,s),v){if(o=e.nameTable[m.rows[i].cells[s].children[0].id],0===s&&h.header&&h.hasHeader){m.rows[0].cells[0].children=m.rows[0].cells[1].children,m.rows[0].cells[1].children=[];for(var S=m.rows[0],T=0;T<S.cells.length;T++)S.cells[T].minWidth=void 0,S.cells[T].columnSpan=0===T?m.rows[0].cells.length:1}!function(e,t,n,i,o){var r,a,l=t.shape,s=rm(t);for(l.header&&l.hasHeader&&(n.rows[0].cells[0].columnSpan=n.rows[0].cells.length),r=s;r<n.rows.length;r++)um(e,t,(a=n.rows[r]).cells[i-1],a.cells[i],a.cells[i+1],r,i);Kg(e,t,1)}(e,t,m,s);var E=m.columnDefinitions();if(m.updateColumnWidth(s,E[s].width,!0,p),o.maxWidth=o.wrapper.maxWidth=E[s].width,E.length>s+1){var _=e.nameTable[m.rows[i].cells[s+1].children[0].id];m.updateColumnWidth(s+1,E[s+1].width,!0,p),_.maxWidth=_.wrapper.maxWidth=E[s+1].width}t.width=t.wrapper.width=t.wrapper.children[0].width=m.width}else{o=e.nameTable[m.rows[i+s].cells[0].children[0].id];var k=m.rowDefinitions(),D=k[i+s].height;!function(e,t,n,i,o){for(var r=n.rows[i],a=n.rows[i+1],l=n.rows[i-1],s=1;s<r.cells.length;s++)um(e,t,l.cells[s],r.cells[s],a?a.cells[s]:void 0,i,s);Kg(e,t,1)}(e,t,m,i+s),m.updateRowHeight(i+s,D,!0,p),k.length>i+s+1&&m.updateRowHeight(i+s+1,D=k[i+s+1].height,!0,p),t.height=t.wrapper.height=t.wrapper.children[0].height=m.actualSize.height}if(Jg(t),t.width=t.wrapper.actualSize.width,lm(e,t),e.drag(t,c-t.wrapper.bounds.x,u-t.wrapper.bounds.y),em(t,e),!(e.diagramActions&Mc.UndoRedo)){var A={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:Yy(x),redoObject:Yy(o),category:"Internal"};e.addHistoryEntry(A)}e.updateDiagramObject(t)}}}function um(e,t,n,i,o,r,a){var l,s,d,c,u,h=t.shape,p="Horizontal"===h.orientation,f=t.wrapper.children[0],g=p?r:a;if(n?(l=p?n.bounds.x+n.bounds.width:n.bounds.x,s=p?n.bounds.y:n.bounds.y+n.bounds.height):(l=f.bounds.x,s=o.bounds.y),d=new Zd(l,s,i.desiredCellWidth,i.desiredCellHeight),(c=qg(e,0,t,{id:t.id+(p?h.lanes[g-2]:h.lanes[g-1]).id+Fy()[0],rowIndex:r,columnIndex:a,width:i.minWidth,height:i.minHeight,style:(p?h.lanes[g-2]:h.lanes[g-1]).style,constraints:_c.Default|_c.AllowDrop,container:{type:"Canvas",orientation:p?"Horizontal":"Vertical"}},!1,!1,!0)).children[0].isCalculateDesiredSize=!1,f.addObject(c,r,a),o&&o.children&&o.children.length)for(u=0;u<o.children.length;u++)p?e.nameTable[o.children[u].id].columnIndex+=1:e.nameTable[o.children[u].id].rowIndex+=1;!function(e,t,n,i,o,r,a){var l,s,d=e.nameTable[o.id],c=t||a,u=e.nameTable[d.parentId].shape.padding;if(c.children&&c.children[0].children.length>1)for(var h=1;h<c.children[0].children.length;h++)s=e.nameTable[(l=c.children[0].children[h]).id],i.containsPoint(r?{x:l.bounds.x,y:l.bounds.center.y}:{x:l.bounds.center.x,y:l.bounds.top})?(n.children[0].children.push(l),c.children[0].children.splice(h,1),h--,e.deleteChild(s),s.isLane||(s.parentId=o.id),d.children||(d.children=[]),t||(r?s.margin.left=s.wrapper.bounds.x-c.children[0].bounds.right:s.margin.top=s.wrapper.bounds.y-c.children[0].bounds.bottom),d.children.push(l.id),s.zIndex=d.zIndex+1,e.removeElements(s)):t&&(r?(s.margin.left-=n.desiredCellWidth,u>s.margin.left&&(s.margin.left=u)):(s.margin.top-=n.desiredCellHeight,u>s.margin.top&&(s.margin.top=u)))}(e,o,i,d,c,p,n)}function hm(e,t,n){if("SwimLane"===t.shape.type&&("ResizeSouth"===n||"ResizeEast"===n)){var i,o=t.shape,r=t.wrapper.children[0],a=void 0;i="ResizeSouth"===n?"Vertical"===o.orientation?r.rows[r.rows.length-1].cells[0]:r.rows[a=r.rows.length-1].cells[r.rows[a].cells.length-1]:r.rows[a=o.header&&o.hasHeader?1:0].cells[r.rows[a].cells.length-1],e.commandHandler.select(e.nameTable[i.children[0].id])}}function pm(e,t,n,i,o,r){var a,l,s,d,c,u,h,p,f=Fy(),g=e.shape,m=g.phases,v=e.offsetX-e.wrapper.actualSize.width/2,y=e.offsetY-e.wrapper.actualSize.height/2;if("Vertical"===g.orientation&&(y+=g.header&&g.hasHeader?g.header.height:0),!r)for(o||(e.id+=f,g&&g.header&&g.hasHeader?g.header.id+=f:g.header=void 0),a=0;m&&a<m.length;a++)m[a].id+=f;for(p=o?[n.childTable[i.id]]:g.lanes,a=0;p&&a<p.length;a++)for(s=p[a],r||(s.id+=f),l=0;s.children&&l<s.children.length;l++)u=(d=s.children[l]).wrapper.offsetX-d.width/2,h=d.wrapper.offsetY-d.height/2,d.zIndex=-1,d.inEdges=d.outEdges=[],(r||n&&(1===n.pasteIndex||0===n.pasteIndex))&&("Vertical"===g.orientation?d.margin.top=h-y:d.margin.left=u-v),r||(d.id+=f);if(!r){if(o&&(c={shape:{lanes:p,phases:m,phaseSize:g.phaseSize,type:"SwimLane",orientation:g.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===g.orientation?(c.width=e.wrapper.actualSize.width,c.height=i.wrapper.actualSize.height+g.header.height+g.phaseSize,c.offsetX=e.wrapper.offsetX+10*n.pasteIndex,c.offsetY=i.wrapper.offsetY+10*n.pasteIndex):(c.width=i.wrapper.actualSize.width,c.height=e.wrapper.actualSize.height,c.offsetX=i.wrapper.offsetX+10*n.pasteIndex,c.offsetY=e.wrapper.offsetY+10*n.pasteIndex),e=c),0!==n.pasteIndex&&(e.offsetX+=10,e.offsetY+=10),e.zIndex=-1,e=t.add(e),!o)for(var b=0,w=Object.keys(n.childTable);b<w.length;b++){var C=n.childTable[w[b]];C.id+=f,C.sourceID+=f,C.targetID+=f,C.zIndex=-1,t.add(C)}"SVG"!==t.mode&&t.refreshDiagramLayer(),t.select([e])}return e}function fm(e,t,n,i){var o,r=t.nodes[0];if(i||Hg(e,r,!0)){var a,l,s=void 0,d=void 0,c=void 0,u=new Uc;n&&(c=e.nameTable[n].parentId,s=r=e.nameTable[n]),a=n?s.wrapper:r.wrapper,(l=e.nameTable[c||r.parentId])&&"Grid"===l.container.type&&((o=new qc).children=[],!i&&r.isHeader||("Horizontal"===l.container.orientation&&r.isPhase||"Vertical"===l.container.orientation&&(r.rowIndex>0&&r.columnIndex>0||r.isLane)?(d=function(e,t,n){for(var i=new Zd,o="SwimLane"===e.shape.type?e.wrapper.children[0].rows:e.wrapper.rows,r=n?1:0;r<o.length;r++)i.uniteRect(o[r].cells[t].bounds);return i}(l,s?s.columnIndex:r.columnIndex,!(!l.shape.header||!l.shape.hasHeader)),o.offsetX=d.center.x,o.offsetY=d.center.y,u.width=d.width,u.height=d.height):(o.offsetX=l.offsetX,o.offsetY=a.offsetY,u.width=l.wrapper.actualSize.width,u.height=a.actualSize.height)),o.children.push(u),o.measure(new Bd),o.arrange(o.desiredSize))}return o}function gm(e,t,n,i,o){o=void 0!==o?o:om(t,n);for(var r=!1,a=t.shape.lanes[o],l=a.children.length-1;l>=0;l--)i?i.id===a.children[l].id&&a.children.splice(l,1):(e.removeDependentConnector(a.children[l]),e.diagramActions&Mc.UndoRedo||(e.diagramActions=e.diagramActions|Mc.UndoRedo,r=!0),e.remove(a.children[l]),a.children.splice(l,1),r&&(e.diagramActions=e.diagramActions&~Mc.UndoRedo))}function mm(e){return e.children[0]}function vm(e,t){e.nodes.splice(e.nodes.indexOf(t),1),e.removeFromAQuad(t),e.removeObjectsFromLayer(t),delete e.nameTable[t.id],e.removeElements(t)}function ym(e,t,n,i){var o;if("SwimLane"===n.shape.type){var r=n.shape,a=void 0;if(1===r.lanes.length)e.remove(n);else{var l=n.wrapper.bounds.x,s=n.wrapper.bounds.y,d=void 0,c=void 0,u=void 0,h=void 0,p=n.wrapper.children[0];if(a=i?r.lanes.indexOf(i):om(n,t),e.triggerEvent(jc.collectionChange,o={element:t,cause:e.diagramActions,state:"Changing",type:"Removal",cancel:!1,laneIndex:a}),!o.cancel){var f=Yy(r.lanes[a]);if(gm(e,n,t,void 0,a),!(e.diagramActions&Mc.UndoRedo)){var g={type:"LaneCollectionChanged",changeType:"Remove",undoObject:f,redoObject:Yy(t),category:"Internal"};e.addHistoryEntry(g)}r.lanes.splice(a,1);var m=t?"Horizontal"===r.orientation?t.rowIndex:t.columnIndex:rm(n)+a;if("Horizontal"===r.orientation){for(d=p.rows[m],c=0;c<d.cells.length;c++)if((u=d.cells[c])&&u.children.length>0)for(h=0;h<u.children.length;h++)bm(e,u.children[h]);p.removeRow(m)}else{for(n.width=void 0!==n.width?n.width-p.rows[0].cells[m].actualSize.width:n.width,c=0;c<p.rows.length;c++)if((u=p.rows[c].cells[m])&&u.children.length>0)for(h=0;h<u.children.length;h++)bm(e,u.children[h]);p.removeColumn(m)}e.triggerEvent(jc.collectionChange,o={element:t,cause:e.diagramActions,state:"Changed",type:"Removal",cancel:!1,laneIndex:a}),n.width=n.wrapper.width=p.width,n.height=n.wrapper.height=p.height,Jg(n),"Vertical"===n.shape.orientation&&(m=0),Kg(e,n,m),e.drag(n,l-n.wrapper.bounds.x,s-n.wrapper.bounds.y),e.updateDiagramObject(n)}}}}function bm(e,t){var n;if(t instanceof qc){if(t.children.length>0)for(n=0;n<t.children.length;n++)t.children[n]instanceof qc&&bm(e,t.children[n]);vm(e,e.getObject(t.id))}}function wm(e,t,n,i){e.protectPropertyChange(!0);var o,r=!1,a=n.shape,l=n.wrapper.children[0],s=i?a.phases.indexOf(i):function(e,t){var n=t.shape;return"Horizontal"===n.orientation?e.columnIndex:e.rowIndex-(n.header&&n.hasHeader?1:0)}(t,n);if(a.phases.length>1){s===a.phases.length-1&&(r=!0,o=Yy(a.phases[s-1]));var d=Yy(a.phases[s]);if(a.phases.splice(s,1),!(e.diagramActions&Mc.UndoRedo)){var c={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:d,previousPhase:o,redoObject:Yy(t),category:"Internal",isLastPhase:r};e.addHistoryEntry(c)}"Horizontal"===a.orientation?function(e,t,n,i){var o,r,a,l,s,d,c,u,h,p,f,g;for(i=void 0!==i?i:n.columnIndex,c=0;c<t.rows.length;c++)if((o=t.rows[c]).cells.length>1&&(r=o.cells[i],s=(a=o.cells.length-1===i?o.cells[i-1]:o.cells[i+1]).children[0],r.children.length>0))if(f=e.nameTable[(l=r.children[0]).id],0===a.children.length&&r.children.length>0)a.children=r.children,a.columnSpan=r.columnSpan-1;else{for(u=0;u<l.children.length;u++){if((p=l.children[u])instanceof qc){if((g=e.nameTable[p.id]).isLane||(g.parentId=s.id),o.cells.length-1===i&&(g.margin.left=g.wrapper.bounds.x-s.bounds.x,p.margin.left=g.wrapper.bounds.x-s.bounds.x),s.children.push(p),e.nameTable[s.id]){var m=e.nameTable[s.id];m.children||(m.children=[]),m.children.push(p.id)}l.children.splice(u,1),u--,f&&f.children&&-1!==f.children.indexOf(g.id)&&f.children.splice(f.children.indexOf(g.id),1)}if(o.cells.length-1!==i)for(h=0;h<s.children.length;h++){var v=s.children[h];if(v instanceof qc){var y=e.nameTable[v.id];y.margin.left=y.wrapper.bounds.x-l.bounds.x,v.margin.left=y.wrapper.bounds.x-l.bounds.x}}}if(f&&f.isPhase){var b=e.nameTable[s.id];b&&(s.maxWidth=b.wrapper.maxWidth=b.wrapper.maxWidth+=f.wrapper.maxWidth)}vm(e,f)}var w=t.columnDefinitions()[i].width;t.removeColumn(i),i<t.columnDefinitions().length?(d=t.columnDefinitions()[i].width,t.updateColumnWidth(i,d+=w,!0)):(d=t.columnDefinitions()[i-1].width,t.updateColumnWidth(i-1,d+=w,!0))}(e,l,t,s):function(e,t,n,i,o){var r,a,l,s,d,c,u,h,p,f,g=o.shape,m=void 0!==i?g.header?i+1:i:n.rowIndex;r=t.rows[m];var v=o.wrapper.bounds.y,y=g.phases.length;for(void 0!==g.header&&g.hasHeader&&(v+=t.rowDefinitions()[0].height),l=i===y?t.rows[m-1]:t.rows[m+1],d=0;d<r.cells.length;d++)if(h=l.cells[d].children[0],(a=r.cells[d]).children.length>0){var b=a.children[0],w=e.nameTable[b.id];if(i<y)for(u=0;u<h.children.length;u++)(p=h.children[u])instanceof qc&&((f=e.nameTable[p.id]).margin.top=f.wrapper.bounds.y-(0===i?v:b.bounds.y),p.margin.top=f.wrapper.bounds.y-(0===i?v:b.bounds.y));for(c=0;c<b.children.length;c++)(p=b.children[c])instanceof qc&&((f=e.nameTable[p.id]).parentId=h.id,i===y&&(f.margin.top=f.wrapper.bounds.y-(0===i?v:h.bounds.y),p.margin.top=f.wrapper.bounds.y-(0===i?v:h.bounds.y)),h.children.push(p),b.children.splice(c,1),c--,w.children&&-1!==w.children.indexOf(f.id)&&w.children.splice(w.children.indexOf(f.id),1));vm(e,w)}var C=t.rowDefinitions()[m].height;t.removeRow(m),m<t.rowDefinitions().length?(s=t.rowDefinitions()[m].height,t.updateRowHeight(m,s+=C,!0)):(s=t.rowDefinitions()[m-1].height,t.updateRowHeight(m-1,s+=C,!0))}(e,l,t,s,n),lm(e,n),Kg(e,n,1),em(n,e),e.protectPropertyChange(!1),e.updateDiagramObject(n)}}function Cm(e,t){var n;if(e.isLane){var i=t.getObject(e.parentId);if(i&&"SwimLane"===i.shape.type&&e.isLane){var o=om(i,e);n=i.shape.lanes[o]}}return n}function xm(e,t){return!(!e.isLane||!Cm(e,t).canMove)}function Sm(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return!0;return!1}function Tm(e,t){t instanceof ry&&(e.shape.header||(t.shape.hasHeader=!1))}function Em(e,t,n,i){return t?i:void 0!==e[n-1]?e[n-1]+i:0}function _m(e,t){var n=[];if(t)n=e;else{for(var i=0;i<e.length;i++)n.push(e[i]);n.push(e[n.length-2]),n.push(e[n.length-2])}return n}function km(e,t){if(t instanceof ry)switch(Ka()?e.shape.umlActivityShape:e.shape.shape){case"JoinNode":e.width||(t.width=20),e.height||(t.height=90),e.style&&e.style.fill||(t.style.fill="black");break;case"ForkNode":e.width||(t.width=90),e.height||(t.height=20),e.style&&e.style.fill||(t.style.fill="black");break;case"InitialNode":case"FinalNode":e.style&&e.style.fill||(t.style.fill="black")}else switch(Ka()?e.shape.umlActivityFlow:e.shape.flow){case"Object":e.style&&e.style.strokeDashArray||(t.style.strokeDashArray="8 4"),e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow");break;case"Control":e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow"),e.sourceDecorator&&e.sourceDecorator.shape||(t.sourceDecorator.shape="None")}}function Dm(e,t){switch(e.shape.type){case"Bpmn":switch(Ka()?e.shape.bpmnFlow:e.shape.flow){case"Sequence":("Normal"===e.shape.sequence&&"Bezier"!==e.type||"Default"===e.shape.sequence||"Conditional"===e.shape.sequence)&&(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"black"),"Conditional"===e.shape.sequence&&t.sourceDecorator&&(t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),t.sourceDecorator.width=e.sourceDecorator&&e.sourceDecorator.width||20,t.sourceDecorator.height=e.sourceDecorator&&e.sourceDecorator.width||10));break;case"Association":"Default"!==e.shape.association&&"Directional"!==e.shape.association&&"BiDirectional"!==e.shape.association||(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"black"),"BiDirectional"===e.shape.association&&t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white",t.sourceDecorator.width=e.sourceDecorator&&e.sourceDecorator.width||5,t.sourceDecorator.height=e.sourceDecorator&&e.sourceDecorator.height||10));break;case"Message":t.style&&!t.style.strokeDashArray&&(t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"4 4")}break;case"UmlActivity":switch(Ka()?e.shape.umlActivityFlow:e.shape.flow){case"Exception":"Directional"!==e.shape.association&&"BiDirectional"!==e.shape.association||(t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"2 2")}break;case"UmlClassifier":var n=!1;"Association"===e.shape.relationship?n=!0:"Inheritance"===e.shape.relationship?(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"white"),t.style&&(n=!0,t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"4 4")):"Composition"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"black"),n=!0):"Aggregation"===e.shape.relationship||void 0===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),n=!0):"Dependency"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),n=!0,t.style.strokeDashArray="4 4"):"Realization"===e.shape.relationship&&(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),n=!0),n&&(t.style.strokeWidth=e.style&&e.style.strokeWidth||2)}}function Am(e,t,n){var i;i=jd.findLength(t,e)>jd.findLength(n,e)?n:t;var o=jd.findAngle(t,n),r=jd.findAngle(i,e),a=jd.findLength(i,e),l=r+2*(o-r);return{x:i.x+a*Math.cos(l*Math.PI/180),y:i.y+a*Math.sin(l*Math.PI/180)}}function Om(e,t,n){if(e&&e.children&&e.children.length>0)for(var i=void 0,o=0;o<e.children.length;o++)return(i=n[e.children[o]]).shape.type===t||Om(i,t,n);return!1}function Im(e,t,n,i,o){if(n&&(e instanceof zf||e&&(e.shape&&"SwimLane"!==e.shape.type||void 0===e.shape)))for(var r=void 0,a=0,l=Object.keys(n);a<l.length;a++){var s=l[a];if(r=n[s],"shape"===s&&r.type&&(e.shape={type:r.type}),r)if(Array.isArray(r)&&r.length&&r.length>0&&"annotations"!==o&&"ports"!==o)if(e[s].length>0)for(var d=0;d<=e[s].length;d++)Im(e[s],t?t[s]:void 0,n[s],"annotations"===s||"ports"===s?e:void 0,s);else Im(e[s],t?t[s]:void 0,n[s],"annotations"===s||"ports"===s?e:void 0,s);else if(r instanceof Object&&t&&"annotations"!==o&&"ports"!==o)Im(e[s],t[s],n[s]);else if("annotations"!==o&&"ports"!==o&&t&&!t[s]||!t&&e&&(e[s]||void 0!==e[s]))e[s]=n[s];else{var c=void 0;"annotations"!==o&&"ports"!==o||("annotations"===o?(e[s]&&Im(e[s],t[s],n[s]),e[s]||(hv(i)===zf?(c=new tu(i,"annotations",n[s]),i.annotations.push(c)):(c=new eu(i,"annotations",n[s]),i.annotations.push(c)))):e[s]?Im(e[s],t[s],n[s]):(c=new Kc(i,"ports",n[s]),i.ports.push(c)))}}}function Pm(e,t){var n;n="Bezier"===e.type?function(e){var t=[];if("Bezier"===e.type)for(var n=0,i=0;i<e.segments.length;i++)for(var o=e.segments[i],r=jd.isEmptyPoint(o.point1)?o.bezierPoint1:o.point1,a=jd.isEmptyPoint(o.point2)?o.bezierPoint2:o.point2,l=Number((e.distance(r,o.points[0])+e.distance(a,r)+e.distance(o.points[1],a))/1.5),s=0;s<l-1;s+=10)t[n]=Nf(0,o.points[0],jd.isEmptyPoint(o.point1)?o.bezierPoint1:o.point1,jd.isEmptyPoint(o.point2)?o.bezierPoint2:o.point2,o.points[1],s,l),n++;return t}(e):e.intermediatePoints;for(var i=0;i<n.length-1;i++){var o=n[i],r=n[i+1],a=Zd.toBounds([o,r]);if(a.Inflate(e.hitPadding),a.containsPoint(t)){var l=Am(t,o,r),s=Rm({x1:o.x,x2:r.x,y1:o.y,y2:r.y},{x1:t.x,x2:l.x,y1:t.y,y2:l.y});if(s.enabled){var d=jd.findLength(t,s.intersectPt);if(Math.abs(d)<e.hitPadding)return!0}else{var c=Zd.toBounds([t,t]);if(c.Inflate(3),c.containsPoint(o)||c.containsPoint(r))return!0}if(jd.equals(t,l))return!0}}if(e.annotations.length>0){var u=e.wrapper.children;for(i=3;i<u.length;i++)if(u[i].bounds.containsPoint(t))return!0}return!1}function Rm(e,t){var n={x:0,y:0},i=e,o=(t.y2-t.y1)*(i.x2-i.x1)-(t.x2-t.x1)*(i.y2-i.y1),r=(t.x2-t.x1)*(i.y1-t.y1)-(t.y2-t.y1)*(i.x1-t.x1),a=(i.x2-i.x1)*(i.y1-t.y1)-(i.y2-i.y1)*(i.x1-t.x1);if(0===o||(e.x1===t.x1||e.y1===t.y1)&&(e.x2===t.x2||e.y2===t.y2)&&(0===r||0===a)&&o>0)return{enabled:!1,intersectPt:n};var l=r/o,s=a/o;return l>=0&&l<=1&&s>=0&&s<=1?(n.x=i.x1+l*(i.x2-i.x1),n.y=i.y1+l*(i.y2-i.y1),{enabled:!0,intersectPt:n}):{enabled:!1,intersectPt:n}}function Mm(e,t,n,i){var o=Rm(Nm(e.x,e.y,t.x,t.y),Nm(n.x,n.y,i.x,i.y));return o.enabled?o.intersectPt:{x:0,y:0}}function Nm(e,t,n,i){return{x1:Number(e)||0,y1:Number(t)||0,x2:Number(n)||0,y2:Number(i)||0}}function Lm(e,t,n){var i=[],o={x:t.topRight.x+(n=n||0),y:t.topRight.y},r={x:t.bottomRight.x,y:t.bottomRight.y-n},a={x:t.bottomLeft.x,y:t.bottomLeft.y+n};return i.push({x:t.topLeft.x-n,y:t.topLeft.y}),i.push(o),i.push(r),i.push(a),i}function Hm(e,t,n,i){var o,r="Mouse"===(!(n instanceof ry?n.constraints&_c.InheritTooltip:n.constraints&Tc.InheritTooltip)&&(n instanceof ry?n.constraints&_c.Tooltip:n.constraints&Tc.Tooltip)?n.tooltip.relativeMode:e.tooltip.relativeMode);"Mouse"===i?r=!0:"Object"===i&&(r=!1),o=function(e,t,n,i){var o={},r=document.getElementById(n.element.id),a=e.wrapper.bounds,l=r.getBoundingClientRect();switch(n.tooltipObject.position){case"BottomCenter":o=Bm(t,a.bottomCenter,n,i,l.width/2,l.height);break;case"BottomLeft":case"LeftBottom":o=Bm(t,a.bottomLeft,n,i,0,l.height);break;case"BottomRight":case"RightBottom":o=Bm(t,a.bottomRight,n,i,l.width,l.height);break;case"LeftCenter":o=Bm(t,a.middleLeft,n,i,0,l.height/2);break;case"LeftTop":case"TopLeft":o=Bm(t,a.topLeft,n,i,0,0);break;case"RightCenter":o=Bm(t,a.middleRight,n,i,l.width,l.height/2);break;case"RightTop":case"TopRight":o=Bm(t,a.topRight,n,i,l.width,0);break;case"TopCenter":o=Bm(t,a.topCenter,n,i,l.width/2,0)}return o}(n,t,e,r);var a=Vf(e);return{x:o.x+a.width,y:o.y+a.height}}function Bm(e,t,n,i,o,r){var a={},l=n.scroller.transform.scale,s=n.scroller.verticalOffset;return a.x=(i?e.x:t.x)*l+n.scroller.horizontalOffset-o,a.y=(i?e.y:t.y)*l+s-r,a}function jm(e,t){var n;return(n=new Yc).data=e.pathData,n.height=e.height>10?e.height-(e.padding.bottom+e.padding.top):e.height,n.width=e.width>10?e.width-(e.padding.left+e.padding.right):e.width,n.visible=t.visible,n.id=t.id+"_shape",n.inversedAlignment=!1,n.horizontalAlignment="Center",n.verticalAlignment="Center",n.style={fill:e.iconStrokeColor,strokeColor:e.iconStrokeColor,strokeWidth:e.iconStrokeWidth},n.setOffsetWithRespectToBounds(.5,.5,"Fraction"),n.relativeMode="Object",n.description=t.description||"",n}function zm(e,t,n){var i,o,r;o=Um(e,t),i=jd.findAngle(e[o.index],e[o.index+1]);var a=function(e){var t;t=e instanceof yf?0:void 0===e.content?10:0;var n=0;switch(e.alignment){case"Center":n=0;break;case"Before":n=-(0+t);break;case"After":n=0+t}return n}(t);return r=jd.transform(o.point,i+45,a),o.point=r,o.angle=i,o}function Um(e,t){for(var n,i,o,r,a,l=0,s=t.offset,d=[],c=0;c<e.length-1;c++)l+=jd.distancePoints(e[c],e[c+1]),d.push(l);o=s*l;for(var u=0;u<d.length;u++){if(d[u]>=o)return i=jd.findAngle(e[u],e[u+1]),{point:n=jd.transform(e[u],i,o-(r||0)),index:a=u};r=d[u]}return{point:n,index:a}}function Fm(e,t){if(e instanceof ry&&e.children)for(var n=0;n<e.children.length;n++)t.nameTable[e.children[n]].children&&Fm(e,t),t.removeFromAQuad(t.nameTable[e.children[n]]),t.removeObjectsFromLayer(t.nameTable[e.children[n]]),delete t.nameTable[e.children[n]]}function Gm(e,t){if(e&&e.children&&e.children.length>0)for(var n=0;n<e.children.length;n++){var i=e.children[n];i instanceof qc&&Gm(i,t)}return-1===t.indexOf(e.id)&&t.push(e.id),t}function qm(e,t,n,i){n=function(e,t){var n,i=[],o=new cw;if(e.getClassName)switch(e.getClassName()){case"Diagram":n=new cw;break;case"Node":n=new ry(o,"",i);break;case"Path":n=new Pv(o,"",i);break;case"Native":n=new Rv(o,"",i);break;case"Html":n=new Mv(o,"",i);break;case"Image":n=new Nv(o,"",i);break;case"Text":n=new Lv(o,"",i);break;case"BasicShape":n=new Hv(o,"",i);break;case"FlowShape":n=new Bv(o,"",i);break;case"BpmnShape":n=new Xv(o,"",i);break;case"UmlActivityShape":n=new Zv(o,"",i);break;case"UmlClassifierShape":n=new iy(o,"",i);break;case"SwimLane":n=new dy(o,"",i),e.header&&(n.header=new ay(o,"",i),n.header.style.fill="");break;case"ShapeAnnotation":n=new eu(o,"",i);break;case"PointPort":n=new Kc(o,"",i);break;case"BpmnGateway":n=new jv(o,"",i);break;case"BpmnDataObject":n=new zv(o,"",i);break;case"BpmnEvent":n=new Fv(o,"",i);break;case"BpmnSubEvent":n=new Gv(o,"",i);break;case"BpmnActivity":n=new Wv(o,"",i);break;case"BpmnAnnotation":n=new Yv(o,"",i);break;case"MethodArguments":n=new Jv(o,"",i);break;case"UmlClassAttribute":n=new Kv(o,"",i);break;case"UmlClassMethod":n=new Qv(o,"",i);break;case"UmlClass":n=new $v(o,"",i);break;case"UmlInterface":n=new ey(o,"",i);break;case"UmlEnumerationMember":n=new ty(o,"",i);break;case"UmlEnumeration":n=new ny(o,"",i);break;case"Lane":n=new ly(o,"",i);break;case"Phase":n=new sy(o,"",i);break;case"ChildContainer":n=new cy;break;case"Connector":n=new zf(o,"",i);break;case"StraightSegment":n=new kf(o,"",i);break;case"BezierSegment":n=new Df(o,"",i);break;case"OrthogonalSegment":n=new Af(o,"",i);break;case"PathAnnotation":n=new tu(o,"",i);break;case"Stop":n=new hc(o,"",i);break;case"Point":n=t||new jd(o,"",i);break;case"UserHandle":n=new xg(o,"",i);break;case"Command":n=new _g(o,"",i)}else n=t;return n}(t,n);for(var o=[],r=0,a=o=o.concat(Object.keys(e));r<a.length;r++){var l=a[r];t instanceof ry&&(i="shape"===l),e[l]instanceof Array?Vm(e,n,t,l):e[l]instanceof Object&&n&&n[l]?"wrapper"!==l&&(e[l]=qm(e[l],t[l],n[l],i)):(n&&e[l]===n[l]||void 0===e[l])&&(i&&"type"===l||t instanceof dy&&"orientation"===l||delete e[l]),"[]"!==JSON.stringify(e[l])&&"{}"!==JSON.stringify(e[l])&&void 0!==e[l]||delete e[l]}return e}function Vm(e,t,n,i){if(0===e[i].length)delete e[i];else if(e[i].every(function(e){return"number"==typeof e})){var o=void 0,r=!0;for(o=0;o<e[i].length;o++)r=!(!r||e[i][o]!==t[i][o]);r&&delete e[i]}else if(o=void 0,"layers"===i&&(e[i].splice(0,1),0===e[i].length&&delete e[i]),e[i])for(o=e[i].length-1;o>=0;o--)"nodes"!==i&&"connectors"!==i||(e[i][o].wrapper=null),"dataManager"!==i&&(e[i][o]=qm(e[i][o],n[i][o],void 0!==t[i]?t[i][o]:[]),"[]"!==JSON.stringify(e[i][o])&&"{}"!==JSON.stringify(e[i][o])&&void 0!==e[i][o]||e[i].splice(o,1))}function Wm(e,t){var n=t.style,i=t;t.canApplyStyle=!0;for(var o=0,r=Object.keys(e);o<r.length;o++)switch(r[o]){case"fill":n.fill=e.fill,n instanceof yc&&(n.fill="transparent");break;case"textOverflow":n.textOverflow=e.textOverflow;break;case"opacity":n.opacity=e.opacity;break;case"strokeColor":n.strokeColor=e.strokeColor;break;case"strokeDashArray":n.strokeDashArray=e.strokeDashArray;break;case"strokeWidth":n.strokeWidth=e.strokeWidth;break;case"bold":n.bold=e.bold;break;case"color":n.color=e.color;break;case"textWrapping":n.textWrapping=e.textWrapping;break;case"fontFamily":n.fontFamily=e.fontFamily;break;case"fontSize":n.fontSize=e.fontSize;break;case"italic":n.italic=e.italic;break;case"textAlign":n.textAlign=e.textAlign;break;case"whiteSpace":n.whiteSpace=e.whiteSpace;break;case"textDecoration":n.textDecoration=e.textDecoration;break;case"gradient":if(n.gradient){Ym(e.gradient,n.gradient);break}}t instanceof Gc&&i.refreshTextElement()}function Ym(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"type":t.type=e.type;break;case"x1":t.x1=e.x1;break;case"x2":t.x2=e.x2;break;case"y1":t.y1=e.y1;break;case"y2":t.y2=e.y2;break;case"cx":t.cx=e.cx;break;case"cy":t.cy=e.cy;break;case"fx":t.fx=e.fx;break;case"fy":t.fy=e.fy;break;case"r":t.r=e.r;break;case"stops":t.stops=e.stops}}function Xm(e,t,n){e.width=t.width,e.height=t.height,e.minHeight=t.minHeight,e.maxHeight=t.maxHeight,e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.horizontalAlignment=t.wrapper.children[0].horizontalAlignment,e.verticalAlignment=t.wrapper.children[0].verticalAlignment,e.relativeMode=t.wrapper.children[0].relativeMode,e.visible=t.wrapper.children[0].visible,t.shape instanceof Lv&&(e.margin=t.shape.margin),e.id=t.wrapper.children[0].id,e.style=t.style;for(var i=0,o=n.views;i<o.length;i++){var r=o[i];My(t.id+"_groupElement",r),My(t.id+"_content_groupElement",r),My(t.id+"_html_element",r)}t.wrapper.children.splice(0,1),t.wrapper.children.splice(0,0,e)}function Zm(e){var t=new qc;t.style.fill="transparent";var n="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",i=new Yc;i.data=n,i.id=e.id+"_0_finalNode",i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.style.strokeColor=e.style.strokeColor,i.style.strokeWidth=e.style.strokeWidth;var o=new Yc;return o.data=n,o.id=e.id+"_1_finalNode",o.horizontalAlignment="Center",o.verticalAlignment="Center",o.relativeMode="Object",o.style.fill=e.style.fill,o.style.strokeColor=e.style.strokeColor,o.style.strokeWidth=e.style.strokeWidth,t.children=[i,o],t.children[0].width=e.width,t.children[0].height=e.height,t.children[1].height=e.height/1.5,t.children[1].width=e.width/1.5,t.style.strokeWidth=0,t.style.strokeColor="transparent",t}function Jm(e){My(e+"_linear"),My(e+"_radial")}function Km(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Qm(e,t,n){var i,o;if(e.intermediatePoints=t,e.updateSegmentElement(e,t,e.wrapper.children[0],n),o=e.sourceDecorator,"Bezier"===e.type){var r=e.segments[0],a=e.segments[e.segments.length-1];i=[jd.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,jd.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1]}else i=e.intermediatePoints;t=e.clipDecorators(e,t,n);var l=e.wrapper.children[0];l.canMeasurePath=!0,e.updateDecoratorElement(l=e.wrapper.children[1],t[0],i[1],o),e.updateDecoratorElement(l=e.wrapper.children[2],t[t.length-1],i[i.length-2],e.targetDecorator),e.updateShapeElement(e)}function $m(e,t,n){var i,o=e.wrapper,r=o.bounds,a=t.offset,l=t.size/n.scale,s=t.margin,d=o.offsetX-o.actualSize.width*o.pivot.x,c=o.offsetY-o.actualSize.height*o.pivot.y;if(i={x:0,y:0},e.nodes.length>0){switch(t.side){case"Top":i.x+=d+r.width*a,i.y+=c-(l/2+12.5);break;case"Bottom":i.x+=d+a*r.width,i.y+=c+o.actualSize.height+(l/2+12.5);break;case"Left":i.x+=d-(l/2+12.5),i.y+=c+a*r.height;break;case"Right":i.x+=d+o.actualSize.width+(l/2+12.5),i.y+=c+a*r.height}i.x+=(s.left-s.right)/n.scale+l/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),i.y+=(s.top-s.bottom)/n.scale+l/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1)}else if(e.connectors.length>0){var u=e.connectors[0],h={offset:a},p=Um(u.intermediatePoints,h),f=p.index;i=p.point;var g,m=zm(u.intermediatePoints,h).angle;ec(g=Qd(),-m,u.intermediatePoints[f].x,u.intermediatePoints[f].y),(i=$d(g,i)).x+=s.left-s.right+l/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),i.y+=s.top-s.bottom+l/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1),ec(g=Qd(),m,u.intermediatePoints[f].x,u.intermediatePoints[f].y),i=$d(g,i)}return 0===o.rotateAngle&&0===o.parentTransform||(ec(g=Qd(),o.rotateAngle+o.parentTransform,o.offsetX,o.offsetY),i=$d(g,i)),i}function ev(e,t,n,i){if(i.annotation){if(ag(i.annotation))return!0}else if(Sc[t]&e&&Dc[t]&n)return!0;return!1}function tv(e,t){return!!(Sc[t]&e)}function nv(e,t){return e.visibility&t}function iv(e,t){var n;if("Text"===e.shape.type)n=e.shape;else{var i=t.split("_");t=i[i.length-1];for(var o=0;o<e.annotations.length;o++)t===e.annotations[o].id&&(n=e.annotations[o])}return n}function ov(e,t){var n=t.split("_");if(t=n[n.length-1],e){e=e;for(var i=0;i<e.ports.length;i++)if(t===e.ports[i].id)return e.ports[i]}}function rv(e,t){var n={},i=0;if(e.ports){var o=e.ports;for(i=0;i<o.length;i++)t?o[i].constraints&zc.InConnect&&(n=o[i]):o[i].constraints&zc.OutConnect&&(n=o[i])}return n}function av(e,t,n){for(var i=n?e.annotations:e.ports,o=0;o<i.length;o++)if(i[o].id===t)return o.toString();return"-1"}function lv(e,t){var n;for(n=0;n<e.length;n++)if(t===e[n].id)return!0;return!1}function sv(e,t,n,i,o,r){for(var a,l=e.children,s=0;s<l.length;s++)if(a=i[l[s]])if(a.children)sv(a,t,n,i,o,r);else if(a.offsetX-=t,a.offsetY-=n,!o){var d,c=void 0;i[a.id]=a,(c=a.initContainer()).children||(c.children=[]),d=a.init(r),c.children.push(d),c.measure(new Bd(a.width,a.height)),c.arrange(c.desiredSize)}}function dv(e,t,n){if(0===n.length)n.push(e);else if(1===n.length)n[0][t]>e[t]?n.splice(0,0,e):n.push(e);else if(n.length>1){for(var i=0,o=n.length-1,r=Math.floor((i+o)/2);r!==i;)if(n[r][t]<e[t])i=r,r=Math.floor((i+o)/2);else{if(!(n[r][t]>e[t]))break;o=r,r=Math.floor((i+o)/2)}n[o][t]<e[t]?n.push(e):n[i][t]>e[t]?n.splice(i,0,e):n[i][t]<e[t]&&n[o][t]>e[t]&&n.splice(o,0,e)}}function cv(e,t){var n,i=e.annotations;for(n=0;i&&n<i.length;n++)if(t.annotationId&&i[n].id===t.annotationId)return i[n];return e}function uv(e,t,n,i){return Ka()&&(e={cause:e.cause,state:n,type:i,cancel:!1,element:hv(t)===zf?{connector:xv(t)}:{node:xv(t)}}),e}var hv=function(e){return e&&(e=void 0!==e.sourceID||void 0!==e.sourcePoint||void 0!==e.targetID||void 0!==e.targetPoint||void 0!==e.type?zf:ry),e},pv=function(e){if(!e.sourceID&&!e.targetID){var t={x:e.sourcePoint.x,y:e.sourcePoint.y},n={x:e.targetPoint.x,y:e.targetPoint.y};"Horizontal"===e.flip?(e.sourcePoint.x=n.x,e.targetPoint.x=t.x):"Vertical"===e.flip?(e.sourcePoint.y=n.y,e.targetPoint.y=t.y):"Both"===e.flip&&(e.sourcePoint=n,e.targetPoint=t)}},fv=function(e,t,n){var i=n.offset.x,o=n.offset.y;return"Horizontal"===t?(i=1-n.offset.x,o=n.offset.y):"Vertical"===t?(i=n.offset.x,o=1-n.offset.y):"Both"===t&&(i=1-n.offset.x,o=1-n.offset.y),e.setOffsetWithRespectToBounds(i,o,"Fraction"),e},gv=function(e,t,n,i,o){if(e.hasChildren())for(var r=0,a=e.children;r<a.length;r++){var l=a[r],s=t-l.offsetX+t,d=n-l.offsetY+n;"Horizontal"!==o&&"Both"!==o||(l.offsetX=s,l.flipOffset.x=s-l.desiredSize.width/2),"Vertical"!==o&&"Both"!==o||(l.offsetY=d,l.flipOffset.y=d-l.desiredSize.height/2),(l instanceof qc||l instanceof Fc)&&gv(l,t,n,i,o),l.measure(new Bd(l.bounds.width,l.bounds.height)),l.arrange(l.desiredSize);var c=i.nameTable[l.id];c&&i.updateConnectorEdges(c)}},mv=function(e){var t=e.selectedItems.nodes,n=e.selectedItems.connectors,i=e.allowServerDataBinding,o=e.isProtectedOnChange;e.protectPropertyChange(!0),e.allowServerDataBinding=!1,e.selectedItems.nodes=[],e.selectedItems.connectors=[],e.allowServerDataBinding=i,e.protectPropertyChange(o);for(var r=Yy(e.selectedItems),a=0;a<t.length;a++)e.selectedItems.nodes.push(e.nameTable[t[a].id]);for(a=0;a<n.length;a++)e.selectedItems.connectors.push(e.nameTable[n[a].id]);return r},vv=function(e,t){for(var n,i=new Yc,o=0;o<e.length-1;o++)n=bv(e[o],e[o+1]),i.data=n[0],i.id=t.id+"_"+t.shape.sequence,i.offsetX=n[1].x,i.offsetY=n[1].y,i.rotateAngle=45,i.transform=Ic.Self;return i},yv=function(e,t){if(e instanceof ry)for(var n=0;n<e.ports.length;n++)if(e.ports[n].id===t.id.split("_")[1])return!0;return!1},bv=function(e,t){var n={x:e.x,y:e.y},i=Cv(e,t);i=Math.min(30,i/2);var o=Ou(e,t),r=jd.transform({x:n.x,y:n.y},o,i),a=jd.transform({x:r.x,y:r.y},o,-12),l=jd.transform({x:a.x,y:a.y},o,24);return["M"+a.x+" "+a.y+" L"+l.x+" "+l.y,r]},wv=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},Cv=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function xv(e){return Ka()&&(e=Yy(e)),e}function Sv(){return(navigator.platform.indexOf("Mac")>=0||navigator.platform.indexOf("iPad")>=0||navigator.platform.indexOf("iPhone")>=0||navigator.platform.indexOf("MacIntel")>=0)&&("safari"===Il.info.name||"webkit"===Il.info.name)}function Tv(e,t,n,i){return void 0!==t.previewSize[i]?t.previewSize[i]:void 0!==e.symbolPreview[i]?e.symbolPreview[i]:t[i]||n.actualSize[i]}var Ev=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("None")],t.prototype,"shape",void 0),Object(O.__decorate)([Ks("white")],t.prototype,"fill",void 0),Object(O.__decorate)([Ks("Auto")],t.prototype,"horizontalAlignment",void 0),Object(O.__decorate)([Ks("Auto")],t.prototype,"verticalAlignment",void 0),Object(O.__decorate)([Ks(10)],t.prototype,"width",void 0),Object(O.__decorate)([Ks(10)],t.prototype,"height",void 0),Object(O.__decorate)([Qs({x:.5,y:1},jd)],t.prototype,"offset",void 0),Object(O.__decorate)([Ks("#1a1a1a")],t.prototype,"borderColor",void 0),Object(O.__decorate)([Ks(1)],t.prototype,"borderWidth",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks("")],t.prototype,"pathData",void 0),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"cornerRadius",void 0),Object(O.__decorate)([Qs({left:2,right:2,top:2,bottom:2},cc)],t.prototype,"padding",void 0),t}(fd),_v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.orientation="Vertical",t.measureChildren=void 0,t.considerPadding=!0,t}return Object(O.__extends)(t,e),t.prototype.measure=function(e){return this.desiredSize=this.measureStackPanel(e,"Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=this.arrangeStackPanel(e,"Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack),this.updateBounds(),this.actualSize},t.prototype.measureStackPanel=function(t,n){var i=void 0;if(void 0!==this.children&&this.children.length>0)for(var o=0,r=this.children;o<r.length;o++){var a=r[o];a.parentTransform=this.rotateAngle+this.parentTransform,a.measure(this.measureChildren?a.desiredSize:t);var l=a.desiredSize.clone();this.applyChildMargin(a,l),0!==a.rotateAngle&&(l=ib(l,a.rotateAngle)),void 0===i?i=l:a.preventContainer||n(l,i)}return i=e.prototype.validateDesiredSize.call(this,i,t),this.stretchChildren(i),this.considerPadding&&this.applyPadding(i),i},t.prototype.arrangeStackPanel=function(t,n){if(void 0!==this.children&&this.children.length>0){var i=void 0,o=void 0;i=this.offsetX-t.width*this.pivot.x+this.padding.left,o=this.offsetY-t.height*this.pivot.y+this.padding.top;for(var r=0,a=this.children;r<a.length;r++){var l=a[r],s=l.desiredSize.clone(),d=s;"Vertical"===this.orientation?o+=l.margin.top:i+=l.margin.left,0!==l.rotateAngle&&(d=ib(s,l.rotateAngle));var c=n(i,o,l,this,t,d);e.prototype.findChildOffsetFromCenter.call(this,l,c),l.arrange(s,!0),"Vertical"===this.orientation?o+=d.height+l.margin.bottom:i+=d.width+l.margin.right}}return t},t.prototype.updateHorizontalStack=function(e,t){t.height=Math.max(e.height,t.height),t.width+=e.width},t.prototype.updateVerticalStack=function(e,t){t.width=Math.max(e.width,t.width),t.height+=e.height},t.prototype.arrangeHorizontalStack=function(e,t,n,i,o,r){var a=0;return"Top"===n.verticalAlignment?a=t+n.margin.top+r.height/2:"Bottom"===n.verticalAlignment?a=i.offsetY+o.height*(1-i.pivot.y)-i.padding.bottom-n.margin.bottom-r.height/2:(a=i.offsetY-o.height*i.pivot.y+o.height/2,n.margin.top&&(a=t+n.margin.top+r.height/2)),{x:e+r.width/2,y:a}},t.prototype.arrangeVerticalStack=function(e,t,n,i,o,r){var a=0;return"Left"===n.horizontalAlignment?a=e+n.margin.left+r.width/2:"Right"===n.horizontalAlignment?a=i.offsetX+o.width*(1-i.pivot.x)-i.padding.right-n.margin.right-r.width/2:(a=i.offsetX-o.width*i.pivot.x+o.width/2,n.margin.left&&(a=e+n.margin.left+r.width/2)),{x:a,y:t+r.height/2}},t.prototype.stretchChildren=function(e){if(void 0!==this.children&&this.children.length>0)for(var t=0,n=this.children;t<n.length;t++){var i=n[t];"Vertical"===this.orientation?"Stretch"===i.horizontalAlignment&&(i.desiredSize.width=e.width-(i.margin.left+i.margin.right)):"Stretch"===i.verticalAlignment&&(i.desiredSize.height=e.height-(i.margin.top+i.margin.bottom))}},t.prototype.applyChildMargin=function(e,t){t.height+=e.margin.top+e.margin.bottom,t.width+=e.margin.left+e.margin.right},t}(Fc);function kv(e,t){var n=new ry(t,"nodes",{id:Fy()+"_path",height:1,constraints:_c.Default&~_c.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor}},!0);t.initObject(n),t.nodes.push(n),e.children.push(n.id)}function Dv(e,t){var n={},i=t.style;return n.fill="transparent"!==i.fill?i.fill:e.style.fill,n.color=i.color,n.fontSize=12!==i.fontSize?i.fontSize:e.style.fontSize,n.strokeColor="black"!==i.strokeColor?i.strokeColor:e.style.strokeColor,n.strokeWidth=1!==i.strokeWidth?i.strokeWidth:e.style.strokeWidth,n}var Av=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("Horizontal")],t.prototype,"orientation",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"type",void 0),Object(O.__decorate)([Ks(void 0)],t.prototype,"offset",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableRouting",void 0),Object(O.__decorate)([Ks([])],t.prototype,"children",void 0),Object(O.__decorate)([Ks("")],t.prototype,"assistants",void 0),Object(O.__decorate)([Ks("")],t.prototype,"level",void 0),Object(O.__decorate)([Ks("")],t.prototype,"hasSubTree",void 0),Object(O.__decorate)([Ks("")],t.prototype,"rows",void 0),t}(fd),Ov=function(e){if(e){if(Ka())return oy;switch(e.type){case"Basic":return Hv;case"Flow":return Bv;case"Path":return Pv;case"Image":return Nv;case"Text":return Lv;case"Bpmn":return Xv;case"Native":return Rv;case"HTML":return Mv;case"UmlActivity":return Zv;case"UmlClassifier":return iy;case"SwimLane":return dy;default:return Hv}}return Ka()?oy:Hv},Iv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("Basic")],t.prototype,"type",void 0),t}(fd),Pv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Path"},Object(O.__decorate)([Ks("Path")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("")],t.prototype,"data",void 0),t}(Iv),Rv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Native"},Object(O.__decorate)([Ks("Native")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks("Stretch")],t.prototype,"scale",void 0),t}(Iv),Mv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Html"},Object(O.__decorate)([Ks("HTML")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),t}(Iv),Nv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Image"},Object(O.__decorate)([Ks("Image")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("")],t.prototype,"source",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"scale",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"align",void 0),t}(Iv),Lv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Text"},Object(O.__decorate)([Ks("Text")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),t}(Iv),Hv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BasicShape"},Object(O.__decorate)([Ks("Basic")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("Rectangle")],t.prototype,"shape",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"cornerRadius",void 0),Object(O.__decorate)([ed([],jd)],t.prototype,"points",void 0),t}(Iv),Bv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"FlowShape"},Object(O.__decorate)([Ks("Flow")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("Terminator")],t.prototype,"shape",void 0),t}(Iv),jv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BpmnGateway"},Object(O.__decorate)([Ks("None")],t.prototype,"type",void 0),t}(fd),zv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BpmnDataObject"},Object(O.__decorate)([Ks("None")],t.prototype,"type",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"collection",void 0),t}(fd),Uv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("None")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"loop",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"call",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"compensation",void 0),t}(fd),Fv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BpmnEvent"},Object(O.__decorate)([Ks("Start")],t.prototype,"event",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"trigger",void 0),t}(fd),Gv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BpmnSubEvent"},Object(O.__decorate)([Ks("None")],t.prototype,"trigger",void 0),Object(O.__decorate)([Ks("Start")],t.prototype,"event",void 0),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Qs({},jd)],t.prototype,"offset",void 0),Object(O.__decorate)([ed([],eu)],t.prototype,"annotations",void 0),Object(O.__decorate)([ed([],Kc)],t.prototype,"ports",void 0),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"horizontalAlignment",void 0),Object(O.__decorate)([Ks("Center")],t.prototype,"verticalAlignment",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"visible",void 0),t}(fd),qv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Qs({id:"success",event:"End",offset:{x:1,y:.5}},Gv)],t.prototype,"success",void 0),Object(O.__decorate)([Qs({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},Gv)],t.prototype,"failure",void 0),Object(O.__decorate)([Qs({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},Gv)],t.prototype,"cancel",void 0),t}(fd),Vv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("None")],t.prototype,"type",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"adhoc",void 0),Object(O.__decorate)([Ks("Default")],t.prototype,"boundary",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"compensation",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"loop",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"collapsed",void 0),Object(O.__decorate)([ed([],Gv)],t.prototype,"events",void 0),Object(O.__decorate)([Qs({},qv)],t.prototype,"transaction",void 0),Object(O.__decorate)([Ks(void 0)],t.prototype,"processes",void 0),t}(fd),Wv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BpmnActivity"},Object(O.__decorate)([Ks("Task")],t.prototype,"activity",void 0),Object(O.__decorate)([Qs({},Uv)],t.prototype,"task",void 0),Object(O.__decorate)([Qs({},Vv)],t.prototype,"subProcess",void 0),t}(fd),Yv=function(e){function t(t,n,i,o){return e.call(this,t,n,i,o)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BpmnAnnotation"},Object(O.__decorate)([Ks("")],t.prototype,"text",void 0),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"angle",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"length",void 0),t}(fd),Xv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"BpmnShape"},Object(O.__decorate)([Ks("Bpmn")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("Event")],t.prototype,"shape",void 0),Object(O.__decorate)([Qs({},Fv)],t.prototype,"event",void 0),Object(O.__decorate)([Qs({},jv)],t.prototype,"gateway",void 0),Object(O.__decorate)([Qs({},zv)],t.prototype,"dataObject",void 0),Object(O.__decorate)([Qs({},Wv)],t.prototype,"activity",void 0),Object(O.__decorate)([Qs({},Yv)],t.prototype,"annotation",void 0),Object(O.__decorate)([ed([],Yv)],t.prototype,"annotations",void 0),t}(Iv),Zv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UmlActivityShape"},Object(O.__decorate)([Ks("UmlActivity")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("Action")],t.prototype,"shape",void 0),t}(Iv),Jv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"MethodArguments"},Object(O.__decorate)([Ks("")],t.prototype,"name",void 0),Object(O.__decorate)([Ks("")],t.prototype,"type",void 0),Object(O.__decorate)([Qs({},bc)],t.prototype,"style",void 0),t}(fd),Kv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UmlClassAttribute"},Object(O.__decorate)([Ks("Public")],t.prototype,"scope",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"isSeparator",void 0),t}(Jv),Qv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UmlClassMethod"},Object(O.__decorate)([ed([],Jv)],t.prototype,"parameters",void 0),t}(Kv),$v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UmlClass"},Object(O.__decorate)([Ks("")],t.prototype,"name",void 0),Object(O.__decorate)([ed([],Kv)],t.prototype,"attributes",void 0),Object(O.__decorate)([ed([],Qv)],t.prototype,"methods",void 0),Object(O.__decorate)([Qs({},bc)],t.prototype,"style",void 0),t}(fd),ey=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UmlInterface"},Object(O.__decorate)([Ks(!1)],t.prototype,"isSeparator",void 0),t}($v),ty=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UmlEnumerationMember"},Object(O.__decorate)([Ks("")],t.prototype,"name",void 0),Object(O.__decorate)([Ks("")],t.prototype,"value",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"isSeparator",void 0),Object(O.__decorate)([Qs({},bc)],t.prototype,"style",void 0),t}(fd),ny=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UmlEnumeration"},Object(O.__decorate)([Ks("")],t.prototype,"name",void 0),Object(O.__decorate)([ed([],ty)],t.prototype,"members",void 0),Object(O.__decorate)([Qs({},bc)],t.prototype,"style",void 0),t}(fd),iy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"UmlClassifierShape"},Object(O.__decorate)([Ks("UmlClassifier")],t.prototype,"type",void 0),Object(O.__decorate)([Qs({},$v)],t.prototype,"classShape",void 0),Object(O.__decorate)([Qs({},ey)],t.prototype,"interfaceShape",void 0),Object(O.__decorate)([Qs({},ny)],t.prototype,"enumerationShape",void 0),Object(O.__decorate)([Ks("Class")],t.prototype,"classifier",void 0),t}(Iv),oy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"DiagramShape"},Object(O.__decorate)([Ks("Basic")],t.prototype,"type",void 0),Object(O.__decorate)([Ks("Rectangle")],t.prototype,"basicShape",void 0),Object(O.__decorate)([Ks("Terminator")],t.prototype,"flowShape",void 0),Object(O.__decorate)([Ks("Event")],t.prototype,"bpmnShape",void 0),Object(O.__decorate)([Ks("Action")],t.prototype,"umlActivityShape",void 0),Object(O.__decorate)([Ks("")],t.prototype,"data",void 0),Object(O.__decorate)([Ks("")],t.prototype,"content",void 0),Object(O.__decorate)([Ks("")],t.prototype,"textContent",void 0),Object(O.__decorate)([Ks("Stretch")],t.prototype,"scale",void 0),Object(O.__decorate)([Ks("")],t.prototype,"source",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"align",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"cornerRadius",void 0),Object(O.__decorate)([ed([],jd)],t.prototype,"points",void 0),Object(O.__decorate)([Qs({},zv)],t.prototype,"dataObject",void 0),Object(O.__decorate)([Qs({},Fv)],t.prototype,"event",void 0),Object(O.__decorate)([Qs({},jv)],t.prototype,"gateway",void 0),Object(O.__decorate)([ed([],Yv)],t.prototype,"annotations",void 0),Object(O.__decorate)([Qs({},Wv)],t.prototype,"activity",void 0),Object(O.__decorate)([Qs({},Yv)],t.prototype,"annotation",void 0),Object(O.__decorate)([Qs({},ny)],t.prototype,"enumerationShape",void 0),Object(O.__decorate)([Ks("Class")],t.prototype,"classifier",void 0),Object(O.__decorate)([Qs({},$v)],t.prototype,"classShape",void 0),Object(O.__decorate)([Qs({},ey)],t.prototype,"interfaceShape",void 0),t}(fd),ry=function(e){function t(t,n,i,o){var r,a=e.call(this,t,n,i,o)||this;return a.isCanvasUpdate=!1,a.status="None",a.parentId="",a.processId="",a.umlIndex=-1,a.outEdges=[],a.inEdges=[],a.isHeader=!1,a.isLane=!1,a.isPhase=!1,a.children&&a.children.length>0&&((r=i).style&&r.style.fill||(a.style.fill="transparent"),r.style&&r.style.strokeColor||(a.style.strokeColor="transparent")),a.shape&&"UmlActivity"===a.shape.type&&km(i,a),a.shape&&"SwimLane"===a.shape.type&&Tm(i,a),a.ports&&a.ports.length&&function(e){for(var t=0;t<e.ports.length;t++)e.ports[t].inEdges=[],e.ports[t].outEdges=[]}(a),a}return Object(O.__extends)(t,e),Object.defineProperty(t.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new Bd(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t;switch(t="SwimLane"!=this.shape.type?new Uc:new Ag,this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":var n=new Yc;n.data=this.shape.data,t=n;break;case"Image":var i=new Xc;i.source=this.shape.source,i.imageAlign=this.shape.align,i.imageScale=this.shape.scale,t=i;break;case"Text":var o=new Gc;o.content=Ka()?this.shape.textContent:this.shape.content,(t=o).style=this.style;break;case"Basic":if(!Ka()&&"Rectangle"===this.shape.shape||Ka()&&"Rectangle"===this.shape.basicShape)(t=a=new Uc).cornerRadius=this.shape.cornerRadius;else if(!Ka()&&"Polygon"===this.shape.shape||Ka()&&"Polygon"===this.shape.basicShape){var r=new Yc;r.data=Ud(this.shape.points),t=r}else{var a=new Yc,l=Vc(Ka()?this.shape.basicShape:this.shape.shape);a.data=l,t=a}break;case"Flow":var s=new Yc,d=ru(Ka()?this.shape.flowShape:this.shape.shape);s.data=d,t=s;break;case"UmlActivity":t=function(e,t,n){var i=Ka()?n.shape.umlActivityShape:n.shape.shape,o=Sg(i);switch(e.data=o,t=e,i){case"StructuredNode":if(n.annotations)for(var r=0;r<n.annotations.length;r++)n.annotations[r].content="<<"+n.annotations[r].content+">>";t=e;break;case"FinalNode":t=Zm(n)}return t}(new Yc,t,this);break;case"Bpmn":if(e.bpmnModule){t=e.bpmnModule.initBPMNContent(t,this,e),this.wrapper.elementActions=this.wrapper.elementActions|kc.ElementIsGroup;var c=this.shape.activity.subProcess;if(c.processes&&c.processes.length)for(var u=0,h=this.shape.activity.subProcess.processes;u<h.length;u++){var p=h[u];!e.nameTable[p]||e.nameTable[p].processId&&e.nameTable[p].processId!==this.id||(e.nameTable[p].processId=this.id,c.collapsed&&e.updateElementVisibility(e.nameTable[p].wrapper,e.nameTable[p],!c.collapsed),t.children.push(e.nameTable[p].wrapper))}}break;case"Native":var f=new Zc(this.id,e.element.id);f.content=this.shape.content,f.scale=this.shape.scale,t=f;break;case"HTML":var g=new gf(this.id,e.element.id,void 0,e.nodeTemplate);this.shape.content?g.content=this.shape.content:e.nodeTemplate&&(g.isTemplate=!0,g.template=g.content=Ny(g,!0,this)),t=g;break;case"UmlClassifier":t=function(e,t,n){var i,o="NoWrap";"Class"===t.shape.classifier?i=t.shape.classShape:"Enumeration"===t.shape.classifier?i=t.shape.enumerationShape:"Interface"===t.shape.classifier&&(i=t.shape.interfaceShape),t.container={type:"Stack",orientation:"Vertical"},t.constraints=(_c.Default|_c.HideThumbs)&~(_c.Rotate|_c.Resize),t.style={fill:t.style.fill,strokeColor:t.style.strokeColor,strokeWidth:1.5},t.children=[],t.maxWidth&&(o="Wrap");var r=new ry(n,"nodes",{id:t.id+"_umlClass_header",annotations:[{id:"name",content:i.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:i.style.color,fill:i.style.fill,textWrapping:o}},{content:"<<"+t.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:i.style.fontSize,color:i.style.color,fill:i.style.fill,textWrapping:o},offset:{x:.5,y:.3},constraints:Ec.ReadOnly}],constraints:(_c.Default|_c.HideThumbs)&~(_c.Rotate|_c.Drag|_c.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor}},!0);return n.initObject(r),n.nodes.push(r),n.UpdateBlazorDiagramModel(r,"Node"),t.children.push(r.id),function(e,t,n,i){if("Enumeration"===e.shape.classifier){var o=n.members;if(o&&o.length){kv(e,t);for(var r="",a=0;a<o.length;a++){var l=o[a];if(""!==l.name&&(r+=l.name),a!==o.length){var s=Dv(e,l),d=new ry(t,"nodes",{id:Fy()+"_umlMember",annotations:[{id:"name",content:r,offset:{x:0,y:.5},style:{bold:!0,fontSize:s.fontSize,color:s.color,fill:s.fill,textWrapping:i},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor,textWrapping:i},constraints:(_c.Default|_c.HideThumbs)&~(_c.Rotate|_c.Drag|_c.Resize),minHeight:25},!0);t.initObject(d),t.nodes.push(d),t.UpdateBlazorDiagramModel(d,"Node"),e.children.push(d.id),r="",l.isSeparator&&a!==o.length-1&&kv(e,t)}}}}else{var c=n.attributes;if(c.length){var u="";for(kv(e,t),a=0;a<c.length;a++){var h,p=c[a];h=p.scope&&"Public"===p.scope?" +":p.scope&&"Private"===p.scope?"-":p.scope&&"Protected"===p.scope?"#":"~",""!==p.name&&h&&(u+=h+" "+p.name+" : "+p.type),a!==c.length&&(s=Dv(e,p),d=new ry(t,"nodes",{id:Fy()+"_umlProperty",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},annotations:[{id:"name",content:u,offset:{x:0,y:.5},style:{bold:!0,fontSize:s.fontSize,color:s.color,fill:s.fill,textWrapping:i},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(_c.Default|_c.HideThumbs)&~(_c.Rotate|_c.Drag|_c.Resize),minHeight:25},!0),t.initObject(d),t.nodes.push(d),t.UpdateBlazorDiagramModel(d,"Node"),e.children.push(d.id),u="",p.isSeparator&&a!==c.length-1&&kv(e,t))}}}}(t,n,i,o),function(e,t,n,i){if(n.methods&&n.methods.length){var o=n.methods;kv(e,t);for(var r="",a="",l=void 0,s=0;s<o.length;s++){var d=o[s];if(l=d.scope&&"Public"===d.scope?" +":d.scope&&"Private"===d.scope?"-":d.scope&&"Protected"===d.scope?"#":"~",d.parameters)for(var c=0;c<d.parameters.length;c++)r+=d.parameters[c].type?d.parameters[c].name+":"+d.parameters[c].type:d.parameters[c].name,c!==d.parameters.length-1&&(r+=",");if(""!==d.name&&l&&(a+=l+" "+d.name+"("+r+") : "+d.type),s!==o.length){var u=Dv(e,d),h=new ry(t,"nodes",{id:Fy()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:a,offset:{x:0,y:.5},style:{bold:!0,fontSize:u.fontSize,color:u.color,fill:u.fill,textWrapping:i},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},minHeight:25,constraints:(_c.Default|_c.HideThumbs)&~(_c.Rotate|_c.Drag|_c.Resize)},!0);t.initObject(h),t.nodes.push(h),t.UpdateBlazorDiagramModel(h,"Node"),e.children.push(h.id),a="",d.isSeparator&&s!==o.length-1&&kv(e,t)}}}}(t,n,i,o),t.offsetX=t.offsetX,t.offsetY=t.offsetY,t.style.fill=t.style.fill,t.borderColor=t.borderColor,n.initObject(t),e}(t,this,e);break;case"SwimLane":this.annotations=[],this.ports=[],t.cellStyle.fill="none",t.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},t.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=_c.HideThumbs,function(e,t,n){n.width||0!==n.shape.phases.length||(n.width=100);var i=[],o=[],r=0,a=n.shape,l="Horizontal"===a.orientation;if(a.header&&a.hasHeader&&Yg(i,a.header.height),function(e,t,n){var i,o=0,r=n.shape;if(e.length>0)for(var a=0;a<e.length;a++)o+=e[a].height;if(t){if(r.phases.length>0&&r.phaseSize&&(o+=r.phaseSize,Yg(e,r.phaseSize)),r.lanes.length>0)for(a=0;a<r.lanes.length;a++)o+=i=r.lanes[a].height,a===r.lanes.length-1&&o<n.height&&(i+=n.height-o),Yg(e,i)}else if(r.phases.length>0){var l=0;for(a=0;a<r.phases.length;a++){var s=r.phases[a].offset;l+=0===a?s:s-=l,o+=i=s,a===r.phases.length-1&&o<n.height&&(i+=n.height-o),Yg(e,i)}}else Yg(e,n.height)}(i,l,n),function(e,t,n){var i,o,r,a,l=0,s=n.shape;if(s.phases.length>0&&"Horizontal"===s.orientation)for(a=0;a<s.phases.length;a++)i=s.phases[a].offset,l+=0===a?i:i-=l,o=Xg(i),a===s.phases.length-1&&l<n.width&&(o.width+=n.width-l),e.push(o);else if(t)o=Xg(n.width),e.push(o);else{for(s.phaseSize&&s.phases.length>0&&(l+=s.phaseSize,o=Xg(s.phaseSize),e.push(o)),r=0;r<s.lanes.length;r++)l+=s.lanes[r].width,o=Xg(s.lanes[r].width),r===s.lanes.length-1&&l<n.width&&(o.width+=n.width-l),e.push(o);0===s.phases.length&&0===s.lanes.length&&(o=Xg(n.width),e.push(o))}}(o,l,n),e.setDefinitions(i,o),a.header&&a.hasHeader&&(function(e,t,n){for(var i=0,o=e.columnDefinitions(),r=n.shape,a=0;a<o.length;a++)i+=o[a].width;r.header.id=r.header.id||Fy();var l={id:n.id+r.header.id,annotations:[Yy(r.header.annotation)],style:r.header.style?r.header.style:void 0,offsetX:n.offsetX,offsetY:n.offsetY,rowIndex:0,columnIndex:0,maxWidth:i,container:{type:"Canvas",orientation:"Horizontal"}};Xf(n)||(l.constraints&=~_c.Select);var s=qg(t,0,n,l,!0);e.addObject(s,0,0,1,e.columnDefinitions().length)}(e,t,n),r++),a.phases.length>0&&a.phaseSize){for(var s=0;s<a.phases.length;s++)""===a.phases[s].id&&(a.phases[s].id=Fy()),Vg(e,t,n,r,l,s);r++}if(a.lanes.length>0)for(s=0;s<a.lanes.length;s++)""===a.lanes[s].id&&(a.lanes[s].id=Fy()),Wg(e,t,n,r,s,l),r++}(t,e,this)}return t.id=this.id+"_content",t.relativeMode="Object",void 0!==this.width&&(t.width=this.width),t.horizontalAlignment="Stretch",void 0!==this.height&&(t.height=this.height),void 0!==this.minHeight&&(t.minHeight=this.minHeight),void 0!==this.maxHeight&&(t.maxHeight=this.maxHeight),void 0!==this.minWidth&&(t.minWidth=this.minWidth),void 0!==this.maxWidth&&(t.maxWidth=this.maxWidth),(!Ka()&&"Rectangle"===this.shape.shape&&!this.shape.cornerRadius||Ka()&&"Rectangle"===this.shape.basicShape&&"Basic"===this.shape.type&&!this.shape.cornerRadius)&&(t.isRectElement=!0),t.verticalAlignment="Stretch",(this.shape instanceof Lv||Ka()&&"Text"===this.shape.type)&&(t.margin=this.shape.margin),tg(this)&&0!=(this.constraints&_c.Shadow)&&(t.shadow=this.shadow),("Bpmn"!==this.shape.type||!Ka()&&"Message"===this.shape.shape||Ka()&&"Message"===this.shape.bpmnShape||!Ka()&&"DataSource"===this.shape.shape||Ka()&&"DataSource"===this.shape.bpmnShape)&&("UmlActivity"!==this.shape.type||!Ka()&&"FinalNode"!==this.shape.shape||Ka()&&"FinalNode"!==this.shape.umlActivityShape)&&"Text"!==this.shape.type&&(t.style=this.style),(this.wrapper.elementActions&kc.ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(t.flip=this.flip),t},t.prototype.initContainer=function(){var e;if(this.id||(this.id=Fy()),!this.container||this.shape instanceof dy)e=this.children?new Fc:new qc;else switch(this.container.type){case"Canvas":e=new qc;break;case"Stack":e=new _v;break;case"Grid":(e=new Ag).setDefinitions(this.rows,this.columns)}return e.id=this.id,e.offsetX=this.offsetX,e.offsetY=this.offsetY,e.visible=this.visible,e.horizontalAlignment=this.horizontalAlignment,e.verticalAlignment=this.verticalAlignment,this.container&&(e.width=this.width,e.height=this.height,"Stack"===this.container.type&&(e.orientation=this.container.orientation)),e.style.fill=this.backgroundColor,e.style.strokeColor=this.borderColor,e.style.strokeWidth=this.borderWidth,e.rotateAngle=this.rotateAngle,e.minHeight=this.minHeight,e.minWidth=this.minWidth,e.maxHeight=this.maxHeight,e.maxWidth=this.maxWidth,e.pivot=this.pivot,e.margin=this.margin,e.flip=this.flip,this.wrapper=e,e},t.prototype.initPorts=function(e,t){for(var n=0;n<this.ports.length;n++)this.initPort(e,t,this.ports[n])},t.prototype.initPort=function(e,t,n){var i,o,r=this.wrapper;i=this.initPortWrapper(n);var a=rb(e);a&&(o=a(i,this)),i.description=o||i.id,i.inversedAlignment=r.inversedAlignment,i.elementActions=i.elementActions|kc.ElementIsPort,t.children.push(i)},t.prototype.getIconOffet=function(e,t){var n,i;return"BottomToTop"===e.orientation?(n=t.offset.x,i=1-t.offset.y):"LeftToRight"===e.orientation?(n=t.offset.y,i=t.offset.x):"RightToLeft"===e.orientation?(n=1-t.offset.y,i=t.offset.x):(n=t.offset.x,i=t.offset.y),{x:n,y:i}},t.prototype.initIcons=function(e,t,n,i){var o,r=this.wrapper,a=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==a.shape){var l=new qc;l.float=!0,l.id=this.id+"_icon_content",l.children=[],l.height=a.height,l.width=a.width,l.style.strokeColor="transparent",l.margin=a.margin,l.horizontalAlignment="Center",l.verticalAlignment="Center",l.visible=this.visible,o=this.getIconOffet(t,a),l.setOffsetWithRespectToBounds(o.x,o.y,"Fraction"),l.relativeMode="Point",this.initIconSymbol(a,l,e,i);var s=void 0,d=rb(e);d&&(s=d(a,this)),l.description=s||l.id,l.inversedAlignment=r.inversedAlignment,n.children.push(l)}},t.prototype.initfixedUserHandles=function(e){var t,n,i=this.wrapper;(n=new qc).float=!0,e.id=e.id||Fy(),n.id=this.id+"_"+e.id,n.children=[],n.height=e.height,n.width=e.width,n.style.strokeColor=e.handleStrokeColor,n.style.fill=e.fill,n.style.strokeWidth=e.handleStrokeWidth,n.margin=e.margin,n.visible=e.visibility,n.cornerRadius=e.cornerRadius,n.horizontalAlignment="Center",n.verticalAlignment="Center",t=this.getfixedUserHandleOffet(e),n.setOffsetWithRespectToBounds(t.x,t.y,"Fraction"),n.relativeMode="Point";var o=jm(e,n);return n.children.push(o),n.description=n.id,n.inversedAlignment=i.inversedAlignment,n},t.prototype.getfixedUserHandleOffet=function(e){return{x:e.offset.x,y:e.offset.y}},t.prototype.initAnnotations=function(e,t,n,i,o){for(var r,a=0;a<this.annotations.length;a++){r=this.initAnnotationWrapper(this.annotations[a],n,i,a,o);var l=void 0,s=rb(e);s&&(l=s(r,this)),r.description=l||r.id,r.inversedAlignment=t.inversedAlignment,t.children.push(r)}},t.prototype.initPortWrapper=function(e){e.id=e.id||Fy();var t=new Yc;t.height=e.height,t.width=e.width;var n="Custom"===e.shape?e.pathData:nu(e.shape);t.id=this.id+"_"+e.id,t.margin=e.margin,t.data=n;var i=e.style;return t.style={fill:i.fill,strokeColor:i.strokeColor,gradient:null,opacity:i.opacity,strokeDashArray:i.strokeDashArray,strokeWidth:i.strokeWidth},t.horizontalAlignment=e.horizontalAlignment,t.verticalAlignment=e.verticalAlignment,t=fv(t,this.flip,e),void 0===this.width&&void 0===this.height||(t.float=!0),t.relativeMode="Point",t.visible=!(!nv(e,Cc.Visible)||nv(e,Cc.Hover)||nv(e,Cc.Connect)),t.elementActions=t.elementActions|kc.ElementIsPort,t},t.prototype.initAnnotationWrapper=function(e,t,n,i,o){e.id=e.id||i+"annotation"||Fy();var r,a=e;if(Ka()&&"Template"===e.annotationType&&(e.template=e.template?e.template:""),t&&(e.template||"Template"===e.annotationType||o&&""===e.content))r=Uy(r=new gf(this.id,t,e.id,o),e,o);else{(r=new Gc).canMeasure=!n;var l=e.style,s=e.hyperlink.link?e.hyperlink:void 0;r.style={fill:l.fill,strokeColor:l.strokeColor,strokeWidth:l.strokeWidth,bold:l.bold,textWrapping:l.textWrapping,color:s?s.color||r.hyperlink.color:l.color,whiteSpace:l.whiteSpace,fontFamily:l.fontFamily,fontSize:l.fontSize,italic:l.italic,gradient:null,opacity:l.opacity,strokeDashArray:l.strokeDashArray,textAlign:l.textAlign,textOverflow:e.style.textOverflow,textDecoration:s?s.textDecoration||r.hyperlink.textDecoration:l.textDecoration},r.hyperlink.link=e.hyperlink.link||void 0,r.hyperlink.content=e.hyperlink.content||void 0,r.hyperlink.textDecoration=e.hyperlink.textDecoration||void 0,r.content=s?s.content||r.hyperlink.link:e.content}return r.constraints=e.constraints,r.height=e.height,r.width=e.width,r.visible=e.visibility,r.rotateAngle=e.rotateAngle,r.id=this.id+"_"+e.id,void 0===this.width||e.template||(void 0===e.width||e.width>this.width&&("Wrap"===e.style.textWrapping||"WrapWithOverflow"===e.style.textWrapping))&&(r.width=this.width),r.margin=e.margin,r.horizontalAlignment=e.horizontalAlignment,r.verticalAlignment=e.verticalAlignment,r.setOffsetWithRespectToBounds(a.offset.x,a.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(r.float=!0),r.relativeMode="Point",r},t.prototype.initIconContainer=function(e,t){var n=new Uc;return n.id=t.id+"_rect",n.height=e.height,n.width=e.width,n.visible=t.visible,n.margin=e.margin,n.cornerRadius=e.cornerRadius,n.style={fill:e.fill,strokeColor:e.borderColor,strokeWidth:e.borderWidth},n.setOffsetWithRespectToBounds(.5,.5,"Fraction"),n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.description=n.description||"Click here to expand or collapse",n},t.prototype.initIconSymbol=function(e,t,n,i){var o;if(t.children.push(this.initIconContainer(e,t)),"Template"===e.shape)(o=new Zc(this.id,i)).content=e.content,o.height=10,o.width=10;else{(o=new Yc).data=function(e){var t;switch(e.shape){case"Minus":t="M0,50 L100,50";break;case"Plus":t="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":t="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":t="M0,0 L50,100 L100,0 Z";break;case"Path":t=e.pathData}return t}(e);var r=py(o.data);o.height=r.height<10?r.height:10-(e.padding.bottom+e.padding.top),o.width=r.width<10?r.width:10-(e.padding.left+e.padding.right)}o.id=t.id+"_shape",o.horizontalAlignment="Center",o.verticalAlignment="Center",o.visible=t.visible,o.visible=t.visible,o.style={fill:"black",strokeColor:e.borderColor,strokeWidth:e.borderWidth},o.setOffsetWithRespectToBounds(.5,.5,"Fraction"),o.relativeMode="Object",o.description=t.description||"Click here to expand or collapse",t.children.push(o)},t.prototype.getClassName=function(){return"Node"},Object(O.__decorate)([ed([],eu)],t.prototype,"annotations",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offsetX",void 0),Object(O.__decorate)([Qs({},Av)],t.prototype,"layoutInfo",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offsetY",void 0),Object(O.__decorate)([ed([],Kc)],t.prototype,"ports",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"isExpanded",void 0),Object(O.__decorate)([ed([],vf)],t.prototype,"fixedUserHandles",void 0),Object(O.__decorate)([Qs({},Ev)],t.prototype,"expandIcon",void 0),Object(O.__decorate)([Qs({},Ev)],t.prototype,"collapseIcon",void 0),Object(O.__decorate)([Qs({x:.5,y:.5},jd)],t.prototype,"pivot",void 0),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),Object(O.__decorate)([Ks()],t.prototype,"minWidth",void 0),Object(O.__decorate)([Ks()],t.prototype,"minHeight",void 0),Object(O.__decorate)([Ks()],t.prototype,"maxWidth",void 0),Object(O.__decorate)([Ks()],t.prototype,"maxHeight",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"rotateAngle",void 0),Object(O.__decorate)([Qs({fill:"white"},bc)],t.prototype,"style",void 0),Object(O.__decorate)([Ks("transparent")],t.prototype,"backgroundColor",void 0),Object(O.__decorate)([Ks("none")],t.prototype,"borderColor",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"borderWidth",void 0),Object(O.__decorate)([Ks()],t.prototype,"data",void 0),Object(O.__decorate)([$s(Ov)],t.prototype,"shape",void 0),Object(O.__decorate)([Qs({},hf)],t.prototype,"previewSize",void 0),Object(O.__decorate)([Qs({},hf)],t.prototype,"dragSize",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"wrapper",void 0),Object(O.__decorate)([Ks(_c.Default)],t.prototype,"constraints",void 0),Object(O.__decorate)([Qs({},uc)],t.prototype,"shadow",void 0),Object(O.__decorate)([Ks()],t.prototype,"children",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"container",void 0),Object(O.__decorate)([Ks("Left")],t.prototype,"horizontalAlignment",void 0),Object(O.__decorate)([Ks("Top")],t.prototype,"verticalAlignment",void 0),Object(O.__decorate)([Ks()],t.prototype,"rows",void 0),Object(O.__decorate)([Ks()],t.prototype,"columns",void 0),Object(O.__decorate)([Ks()],t.prototype,"rowIndex",void 0),Object(O.__decorate)([Ks()],t.prototype,"columnIndex",void 0),Object(O.__decorate)([Ks()],t.prototype,"rowSpan",void 0),Object(O.__decorate)([Ks()],t.prototype,"columnSpan",void 0),Object(O.__decorate)([Ks("")],t.prototype,"branch",void 0),t}(ff),ay=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Qs({},$c)],t.prototype,"annotation",void 0),Object(O.__decorate)([Qs({fill:"#E7F4FF",strokeColor:"#CCCCCC"},vc)],t.prototype,"style",void 0),Object(O.__decorate)([Ks(50)],t.prototype,"height",void 0),Object(O.__decorate)([Ks(50)],t.prototype,"width",void 0),t}(fd),ly=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Lane"},Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Qs({fill:"#F9F9F9",strokeColor:"#CCCCCC"},vc)],t.prototype,"style",void 0),Object(O.__decorate)([ed([],ry)],t.prototype,"children",void 0),Object(O.__decorate)([Ks(100)],t.prototype,"height",void 0),Object(O.__decorate)([Ks(100)],t.prototype,"width",void 0),Object(O.__decorate)([Qs({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},ay)],t.prototype,"header",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"canMove",void 0),t}(fd),sy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"Phase"},Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Qs({strokeColor:"#CCCCCC"},vc)],t.prototype,"style",void 0),Object(O.__decorate)([Qs({annotation:{content:"Phase"}},ay)],t.prototype,"header",void 0),Object(O.__decorate)([Ks(100)],t.prototype,"offset",void 0),t}(fd),dy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=20,t.hasHeader=!0,t}return Object(O.__extends)(t,e),t.prototype.getClassName=function(){return"SwimLane"},Object(O.__decorate)([Ks("SwimLane")],t.prototype,"type",void 0),Object(O.__decorate)([Ks(20)],t.prototype,"phaseSize",void 0),Object(O.__decorate)([ed([],sy)],t.prototype,"phases",void 0),Object(O.__decorate)([Ks("Horizontal")],t.prototype,"orientation",void 0),Object(O.__decorate)([ed([],ly)],t.prototype,"lanes",void 0),Object(O.__decorate)([Qs({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},ay)],t.prototype,"header",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"isLane",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"isPhase",void 0),t}(Iv),cy=function(){function e(){}return e.prototype.getClassName=function(){return"ChildContainer"},Object(O.__decorate)([Ks("Canvas")],e.prototype,"type",void 0),Object(O.__decorate)([Ks("Vertical")],e.prototype,"orientation",void 0),e}(),uy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.init=function(e){var t=new Fc;if(t.measureChildren=!1,new Bd,t.children=[],this.annotation){var n=e.getWrapper(this.nodes.length>0?e.nameTable[this.nodes[0].id].wrapper:e.nameTable[this.connectors[0].id].wrapper,this.annotation.id);t.children.push(n)}else if(this.nodes||this.connectors){for(var i=0;i<this.nodes.length;i++)t.children.push(n=e.nameTable[this.nodes[i].id].wrapper);for(var o=0;o<this.connectors.length;o++)t.children.push(n=e.nameTable[this.connectors[o].id].wrapper)}var r=e.isProtectedOnChange;return e.protectPropertyChange(!1),this.wrapper=t,e.protectPropertyChange(r),t},Object(O.__decorate)([Ks(null)],t.prototype,"wrapper",void 0),Object(O.__decorate)([ed([],ry)],t.prototype,"nodes",void 0),Object(O.__decorate)([ed([],zf)],t.prototype,"connectors",void 0),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"rotateAngle",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offsetX",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"offsetY",void 0),Object(O.__decorate)([Qs({x:.5,y:.5},jd)],t.prototype,"pivot",void 0),Object(O.__decorate)([Ks("CompleteIntersect")],t.prototype,"rubberBandSelectionMode",void 0),Object(O.__decorate)([ed([],xg)],t.prototype,"userHandles",void 0),Object(O.__decorate)([Ks(Sc.All)],t.prototype,"constraints",void 0),Object(O.__decorate)([Ks()],t.prototype,"setTooltipTemplate",void 0),t}(fd);function hy(e){var t,n=[];if("msie"===Il.info.name||"edge"===Il.info.name)for(var i=0;i<e.childNodes.length;i++)1===(t=e.childNodes[i]).nodeType&&n.push(t);else n=e.children;return n}function py(e){if(e){window.measureElement.style.visibility="visible";var t=hy(window.measureElement.children[2])[0];t.setAttribute("d",e);var n=t.getBBox(),i=new Zd(n.x,n.y,n.width,n.height);return window.measureElement.style.visibility="hidden",i}return new Zd(0,0,0,0)}function fy(e,t,n,i,o){var r=new Bd,a=Ay("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(a.style.fontWeight="bold"),e.italic&&(a.style.fontStyle="italic"),void 0!==n&&(a.style.width=n.toString()+"px"),void 0!==i&&(a.style.height=i.toString()+"px"),void 0!==o&&(a.style.maxWidth=o.toString()+"px"),a.style.fontFamily=e.fontFamily,a.style.fontSize=e.fontSize+"px",a.style.color=e.color,a.textContent=t,a.style.whiteSpace=nb(e.whiteSpace,e.textWrapping),a.style.wordBreak=void 0!==o?"break-word":Qy(e.textWrapping),document.body.appendChild(a),r.width=a.offsetWidth,r.height=a.offsetHeight,document.body.removeChild(a),r}function gy(e,t,n,i){var o,r,a=0,l=0,s=!1;return 0===(o=t).x&&0===o.y||(a=0-Number(o.x),l=0-Number(o.y)),(e.actualSize.width!==o.width||e.actualSize.height!==o.height||i)&&(a=(i&&i.width||e.actualSize.width)/Number(o.width?o.width:1),l=(i&&i.height||e.actualSize.height)/Number(o.height?o.height:1),s=!0),r=Gd(Wd(zd(e.data)),a,l,s,o.x,o.y,0,0),s=!1,r}function my(e){return vy(e).getElementsByClassName("e-diagram-layer")[0]}function vy(e,t){var n;return t&&(n=document.getElementById(t)),"msie"===Il.info.name||"edge"===Il.info.name?n?n.querySelector("#"+e):document.getElementById(e):n?n.querySelector("#"+CSS.escape(e)):document.getElementById(e)}function yy(e,t,n){var i,o,r,a=void 0,l="";"native"===n?(i=ky(e),l="_content_groupElement"):"html"===n?(i=Dy(e).childNodes[0],l="_html_element"):(i=my(o=e).getElementById(o+"_diagramLayer"),l="_groupElement");for(var s=0;i.childNodes&&s<i.childNodes.length;s++)if((r=i.childNodes[s])&&r.id===t+l){a=s;break}return a}function by(e){return vy(e).getElementsByClassName("e-adorner-layer")[0]}function wy(e){return by(e).getElementById(e+"_SelectorElement")}function Cy(e){return by(e).getElementById(e+"_diagramAdorner")}function xy(e){return vy(e).getElementsByClassName("e-userHandle-layer")[0]}function Sy(e){return vy(e).getElementsByClassName("e-native-layer")[0]}function Ty(e){return vy(e).getElementsByClassName("e-grid-layer")[0]}function Ey(e){return vy(e).getElementsByClassName("e-background-layer")[0].parentNode}function _y(e){return vy(e).getElementsByClassName("e-background-layer")[0]}function ky(e){return Sy(e).getElementById(e+"_nativeLayer")}function Dy(e){var t=null;return window.domTable[e+"html_layer"]?t=window.domTable[e+"html_layer"]:(t=vy(e).getElementsByClassName("e-html-layer")[0],window.domTable[e+"html_layer"]=t),t}function Ay(e,t){var n=ks(e);return By(n,t),n}function Oy(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return Ly(n,t),n}function Iy(e,t,n){for(var i=e;i&&(n?i.id!==t:!Py(i,t));)i=i.parentNode;return i}function Py(e,t){return(" "+("object"==typeof e.className?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}function Ry(e,t,n){e=[];for(var i=0,o=n.length;i<o;i++)e.push({pageX:n[i].clientX,pageY:n[i].clientY,pointerId:null});return e}function My(e,t){var n=vy(e,t);n&&n.parentNode.removeChild(n)}function Ny(e,t,n){var i;i=t?Ay("div",{style:"height: 100%; width: 100%"}):document.createElementNS("http://www.w3.org/2000/svg","g");var o,r=function(e){var t=document.getElementById(e.diagramId),n="ej2_instances",i=t[n][0].nodes;void 0===i&&(i=function(e){for(var t=[],n=0;n<e.palettes.length;n++)for(var i=e.palettes[n].symbols,o=0;o<i.length;o++)i[o]instanceof ry&&t.push(i[o]);return t}(t[n][0]));for(var o=0;i&&o<i.length;o++)if(i[o].id===e.nodeId)return cv(i[o],e);var r=t[n][0].connectors;for(o=0;r&&o<r.length;o++)if(r[o].id===e.nodeId)return cv(r[o],e);var a=t[n][0].enterObject;return a&&(a.id===e.nodeId||a.children)?a.children&&Om(a,"HTML",t[n][0].enterTable)?t[n][0].enterTable[e.nodeId]:a:null}(e),a="",l={};if(r instanceof ry){if(l=r,"Native"===r.shape.type){var s,d=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(d),d.innerHTML=r.shape.content,s=d.getElementsByTagName("svg").length>0?d.getElementsByTagName("svg")[0].outerHTML:d.getElementsByTagName("g")[0].outerHTML,r.shape.content=s,e.content=s,d.parentElement.removeChild(d)}Ka()&&(a="diagramsf_node_template",l=xv(r)),o="nodeTemplate"}else l=r,Ka()&&(l=xv(r),a="diagramsf_annotation_template"),o="annotationTemplate";var c=document.getElementById(e.diagramId).ej2_instances[0];if("string"!=typeof e.content||e.isTemplate&&!Ka())if(e.isTemplate){p=void 0,p=e.getNodeTemplate()(Yy(n),c,o+"_"+("nodeTemplate"===o?n.id:e.nodeId+n.id),void 0,void 0,!1);for(var u=0;u<p.length;u++)i.appendChild(p[u])}else i.appendChild(e.content);else{var h=document.getElementById(e.content);if(h)i.appendChild(h);else for(var p=void 0,f=0,g=(p=rs(e.content))(l,c,o,a);f<g.length;f++)i.appendChild(g[f])}return e.isTemplate?i:i.cloneNode(!0)}function Ly(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)"style"!==n[i]?e.setAttribute(n[i],t[n[i]]):Hy(e,t[n[i]])}function Hy(e,t){for(var n=t.split(";"),i=0;i<n.length;i++){var o=n[i].split(":");2===o.length&&(e.style[o[0].trim()]=o[1].trim())}}function By(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)"style"!==n[i]?e.setAttribute(n[i],t[n[i]]):Hy(e,t[n[i]])}function jy(){if(window.measureElement)window.measureElement.usageCount+=1;else{var e,t=Ay("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),n=Ay("span",{style:"display:inline-block ; line-height: normal"});t.appendChild(n),e=Ay("img",{}),t.appendChild(e);var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xlink","http://www.w3.org/1999/xlink"),t.appendChild(i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");i.appendChild(o),document.createTextNode("");var r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.appendChild(r),window.measureElement=t,window.measureElement.usageCount=1,document.body.appendChild(t),window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}}function zy(e,t,n,i){return!(t.length>=1&&0===e.x)||"Clip"!==i.textOverflow&&"Ellipsis"!==i.textOverflow||"Wrap"!==i.textWrapping&&"WrapWithOverflow"!==i.textWrapping?e.x:(e.x=t[n-1]?t[n-1].x:-e.width/2,e.x)}function Uy(e,t,n){return n&&!t.template?(e.isTemplate=!0,e.template=e.content=Ny(e,!0,t)):e.content=t.template,e}function Fy(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",i=0;i<5;i++){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint16Array(1);e=(window.msCrypto||window.crypto).getRandomValues(o)[0]%(t.length-1)}else e=Math.floor(Math.random()*t.length);0===i&&e<10?i--:n+=t.substring(e,e+1)}return n}function Gy(e,t){if(e.nodes&&e.nodes.length>0)for(var n=0;n<e.nodes.length;n++)if(e.nodes[n].id===t)return n;if(e.connectors&&e.connectors.length>0)for(n=0;n<e.connectors.length;n++)if(e.connectors[n].id===t)return n;return null}function qy(e){if(e)try{if(document.querySelectorAll(e).length)return rs(document.querySelector(e).innerHTML.trim())}catch(t){return rs(e)}}function Vy(e){new Zd;var t=e.offsetY-e.actualSize.height*e.pivot.y,n=e.offsetY+e.actualSize.height*(1-e.pivot.y),i=e.offsetX-e.actualSize.width*e.pivot.x,o=e.offsetX+e.actualSize.width*(1-e.pivot.x);return Zd.toBounds([{x:i,y:t},{x:o,y:t},{x:i,y:n},{x:o,y:n}])}function Wy(e){var t,n=new Zd,i=(t=Vy(e)).middleLeft,o=t.topCenter,r=t.bottomCenter,a=t.middleRight,l=t.topLeft,s=t.topRight,d=t.bottomLeft,c=t.bottomRight;if(e.corners={topLeft:l,topCenter:o,topRight:s,middleLeft:i,middleRight:a,bottomLeft:d,bottomCenter:r,bottomRight:c},0!==e.rotateAngle||0!==e.parentTransform){var u=Qd();ec(u,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=l=$d(u,l),e.corners.topCenter=o=$d(u,o),e.corners.topRight=s=$d(u,s),e.corners.middleLeft=i=$d(u,i),e.corners.middleRight=a=$d(u,a),e.corners.bottomLeft=d=$d(u,d),e.corners.bottomCenter=r=$d(u,r),e.corners.bottomRight=c=$d(u,c)}return n=Zd.toBounds([l,s,d,c]),e.corners.left=n.left,e.corners.right=n.right,e.corners.top=n.top,e.corners.bottom=n.bottom,e.corners.center=n.center,e.corners.width=n.width,e.corners.height=n.height,n}function Yy(e,t,n,i){var o={},r="properties";if(e){n=e.propName;var a=[],l=[];if((a=a.concat(Object.keys(e[r]||e))).push("version"),n){var s=rb(t);l=s?s(n):[],a=a.concat(l)}var d=function(e){switch(n){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"];case"layers":return["objectZIndex"]}return[]}();a=a.concat(d),i&&(a=function(e,t){var n=[];return t instanceof ry?n=["width","height","offsetX","offsetY","container","visible","horizontalAlignment","verticalAlignment","backgroundColor","borderColor","borderWidth","rotateAngle","minHeight","minWidth","maxHeight","maxWidth","pivot","margin","flip","wrapper","constraints","style","annotations","ports","isExpanded","expandIcon"]:t instanceof zf?n=["constraints","sourcePadding","targetPadding","cornerRadius","flip","type","targetDecorator","sourceDecorator","sourceID","shape","bridgeSpace","annotations","segments","hitPadding","tooltip","previewSize","dragSize","style","sourcePortID","targetID","targetPortID","visible"]:t instanceof Cf?n=["height","width","shape","style","pivot","pathData"]:t instanceof Iv||t instanceof Ev?(n.push("shape"),t instanceof Hv?n.push("cornerRadius"):t instanceof Text?n.push("margin"):t instanceof Image?(n.push("align"),n.push("scale")):t instanceof Rv?n.push("scale"):t instanceof Xv?(n.push("activity"),n.push("annotations")):t instanceof Ev&&(n.push("borderColor"),n.push("borderWidth"),n.push("cornerRadius"),n.push("fill"))):t instanceof Wv?n.push("subProcess"):t instanceof Uv?(n.push("call"),n.push("compensation"),n.push("loop")):t instanceof Vv?(n.push("adhoc"),n.push("boundary"),n.push("compensation"),n.push("loop"),n.push("processes")):t instanceof Jc?(n.push("height"),n.push("width"),n.push("visibility"),n.push("horizontalAlignment"),n.push("verticalAlignment"),n.push("shape")):t instanceof $c?(n.push("constraints"),n.push("height"),n.push("horizontalAlignment"),n.push("rotateAngle"),n.push("template"),n.push("verticalAlignment"),n.push("visibility"),n.push("width"),n.push("margin")):t instanceof cc?(n.push("left"),n.push("right"),n.push("top"),n.push("bottom")):t instanceof bc&&(n=["strokeWidth","strokeDashArray","opacity","gradient","fontSize","fontFamily","textOverflow","textDecoration","whiteSpace","textWrapping","textAlign","italic","bold"]),t instanceof vc&&(n.push("strokeColor"),n.push("color")),e.concat(n)}(a,e));for(var c=0,u=a;c<u.length;c++){var h=u[c];"historyManager"!==h&&("wrapper"!==h?e[h]&&e.hasOwnProperty("observers")||(o[h]=e[h]instanceof Array?Xy(-1===d.indexOf(h)&&e[r]?e[r][h]:e[h],t,h,i):e[h]instanceof Array==0&&e[h]instanceof HTMLElement?e[h].cloneNode(!0).innerHtml:e[h]instanceof Array==0&&e[h]instanceof Object?Yy(-1===d.indexOf(h)&&e[r]?e[r][h]:e[h],void 0,void 0,i):e[h]):e[h]&&(o[h]={actualSize:{width:e[h].actualSize.width,height:e[h].actualSize.height},offsetX:e[h].offsetX,offsetY:e[h].offsetY}))}}return o}function Xy(e,t,n,i){var o;if(e){o=[];for(var r=0;r<e.length;r++)e[r]instanceof Array?o.push(e[r]):e[r]instanceof Object?o.push(Yy(e[r],t,n,i)):o.push(e[r])}return o}function Zy(e,t){if(e){t||(t={properties:{}});for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(e[o]instanceof Array){var r=Jy(e[o],t.properties[o]);t.properties[o]&&t.properties[o].length||(t[o]=r)}else if(e[o]instanceof Array==0&&e[o]instanceof HTMLElement)t[o]=e[o].cloneNode(!0).innerHtml;else if(e[o]instanceof Array==0&&e[o]instanceof Object){var a=Zy(e[o],t.properties[o]);a.properties&&!Object.keys(a.properties).length&&delete a.properties,t[o]=a}else t[o]=void 0!==t.properties[o]?t[o]:e[o]}}return t}function Jy(e,t){var n=[],i=!1;t||(t=[]),t.length||(i=!0);for(var o=0;o<e.length;o++)if(e[o]instanceof Array)Jy(e[o],t[o]),i&&n.push(Jy);else if(e[o]instanceof Object){var r=Zy(e[o],t[o]);i&&n.push(r)}else n.push(e[o]);return n}function Ky(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t}function Qy(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t}function $y(e,t){window.measureElement.style.visibility="visible";var n=hy(window.measureElement.children[2])[1];n.textContent=e,Hy(n,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var i=n.getBBox().width;return window.measureElement.style.visibility="hidden",i}function eb(e,t){return(e+t)/2}function tb(e,t){var n,i=0,o=0,r=0,a="";n=e.length;var l=0;do{r>0&&(i=o),o=Math.floor(eb(i,n)),r=$y(a+=e.substr(i,o),t)}while(r<=t.width);for(a=a.substr(0,i),l=i;l<n;l++)if((r=$y(a+=e[l],t))>=t.width){e=e.substr(0,a.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e}function nb(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var n="";switch(e){case"CollapseAll":n="nowrap";break;case"CollapseSpace":n="pre-line";break;case"PreserveAll":n="pre-wrap"}return n}function ib(e,t){var n=Qd();ec(n,t,0,0);var i=$d(n,{x:0,y:0}),o=$d(n,{x:e.width,y:0}),r=$d(n,{x:0,y:e.height}),a=$d(n,{x:e.width,y:e.height}),l=Math.min(i.x,o.x,r.x,a.x),s=Math.min(i.y,o.y,r.y,a.y),d=Math.max(i.x,o.x,r.x,a.x),c=Math.max(i.y,o.y,r.y,a.y);return new Bd(d-l,c-s)}function ob(e,t,n,i){if(0!==e){var o=Qd();return ec(o,e,t,n),$d(o,i)}return i}function rb(e){return void 0!==e&&"string"==typeof e&&(e=za(e,window)),e}var ab=function(){function e(){}return e.getContext=function(e){return e.getContext("2d")},e.setCanvasSize=function(e,t,n){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",n.toString()))},e.prototype.renderGradient=function(e,t,n,i){var o,r,a;if("None"!==e.gradient.type){for(var l=0;l<e.gradient.stops.length;l++)o=void 0!==o?e.gradient.stops[l].offset:Math.max(o,e.gradient.stops[l].offset),r=void 0!==r?e.gradient.stops[l].offset:Math.min(r,e.gradient.stops[l].offset);if("Linear"===e.gradient.type){var s=e.gradient;a=t.createLinearGradient(n+s.x1,i+s.y1,n+s.x2,i+s.y2)}else{var d=e.gradient;a=t.createRadialGradient(n+d.fx,i+d.fy,0,n+d.cx,i+d.cy,d.r)}for(l=0;l<e.gradient.stops.length;l++){var c=e.gradient.stops[l];a.addColorStop(r<0?(o+c.offset)/(2*o):c.offset/o,c.color)}t.fillStyle=a}return t},e.prototype.renderShadow=function(t,n,i){void 0===i&&(i=null);var o=e.getContext(n);o.save(),o.beginPath(),o.strokeStyle=o.fillStyle=t.shadow.color,o.globalAlpha=t.shadow.opacity;var r=jd.transform({x:0,y:0},t.shadow.angle,t.shadow.distance),a=t.x+r.x,l=t.y+r.y;this.rotateContext(n,t.angle,a+t.width*t.pivotX,l+t.height*t.pivotY),i?(o.translate(a,l),this.renderPath(n,t,i),o.translate(-a,-l)):(o.rect(a,l,t.width,t.height),o.fillRect(a,l,t.width,t.height)),o.fill(),o.stroke(),o.closePath(),o.restore()},e.createCanvas=function(e,t,n){var i=Ay("canvas",{id:e});return this.setCanvasSize(i,t,n),i},e.prototype.setStyle=function(t,n){var i=e.getContext(t);"none"===n.fill&&(n.fill="transparent"),"none"===n.stroke&&(n.stroke="transparent"),i.strokeStyle=n.stroke,i.lineWidth=n.strokeWidth,0===n.strokeWidth&&(i.strokeStyle="transparent"),i.globalAlpha=n.opacity;var o=[];n.dashArray&&(o=this.parseDashArray(n.dashArray)),i.setLineDash(o),n.gradient&&"None"!==n.gradient.type?this.renderGradient(n,i,0,0):i.fillStyle=n.fill},e.prototype.rotateContext=function(t,n,i,o){var r=e.getContext(t);r.translate(i,o),r.rotate(n*Math.PI/180),r.translate(-i,-o)},e.prototype.setFontStyle=function(t,n){var i=e.getContext(t),o="";n.italic&&(o+="italic "),n.bold&&(o+="bold "),o+=n.fontSize+"px ",i.font=o+=n.fontFamily},e.prototype.parseDashArray=function(e){for(var t=[],n=-1!==e.indexOf(" ")?" ":",",i=0,o=e.split(n);i<o.length;i++)t.push(Number(o[i]));return t},e.prototype.drawRoundedRect=function(t,n){var i=e.getContext(t);i.beginPath();var o=n.x,r=n.y,a=n.width,l=n.height,s=o+a/2,d=r+l/2;i.beginPath(),this.setStyle(t,n),i.moveTo(o,d),i.quadraticCurveTo(o,r,s,r),i.quadraticCurveTo(o+a,r,o+a,d),i.quadraticCurveTo(o+a,r+l,s,r+l),i.quadraticCurveTo(o,r+l,o,d),i.stroke()},e.prototype.drawRectangle=function(t,n){if(!0===n.visible)if(n.cornerRadius)n.width<30||n.height<30?this.drawRoundedRect(t,n):(n.data=function(e,t,n){var i,o,r,a="",l=[{x:0+e,y:0},{x:0+n-e,y:0},{x:0+n,y:0+e},{x:0+n,y:0+t-e},{x:0+n-e,y:0+t},{x:0+e,y:0+t},{x:0,y:0+t-e},{x:0,y:0+e}],s=[{x:0+n,y:0},{x:0+n,y:0+t},{x:0,y:0+t},{x:0,y:0}],d=0;for(a="M"+l[0].x+" "+l[0].y,r=0;r<l.length;r+=2)a+="L"+(i=l[r+1]).x+" "+i.y,a+="Q"+s[d].x+" "+s[d].y+" "+(o=l[r+2]||l[0]).x+" "+o.y,d++;return a}(n.cornerRadius,n.height,n.width),this.drawPath(t,n));else{var i=e.getContext(t);n.shadow&&this.renderShadow(n,t),i.save(),i.beginPath(),this.rotateContext(t,n.angle,n.x+n.width*n.pivotX,n.y+n.height*n.pivotY),this.setStyle(t,n),i.rect(n.x,n.y,n.width,n.height),i.fillRect(n.x,n.y,n.width,n.height),i.fill(),i.stroke(),i.closePath(),i.restore()}},e.prototype.drawPath=function(t,n){var i=[];i=Fd(i=zd(n.data)),n.shadow&&this.renderShadow(n,t,i);var o=e.getContext(t);o.save(),o.beginPath();var r=n.y+n.height*n.pivotY,a=n.x+n.width*n.pivotX;"Horizontal"===n.flip||"Vertical"===n.flip?(o.translate(n.x+n.width/2,n.y+n.height/2),o.rotate(-n.angle*Math.PI/180),o.translate(-n.x-n.width/2,-n.y-n.height/2)):this.rotateContext(t,n.angle,a,r),this.setStyle(t,n),o.translate(n.x,n.y),"Horizontal"===n.flip?(o.scale(-1,1),o.translate(-1*n.width,0)):"Vertical"===n.flip?(o.scale(1,-1),o.translate(0,-1*n.height)):"Both"===n.flip&&(o.scale(-1,-1),o.translate(-1*n.width,-1*n.height)),this.renderPath(t,n,i),o.fill(),o.translate(-n.x,-n.y),o.stroke(),o.restore()},e.prototype.renderPath=function(t,n,i){if(!0===n.visible){var o,r=e.getContext(t),a=void 0,l=void 0,s=void 0,d=void 0,c=void 0,u=void 0,h=void 0,p=void 0,f=void 0,g=i;for(h=0,p=0,f=0,o=g.length;f<o;++f){var m=g[f];switch("x1"in m&&(s=m.x1),"x2"in m&&(c=m.x2),"y1"in m&&(d=m.y1),"y2"in m&&(u=m.y2),"x"in m&&(h=m.x),"y"in m&&(p=m.y),m.command){case"M":r.moveTo(h,p),m.x=h,m.y=p;break;case"L":r.lineTo(h,p),m.x=h,m.y=p;break;case"C":r.bezierCurveTo(s,d,c,u,h,p),m.x=h,m.y=p,m.x1=s,m.y1=d,m.x2=c,m.y2=u;break;case"Q":r.quadraticCurveTo(s,d,h,p),m.x=h,m.y=p,m.x1=s,m.y1=d;break;case"A":var v={x:a,y:l},y=m.r1,b=m.r2,w=m.angle*(Math.PI/180),C=m.largeArc,x=m.sweep,S={x:h,y:p},T={x:Math.cos(w)*(v.x-S.x)/2+Math.sin(w)*(v.y-S.y)/2,y:-Math.sin(w)*(v.x-S.x)/2+Math.cos(w)*(v.y-S.y)/2},E=Math.pow(T.x,2)/Math.pow(y,2)+Math.pow(T.y,2)/Math.pow(b,2);E>1&&(y*=Math.sqrt(E),b*=Math.sqrt(E));var _=Math.pow(b,2)*Math.pow(T.x,2),k=(C===x?-1:1)*Math.sqrt((Math.pow(y,2)*Math.pow(b,2)-Math.pow(y,2)*Math.pow(T.y,2)-_)/(Math.pow(y,2)*Math.pow(T.y,2)+Math.pow(b,2)*Math.pow(T.x,2)));isNaN(k)&&(k=0);var D={x:k*y*T.y/b,y:k*-b*T.x/y},A={x:(v.x+S.x)/2+Math.cos(w)*D.x-Math.sin(w)*D.y,y:(v.y+S.y)/2+Math.sin(w)*D.x+Math.cos(w)*D.y},O=this.a([1,0],[(T.x-D.x)/y,(T.y-D.y)/b]),I=[(T.x-D.x)/y,(T.y-D.y)/b],P=[(-T.x-D.x)/y,(-T.y-D.y)/b],R=this.a(I,P);this.r(I,P)<=-1&&(R=Math.PI),this.r(I,P)>=1&&(R=0);var M=O+R/2*(x?1:-1);if(Math.cos(M),Math.sin(M),m.centp=A,m.xAxisRotation=w,m.rx=y,m.ry=b,m.a1=O,m.ad=R,m.sweep=x,null!=r){var N=y>b?y:b,L=y>b?1:y/b,H=y>b?b/y:1;r.save(),r.translate(A.x,A.y),r.rotate(w),r.scale(L,H),r.arc(0,0,N,O,O+R,!x),r.scale(1/L,1/H),r.rotate(-w),r.translate(-A.x,-A.y),r.restore()}break;case"Z":case"z":r.closePath(),h=a,p=l}a=h,l=p}}},e.prototype.drawText=function(t,n,i,o,r,a,l){if(n.content&&!0===n.visible){var s=e.getContext(t);s.save(),this.setStyle(t,n),a&&(n.fontSize*=a),this.rotateContext(t,n.angle,n.x+n.width*n.pivotX,n.y+n.height*n.pivotY),this.setFontStyle(t,n);var d,c=0;d=n.childNodes;var u=n.wrapBounds;if(s.fillStyle=n.color,u){var h=this.labelAlign(n,u,d);for(c=0;c<d.length;c++){var p=d[c];p.x=zy(p,d,c,n);var f=h.x+(a?p.x*a:p.x)-u.x,g=h.y+(a?p.dy*a:p.dy)*c+.8*n.fontSize;if(u.width>n.width&&"Wrap"!==n.textOverflow&&"NoWrap"===n.textWrapping&&(p.text=tb(p.text,n)),"Clip"!==n.textOverflow&&"Ellipsis"!==n.textOverflow||"Wrap"!==n.textWrapping?s.fillText(p.text,f,g):g<l.actualSize.height+l.bounds.y&&("Ellipsis"===n.textOverflow&&d[c+1]&&h.y+d[c+1].dy*(c+1)+.8*n.fontSize>l.actualSize.height+l.bounds.y&&(p.text=p.text.slice(0,p.text.length-3),p.text=p.text.concat("...")),s.fillText(p.text,f,g)),"Underline"===n.textDecoration||"Overline"===n.textDecoration||"LineThrough"===n.textDecoration){var m=f,v=void 0,y=f+s.measureText(p.text).width,b=void 0;switch(n.textDecoration){case"Underline":v=g+2,b=g+2;break;case"Overline":v=h.y+p.dy*c,b=h.y+p.dy*c;break;case"LineThrough":v=(g+h.y+p.dy*c)/2+2,b=(g+h.y+p.dy*c)/2+2}s.beginPath(),s.moveTo(m,v),s.lineTo(y,b),s.strokeStyle=n.color,s.lineWidth=.08*n.fontSize,s.globalAlpha=n.opacity,s.stroke()}}}s.restore()}},e.prototype.loadImage=function(e,t,n,i,o){this.rotateContext(n,t.angle,i,o);var r=new Image;r.src=t.source,this.image(e,r,t.x,t.y,t.width,t.height,t)},e.prototype.drawImage=function(t,n,i,o){var r=this;if(n.visible){var a=e.getContext(t);a.save();var l=n.x+n.width*n.pivotX,s=n.y+n.height*n.pivotY,d=new Image;d.src=n.source,a.canvas.id.split("_"),o?d.onload=function(){r.loadImage(a,n,t,l,s)}:this.loadImage(a,n,t,l,s),a.restore()}},e.prototype.image=function(e,t,n,i,o,r,a){e.beginPath();var l=t.width,s=t.height,d=o,c=r,u=0,h=0;if(a&&"None"!==a.alignment){var p=a.alignment.toLowerCase().substr(1,3),f=a.alignment.toLowerCase().substr(5,3);if("Slice"===a.scale){var g=function(){u=d,h=s*d/l},m=function(){u=l*c/s,h=c};d>c?(g(),c>h&&m()):d===c?l>s?m():g():(m(),d>u&&g());var v=this.getSliceOffset(p,u,d,l),y=this.getSliceOffset(f,h,c,s),b=l-v,w=s-y,C=u-v*(u/l),x=h-y*(h/s),S=Ay("canvas",{width:o.toString(),height:r.toString()});S.getContext("2d").drawImage(t,v,y,b,w,0,0,C,x),e.drawImage(S,n,i,o,r)}else if("Meet"===a.scale){var T=s/l,E=c/d;u=E>T?d:c/T,h=E>T?d*T:c,n+=this.getMeetOffset(p,u,d),i+=this.getMeetOffset(f,h,c),e.drawImage(t,0,0,l,s,n,i,u,h)}else e.drawImage(t,n,i,o,r)}else if("None"!==a.flip){var _=1,k=1;"Horizontal"!==a.flip&&"Both"!==a.flip||(n=-n,o=-o,_=-1),"Vertical"!==a.flip&&"Both"!==a.flip||(i=-i,r=-r,k=-1),e.scale(_,k),e.drawImage(t,n,i,o,r)}else e.drawImage(t,n,i,o,r);e.closePath()},e.prototype.getSliceOffset=function(e,t,n,i){switch(e){case"min":return 0;case"mid":return(t-n)/2*i/t;case"max":return(t-n)*i/t;default:return 0}},e.prototype.getMeetOffset=function(e,t,n){var i=Math.max(t,n),o=Math.min(t,n);switch(e){case"min":return 0;case"mid":return(i-o)/2;case"max":return i-o;default:return 0}},e.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},e.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},e.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},e.prototype.labelAlign=function(e,t,n){var i=new Bd(t.width,n.length*(1.2*e.fontSize)),o={x:0,y:0},r=e.y,a=.5*e.width,l=.5*e.height;return"left"===e.textAlign?a=0:"center"===e.textAlign?a=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)&&"NoWrap"===e.textWrapping?0:.5*e.width:"right"===e.textAlign&&(a=1*e.width),o.x=e.x+a+(t?t.x:0),o.y=r+l-i.height/2,o},e}(),lb=function(){function e(){}return e.prototype.renderShadow=function(e,t,n,i){void 0===n&&(n=null);var o,r=jd.transform({x:0,y:0},e.shadow.angle,e.shadow.distance);i&&(o=i.getElementById(t.id+"_shadow")),o||(o=document.createElementNS("http://www.w3.org/2000/svg",n?"path":"rect"),t.appendChild(o));var a={id:t.id+"_shadow",fill:e.shadow.color,stroke:e.shadow.color,opacity:e.shadow.opacity.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+(e.x+r.x)+","+(e.y+r.y)+")"};if(i){var l=i.getElementById(t.id);l&&l.insertBefore(o,l.firstChild)}Ly(o,a),n?n&&this.renderPath(o,e,n):Ly(o,{width:e.width,height:e.height})},e.prototype.parseDashArray=function(e){return[]},e.prototype.drawRectangle=function(e,t,n,i,o,r,a){var l,s,d;t.shadow&&!i&&this.renderShadow(t,e,void 0,r),l=t.id===e.id?t.id+"_container":t.id,r&&(s=r.getElementById(l)),s&&!o||(s=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(s)),r&&!t.shadow&&(d=r.getElementById(t.id+"_groupElement_shadow"))&&d.parentNode.removeChild(d);var c={id:l,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":a||""};t.class&&(c.class=t.class),a||(c["pointer-events"]="none"),Ly(s,c),this.setSvgStyle(s,t,n)},e.prototype.updateSelectionRegion=function(e,t){var n,i;n=e.parentNode.getElementById(t.id),i={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},n||(n=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(n)),this.setSvgStyle(n,t),Ly(n,i)},e.prototype.createGElement=function(e,t){return Oy(e,t)},e.prototype.drawLine=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(n,t);var i=t.x+t.width*t.pivotX,o=t.y+t.height*t.pivotY,r={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+i+" "+o+")",visibility:t.visible?"visible":"hidden"};t.class&&(r.class=t.class),Ly(n,r),e.appendChild(n)},e.prototype.drawCircle=function(e,t,n,i){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(o,t);var r=t.class||"";n||(r+=" e-disabled");var a={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:r,"aria-label":i?i["aria-label"]:""};o.style.display=t.visible?"block":"none",Ly(o,a),e.appendChild(o)},e.prototype.drawPath=function(e,t,n,i,o,r){Math.floor(10*Math.random()+1).toString();var a,l,s=[];s=Fd(s=zd(t.data)),t.shadow&&this.renderShadow(t,e,s,o),o&&!t.shadow&&(a=o.getElementById(t.id+"_groupElement_shadow"))&&a.parentNode.removeChild(a),o&&(l=o.getElementById(t.id)),l&&!i||(l=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(l)),this.renderPath(l,t,s);var d={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":r||""};t.class&&(d.class=t.class),Ly(l,d),this.setSvgStyle(l,t,n)},e.prototype.renderPath=function(e,t,n){var i,o,r,a,l,s,d,c,u=n,h="";for(l=0,s=0,c=0,d=u.length;c<d;++c){var p=u[c];switch("x1"in p&&(i=p.x1),"x2"in p&&(r=p.x2),"y1"in p&&(o=p.y1),"y2"in p&&(a=p.y2),"x"in p&&(l=p.x),"y"in p&&(s=p.y),p.command){case"M":h=h+"M"+l.toString()+","+s.toString()+" ";break;case"L":h=h+"L"+l.toString()+","+s.toString()+" ";break;case"C":h=h+"C"+i.toString()+","+o.toString()+","+r.toString()+","+a.toString()+",",h+=l.toString()+","+s.toString()+" ";break;case"Q":h=h+"Q"+i.toString()+","+o.toString()+","+l.toString()+","+s.toString()+" ";break;case"A":h=h+"A"+p.r1.toString()+","+p.r2.toString()+","+p.angle.toString()+",",h+=p.largeArc.toString()+","+p.sweep+","+l.toString()+","+s.toString()+" ";break;case"Z":case"z":h+="Z "}}e.setAttribute("d",h)},e.prototype.setSvgFontStyle=function(e,t){e.style.fontStyle=t.italic?"italic":"normal",e.style.fontWeight=t.bold?"bold":"normal",e.style.fontSize=t.fontSize.toString()+"px",e.style.fontFamily=t.fontFamily},e.prototype.drawText=function(e,t,n,i,o,r,a){if(void 0!==t.content){var l=void 0,s=void 0,d=void 0,c=void 0,u=void 0,h=void 0,p=0,f=0,g=0,m=void 0;if(n&&(m=n.getElementById(t.id+"_text")),m){if(t.doWrap)for(;m.firstChild;)m.removeChild(m.firstChild)}else t.doWrap=!0,m=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===t.whiteSpace&&m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.appendChild(m);var v=t.x+t.width*t.pivotX,y=t.y+t.height*t.pivotY,b=0;if(t.doWrap||"Wrap"!==t.textOverflow){var w=document.getElementById(t.id+"_text");for(w&&(w.innerHTML=""),this.setSvgStyle(m,t,o),this.setSvgFontStyle(m,t),l=document.createTextNode(t.content),c=this.svgLabelAlign(t,d=t.wrapBounds,s=t.childNodes),d.width>t.width&&"Wrap"!==t.textOverflow&&"NoWrap"===t.textWrapping&&(s[0].text=tb(t.content,t)),g=0;g<s.length;g++)if(h=document.createElementNS("http://www.w3.org/2000/svg","tspan"),l=document.createTextNode(s[g].text),(u=s[g]).x=zy(u,s,g,t),p=c.x+u.x-d.x,f=c.y+u.dy*g+.8*t.fontSize,"Clip"!==t.textOverflow&&"Ellipsis"!==t.textOverflow||"WrapWithOverflow"!==t.textWrapping&&"Wrap"!==t.textWrapping||!a)this.setText(m,h,u,l,p,f);else{var C=t.isHorizontalLane?a.actualSize.width:a.actualSize.height;if(!(f<C))break;"Ellipsis"===t.textOverflow&&s[g+1]&&c.y+s[g+1].dy*(g+1)+.8*t.fontSize>C&&(u.text=u.text.slice(0,u.text.length-3),u.text=u.text.concat("..."),l.data=u.text),this.setText(m,h,u,l,p,f),b+=u.dy}}b&&t.isHorizontalLane&&(v=t.parentOffsetX+t.pivotX,y=t.parentOffsetY+t.pivotY,t.y=t.parentOffsetY-b*t.pivotY+.5),t.textDecoration&&"LineThrough"===t.textDecoration&&(t.textDecoration=Qy(t.textDecoration)),Ly(m,{id:t.id+"_text",fill:t.color,visibility:t.visible?"visible":"hidden","text-decoration":t.textDecoration,transform:"rotate("+t.angle+","+v+","+y+")translate("+t.x+","+t.y+")",opacity:t.opacity,"aria-label":i||""})}},e.prototype.setText=function(e,t,n,i,o,r){Ly(t,{x:o.toString(),y:r.toString()}),e.setAttribute("fill",n.text),t.appendChild(i),e.appendChild(t)},e.prototype.drawImage=function(e,t,n,i){var o;n&&(o=n.getElementById(t.id+"image")),o||(o=document.createElementNS("http://www.w3.org/2000/svg","image"),e.appendChild(o));var r=new Image;r.src=t.source;var a="None"!==t.scale?t.scale:"";Ka()&&"None"===t.alignment&&"Stretch"===a&&(a="");var l=t.alignment,s=l.charAt(0).toLowerCase()+l.slice(1);a&&(s+=" "+a.charAt(0).toLowerCase()+a.slice(1)),Ly(o,{id:t.id+"image",x:t.x.toString(),y:t.y.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",width:t.width.toString(),visibility:t.visible?"visible":"hidden",height:t.height.toString(),preserveAspectRatio:s,opacity:(t.opacity||1).toString()}),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r.src.toString())},e.prototype.drawHTMLContent=function(e,t,n,i,o){var r,a;if(t){var l=void 0,s=void 0,d=void 0;for(l=0;l<t.childNodes.length;l++)for(d=t.childNodes[l],s=0;s<d.childNodes.length;s++)if(d.childNodes[s].id===e.id+"_html_element"){r=d.childNodes[s];break}}r||((a=t.querySelector("#"+e.id+"_html_element")||t.querySelector("#"+e.nodeId+"_html_element"))||(a=Ay("div",{id:e.nodeId+"_html_element",class:"foreign-object"})),(r=Ay("div",{id:e.id+"_html_element",class:"foreign-object"})).appendChild(e.isTemplate?e.template:e.template.cloneNode(!0)),void 0!==o&&t.childNodes.length>o&&t.insertBefore(r,t.childNodes[o]),a.appendChild(r),t.appendChild(a));var c=Vy(e).topLeft;r.setAttribute("style","height:"+e.actualSize.height+"px; width:"+e.actualSize.width+"px;left:"+c.x+"px; top:"+c.y+"px;position:absolute;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(i?"all":"none")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";")},e.prototype.drawNativeContent=function(e,t,n,i,o){var r,a;o&&(r=o.getElementById(e.id+"_native_element"),a=o.getElementById(e.id+"_clip")),r||((r=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id",e.id+"_native_element"),r.appendChild(e.template.cloneNode(!0)),t.appendChild(r)),a&&r.removeChild(a),r.setAttribute("style","visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";"),this.setNativTransform(e,r,n,i),"Slice"===e.scale&&this.drawClipPath(e,r,n,i,o),Ly(r,e.description?{"aria-label":e.description}:{})},e.prototype.setNativTransform=function(e,t,n,i){var o=0!==e.contentSize.width?e.contentSize.width:1,r=0!==e.contentSize.height?e.contentSize.height:1;t.setAttribute("transform","rotate("+e.parentTransform+","+e.offsetX+","+e.offsetY+") translate("+(e.offsetX-e.templatePosition.x*i/o-i*e.pivot.x)+","+(e.offsetY-e.templatePosition.y*n/r-n*e.pivot.y)+") scale("+i/o+","+n/r+")")},e.prototype.drawClipPath=function(e,t,n,i,o){var r=e.contentSize.width,a=e.contentSize.height,l=e.width/(i/r),s=e.height/(n/a),d=e.templatePosition.x+(e.width>=e.height?0:(r-l)/2),c=e.templatePosition.y+(e.height>=e.width?0:(a-s)/2),u=o.getElementById(e.id+"_clip");(u=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",e.id+"_clip"),t.appendChild(u);var h=o.getElementById(e.id+"_clip_rect");return h=document.createElementNS("http://www.w3.org/2000/svg","rect"),u.appendChild(h),Ly(h,{id:e.id+"_clip_rect",width:l.toString(),height:s.toString(),x:d.toString(),y:c.toString()}),Sv()?t.setAttribute("clip-path","url("+location.protocol+"//"+location.host+location.pathname+"#"+e.id+"_clip)"):t.setAttribute("clip-path","url(#"+e.id+"_clip)"),t},e.prototype.renderGradient=function(e,t,n){var i,o,r,a,l,s=Ey(n),d=s.getElementById(n+"gradient_pattern");if(d||(d=Oy("defs",{id:n+"gradient_pattern"}),s.insertBefore(d,s.firstChild)),Jm(t.id),"None"!==e.gradient.type){for(var c=0;c<e.gradient.stops.length;c++)i=i?Math.max(i,e.gradient.stops[c].offset):e.gradient.stops[c].offset,o=o?Math.min(o,e.gradient.stops[c].offset):e.gradient.stops[c].offset;for("Linear"===e.gradient.type?((l=e.gradient).id=t.id+"_linear",r=this.createLinearGradient(l),d.appendChild(r)):((a=e.gradient).id=t.id+"_radial",r=this.createRadialGradient(a),d.appendChild(r)),c=0;c<e.gradient.stops.length;c++){var u=e.gradient.stops[c],h=o<0?(i+u.offset)/(2*i):u.offset/i,p=document.createElementNS("http://www.w3.org/2000/svg","stop");Ly(p,{offset:h.toString(),style:"stop-color:"+u.color}),r.appendChild(p)}}return r},e.prototype.createLinearGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return Ly(t,{id:e.id,x1:e.x1+"%",y1:e.y1+"%",x2:e.x2+"%",y2:e.y2+"%"}),t},e.prototype.createRadialGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return Ly(t,{id:e.id,cx:e.cx+"%",cy:e.cy+"%",r:e.r+"%",fx:e.fx+"%",fy:e.fy+"%"}),t},e.prototype.setSvgStyle=function(e,t,n){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var i=[],o=void 0;if(t.dashArray&&(i=(new ab).parseDashArray(t.dashArray)),t.gradient&&"None"!==t.gradient.type&&n){var r=this.renderGradient(t,e,n);o=Sv()?"url("+location.protocol+"//"+location.host+location.pathname+"#"+r.id+")":"url(#"+r.id+")"}else o=t.fill;t.stroke&&e.setAttribute("stroke",t.stroke),void 0!==t.strokeWidth&&null!==t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),i&&e.setAttribute("stroke-dasharray",i.toString()||"none"),o&&e.setAttribute("fill",o)}},e.prototype.svgLabelAlign=function(e,t,n){var i=new Bd(t.width,n.length*(1.2*e.fontSize)),o={x:0,y:0},r=.5*e.width,a=.5*e.height;return"left"===e.textAlign?r=0:"center"===e.textAlign?r=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)&&"NoWrap"===e.textWrapping?0:.5*e.width:"right"===e.textAlign&&(r=1*e.width),o.x=0+r+(t?t.x:0),o.y=1.2+a-i.height/2,o},e}(),sb=function(){function e(e,t,n){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=e,this.element=vy(this.diagramId),this.svgRenderer=t,this.isSvgMode=n,this.renderer=n?new lb:new ab}return e.prototype.setCursor=function(e,t){e.style.cursor=t},e.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},e.prototype.getAdornerLayer=function(){return Cy(this.diagramId)},e.prototype.getParentSvg=function(e,t,n){return this.diagramId&&e&&e.id?e.id.split("_icon_content").length>1||e.id.split("_nodeport").length>1||e.elementActions&kc.ElementIsPort?this.iconSvgLayer:t&&"selector"===t?this.adornerSvgLayer:e instanceof Zc?this.nativeSvgLayer:this.diagramSvgLayer:n},e.prototype.getParentElement=function(e,t,n,i){var o=t;if(n&&this.diagramId&&e&&e.id){e.id.split("_icon_content").length>1?(o=n.getElementById(this.diagramId+"_diagramExpander"),t=null):e.id.split("_nodeport").length>1?o=n.getElementById(this.diagramId+"_diagramPorts"):e instanceof Zc?(o=n.getElementById(this.diagramId+"_nativeLayer"),t=null):e.elementActions&kc.ElementIsPort?(o=n.getElementById(this.diagramId+"_diagramPorts"),t=null):o=n.getElementById(this.diagramId+"_diagramLayer");var r=this.getGroupElement(e,t||o,i);o=r.g,r.svg&&(n=r.svg)}return{g:o,svg:n}},e.prototype.getGroupElement=function(e,t,n){var i,o,r=this.getParentSvg(e);if(t&&r){if(r&&!(i=r.getElementById(e.id+"_groupElement"))&&r!==this.nativeSvgLayer){var a=this.nativeSvgLayer;i=a.getElementById(e.id+"_groupElement"),o=a}i||(i=this.svgRenderer.createGElement("g",{id:e.id+"_groupElement"}),void 0!==n&&t.childNodes.length>n?t.insertBefore(i,t.childNodes[n]):t.appendChild(i))}return{g:i,svg:o}},e.prototype.renderElement=function(e,t,n,i,o,r,a,l,s){e instanceof Fc?this.renderContainer(e,t,n,i,o,r,a,l,s):e instanceof Xc?this.renderImageElement(e,t,i,o,a):e instanceof Yc?this.renderPathElement(e,t,i,o,a,s):e instanceof Gc?this.renderTextElement(e,t,i,o,a):e instanceof Zc?this.renderNativeElement(e,t,i,o,a):e instanceof gf?this.renderHTMLElement(e,t,n,i,o,a,l):this.renderRect(e,t,i,o,s)},e.prototype.drawSelectionRectangle=function(e,t,n,i,o,r){var a={width:n*r.scale,height:i*r.scale,x:.5+(e=(e+r.tx)*r.scale),y:.5+(t=(t+r.ty)*r.scale),fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:o.id+"_selected_region"},l=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(l,a)},e.prototype.renderHighlighter=function(e,t,n){var i=e.actualSize.width||2,o=e.actualSize.height||2,r=e.offsetX-i*e.pivot.x,a=e.offsetY-o*e.pivot.y;this.svgRenderer.drawRectangle(t,{width:i*n.scale,height:o*n.scale,x:r=(r+n.tx)*n.scale,y:a=(a+n.ty)*n.scale,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:t.id+"_highlighter",class:"e-diagram-highlighter"},this.diagramId,void 0,void 0,t)},e.prototype.renderStackHighlighter=function(e,t,n,i,o,r,a){var l,s=e.actualSize.width||2,d=e.offsetX-s*e.pivot.x,c=e.actualSize.height||2,u=e.offsetY-c*e.pivot.y;d=(d+n.tx)*n.scale;var h=e.bounds,p="";if(u=(u+n.ty)*n.scale,i)if(r){var f,g;l="M 0 0 L "+(2+(m=s*n.scale))+" 0 Z",f=e.actualSize.width/Number(h.width?h.width:1)*n.scale,g=e.actualSize.height/Number(h.height?h.height:1)*n.scale,p=Gd(Wd(zd("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z")),f+m+2,g-8,!1,h.x,h.y,0,0),o.y>=e.offsetY&&(u+=c)}else{var m;a&&o.y>=e.offsetY&&(u+=c),l="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+(m=s*n.scale)+" 0 Z M "+m+" 0 L "+(m+10)+" 10 Z L "+(m+10)+" -10 Z"}else l="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+(m=c*n.scale)+" Z M 0  "+m+" L -10  "+(m+10)+" Z L 10  "+(m+10)+" Z",o.x>=e.offsetX&&(d+=s);this.svgRenderer.drawPath(t,{data:l+p,width:s*n.scale,height:c*n.scale,x:d,y:u,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:t.id+"_stack_highlighter",class:"e-diagram-highlighter"},this.diagramId)},e.prototype.drawLine=function(e,t){this.svgRenderer.drawLine(e,t)},e.prototype.drawPath=function(e,t){this.svgRenderer.drawPath(e,t,this.diagramId)},e.prototype.renderResizeHandle=function(e,t,n,i,o,r,a,l,s,d){var c=e.offsetX-e.actualSize.width*e.pivot.x,u=e.offsetY-e.actualSize.height*e.pivot.y,h=e.actualSize.height,p=e.actualSize.width;!d&&n&Dc.Rotate&&wg(this.rendererActions)&&!Cg(this.rendererActions)&&(this.renderPivotLine(e,t,r,o,a),this.renderRotateThumb(e,t,r,o,a)),this.renderBorder(e,t,r,l,s,d);var f=e.actualSize.width*i,g=e.actualSize.height*i;s||!wg(this.rendererActions)||Cg(this.rendererActions)||(f>=40&&g>=40&&(o&Sc.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",e,c,u,t,tv(o,"ResizeNorthWest"),n&Dc.ResizeNorthWest,r,void 0,a,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest"),o&Sc.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",e,c+p,u,t,tv(o,"ResizeNorthEast"),n&Dc.ResizeNorthEast,r,void 0,a,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast"),o&Sc.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",e,c,u+h,t,tv(o,"ResizeSouthWest"),n&Dc.ResizeSouthWest,r,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest"),o&Sc.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",e,c+p,u+h,t,tv(o,"ResizeSouthEast"),n&Dc.ResizeSouthEast,r,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast")),o&Sc.ResizeNorth&&this.renderCircularHandle("resizeNorth",e,c+p/2,u,t,tv(o,"ResizeNorth"),n&Dc.ResizeNorth,r,void 0,a,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north"),o&Sc.ResizeSouth&&this.renderCircularHandle("resizeSouth",e,c+p/2,u+h,t,tv(o,"ResizeSouth"),n&Dc.ResizeSouth,r,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south"),o&Sc.ResizeWest&&this.renderCircularHandle("resizeWest",e,c,u+h/2,t,tv(o,"ResizeWest"),n&Dc.ResizeWest,r,void 0,a,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west"),o&Sc.ResizeEast&&this.renderCircularHandle("resizeEast",e,c+p,u+h/2,t,tv(o,"ResizeEast"),n&Dc.ResizeEast,r,void 0,a,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east"))},e.prototype.renderEndPointHandle=function(e,t,n,i,o,r,a,l){var s,d,c=e.sourcePoint,u=e.targetPoint,h=e.wrapper;if(this.renderCircularHandle("connectorSourceThumb",h,c.x,c.y,t,tv(i,"ConnectorSourceThumb"),n&Dc.ConnectorSource,o,r,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),this.renderCircularHandle("connectorTargetThumb",h,u.x,u.y,t,tv(i,"ConnectorTargetThumb"),n&Dc.ConnectorTarget,o,a,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),l)if(("Straight"===e.type||"Bezier"===e.type)&&e.segments.length>0)for(s=0;s<e.segments.length-1;s++)this.renderCircularHandle("segementThumb_"+(s+1),h,(d=e.segments[s]).point.x,d.point.y,t,!0,n&Dc.ConnectorSource,o,r,null,null,s);else for(s=0;s<e.segments.length;s++)this.renderOrthogonalThumbs("orthoThumb_"+(s+1),h,e.segments[s],t,tv(i,"ConnectorSourceThumb"),o);if("Bezier"===e.type)for(s=0;s<e.segments.length;s++){var p=e.segments[s],f=jd.isEmptyPoint(p.point1)?p.bezierPoint1:p.point1;this.renderCircularHandle("bezierPoint_"+(s+1)+"_1",h,f.x,f.y,t,tv(i,"ConnectorSourceThumb"),n&Dc.ConnectorSource,o,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-handle e-source"),tv(i,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(s+1)+"_1",h,t,p.points[0],jd.isEmptyPoint(p.point1)?p.bezierPoint1:p.point1,o),f=jd.isEmptyPoint(p.point2)?p.bezierPoint2:p.point2,this.renderCircularHandle("bezierPoint_"+(s+1)+"_2",h,f.x,f.y,t,tv(i,"ConnectorTargetThumb"),n&Dc.ConnectorTarget,o,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-handle e-target"),tv(i,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(s+1)+"_2",h,t,p.points[1],jd.isEmptyPoint(p.point2)?p.bezierPoint2:p.point2,o)}},e.prototype.renderOrthogonalThumbs=function(e,t,n,i,o,r){var a,l,s=0;for(s=0;s<n.points.length-1;s++)l=jd.distancePoints(n.points[s],n.points[s+1]),a=n.points[s].y.toFixed(2)===n.points[s+1].y.toFixed(2)?"horizontal":"vertical",this.renderOrthogonalThumb(e+"_"+(s+1),t,(n.points[s].x+n.points[s+1].x)/2,(n.points[s].y+n.points[s+1].y)/2,i,!!(l>=50&&n.allowDrag),a,r)},e.prototype.renderOrthogonalThumb=function(e,t,n,i,o,r,a,l){var s,d,c;"horizontal"===a?(s="M0,7 L15,0 L30,7 L15,14 z",d=-15,c=-7):(s="M7,0 L0,15 L7,30 L14,15 z",d=-7,c=-15),this.svgRenderer.drawPath(o,{x:(n+l.tx)*l.scale+d,y:(i+l.ty)*l.scale+c,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:s,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:r,id:e},this.diagramId)},e.prototype.renderPivotLine=function(e,t,n,i,o){var r=e,a=!!(i&Sc.Rotate);o&&(a=!1);var l=this.getBaseAttributes(r,n);l.fill="None",l.stroke="black",l.strokeWidth=1,l.dashArray="2,3",l.visible=a;var s=n.scale;l.x*=s,l.y*=s,l.width*=s,l.height*=s,l.id="pivotLine",l.class="e-diagram-pivot-line";var d={x:r.actualSize.width*r.pivot.x*s,y:0};l.startPoint={x:r.actualSize.width*r.pivot.x*s,y:-20},l.endPoint=d,this.svgRenderer.drawLine(t,l)},e.prototype.renderBezierLine=function(e,t,n,i,o,r){var a=this.getBaseAttributes(t,r);a.id=e,a.stroke="black",a.strokeWidth=1,a.dashArray="3,3",a.fill="None",a.class="e-diagram-bezier-line",a.x=0,a.y=0;var l=r.scale,s={x:(o.x+r.tx)*l,y:(o.y+r.ty)*l};a.startPoint={x:(i.x+r.tx)*l,y:(i.y+r.ty)*l},a.endPoint=s,this.svgRenderer.drawLine(n,a)},e.prototype.renderCircularHandle=function(e,t,n,i,o,r,a,l,s,d,c,u,h){var p=t,f=7,g={x:n,y:i};if(0!==p.rotateAngle||0!==p.parentTransform){var m=Qd();ec(m,p.rotateAngle+p.parentTransform,p.offsetX,p.offsetY),g=$d(m,g)}var v=this.getBaseAttributes(p);v.stroke="black",v.strokeWidth=1,void 0!==u?(f=5,v.id="segmentEnd_"+u,v.fill="#e2e2e2"):(f=7,v.fill=s?"#8CC63F":"white"),v.centerX=(g.x+l.tx)*l.scale,v.centerY=(g.y+l.ty)*l.scale,v.radius=f,v.angle=0,v.id=e,v.visible=r,v.class=h,s&&(v.class+=" e-connected"),d&&(v.visible=!1),this.svgRenderer.drawCircle(o,v,a,c)},e.prototype.renderBorder=function(e,t,n,i,o,r){var a=this.getBaseAttributes(e,n);a.x*=n.scale,a.y*=n.scale,a.width*=n.scale,a.height*=n.scale,a.fill="transparent",a.stroke="#097F7F",a.strokeWidth=1.2,a.gradient=null,a.dashArray="6,3",a.class="e-diagram-border",r&&(a.class+=" e-diagram-lane"),a.id="borderRect",a.id=this.rendererActions&Nc.DrawSelectorBorder?"borderRect_symbol":"borderRect",i||(a.class+=" e-disabled"),o&&(a.class+=" e-thick-border"),a.cornerRadius=0;var l=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,a,this.diagramId,void 0,!0,l)},e.prototype.renderUserHandler=function(e,t,n,i){for(var o,r=e.wrapper,a=0,l=e.userHandles;a<l.length;a++){var s=l[a];o=!0,(s.disableConnectors&&e.connectors.length>0||s.disableNodes&&e.nodes.length>0)&&(o=!1);var d=document.getElementById(s.name+"_template_hiddenUserHandle");d&&(s.template=d.childNodes[0].cloneNode(!0));var c=void 0;if((c=$m(e,s,n)).x=(c.x+n.tx)*n.scale,c.y=(c.y+n.ty)*n.scale,s.visible&&(s.visible=!!(e.constraints&Sc.UserHandle)),o)if(s.pathData){var u=s.pathData?s.pathData:s.content,h=this.getBaseAttributes(r);h.id=s.name+"_userhandle",h.fill=s.backgroundColor,h.stroke=s.borderColor,h.strokeWidth=s.borderWidth,h.centerX=c.x,h.centerY=c.y,h.radius=.5*s.size,h.class="e-diagram-userhandle-circle",h.angle=0,h.visible=s.visible,h.opacity=1,this.svgRenderer.drawCircle(t,h,1,{"aria-label":s.name+"user handle"});var p=[];p=Wd(p=zd(u));var f=py(u),g=Gd(p,(s.size-.45*s.size)/f.width,(s.size-.45*s.size)/f.height,!0,f.x,f.y,0,0);f=py(g),this.svgRenderer.drawPath(t,v={x:c.x-f.width/2,y:c.y-f.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:s.pathColor,stroke:s.backgroundColor,strokeWidth:.5,dashArray:"",data:g,width:s.size-5,height:s.size-5,pivotX:0,pivotY:0,opacity:1,visible:s.visible},this.diagramId,void 0,void 0,{"aria-label":s.name+"user handle"})}else if(s.content){var m=void 0;(m=new Zc(s.name,this.diagramId)).content=s.content,m.offsetX=c.x,m.offsetY=c.y,m.id=s.name+"_shape",m.horizontalAlignment="Center",m.verticalAlignment="Center",m.visible=s.visible,m.setOffsetWithRespectToBounds(c.x,c.y,"Fraction"),m.relativeMode="Object",m.description=s.name||"User handle",m.measure(new Bd(s.size,s.size)),m.arrange(m.desiredSize),this.svgRenderer.drawNativeContent(m,t,s.size,s.size,this.adornerSvgLayer)}else if(s.source){var v,y=new Xc;(v=this.getBaseAttributes(y,n)).width=s.size,v.height=s.size,v.x=c.x-s.size/2,v.y=c.y-s.size/2,v.sourceWidth=s.size,v.sourceHeight=s.size,v.alignment=y.imageAlign,v.source=s.source,v.scale=y.imageScale,v.visible=s.visible,v.description=s.name||"User handle",v.id=s.name+"_",this.renderer.drawImage(t,v,this.adornerSvgLayer,!1)}else{var b=void 0;(b=new gf(s.name,this.diagramId)).offsetX=c.x,b.offsetY=c.y,b.id=s.name+"_shape",b.visible=s.visible,b.relativeMode="Object",b.template=s.template,b.measure(new Bd(s.size,s.size)),b.arrange(b.desiredSize),this.svgRenderer.drawHTMLContent(b,i,void 0,!0,void 0)}}},e.prototype.renderRotateThumb=function(e,t,n,i,o){new Yc;var r,a=new Bd;a.width=18,a.height=16;var l=!!(i&Sc.Rotate);o&&(l=!1);var s=e.offsetX-e.actualSize.width*e.pivot.x+e.pivot.x*e.actualSize.width,d=e.offsetY-e.actualSize.height*e.pivot.y;if(r={x:(s=(s+n.tx)*n.scale)-.5*a.width,y:(d=(d+n.ty)*n.scale)-30-.5*a.height},0!==e.rotateAngle||0!==e.parentTransform){var c=Qd();ec(c,e.rotateAngle+e.parentTransform,(n.tx+e.offsetX)*n.scale,(n.ty+e.offsetY)*n.scale),r=$d(c,r)}var u={x:r.x,y:r.y,angle:e.rotateAngle+e.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:l,id:e.id,class:"e-diagram-rotate-handle"};u.id="rotateThumb",this.svgRenderer.drawPath(t,u,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},e.prototype.renderPathElement=function(e,t,n,i,o,r){var a=this.getBaseAttributes(e,n,r);a.data=e.absolutePath,a.data=e.absolutePath;var l=e.description?e.description:e.id;this.isSvgMode||(a.x=e.flipOffset.x?e.flipOffset.x:a.x,a.y=e.flipOffset.y?e.flipOffset.y:a.y),e.isExport&&(a.data=gy(e,e.absoluteBounds,0,a)),this.renderer.drawPath(t,a,this.diagramId,void 0,i,l)},e.prototype.renderSvgGridlines=function(e,t,n,i,o,r){var a=document.createElementNS("http://www.w3.org/2000/svg","pattern"),l=document.createElementNS("http://www.w3.org/2000/svg","defs");l.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(e.constraints&xc.ShowHorizontalLines||e.constraints&xc.ShowVerticalLines)&&a.setAttribute("id",this.diagramId+"_pattern");var s=0,d=0,c=0,u=0,h=1,p=!1,f="Lines"===e.gridType,g=f?e.verticalGridlines.lineIntervals:e.verticalGridlines.dotIntervals,m=f?e.horizontalGridlines.lineIntervals:e.horizontalGridlines.dotIntervals;if(i.showRulers&&i.dynamicGrid&&o&&r)c=r.updateSegmentWidth(n.scale),u=o.updateSegmentWidth(n.scale),e.horizontalGridlines.scaledIntervals=[c/o.interval],e.verticalGridlines.scaledIntervals=[u/r.interval],p=!0;else{for(var v=0;v<g.length;v+=1)s+=g[v];for(v=0;v<m.length;v+=1)d+=m[v];h=this.scaleSnapInterval(e,n.scale)}Ly(a,{id:this.diagramId+"_pattern",x:0,y:0,width:s=p?u:s*h,height:d=p?c:d*h,patternUnits:"userSpaceOnUse"}),this.horizontalSvgGridlines(a,s,d,h,e,i,r,p,f,m),this.verticalSvgGridlines(a,s,d,h,e,i,o,p,f,g),l.appendChild(a),t.appendChild(l)},e.prototype.horizontalSvgGridlines=function(e,t,n,i,o,r,a,l,s,d){var c,u=0,h=[];if(o.constraints&xc.ShowHorizontalLines){o.horizontalGridlines.lineDashArray&&(h=this.renderer.parseDashArray(o.horizontalGridlines.lineDashArray)),r.showRulers&&r.dynamicGrid&&a&&(d=this.updateLineIntervals(d,r,a,n,s)),d=_m(d,s);for(var p=0;p<d.length;p+=2){u=Em(d,s,p,u),c=document.createElementNS("http://www.w3.org/2000/svg",s?"path":"circle");var f=s?u+d[p]/2:u;f=l?f:f*i,s?(Ly(c,{"stroke-width":d[p],stroke:o.horizontalGridlines.lineColor,d:"M0,"+f+" L"+t+","+f+" Z",dashArray:h.toString(),class:1.25===d[p]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(c),u+=d[p+1]+d[p]):(this.renderDotGrid(p,e,o,0,f,i,!0),u+=d[p])}}},e.prototype.renderDotGrid=function(e,t,n,i,o,r,a){var l,s,d,c=a?n.verticalGridlines.dotIntervals:n.horizontalGridlines.dotIntervals;c=_m(c,!1);for(var u=1;u<c.length;u+=2)l=u===c.length-1?c[0]:c[u-1],d=i,d*=r,Ly(s=document.createElementNS("http://www.w3.org/2000/svg","circle"),{cx:a?d:o,cy:a?o:d,fill:n.horizontalGridlines.lineColor,r:l}),t.appendChild(s),i+=c[u]+c[u-1]},e.prototype.verticalSvgGridlines=function(e,t,n,i,o,r,a,l,s,d){var c,u=0,h=[];if(o.constraints&xc.ShowVerticalLines){o.verticalGridlines.lineDashArray&&(h=this.renderer.parseDashArray(o.verticalGridlines.lineDashArray)),r.showRulers&&r.dynamicGrid&&a&&(d=this.updateLineIntervals(d,r,a,t,s)),d=_m(d,s);for(var p=0;p<d.length;p+=2){u=Em(d,s,p,u),c=document.createElementNS("http://www.w3.org/2000/svg",s?"path":"circle");var f=s?u+d[p]/2:u;f=l?f:f*i,s?(Ly(c,{"stroke-width":d[p],stroke:o.verticalGridlines.lineColor,d:"M"+f+",0 L"+f+","+n+" Z",dashArray:h.toString(),class:1.25===d[p]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(c),u+=d[p+1]+d[p]):(this.renderDotGrid(p,e,o,0,f,i,!1),u+=d[p])}}},e.prototype.updateGrid=function(e,t,n,i,o,r){var a=t.getElementById(this.diagramId+"_grid_rect"),l=!1;if(a){var s=t.getElementById(this.diagramId+"_pattern");s&&s.parentNode.removeChild(s);var d=0,c=0,u=1,h="Lines"===e.gridType,p=h?e.verticalGridlines.lineIntervals:e.verticalGridlines.dotIntervals,f=h?e.horizontalGridlines.lineIntervals:e.horizontalGridlines.dotIntervals;i.showRulers&&i.dynamicGrid&&r&&o?(d=r.updateSegmentWidth(n.scale),c=o.updateSegmentWidth(n.scale),l=!0,e.horizontalGridlines.scaledIntervals=[d/o.interval],e.verticalGridlines.scaledIntervals=[c/r.interval]):u=this.scaleSnapInterval(e,n.scale);for(var g=0,m=0;m<f.length;m+=1)g+=f[m];var v=0;for(m=0;m<p.length;m+=1)v+=p[m];var y={x:-n.tx*n.scale,y:-n.ty*n.scale};Ly(a,y),y={id:this.diagramId+"_pattern",x:0,y:0,width:v=l?c:v*u,height:g=l?d:g*u,patternUnits:"userSpaceOnUse"},Ly(s=document.createElementNS("http://www.w3.org/2000/svg","pattern"),y),this.horizontalSvgGridlines(s,v,g,u,e,i,r,l,h,f),this.verticalSvgGridlines(s,v,g,u,e,i,o,l,h,p);var b=t.getElementById(this.diagramId+"_grid_pattern_defn");b&&b.appendChild(s)}},e.prototype.updateLineIntervals=function(e,t,n,i,o){for(var r=[],a=i/n.interval,l=o?n.interval:n.interval+1,s=0;s<2*l;s++)r[s]=s%2==0?o?0===s?1.25:.25:0:o?a-r[s-1]:a;return r},e.prototype.scaleSnapInterval=function(e,t){if(t>=2)for(;t>=2;)t/=2;else if(t<=.5)for(;t<=.5;)t*=2;var n;if(e.horizontalGridlines.scaledIntervals=e.horizontalGridlines.snapIntervals,e.verticalGridlines.scaledIntervals=e.verticalGridlines.snapIntervals,1!==t){var i=e.horizontalGridlines;for(i.scaledIntervals=[],n=0;n<i.snapIntervals.length;n++)i.scaledIntervals[n]=i.snapIntervals[n]*t;for((i=e.verticalGridlines).scaledIntervals=[],n=0;n<i.snapIntervals.length;n++)i.scaledIntervals[n]=i.snapIntervals[n]*t}return t},e.prototype.renderTextElement=function(e,t,n,i,o){var r=this.getBaseAttributes(e,n);r.cornerRadius=0,r.whiteSpace=nb(e.style.whiteSpace,e.style.textWrapping),r.content=e.content,r.breakWord=Qy(e.style.textWrapping),r.textAlign=Ky(e.style.textAlign),r.color=e.style.color,r.italic=e.style.italic,r.bold=e.style.bold,r.fontSize=e.style.fontSize,r.fontFamily=e.style.fontFamily,r.textOverflow=e.style.textOverflow,r.textWrapping=e.style.textWrapping,r.textDecoration=e.style.textDecoration,r.doWrap=e.doWrap,r.wrapBounds=e.wrapBounds,r.childNodes=e.childNodes,r.isHorizontalLane=e.isLaneOrientation,e.isLaneOrientation&&(r.parentOffsetX=this.groupElement.offsetX,r.parentOffsetY=this.groupElement.offsetY,r.parentWidth=this.groupElement.actualSize.width,r.parentHeight=this.groupElement.actualSize.height),r.dashArray="",r.strokeWidth=0,r.fill=e.style.fill;var a=e.description?e.description:e.content?e.content:e.id;("Wrap"===e.style.textWrapping||"WrapWithOverflow"===e.style.textWrapping)&&this.groupElement&&r.height>this.groupElement.actualSize.height&&("Clip"===e.style.textOverflow||"Ellipsis"===e.style.textOverflow)&&(r.y=r.y+(r.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(t,r,this.diagramId,void 0,void 0,i),this.renderer.drawText(t,r,i,a,this.diagramId,e.isExport&&Math.min(e.exportScaleValue.x||e.exportScaleValue.y),this.groupElement),this.isSvgMode&&(e.doWrap=!1)},e.prototype.renderNativeElement=function(e,t,n,i,o){var r,a,l=this.getParentSvg(e,void 0,t)||i,s=this.getParentElement(e,t,l).g||t,d=this.getBaseAttributes(e,n);switch(d.fill="transparent",d.cornerRadius=e.cornerRadius,d.stroke="transparent",this.renderer.drawRectangle(t,d,this.diagramId,void 0,void 0,i),e.scale){case"None":r=e.contentSize.width,a=e.contentSize.height;break;case"Stretch":r=e.actualSize.width,a=e.actualSize.height;break;case"Meet":r=a=e.actualSize.width<=e.actualSize.height?e.actualSize.width:e.actualSize.height;break;case"Slice":r=a=e.actualSize.width>=e.actualSize.height?e.actualSize.width:e.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(e,s,a,r,l)},e.prototype.renderHTMLElement=function(e,t,n,i,o,r,a){var l=this.getBaseAttributes(e,i);l.fill="transparent",l.cornerRadius=e.cornerRadius,l.stroke="transparent",this.renderer.drawRectangle(t,l,this.diagramId,void 0,void 0,o),this.svgRenderer&&this.svgRenderer.drawHTMLContent(e,n.children[0],i,function(e){var t=e.parentElement;do{if(Py(t,"e-diagram"))return!0;t=t.parentElement}while(t);return!1}(n),a)},e.prototype.renderImageElement=function(e,t,n,i,o){var r,a,l,s,d=this.getBaseAttributes(e,n);if(d.cornerRadius=0,this.renderer.drawRectangle(t,d,this.diagramId,void 0,void 0,i),"Stretch"===e.stretch)r=e.actualSize.width,a=e.actualSize.height;else{var c=e.contentSize.width,u=e.contentSize.height,h=d.width/c,p=d.height/u,f=void 0;switch(e.stretch){case"Meet":r=c*(f=Math.min(h,p)),a=u*f,d.x+=Math.abs(d.width-r)/2,d.y+=Math.abs(d.height-a)/2;break;case"Slice":h=d.width/c,p=d.height/u,f=Math.max(h,p),l=d.width/(r=c*f)*c,s=d.height/(a=u*f)*u;break;case"None":r=c,a=u}}d.width=r,d.height=a,d.sourceWidth=l,d.sourceHeight=s,d.source=e.source,d.alignment=e.imageAlign,d.scale=e.imageScale,d.description=e.description?e.description:e.id,this.renderer.drawImage(t,d,i,o)},e.prototype.renderContainer=function(e,t,n,i,o,r,a,l,s){var d={svg:o,g:t};if(this.diagramId&&(o=this.getParentSvg(e)||o,this.isSvgMode)){var c;c=this.getParentElement(e,t,o,l).g||t,o=this.getParentSvg(this.hasNativeParent(e.children))||o;var u=this.getParentElement(this.hasNativeParent(e.children),c,o,l);d.svg=u.svg||o,d.g=u.g||c,r?(o&&(o.getElementById(d.g.id)||t.appendChild(d.g)),t=d.g):t=d.g}if(this.renderRect(e,t,i,o),this.groupElement=e,e.hasChildren()){for(var h,p=void 0,f=0,g=e.children;f<g.length;f++){var m=g[f];o=this.getParentSvg(this.hasNativeParent(e.children)||m)||o,this.isSvgMode&&(p=(h=this.getParentElement(this.hasNativeParent(e.children)||m,t,o)).g||t,h.svg&&(o=h.svg)),this.isSvgMode||(m.flip=e.flip),this.renderElement(m,p||t,n,i,o,!0,a,l,s),m instanceof Gc&&p&&!(e.elementActions&kc.ElementIsGroup)&&this.renderFlipElement(m,p,m.flip&&"None"!==m.flip?m.flip:e.flip),m.elementActions&kc.ElementIsPort&&p&&this.renderFlipElement(e,p,m.flip&&"None"!==m.flip?m.flip:e.flip),!(m instanceof Gc)&&"None"!==e.flip&&e.elementActions&kc.ElementIsGroup&&this.renderFlipElement(m,p||t,e.flip)}e.elementActions&kc.ElementIsGroup||this.renderFlipElement(e,t,e.flip)}},e.prototype.renderFlipElement=function(e,t,n){var i={},o=1,r=1,a=0,l=0,s=0,d=0;if("None"!==n?("Horizontal"!==n&&"Both"!==n||(a=e.bounds.center.x,s=-e.bounds.center.x,o=-1),"Vertical"!==n&&"Both"!==n||(l=e.bounds.center.y,d=-e.bounds.center.y,r=-1),i={transform:"translate("+a+","+l+") scale("+o+","+r+") translate("+s+","+d+")"}):i={transform:"translate(0,0)"},i)if(e&&e.children&&e.children.length&&e.children[0]instanceof gf){var c=t.id.split("_preview");(t=(document.getElementById(c[0]+"_html_div")||Dy(this.diagramId).children[0]).querySelector("#"+e.id+"_content_html_element"))&&(t.style.transform="scale("+o+","+r+")rotate("+(e.rotateAngle+e.parentTransform)+"deg)")}else Ly(t,i)},e.prototype.hasNativeParent=function(e,t){if(e&&e.length>0){var n=e[0];if(n instanceof Zc)return n;n.children&&n.children.length&&this.hasNativeParent(n.children,t++||0)}},e.prototype.renderRect=function(e,t,n,i,o){var r=this.getBaseAttributes(e,n,o);r.cornerRadius=e.cornerRadius||0,this.renderer.drawRectangle(t,r,this.diagramId,void 0,void 0,i,e.description?e.description:e.id)},e.prototype.drawRect=function(e,t){t.cornerRadius=0,this.svgRenderer.drawRectangle(e,t,this.diagramId)},e.prototype.getBaseAttributes=function(e,t,n){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,canApplyStyle:e.canApplyStyle};return n&&(i.x=i.x-.5,i.y=i.y-.5),e.isExport&&(i.width*=e.exportScaleValue.x,i.height*=e.exportScaleValue.y,i.x*=e.exportScaleValue.x,i.y*=e.exportScaleValue.y,i.strokeWidth*=e.exportScaleValue.x),e.flip&&(i.flip=e.flip),t&&(i.x+=t.tx,i.y+=t.ty),i},e.renderSvgBackGroundImage=function(e,t,n,i,o,r){if(e.source){var a=Ey(t.id).getElementById(t.id+"_image");if(!a){var l=vy(t.id).getElementsByClassName("e-background-image-layer")[0];(a=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("id",t.id+"_image"),l.appendChild(a)}var s=new Image;s.src=e.source,a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.src.toString());var d="None"!==e.scale?e.scale:"",c=e.align,u=c.charAt(0).toLowerCase()+c.slice(1);d&&(u+=" "+d.charAt(0).toLowerCase()+d.slice(1)),Ly(a,{id:t.id+"_image",x:n,y:i,width:o,height:r,preserveAspectRatio:u})}},e.prototype.transformLayers=function(e,t){var n,i,o=e.tx*e.scale,r=e.ty*e.scale;return(o!==this.transform.x||r!==this.transform.y||0===o||0===r)&&(t&&(window.domTable[this.diagramId+"_diagramLayer"]||(window.domTable[this.diagramId+"_diagramLayer"]=this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer")),window.domTable[this.diagramId+"_diagramLayer"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")")),(n=this.diagramId,i=null,window.domTable[n+"_gridline"]?i=window.domTable[n+"_gridline"]:(i=Ty(n).getElementById(n+"_gridline"),window.domTable[n+"_gridline"]=i),i).setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+")"),window.domTable[this.diagramId+"_diagramPorts"]||(window.domTable[this.diagramId+"_diagramPorts"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts")),window.domTable[this.diagramId+"_diagramPorts"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),window.domTable[this.diagramId+"_diagramExpander"]||(window.domTable[this.diagramId+"_diagramExpander"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander")),window.domTable[this.diagramId+"_diagramExpander"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),window.domTable[this.diagramId+"_nativeLayer"]||(window.domTable[this.diagramId+"_nativeLayer"]=this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer")),window.domTable[this.diagramId+"_nativeLayer"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),Dy(this.diagramId).children[0].style.transform="translate("+e.tx*e.scale+"px,"+e.ty*e.scale+"px)scale("+e.scale+")",this.transform={x:e.tx*e.scale,y:e.ty*e.scale},!0)},e.prototype.updateNode=function(e,t,n,i,o){this.renderElement(e,t,n,i,this.getParentSvg(e),void 0,void 0,o)},e}(),db=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"source",void 0),Object(O.__decorate)([Ks("transparent")],t.prototype,"color",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"scale",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"align",void 0),t}(fd),cb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("Page")],t.prototype,"mode",void 0),Object(O.__decorate)([Ks("PageSettings")],t.prototype,"region",void 0),Object(O.__decorate)([Qs({top:25,bottom:25,left:25,right:25},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"canZoomIn",void 0),Object(O.__decorate)([Ks(void 0)],t.prototype,"customBounds",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"canFit",void 0),t}(fd),ub=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(null)],t.prototype,"width",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"height",void 0),Object(O.__decorate)([Qs({},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks("Landscape")],t.prototype,"orientation",void 0),Object(O.__decorate)([Ks("Infinity")],t.prototype,"boundaryConstraints",void 0),Object(O.__decorate)([Qs({},db)],t.prototype,"background",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"multiplePage",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"showPageBreaks",void 0),Object(O.__decorate)([Qs({},cb)],t.prototype,"fitOptions",void 0),t}(fd),hb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(0)],t.prototype,"horizontalOffset",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"verticalOffset",void 0),Object(O.__decorate)([Ks(1)],t.prototype,"currentZoom",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"viewPortWidth",void 0),Object(O.__decorate)([Ks(0)],t.prototype,"viewPortHeight",void 0),Object(O.__decorate)([Ks(.2)],t.prototype,"minZoom",void 0),Object(O.__decorate)([Ks(30)],t.prototype,"maxZoom",void 0),Object(O.__decorate)([Ks("Diagram")],t.prototype,"scrollLimit",void 0),Object(O.__decorate)([Ks()],t.prototype,"scrollableArea",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"canAutoScroll",void 0),Object(O.__decorate)([Qs({left:15,right:15,top:15,bottom:15},cc)],t.prototype,"autoScrollBorder",void 0),Object(O.__decorate)([Qs({left:0,right:0,top:0,bottom:0},cc)],t.prototype,"padding",void 0),t}(fd),pb=function(){function e(){this.services={}}return e.prototype.register=function(e,t){this.services[e]=t},e.prototype.getService=function(e){return this.services[e]},e}(),fb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("lightgray")],t.prototype,"lineColor",void 0),Object(O.__decorate)([Ks("")],t.prototype,"lineDashArray",void 0),Object(O.__decorate)([Ks([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],t.prototype,"lineIntervals",void 0),Object(O.__decorate)([Ks([1,19,.5,19.5,.5,19.5,.5,19.5,.5,19.5])],t.prototype,"dotIntervals",void 0),Object(O.__decorate)([Ks([20])],t.prototype,"snapIntervals",void 0),t}(fd),gb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Qs({},fb)],t.prototype,"horizontalGridlines",void 0),Object(O.__decorate)([Qs({},fb)],t.prototype,"verticalGridlines",void 0),Object(O.__decorate)([Ks(xc.All)],t.prototype,"constraints",void 0),Object(O.__decorate)([Ks(5)],t.prototype,"snapAngle",void 0),Object(O.__decorate)([Ks("Lines")],t.prototype,"gridType",void 0),Object(O.__decorate)([Ks(5)],t.prototype,"snapObjectDistance",void 0),t}(fd),mb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(5)],t.prototype,"interval",void 0),Object(O.__decorate)([Ks(100)],t.prototype,"segmentWidth",void 0),Object(O.__decorate)([Ks("Horizontal")],t.prototype,"orientation",void 0),Object(O.__decorate)([Ks("RightOrBottom")],t.prototype,"tickAlignment",void 0),Object(O.__decorate)([Ks("red")],t.prototype,"markerColor",void 0),Object(O.__decorate)([Ks(25)],t.prototype,"thickness",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"arrangeTick",void 0),t}(fd),vb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(!1)],t.prototype,"showRulers",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"dynamicGrid",void 0),Object(O.__decorate)([Qs({orientation:"Horizontal"},mb)],t.prototype,"horizontalRuler",void 0),Object(O.__decorate)([Qs({orientation:"Vertical"},mb)],t.prototype,"verticalRuler",void 0),t}(fd),yb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"property",void 0),Object(O.__decorate)([Ks("")],t.prototype,"field",void 0),t}(fd),bb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"read",void 0),Object(O.__decorate)([Ks("")],t.prototype,"create",void 0),Object(O.__decorate)([Ks("")],t.prototype,"update",void 0),Object(O.__decorate)([Ks("")],t.prototype,"destroy",void 0),Object(O.__decorate)([Ks()],t.prototype,"customFields",void 0),t}(fd),wb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks("")],t.prototype,"sourceID",void 0),Object(O.__decorate)([Ks("")],t.prototype,"targetID",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"sourcePointX",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"sourcePointY",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"targetPointX",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"targetPointY",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"dataManager",void 0),Object(O.__decorate)([Qs({},bb)],t.prototype,"crudAction",void 0),t}(fd),Cb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"dataManager",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"dataSource",void 0),Object(O.__decorate)([Ks("")],t.prototype,"root",void 0),Object(O.__decorate)([Ks("")],t.prototype,"parentId",void 0),Object(O.__decorate)([Ks()],t.prototype,"doBinding",void 0),Object(O.__decorate)([ed([],yb)],t.prototype,"dataMapSettings",void 0),Object(O.__decorate)([Qs({},bb)],t.prototype,"crudAction",void 0),Object(O.__decorate)([Qs({},wb)],t.prototype,"connectionDataSource",void 0),t}(fd),xb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"fixedNode",void 0),Object(O.__decorate)([Ks(30)],t.prototype,"horizontalSpacing",void 0),Object(O.__decorate)([Ks("SamePoint")],t.prototype,"connectionPointOrigin",void 0),Object(O.__decorate)([Ks("Nonlinear")],t.prototype,"arrangement",void 0),Object(O.__decorate)([Ks(30)],t.prototype,"verticalSpacing",void 0),Object(O.__decorate)([Ks(30)],t.prototype,"maxIteration",void 0),Object(O.__decorate)([Ks(40)],t.prototype,"springFactor",void 0),Object(O.__decorate)([Ks(50)],t.prototype,"springLength",void 0),Object(O.__decorate)([Qs({left:50,top:50,right:0,bottom:0},cc)],t.prototype,"margin",void 0),Object(O.__decorate)([Ks("Auto")],t.prototype,"horizontalAlignment",void 0),Object(O.__decorate)([Ks("Auto")],t.prototype,"verticalAlignment",void 0),Object(O.__decorate)([Ks("TopToBottom")],t.prototype,"orientation",void 0),Object(O.__decorate)([Ks("Auto")],t.prototype,"connectionDirection",void 0),Object(O.__decorate)([Ks("Default")],t.prototype,"connectorSegments",void 0),Object(O.__decorate)([Ks("None")],t.prototype,"type",void 0),Object(O.__decorate)([Ks()],t.prototype,"getLayoutInfo",void 0),Object(O.__decorate)([Ks()],t.prototype,"layoutInfo",void 0),Object(O.__decorate)([Ks()],t.prototype,"getBranch",void 0),Object(O.__decorate)([Ks()],t.prototype,"bounds",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"enableAnimation",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableRouting",void 0),Object(O.__decorate)([Ks("")],t.prototype,"root",void 0),t}(fd);function Sb(e,t,n){return e.x>=t.x-n&&e.x<=t.x+n&&e.y>=t.y-n&&e.y<=t.y+n}function Tb(e){return e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0}function Eb(e){return 1===e.selectedItems.connectors.length&&!e.selectedItems.nodes.length}function _b(e,t,n,i){if(void 0===n&&(n=!0),t instanceof uy)return!0;if(t instanceof ry)for(;t;){if(-1!==e.selectedItems.nodes.indexOf(t)&&void 0===e.selectedItems.annotation)return!0;if(n)break;t=e.nameTable[t.parentId]}else if(t instanceof zf){if(-1!==e.selectedItems.connectors.indexOf(t)&&void 0===e.selectedItems.annotation)return!0}else if((t instanceof eu||t instanceof tu)&&e.selectedItems.annotation&&e.selectedItems.wrapper.children[0].id===i.id)return!0;return!1}var kb={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"grab",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},Db=function(){function e(){this.valueCreated="created",this.valueUpdated="updated",this.valueDeleted="deleted",this.valueUnchanged="unchanged",this.newNodeObject=[],this.newConnectorObject=[],this.diagramObject={}}return e.prototype.updateObjectCollection=function(e,t){for(var n=0;n<e.length;n++)e[n].objects?e[n].objects=t.layers[n].objects:(e[n].objects=[],e[n].objects=t.layers[n].objects)},e.prototype.getOldObject=function(e,t,n){for(var i=t?n.oldNodeObjects:n.oldConnectorObjects,o=0;o<i.length;o++)if(i[o].id===e)return i[o]},e.prototype.changeSegments=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if("segments"===o){var r=this.removeNullValues(t[o]);e[o]=r}}return e},e.prototype.removeNullValues=function(e){for(var t=[],n={},i=0;i<e.length;i++)n=this.removeNullObjectValues(e[i]),t.push(n);return t},e.prototype.removeNullObjectValues=function(e){for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];void 0!==e[o]&&(t[o]=e[o]instanceof Object?this.removeNullObjectValues(e[o]):e[o])}return t},e.prototype.getDifferenceValues=function(e,t,n,i){var o,r,a,l,s=e instanceof ry;if(e&&(l=this.getOldObject(e.id,!!s,i))){var d=Yy(e);if(a=this.map(d,l),o=this.frameObject({},a),r=this.removeEmptyValues(o),(r=this.changeSegments(r,d)).children&&(r.children=Yy(e).children),r.ports&&r.ports.length)for(var c=0;c<r.ports.length;c++)d.ports[c].outEdges&&(r.ports[c].outEdges=d.ports[c].outEdges),d.ports[c].inEdges&&(r.ports[c].inEdges=d.ports[c].inEdges);return this.getDiagramObjects(r,e.id,s,t,n,i)}},e.prototype.getLayerObject=function(e,t,n){if(Ka()){for(var i={layers:[]},o={layers:[]},r=0;r<n.layers.length;r++)o.layers.push(Yy(n.layers[r]));var a=void 0;for(r=0;r<o.layers.length;r++){a=t?this.map(e.layers[r],Yy(o.layers[r])):this.map(Yy(o.layers[r]),e.layers[r]);var l=this.frameObject({},a),s=this.removeEmptyValues(l);i.layers[r]=s}return this.updateObjectCollection(i.layers,n),i}},e.prototype.getDiagramObjects=function(e,t,n,i,o,r){var a;if(a=Gy(r,t),e.sfIndex=a,n?this.newNodeObject.push(e):this.newConnectorObject.push(e),i&&(i.sourceWrapper instanceof Gc&&o||i.portId)){var l,s=void 0;l=n?i.portId?this.newNodeObject[0].ports:this.newNodeObject[0].annotations:this.newConnectorObject[0].annotations||[];for(var d=0;d<l.length;d++)if(Object.keys(l[d]).length>0){var c=r.nameTable[t];if(s=l[d],i.portId)this.newNodeObject[0].ports=[s];else{for(var u=0;u<c.annotations.length;u++)i.sourceWrapper.id===c.id+"_"+c.annotations[u].id&&(s.sfIndex=u);n?this.newNodeObject[0].annotations=[s]:this.newConnectorObject[0].annotations=[s]}}}this.diagramObject={nodes:this.newNodeObject,connectors:this.newConnectorObject}},e.prototype.removeArrayValues=function(e){var t=[];if(JSON.stringify(e)!==JSON.stringify({data:[]}))for(var n=0;n<e.length;n++)if(e[n]instanceof Object){var i=this.removeEmptyValues(e[n]);t.push(i)}else t.push(e[n]);return t},e.prototype.removeEmptyValues=function(e){for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if("wrapper"!==o&&("data"!==o||"data"===o&&!(e[o]instanceof Array))){var r=e[o],a=JSON.stringify(r);if(r instanceof Array){var l=this.removeArrayValues(r);"[]"!==JSON.stringify(l)&&(t[o]=l)}else r instanceof Object?a!==JSON.stringify({data:[]})&&(l=this.removeEmptyValues(r),"{}"!==JSON.stringify(l)&&(t[o]=l)):a!==JSON.stringify(["data"])&&a!==JSON.stringify("data")&&a!==JSON.stringify({data:[]})&&"version"!==o&&"ejsAction"!==o&&(t[o]=e[o])}}return t},e.prototype.map=function(e,t,n){if(this.isFunction(e)||this.isFunction(t))throw"Invalid argument. Function given, object expected.";if(this.isValue(e)||this.isValue(t))return{type:this.compareValues(e,t),data:void 0===e?t:e};var i={};if(this.isArray(e))for(var o=0;o<e.length;o++){i[n]||(i[n]=[]);var r=this.map(e[o],t[o]);i[n].push(r)}else for(var a in e)if(!this.isFunction(e[a])){var l=void 0;void 0!==t[a]&&(l=t[a]);var s=this.map(e[a],l,this.isArray(l)?a:void 0);i[a]=this.isArray(l)?s[a]:s}if(this.isArray(t))for(var d=t.length-1;d>=0;d--)i[n]||(i[n]=[]),this.isFunction(t[d])||void 0!==i[n][d]?i[n][d].type&&i[n][d].type!==this.valueUpdated&&delete i[n]:(r=this.map(void 0,t[d]),i[n][d]=r);else for(var a in t)this.isFunction(t[a])||void 0!==i[a]?i[a].type&&i[a].type!==this.valueUpdated&&i[a].type!==this.valueDeleted&&delete i[a]:(s=this.map(void 0,t[a]),i[a]=s);return i},e.prototype.compareValues=function(e,t){return e===t?this.valueUnchanged:this.isDate(e)&&this.isDate(t)&&e.getTime()===t.getTime()?this.valueUnchanged:void 0===e?this.valueCreated:void 0===t?this.valueDeleted:this.valueUpdated},e.prototype.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},e.prototype.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.prototype.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.prototype.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.prototype.isValue=function(e){return!this.isObject(e)&&!this.isArray(e)},e.prototype.frameObject=function(e,t){for(var n in t)if(this.isArray(t[n])){e[n]||(e[n]=[]);for(var i=0;i<t[n].length;i++){var o=this.frameObject({},t[n][i]);e[n].push(o)}}else if("type"!=n||"type"==n&&t[n]!==this.valueUpdated&&t[n]!==this.valueUnchanged&&t[n]!==this.valueDeleted&&t[n]!==this.valueCreated){if(this.isFunction(t[n]))continue;if(this.isValue(t[n]))return t.data;o=this.frameObject({},t[n]),(this.isValue(o)||Object.keys(o).length>0)&&(e[n]=o)}return e},e}(),Ab=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},Ob=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},Ib=function(){function e(e,t){void 0===t&&(t=!1),this.commandHandler=null,this.deepDiffer=new Db,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=e,this.isProtectChange=t}return e.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},e.prototype.mouseDown=function(e){Ka()&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0)),this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source),this.checkProperty=!0,this.mouseDownElement=e.source},e.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},e.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.currentPosition=e.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),Ka()&&(this.commandHandler.enableCloneObject(!1),this.commandHandler.ismouseEvents(!1),this.commandHandler.getBlazorOldValues(e,this instanceof Wb)),this.endAction(),this.mouseDownElement=null},e.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},e.prototype.mouseWheel=function(e){this.currentPosition=e.position},e.prototype.mouseLeave=function(e){this.mouseUp(e)},e.prototype.updateSize=function(e,t,n,i,o,r){e=this.commandHandler.renderContainerHelper(e)||e;var a,l={snapped:!1,offset:0,left:!1,right:!1},s={snapped:!1,offset:0,top:!1,bottom:!1},d=this.currentPosition.x-this.startPosition.x,c=this.currentPosition.y-this.startPosition.y,u=!(e instanceof Gc)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),h=u?this.commandHandler.snappingModule.getLayer():null,p=e instanceof Gc?r:e.rotateAngle;ec(a=Qd(),-p,0,0);var f,g=0,m=0,v=e instanceof Gc?e.actualSize.width:e.width,y=e instanceof Gc?e.actualSize.height:e.height;switch(i){case"ResizeWest":d=(f=$d(a,{x:d,y:c})).x,c=f.y,m=1,d=u?this.commandHandler.snappingModule.snapLeft(l,s,h,d,c,e,n===t,o):d,c=0,g=(o.width-d)/v;break;case"ResizeEast":d=(f=$d(a,{x:d,y:c})).x,c=f.y,d=u?this.commandHandler.snappingModule.snapRight(l,s,h,d,c,e,n===t,o):d,c=0,g=(o.width+d)/v,m=1;break;case"ResizeNorth":g=1,d=(f=$d(a,{x:d,y:c})).x,c=f.y,c=u?this.commandHandler.snappingModule.snapTop(l,s,h,d,c,e,n===t,o):c,m=(o.height-c)/y;break;case"ResizeSouth":g=1,d=(f=$d(a,{x:d,y:c})).x,c=f.y,c=u?this.commandHandler.snappingModule.snapBottom(l,s,h,d,c,e,n===t,o):c,m=(o.height+c)/y;break;case"ResizeNorthEast":d=(f=$d(a,{x:d,y:c})).x,c=f.y,d=u?this.commandHandler.snappingModule.snapRight(l,s,h,d,c,e,n===t,o):d,c=u?this.commandHandler.snappingModule.snapTop(l,s,h,d,c,e,n===t,o):c,g=(o.width+d)/v,m=(o.height-c)/y;break;case"ResizeNorthWest":d=(f=$d(a,{x:d,y:c})).x,c=f.y,c=u?this.commandHandler.snappingModule.snapTop(l,s,h,d,c,e,n===t,o):c,d=u?this.commandHandler.snappingModule.snapLeft(l,s,h,d,c,e,n===t,o):d,g=(o.width-d)/v,m=(o.height-c)/y;break;case"ResizeSouthEast":d=(f=$d(a,{x:d,y:c})).x,c=f.y,c=u?this.commandHandler.snappingModule.snapBottom(l,s,h,d,c,e,n===t,o):c,d=u?this.commandHandler.snappingModule.snapRight(l,s,h,d,c,e,n===t,o):d,m=(o.height+c)/y,g=(o.width+d)/v;break;case"ResizeSouthWest":d=(f=$d(a,{x:d,y:c})).x,c=f.y,c=u?this.commandHandler.snappingModule.snapBottom(l,s,h,d,c,e,n===t,o):c,d=u?this.commandHandler.snappingModule.snapLeft(l,s,h,d,c,e,n===t,o):d,g=(o.width-d)/v,m=(o.height+c)/y}return{width:g,height:m}},e.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},e}(),Pb=function(e){function t(t,n,i){var o=e.call(this,t,!0)||this;return o.action=i,o}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===jd.equals(this.currentPosition,this.prevPosition)){var n=Zd.toBounds([this.prevPosition,this.currentPosition]);this.mouseDownElement&&!Zf(this.mouseDownElement)?this.commandHandler.clearObjectSelection(this.mouseDownElement):(this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(n.x,n.y,n.width,n.height))}return!this.blocked},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),!this.commandHandler.isUserHandle(this.currentPosition))if(!1===jd.equals(this.currentPosition,this.prevPosition)&&this.inAction){var n=Zd.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(n)}else{var i=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&t.info&&t.info.ctrlKey?t&&t.source&&(this.commandHandler.isSelected(t.source)?1===t.clickCount&&(this.commandHandler.unSelect(t.source),this.commandHandler.updateBlazorSelector()):this.commandHandler.selectObjects([t.source],!0)):(this.commandHandler.clearSelection(null===t.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(t.source,t.sourceWrapper):t.source&&this.commandHandler.selectObjects([t.source],!1,i))}this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Ib),Rb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.inAction=!1;for(var n,i=t.source,o=t.sourceWrapper.id,r=0;r<i.fixedUserHandles.length;r++)o.indexOf(i.fixedUserHandles[r].id)>-1&&(n=i.fixedUserHandles[r]);if(Ka()){var a=hv(t.source)===zf?{connector:t.source}:{node:t.source},l=hv(t.source)===zf?{connectorFixedUserHandle:n}:{nodeFixedUserHandle:n};this.commandHandler.triggerEvent(jc.fixedUserHandleClick,{fixedUserHandle:l,element:a}),e.prototype.mouseUp.call(this,t)}else this.commandHandler.triggerEvent(jc.fixedUserHandleClick,{fixedUserHandle:n,element:t.source}),e.prototype.mouseUp.call(this,t)},t}(Ib),Mb=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.isConnected=!1,i.endPoint=n,i}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){return Ab(this,void 0,void 0,function(){var n,i,o,r,a,l,s,d;return Ob(this,function(c){if(Ka()&&t&&t.source&&(this.commandHandler.insertSelectedObjects(),this.commandHandler.insertBlazorConnector(t.source),(n=t.source).connectors&&(this.oldConnector=Yy(i=n.connectors[0]),o={connector:xv(i),oldValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},newValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},cancel:!1,state:"Changing",connectorEnd:this.endPoint},this.tempArgs=o)),this.inAction=!0,this.undoElement=void 0,this instanceof jb||(this.undoElement=Yy(t.source)),e.prototype.mouseDown.call(this,t),t.source&&t.source.connectors&&(this.oldConnector=Yy(r=t.source.connectors[0])),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(a=0;a<r.segments.length;a++)s=jd.isEmptyPoint((l=r.segments[a]).point1)?l.bezierPoint1:l.point1,d=jd.isEmptyPoint(l.point2)?l.bezierPoint2:l.point2,(Sb(this.currentPosition,s,r.hitPadding)||Sb(this.currentPosition,d,r.hitPadding))&&(this.selectedSegment=l);return this.currentPosition=t.position,[2]})})},t.prototype.mouseUp=function(t){return Ab(this,void 0,void 0,function(){var n,i,o,r,a,l,s,d,c,u,h,p,f,g;return Ob(this,function(m){switch(m.label){case 0:return Ka()?(n=void 0,this.tempArgs&&this.oldConnector?(this.commandHandler.updatePropertiesToBlazor(t,!1),this.tempArgs.state="Changed",a="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",l="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",this.tempArgs.oldValue="ConnectorSourceEnd"===this.endPoint?{connectorSourceValue:{nodeId:this.oldConnector[a],portId:this.oldConnector[l]}}:{connectorTargetValue:{nodeId:this.oldConnector[a],portId:this.oldConnector[l]}},n={state:this.tempArgs.state,oldValue:this.tempArgs.oldValue,newValue:this.tempArgs.newValue,cancel:this.tempArgs.cancel,connectorEnd:this.tempArgs.connectorEnd},i="diagram",o="sfBlazor",window&&window.Blazor&&this.commandHandler[i].connectionChange?(r={EventName:"connectionChange",args:JSON.stringify(this.tempArgs)},[4,window[o].updateBlazorDiagramEvents(r,this.commandHandler[i])]):[3,2]):[3,3]):[3,3];case 1:n=m.sent(),m.label=2;case 2:n&&this.commandHandler.updateConnectorValue(n),m.label=3;case 3:return!Ka()&&this.isConnected&&t.source.connectors&&(d=t.source.connectors[0],a="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",l="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",p={connector:xv(d),oldValue:{nodeId:this.oldConnector[a],portId:this.oldConnector[l]},newValue:{nodeId:d[a],portId:d[l]},cancel:!1,state:"Changed",connectorEnd:this.endPoint},d[a]!==this.oldConnector[a]&&(this.commandHandler.triggerEvent(jc.connectionChange,p),this.isConnected=!1)),this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(t),this instanceof jb||("ConnectorSourceEnd"!==this.endPoint||!t.source.connectors.length||jd.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&t.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||jd.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&t.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)?this instanceof jb||"BezierTargetThumb"!==this.endPoint&&"BezierSourceThumb"!==this.endPoint||this.undoElement&&t.source&&(f=void 0,f=Yy(t.source),this.commandHandler.addHistoryEntry(g={type:"SegmentChanged",redoObject:f,undoObject:this.undoElement,category:"Internal"})):(s=void 0,d=void 0,t.source&&t.source.connectors&&(s={x:this.prevPosition.x,y:this.prevPosition.y},d=t.source.connectors[0]),c=void 0,u=void 0,t.target&&((h=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Kc?c=h.id:u=h.id),p={connector:d,state:"Completed",targetNode:u,oldValue:s,newValue:s,cancel:!1,targetPort:c},Ka()&&(p={connector:xv(d),state:"Completed",targetNode:u,oldValue:xv(s),newValue:s,cancel:p.cancel,targetPort:c}),this.commandHandler.triggerEvent("ConnectorSourceEnd"===this.endPoint?jc.sourcePointChange:jc.targetPointChange,p),this.commandHandler.removeTerminalSegment(d,!0),this.undoElement&&t.source&&(f=void 0,f=Yy(t.source),g={type:"ConnectionChanged",redoObject:Yy(f),undoObject:Yy(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(g))),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,e.prototype.mouseUp.call(this,t),[2]}})})},t.prototype.mouseMove=function(t){var n;if(e.prototype.mouseMove.call(this,t),!(this instanceof jb)&&("ConnectorSourceEnd"===this.endPoint&&jd.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&jd.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var i=void 0,o=void 0;t.source&&t.source.connectors&&(i={x:this.prevPosition.x,y:this.prevPosition.y},o=t.source.connectors[0]);var r=void 0,a=void 0;t.target&&(a=t.target.id,(f=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Kc||f instanceof Gv?r=f.id:a=f.id);var l={connector:o,state:"Start",targetNode:a,oldValue:i,newValue:i,cancel:!1,targetPort:r};Ka()&&(l={connector:xv(o),state:"Start",targetNode:a,oldValue:i,newValue:i,cancel:l.cancel,targetPort:r}),this.commandHandler.triggerEvent("ConnectorSourceEnd"===this.endPoint?jc.sourcePointChange:jc.targetPointChange,l)}if(this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var s=this.currentPosition.x-this.prevPosition.x,d=this.currentPosition.y-this.prevPosition.y,c=void 0,u=void(i=void 0),h=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var p=void 0;t.source&&t.source.connectors&&(c={x:this.currentPosition.x,y:this.currentPosition.y},i={x:this.prevPosition.x,y:this.prevPosition.y},p=t.source.connectors[0]);var f,g=void 0,m=void 0;if(t.target&&((f=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Kc?g=f.id:m=f.id),l={connector:p,state:"Progress",targetNode:m,oldValue:i,newValue:c,cancel:!1,targetPort:g},Ka()&&(l={connector:xv(p),state:"Progress",targetNode:m,oldValue:i,newValue:c,cancel:l.cancel,targetPort:g}),this instanceof jb||this.commandHandler.triggerEvent("ConnectorSourceEnd"===this.endPoint?jc.sourcePointChange:jc.targetPointChange,l),t.target&&(u=rv(t.target,!0),h=rv(t.target,!1)),(!l.cancel&&this.inAction&&void 0!==this.endPoint&&0!==s||0!==d)&&(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,t.source,this.currentPosition,this.selectedSegment,t.target,g),this.commandHandler.updateSelector(),t.target&&("ConnectorSourceEnd"===this.endPoint&&(og(t.target)||rg(h))||"ConnectorTargetEnd"===this.endPoint&&(ng(t.target)||ig(u)))?(this.commandHandler.canDisconnect(this.endPoint,t,g,m)&&(n=this.commandHandler.disConnect(t.source,this.endPoint,this.canCancel),this.isConnected=!0),(f=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof ry?(ng(f)&&"ConnectorTargetEnd"===this.endPoint||og(f)&&"ConnectorSourceEnd"===this.endPoint)&&(n=this.commandHandler.connect(this.endPoint,t,this.canCancel),this.isConnected=!0):this.checkConnect(f)&&(this.isConnected=!0,n=this.commandHandler.connect(this.endPoint,t,this.canCancel))):-1===this.endPoint.indexOf("Bezier")&&(this.isConnected=!0,n=this.commandHandler.disConnect(t.source,this.endPoint,this.canCancel),this.commandHandler.updateSelector())),this.commandHandler.canEnableDefaultTooltip()){var v=this.getTooltipContent(t.position);this.commandHandler.showTooltip(t.source,t.position,v,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}n&&(this.tempArgs=n)}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.x)+" Y:"+Math.round(e.y)},t.prototype.checkConnect=function(e){return!(!ig(e)||"ConnectorTargetEnd"!==this.endPoint)||!(!rg(e)||"ConnectorSourceEnd"!==this.endPoint)||!(e.constraints&zc.None||ig(e)||rg(e))},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(Ib),Nb=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.currentTarget=null,i.canCancel=!1,i.objectType=n,i}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){if(t.source instanceof ry||t.source instanceof zf){var n=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([t.source],t.info&&t.info.ctrlKey,n);var i={nodes:[],connectors:[]};t.source instanceof ry?i.nodes.push(Yy(t.source)):i.connectors.push(Yy(t.source)),this.undoElement=Yy(i)}else this.undoElement=Yy(t.source);var o;if(this.undoParentElement=this.commandHandler.getSubProcess(t.source),"Port"===this.objectType&&(this.portId=t.sourceWrapper.id),this.commandHandler.insertBlazorConnector(t.source),Ka()){this.commandHandler.insertSelectedObjects(),this.startPosition=this.currentPosition=this.prevPosition=t.position,this.initialOffset={x:0,y:0},t.source&&(o={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY});var r={source:Yy(t.source),state:"Start",oldValue:o,newValue:{},target:Yy(t.target),targetPosition:t.position,allowDrop:!0,cancel:!1};this.tempArgs=r}e.prototype.mouseDown.call(this,t),this.initialOffset={x:0,y:0}},t.prototype.mouseUp=function(t,n){return Ab(this,void 0,void 0,function(){var i,o,r,a,l,s,d,c,u,h,p,f,g,m,v,y,b;return Ob(this,function(w){switch(w.label){case 0:return Ka()&&"Port"!==this.objectType?(this.commandHandler.updatePropertiesToBlazor(t,!1),t.source&&(o={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},i={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY}),g={state:"Completed",oldValue:xv(this.tempArgs.oldValue),newValue:xv(o),target:xv(this.currentTarget),targetPosition:xv(this.currentPosition),allowDrop:!0,cancel:!1},r=void 0,a="diagram",l="sfBlazor",window&&window.Blazor&&this.commandHandler[a].positionChange?(s={EventName:"positionChange",args:JSON.stringify(g)},[4,window[l].updateBlazorDiagramEvents(s,this.commandHandler[a])]):[3,2]):[3,3];case 1:r=w.sent(),w.label=2;case 2:r&&r.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.canCancel=!0),this.canCancel&&(this.commandHandler.insertBlazorObject(t.source),this.commandHandler.dragSelectedObjects(this.tempArgs.oldValue.offsetX-t.source.wrapper.offsetX,this.tempArgs.oldValue.offsetY-t.source.wrapper.offsetY)),w.label=3;case 3:return this.checkPropertyValue(),c=!1,h={nodes:[],connectors:[]},"Port"===this.objectType?[3,8]:(t.source instanceof ry||t.source instanceof zf?(t.source instanceof ry?h.nodes.push(Yy(t.source)):h.connectors.push(Yy(t.source)),(d=Yy(h)).offsetX=(p=t.source.wrapper).offsetX,d.offsetY=p.offsetY):d=Yy(t.source),("helper"!==(u=this.commandHandler.renderContainerHelper(t.source)||t.source||this.commandHandler.renderContainerHelper(t.source)).id||d.nodes[0].isLane||d.nodes[0].isPhase)&&"helper"===u.id||(!(u instanceof uy&&u.width==this.undoElement.width&&u.height==this.undoElement.height)&&u instanceof uy||u.offsetX===this.undoElement.offsetX&&u.offsetY===this.undoElement.offsetY&&u.sourcePoint===this.undoElement.sourcePoint&&u.targetPoint===this.undoElement.targetPoint)&&!this.isSelectionHasConnector(u)||(t.source&&(o={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},i={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY}),g={source:t.source,state:"Completed",oldValue:i,newValue:o,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},g={source:xv(t.source),state:"Completed",oldValue:xv(i),newValue:xv(o),target:xv(this.currentTarget),targetPosition:xv(this.currentPosition),allowDrop:g.allowDrop,cancel:g.cancel},Ka()&&(g=this.getBlazorPositionChangeEventArgs(g,this.currentTarget)),Ka()||this.commandHandler.triggerEvent(jc.positionChange,g),n||(this.commandHandler.startGroupAction(),c=!0,b={type:"PositionChanged",redoObject:Yy(d),undoObject:Yy(this.undoElement),category:"Internal"},d.nodes[0]&&d.nodes[0].processId&&(f={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(t.source)},this.commandHandler.addHistoryEntry(f)),this.commandHandler.addHistoryEntry(b))),this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0),this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),t.source&&this.currentTarget&&lg(this.currentTarget)&&this.commandHandler.isDroppable(t.source,this.currentTarget)?(this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition),g={element:t.source,target:this.currentTarget,position:this.currentPosition,cancel:!1},Ka()?(g=function(e,t){if(Ka()){var n=hv(e.source)===zf,i=xv(e.source),o=xv(e.target);t={element:n?{connector:i.connectors[0],connectorId:i.connectors[0].id}:{node:i.nodes[0],nodeId:i.nodes[0].id},target:n?{connector:o}:{node:o},position:t.position,cancel:t.cancel}}return t}(t,g),[4,this.commandHandler.triggerEvent(jc.drop,g)]):[3,5]):[3,7]);case 4:return g=w.sent()||g,[3,6];case 5:this.commandHandler.triggerEvent(jc.drop,g),w.label=6;case 6:if(!g.cancel&&t.source&&this.commandHandler.isParentAsContainer(this.currentTarget)){for(m=t.source instanceof uy?t.source.nodes:[t.source],v=!1,y=0;y<m.length;y++)m[y].container||(v=!0,this.commandHandler.dropChildToContainer(this.currentTarget,m[y]),this.commandHandler.renderContainerHelper(m[y]));c&&this.commandHandler.isContainer&&v&&this.commandHandler.endGroupAction()}w.label=7;case 7:return t.source&&this.currentTarget&&this.commandHandler.dropAnnotation(t.source,this.currentTarget),this.commandHandler.updateSelector(),c&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction(),[3,9];case 8:h.nodes.push(Yy(t.source)),t.portId=this.portId,d=Yy(h),b={type:"PortPositionChanged",objectId:this.portId,redoObject:Yy(d),undoObject:Yy(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(b),w.label=9;case 9:return this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),[2]}})})},t.prototype.isSelectionHasConnector=function(e){return!(!(e.nodes&&e.connectors&&e.nodes.length>0&&e.connectors.length>0)||e.width===this.undoElement.width&&e.height===this.undoElement.height)},t.prototype.getBlazorPositionChangeEventArgs=function(e,t){return{source:xv(e.source),state:e.state,oldValue:e.oldValue,newValue:e.newValue,target:hv(t)===zf?{connector:xv(t)}:{node:xv(t)},targetPosition:this.currentPosition,allowDrop:!0,cancel:!1}},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var n,i,o=!1;(n=this.commandHandler.renderContainerHelper(t.source)||t.source)instanceof ry||n instanceof zf?n instanceof ry?n.offsetX===this.undoElement.nodes[0].offsetX&&n.offsetY===this.undoElement.nodes[0].offsetY&&(o=!0):jd.equals(n.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&jd.equals(n.targetPoint,this.undoElement.connectors[0].targetPoint)&&(o=!0):n.wrapper.offsetX===this.undoElement.wrapper.offsetX&&n.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(o=!0),n&&(i={offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY});var r={source:n,state:"Start",oldValue:i,newValue:i,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(r={source:xv(n),state:"Start",oldValue:xv(i),newValue:xv(i),target:t.target,targetPosition:t.position,allowDrop:r.allowDrop,cancel:r.cancel},o&&!Ka()&&this.commandHandler.triggerEvent(jc.positionChange,r),this.currentPosition=t.position,"Port"!==this.objectType){var a,l=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),s=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(t,this.currentPosition),this.commandHandler.disConnect(t.source),this.commandHandler.removeSnap();var d=void 0,c=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,l,s);this.initialOffset.x=l-c.x,this.initialOffset.y=s-c.y,n&&(a={offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY},d={offsetX:n.wrapper.offsetX+c.x,offsetY:n.wrapper.offsetY+c.y}),this.currentTarget&&t.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(t.source,t.target,this.currentTarget),this.currentTarget=t.target;var u={source:n,state:"Progress",oldValue:a,newValue:d,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(Ka()&&(u=this.getBlazorPositionChangeEventArgs(u,t.target)),Ka()||this.commandHandler.triggerEvent(jc.positionChange,u),!u.cancel&&!this.canCancel){this.blocked=!this.commandHandler.dragSelectedObjects(c.x,c.y);var h=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||h}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(t),this.currentTarget&&t.source!==this.currentTarget&&this.commandHandler.isDroppable(t.source,this.currentTarget)&&"helper"!==t.source.id){var p=t.source instanceof uy?t.source.nodes[0]:t.source;this.commandHandler.isParentAsContainer(p,!0)||"SwimLane"===p.shape.type||p.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(t,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var f=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,f,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var g=Qd(),m=t.source;ec(g,-m.rotateAngle,m.offsetX,m.offsetY);var v=$d(g,{x:this.prevPosition.x,y:this.prevPosition.y}),y=$d(g,{x:t.position.x,y:t.position.y});this.commandHandler.portDrag(t.source,t.sourceWrapper,y.x-v.x,y.y-v.y)}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.wrapper.bounds.x)+" Y:"+Math.round(e.wrapper.bounds.y)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},t}(Ib),Lb=function(e){function t(t){return e.call(this,t,!0)||this}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){if(Ka()){var n={rotateAngle:(this.commandHandler.renderContainerHelper(t.source)||t.source).wrapper.rotateAngle},i={source:xv(t.source),state:"Start",oldValue:n,newValue:void 0,cancel:!1};this.tempArgs=i,this.tempArgs&&this.tempArgs.cancel&&(this.canCancel=!0)}if(this.undoElement=Yy(t.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var o=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),r=0;r<o.length;r++){var a=this.commandHandler.cloneChild(o[r].id);this.childTable[o[r].id]=Yy(a)}e.prototype.mouseDown.call(this,t)},t.prototype.mouseUp=function(t){return Ab(this,void 0,void 0,function(){var n,i,o,r,a,l,s,d,c,u,h;return Ob(this,function(p){switch(p.label){case 0:return this.checkPropertyValue(),Ka()?(n="diagram",i="sfBlazor",o="Blazor",this.commandHandler.updatePropertiesToBlazor(t,!1),r=this.commandHandler.renderContainerHelper(t.source)||t.source,c={state:"Completed",oldValue:d={rotateAngle:this.tempArgs.oldValue.rotateAngle},newValue:{rotateAngle:r.wrapper.rotateAngle},cancel:!1},a=void 0,window&&window[o]&&this.commandHandler[n].rotateChange?(l={EventName:"rotateChange",args:JSON.stringify(c)},[4,window[i].updateBlazorDiagramEvents(l,this.commandHandler[n])]):[3,2]):[3,3];case 1:a=p.sent(),p.label=2;case 2:a&&a.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.canCancel=!0),this.canCancel&&(this.commandHandler.insertBlazorObject(t.source),this.commandHandler.rotatePropertyChnage(this.tempArgs.oldValue.rotateAngle)),p.label=3;case 3:return s=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle!==s.wrapper.rotateAngle&&(c={source:t.source,state:"Completed",oldValue:d={rotateAngle:s.wrapper.rotateAngle},newValue:d,cancel:!1},Ka()||this.commandHandler.triggerEvent(jc.rotateChange,c),u=void 0,u=Yy(t.source),h={type:"RotationChanged",redoObject:Yy(u),undoObject:Yy(this.undoElement),category:"Internal",childTable:this.childTable},this.commandHandler.addHistoryEntry(h),this.commandHandler.updateSelector()),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,e.prototype.mouseUp.call(this,t),[2]}})})},t.prototype.mouseMove=function(t){var n;if(e.prototype.mouseMove.call(this,t),n=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle===n.wrapper.rotateAngle){var i={rotateAngle:n.wrapper.rotateAngle},o={source:t.source,state:"Start",oldValue:i,newValue:i,cancel:!1};Ka()||this.commandHandler.triggerEvent(jc.rotateChange,o)}this.currentPosition=t.position;var r=jd.findAngle({x:n.wrapper.offsetX,y:n.wrapper.offsetY},this.currentPosition)+90,a=this.commandHandler.snapAngle(r),l={rotateAngle:n.wrapper.rotateAngle},s={rotateAngle:r=((r=0!==a?a:r)+360)%360},d={source:xv(t.source),state:"Progress",oldValue:xv(l),newValue:xv(s),cancel:!1};if(Ka()||this.commandHandler.triggerEvent(jc.rotateChange,d),(!Ka()&&!d.cancel||Ka()&&!this.canCancel)&&(this.blocked=!this.commandHandler.rotateSelectedItems(r-n.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var c=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,c,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},t.prototype.getTooltipContent=function(e){return Math.round(e.rotateAngle%360).toString()+"\xb0"},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Ib),Hb=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.initialBounds=new Zd,i.canCancel=!1,i.corner=n,i}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){var n;if(Ka()){this.commandHandler.insertSelectedObjects(),this.startPosition=this.currentPosition=this.prevPosition=t.position,this.currentElement=t.source,this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width,t.source&&(n={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height});var i={source:xv(t.source),state:"Start",oldValue:n,newValue:xv(this.currentElement),cancel:!1};this.tempArgs=i}if(this.undoElement=Yy(t.source),this.undoParentElement=this.commandHandler.getSubProcess(t.source),e.prototype.mouseDown.call(this,t),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var o=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),r=0;r<o.length;r++){var a=this.commandHandler.cloneChild(o[r].id);this.childTable[o[r].id]=Yy(a)}this.commandHandler.checkSelection(t.source,this.corner),e.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width},t.prototype.mouseUp=function(t,n){return Ab(this,void 0,void 0,function(){var i,o,r,a,l,s,d,c,u,h,p,f;return Ob(this,function(g){switch(g.label){case 0:return Ka()?(i="diagram",o="sfBlazor",r="Blazor",this.commandHandler.updatePropertiesToBlazor(t,!1),h=Yy(t.source),u={oldValue:this.tempArgs.oldValue,newValue:{width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height,offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},cancel:!1,state:"Completed"},this.canCancel?[3,3]:(a=void 0,window&&window[r]&&this.commandHandler[i].sizeChange?(l={EventName:"sizeChange",args:JSON.stringify(u)},[4,window[o].updateBlazorDiagramEvents(l,this.commandHandler[i])]):[3,2])):[3,4];case 1:a=g.sent(),g.label=2;case 2:a&&a.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.commandHandler.insertBlazorObject(t.source),this.commandHandler.scaleSelectedItems(this.tempArgs.oldValue.width/h.wrapper.actualSize.width,this.tempArgs.oldValue.height/h.wrapper.actualSize.height,this.getPivot(this.corner))),g.label=3;case 3:this.tempArgs=void 0,this.canCancel=void 0,g.label=4;case 4:return this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelector(),s=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX===s.wrapper.offsetX&&this.undoElement.offsetY===s.wrapper.offsetY&&this.undoElement.width===s.wrapper.bounds.width&&this.undoElement.height===s.wrapper.bounds.height||(Ka()||(d=this.updateSize(t.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds),this.blocked=this.scaleObjects(d.width,d.height,this.corner,this.currentPosition,this.prevPosition,s),c={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},u={source:xv(t.source),state:"Completed",oldValue:c,newValue:c,cancel:!1},this.commandHandler.triggerEvent(jc.sizeChange,u)),h=Yy(t.source),p={type:"SizeChanged",redoObject:Yy(h),undoObject:Yy(this.undoElement),category:"Internal",childTable:this.childTable},n||(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(p),h.nodes[0]&&h.nodes[0].processId&&(f={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(t.source),undoObject:this.undoParentElement,category:"Internal"},this.commandHandler.addHistoryEntry(f)),this.commandHandler.endGroupAction())),this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),[2,!this.blocked]}})})},t.prototype.mouseMove=function(t){var n;if(e.prototype.mouseMove.call(this,t),n=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX===n.wrapper.offsetX&&this.undoElement.offsetY===n.wrapper.offsetY){var i={source:t.source,state:"Start",oldValue:{offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},newValue:this.currentElement,cancel:!1};Ka()||this.commandHandler.triggerEvent(jc.sizeChange,i)}this.currentPosition=t.position;var o={x:this.currentPosition.x-this.startPosition.x,y:this.currentPosition.y-this.startPosition.y};o=ob(-this.currentElement.wrapper.rotateAngle,void 0,void 0,o),o=this.getChanges(o),this.commandHandler.removeSnap();var r=this.updateSize(t.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(r.width,r.height,this.corner,this.startPosition,this.currentPosition,n),this.commandHandler.canEnableDefaultTooltip()){var a=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,a,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"W:"+Math.round(e.wrapper.bounds.width)+" H:"+Math.round(e.wrapper.bounds.height)},t.prototype.getChanges=function(e){switch(this.corner){case"ResizeEast":return{x:e.x,y:0};case"ResizeSouthEast":return e;case"ResizeSouth":return{x:0,y:e.y};case"ResizeNorth":return{x:0,y:-e.y};case"ResizeNorthEast":return{x:e.x,y:-e.y};case"ResizeNorthWest":return{x:-e.x,y:-e.y};case"ResizeWest":return{x:-e.x,y:0};case"ResizeSouthWest":return{x:-e.x,y:e.y}}return e},t.prototype.scaleObjects=function(e,t,n,i,o,r){r instanceof uy&&1===r.nodes.length&&r.nodes[0].constraints&_c.AspectRatio&&("ResizeWest"===n||"ResizeEast"===n||"ResizeNorth"===n||"ResizeSouth"===n?1===t&&1===e||(t=e=Math.max(1===t?0:t,1===e?0:e)):t=e=i!==o?Math.max(t,e):0);var a={offsetX:r.offsetX,offsetY:r.offsetY,width:r.width,height:r.height};this.blocked=this.commandHandler.scaleSelectedItems(e,t,this.getPivot(this.corner));var l,s,d={offsetX:r.offsetX,offsetY:r.offsetY,width:r.width,height:r.height};return l={source:r,state:"Progress",oldValue:a,newValue:d,cancel:!1},s={source:xv(r),state:"Progress",oldValue:xv(a),newValue:xv(d),cancel:l.cancel},Ka()||this.commandHandler.triggerEvent(jc.sizeChange,s),(s.cancel||this.canCancel)&&this.commandHandler.scaleSelectedItems(1/e,1/t,this.getPivot(this.corner)),this.blocked},t}(Ib),Bb=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.sourceObject=n,i}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setFocus()},t.prototype.mouseMove=function(t){var n;if(e.prototype.mouseMove.call(this,t),this.drawingObject||(this.drawingObject=this.commandHandler.drawObject({offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y})),this.inAction&&!1===jd.equals(this.currentPosition,this.prevPosition)){var i=Zd.toBounds([this.prevPosition,this.currentPosition]);(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,i))&&this.commandHandler.updateNodeDimension(this.drawingObject,i)}return n},t.prototype.mouseUp=function(t){this.checkPropertyValue();var n=Zd.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,n),this.drawingObject&&this.drawingObject instanceof ry&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Ib),jb=function(e){function t(t,n,i){var o=e.call(this,t,n)||this;return o.sourceObject=i,o}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){return Ab(this,void 0,void 0,function(){return Ob(this,function(n){return e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setFocus(),[2]})})},t.prototype.mouseMove=function(t){return this.commandHandler.enableServerDataBinding(!1),this.inAction&&(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject({sourcePoint:this.currentPosition,targetPoint:this.currentPosition})),t.source=this.drawingObject,(t.target&&t.target instanceof ry||t.actualObject&&t.sourceWrapper&&yv(t.actualObject,t.sourceWrapper))&&("ConnectorTargetEnd"!==this.endPoint||ng(t.target))&&this.commandHandler.connect(this.endPoint,t),this.endPoint="ConnectorTargetEnd"),this.inAction||(this.commandHandler.updateSelector(),t.source&&t.sourceWrapper&&this.commandHandler.renderHighlighter(t,!0)),e.prototype.mouseMove.call(this,t),this.commandHandler.enableServerDataBinding(!0),!this.blocked},t.prototype.mouseUp=function(t){return Ab(this,void 0,void 0,function(){return Ob(this,function(n){return this.commandHandler.enableServerDataBinding(!1),this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof zf&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),this.inAction=!1,this.commandHandler.enableServerDataBinding(!0),e.prototype.mouseUp.call(this,t),[2]})})},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Mb),zb=function(e){function t(t){return e.call(this,t,!0)||this}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.commandHandler.clearSelection(),t.source||(this.drawingNode=this.commandHandler.drawObject({shape:{type:"Text"},offsetX:this.currentPosition.x,offsetY:this.currentPosition.y}))},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.drawingNode?(this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent"):(this.drawingNode=this.commandHandler.drawObject({shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,offsetY:this.currentPosition.y}),this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent"),this.inAction&&!1===jd.equals(this.currentPosition,this.prevPosition)){var n=Zd.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=t.source,this.drawingNode&&(this.drawingNode instanceof ry||this.drawingNode instanceof zf)&&this.commandHandler.addText(this.drawingNode,this.currentPosition),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Ib),Ub=function(e){function t(t,n){var i=e.call(this,t)||this;return i.zooming=n,i}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setBlazorDiagramProps(!0)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction)if(this.zooming||!1!==jd.equals(this.currentPosition,this.prevPosition)){if(t.moveTouches&&t.moveTouches.length&&t.moveTouches.length>=2){var n=t.startTouches[0],i=t.startTouches[1],o=t.moveTouches[0],r=t.moveTouches[1],a=this.getDistance(o,r)/this.getDistance(n,i);this.commandHandler.zoom(a,0,0,t.position),this.updateTouch(n,o),this.updateTouch(i,r)}}else this.commandHandler.scroll(this.currentPosition.x-this.prevPosition.x,this.currentPosition.y-this.prevPosition.y,this.currentPosition);return this.commandHandler.dataBinding(),!this.blocked},t.prototype.mouseUp=function(t){this.commandHandler.setBlazorDiagramProps(!1),this.checkPropertyValue(),this.commandHandler.updatePanState(!1),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.getDistance=function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},t.prototype.updateTouch=function(e,t){e.pageX=t.pageX,e.pageY=t.pageY},t}(Ib),Fb=function(e){function t(t){return e.call(this,t,!0)||this}return Object(O.__extends)(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.commandHandler.initExpand(t),e.prototype.mouseUp.call(this,t)},t}(Ib),Gb=function(e){function t(t){return e.call(this,t,!0)||this}return Object(O.__extends)(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),window.open(t.sourceWrapper.hyperlink.link,"_blank").focus(),e.prototype.mouseUp.call(this,t)},t}(Ib),qb=function(e){function t(t){return e.call(this,t,!0)||this}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var n=void 0,i=this.drawingObject.shape;this.drawingObject.shape.points.push(n={x:(n=i.points[i.points.length-1]).x,y:n.y})}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var o={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};Ka()&&"Basic"===o.shape.type&&(o.shape.basicShape="Polygon"),this.drawingObject=this.commandHandler.drawObject(o)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var n=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(n.points[n.points.length-1].x=this.currentPosition.x,n.points[n.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=Ud(this.drawingObject.shape.points),this.inAction&&!1===jd.equals(this.currentPosition,this.prevPosition))){var i=Zd.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,i)}}return!0},t.prototype.mouseUp=function(t,n){this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},t}(Ib),Vb=function(e){function t(t){return e.call(this,t,!0)||this}return Object(O.__extends)(t,e),t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var n=this.drawingObject;n.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(n)}return!0},t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var n,i=this.drawingObject;(n=new kf(i,"segments",{type:"Straight"},!0)).point=this.currentPosition,i.segments[i.segments.length-1]=n}else this.drawingObject=this.commandHandler.drawObject({id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition})},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&this.drawingObject){var n=this.drawingObject;n.segments[n.segments.length-1].point={x:0,y:0},this.commandHandler.addObjectToDiagram(this.drawingObject)}this.endAction()},t.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},t}(Ib),Wb=function(e){function t(t){return e.call(this,t,!0)||this}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=Yy(t.source),this.annotationId=t.sourceWrapper.id,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var n=this.currentPosition.x-this.prevPosition.x,i=this.currentPosition.y-this.prevPosition.y,o=t.source;if(o instanceof ry){var r=Qd();ec(r,-o.rotateAngle,0,0);var a=$d(r,{x:n,y:i});n=a.x,i=a.y}return this.inAction&&(this.commandHandler.labelDrag(t.source,t.sourceWrapper,n,i),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var n=t.source;this.inAction=!1;var i={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:Yy(this.undoElement),category:"Internal",redoObject:Yy(n)};this.commandHandler.addHistoryEntry(i),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(Ib),Yb=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.corner=n,i}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){this.inAction=!0;var n=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.annotationId=t.source.wrapper.children[0].id,this.undoElement=Yy(n);var i=t.source.wrapper.children[0];this.initialBounds={x:i.offsetX,y:i.offsetY,width:i.actualSize.width,height:i.actualSize.height},e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),this.inAction&&this.resizeObject(t),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var n=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.inAction=!1;var i={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Yy(n),undoObject:Yy(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(i),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.resizeObject=function(e){var t,n,i,o=e.source.wrapper.children[0],r={x:o.offsetX,y:o.offsetY},a=o.rotateAngle;a=((a+=(t=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0])instanceof ry?t.rotateAngle:0)+360)%360;var l=Qd();ec(l,a,r.x,r.y);var s=this.corner.slice(5),d=this.updateSize(o,this.startPosition,this.currentPosition,s,this.initialBounds,a),c=o.offsetX-o.actualSize.width*o.pivot.x,u=o.offsetY-o.actualSize.height*o.pivot.y,h=this.getPivot(s),p=$d(l,h={x:c+o.actualSize.width*h.x,y:u+o.actualSize.height*h.y});d.x=p.x,d.y=p.y,i=d.height,this.commandHandler.labelResize(t,e.source.annotation,n=(n=d.width)<0?1:n,i=i<0?1:i,d,e.source),this.commandHandler.updateSelector()},t}(Ib),Xb=function(e){function t(t){return e.call(this,t,!0)||this}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.annotationId=t.source.wrapper.children[0].id,this.undoElement=Yy(t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0]),e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),t.source&&this.inAction&&(this.commandHandler.labelRotate(t.source.nodes[0]?t.source.nodes[0]:t.source.connectors[0],t.source.annotation,this.currentPosition,t.source),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Yy(t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0]),undoObject:Yy(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(Ib),Zb=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.endPoint=n,i}return Object(O.__extends)(t,e),t.prototype.mouseDown=function(t){var n,i=!0;if(t.source&&t.source.connectors&&(n=t.source.connectors[0]),t.info&&(i=t.info.ctrlKey&&"Orthogonal"!==t.actualObject.type),n&&i){this.inAction=!0,this.undoElement=Yy(t.source),e.prototype.mouseDown.call(this,t);for(var o=0;o<n.segments.length;o++){var r=n.segments[o];if("OrthoThumb"===this.endPoint)for(var a=0;a<r.points.length-1;a++){var l={x:0,y:0};l.x=(r.points[a].x+r.points[a+1].x)/2,l.y=(r.points[a].y+r.points[a+1].y)/2,Sb(this.currentPosition,l,30)&&(this.selectedSegment=r,this.segmentIndex=a)}else Sb(this.currentPosition,r.point,10)&&(this.selectedSegment=r)}}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var n=this.currentPosition.y-this.prevPosition.y,i=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var o=void 0;if(t.source&&t.source.connectors&&(o=t.source.connectors[0]),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==i||0!==n)){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(o,this.selectedSegment,this.currentPosition,this.segmentIndex);else{var r=this.currentPosition.x-this.selectedSegment.point.x,a=this.currentPosition.y-this.selectedSegment.point.y,l=o.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(o,r,a,!1,l)}this.commandHandler.updateSelector()}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){var n,i,o;if(t.source&&t.source.connectors&&(i={segments:(n=t.source.connectors[0]).segments}),t&&t.source&&t.info&&t.info.ctrlKey&&t.info.shiftKey&&"Straight"===n.type)this.addOrRemoveSegment(n,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var r=n.segments.indexOf(this.selectedSegment),a=n.segments[r-1],l=n.segments[r+1];if(r===n.segments.length-2&&this.updateLastSegment(n,this.selectedSegment))n.segments.splice(n.segments.length-2,1);else if(a&&Math.abs(a.length)<5)1!==r&&this.removePrevSegment(n,r);else if(l){var s=jd.distancePoints(l.points[0],l.points[1]);Math.abs(l.length||0===l.length?l.length:s)<=5&&this.removeNextSegment(n,r)}this.commandHandler.updateEndPoint(n,i)}this.undoElement&&(o=Yy(t.source),this.commandHandler.addHistoryEntry({type:"SegmentChanged",redoObject:o,undoObject:this.undoElement,category:"Internal"})),e.prototype.mouseUp.call(this,t)},t.prototype.removePrevSegment=function(e,t){var n=e.segments[t-2],i=e.segments[t+1];if(!((i.length||0===i.length?i.length:jd.distancePoints(i.points[0],i.points[1]))<=5)){var o=e.segments.slice(t-1,t+1),r={element:e,removeSegments:o,type:"Removal",cancel:!1};if(Ka()&&(r={element:xv(e),removeSegments:xv(o),type:"Removal",cancel:r.cancel}),this.commandHandler.triggerEvent(jc.segmentCollectionChange,r),!r.cancel){var a=e.segments[t+1];e.segments.splice(t-1,2);var l=this.selectedSegment;"Left"===l.direction||"Right"===l.direction?(n.points[n.points.length-1].x=a.points[0].x,a.points[0].y=n.points[n.points.length-1].y):(n.points[n.points.length-1].y=a.points[0].y,a.points[0].x=n.points[n.points.length-1].x),(l.length||0===l.length)&&this.findSegmentDirection(n),this.findSegmentDirection(a)}}},t.prototype.findSegmentDirection=function(e){e.direction&&(e.length||0===e.length)&&(e.length=jd.distancePoints(e.points[0],e.points[e.points.length-1]),e.direction=jd.direction(e.points[0],e.points[e.points.length-1]))},t.prototype.removeNextSegment=function(e,t){var n,i,o=this.selectedSegment,r=e.segments[t-1],a=e.segments[t+2],l=e.segments[t+1];if(l.length||0===l.length?(i={element:e,removeSegments:n=e.segments.slice(t,2),type:"Removal",cancel:!1},i={element:xv(e),removeSegments:xv(n),type:"Removal",cancel:!1},Ka()&&(i={element:xv(e),removeSegments:xv(n),type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(jc.segmentCollectionChange,i),i.cancel||(e.segments.splice(t,2),"Top"===o.direction||"Bottom"===o.direction?(a.points[0].y=o.points[0].y,r.points[r.points.length-1].x=a.points[0].x):(a.points[0].x=o.points[0].x,r.points[r.points.length-1].y=a.points[0].y))):(i={element:e,removeSegments:n=e.segments.slice(t+1,1),type:"Removal",cancel:!1},Ka()&&(i={element:e,removeSegments:n,type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(jc.segmentCollectionChange,i),i.cancel||(e.segments.splice(t+1,1),"Top"===o.direction||"Bottom"===o.direction?r.points[r.points.length-1].x=l.points[l.points.length-1].x:r.points[r.points.length-1].y=l.points[l.points.length-1].y,this.findSegmentDirection(r),o.length=o.direction=null)),r&&a&&!i.cancel&&(r.length=jd.distancePoints(r.points[0],a.points[0]),r.direction=jd.direction(r.points[0],a.points[0]),a.length||0===a.length)){a.length=jd.distancePoints(r.points[r.points.length-1],a.points[a.points.length-1]);var s=r.points,d=a.points;a.direction=jd.direction(s[s.length-1],d[d.length-1])}},t.prototype.addOrRemoveSegment=function(e,t){for(var n,i,o={segments:e.segments},r=0;r<e.segments.length;r++)Sb(t,(a=e.segments[r]).point,e.hitPadding)&&(i=r,n=!0);if(n&&void 0!==i){if(e.segments&&e.segments[i]&&"Straight"===e.segments[i].type){var a=e.segments[i],l=e.segments[i+1];l&&(e.segments.splice(i,1),l.points[0]=a.points[0])}}else{this.commandHandler.enableServerDataBinding(!1);var s=this.findIndex(e,t);if(e.segments&&e.segments[s]&&"Straight"===e.segments[s].type){a=e.segments[s];var d=new kf(e,"segments",{type:"Straight",point:t},!0);d.points[0]=a.points[0],d.points[1]=t,a.points[0]=t,e.segments.splice(s,0,d),n=!0}this.commandHandler.enableServerDataBinding(!0)}n&&this.commandHandler.updateEndPoint(e,o)},t.prototype.findIndex=function(e,t){for(var n=[],i=0;i<e.segments.length;i++){var o=e.segments[i],r=Zd.toBounds([o.points[0],o.points[1]]);r.Inflate(e.hitPadding),r.containsPoint(t)&&n.push(o)}if(1===n.length)return e.segments.indexOf(n[0]);var a=void 0,l=void 0,s=void 0,d=void 0;for(i=0;i<n.length;i++)d=n[i],a=Math.abs((t.y-d.points[0].y)/(d.points[1].y-t.y)-(t.x-d.points[0].x)/(d.points[1].x-t.x)),0===i&&(l=a,s=0),a<l&&(l=a,s=i);return e.segments.indexOf(n[s])},t.prototype.dragOrthogonalSegment=function(e,t,n,i){var o={x:0,y:0},r={segments:e.segments};o.x=(t.points[i].x+t.points[i+1].x)/2,o.y=(t.points[i].y+t.points[i+1].y)/2;var a=n.y-o.y,l=n.x-o.x,s=e.segments.indexOf(t),d=!1;return t.points[0].y.toFixed(2),t.points[1].y.toFixed(2),-1!==s&&(0===s&&1===e.segments.length&&2===t.points.length?(s=this.addSegments(e,t,l,a,s),d=!0):s!==e.segments.length-1||null!==t.direction&&null!==t.length?0===s&&(s=this.insertFirstSegment(e,t,l,a,s),d=!0):(s=this.addTerminalSegment(e,t,l,a,i),d=!0),s&&(d&&(this.selectedSegment=t=e.segments[s],this.segmentIndex=0),this.updateAdjacentSegments(e,s,l,a),this.commandHandler.updateEndPoint(e,r))),!0},t.prototype.addSegments=function(e,t,n,i,o){var r,a=[],l=jd.distancePoints(t.points[0],t.points[1]),s=jd.direction(t.points[0],t.points[1]);a.push(new Af(e,"segments",{type:"Orthogonal",direction:s,length:l/4},!0)),a.push(new Af(e,"segments",{type:"Orthogonal",direction:t.points[0].y===t.points[1].y?i>0?"Bottom":"Top":n>0?"Right":"Left",length:t.points[0].x===t.points[1].x?i:n},!0)),a.push(new Af(e,"segments",{type:"Orthogonal",direction:s,length:l/2},!0));var d={element:e,addSegments:a,type:"Addition",cancel:!1};return Ka()&&(d={addSegments:xv(a),type:"Addition",cancel:d.cancel,element:xv(e)}),this.commandHandler.triggerEvent(jc.segmentCollectionChange,d),d.cancel||(e.segments=a.concat(e.segments),r=o+2),r},t.prototype.insertFirstSegment=function(e,t,n,i,o){var r,a,l,s,d=[];if(e.sourcePortID&&t.length&&e.segments[0].points.length>2)for(var c=void 0,u=0;u<t.points.length-1;u++){var h=jd.distancePoints(t.points[u],t.points[u+1]),p=jd.direction(t.points[u],t.points[u+1]);0===(s=new Af(e,"segments",{type:"Orthogonal",direction:p,length:h},!0)).length&&(s.direction=!c||"Top"!==c.direction&&"Bottom"!==c.direction?i>0?"Bottom":"Top":n>0?"Right":"Left"),c=s,d.push(s)}else d.push(new Af(e,"segments",{type:"Orthogonal",direction:t.direction,length:t.length/3},!0)),"Bottom"===t.direction||"Top"===t.direction?(a=Math.abs(n),r=n>0?"Right":"Left"):(a=Math.abs(i),r=i>0?"Bottom":"Top"),s=new Af(e,"segments",{type:"Orthogonal",direction:r,length:a},!0),d.push(s);var f={element:e,addSegments:d,type:"Addition",cancel:!1};if(Ka()&&(f={element:xv(e),addSegments:xv(d),type:"Addition",cancel:f.cancel}),this.commandHandler.triggerEvent(jc.segmentCollectionChange,f),!f.cancel){if(e.sourcePortID&&t.length&&e.segments[0].points.length>2)e.segments.splice(0,1),l=1;else{var g=e.segments[1];g&&g.length&&(g.length=r!==g.direction?g.length+a:g.length-a),l=2,t.length=2*t.length/3}e.segments=d.concat(e.segments)}return l},t.prototype.updateAdjacentSegments=function(e,t,n,i){var o=e.segments[t],r=o.points[o.points.length-1],a=!0;"Orthogonal"===o.type&&(o.points[0]=o.points[0],o.points[o.points.length-1]=r,e.segments[t-1]&&(a=this.updatePreviousSegment(n,i,e,t)),e.segments.length-1>t&&a&&this.updateNextSegment(e,o,e.segments[t+1],n,i))},t.prototype.addTerminalSegment=function(e,t,n,i,o){var r,a,l,s,d=e.segments.indexOf(t),c=[],u=e.segments.pop(),h=e.segments[e.segments.length-1];r=h&&"Orthogonal"===h.type?h:null;for(var p=0;p<t.points.length-2;p++)l=jd.distancePoints(t.points[p],t.points[p+1]),s=jd.direction(t.points[p],t.points[p+1]),a=new Af(e,"segments",{type:"Orthogonal",length:l,direction:s},!0),c.push(a),r=a;var f,g=o;2!==t.points.length&&g!==t.points.length-2||(r&&(r.length+=5),void 0===g)||(l=2*jd.distancePoints(t.points[t.points.length-2],t.points[t.points.length-1])/3,s=jd.direction(t.points[t.points.length-2],t.points[t.points.length-1]),f=new Af(e,"segments",{type:"Orthogonal",length:l,direction:s}),c.push(f));var m,v=new Af(e,"segments",{type:"Orthogonal"},!0);return c.push(v),m={element:xv(e),addSegments:xv(c),type:"Addition",cancel:!1},Ka()&&(m={element:xv(e),addSegments:xv(c),type:"Addition",cancel:!1}),this.commandHandler.triggerEvent(jc.segmentCollectionChange,m),m.cancel?e.segments.push(u):(e.segments=e.segments.concat(c),d+=o),this.commandHandler.updateEndPoint(e),d},t.prototype.updatePortSegment=function(e,t,n,i,o){if(1===n&&2===e.points.length&&e.length<0){var r,a=t.sourceWrapper.corners,l=t.segments[n],s=t.segments[n+1],d=void 0,c=[];d=new Af(t,"segments",{type:"Orthogonal",length:13,direction:e.direction}),c.push(d),d=new Af(t,"segments",{type:"Orthogonal",length:r="Left"===l.direction?l.points[0].x-(a.middleLeft.x-20):"Right"===l.direction?a.middleRight.x+20-l.points[0].x:"Bottom"===l.direction?a.bottomCenter.y+20-l.points[0].y:l.points[0].y-(a.topCenter.y-20),direction:l.direction}),c.push(d),l.length=l.length-r,s&&s.length&&s.direction&&(s.direction===e.direction?s.length-=13:s.direction===Wu(e.direction)&&(s.length+=13)),t.segments=c.concat(t.segments),this.selectedSegment=t.segments[3]}},t.prototype.updatePreviousSegment=function(e,t,n,i){var o=n.segments[i],r=n.segments[i-1];r.points[r.points.length-1]=o.points[0];var a=!n.sourceID||""!==n.sourcePortID,l=!0;return"Orthogonal"===r.type&&("Bottom"===r.direction?r.length+=t:"Top"===r.direction?r.length-=t:"Right"===r.direction?r.length+=e:r.length-=e,""!==n.sourcePortID&&r.length<0?this.updatePortSegment(r,n,i,e,t):n.sourceID&&""===n.sourcePortID&&r.length<0&&1===i&&(l=!1,this.updateFirstSegment(n,o)),a&&this.changeSegmentDirection(r)),l},t.prototype.changeSegmentDirection=function(e){e.length<0&&(e.direction=Wu(e.direction),e.length*=-1)},t.prototype.updateNextSegment=function(e,t,n,i,o){n.points[0]=t.points[t.points.length-1],n&&"Orthogonal"===n.type&&(n.length||0===n.length)&&("Left"===n.direction||"Right"===n.direction?0!==i&&(n.length="Right"===n.direction?n.length-i:n.length+i,(n.length||0===n.length)&&this.changeSegmentDirection(n)):0!==o&&(n.length="Bottom"===n.direction?n.length-o:n.length+o,(n.length||0===n.length)&&this.changeSegmentDirection(n)))},t.prototype.updateFirstSegment=function(e,t){var n,i=e.segments.indexOf(t),o=!1,r=e.segments[i],a=e.segments[i-1],l={segments:e.segments};if(a.length<0&&e.sourceID){var s=e.sourceWrapper.corners,d=[],c=!1;this.changeSegmentDirection(r);var u=e.segments[i+1],h=e.segments[i+2];switch(u&&this.changeSegmentDirection(u),h&&this.changeSegmentDirection(h),a.direction){case"Top":case"Bottom":n=r.length>0&&"Left"===r.direction?s.middleLeft:s.middleRight,r.length>s.width/2?Math.abs(a.length)<s.height/2&&(a.length=jd.distancePoints(s.center,a.points[a.points.length-1]),r.points[0].x=n.x,r.length=jd.distancePoints(r.points[0],r.points[r.points.length-1]),r.length-=20,o=!0):(u&&u.direction&&u.length&&(u.points[0].y=n.y,u.points[0].x=u.points[u.points.length-1].x="Right"===r.direction?n.x+20:n.x-20),o=!0,c=!0);break;case"Left":case"Right":n=r.length>0&&"Top"===r.direction?s.topCenter:s.bottomCenter,r.length>s.height/2?Math.abs(a.length)<s.width/2&&(a.length=jd.distancePoints(s.center,a.points[a.points.length-1]),r.points[0].y=n.y,r.length=jd.distancePoints(r.points[0],r.points[r.points.length-1]),r.length-=20,o=!0):(u&&u.direction&&u.length&&(u.points[0].x=n.x,u.points[0].y=u.points[u.points.length-1].y="Bottom"===r.direction?n.y+20:n.y-20),o=!0,c=!0)}this.changeSegmentDirection(a),this.changeSegmentDirection(r),o&&(d.push(new Af(e,"segments",{type:"Orthogonal",direction:r.direction,length:20},!0)),c&&(u&&u.direction&&u.length&&(u.length=jd.distancePoints(u.points[0],u.points[u.points.length-1])),h&&h.direction&&h.length&&(h.length=jd.distancePoints(u.points[u.points.length-1],h.points[h.points.length-1])),e.segments.splice(i-1,2)),e.segments=d.concat(e.segments)),this.selectedSegment=c?e.segments[i-1]:e.segments[i+1],this.commandHandler.updateEndPoint(e,l)}},t.prototype.updateLastSegment=function(e,t){if(e.targetID&&""===e.targetPortID){var n=void 0,i=void 0,o=void 0,r=void 0,a=e.targetWrapper.corners,l=t.points[0],s=t.points[t.points.length-1];return"Right"===t.direction||"Left"===t.direction?(n={x:l.x,y:l.y},i={x:"Left"===t.direction?s.x-a.width/2:s.x+a.width/2,y:s.y},o={x:a.center.x,y:a.center.y-a.height},r={x:a.center.x,y:a.center.y+a.height}):(n={x:l.x,y:l.y},i={x:s.x,y:"Bottom"===t.direction?s.y+a.height/2:s.y-a.height/2},o={x:a.center.x-a.width,y:a.center.y},r={x:a.center.x+a.width,y:a.center.y}),Rm({x1:n.x,y1:n.y,x2:i.x,y2:i.y},{x1:o.x,y1:o.y,x2:r.x,y2:r.y}).enabled}return!1},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ConnectorEditingTool"},t}(Ib),Jb=function(){function e(e,t){this.currentAction="None",this.previousAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.keyArgs={},this.diagram=e,this.objectFinder=new Kb,this.commandHandler=t}return Object.defineProperty(e.prototype,"action",{get:function(){return this.currentAction},set:function(e){e!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~Oc.DrawOnce,this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===e||"LabelRotate"===e?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=e,this.diagram.diagramActions="None"!==this.currentAction&&"Select"!==this.currentAction&&!(this.diagram.diagramActions&Mc.TextEdit)||this.commandHandler.isUserHandle(this.currentPosition)?this.diagram.diagramActions|Mc.ToolAction:this.diagram.diagramActions&~Mc.ToolAction,this.diagram.setCursor(this.diagram.getCursor(e,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blocked",{get:function(){return this.isBlocked},set:function(e){this.isBlocked=e,this.diagram.setCursor(this.blocked?"not-allowed":this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),e.prototype.getMousePosition=function(e){var t,n,i;-1!==e.type.indexOf("touch")?(n=(t=e).changedTouches[0].clientX,i=t.changedTouches[0].clientY):(n=e.clientX,i=e.clientY);var o=new Bd;o=Vf(this.diagram);var r=this.diagram.element.getBoundingClientRect();return n=n+this.diagram.diagramCanvas.scrollLeft-r.left-o.width,i=i+this.diagram.diagramCanvas.scrollTop-r.top-o.height,n/=this.diagram.scroller.transform.scale,i/=this.diagram.scroller.transform.scale,{x:n-=this.diagram.scroller.transform.tx,y:i-=this.diagram.scroller.transform.ty}},e.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){t.updateViewPortSize(t.diagram.element)},300),!1},e.prototype.updateViewPortSize=function(e){var t=document.getElementById(e.id);if(t){var n=t.getBoundingClientRect();this.diagram.scroller.setViewPortSize(n.width,n.height);var i=new Bd;i=Vf(this.diagram);var o=this.diagram.getSizeValue(this.diagram.width,i.width),r=this.diagram.getSizeValue(this.diagram.height,i.height);this.diagram.diagramCanvas.style.width=o,this.diagram.diagramCanvas.style.height=r,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&Gf(this.diagram)}},e.prototype.canHideResizers=function(){return(this.tool instanceof Nb||this.tool instanceof Lb)&&this.isMouseDown},e.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var e=[];e=e.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=!(this.eventArgs&&this.eventArgs.source&&!Zf(this.eventArgs.source))&&this.isMouseDown&&1===e.length&&this.tool instanceof Pb&&!Zf(e[0])}},e.prototype.isForeignObject=function(e,t){var n=e;if(n)for(;null!==n.parentNode;){if("string"==typeof n.className&&(!t&&-1!==n.className.indexOf("foreign-object")||t&&-1!==n.className.indexOf("e-diagram-text-edit")))return n;n=n.parentNode}return null},e.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},e.prototype.renderUmlHighLighter=function(e){this.diagram.commandHandler.removeStackHighlighter();var t=this.diagram.selectedItems.nodes[0];if(t&&t.container&&"Stack"===t.container.type&&"UmlClassifier"===t.shape.type&&!t.wrapper.bounds.containsPoint(this.currentPosition)){var n=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(n,this.action,this.inAction);i&&i.parentId&&i.parentId===t.id&&Gg(i.wrapper,"Vertical"===this.diagram.nameTable[i.parentId].container.orientation,e.position,this.diagram,!0)}},e.prototype.isDeleteKey=function(e,t){return navigator.platform.match("Mac")&&"Backspace"===e&&"delete"===t},e.prototype.isMouseOnScrollBar=function(e){var t=e.offsetX,n=e.offsetY,i=this.diagram.diagramCanvas,o=i.offsetHeight,r=i.offsetWidth;return!!(o<i.scrollHeight&&Zd.toBounds([{x:r-17,y:0},{x:r,y:0},{x:r-17,y:o},{x:r,y:o}]).containsPoint({x:t,y:n}))||!!(r<i.scrollWidth&&Zd.toBounds([{x:0,y:o-17},{x:r,y:o-17},{x:0,y:o},{x:r,y:o}]).containsPoint({x:t,y:n}))},e.prototype.updateVirtualization=function(){var e,t=this;e=setInterval(function(n){t.diagram.removeVirtualObjects(e)},50),setTimeout(function(){t.diagram.deleteVirtualObject=!0},50)},e.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var e=0;e<this.diagram.selectedItems.userHandles.length;e++)this.previousAction&&this.diagram.selectedItems.userHandles[e]&&(this.checkUserHandleEvent(jc.onUserHandleMouseLeave),this.previousAction="None")},e.prototype.checkUserHandleEvent=function(e){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var t=e===jc.onUserHandleMouseLeave?this.previousAction:this.action,n={element:void 0},i=0;i<this.diagram.selectedItems.userHandles.length;i++)if(t===this.diagram.selectedItems.userHandles[i].name||e===jc.onUserHandleMouseUp&&"Select"===t){n.element=this.diagram.selectedItems.userHandles[i],e===jc.onUserHandleMouseEnter&&(this.previousAction=this.action),e===jc.onUserHandleMouseDown&&(this.userHandleObject=this.diagram.selectedItems.userHandles[i].name);var o=document.getElementById(this.diagram.selectedItems.userHandles[i].name+"_userhandle");e===jc.onUserHandleMouseUp?this.commandHandler.isUserHandle(this.currentPosition)&&o&&o.id===this.userHandleObject+"_userhandle"&&this.diagram.triggerEvent(e,n):this.diagram.triggerEvent(e,n)}},e.prototype.mouseDown=function(e){var t;if(this.focus=!0,t=e.touches,this.isMouseOnScrollBar(e))return this.isScrolling=!0,void e.preventDefault();if(this.checkUserHandleEvent(jc.onUserHandleMouseDown),!this.checkEditBoxAsTarget(e)&&gg(this.diagram)||ug(this.diagram)&&!fg(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,Cc.Hover,!0),!(this.tool instanceof qb||this.tool instanceof Vb)||2!==e.button&&2!==e.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof qb||this.tool instanceof Vb))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(e)&&(this.diagram.endEdit(),this.diagram.textEditing=!1);var n=void 0,i=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),o=this.objectFinder.findObjectUnderMouse(this.diagram,i,this.action,this.inAction,this.eventArgs,this.currentPosition),r=null;null!==o&&(r=this.diagram.findElementUnderMouse(o,this.currentPosition))&&(n=this.commandHandler.findTarget(r,o)),this.action=this.diagram.findActionToBeDone(o,r,this.currentPosition,n);var a=this.isMetaKey(e);a&&e.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!a&&!e.shiftKey||ug(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),(a||e.shiftKey)&&(this.eventArgs.info=a&&e.shiftKey?{ctrlKey:a,shiftKey:e.shiftKey}:{ctrlKey:!0}),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===e.type&&(t&&t.length>=2&&(this.touchStartList=Ry(this.touchStartList,0,t)),t||e.preventDefault())}else xv(this.diagram),xv(this.currentPosition),xv(this.eventArgs.actualObject),this.inAction=!1,this.tool.mouseUp(this.eventArgs);this.isForeignObject(e.target)||this.isForeignObject(e.target,!0)||t||e.preventDefault()},e.prototype.mouseMoveExtend=function(e,t){(this.tool instanceof qb||this.tool instanceof Vb)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(e):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var n=!(this.eventArgs.target instanceof ry&&t instanceof ry);this.tool instanceof Mb&&this.diagram.updatePortVisibility(this.hoverElement instanceof ry?this.hoverElement:this.hoverNode,Cc.Connect|Cc.Hover,n),this.hoverElement instanceof ry&&this.hoverNode instanceof ry&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,Cc.Connect|Cc.Hover,!0),this.hoverElement=n?null:t,this.hoverNode=n?null:t},e.prototype.checkAction=function(e){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof Gc||this.eventArgs.sourceWrapper instanceof gf)){var t=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!_b(this.diagram,t,!1,this.eventArgs.sourceWrapper)&&Zf(t)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else Zf(e)&&Xf(e)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!_b(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof uy&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),e instanceof zf&&(!(e instanceof zf)||Sb(this.currentPosition,e.sourcePoint,e.hitPadding)||Sb(this.currentPosition,e.targetPoint,e.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},e.prototype.isSwimlaneElements=function(e){return!e||!(e.isLane||e.isPhase||e.isHeader)},e.prototype.mouseMove=function(e,t){var n,i;if(this.focus=!0,this.isScrolling)e.preventDefault();else if(gg(this.diagram)||ug(this.diagram)&&!fg(this.diagram)){this.currentPosition=this.getMousePosition(e);var o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction);i=this.currentPosition,(n=this.diagram).rulerSettings.showRulers&&(n.hRuler.drawRulerMarker(n.hRuler.element,i,n.scroller.horizontalOffset),n.vRuler.drawRulerMarker(n.vRuler.element,i,n.scroller.verticalOffset));var a=!1,l=void 0;if("touchmove"===e.type&&(t=e.touches)&&t.length>1&&(this.touchMoveList=Ry(this.touchMoveList,0,t),"PinchZoom"!==this.action&&(a=!0)),!1===jd.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||a){this.eventArgs={};var s=null;if(null!==r){if(s=this.diagram.findElementUnderMouse(r,this.currentPosition),r!==this.hoverElement){var d=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==d&&this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,Cc.Hover,!0),r instanceof ry&&(this.hoverNode=r);var c=!0;!this.isSwimlaneElements(r)&&this.hoverElement&&this.isSwimlaneElements(this.hoverElement)&&(c=!1),this.hoverElement=c?r:this.hoverElement,c?this.elementEnter(this.currentPosition,!1):this.hoverElement=r}else this.hoverElement||this.hoverElement!==r||this.elementEnter(this.currentPosition,!0);s&&(l=this.commandHandler.findTarget(s,r))}this.action=this.diagram.findActionToBeDone(r,s,this.currentPosition,l),this.checkUserHandleEvent(jc.onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof jb||this.tool instanceof Vb||this.tool instanceof qb?this.tool.mouseMove(this.eventArgs):t&&this.tool instanceof Ub&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var u=!1;(!this.hoverElement||this.tool instanceof Ub||!(r instanceof ry)||!this.isSwimlaneElements(r)||0!==this.diagram.selectedItems.nodes.length&&_b(this.diagram,this.hoverElement))&&(u=!0),this.diagram.updatePortVisibility(this.hoverElement,Cc.Hover,u);var h=this.getContent();null===r&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&h&&(this.hoverElement=null,this.elementLeave()),a=!1}else{this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!_b(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof uy&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),(e.ctrlKey||e.shiftKey)&&(this.eventArgs.info=e.ctrlKey&&e.shiftKey?{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey}:{ctrlKey:!0}),this.checkAction(r);var p=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,p),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|Mc.Interactions),this.mouseMoveExtend(e,r)}this.prevPosition=this.currentPosition,this.isForeignObject(e.target,!0)||e.preventDefault()}}},e.prototype.getContent=function(){return this.hoverElement instanceof ry&&this.hoverElement.constraints&_c.Tooltip||this.hoverElement instanceof zf&&this.hoverElement.constraints&Tc.Tooltip?this.hoverElement.tooltip.content:this.diagram.tooltip.content},e.prototype.checkAutoScroll=function(e){var t=this.startAutoScroll(e);if(!t&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(t){if((this.tool instanceof Bb||this.tool instanceof jb||this.tool instanceof Nb||this.tool instanceof Hb||this.tool instanceof Pb)&&this.inAction){var n=this;this.diagram.scrollSettings.canAutoScroll&&t&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval(function(i){n.doAutoScroll(t,e,100)},100))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},e.prototype.mouseUp=function(e){var t;if(this.checkUserHandleEvent(jc.onUserHandleMouseUp),"SVG"===this.diagram.mode&&sg(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Nc.DrawSelectorBorder),t=e.touches,this.isScrolling)return this.isScrolling=!1,void e.preventDefault();if(!this.checkEditBoxAsTarget(e)&&gg(this.diagram)||ug(this.diagram)&&!fg(this.diagram)){if(this.tool&&(!(this.tool instanceof qb||this.tool instanceof Vb)||(this.tool instanceof qb||this.tool instanceof Vb)&&2===e.detail)){if(!this.isForeignObject(e.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var n=this.diagram.findObjectsUnderMouse(this.currentPosition),i=this.diagram.findObjectUnderMouse(n,this.action,this.inAction),o=!0;!e.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===e.which&&!(this.diagram.diagramActions&Mc.PreventClearSelection)&&(o=!1,this.commandHandler.clearSelection()),_b(this.diagram,i)&&o||this.commandHandler.selectObjects([i])}var r=!1,a=this.updateContainerProperties(),l=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(e),this.diagram.selectedObject.helperObject&&(l=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof Gb)){this.eventArgs.position=this.currentPosition;var s=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,s);var d=this.isMetaKey(e);if((d||e.shiftKey)&&(this.eventArgs.info=d&&e.shiftKey?{ctrlKey:d,shiftKey:e.shiftKey}:{ctrlKey:!0}),this.diagram.diagramActions&Mc.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~Mc.Interactions),this.eventArgs.clickCount=e.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof Nb||this.tool instanceof Hb)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var c=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);c&&c.isLane&&(this.commandHandler.isContainer=!0)}(r=this.diagram.lineRoutingModule&&this.diagram.nameTable.helper&&this.eventArgs.target&&this.eventArgs.target.isLane&&(this.eventArgs.source instanceof uy&&this.eventArgs.source.nodes.length>0&&""===this.eventArgs.source.nodes[0].parentId||""===this.eventArgs.source.parentId))&&(this.diagram.diagramActions=this.diagram.diagramActions|Mc.PreventLaneContainerUpdate),this.tool.mouseUp(this.eventArgs,a.isPreventHistory)}else this.tool.mouseUp(this.eventArgs),!this.diagram.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.diagram.contextMenuModule.contextMenu.open(e.pageY,e.pageX,this.diagram.element),this.diagram.checkMenu=!1);a.hasStack&&this.diagram.endGroupAction()}if(l&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),2!==this.eventArgs.clickCount&&(this.commandHandler.updateSelectedNodeProperties(this.eventArgs.source),r)){this.diagram.diagramActions=this.diagram.diagramActions&~Mc.PreventLaneContainerUpdate;var u=this.eventArgs.source instanceof uy?this.eventArgs.source.nodes:[this.eventArgs.source];if(u)for(var h=0;h<u.length;h++)u[h].container||(this.commandHandler.dropChildToContainer(this.eventArgs.target,u[h]),this.commandHandler.renderContainerHelper(u[h]))}if(this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0},this.diagram.diagramActions&Mc.PublicMethod&&this.diagram.constraints&Ac.LineRouting&&(this.diagram.diagramActions=this.diagram.diagramActions&~Mc.PublicMethod)),this.blocked=!1,this.hoverElement){var p=Cc.Connect;_b(this.diagram,this.hoverElement)&&(p|=Cc.Hover),this.diagram.updatePortVisibility(this.hoverElement,p,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof zb||(this.tool=null)}t||e.preventDefault(),this.diagram.currentDrawingObject=void 0;var f=this.diagram.selectedItems,g=!1;if(this.commandHandler.isUserHandle(this.currentPosition)&&this.isForeignObject(e.target)&&(g=!0),!this.inAction&&f.wrapper&&f.userHandles.length>0&&!g&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var m={element:xv(this.eventArgs.source)||xv(this.diagram),position:xv(this.eventArgs.position),count:e.detail,actualObject:xv(this.eventArgs.actualObject),button:0===e.button?"Left":1===e.button?"Middle":"Right"};Ka()&&this.diagram.click&&(m=this.getBlazorClickEventArgs(m)),this.diagram.tool!==Oc.ZoomPan&&this.diagram.triggerEvent(jc.click,m)}this.eventArgs={}}this.diagram.diagramActions=this.diagram.diagramActions&~Mc.PreventLaneContainerUpdate,this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},e.prototype.getConnectorPadding=function(e){var t,n=e.source;if(n&&n instanceof uy&&n.connectors.length){var i=n.connectors[0];t=i.constraints&Tc.ConnectToNearByPort?i.connectionPadding:0}return t||0},e.prototype.getBlazorClickEventArgs=function(e){return e={element:this.eventArgs.source?{selector:xv(this.eventArgs.source)}:{diagram:xv(this.diagram)},position:xv(this.eventArgs.position),count:e.count,actualObject:this.eventArgs.actualObject?{selector:xv(this.eventArgs.actualObject)}:{diagram:xv(this.diagram)},button:e.button},this.eventArgs.source instanceof ry?(e.element.selector.nodes=[],e.element.selector.nodes.push(xv(this.eventArgs.source))):this.eventArgs.source instanceof zf&&(e.element.selector.connectors=[],e.element.selector.connectors.push(xv(this.eventArgs.source))),e},e.prototype.addSwimLaneObject=function(e){var t,n,i,o,r,a,l=0,s=e.shape,d=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(n||(n=this.diagram.findObjectUnderMouse(d,this.action,this.inAction)),this.diagram.clearSelectorLayer(),n&&!(n.isLane||n.isPhase||n.isHeader))for(var c=0;c<d.length;c++){var u=this.diagram.nameTable[d[c].id];(u.isLane||u.isPhase||u.isHeader)&&(n=u)}if(n&&(s.isPhase||s.isLane&&n.isLane)&&(t=this.diagram.nameTable[n.parentId]),t&&(i=t.shape,r=s.isLane?s.orientation===i.orientation:s.orientation!==i.orientation),r&&n){if(i.header&&i.hasHeader&&"Horizontal"===i.orientation&&(l=1),i.phases.length>0&&(l+=1),s.isPhase){a="Horizontal"===i.orientation?this.currentPosition.x-t.wrapper.bounds.x:this.currentPosition.y-(t.wrapper.bounds.y+i.header.height);var h={id:Fy(),offset:a,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(t,[h])}else{var p={id:Fy(),style:s.lanes[0].style,header:{annotation:{content:s.lanes[0].header.annotation.content,style:s.lanes[0].header.annotation.style},style:s.lanes[0].header.style}};"Horizontal"===s.orientation?p.height=s.lanes[0].height:p.width=s.lanes[0].width,"Horizontal"===i.orientation?(o=n.rowIndex?n.rowIndex:this.diagram.nameTable[n.parentId].rowIndex,n.wrapper.offsetY<this.currentPosition.y&&(o+=1)):(o=n.columnIndex?n.columnIndex:this.diagram.nameTable[n.parentId].columnIndex,this.currentPosition.x<n.wrapper.bounds.center.x&&(o-=1)),i.lanes.length>o-l?(p.header.width=i.lanes[o-l].header.width,p.header.height=i.lanes[o-l].header.height):(p.header.width=i.lanes[o-l-1].header.width,p.header.height=i.lanes[o-l-1].header.height),this.diagram.addLanes(t,[p],o-l)}this.commandHandler.select(t)}else if(s.isLane){var f={id:Fy(),width:e.width,height:e.height,addInfo:e.addInfo,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:s.lanes[0].header.style},phases:[{id:Fy(),header:{annotation:{content:"Phase"}}}],lanes:[{id:Fy(),height:e.height,width:e.width,style:s.lanes[0].style,header:{annotation:{content:s.lanes[0].header.annotation.content,style:s.lanes[0].header.annotation.style},style:s.lanes[0].header.style}}],orientation:s.orientation}};"Vertical"===s.orientation&&(f.width+=20),f.offsetX=this.currentPosition.x+f.width/2,f.offsetY=this.currentPosition.y+f.height/2,this.diagram.add(f)}},e.prototype.mouseLeave=function(e){this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject&&(this.updateContainerProperties(),this.updateContainerBounds()&&this.diagram.endGroupAction()),this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,Cc.Hover,!0),this.hoverElement=null),this.eventArgs&&!this.eventArgs.source&&this.hoverElement&&(this.hoverElement=null),this.tool instanceof Mb&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof ry&&(this.diagram.updatePortVisibility(this.eventArgs.target,Cc.Hover|Cc.Connect,!0),this.hoverElement=null);var t=this.diagram.selectedItems;t&&t.wrapper&&this.diagram.renderSelector(!0),(this.diagram.diagramActions&Mc.Interactions||this.diagram.diagramActions&Mc.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~Mc.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.elementLeave(),this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.tool=null,function(){var e,t,n=document.getElementsByClassName("e-d-ruler-marker");if(n&&n.length>0)for(t=n.length-1;t>=0;t--)(e=n[t])&&e.parentNode.removeChild(e)}(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),e.preventDefault()},e.prototype.mouseWheel=function(e){this.diagram.blazorActions|=wc.interaction;var t=e.wheelDelta>0||-40*e.detail>0,n=this.getMousePosition(e);if(this.diagram.tooltipObject.close(),this.isMetaKey(e))this.diagram.zoom(t?1.2:1/1.2,n),e.preventDefault();else{var i=this.diagram.scroller.horizontalOffset,o=this.diagram.scroller.verticalOffset,r=t?20:-20;this.tool&&(this.tool instanceof qb||this.tool instanceof Vb)&&(this.eventArgs={},this.getMouseEventArgs(n,this.eventArgs),this.eventArgs.position=n,this.tool.mouseWheel(this.eventArgs)),this.diagram.scrollActions|=Hc.Interaction,e.shiftKey?this.diagram.scroller.zoom(1,r,0,n):this.diagram.scroller.zoom(1,0,r,n),this.diagram.scrollActions&=~Hc.Interaction,i===this.diagram.scroller.horizontalOffset&&o===this.diagram.scroller.verticalOffset||e.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var a=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(a,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}this.diagram.blazorActions=this.diagram.blazorActions&~wc.interaction},e.prototype.keyDown=function(e){if(!(this.diagram.diagramActions&Mc.TextEdit)&&!this.checkEditBoxAsTarget(e)||"Escape"===e.key||27===e.keyCode){var t=void 0,n=e.keyCode?e.keyCode:e.which,i=e.key,o=this.isMetaKey(e);if(this.diagram.commandManager&&this.diagram.commands)for(var r=0,a=Object.keys(this.diagram.commands);r<a.length;r++){var l=a[r];if((t=this.diagram.commands[l])&&(t.gesture.keyModifiers||t.gesture.key)&&(n===t.gesture.key||i===Rc[t.gesture.key]||this.isDeleteKey(i,l))&&(!t.gesture.keyModifiers&&!e.altKey&&!e.shiftKey&&!o||t.gesture.keyModifiers&&(o||e.altKey||e.shiftKey)&&this.altKeyPressed(t.gesture.keyModifiers)&&e.altKey||this.shiftKeyPressed(t.gesture.keyModifiers)&&e.shiftKey||this.ctrlKeyPressed(t.gesture.keyModifiers)&&o)){var s=rb(t.canExecute);if(Ka()||s&&s({keyDownEventArgs:KeyboardEvent,parameter:t.parameter})){if(e.preventDefault(),"Escape"===e.key)if(this.checkEditBoxAsTarget(e))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),Fm(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id],this.diagram.droppable.sourceElement.draggable.intDestroy();var d=this.diagram.droppable.selectedSymbols;d.parentNode.removeChild(d);var c=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(c,Mc.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Nc.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(c,Mc.PreventClearSelection),this.isMouseDown=!1}else this.inAction&&this.diagram.drawingObject&&this.tool&&this.tool.inAction&&(this.tool.mouseUp(this.eventArgs),this.tool=null,this.isMouseDown=!1);t.execute&&this.diagram.tool!==Oc.ZoomPan&&rb(t.execute)({keyDownEventArgs:KeyboardEvent,parameter:t.parameter}),Ka()&&this.diagram.triggerEvent(jc.commandExecute,{gesture:t.gesture});break}}}}this.keyArgs={element:xv(this.diagram.selectedItems),key:e.key,keyCode:e.keyCode?e.keyCode:e.which},this.getKeyModifier(this.keyArgs,e),this.diagram.diagramActions&Mc.TextEdit&&this.getlabel(this.keyArgs,e),this.diagram.triggerEvent(jc.keyDown,this.keyArgs)},e.prototype.getlabel=function(e,t){var n=this.diagram.activeLabel;e.target=this.diagram.element.id+"_editBox";var i=this.diagram.nameTable[n.parentId];if(document.getElementById(this.diagram.element.id+"_editBox")){e.text=document.getElementById(this.diagram.element.id+"_editBox").value;for(var o=0;o<i.annotations.length;o++)if(i.annotations[o].id===n.id){e.label=i.annotations[o];break}}},e.prototype.getKeyModifier=function(e,t){e.keyModifiers=Pc.None,t.ctrlKey&&(e.keyModifiers|=Pc.Control),t.shiftKey&&(e.keyModifiers|=Pc.Shift),t.altKey&&(e.keyModifiers|=Pc.Alt),this.isMetaKey(t)&&(e.keyModifiers|=Pc.Meta)},e.prototype.keyUp=function(e){this.keyArgs={element:xv(this.diagram.selectedItems),key:e.key,keyCode:e.keyCode?e.keyCode:e.which},this.getKeyModifier(this.keyArgs,e),this.diagram.diagramActions&Mc.TextEdit&&this.getlabel(this.keyArgs,e),this.diagram.triggerEvent(jc.keyUp,this.keyArgs)},e.prototype.startAutoScroll=function(e){var t=this.getMousePosition(e);t.x*=this.diagram.scroller.currentZoom,t.y*=this.diagram.scroller.currentZoom;var n,i=Vf(this.diagram),o=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===Il.info.name&&0===this.diagram.scroller.viewPortWidth){var r=document.getElementById(this.diagram.element.id).getBoundingClientRect();r.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(r.width,r.height)}return this.diagram.scrollSettings.canAutoScroll&&(t.x+this.diagram.scroller.horizontalOffset+o.right+i.width>=this.diagram.scroller.viewPortWidth-18?n="right":t.x+this.diagram.scroller.horizontalOffset<o.left?n="left":t.y+this.diagram.scroller.verticalOffset+o.bottom+i.height>this.diagram.scroller.viewPortHeight-18?n="bottom":t.y+this.diagram.scroller.verticalOffset<o.top&&(n="top")),n},e.prototype.doAutoScroll=function(e,t,n,i){var o=e;if((this.tool instanceof Bb||this.tool instanceof jb||this.tool instanceof Nb||this.tool instanceof Hb||this.tool instanceof Pb)&&this.inAction){var r=this.getMousePosition(t),a=0,l=0,s={x:r.x,y:r.y};switch(o){case"right":s.x=r.x+10,a=10;break;case"left":s.x=r.x-10,a=-10;break;case"bottom":s.y=r.y+10,l=10;break;case"top":s.y=r.y-10,l=-10}this.eventArgs.position={x:s.x,y:s.y},this.currentPosition=this.eventArgs.position;var d=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);this.eventArgs.target=this.diagram.findObjectUnderMouse(d,this.action,this.inAction),this.tool.mouseMove(this.eventArgs),this.diagram.scrollActions|=Hc.Interaction,this.diagram.scroller.zoom(1,-a,-l,r),this.diagram.scrollActions&=~Hc.Interaction}},e.prototype.mouseEvents=function(){for(var e=this.diagram.findObjectsUnderMouse(this.currentPosition),t=0;t<e.length;t++)this.eventArgs.actualObject===e[t]&&e.splice(t,1);var n={targets:{}};if(Ka()||(n={targets:xv(e),element:xv(this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source),actualObject:xv(this.eventArgs.actualObject)}),Ka()&&(this.diagram.mouseEnter||this.diagram.mouseOver)&&(n.actualObject=hv(this.eventArgs.actualObject)===zf?{connector:xv(this.eventArgs.actualObject)}:{node:xv(this.eventArgs.actualObject)},n.targets.connector=[],n.targets.node=[],this.getBlazorCollectionObject(e,n)),this.lastObjectUnderMouse&&this.diagram.mouseLeave&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var i={targets:void 0,element:xv(this.lastObjectUnderMouse),actualObject:void 0};Ka()&&(i={targets:void 0,element:hv(this.lastObjectUnderMouse)===zf?{connector:xv(e)}:{node:xv(this.lastObjectUnderMouse)},actualObject:void 0}),this.diagram.triggerEvent(jc.mouseLeave,i),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,void 0!==this.eventArgs.actualObject&&this.diagram.triggerEvent(jc.mouseEnter,n)),this.eventArgs.actualObject&&this.diagram.triggerEvent(jc.mouseOver,n)},e.prototype.getBlazorCollectionObject=function(e,t){if(e)for(var n=0;n<e.length;n++)hv(e[n])===zf?t.targets.connector.push(xv(e[n])):t.targets.node.push(xv(e[n]))},e.prototype.elementEnter=function(e,t){if(!t){var n=this.hoverElement instanceof ry&&this.hoverElement.constraints&_c.Tooltip||this.hoverElement instanceof zf&&this.hoverElement.constraints&Tc.Tooltip,i=this.getContent();"Auto"===this.hoverElement.tooltip.openOn&&""!==i&&(l=(r=this.diagram).tooltipObject,uf((a=n?this.hoverElement:void 0)?a.tooltip:r.tooltip,l));var o=Hm(this.diagram,e,this.hoverElement);"Auto"===this.hoverElement.tooltip.openOn&&""!==i&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.openOn=this.hoverElement.tooltip.openOn,this.diagram.tooltipObject.offsetX=o.x,this.diagram.tooltipObject.offsetY=o.y,Ka()?this.diagram.tooltipObject.open(this.diagram.element,{}):this.diagram.tooltipObject.dataBind()),function(e,t){var n=0;return e instanceof zf?e.constraints&Tc.Tooltip?n=e.constraints&Tc.Tooltip:e.constraints&Tc.InheritTooltip&&(n=t.constraints&Ac.Tooltip):e.constraints&_c.Tooltip?n=e.constraints&_c.Tooltip:e.constraints&_c.InheritTooltip&&(n=t.constraints&Ac.Tooltip),n}(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&this.diagram.tooltipObject.open(this.diagram.element)}var r,a,l},e.prototype.elementLeave=function(){this.diagram.tooltipObject&&"Custom"!==this.diagram.tooltipObject.openOn&&this.diagram.tooltipObject.close()},e.prototype.altKeyPressed=function(e){return!!(e&Pc.Alt)},e.prototype.ctrlKeyPressed=function(e){return!!(e&Pc.Control)},e.prototype.shiftKeyPressed=function(e){return!!(e&Pc.Shift)},e.prototype.scrolled=function(e){this.diagram.updateScrollOffset(),Ka()&&this.diagram.realActions&Lc.OverViewAction&&this.diagram.setBlazorDiagramProps(!1)},e.prototype.doubleClick=function(e){if(gg(this.diagram)){var t=void 0,n=this.diagram.findObjectsUnderMouse(this.currentPosition),i=this.diagram.findObjectUnderMouse(n,this.action,this.inAction);if(null!==i&&gg(this.diagram))if(t=this.diagram.findElementUnderMouse(i,this.currentPosition),this.tool&&(this.tool instanceof qb||this.tool instanceof Vb))xv(i)||xv(this.diagram),this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,e.preventDefault();else{var o=this.diagram.commandHandler.getObjectLayer(i.id);if(o&&!o.lock&&o.visible&&!(this.diagram.diagramActions&Mc.TextEdit)){var r="";"TextAnnotation"===i.shape.shape&&(r=i.wrapper.children[1].id.split("_")[1]),this.diagram.startTextEdit(i,r||(t instanceof Gc?t.id.split(i.id+"_")[1]:void 0))}}var a,l={source:xv(i)||xv(this.diagram),position:this.currentPosition,count:e.detail};if(Ka())a=i instanceof ry?{nodes:[xv(i)]}:i instanceof zf?{connectors:[xv(i)]}:xv(i),l={source:i?{selector:a}:{diagram:xv(this.diagram)},position:this.currentPosition,count:e.detail};this.diagram.triggerEvent(jc.doubleClick,l)}},e.prototype.itemClick=function(e,t){var n=e;return Hg(this.diagram,n,!0)?n:null},e.prototype.inputChange=function(e){var t,n,i,o,r,a,l,s,d,c=document.getElementById(this.diagram.element.id+"_editBox"),u=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),h=c.value,p=h.split("\n");(!(o=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0])&&this.tool instanceof zb||o&&"SwimLane"===o.shape.type)&&(o=this.diagram.nameTable[this.diagram.activeLabel.parentId]),o&&("Text"!==o.shape.type&&o.annotations.length>0||"Text"===o.shape.type)&&(l=fy((i=this.diagram.getWrapper(o.wrapper,this.diagram.activeLabel.id)).style,h,void 0,void 0,t=(t=o.wrapper.bounds.width<i.bounds.width?o.wrapper.bounds.width:i.bounds.width)>90?t:90),n=Number(c.style.fontSize.split("px")[0]),p.length>1&&""===p[p.length-1]&&(l.height=l.height+n),s=this.diagram.scroller.transform,d=mg(this.diagram)?s.scale:1,a=(90>(a=l.width)?90:a)*d,r=(12>l.height?12:l.height)*d,u.style.left=(i.bounds.center.x+s.tx)*s.scale-a/2-2.5+"px",u.style.top=(i.bounds.center.y+s.ty)*s.scale-r/2-3+"px",u.style.width=a+"px",u.style.height=r+"px",c.style.minHeight="12px",c.style.minWidth="90px",c.style.width=a+"px",c.style.height=r+"px")},e.prototype.isAddTextNode=function(e,t){return!(!(this.tool instanceof zb||t)||(this.tool=null,e&&!hg(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),lv(this.diagram.nodes,e.id)||lv(this.diagram.connectors,e.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e)>-1))},e.prototype.checkEditBoxAsTarget=function(e){return!(!e.target||e.target.id!==this.diagram.element.id+"_editBox")},e.prototype.getMouseEventArgs=function(e,t,n,i){var o,r,a;if(t.position=e,n?(r=this.diagram.findObjectsUnderMouse(this.currentPosition,n),o=this.diagram.findTargetObjectUnderMouse(r,this.action,this.inAction,t.position,n)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(o=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&o&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction))):(r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction)),o&&o.isHeader&&(this.eventArgs.actualObject=o=this.diagram.nameTable[o.parentId]),o){var l=void 0,s=void 0,d=void 0;if(((a=this.diagram.findElementUnderMouse(o,this.currentPosition,i))&&o.ports&&o.ports.length&&!yv(o,a)||!a||!o)&&r&&r.length&&n instanceof uy)for(l=n.connectors[0],d=r.length-1;d>=0;d--)if((s=r[d])instanceof ry&&l&&l.connectionPadding){if(a=this.diagram.findElementUnderMouse(o=s,this.currentPosition,i),l.constraints&Tc.ConnectToNearByPort&&o&&o.ports&&o.ports.length&&yv(o,a))break;if(s instanceof ry&&l&&l.connectionPadding&&s.wrapper.outerBounds.containsPoint(this.currentPosition)&&l.constraints&Tc.ConnectToNearByNode&&!(l.constraints&Tc.ConnectToNearByPort)){a=this.diagram.findElementUnderMouse(o=s,this.currentPosition,0);break}}}return n?(t.target=o,t.targetWrapper=a):(t.source=o,t.sourceWrapper=a),t.actualObject=this.eventArgs.actualObject,t.source instanceof uy&&void 0===t.actualObject&&(t.source.nodes.length>0||t.source.connectors.length>0)&&(t.actualObject=t.source.nodes.length>0?this.diagram.nameTable[t.source.nodes[0].id]:this.diagram.nameTable[t.source.connectors[0].id]),t.startTouches=this.touchStartList,t.moveTouches=this.touchMoveList,t},e.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},e.prototype.getTool=function(e){switch(e){case"Select":return new Pb(this.commandHandler,!0);case"Drag":return new Nb(this.commandHandler);case"Rotate":return new Lb(this.commandHandler);case"LayoutAnimation":return new Fb(this.commandHandler);case"FixedUserHandle":return new Rb(this.commandHandler,!0);case"Hyperlink":return new Gb(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Hb(this.commandHandler,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new Mb(this.commandHandler,e);case"SegmentEnd":case"OrthoThumb":return new Zb(this.commandHandler,e);case"Draw":var t=function(e){var t;return e&&(e.type?t="Connector":e.shape&&!e.type&&(t="Node")),t}(this.diagram.drawingObject);if("Node"===t&&"Text"===this.diagram.drawingObject.shape.type)return new zb(this.commandHandler);if("Node"===t&&("Polygon"===this.diagram.drawingObject.shape.shape||Ka()&&"Polygon"===this.diagram.drawingObject.shape.basicShape)&&!this.diagram.drawingObject.shape.points)return new qb(this.commandHandler);if("Node"===t||"Node"===t&&"Polygon"===this.diagram.drawingObject.shape.shape&&this.diagram.drawingObject.shape.points)return new Bb(this.commandHandler,this.diagram.drawingObject);if("Connector"===t&&"Polyline"===this.diagram.drawingObject.type)return new Vb(this.commandHandler);if("Connector"===t)return new jb(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new Ub(this.commandHandler,!1);case"PinchZoom":return new Ub(this.commandHandler,!0);case"PortDrag":return new Nb(this.commandHandler,"Port");case"PortDraw":return new jb(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new Pb(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new Wb(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new Yb(this.commandHandler,e);case"LabelRotate":return new Xb(this.commandHandler)}return null},e.prototype.getCursor=function(e){var t=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems;return function(e,t){if(t+=360,t%=360,-1===e.indexOf("Resize"))return kb[e];var n=kb[e];return t>=0&&t<25||t>=160&&t<=205||t>=340&&t<=360?n:t>=25&&t<=70||t>=205&&t<=250?"n-resize"===n||"s-resize"===n?"ne-resize":"nw-resize"===n||"se-resize"===n?"n-resize":"e-resize"===n||"w-resize"===n?"nw-resize":"e-resize":t>=70&&t<=115||t>=250&&t<=295?"n-resize"===n||"s-resize"===n?"e-resize":"nw-resize"===n||"se-resize"===n?"ne-resize":"e-resize"===n||"w-resize"===n?"n-resize":"nw-resize":t>=115&&t<=155||t>=295&&t<=340?"n-resize"===n||"s-resize"===n?"nw-resize":"nw-resize"===n||"se-resize"===n?"e-resize":"e-resize"===n||"w-resize"===n?"ne-resize":kb[e]:"n-resize"}(e,this.diagram.selectedItems.annotation?t.rotateAngle+t.parentTransform:t.rotateAngle)},e.prototype.findElementUnderMouse=function(e,t,n){return this.objectFinder.findElementUnderSelectedItem(e,t,n)},e.prototype.findObjectsUnderMouse=function(e,t){return this.objectFinder.findObjectsUnderMouse(e,this.diagram,this.eventArgs,t)},e.prototype.findObjectUnderMouse=function(e,t,n){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,n,this.eventArgs,this.currentPosition)},e.prototype.findTargetUnderMouse=function(e,t,n,i,o){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,n,this.eventArgs,i,o)},e.prototype.findActionToBeDone=function(e,t,n,i){return function(e,t,n,i,o,r,a){if(r&&r.length>1&&o&&o.length>1)return"PinchZoom";if(i.currentSymbol)return"Drag";if("PortDraw"===i.eventHandler.action&&(i.tool&=~Oc.DrawOnce),(pg(i)||hg(i))&&i.drawingObject)return"Draw";if(Tb(i)&&(h=i.selectedItems).wrapper&&tv(h.constraints,"UserHandle"))for(var l=0,s=h.userHandles;l<s.length;l++){var d=s[l];if(d.visible&&Sb(n,p=$m(h,d,i.scroller.transform),d.size/(2*i.scroller.transform.scale)))return d.name}if(Tb(i)){var c=i.selectedItems.annotation?i.selectedItems.wrapper.children[0]:i.selectedItems.wrapper,u=c.bounds,h=i.selectedItems,p=new Zd(u.x,u.y,u.width,u.height);if(Eb(i)&&!i.selectedItems.annotation){var f=i.selectedItems.connectors[0],g=10/i.scrollSettings.currentZoom,m=10/i.scrollSettings.currentZoom;if(tv(h.constraints,"ResizeAll")){if(tv(h.constraints,"ConnectorSourceThumb")&&Kf(f)&&Sb(n,f.sourcePoint,g))return"ConnectorSourceEnd";if(tv(h.constraints,"ConnectorTargetThumb")&&Qf(f)&&Sb(n,f.targetPoint,m))return"ConnectorTargetEnd";if("OrthoThumb"===(x=function(e,t,n,i){var o=10/i.scrollSettings.currentZoom,r=10/i.scrollSettings.currentZoom;if("Bezier"===e.type)for(var a=0;a<e.segments.length;a++){if(Sb(n,jd.isEmptyPoint((l=e.segments[a]).point1)?l.bezierPoint1:l.point1,r))return"BezierSourceThumb";if(Sb(n,jd.isEmptyPoint(l.point2)?l.bezierPoint2:l.point2,o))return"BezierTargetThumb"}if(i.connectorEditingToolModule&&$f(e))if("Straight"===e.type||"Bezier"===e.type)for(a=0;a<e.segments.length;a++){var l=void 0;if(Sb(n,(l=e.segments[a]).point,10))return"SegmentEnd"}else for(a=0;a<e.segments.length;a++){l=void 0;var s={x:0,y:0};if((l=e.segments[a]).allowDrag)for(var d=0;d<l.points.length-1;d++)if(jd.distancePoints(l.points[d],l.points[d+1])>=50&&(s.x=(l.points[d].x+l.points[d+1].x)/2,s.y=(l.points[d].y+l.points[d+1].y)/2,Sb(n,s,30)))return"OrthoThumb"}return null}(f,0,n,i)))return x;if(tv(h.constraints,"ConnectorSourceThumb")&&Kf(f)&&x)return x;if(tv(h.constraints,"ConnectorTargetThumb")&&Qf(f)&&x)return x}}else{var v=10/i.scroller.currentZoom,y=Qd();ec(y,c.rotateAngle+c.parentTransform,c.offsetX,c.offsetY);var b=c.offsetX-c.pivot.x*c.actualSize.width,w=c.offsetY-c.pivot.y*c.actualSize.height,C={x:b+(.5===c.pivot.x?2*c.pivot.x:c.pivot.x)*c.actualSize.width/2,y:w-30/i.scroller.currentZoom};C=$d(y,C);var x,S=!!i.selectedItems.annotation,T=!(!S||!eg(i.selectedItems.annotation));if(tv(h.constraints,"Rotate")&&Sb(n,C,v)&&i.selectedItems.thumbsConstraints&Dc.Rotate){if(S&&T)return"LabelRotate";if(!S)return"Rotate"}if(p.Inflate(v),p.containsPoint(n)&&(x=function(e,t,n,i,o,r){var a;return 1===e.selectedItems.nodes.length&&0===e.selectedItems.connectors.length&&e.selectedItems.nodes[0].container&&(a=function(e,t,n,i,o){var r=10/e.scroller.currentZoom,a=40/e.scroller.currentZoom,l=e.selectedItems,s=t.actualSize.width,d=t.actualSize.height,c=new Zd(i,o+20,t.style.strokeWidth,d-40),u=new Zd(i+s,o+20,t.style.strokeWidth,d-40),h=new Zd(i+20,o,s-40,t.style.strokeWidth),p=new Zd(i+20,o+d,s-40,t.style.strokeWidth),f=Hg(e,e.selectedItems.nodes[0],!0)?e.nameTable[e.selectedItems.nodes[0].parentId]:e.selectedItems.nodes[0];if(s>=a&&d>=a){if(ev(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&u.containsPoint(n,r))return"ResizeEast";if(ev(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&p.containsPoint(n,r))return"ResizeSouth";if("Grid"!==f.container.type){if(ev(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&c.containsPoint(n,r))return"ResizeWest";if(ev(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&h.containsPoint(n,r))return"ResizeNorth"}}return null}(e,t,n,o,r)),a||e.selectedItems.nodes[0]&&(e.selectedItems.nodes[0].isPhase||e.selectedItems.nodes[0].isLane||"SwimLane"===e.selectedItems.nodes[0].shape.type)||(a=function(e,t,n,i,o,r){var a=40/e.scroller.currentZoom,l=10/e.scroller.currentZoom,s=e.selectedItems,d=!!s.annotation;if(t.actualSize.width>=a&&t.actualSize.height>=a){if(ev(s.constraints,"ResizeSouthEast",s.thumbsConstraints,s)&&Sb(n,$d(i,{x:o+t.actualSize.width,y:r+t.actualSize.height}),l))return d?"LabelResizeSouthEast":"ResizeSouthEast";if(ev(s.constraints,"ResizeSouthWest",s.thumbsConstraints,s)&&Sb(n,$d(i,{x:o,y:r+t.actualSize.height}),l))return d?"LabelResizeSouthWest":"ResizeSouthWest";if(ev(s.constraints,"ResizeNorthEast",s.thumbsConstraints,s)&&Sb(n,$d(i,{x:o+t.actualSize.width,y:r}),l))return d?"LabelResizeNorthEast":"ResizeNorthEast";if(ev(s.constraints,"ResizeNorthWest",s.thumbsConstraints,s)&&Sb(n,$d(i,{x:o,y:r}),l))return d?"LabelResizeNorthWest":"ResizeNorthWest"}return ev(s.constraints,"ResizeEast",s.thumbsConstraints,s)&&Sb(n,$d(i,{x:o+t.actualSize.width,y:r+t.actualSize.height/2}),l)?d?"LabelResizeEast":"ResizeEast":ev(s.constraints,"ResizeWest",s.thumbsConstraints,s)&&Sb(n,$d(i,{x:o,y:r+t.actualSize.height/2}),l)?d?"LabelResizeWest":"ResizeWest":ev(s.constraints,"ResizeSouth",s.thumbsConstraints,s)&&Sb(n,$d(i,{x:o+t.actualSize.width/2,y:r+t.actualSize.height}),l)?d?"LabelResizeSouth":"ResizeSouth":ev(s.constraints,"ResizeNorth",s.thumbsConstraints,s)&&Sb(n,$d(i,{x:o+t.actualSize.width/2,y:r}),l)?d?"LabelResizeNorth":"ResizeNorth":null}(e,t,n,i,o,r)),a||null}(i,c,n,y,b,w)))return x}}if(ug(i)&&!e)return"Pan";if(a instanceof Kc&&!ug(i)&&"None"!==(x=function(e,t,n,i){if(bg(t)&&(nv(t,Cc.Hover)||nv(t,Cc.Visible))){if(t.constraints&zc.Drag)return"PortDrag"}else if(yg(t)&&(nv(t,Cc.Hover)||nv(t,Cc.Visible))&&t.constraints&zc.Draw){e.drawingObject={};var o={type:"Orthogonal",sourcePortID:t.id};return e.drawingObject=o,e.tool|=Oc.DrawOnce,e.currentDrawingObject=o,"PortDraw"}return"None"}(i,a)))return x;if((a instanceof eu||a instanceof tu)&&!ug(i)&&Xf(a))return _b(i,a,void 0,t)&&Zf(a)?"LabelDrag":"LabelSelect";if(null!==e){if(!(e instanceof ry||e instanceof zf))return"Select";if(t&&t.id){var E=t.id.split(e.id)[1];if(E&&E.match("^_icon"))return"LayoutAnimation"}if(t&&t.id)for(var _=0;_<e.fixedUserHandles.length;_++)if(t.id&&t.id.indexOf(e.fixedUserHandles[_].id)>-1)return"FixedUserHandle";if(Zf(e)&&t instanceof Gc&&t.hyperlink.link)return"Hyperlink";if(!Zf(e)||!_b(i,e,!1)||void 0!==i.selectedItems.annotation)return e&&ug(i)&&!fg(i)?"Pan":i.selectedItems.nodes.length&&i.selectedItems.nodes[0].isLane&&i.selectedItems.wrapper&&i.selectedItems.wrapper.bounds.containsPoint(n)?"Drag":"Select";if(e instanceof zf&&!Sb(n,e.sourcePoint,e.hitPadding)&&!Sb(n,e.targetPoint,e.hitPadding)||!(e instanceof zf))return"Drag"}return"Select"}(e,t,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,i)},e.prototype.updateContainerBounds=function(e){var t=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject instanceof ry){var n=this.tool instanceof Hb,i=this.diagram.selectedObject.actualObject,o=this.diagram.nameTable[i.parentId];e?Ng(this.diagram,i,this.currentPosition,n):((!o||o&&"SwimLane"!==o.shape.type)&&this.diagram.updateDiagramObject(i),t=function(e,t,n,i){var o,r=!1;if(Hg(e,t,!0)){e.protectPropertyChange(!0);var a=(o=e.nameTable[t.parentId]).wrapper;if(o&&"Canvas"===o.container.type){if(i||a.bounds.x<=n.x&&a.bounds.right>=n.x&&a.bounds.y<=n.y&&a.bounds.bottom>=n.y){var l=void 0,s=a.bounds.y,d=a.bounds.x,c=e.nameTable[o.parentId]||o;if("SwimLane"===c.shape.type)r=Fg(o,c,t,e,!0);else{var u=e.nameTable[o.parentId]||o,h=u.shape;l=u.wrapper,a.actualSize.width<a.outerBounds.width&&!(a.bounds.x>a.outerBounds.x)&&(void 0!==o.rowIndex?(l.updateColumnWidth(o.columnIndex,a.outerBounds.width,!0),"Horizontal"===h.orientation&&h.phaseSize&&am(u,e,a,o.columnIndex),lm(e,u),e.drag(u,d-a.bounds.x,s-a.bounds.y)):e.scale(o,1+(a.outerBounds.width-a.actualSize.width)/a.actualSize.width,1,a.outerBounds.x<a.bounds.x?{x:1,y:.5}:{x:0,y:.5})),a.actualSize.height<a.outerBounds.height&&!(a.bounds.y>a.outerBounds.y)&&(void 0!==o.rowIndex?(l.updateRowHeight(o.rowIndex,a.outerBounds.height,!0),e.drag(u,d-a.bounds.x,s-a.bounds.y)):e.scale(o,1,1+(a.outerBounds.height-a.actualSize.height)/a.actualSize.height,a.outerBounds.y<a.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}e.select([t]),tm([],e)}e.protectPropertyChange(!1)}return r}(this.diagram,i,this.currentPosition,n),this.diagram.updateSelector(),(i.isLane||i.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.selectObjects([i])))}return t},e.prototype.updateContainerProperties=function(){var e,t,n,i,o=!1,r=!1,a={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var l=this.diagram.findObjectsUnderMouse(this.currentPosition),s=this.diagram.findObjectUnderMouse(l,this.action,this.inAction);if(e=this.diagram.selectedObject.helperObject,(i=this.diagram.selectedObject.actualObject)instanceof ry){if("SwimLane"===i.shape.type&&(n=Zg(this.diagram,i.wrapper.children[0])),"SwimLane"!==i.shape.type&&i.parentId&&"SwimLane"===this.diagram.getObject(i.parentId).shape.type&&s instanceof ry&&this.diagram.getObject(s.parentId)&&"SwimLane"!==this.diagram.getObject(s.parentId).shape.type&&(s=this.diagram.getObject(s.parentId)),"Drag"===this.currentAction&&i.container&&"Canvas"===i.container.type&&i.parentId&&"SwimLane"===this.diagram.getObject(i.parentId).shape.type&&s&&s!==i&&s.container&&"Canvas"===s.container.type&&s.isLane&&i.isLane&&s.parentId===i.parentId)nm(this.diagram,i,s,this.currentPosition),a.isPreventHistory=!0;else{var d=this.diagram.nameTable[i.parentId];if(!d||d&&"SwimLane"!==d.shape.type)if(d&&d.isLane&&i.constraints&_c.AllowMovingOutsideLane){var c=this.diagram.getObject(d.parentId),u=this.diagram.getObject(c.id+c.shape.lanes[0].id+"0"),h=u.wrapper.bounds.x,p=u.wrapper.bounds.y;new Zd(h,p,c.wrapper.bounds.bottomRight.x-h,c.wrapper.bounds.bottomRight.y-p).containsPoint(this.currentPosition)&&(i.offsetX=e.offsetX,i.offsetY=e.offsetY,i.width=e.width,i.height=e.height,i.rotateAngle=e.rotateAngle)}else i.offsetX=e.offsetX,i.offsetY=e.offsetY,i&&i.shape&&"UmlClassifier"!==i.shape.type&&("Bpmn"!==i.shape.type||"Bpmn"===i.shape.type&&"TextAnnotation"!==i.shape.shape)&&(i.width=e.width,i.height=e.height),i.rotateAngle=e.rotateAngle;var f=void 0;if(d&&d.container&&"Stack"===d.container.type&&(this.diagram.startGroupAction(),r=!0),!s&&d&&d.container&&"Stack"===d.container.type&&"Drag"===this.action){var g=d.wrapper.children.indexOf(i.wrapper);if(f={targetIndex:void 0,target:void 0,sourceIndex:g,source:Yy(i)},g>-1){var m=d.children;m.splice(m.indexOf(i.id),1),this.diagram.nameTable[i.id].parentId="",t=!0,d.wrapper.children.splice(g,1)}}(function(e,t,n,i){var o=e,r=n.nameTable[o.parentId],a=n.nameTable[o.parentId];if(t&&a&&a.container&&"Stack"===a.container.type&&t.container&&"Stack"===t.container.type&&a.id!==t.parentId){var l=a.wrapper.children.indexOf(o.wrapper);l>-1&&(n.nameTable[o.id].parentId=t.id,a.wrapper.children.splice(l,1))}if(t&&t.parentId&&o.parentId&&"Drag"===i&&a.container&&"Stack"===a.container.type){var s=r.wrapper.children.indexOf(t.wrapper),d=r.wrapper.children.indexOf(o.wrapper),c={targetIndex:s,target:t,sourceIndex:d,source:e};r.wrapper.children.splice(d,1),r.wrapper.children.splice(s,0,o.wrapper),n.commandHandler.addHistoryEntry({type:"StackChildPositionChanged",redoObject:{targetIndex:d,target:t,sourceIndex:s,source:e},undoObject:c,category:"Internal"})}})(i,s,this.diagram,this.action),(d=Hg(this.diagram,i)?this.diagram.nameTable[i.parentId]:this.diagram.nameTable[i.parentId]||i)&&d.container&&"Canvas"===d.container.type&&(d.wrapper.maxWidth=d.maxWidth=d.wrapper.actualSize.width,d.wrapper.maxHeight=d.maxHeight=d.wrapper.actualSize.height,o=!0),Hg(this.diagram,i,!0)&&d&&"Canvas"===d.container.type?Bg(this.diagram,i):a=this.updateContainerPropertiesExtend(d,i,n,e,a),this.diagram.lineRoutingModule&&this.diagram.constraints&Ac.LineRouting&&!Hg(this.diagram,i,!0)&&(i.children&&(this.diagram.realActions|=Lc.EnableGroupAction),this.diagram.nodePropertyChange(i,{},{width:i.width,height:i.height,offsetX:i.offsetX,offsetY:i.offsetY}),i.children&&(this.diagram.realActions&=~Lc.EnableGroupAction)),i.shape.lanes&&this.updateLaneChildNode(i),o&&(d.maxWidth=d.wrapper.maxWidth=void 0,d.maxHeight=d.wrapper.maxHeight=void 0),t&&(this.diagram.nodePropertyChange(d,{},{offsetX:d.offsetX,offsetY:d.offsetY,width:d.width,height:d.height,rotateAngle:d.rotateAngle}),this.diagram.diagramActions&Mc.UndoRedo||this.diagram.addHistoryEntry({redoObject:{sourceIndex:void 0,source:f.source},type:"StackChildPositionChanged",undoObject:f,category:"Internal"})),i&&i.container&&("Stack"===i.container.type||"Canvas"===i.container.type&&""===i.parentId)&&(i&&i.shape&&"UmlClassifier"===i.shape.type&&(i.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(i,{},{offsetX:i.offsetX,offsetY:i.offsetY,width:i.width,height:i.height,rotateAngle:i.rotateAngle}),i&&i.shape&&"UmlClassifier"===i.shape.type&&(i.wrapper.measureChildren=!1))}tm(n,this.diagram),a.hasStack=r}}return i&&(i.isPhase||i.isLane||i.shape&&"SwimLane"===i.shape.type)&&this.diagram.updateDiagramElementQuad(),a},e.prototype.updateLaneChildNode=function(e){for(var t=0;t<e.shape.lanes.length;t++)if(e.shape.lanes[t].children&&e.shape.lanes[t].children.length>0)for(var n=0;n<e.shape.lanes[t].children.length;n++){var i=this.diagram.nameTable[e.shape.lanes[t].children[n].id];i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY}},e.prototype.updateContainerPropertiesExtend=function(e,t,n,i,o){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===t.shape.type){var r=Yy(t),a=!1;if(e&&e.container&&"Grid"===e.container.type){var l="SwimLane"===e.shape.type,s=l?e.wrapper.children[0]:e.wrapper,d=l?e.shape.padding:void 0,c=e.wrapper.bounds.x,u=e.wrapper.bounds.y;if(void 0!==t.columnIndex&&"Horizontal"===e.container.orientation&&(l&&t.isPhase||!l&&1===t.rowIndex)||"Vertical"===e.container.orientation&&(!l&&t.rowIndex>0&&t.columnIndex>0||l&&t.isLane)){if("Horizontal"===e.container.orientation&&t.isPhase&&t.wrapper.width>t.maxWidth&&(t.maxWidth=t.wrapper.width,t.wrapper.maxWidth=t.wrapper.width),im(this.diagram,t,e,i),s.updateColumnWidth(t.columnIndex,i.width,!0,d),t.isPhase){var h=this.diagram.nameTable[e.shape.phases[t.columnIndex].header.id];h.maxWidth<i.width&&(h.maxWidth=i.width,h.wrapper.maxWidth=i.width)}"SwimLane"===e.shape.type&&(e.width=e.width?s.width:e.width,lm(this.diagram,e),e.wrapper.width=e.width,n=Zg(this.diagram,s))}else void 0!==t.rowIndex&&(a=!0,im(this.diagram,t,e,i),s.updateRowHeight(t.rowIndex,i.height,!0,d),"SwimLane"===e.shape.type&&(e.height=e.height?s.height:e.height,e.wrapper.height=e.height,n=Zg(this.diagram,s)));"SwimLane"===e.shape.type&&(o.isPreventHistory=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,rotateAngle:e.rotateAngle}),this.diagram.drag(e,c-e.wrapper.bounds.x,u-e.wrapper.bounds.y)}else t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,width:t.width,height:t.height,rotateAngle:t.rotateAngle}),t.wrapper.measureChildren=!1;if(t.wrapper.measure(new Bd(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var p=Yy(t);this.diagram.addHistoryEntry({category:"Internal",type:a?"RowHeightChanged":"ColumnWidthChanged",undoObject:r,redoObject:p})}}return tm(n,this.diagram),o},e.prototype.addUmlNode=function(){var e=this.diagram.selectedItems.nodes[0],t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(t,this.action,this.inAction);if(n||(t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(t,this.action,this.inAction)),e&&e.container&&"Stack"===e.container.type&&n&&n.parentId&&n.parentId===e.id){var i=n,o=by(this.diagram.element.id);if(o.getElementById(o.id+"_stack_highlighter")){var r=e.wrapper.children.indexOf(n.wrapper)+1;this.diagram.enableServerDataBinding(!1);var a=new ry(this.diagram,"nodes",{style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},annotations:n.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(_c.Default|_c.HideThumbs)&~(_c.Rotate|_c.Drag|_c.Resize),minHeight:25},!0);a.annotations[0].content=" + Name : Type",i.id.split("_"),a.id=Fy()+a.id,a.parentId=e.id,a.zIndex=-1,a.umlIndex=r,this.diagram.startGroupAction(),e.wrapper.children.indexOf(a.wrapper),this.diagram.enableServerDataBinding(!0),this.diagram.add(a),this.diagram.updateConnectorEdges(e),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[a.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},e}(),Kb=function(){function e(){}return e.prototype.findObjectsUnderMouse=function(e,t,n,i,o){var r,a,l,s,d=[];i&&i instanceof uy&&i.nodes.length+i.connectors.length===1&&(i=i.nodes[0]||i.connectors[0]).children&&0===i.children.length&&(n.actualObject=i);for(var c,u,h=i&&i instanceof zf&&(i.constraints&Tc.ConnectToNearByNode||i.constraints&Tc.ConnectToNearByPort)&&i.connectionPadding||0,p={},f=0,g=t.spatialSearch.findObjects(new Zd(e.x-50-h,e.y-50-h,100+h,100+h));f<g.length;f++){var m=e;a=(E=g[f]).wrapper.outerBounds;var v=!E.rotateAngle&&a.containsPoint(m,h);if(((E!==i||t.currentDrawingObject instanceof zf)&&E instanceof zf?E!==t.currentDrawingObject:E.wrapper.visible)&&(x=t.commandHandler.getObjectLayer(E.id))&&!x.lock&&x.visible){if(c=p[x.zIndex]=p[x.zIndex]||[],E.rotateAngle){a=Vy(r=E.wrapper);for(var y=0,b=r.children;y<b.length;y++)l=b[y],ec(s=Qd(),-(l.rotateAngle+l.parentTransform),l.offsetX,l.offsetY),m=$d(s,e),Vy(l).containsPoint(m,h)&&(v=!0)}(!i||!1===_b(t,E))&&((u=E)instanceof zf?u.constraints&Tc.PointerEvents:u.constraints&_c.PointerEvents)&&(E instanceof zf?Pm(E,e):v)&&this.findElementUnderMouse(E,e,h||E instanceof zf&&E.hitPadding||0)&&"helper"!==E.id&&dv(E,"zIndex",c)}}for(var w=0,C=t.layers;w<C.length;w++)for(var x,S=0,T=d=d.concat(p[(x=C[w]).zIndex]||[]);S<T.length;S++){var E;"Bpmn"!==(E=T[S]).shape.type||!E.processId||t.eventHandler.tool instanceof Nb&&!(t.eventHandler.tool instanceof Nb&&lg(E))||(I=d.indexOf(t.nameTable[E.processId]))>-1&&d.splice(I,1),"UmlClassifier"===E.shape.type&&E.container&&"Stack"===E.container.type&&(I=d.indexOf(t.nameTable[t.nameTable[E.id].wrapper.children[0].id]))>-1&&d.splice(I,1)}for(var _=0;_<d.length;_++){var k=t.nameTable[d[_].parentId];if(k)for(var D=this.findElementUnderMouse(k,e),A=0;A<k.ports.length;A++)if(D.id.match("_"+k.ports[A].id+"$")){var O=k.ports[A];if(bg(O)||yg(O))return d}for(;k;){var I;if(-1===(I=d.indexOf(k)))break;d.splice(I,1),k=t.nameTable[k.parentId]}}if(this.checkSwimlane(d),n&&!n.source)for(_=0;_<d.length;_++){var P=t.nameTable[d[_].parentId];if(P&&"SwimLane"===P.shape.type)for(A=0;A<d.length;A++)d[A]instanceof zf&&d.splice(_,1)}return d},e.prototype.checkSwimlane=function(e){for(var t,n=0;n<e.length;n++){var i=e[n],o=void 0,r=void 0;if(i instanceof ry&&(o=e[n].parentId,r=i),""===o&&(t=!0),n>0&&t&&r&&(r.isLane||r.isPhase||r.isHeader)){var a=e[n];e[n]=e[n-1],e[n-1]=a}}},e.prototype.isTarget=function(e,t,n){var i,o=t.selectedItems.connectors[0];if(!(i="ConnectorSourceEnd"===n?t.nameTable[o.targetID]:i=t.nameTable[o.sourceID])||(i.processId||e.processId)&&i.processId===e.processId||(i.processId!==e.processId&&(e=null),e&&e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])),"ConnectorSourceEnd"===n&&o.targetID){var r=t.nameTable[o.targetID];if(r&&r.shape&&"TextAnnotation"===r.shape.shape){var a=o.id.split("_");("Bpmn"===r.shape.type&&"Bpmn"!==e.shape.type||a[0]===e.id||"TextAnnotation"===e.shape.shape)&&(e=null),e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])}}return e},e.prototype.findObjectUnderMouse=function(e,t,n,i,o,r,a){var l,s,d=null;if(0!==t.length)if(a&&a instanceof uy&&a.nodes.length+a.connectors.length===1&&(a=a.nodes[0]||a.connectors[0]),"ConnectorSourceEnd"===n&&a||"PortDraw"===n||(pg(e)||hg(e))&&hv(e.drawingObject)===zf)for(var c=e.selectedItems.connectors[0],u=t.length-1;u>=0;u--){s=rv(t[u],!1),l=rv(t[u],!0);var h=e.eventHandler.tool,p=this.findTargetElement(t[u].wrapper,r,void 0);if("Draw"===n&&p&&t[u]instanceof ry&&!yv(t[u],p)&&(h&&"ConnectorSourceEnd"===h.endPoint&&!og(t[u])||h&&"ConnectorTargetEnd"===h.endPoint&&!ng(t[u])))return d;if(t[u]instanceof ry&&(og(t[u])||rg(s)||ng(t[u])||ig(l)||"PortDraw"===n&&h instanceof Mb&&"ConnectorTargetEnd"==h.endPoint&&(ng(t[u])||ig(l))))return d=t[u],c&&(d=this.isTarget(d,e,n)),o.actualObject=d,d}else if("ConnectorTargetEnd"===n&&a){for(u=t.length-1;u>=0;u--)if(l=rv(t[u],!0),t[u]instanceof ry&&(ng(t[u])||ig(l)))return d=this.isTarget(d=t[u],e,n),o.actualObject=d,d}else{if(a&&("Drag"===n||e.eventHandler.tool instanceof Nb)){var f=0;for(u=0;u<t.length;u++){var g=t[u];a!==g&&(g instanceof zf||!r||g.wrapper.bounds.containsPoint(r))&&lg(g)&&(d?(d=f>=g.zIndex?d:g,f=Math.max(f,g.zIndex)):f=(d=g).zIndex)}return d&&"Bpmn"===d.shape.type&&(d=e.selectedItems.nodes.length>0&&"Bpmn"===e.selectedItems.nodes[0].shape.type?d:null),d&&(o.actualObject=d),d}if("Select"!==n&&"Pan"!==n||!e.eventHandler.tool)if("Pan"===n||"LayoutAnimation"===n){for(u=t.length-1;u>=0;u--)if(t[u]instanceof ry||t[u]instanceof zf){var m=this.findTargetElement(t[u].wrapper,r,void 0);if("Pan"===n||m&&(m.id.match("_icon_content_shape$")||m.id.match("_icon_content_rect$")))return t[u]}}else d=t[t.length-1],o&&d&&(o.actualObject=d);else{for(u=t.length-1;u>=0;u--)if(t[u]instanceof zf){var v=t[u-1];if(t[u-1]instanceof ry&&v.ports){var y=this.findTargetElement(v.wrapper,r,void 0);if(y&&(y.id.match("_icon_content_shape$")||y.id.match("_icon_content_rect$")))return v;for(var b=0;b<v.ports.length;b++)if(y&&y.id.match("_"+v.ports[b].id+"$")&&yg(v.ports[b]))return v}}if(o.actualObject=d=t[t.length-1],!e.eventHandler.itemClick(d,!0)&&d.parentId)for(var w=d,C=_b(e,w);w&&(!_b(e,w)||C);)d=w,w=e.nameTable[w.parentId]}}return d},e.prototype.findElementUnderSelectedItem=function(e,t,n){return e instanceof uy?1!==e.nodes.length||e.connectors&&e.connectors.length?e.nodes&&!e.nodes.length||1!==e.connectors.length?null:this.findElementUnderMouse(e.connectors[0],t):this.findElementUnderMouse(e.nodes[0],t):this.findElementUnderMouse(e,t,n)},e.prototype.findElementUnderMouse=function(e,t,n){return this.findTargetElement(e.wrapper,t,n)},e.prototype.findTargetElement=function(e,t,n){for(var i=e.children.length-1;i>=0;i--){var o=e.children[i];if(o&&o.outerBounds.containsPoint(t,n||0)){if(o instanceof Fc){var r=this.findTargetElement(o,t);if(r)return r}if(o.bounds.containsPoint(t,n||0))return o}}return e.bounds.containsPoint(t,n)&&"none"!==e.style.fill?e:null},e}(),Qb=function(e){function t(t,n,i,o){var r=e.call(this,t,n,i,o)||this;return r.objectZIndex=-1,r.zIndexTable={},r.objects=[],r}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"visible",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"lock",void 0),Object(O.__decorate)([Ks()],t.prototype,"objects",void 0),Object(O.__decorate)([Ks()],t.prototype,"addInfo",void 0),Object(O.__decorate)([Ks(-1)],t.prototype,"zIndex",void 0),t}(fd),$b=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},ew=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},tw=function(){function e(e){this.clipboardData={},this.diagramObject={},this.newSelectedObjects={},this.oldSelectedObjects={},this.connectorsTable=[],this.processTable={},this.deepDiffer=new Db,this.isContainer=!1,this.childTable={},this.parentTable={},this.blazor="Blazor",this.blazorInterop="sfBlazor",this.cloneGroupChildCollection=[],this.diagram=e}return Object.defineProperty(e.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),e.prototype.startTransaction=function(e){this.state={element:this.diagram.selectedItems,backup:null},e&&this.diagram.protectPropertyChange(!0),Cy(this.diagram.element.id).style.pointerEvents="none"},e.prototype.endTransaction=function(e){this.state=null,e&&this.diagram.protectPropertyChange(!1),Cy(this.diagram.element.id).style.pointerEvents="all"},e.prototype.setFocus=function(){document.getElementById(this.diagram.element.id).focus()},e.prototype.showTooltip=function(e,t,n,i,o){var r=this;if(o&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var a=void 0,l=rb(this.diagram.selectedItems.setTooltipTemplate);l&&(a=l(e,this.diagram)),n=a instanceof HTMLElement?a.cloneNode(!0):a||n}Ka()&&o&&this.diagram.tooltipObject.close(),e.tooltip&&(this.diagram.tooltipObject.openOn=e.tooltip.openOn),this.diagram.tooltipObject.content=n;var s=Hm(this.diagram,{x:t.x,y:t.y},e,"ConnectTool"===i?"Mouse":"Object");this.diagram.tooltipObject.offsetX=s.x+("ConnectTool"===i?10:0),this.diagram.tooltipObject.offsetY=s.y+10,Ka()?this.diagram.tooltipObject.updateTooltip(this.diagram.element):this.diagram.tooltipObject.dataBind(),o&&setTimeout(function(){r.diagram.tooltipObject.open(r.diagram.element)},1)},e.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},e.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&Sc.ToolTip)},e.prototype.updateSelector=function(){this.diagram.updateSelector()},e.prototype.updateConnectorValue=function(e){if(e.cancel){this.enableCloneObject(!0),this.ismouseEvents(!0),this.insertBlazorObject(e.connector);var t={},n={},i=this.diagram.nameTable[e.connector.id],o="ConnectorSourceEnd"===e.connectorEnd?"sourceID":"targetID",r="ConnectorSourceEnd"===e.connectorEnd?"sourcePortID":"targetPortID",a="ConnectorTargetEnd"===e.connectorEnd,l=a?e.newValue.connectorTargetValue:e.newValue.connectorSourceValue,s=a?e.oldValue.connectorTargetValue:e.oldValue.connectorSourceValue;n[o]=l.nodeId,n[r]=l.portId,t[o]=s.nodeId,t[r]=s.portId,e.cancel&&"ConnectorTargetEnd"!==e.connectorEnd&&(i.sourceID=s.nodeId,e.connector.sourcePortID&&(i.sourcePortID=s.portId),this.diagram.connectorPropertyChange(i,n,t)),e.cancel&&"ConnectorTargetEnd"===e.connectorEnd&&(e.connector.targetPortID&&(i.targetPortID=s.portId),i.targetID=s.nodeId,this.diagram.connectorPropertyChange(i,n,t))}},e.prototype.triggerEvent=function(e,t){return $b(this,void 0,void 0,function(){return ew(this,function(n){switch(n.label){case 0:if(e===jc.drop||e===jc.positionChange||e===jc.connectionChange){if(this.diagram.currentSymbol)return[2];if(e===jc.drop&&(t.source=xv(this.diagram)),this.diagram.currentDrawingObject&&e!==jc.positionChange)return[2]}return[4,this.diagram.triggerEvent(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.dragOverElement=function(e,t){if(this.diagram.currentSymbol){var n={element:xv(e.source),target:xv(e.target),mousePosition:xv(t),diagram:xv(this.diagram)};this.triggerEvent(jc.dragOver,n)}},e.prototype.disConnect=function(e,t,n){var i,o,r=Ka(),a={},l={};if(e instanceof uy?o=e.connectors[0]:e instanceof zf&&this.diagram.currentDrawingObject&&(o=this.diagram.currentDrawingObject),e&&o&&(Eb(this.diagram)||this.diagram.currentDrawingObject))if(Ka()&&this.diagram.insertValue(Yy(o),!1),!t||"ConnectorSourceEnd"!==t&&"ConnectorTargetEnd"!==t){if("OrthoThumb"!==t&&"SegmentEnd"!==t&&(o.sourceID||o.targetID)){a={sourceID:o.sourceID,sourcePortID:o.sourcePortID,targetID:o.targetID,targetPortID:o.targetPortID},o.sourceID="",o.sourcePortID="",o.targetID="",o.targetPortID="",l={sourceID:o.sourceID,sourcePortID:o.sourcePortID,targetID:o.targetID,targetPortID:o.targetPortID};var s={connector:xv(o),oldValue:a,newValue:l,cancel:!1,state:"Changing",connectorEnd:t};Ka()&&(i=s={connector:xv(o),oldValue:{connector:xv(a)},newValue:{connector:xv(l)},cancel:!1,state:"Changed",connectorEnd:t}),r||this.triggerEvent(jc.connectionChange,s),s.cancel?(o.sourceID=a.sourceID,o.sourcePortID=a.sourcePortID,o.targetID=a.targetID,o.targetPortID=a.targetPortID):(this.diagram.connectorPropertyChange(o,a,l),this.diagram.updateDiagramObject(o),s={connector:o,oldValue:a,newValue:l,cancel:!1,state:"Changed",connectorEnd:t},Ka()&&(i=s={connector:xv(o),oldValue:{connector:a},newValue:{connector:l},cancel:!1,state:"Changed",connectorEnd:t}),r||this.triggerEvent(jc.connectionChange,s))}}else{var d="ConnectorSourceEnd"===t?"sourceID":"targetID",c="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";o[d]&&(a[d]=o[d],o[d]="",l[d]=o[d],(o.sourcePortID||o.targetPortID)&&(a[c]=o[c],o[c]="",l[c]=o[c]),i=this.connectionEventChange(o,a,l,t,n))}return i},e.prototype.connectionEventChange=function(e,t,n,i,o){var r,a,l=Ka(),s="ConnectorSourceEnd"===i?"sourceID":"targetID",d="ConnectorSourceEnd"===i?"sourcePortID":"targetPortID";if(this.enableCloneObject){var c=Yy(r=this.diagram.nameTable[n[s]]);this.diagram.insertValue(c,!0)}var u={cancel:!1,state:"Changing",connectorEnd:i,connector:xv(e),oldValue:{nodeId:t[s],portId:t[d]},newValue:{nodeId:n[s],portId:n[d]}};return Ka()&&(u={connector:xv(e),cancel:!1,state:"Changing",connectorEnd:i,oldValue:void 0,newValue:void 0},"ConnectorSourceEnd"===i?(u.oldValue={connectorSourceValue:{portId:t[d],nodeId:t[s]}},u.newValue={connectorSourceValue:{nodeId:n[s],portId:n[d]}}):(u.oldValue={connectorTargetValue:{nodeId:t[s],portId:t[d]}},u.newValue={connectorTargetValue:{nodeId:n[s],portId:n[d]}}),a=u),l||this.triggerEvent(jc.connectionChange,u),u.cancel||Ka()&&o?(e[s]=t[s],e[d]=t[d],n=t):(this.diagram.connectorPropertyChange(e,t,n),this.diagram.updateDiagramObject(e),u={connector:xv(e),oldValue:{nodeId:t[s],portId:t[d]},newValue:{nodeId:n[s],portId:n[d]},cancel:!1,state:"Changing",connectorEnd:i},Ka()&&(u={connector:xv(e),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:i},"ConnectorSourceEnd"===i?(u.newValue={connectorSourceValue:{portId:n[d],nodeId:n[s]}},u.oldValue={connectorSourceValue:{portId:t[d],nodeId:t[s]}}):(u.oldValue={connectorTargetValue:{nodeId:t[s],portId:t[d]}},u.newValue={connectorTargetValue:{portId:n[d],nodeId:n[s]}}),a=u)),this.enableCloneObject&&void 0===r&&(c=Yy(r=this.diagram.nameTable[t[s]]),this.diagram.insertValue(c,!0)),a},e.prototype.insertBlazorObject=function(e,t){var n,i;if(e instanceof uy){this.oldSelectedObjects=mv(this.diagram);for(var o=0;o<e.nodes.length;o++)n=this.diagram.getObject(e.nodes[o].id),this.diagram.insertValue(Yy(n),!0);for(o=0;o<e.connectors.length;o++)i=this.diagram.getObject(e.connectors[o].id),this.diagram.insertValue(Yy(i),!1)}else e=this.diagram.getObject(e.id),this.diagram.insertValue(Yy(e),e instanceof ry)},e.prototype.updatePropertiesToBlazor=function(e,t){this.enableCloneObject(!1),this.ismouseEvents(!1),this.getBlazorOldValues(e,t),this.updateBlazorSelector()},e.prototype.insertSelectedObjects=function(){this.oldSelectedObjects=mv(this.diagram)},e.prototype.findTarget=function(e,t,n,i){if(t instanceof ry){if(e&&e.id===t.id+"_content")return t;if(n&&"Bpmn"===t.shape.type&&(!Ka()&&"Activity"===t.shape.shape||Ka()&&"Activity"===t.shape.bpmnShape)&&"Transaction"===t.shape.activity.subProcess.type){var o=t.shape.activity.subProcess.transaction;if(o.success.visible&&0===e.id.indexOf(t.id+"_success"))return o.success;if(o.cancel.visible&&0===e.id.indexOf(t.id+"_cancel"))return o.cancel;if(o.failure.visible&&0===e.id.indexOf(t.id+"_failure"))return o.failure}if(e instanceof Yc)for(var r=0;r<t.ports.length;r++){var a=t.ports[r];if(e.id===t.id+"_"+a.id)return a}}if(!i){var l=void 0;for(r=0;r<t.annotations.length;r++)if(e.id===t.id+"_"+(l=t.annotations[r]).id)return l}return t},e.prototype.canDisconnect=function(e,t,n,i){var o;return t.source instanceof uy?o=t.source.connectors[0]:t.source instanceof zf&&this.diagram.currentDrawingObject&&(o=this.diagram.currentDrawingObject),this.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===e,!0),o["ConnectorSourceEnd"===e?"sourceID":"targetID"]!==i||o["ConnectorSourceEnd"===e?"sourcePortID":"targetPortID"]!==n},e.prototype.changeAnnotationDrag=function(e){var t;if(e.source&&e.source.connectors&&e.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e.source.connectors[0])>-1){e.source instanceof uy&&(t=e.source.connectors[0]);var n=t.id.split("_"),i=n[n.length-3]||n[0];if(e.target&&e.target.id!==i&&(!Ka()&&"TextAnnotation"!==e.target.shape.shape||Ka()&&"TextAnnotation"!==e.target.shape.bpmnShape)){this.diagram.startGroupAction();var o=this.getAnnotation(this.diagram.nameTable[n[0]],n[1]),r={id:n[1]+Fy(),angle:jd.findAngle(t.intermediatePoints[0],t.intermediatePoints[1]),text:o.text,length:jd.distancePoints(t.intermediatePoints[0],t.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:o.nodeId},a=new Yv(e.target.shape,"annotations",r,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[t.targetID],this.diagram),this.diagram.refreshCanvasLayers(),a.id=n[1],this.diagram.addTextAnnotation(a,e.target),this.diagram.endGroupAction()}else t&&(t.sourceID=i,this.diagram.connectorPropertyChange(t,{},{sourceID:i}),this.diagram.updateDiagramObject(t))}},e.prototype.connect=function(e,t,n){var i,o,r,a,l={},s={};t.source instanceof uy?r=t.source.connectors[0]:t.source instanceof zf&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);var d=this.findTarget(t.targetWrapper||t.sourceWrapper,t.target||t.actualObject,"ConnectorSourceEnd"===e,!0),c="ConnectorSourceEnd"===e?"sourceID":"targetID",u="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";if(d instanceof ry)s[c]=r[c],r[c]=d.id,l[c]=r[c],s[u]=r[u],a=this.connectionEventChange(r,s,l,e,n);else{i=r[c],o=r[u],r[u]=d.id,r[c]=t.target&&t.target.id||t.actualObject.id,l[c]=r[c],l[u]=r[u];var h={connector:xv(r),oldValue:{nodeId:i,portId:o},newValue:{nodeId:l[c],portId:l[u]},cancel:!1,state:"Changing",connectorEnd:e};Ka()&&(h={connector:xv(r),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:e},"ConnectorSourceEnd"===e?(h.oldValue={connectorSourceValue:{portId:s[u],nodeId:s[c]}},h.newValue={connectorSourceValue:{portId:l[u],nodeId:l[c]}}):(h.newValue={connectorTargetValue:{portId:l[u],nodeId:l[c]}},h.oldValue={connectorTargetValue:{portId:s[u],nodeId:s[c]}}),a=h),this.triggerEvent(jc.connectionChange,h),h.cancel||Ka()&&n?(r[c]=i,r[u]=o,l[c]=i,l[u]=o):(this.diagram.connectorPropertyChange(r,s,l),this.diagram.updateDiagramObject(r),h={connector:xv(r),oldValue:{nodeId:i,portId:o},newValue:{nodeId:l[c],portId:l[u]},cancel:!1,state:"Changing",connectorEnd:e},Ka()&&(h={newValue:void 0,connector:xv(r),oldValue:void 0,cancel:!1,state:"Changing",connectorEnd:e},"ConnectorSourceEnd"===e?(h.oldValue={connectorSourceValue:{portId:s[u],nodeId:s[c]}},h.newValue={connectorTargetValue:{portId:l[u],nodeId:l[c]}}):(h.oldValue={connectorTargetValue:{portId:s[u],nodeId:s[c]}},h.newValue={connectorTargetValue:{portId:l[u],nodeId:l[c]}})))}return this.renderHighlighter(t,void 0,"ConnectorSourceEnd"===e),a},e.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},e.prototype.UpdateBlazorDiagramModelLayers=function(e,t){var n=xv(e);if(window&&window.Blazor){var i={methodName:"UpdateBlazorDiagramModelLayers",diagramobj:JSON.stringify(n),isRemove:t};this.diagram.isLoading||window.sfBlazor.updateBlazorProperties(i,this.diagram)}},e.prototype.addLayer=function(e,t,n){void 0===n&&(n=!0),e.id=e.id||Fy(),e.zIndex=this.diagram.layers.length;var i=this.diagram.allowServerDataBinding;if(this.diagram.enableServerDataBinding(!1),e=new Qb(this.diagram,"layers",e,!0),this.diagram.enableServerDataBinding(i),e.objectZIndex=-1,e.zIndexTable={},this.diagram.layers.push(e),n&&this.UpdateBlazorDiagramModelLayers(e,!1),this.diagram.layerZIndexTable[e.zIndex]=e.id,this.diagram.activeLayer=e,t)for(var o=0;o<t.length;o++)this.diagram.add(t[o])},e.prototype.getObjectLayer=function(e){for(var t=this.diagram.layers,n=0;n<t.length;n++)if(t[n].objects.indexOf(e)>-1)return t[n];return this.diagram.activeLayer},e.prototype.getLayer=function(e){for(var t=this.diagram.layers,n=0;n<t.length;n++)if(t[n].id===e)return t[n]},e.prototype.removeLayer=function(e,t){void 0===t&&(t=!0);var n=this.getLayer(e);if(n){for(var i=this.diagram.layers.indexOf(n),o=n.objects,r=o.length-1;r>=0;r--)this.diagram.unSelect(this.diagram.nameTable[o[r]]),this.diagram.remove(this.diagram.nameTable[o[r]]),"default_layer"!==n.id&&this.diagram.activeLayer.id===e&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);t&&this.UpdateBlazorDiagramModelLayers(this.diagram.layers[i],!0),delete this.diagram.layerZIndexTable[n.zIndex],this.diagram.layers.splice(i,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.moveObjects=function(e,t){var n,i=this.getLayer(t)||this.diagram.activeLayer;this.diagram.setActiveLayer(i.id);for(var o=0,r=e;o<r.length;o++){var a=r[o];this.getObjectLayer(a).objects.indexOf(a)>-1&&(this.diagram.unSelect(n=this.diagram.nameTable[a]),this.diagram.remove(this.diagram.nameTable[a]),this.diagram.add(n))}},e.prototype.cloneLayer=function(e){var t=this.getLayer(e);if(t){var n=[],i={id:e+"_"+Fy(),objects:[],visible:!0,lock:!1};this.addLayer(i,null,!0),i.zIndex=this.diagram.layers.length-1;for(var o=0,r=t.objects;o<r.length;o++)n.push(this.diagram.nameTable[r[o]]);this.paste(n)}},e.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},e.prototype.copyObjects=function(){var e=[],t=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){e=this.diagram.selectedItems.connectors;for(var n=0;n<e.length;n++){var i;i=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e[n])>-1?Yy(this.diagram.nameTable[e[n].targetID]):Yy(e[n]),t.push(i)}}if(this.diagram.selectedItems.nodes.length>0)for(e=e.concat(this.diagram.selectedItems.nodes),n=0;n<this.diagram.selectedItems.nodes.length;n++)if(!e[n].isPhase){var o=Yy(this.diagram.selectedItems.nodes[n]);o.wrapper&&o.offsetX!==o.wrapper.offsetX&&(o.offsetX=o.wrapper.offsetX),o.wrapper&&o.offsetY!==o.wrapper.offsetY&&(o.offsetY=o.wrapper.offsetY),this.copyProcesses(o),t.push(Yy(o));var r=Qd();if(ec(r,-o.rotateAngle,o.offsetX,o.offsetY),o.children){for(var a=this.clipboardData.childTable,l=void 0,s=this.getAllDescendants(o,[],!0),d=0;d<s.length;d++){var c=a[(l=this.diagram.nameTable[s[d].id]).id]=Yy(l),u=$d(r,{x:c.wrapper.offsetX,y:c.wrapper.offsetY});l instanceof ry&&(c.offsetX=u.x,c.offsetY=u.y,c.rotateAngle-=o.rotateAngle)}this.clipboardData.childTable=a}if("SwimLane"===o.shape.type){var h=this.diagram.getObject(this.diagram.selectedItems.nodes[n].id),p=(a=this.clipboardData.childTable,Zg(this.diagram,h.wrapper.children[0]));for(d=0;d<p.length;d++){var f=this.diagram.getObject(p[d]);a[f.id]=Yy(f)}}if(o&&o.isLane){a=this.clipboardData.childTable,h=this.diagram.getObject(o.parentId);var g=Cm(o,this.diagram);a[o.id]=Yy(g),a[o.id].width=h.wrapper.actualSize.width}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var m=0,v=e;m<v.length;m++){var y=v[m];this.diagram.nameTable[y.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(y)>-1?this.diagram.remove(this.diagram.nameTable[y.targetID]):this.diagram.remove(y))}this.endGroupAction()}return this.sortByZIndex(t,"zIndex"),t},e.prototype.copyProcesses=function(e){if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0){for(var t=0,n=e.shape.activity.subProcess.processes;t<n.length;t++){var i=n[t];this.processTable[i]=Yy(this.diagram.nameTable[i]),this.processTable[i].shape.activity.subProcess.processes&&this.processTable[i].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[i])}this.clipboardData.processTable=this.processTable}},e.prototype.group=function(){this.oldSelectedObjects=mv(this.diagram);var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Mc.Group;var t,n=[],i={};i.id="group"+Fy(),(i=new ry(this.diagram,"nodes",i,!0)).children=[],n=(n=this.diagram.selectedItems.nodes).concat(this.diagram.selectedItems.connectors);for(var o=0;o<n.length;o++)n[o].parentId||i.children.push(n[o].id);(t=this.diagram.add(i))&&this.select(t),this.addHistoryEntry({type:"Group",undoObject:i,redoObject:i,category:"Internal"}),this.diagram.diagramActions=this.diagram.diagramActions&~Mc.Group,this.diagram.protectPropertyChange(e),this.updateBlazorSelector()},e.prototype.unGroup=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Mc.Group;var n=[];e?n.push(e):n=this.diagram.selectedItems.nodes,this.diagram.startGroupAction();for(var i=0;i<n.length;i++){for(var o=n[i],r=Yy(o),a=[],l=0;l<o.children.length;l++)a.push(o.children[l]);if(o.children){o.ports&&o.ports.length>0&&this.diagram.removePorts(o,o.ports),o.annotations&&o.annotations.length>0&&(!Ka()||Ka()&&""!==o.annotations[0].content)&&this.diagram.removeLabels(o,o.annotations);for(var s=this.diagram.nameTable[o.parentId],d=o.children.length-1;d>=0;d--)this.diagram.nameTable[o.children[d]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[o.children[d]],o),o.parentId&&o.children[d]&&this.diagram.addChild(s,o.children[d]);this.resetDependentConnectors(o.inEdges,!0),this.resetDependentConnectors(o.outEdges,!1),this.diagram.diagramActions&Mc.UndoRedo||this.addHistoryEntry({type:"UnGroup",undoObject:r,redoObject:r,category:"Internal"}),o.parentId&&this.diagram.deleteChild(o,s)}this.diagram.removeNode(o,a),this.clearSelection()}this.diagram.endGroupAction(),this.diagram.diagramActions=this.diagram.diagramActions&~Mc.Group,this.diagram.protectPropertyChange(t)},e.prototype.resetDependentConnectors=function(e,t){for(var n=0;n<e.length;n++){var i=this.diagram.nameTable[e[n]],o=Yy(i),r=void 0;t?(i.targetID="",i.targetPortID="",r={targetID:i.targetID,targetPortID:i.targetPortID}):(i.sourceID="",i.sourcePortID="",r={sourceID:i.sourceID,sourcePortID:i.sourcePortID}),this.diagram.connectorPropertyChange(i,{},r);var a={type:"ConnectionChanged",undoObject:{connectors:[o],nodes:[]},redoObject:{connectors:[Yy(i)],nodes:[]},category:"Internal"};this.diagram.diagramActions&Mc.UndoRedo||this.addHistoryEntry(a)}},e.prototype.paste=function(e){if(e||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var t=e?this.getNewObject(e):this.clipboardData.clipObject;if(t){var n=1!==t.length,i=!1,o={},r={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(i=!0,this.diagram.historyManager.startGroupAction());for(var a=0,l=t;a<l.length;a++)o[(c=l[a]).id]=c;var s=[];n&&(this.diagram.isServerUpdate=!0);for(var d=0;d<t.length;d++){var c;if(hv(c=t[d])===zf){var u=Yy(c),h=u.sourceID;u.sourceID="",o[h]&&r[h]&&(u.sourceID=r[h]),h=u.targetID,u.targetID="",o[h]&&r[h]&&(u.targetID=r[h]);var p=this.cloneConnector(u,n);s.push(p),r[c.id]=p.id}else{var f=this.cloneNode(c,n);if(Ka()&&f&&f.children&&f.children.length>0?(s=s.concat(this.cloneGroupChildCollection),this.cloneGroupChildCollection=[]):s.push(f),f){r[c.id]=f.id;var g=c.inEdges;if(g)for(var m=0,v=g;m<v.length;m++)o[w=v[m]]&&r[w]&&((C=this.diagram.nameTable[r[w]]).targetID=r[c.id],this.diagram.connectorPropertyChange(C,{targetID:"",targetPortID:""},{targetID:C.targetID,targetPortID:C.targetPortID}));if(g=c.outEdges)for(var y=0,b=g;y<b.length;y++){var w,C;o[w=b[y]]&&r[w]&&((C=this.diagram.nameTable[r[w]]).sourceID=r[c.id],this.diagram.connectorPropertyChange(C,{sourceID:"",sourcePortID:""},{sourceID:C.sourceID,sourcePortID:C.sourcePortID}))}}}}n&&(this.diagram.isServerUpdate=!1,this.diagram.UpdateBlazorDiagramModelCollection(t[0],s),this.getBlazorOldValues(),this.diagram.select(s,!0)),!0===i&&(this.diagram.historyManager.endGroupAction(),i=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},e.prototype.getNewObject=function(e){var t,n=[];this.clipboardData.pasteIndex=1;for(var i=0;i<e.length;i++)t=Yy(e[i]),n.push(t);return n},e.prototype.cloneConnector=function(e,t){var n,i=Yy(e);return this.translateObject(i),i.zIndex=-1,n=this.diagram.add(i),this.diagram.isServerUpdate||this.selectObjects([n],t),n},e.prototype.cloneNode=function(e,t,n,i){var o,r,a={},l=Yy(e),s=this.diagram.nameTable[e.parentId];if(e.shape&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length&&(r=l.shape.activity.subProcess.processes,l.zIndex=-1,l.shape.activity.subProcess.processes=void 0),e.shape&&"SwimLane"===e.shape.type)pm(e,this.diagram,this.clipboardData);else if(s&&"SwimLane"===s.shape.type)pm(Yy(s),this.diagram,this.clipboardData,e,!0);else if(!e.children||!e.children.length||n&&n.length)if(e.shape&&(!Ka()&&"TextAnnotation"===e.shape.shape||Ka()&&"TextAnnotation"===e.shape.bpmnShape)&&-1!==e.id.indexOf("_textannotation_")&&this.diagram.nameTable[e.id])for(var d=e.id.split("_textannotation_"),c=void 0,u=this.diagram.nameTable[e.id],h=0;h<u.inEdges.length;h++){var p=this.diagram.nameTable[u.inEdges[h]];if(p){var f=this.getAnnotation(c=this.diagram.nameTable[p.sourceID],d[1]),g={id:d[1]+Fy(),angle:f.angle,text:f.text,length:f.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:f.nodeId};this.diagram.addTextAnnotation(g,c)}}else this.translateObject(l,i),l.zIndex=-1,n&&(l.children=n),o=this.diagram.add(l);else o=this.cloneGroup(e,t);for(var m=0,v=Object.keys(a);m<v.length;m++)this.diagram.add(a[v[m]]);return r&&r.length&&(o.shape.activity.subProcess.processes=r,this.cloneSubProcesses(o)),o&&!this.diagram.isServerUpdate&&this.selectObjects([o],t),o},e.prototype.getAnnotation=function(e,t){var n=e.shape.annotations;if(n&&n.length)for(var i=0;i<=n.length;i++)if(n[i].id===t)return n[i]},e.prototype.cloneSubProcesses=function(e){var t=[],n={};if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length)for(var i=e.shape.activity.subProcess.processes,o=0;o<i.length;o++){for(var r=this.diagram.nameTable[i[o]]||this.clipboardData.processTable[i[o]],a=0,l=r.outEdges;a<l.length;a++)t.indexOf(c=l[a])<0&&t.push(c);for(var s=0,d=r.inEdges;s<d.length;s++){var c;t.indexOf(c=d[s])<0&&t.push(c)}var u=Yy(this.clipboardData.processTable[i[o]]);u.processId=e.id;var h=this.cloneNode(u,!1);n[i[o]]=h.id,i[o]=h.id,this.diagram.addProcess(h,e.id);for(var p=0,f=t;p<f.length;p++){var g=f[p],m=Yy(this.diagram.nameTable[g]||this.diagram.connectorTable[g]);n[m.sourceID]&&n[m.targetID]&&(m.zIndex=-1,m.id+=Fy(),m.sourceID=n[m.sourceID],m.targetID=n[m.targetID],t.splice(t.indexOf(g),1),this.diagram.add(m))}}},e.prototype.cloneGroup=function(e,t){var n,i=[],o=[],r=[],a=[];o=o.concat(e.children);var l=Fy(),s=[];if(this.diagram.blazorActions|=wc.GroupClipboardInProcess,this.clipboardData.childTable||e.children.length>0)for(var d=0;d<o.length;d++){var c;(c=this.clipboardData.childTable?this.clipboardData.childTable[o[d]]:this.diagram.nameTable[o[d]]).parentId="",c&&(hv(c)===zf?r.push(c):(n=this.cloneNode(c,t,void 0,l),a.push(c.id),i.push(n.id),s.push(n)))}for(var u=0;u<r.length;u++){if(r[u].sourceID||r[u].targetID)for(var h=0;h<a.length;h++)r[u].sourceID===a[h]&&(r[u].sourceID+=l),r[u].targetID===a[h]&&(r[u].targetID+=l);n=this.cloneConnector(r[u],t),i.push(n.id),s.push(n)}var p=this.cloneNode(e,t,i);return s.push(p),p&&p.container&&p.shape&&"UmlClassifier"===p.shape.type&&(this.diagram.updateDiagramObject(p),p.wrapper.measure(new Bd)),this.diagram.blazorActions&=~wc.GroupClipboardInProcess,this.diagram.isServerUpdate?this.cloneGroupChildCollection=s:this.diagram.UpdateBlazorDiagramModelCollection(void 0,s,void 0,!0),p},e.prototype.translateObject=function(e,t){e.id+=t||Fy();var n=10*this.clipboardData.pasteIndex;if(hv(e)===zf){if(e.sourcePoint={x:e.sourcePoint.x+n,y:e.sourcePoint.y+n},e.targetPoint={x:e.targetPoint.x+n,y:e.targetPoint.y+n},"Bezier"===e.type)for(var i=e.segments,o=0;o<i.length;o++)jd.isEmptyPoint(i[o].point1)||(i[o].point1={x:i[o].point1.x+n,y:i[o].point1.y+n}),jd.isEmptyPoint(i[o].point2)||(i[o].point2={x:i[o].point2.x+n,y:i[o].point2.y+n});if(("Straight"===e.type||"Bezier"===e.type)&&e.segments&&e.segments.length>0)for(i=e.segments,o=0;o<i.length-1;o++)i[o].point.x+=n,i[o].point.y+=n}else e.offsetX+=n,e.offsetY+=n},e.prototype.drawObject=function(e){var t,n,i;Ka()&&(t=this.diagram.getProtectPropertyChangeValue(),this.diagram.protectPropertyChange(!0)),e&&e.shape&&"Text"===e.shape.type&&(e.width=this.diagram.drawingObject.width?this.diagram.drawingObject.width:50,e.height=this.diagram.drawingObject.height?this.diagram.drawingObject.height:20),i=Yy(this.diagram.drawingObject);for(var o=0,r=Object.keys(e);o<r.length;o++){var a=r[o];i[a]=e[a]}return hv(this.diagram.drawingObject)===ry?(n=new ry(this.diagram,"nodes",i,!0)).id=(this.diagram.drawingObject.id||"node")+Fy():(n=new zf(this.diagram,"connectors",i,!0)).id=(this.diagram.drawingObject.id||"connector")+Fy(),Ka()&&Im(n,i,hv(this.diagram.drawingObject)===ry?this.diagram.nodeDefaults:this.diagram.connectorDefaults),this.diagram.initObject(n),this.diagram.updateDiagramObject(n),this.diagram.currentDrawingObject=n,Ka()&&this.diagram.protectPropertyChange(t),n},e.prototype.addObjectToDiagram=function(e){var t;this.diagram.removeFromAQuad(e),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[e.id]),delete this.diagram.nameTable[e.id],t=this.diagram.add(e),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([t]),e&&!hg(this.diagram)&&(this.diagram.tool&=~Oc.DrawOnce,this.diagram.currentDrawingObject=void 0)},e.prototype.enableServerDataBinding=function(e){this.diagram.enableServerDataBinding(e)},e.prototype.addText=function(e,t){var n=this.diagram.findElementUnderMouse(e,t);this.diagram.startTextEdit(e,n instanceof Gc?n.id.split("_")[1]:void 0)},e.prototype.updateArgsObject=function(e,t,n){if(e)for(var i=0;i<e.length;i++)hv(e[i])===zf?n.connectorCollection.push(e[i].id):n.nodeCollection.push(e[i].id)},e.prototype.updateSelectionChangeEventArgs=function(e,t,n){if(Ka()){var i=(e={cause:this.diagram.diagramActions,newValue:{},oldValue:{},state:e.state,type:e.type,cancel:!1}).oldValue,o=e.newValue;return i.connectors=[],i.nodes=[],o.connectors=[],o.nodes=[],i.nodeCollection=[],i.connectorCollection=[],o.nodeCollection=[],o.connectorCollection=[],this.updateArgsObject(this.getSelectedObject(),e,o),this.updateArgsObject(n,e,i),e}return e},e.prototype.isUserHandle=function(e){var t=this.diagram.selectedItems;if(t.wrapper&&tv(t.constraints,"UserHandle"))for(var n=0,i=t.userHandles;n<i.length;n++){var o=i[n];if(o.visible&&Sb(e,$m(t,o,this.diagram.scroller.transform),o.size/(2*this.diagram.scroller.transform.scale)))return!0}return!1},e.prototype.selectObjects=function(e,t,n){return $b(this,void 0,void 0,function(){var i,o,r,a,l,s,d,c,u,h;return ew(this,function(p){switch(p.label){case 0:if(i={oldValue:n||this.getSelectedObject(),newValue:e,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1},this.diagram.enableServerDataBinding(!1),Ka()?this.oldSelectedObjects=mv(this.diagram):this.diagram.triggerEvent(jc.selectionChange,i),o=cg(this.diagram),(r=dg(this.diagram))||o){if(!o&&(e.length>1||t&&1===e.length)){if(1!==e.length)return[2];this.clearSelection()}if(!(r||1!==e.length||t&&Tb(this.diagram)))return this.clearSelection(),[2]}if(i.cancel)return[3,5];for(h=0;h<e.length;h++)if(a=e[h])if(Tb(this.diagram)){if((h>0||t)&&a.children&&!a.parentId)for(l=0;l<this.diagram.selectedItems.nodes.length;l++)(s=this.diagram.nameTable[this.diagram.selectedItems.nodes[l].parentId])&&(s=this.findParent(s))&&a.id===s.id&&this.selectGroup(a);this.selectProcesses(a),this.selectBpmnSubProcesses(a)&&this.select(a,h>0||t,!0)}else this.select(a,h>0||t,!0);return i={oldValue:n||[],newValue:this.getSelectedObject(),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.diagram.renderSelector(t||e&&e.length>1),this.updateBlazorSelectorModel(n),Ka()&&this.diagram.selectionChange&&(i=this.updateSelectionChangeEventArgs(i,e,n||[]),this.updateBlazorSelector()),Ka()?[3,1]:(this.diagram.triggerEvent(jc.selectionChange,i),[3,4]);case 1:return d=void 0,window&&window[this.blazor]&&this.diagram.selectionChange?(c={EventName:"selectionChange",args:JSON.stringify(i)},[4,window[this.blazorInterop].updateBlazorDiagramEvents(c,this.diagram)]):[3,3];case 2:d=p.sent(),p.label=3;case 3:if(d&&d.cancel&&(u=[],d.oldValue.nodes.length>0&&(u=d.oldValue.nodes),d.oldValue.connectors.length>0&&(u=u.concat(d.oldValue.connectors)),u))if(u.length>0)for(h=0;h<u.length;h++)this.select(this.diagram.nameTable[u[h].id],0!==h&&u.length>1);else this.clearSelection();p.label=4;case 4:this.diagram.enableServerDataBinding(!0),this.updateBlazorSelector(),p.label=5;case 5:return[2]}})})},e.prototype.updateBlazorSelector=function(){if(Ka()&&this.oldSelectedObjects){this.newSelectedObjects=mv(this.diagram);var e=this.deepDiffer.map(Yy(this.newSelectedObjects),this.oldSelectedObjects),t=this.deepDiffer.frameObject({},e),n=this.deepDiffer.removeEmptyValues(t);n.nodes=[];for(var i=0;i<this.diagram.selectedItems.nodes.length;i++)n.nodes.push(this.diagram.selectedItems.nodes[i].id);for(n.connectors=[],i=0;i<this.diagram.selectedItems.connectors.length;i++)n.connectors.push(this.diagram.selectedItems.connectors[i].id);window&&window.Blazor&&window.sfBlazor.updateBlazorProperties({methodName:"UpdateBlazorProperties",diagramobj:{selectedItems:n}},this.diagram),this.oldSelectedObjects=void 0,this.newSelectedObjects=void 0}},e.prototype.findParent=function(e){return e.parentId&&this.findParent(e=this.diagram.nameTable[e.parentId]),e},e.prototype.selectProcesses=function(e){if(this.hasProcesses(e))for(var t=e.shape.activity.subProcess.processes,n=0;n<t.length;n++){var i=this.diagram.nameTable[t[n]];this.hasProcesses(i)&&this.selectObjects([i],!0),this.unSelect(i)}},e.prototype.selectGroup=function(e){for(var t=0;t<e.children.length;t++){var n=this.diagram.nameTable[e.children[t]];n.children&&this.selectGroup(n),this.unSelect(this.diagram.nameTable[e.children[t]])}},e.prototype.selectBpmnSubProcesses=function(e){var t,n=!0;if(e.processId)n=!_b(this.diagram,this.diagram.nameTable[e.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[e.processId]);else if(e instanceof zf){if(e.sourceID&&this.diagram.nameTable[e.sourceID]&&this.diagram.nameTable[e.sourceID].processId&&(t=this.diagram.nameTable[e.sourceID].processId),e.targetID&&this.diagram.nameTable[e.targetID]&&this.diagram.nameTable[e.targetID].processId&&(t=this.diagram.nameTable[e.targetID].processId),t){if(_b(this.diagram,this.diagram.nameTable[t]))return!1;n=this.selectBpmnSubProcesses(this.diagram.nameTable[t])}}else e.parentId&&this.diagram.nameTable[e.parentId]&&"UmlClassifier"===this.diagram.nameTable[e.parentId].shape.type&&_b(this.diagram,this.diagram.nameTable[e.parentId])&&(n=!1);return n},e.prototype.hasProcesses=function(e){return!!(e&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)},e.prototype.select=function(e,t,n){var i=this.getObjectLayer(e.id);if(Xf(e)&&!(e instanceof uy)&&!_b(this.diagram,e)&&i&&!i.lock&&i.visible&&e.wrapper.visible){(t=!!Tb(this.diagram)&&t)||this.clearSelection(),this.diagram.enableServerDataBinding(!1);var o=this.diagram.selectedItems;if(e instanceof ry?o.nodes.push(e.isHeader?this.diagram.nameTable[e.parentId]:e):o.connectors.push(e),t)o.wrapper.rotateAngle=o.rotateAngle=0,o.wrapper.children.push(e.wrapper);else if(o.init(this.diagram),1===o.nodes.length&&0===o.connectors.length){var r=fm(this.diagram,o);r&&(o.wrapper.children[0]=r),o.rotateAngle=o.nodes[0].rotateAngle,o.wrapper.rotateAngle=o.nodes[0].rotateAngle,o.wrapper.pivot=o.nodes[0].pivot}n||this.diagram.renderSelector(t),this.diagram.enableServerDataBinding(!0)}},e.prototype.getObjectCollectionId=function(e,t){for(var n=[],i=0,o=e?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;!t&&i<o.length;)n[i]=o[i].id,i++;return n},e.prototype.updateBlazorSelectorModel=function(e,t){if(window&&window.sfBlazor){for(var n=0,i=[];e&&n<e.length;)i[n]=e[n].id,n++;n=0;var o=xv({nodes:this.getObjectCollectionId(!0,t),connectors:this.getObjectCollectionId(!1,t)});window.sfBlazor.updateDiagramCollection&&window.sfBlazor.updateDiagramCollection.call(this.diagram,"selectedItems",o,i,!1,!0)}},e.prototype.labelSelect=function(e,t){this.oldSelectedObjects=mv(this.diagram);var n=this.diagram.selectedItems,i=this.diagram.allowServerDataBinding;this.diagram.allowServerDataBinding=!1,n.nodes=n.connectors=[],this.diagram.allowServerDataBinding=i,e instanceof ry?n.nodes[0]=e:n.connectors[0]=e,n.annotation=this.findTarget(t,e),n.init(this.diagram),this.diagram.renderSelector(!1),this.updateBlazorSelector()},e.prototype.unSelect=function(e){var t=[];t.push(e);var n={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||Ka()||this.diagram.triggerEvent(jc.selectionChange,n),_b(this.diagram,e)){var i=this.diagram.selectedItems,o=void 0;if(e instanceof ry?(o=i.nodes.indexOf(e,0),i.nodes.splice(o,1)):(o=i.connectors.indexOf(e,0),i.connectors.splice(o,1)),n={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(t),!(n={oldValue:xv(t),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:n.cancel}).cancel&&(o=i.wrapper.children.indexOf(e.wrapper,0),i.wrapper.children.splice(o,1),this.diagram.updateSelector(),!this.diagram.currentSymbol))if(Ka()){if(n=this.updateSelectionChangeEventArgs(n,[],t),this.updateBlazorSelector(),window&&window[this.blazor]&&this.diagram.selectionChange){var r={EventName:"selectionChange",args:JSON.stringify(n)};window[this.blazorInterop].updateBlazorDiagramEvents(r,this.diagram)}}else this.diagram.triggerEvent(jc.selectionChange,n)}},e.prototype.getChildElements=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i.children&&i.children.length>0?t.concat(this.getChildElements(i.children)):(t.push(i.id),i instanceof Gc&&t.push(i.id+"_text"))}return t},e.prototype.moveSvgNode=function(e,t){var n=vy(t+"_groupElement",this.diagram.element.id),i=vy(e+"_groupElement",this.diagram.element.id);n.parentNode.insertBefore(i,n)},e.prototype.sendLayerBackward=function(e){var t=this.getLayer(e);if(t&&0!==t.zIndex){var n=t.zIndex;if("SVG"===this.diagram.mode){var i=t.objects,o=this.getLayer(this.diagram.layerZIndexTable[n-1]).objects[0];if(o)for(var r=0,a=i;r<a.length;r++)this.moveSvgNode(a[r],o)}var l=this.getLayer(this.diagram.layerZIndexTable[n-1]);l.zIndex=l.zIndex+1,t.zIndex=t.zIndex-1;var s=this.diagram.layerZIndexTable[n];this.diagram.layerZIndexTable[n]=this.diagram.layerZIndexTable[n-1],this.diagram.layerZIndexTable[n-1]=s,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.bringLayerForward=function(e){var t=this.getLayer(e);if(t&&t.zIndex<this.diagram.layers.length-1){var n=t.zIndex,i=this.getLayer(this.diagram.layerZIndexTable[n+1]);if("SVG"===this.diagram.mode)for(var o=t.objects[0],r=0,a=i.objects;r<a.length;r++){var l=a[r];l&&this.moveSvgNode(l,o)}i.zIndex=i.zIndex-1,t.zIndex=t.zIndex+1;var s=this.diagram.layerZIndexTable[n];this.diagram.layerZIndexTable[n]=this.diagram.layerZIndexTable[n+1],this.diagram.layerZIndexTable[n+1]=s,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.sendToBack=function(e){if(this.diagram.protectPropertyChange(!0),Tb(this.diagram)||e){var t=e&&e.id,n=this.diagram.nameTable[t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id)].zIndex,i=this.diagram.layers.indexOf(this.getObjectLayer(t)),o=this.diagram.layers[i].zIndexTable,r=Yy(this.diagram.selectedItems);if(1!==this.diagram.nodes.length&&(void 0===this.diagram.nameTable[t].children||this.checkObjectBehind(t,o,n))){for(var a=n;a>0;a--)o[a]&&(o[a-1]?(o[a]=o[a-1],this.diagram.nameTable[o[a]].zIndex=a):(o[a-1]=o[a],this.diagram.nameTable[o[a-1]].zIndex=a,delete o[a]));if(o[0]=this.diagram.nameTable[t].id,this.diagram.nameTable[t].zIndex=0,"SVG"===this.diagram.mode){var l=o[a=1];for(l=this.resetTargetNode(t,l,a,o);!l&&a<n;)l=o[++a];l=this.diagram.nameTable[l].parentId?this.checkParentExist(l):l,this.moveSvgNode(t,l),this.updateNativeNodeIndex(t)}else this.diagram.refreshCanvasLayers();var s=Yy(this.diagram.selectedItems);this.diagram.diagramActions&Mc.UndoRedo||this.addHistoryEntry({type:"SendToBack",category:"Internal",undoObject:r,redoObject:s})}}this.diagram.protectPropertyChange(!1),Ka()&&this.getZIndexObjects()},e.prototype.resetTargetNode=function(e,t,n,i){return"SwimLane"===this.diagram.nameTable[e].shape.type&&void 0!==this.diagram.nameTable[t].parentId&&""!==this.diagram.nameTable[t].parentId&&this.diagram.nameTable[this.diagram.nameTable[t].parentId].isLane?this.resetTargetNode(e,t=i[n+=1],n,i):t},e.prototype.getZIndexObjects=function(){var e,t,n=[];for(e=0;e<this.diagram.nodes.length;e++)n.push(this.diagram.nodes[e]);for(t=0;t<this.diagram.connectors.length;t++)n.push(this.diagram.connectors[t]);this.updateBlazorZIndex(n)},e.prototype.updateBlazorZIndex=function(e){var t,n=[],i=[];if(e&&e.length>0)for(t=0;t<e.length;t++){var o=e[t];o instanceof ry?n.push(this.getBlazorObject(o)):o instanceof zf&&i.push(this.getBlazorObject(o))}window&&window.Blazor&&window.sfBlazor.updateBlazorProperties({methodName:"UpdateBlazorProperties",diagramobj:{nodes:n,connectors:i}},this.diagram)},e.prototype.getBlazorObject=function(e){return{sfIndex:Gy(this.diagram,e.id),zIndex:e.zIndex}},e.prototype.checkParentExist=function(e){for(var t=e;this.diagram.nameTable[t].parentId;)t=this.diagram.nameTable[t].parentId;return t},e.prototype.checkObjectBehind=function(e,t,n){for(var i=0;i<n;i++)if(e!==this.diagram.nameTable[t[i]].parentId)return!0;return!1},e.prototype.bringToFront=function(e){if(this.diagram.protectPropertyChange(!0),Tb(this.diagram)||e){for(var t=e&&e.id,n=this.diagram.layers.indexOf(this.getObjectLayer(t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id))),i=this.diagram.layers[n].zIndexTable,o=Yy(this.diagram.selectedItems),r=Number(Object.keys(i).sort(function(e,t){return Number(e)-Number(t)}).reverse()[0]),a=this.diagram.nameTable[t].zIndex,l=[],s=0;s<=r;s++)l.push(i[s]);for(s=a;s<r;s++)i[s]&&(i[s+1]?(i[s]=i[s+1],this.diagram.nameTable[i[s]].zIndex=s):(i[s+1]=i[s],this.diagram.nameTable[i[s+1]].zIndex=s,delete i[s]));if(i[r]=this.diagram.nameTable[t].id,this.diagram.nameTable[t].zIndex=r,"SVG"===this.diagram.mode){var d=this.diagram.diagramLayer,c=(this.getChildElements(this.diagram.nameTable[t].wrapper.children),vy(t+"_groupElement",this.diagram.element.id)),u=this.diagram.selectedItems.nodes;if(u.length>0&&("Native"===u[0].shape.type||"HTML"===u[0].shape.type)){c.parentNode.removeChild(c);for(var h=0;h<this.diagram.views.length;h++){var p=(c=vy(t+("HTML"===u[0].shape.type?"_html_element":"_content_groupElement"),this.diagram.views[h])).parentNode.lastChild;p.parentNode.insertBefore(c,p.nextSibling)}var f=Dy(this.diagram.element.id);this.diagram.diagramRenderer.renderElement(this.diagram.nameTable[t].wrapper,d,f)}else{var g=this.getObjectLayer(t);for(s=0;s<g.objects.length;s++)g.objects[s]!==t&&this.diagram.nameTable[g.objects[s]].parentId!==t&&void 0!==g.objects[s]&&l.indexOf(t)<l.indexOf(g.objects[s])&&(""===this.diagram.nameTable[t].parentId&&""===this.diagram.nameTable[g.objects[s]].parentId&&void 0===this.diagram.nameTable[g.objects[s]].parentId&&this.diagram.nameTable[t].parentId!==this.diagram.nameTable[g.objects[s]].id?(this.moveSvgNode(g.objects[s],t),this.updateNativeNodeIndex(t)):this.checkGroupNode(t,g.objects[s],this.diagram.nameTable)&&(this.moveSvgNode(g.objects[s],t),this.updateNativeNodeIndex(t)))}}else this.diagram.refreshCanvasLayers();var m=Yy(this.diagram.selectedItems);this.diagram.diagramActions&Mc.UndoRedo||this.addHistoryEntry({type:"BringToFront",category:"Internal",undoObject:o,redoObject:m})}this.diagram.protectPropertyChange(!1),Ka()&&this.getZIndexObjects()},e.prototype.checkGroupNode=function(e,t,n){return n[t].parentId===n[e].parentId},e.prototype.sortByZIndex=function(e,t){var n=t||"zIndex";return e.sort(function(e,t){return e[n]-t[n]})},e.prototype.orderCommands=function(e,t,n){var i=t.nodes;if(i=i.concat(t.connectors),e)"SendBackward"===n?this.sendBackward(i[0]):"SendForward"===n?this.sendForward(i[0]):"BringToFront"===n?this.bringToFront(i[0]):"SendToBack"===n&&this.sendToBack(i[0]);else{var o=i[0].zIndex,r=this.diagram.nameTable[i[0].id].zIndex,a=i[0],l=this.getObjectLayer(a.id),s=l.zIndex,d=l.zIndexTable;if("SendBackward"===n||"SendForward"===n)for(var c=0;c<i.length;c++){var u=i[c],h=this.diagram.layers.indexOf(this.getObjectLayer(u.id));this.diagram.nameTable[i[c].id].zIndex=u.zIndex,this.diagram.layers[h].zIndexTable[u.zIndex]=u.id}else if("BringToFront"===n)for(var p=r;p>o;p--)d[p]&&(d[p-1]?(d[p]=d[p-1],this.diagram.nameTable[d[p]].zIndex=p):(d[p-1]=d[p],this.diagram.nameTable[d[p-1]].zIndex=p,delete d[p]));else if("SendToBack"===n)for(p=r;p<o;p++)d[p]&&(d[p+1]?(d[p]=d[p+1],this.diagram.nameTable[d[p]].zIndex=p):(d[p+1]=d[p],this.diagram.nameTable[d[p+1]].zIndex=p,delete d[p]));if("BringToFront"!==n&&"SendToBack"!==n||(this.diagram.nameTable[i[0].id].zIndex=a.zIndex,this.diagram.layers[s].zIndexTable[a.zIndex]=a.id),"SVG"===this.diagram.mode){if("SendBackward"===n)this.moveObject(i[1].id,i[0].id);else if("SendForward"===n)this.moveObject(i[0].id,i[1].id);else if("BringToFront"===n)this.moveObject(i[0].id,d[i[0].zIndex+1]);else if("SendToBack"===n){var f=this.getObjectLayer(i[0].id);for(c=0;c<=i[0].zIndex;c++)f.objects[c]!==i[0].id&&(this.moveSvgNode(f.objects[c],i[0].id),this.updateNativeNodeIndex(i[0].id))}}else this.diagram.refreshCanvasLayers()}},e.prototype.moveObject=function(e,t){t&&(this.moveSvgNode(e,t),this.updateNativeNodeIndex(e,t))},e.prototype.sendForward=function(e){if(this.diagram.protectPropertyChange(!0),Tb(this.diagram)||e){var t=e&&e.id,n=this.diagram.layers.indexOf(this.getObjectLayer(t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id))),i=this.diagram.layers[n].zIndexTable,o=(Object.keys(i),this.diagram.nameTable[t]),r=[],a=this.diagram.spatialSearch.findObjects(o.wrapper.bounds);a.length>2&&(a=this.sortByZIndex(a));for(var l=0,s=a;l<s.length;l++){var d=s[l];if(o.id!==d.id&&n===this.getObjectLayer(d.id).zIndex&&Number(this.diagram.nameTable[t].zIndex)<Number(d.zIndex)&&o.wrapper.bounds.intersects(d.wrapper.bounds)){r.push(d);break}}if(r.length>0){var c=r[0].zIndex,u=o.zIndex,h=i[c],p=Yy(this.diagram.selectedItems);this.diagram.nameTable[h]instanceof ry?p.nodes.push(Yy(this.diagram.nameTable[h])):p.connectors.push(Yy(this.diagram.nameTable[h])),this.diagram.layers[0].zIndexTable[c]=o.id,this.diagram.nameTable[i[c]].zIndex=c,this.diagram.layers[0].zIndexTable[u]=r[0].id,this.diagram.nameTable[i[u]].zIndex=u,"SVG"===this.diagram.mode?(this.moveSvgNode(i[Number(r[0].zIndex)],t),this.updateNativeNodeIndex(i[Number(r[0].zIndex)],t)):this.diagram.refreshCanvasLayers();var f=Yy(this.diagram.selectedItems);this.diagram.nameTable[h]instanceof ry?f.nodes.push(Yy(this.diagram.nameTable[h])):f.connectors.push(Yy(this.diagram.nameTable[h])),this.diagram.diagramActions&Mc.UndoRedo||this.addHistoryEntry({type:"SendForward",category:"Internal",undoObject:p,redoObject:f})}if(Ka()){var g=[];g.push(o),g.push(r[r.length-1]),this.updateBlazorZIndex(g)}}this.diagram.protectPropertyChange(!1)},e.prototype.sendBackward=function(e){if(this.diagram.protectPropertyChange(!0),Tb(this.diagram)||e){var t=e&&e.id,n=this.diagram.layers.indexOf(this.getObjectLayer(t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id))),i=this.diagram.layers[n].zIndexTable,o=(Object.keys(i),this.diagram.nameTable[t]),r=[],a=this.diagram.spatialSearch.findObjects(o.wrapper.bounds);a.length>2&&(a=this.sortByZIndex(a));for(var l=0,s=a;l<s.length;l++){var d=s[l];o.id!==d.id&&n===this.getObjectLayer(d.id).zIndex&&Number(this.diagram.nameTable[t].zIndex)>Number(d.zIndex)&&o.wrapper.bounds.intersects(d.wrapper.bounds)&&r.push(d)}if(r.length>0){var c=r[r.length-1].zIndex,u=o.zIndex,h=i[c],p=Yy(this.diagram.selectedItems);if(this.diagram.nameTable[h]instanceof ry?p.nodes.push(Yy(this.diagram.nameTable[h])):p.connectors.push(Yy(this.diagram.nameTable[h])),i[c]=o.id,this.diagram.nameTable[i[c]].zIndex=c,i[u]=r[r.length-1].id,this.diagram.nameTable[i[u]].zIndex=u,"SVG"===this.diagram.mode){if(!(o.children&&o.children.length>0)&&(this.moveSvgNode(t,i[r[r.length-1].zIndex]),this.updateNativeNodeIndex(t,i[r[r.length-1].zIndex]),Ka())){var f=[];f.push(o),f.push(r[r.length-1]),this.updateBlazorZIndex(f)}}else this.diagram.refreshCanvasLayers();var g=Yy(this.diagram.selectedItems);this.diagram.nameTable[h]instanceof ry?g.nodes.push(Yy(this.diagram.nameTable[h])):g.connectors.push(Yy(this.diagram.nameTable[h])),this.diagram.diagramActions&Mc.UndoRedo||this.addHistoryEntry({type:"SendBackward",category:"Internal",undoObject:p,redoObject:g})}}this.diagram.protectPropertyChange(!1)},e.prototype.updateNativeNodeIndex=function(e,t){for(var n=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(t),i=0;i<this.diagram.views.length;i++)if(n&&("HTML"===n.shape.type||"Native"===n.shape.type)){var o="HTML"===n.shape.type?"_html_element":"_content_groupElement",r=vy(e+o,this.diagram.views[i]),a=t?vy(t+o,this.diagram.views[i]):r.parentElement.firstChild;r.parentNode.id===a.parentNode.id&&a.parentNode.insertBefore(r,a)}},e.prototype.initSelectorWrapper=function(){var e=this.diagram.selectedItems;e.init(this.diagram),1===e.nodes.length&&0===e.connectors.length&&(e.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.pivot=e.nodes[0].pivot)},e.prototype.doRubberBandSelection=function(e){this.clearSelectionRectangle();var t,n=[];n=this.diagram.getNodesConnectors(n),(t="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?function(e,t){for(var n=[],i=0;i<t.length;i++){var o=t[i];e.containsRect(o.wrapper.bounds)&&n.push(o)}return n}(e,n):this.diagram.spatialSearch.findObjects(e)).length&&this.selectObjects(t,!0)},e.prototype.clearSelectionRectangle=function(){var e=by(this.diagram.element.id).getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");e&&Ls(e)},e.prototype.dragConnectorEnds=function(e,t,n,i,o,r){var a,l=!1;return t instanceof uy?a=t.connectors[0]:t instanceof zf&&this.diagram.currentDrawingObject&&(this.clearSelection(),a=this.diagram.currentDrawingObject),"BezierSourceThumb"!==e&&"BezierTargetThumb"!==e||(l=!0),"ConnectorSourceEnd"===e||"BezierSourceThumb"===e?this.dragSourceEnd(a,n.x-(l?i.bezierPoint1.x:a.sourcePoint.x),n.y-(l?i.bezierPoint1.y:a.sourcePoint.y),null,n,e,void 0,o,r,void 0,i):this.dragTargetEnd(a,n.x-(l?i.bezierPoint2.x:a.targetPoint.x),n.y-(l?i.bezierPoint2.y:a.targetPoint.y),null,n,e,void 0,i)},e.prototype.getSelectedObject=function(){var e=this.diagram.selectedItems;return e.nodes.concat(e.connectors)},e.prototype.updateBlazorProperties=function(e){if(e)window&&window.Blazor&&"{}"!==JSON.stringify(this.deepDiffer.diagramObject)&&(t={methodName:"UpdateBlazorProperties",diagramobj:this.deepDiffer.diagramObject},this.diagram.isLoading||window.sfBlazor.updateBlazorProperties(t,this.diagram));else if(window&&window.Blazor){var t={methodName:"UpdateBlazorProperties",diagramobj:this.diagramObject};window.sfBlazor.updateBlazorProperties(t,this.diagram)}this.deepDiffer.newNodeObject=[],this.deepDiffer.newConnectorObject=[],this.diagramObject=[],this.diagram.oldNodeObjects=[],this.diagram.oldConnectorObjects=[]},e.prototype.enableCloneObject=function(e){this.diagram.lineRoutingModule&&this.diagram.constraints&Ac.LineRouting||(this.diagram.canEnableBlazorObject=e)},e.prototype.ismouseEvents=function(e){this.diagram.blazorActions=e?this.diagram.addConstraints(this.diagram.blazorActions,wc.interaction):this.diagram.removeConstraints(this.diagram.blazorActions,wc.interaction)},e.prototype.updateLayerObject=function(e,t){var n;Ka()&&(n=this.deepDiffer.getLayerObject(e,t,this.diagram),this.diagramObject=n,this.updateBlazorProperties())},e.prototype.getDiagramOldValues=function(e,t){for(var n={},i=0;i<t.length;i++)n[t[i]]=Yy(this.diagram[t[i]]);var o=Yy(n),r=this.deepDiffer.map(o,e),a=this.deepDiffer.frameObject({},r),l=this.deepDiffer.removeEmptyValues(a);l=this.deepDiffer.changeSegments(l,o),this.diagramObject=l,this.diagram.blazorActions&wc.ClearObject||this.updateBlazorProperties()},e.prototype.getBlazorOldValues=function(e,t){if(Ka()){for(var n=this.diagram.oldNodeObjects,i=0;i<n.length;i++)n[i].id&&(this.diagram.oldNodeObjects[i]instanceof ry&&(this.diagram.oldNodeObjects[i]=xv(this.diagram.oldNodeObjects[i])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[n[i].id],e,t,this.diagram));var o=this.diagram.oldConnectorObjects;for(i=0;i<o.length;i++)o[i].id&&(this.diagram.oldConnectorObjects[i]instanceof zf&&(this.diagram.oldConnectorObjects[i]=xv(this.diagram.oldConnectorObjects[i])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[o[i].id],e,t,this.diagram));(n.length>0||o.length>0)&&this.updateBlazorProperties(!0)}},e.prototype.getObjectChanges=function(e,t,n){for(var i=0;i<e.length;i++){var o=this.deepDiffer.map(t[i],e[i]),r=this.deepDiffer.frameObject({},o),a=this.deepDiffer.removeEmptyValues(r);a.children&&(a.children=Yy(t[i]).children),(a=this.deepDiffer.changeSegments(a,t[i])).sfIndex=Gy(this.diagram,t[i].id),n.push(a)}},e.prototype.clearObjectSelection=function(e){var t=this.diagram.selectedItems,n=[];-1===(n=n.concat(t.nodes,t.connectors)).indexOf(e)&&(this.clearSelection(n.length>0),this.selectObjects([e],!0))},e.prototype.clearSelection=function(e,t){return $b(this,void 0,void 0,function(){var n,i,o,r,a,l,s,d;return ew(this,function(c){switch(c.label){case 0:return n=this.diagram.allowServerDataBinding,this.diagram.enableServerDataBinding(!1),Tb(this.diagram)?(i=this.diagram.selectedItems,o=this.getSelectedObject(),this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=o),r={oldValue:o,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(o,!0),e&&(Ka()?this.oldSelectedObjects=Yy(i):this.diagram.triggerEvent(jc.selectionChange,r)),r.cancel?[3,4]:(i.offsetX=0,i.offsetY=0,i.width=0,i.height=0,i.rotateAngle=0,i.nodes=[],i.connectors=[],i.wrapper=null,i.annotation=void 0,this.diagram.clearSelectorLayer(),e?(r={oldValue:xv(o),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},Ka()&&(r=this.updateSelectionChangeEventArgs(r,[],o),this.updateBlazorSelector()),Ka()?[3,1]:(this.diagram.triggerEvent(jc.selectionChange,r),[3,4])):[3,4])):[3,5];case 1:return a=void 0,window&&window[this.blazor]&&this.diagram.selectionChange?(l={EventName:"selectionChange",args:JSON.stringify(r)},[4,window[this.blazorInterop].updateBlazorDiagramEvents(l,this.diagram)]):[3,3];case 2:a=c.sent(),c.label=3;case 3:if(a&&a.cancel&&!t&&(s=[],a.oldValue.nodes.length>0&&(s=a.oldValue.nodes),a.oldValue.connectors.length>0&&(s=s.concat(a.oldValue.connectors)),s))for(d=0;d<s.length;d++)this.select(this.diagram.nameTable[s[d].id],0!=d&&s.length>1);c.label=4;case 4:this.updateBlazorSelector(),this.diagram.enableServerDataBinding(n),c.label=5;case 5:return[2]}})})},e.prototype.clearSelectedItems=function(){this.clearSelection((this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0)+(this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0)>0)},e.prototype.removeStackHighlighter=function(){var e=by(this.diagram.element.id),t=e.getElementById(e.id+"_stack_highlighter");t&&t.parentNode.removeChild(t)},e.prototype.renderStackHighlighter=function(e,t){var n,i,o,r=this.diagram.selectedItems.nodes[0];if(!t){var a=this.diagram.findObjectsUnderMouse(e.position);if((t=this.diagram.findObjectUnderMouse(a,"Drag",!0))&&!(t.isLane||t.isPhase||t.isHeader))for(var l=0;l<a.length;l++){var s=this.diagram.nameTable[a[l].id];(s.isLane||s.isPhase||s.isHeader)&&(this.diagram.parentObject=t=s)}}if(r&&t&&t.isLane&&r.shape&&!r.shape.isPhase&&(i=this.diagram.nameTable[t.parentId],this.diagram.currentSymbol&&"SwimLane"===i.shape.type&&(n=!0),(r&&!r.parentId&&"SwimLane"!==r.shape.type||r&&r.parentId&&this.diagram.nameTable[r.parentId]&&this.diagram.nameTable[r.parentId].isLane&&r.parentId!==t.parentId&&r.parentId!==t.id)&&((d=fm(this.diagram,o=this.diagram.selectedItems,t.id,!0))&&(o.wrapper.children[0]=d),this.diagram.renderSelector(!1,!0),o.wrapper.children[0]=o.nodes[0].wrapper)),r&&t&&t.parentId&&r.shape&&r.shape.isPhase&&"SwimLane"===this.diagram.nameTable[t.parentId].shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[t.parentId].wrapper,this.diagram.renderSelector(!1,!0)),n&&this.diagram.currentSymbol.shape.isLane||r&&t&&r.parentId&&t.parentId&&!r.isPhase&&r.parentId===t.parentId&&r.id!==t.id&&i&&i.container&&("Stack"===i.container.type||"Grid"===i.container.type)){var d=void 0,c="Vertical"===i.container.orientation,u="Stack"===i.container?c:!c;"Grid"===i.container.type&&t.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===i.shape.orientation&&t.rowIndex!==r.rowIndex||"Vertical"===i.shape.orientation&&t.columnIndex!==r.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===i.container.orientation)&&(o=this.diagram.selectedItems,(r.isLane&&xm(r,this.diagram)||!r.isLane)&&(d=fm(this.diagram,o,t.id,n)));var h="Stack"===i.container.type?t.wrapper:d;h&&Gg(h,u,e.position,this.diagram,!1,!0)}},e.prototype.insertBlazorConnector=function(e){if(e instanceof uy)for(var t=0;t<e.connectors.length;t++)this.diagram.insertBlazorConnector(e.connectors[t]);else this.diagram.insertBlazorConnector(e)},e.prototype.drag=function(e,t,n){if(Zf(e)&&this.checkBoundaryConstraints(t,n,e.wrapper.bounds)&&vg(this.diagram))if(e instanceof ry){var i={offsetX:e.offsetX,offsetY:e.offsetY};if(e.offsetX+=t,e.offsetY+=n,e.children&&!e.container){Hg(this.diagram,e,!0)||(this.diagram.diagramActions=this.diagram.diagramActions|Mc.isGroupDragging);for(var o=this.getAllDescendants(e,[]),r=0;r<o.length;r++)this.drag(this.diagram.nameTable[o[r].id],t,n);this.updateInnerParentProperties(e),this.diagram.diagramActions=this.diagram.diagramActions&~Mc.isGroupDragging}Hg(this.diagram,e,!0)?Bg(this.diagram,e):(e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,i,{offsetX:e.offsetX,offsetY:e.offsetY},void 0,void 0,!1),e.wrapper.measureChildren=!1),"SwimLane"!==e.shape.type||this.diagram.currentSymbol||tm(Zg(this.diagram,e.wrapper.children[0]),this.diagram)}else{var a=e,l=(i={sourcePoint:a.sourcePoint,targetPoint:a.targetPoint},"Bezier"===a.type),s=!1;a.sourceWrapper?s=!0:this.dragSourceEnd(a,t,n,!0,null,"",l),a.targetWrapper?s=!0:this.dragTargetEnd(a,t,n,!0,null,"",l);var d=!1;for(r=0;r<this.diagram.selectedItems.connectors.length;r++)this.diagram.selectedItems.connectors[r].id===e.id&&(d=!0);s&&!d||(this.dragControlPoint(a,t,n,!0),this.diagram.connectorPropertyChange(a,i,{sourcePoint:a.sourcePoint,targetPoint:a.targetPoint}))}},e.prototype.connectorSegmentChange=function(e,t,n){var i,o,r=!0;if(!1===t.equals(t,e.wrapper.bounds)&&e.outEdges.length>0)for(var a=0;a<e.outEdges.length;a++){var l=this.diagram.nameTable[e.outEdges[a]];if(r=""!==l.targetID?!this.isSelected(this.diagram.nameTable[l.targetID]):!this.isSelected(this.diagram.nameTable[l.id]),"Orthogonal"===l.type&&l.segments&&l.segments.length>1)if(n){var s=l.segments[0],d=l.segments[1],c=Iu(Cu(e.wrapper,e.wrapper.corners,e.wrapper.bounds),s.direction),u=ju({corners:void 0,point:c=Ru(l,0,c,{x:l.sourceWrapper.offsetX,y:l.sourceWrapper.offsetY},!1),margin:void 0,direction:s.direction},{corners:void 0,point:d.points[1],margin:void 0,direction:void 0});s.length=jd.distancePoints(u[0],u[1]),d.direction&&d.length&&(d.length=jd.distancePoints(u[1],u[2]))}else if(r){switch(l.segments[0].direction){case"Bottom":i=e.wrapper.bounds.bottomCenter.x-t.bottomCenter.x,o=e.wrapper.bounds.bottomCenter.y-t.bottomCenter.y;break;case"Top":i=e.wrapper.bounds.topCenter.x-t.topCenter.x,o=e.wrapper.bounds.topCenter.y-t.topCenter.y;break;case"Left":i=e.wrapper.bounds.middleLeft.x-t.middleLeft.x,o=e.wrapper.bounds.middleLeft.y-t.middleLeft.y;break;case"Right":i=e.wrapper.bounds.middleRight.x-t.middleRight.x,o=e.wrapper.bounds.middleRight.y-t.middleRight.y}this.dragSourceEnd(l,i,o,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!(e.parentId&&this.diagram.diagramActions&Mc.isGroupDragging))}}},e.prototype.updateEndPoint=function(e,t){var n={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};e.sourceID&&(n.sourceID=e.sourceID),e.targetID&&(n.targetID=e.targetID),e.sourcePortID&&(n.sourcePortID=e.sourcePortID),e.targetPortID&&(n.targetPortID=e.targetPortID),e.segments&&(n.segments=e.segments),this.diagram.connectorPropertyChange(e,t||{},n),this.diagram.updateSelector()},e.prototype.dragSourceEnd=function(e,t,n,i,o,r,a,l,s,d,c){var u=this.diagram.nameTable[e.id],h={},p=this.checkBoundaryConstraints(t,n,u.wrapper.bounds);if(Kf(u)&&p&&"BezierSourceThumb"!==r&&vg(this.diagram)&&(h={sourcePoint:u.sourcePoint},u.sourcePoint.x+=t,u.sourcePoint.y+=n,"ConnectorSourceEnd"===r&&"Orthogonal"===u.type&&this.changeSegmentLength(u,l,s,d),"Bpmn"===u.shape.type&&"Default"===u.shape.sequence&&this.updatePathElementOffset(u)),"Bezier"===u.type)if(h={sourcePoint:u.sourcePoint},c)this.translateBezierPoints(e,""===r?"ConnectorSourceEnd":r,t,n,c,o,!a);else for(var f=0;f<e.segments.length;f++)this.translateBezierPoints(e,""===r?"ConnectorSourceEnd":r,t,n,e.segments[f],o,!a);return i||this.updateEndPoint(u,h),this.diagram.realActions&Lc.AnimationClick||this.diagram.refreshCanvasLayers(),p},e.prototype.updatePathElementOffset=function(e){e.wrapper.children.splice(3,1);var t=new Yc;t=vv(e.intermediatePoints,e),e.wrapper.children.splice(3,0,t)},e.prototype.changeSegmentLength=function(e,t,n,i){if(e.segments&&null!==e.segments[0].direction&&(!t&&""===e.sourceID||i)){var o=e.segments[0],r=e.segments[1],a=this.diagram.nameTable[e.sourceID],l=void 0;if(o.points[0]=e.sourcePoint,"Top"===o.direction||"Bottom"===o.direction?(o.points[o.points.length-1].x=e.sourcePoint.x,r.points[0].y=o.points[o.points.length-1].y):(o.points[o.points.length-1].y=e.sourcePoint.y,r.points[0].x=o.points[o.points.length-1].x),o.direction&&(o.length||0===o.length)&&(o.length=jd.distancePoints(o.points[0],o.points[o.points.length-1])),r.direction&&(r.length||0===r.length)&&(r.length=jd.distancePoints(o.points[o.points.length-1],r.points[r.points.length-1]),r.direction=jd.direction(o.points[o.points.length-1],r.points[r.points.length-1])),""!==e.sourcePortID&&o.length<10)if(e.segments.length>2){var s=jd.direction((d=e.segments[2]).points[0],d.points[1]);o.direction===Wu(s)?("Right"===o.direction?d.points[0].x=o.points[o.points.length-1].x=a.wrapper.corners.middleRight.x+20:"Left"===o.direction?d.points[0].x=o.points[o.points.length-1].x=a.wrapper.corners.middleLeft.x-20:d.points[0].y=o.points[o.points.length-1].y="Top"===o.direction?a.wrapper.corners.topCenter.y-20:a.wrapper.corners.bottomCenter.y+20,d.direction&&d.length&&(d.length=jd.distancePoints(d.points[0],d.points[d.points.length-1])),o.length=jd.distancePoints(o.points[0],o.points[o.points.length-1])):o.direction===s&&d.direction&&d.length?("Top"===o.direction||"Bottom"===o.direction?(d.points[0]=o.points[0],d.points[d.points.length-1].x=d.points[0].x):(d.points[0]=o.points[0],d.points[d.points.length-1].y=d.points[0].y),d.length=jd.distancePoints(d.points[0],d.points[d.points.length-1]),e.segments.splice(0,2)):o.length=20}else o.length=20;else if(o.length<1)if(""!==e.sourceID){var d;"Right"===r.direction?r.points[r.points.length-1].y=(l=a.wrapper.corners.middleRight).y:"Left"===r.direction?r.points[r.points.length-1].y=(l=a.wrapper.corners.middleLeft).y:r.points[r.points.length-1].x="Top"===r.direction?(l=a.wrapper.corners.topCenter).x:(l=a.wrapper.corners.bottomCenter).x,r.length=jd.distancePoints(l,r.points[r.points.length-1]),e.segments.length>2&&(d=e.segments[2]).direction&&d.length&&(d.length=jd.distancePoints(r.points[r.points.length-1],d.points[d.points.length-1])),e.segments.splice(0,1)}else e.segments.splice(0,1)}else t&&!n&&e.sourceID!==t.id&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof ry&&this.changeSourceEndToNode(e,t),t&&n&&e.sourcePortID!==n&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof ry&&this.changeSourceEndToPort(e,t,n)},e.prototype.changeSourceEndToPort=function(e,t,n){var i=this.diagram.getWrapper(t.wrapper,n),o={x:i.offsetX,y:i.offsetY},r=qu(o,Vy(t.wrapper),t.wrapper.bounds),a=e.segments[0],l=e.segments[1];if(a.direction!==r){var s=[],d={};if(a.direction===Wu(r)){d={};var c=void 0;"Top"===r||"Bottom"===r?(c="Top"===r?{type:"Orthogonal",isTerminal:!0,direction:r,length:Math.abs(a.points[0].y-o.y)}:{type:"Orthogonal",isTerminal:!0,direction:r,length:Math.abs(o.y-a.points[0].y)},d=a.points[0].x>o.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:a.points[0].x-o.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:o.x-a.points[0].x}):(c="Right"===r?{type:"Orthogonal",isTerminal:!0,direction:r,length:Math.abs(a.points[0].x-o.x)}:{type:"Orthogonal",isTerminal:!0,direction:r,length:Math.abs(o.x-a.points[0].x)},d=a.points[0].y>o.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:a.points[0].y-o.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:o.y-a.points[0].y}),s.push(new Af(e,"segments",c,!0)),s.push(new Af(e,"segments",d,!0))}else s.push(new Af(e,"segments",d={type:"Orthogonal",direction:r,length:20,isTerminal:!0},!0));a.direction!==Wu(r)&&("Top"===r||"Bottom"===r?(a.points[0].x=o.x,a.points[0].y=a.points[a.points.length-1].y="Top"===r?o.y-20:o.y+20):(a.points[0].y=o.y,a.points[0].x=a.points[a.points.length-1].x="Right"===r?o.x+20:o.x-20),a.length=jd.distancePoints(a.points[0],a.points[a.points.length-1]),l.length=jd.distancePoints(a.points[a.points.length-1],l.points[l.points.length-1])),e.segments=s.concat(e.segments)}else a.points[0]=o,"Top"===r||"Bottom"===r?a.points[a.points.length-1].x=o.x:a.points[a.points.length-1].y=o.y,a.length=jd.distancePoints(a.points[0],a.points[a.points.length-1]),l.length=jd.distancePoints(a.points[a.points.length-1],l.points[l.points.length-1])},e.prototype.removeTerminalSegment=function(e,t){for(var n=0;n<e.segments.length-2;n++){var i=e.segments[0];i.isTerminal&&(t?i.isTerminal=!1:(e.segments.splice(n,1),n--))}},e.prototype.changeSourceEndToNode=function(e,t){this.removeTerminalSegment(e);var n,i,o=t.wrapper.children[0].corners,r=e.segments[0],a=e.segments[1],l=[];if("Right"===r.direction||"Left"===r.direction)if(n="Left"===r.direction?o.middleLeft:o.middleRight,r.length>o.width||"Left"===r.direction&&n.x>=r.points[0].x||"Right"===r.direction&&n.x<=r.points[0].x)r.points[0].y=r.points[r.points.length-1].y=n.y,r.points[0].x=n.x,r.length=jd.distancePoints(r.points[0],r.points[r.points.length-1]),a.length=jd.distancePoints(r.points[r.points.length-1],a.points[a.points.length-1]);else{var s=void 0;i="Bottom"===(s=a.direction?a.direction:jd.direction(a.points[0],a.points[a.points.length-1]))?o.bottomCenter:o.topCenter,a.length&&a.direction&&(a.length="Top"===s?r.points[r.points.length-1].y-(i.y+20):i.y+20-r.points[r.points.length-1].y),r.length=r.points[r.points.length-1].x-i.x,r.direction=r.length>0?"Right":"Left",l.push(new Af(e,"segments",{type:"Orthogonal",direction:s,length:20},!0)),e.segments=l.concat(e.segments)}else n="Bottom"===r.direction?o.bottomCenter:o.topCenter,r.length>o.height||"Top"===r.direction&&n.y>=r.points[0].y||"Bottom"===r.direction&&n.y<=r.points[0].y?(r.points[0].x=r.points[r.points.length-1].x=n.x,r.points[0].y=n.y,r.length=jd.distancePoints(r.points[0],r.points[r.points.length-1]),a.length=jd.distancePoints(r.points[r.points.length-1],a.points[a.points.length-1])):(i="Left"===a.direction?o.middleLeft:o.middleRight,s=void 0,s=a.direction?a.direction:jd.direction(a.points[0],a.points[a.points.length-1]),a.length&&a.direction&&(a.length="Left"===s?r.points[r.points.length-1].x-(i.x+20):i.x+20-r.points[r.points.length-1].x),r.length=r.points[r.points.length-1].y-i.y,r.direction=r.length>0?"Bottom":"Top",l.push(new Af(e,"segments",{type:"Orthogonal",direction:s,length:20},!0)),e.segments=l.concat(e.segments))},e.prototype.translateBezierPoints=function(e,t,n,i,o,r,a){var l=e.segments.indexOf(o),s=e.segments[l];s&&("BezierSourceThumb"===t&&(s.vector1.angle||s.vector1.distance)?s.vector1={distance:e.distance(e.sourcePoint,r),angle:jd.findAngle(e.sourcePoint,r)}:"BezierTargetThumb"===t&&(s.vector2.angle||s.vector2.distance)?s.vector2={distance:e.distance(e.targetPoint,r),angle:jd.findAngle(e.targetPoint,r)}:("ConnectorSourceEnd"===t&&!e.sourceID||"ConnectorTargetEnd"===t&&!e.targetID)&&a&&Pf(s.vector1)&&Pf(s.vector2)?(jd.isEmptyPoint(s.point1)&&(s.bezierPoint1=Rf(e.sourcePoint,e.targetPoint)),jd.isEmptyPoint(s.point2)&&(s.bezierPoint2=Rf(e.targetPoint,e.sourcePoint))):"BezierSourceThumb"===t||"ConnectorSourceEnd"===t&&!a&&Pf(s.vector1)?(s.bezierPoint1.x+=n,s.bezierPoint1.y+=i,jd.isEmptyPoint(s.point1)&&!a||(s.point1={x:s.bezierPoint1.x,y:s.bezierPoint1.y})):("BezierTargetThumb"===t||"ConnectorTargetEnd"===t&&!a&&Pf(s.vector2))&&(s.bezierPoint2.x+=n,s.bezierPoint2.y+=i,jd.isEmptyPoint(s.point2)&&!a||(s.point2={x:s.bezierPoint2.x,y:s.bezierPoint2.y})))},e.prototype.dragTargetEnd=function(e,t,n,i,o,r,a,l){var s,d=this.diagram.nameTable[e.id],c=this.checkBoundaryConstraints(t,n,d.wrapper.bounds);if(Qf(d)&&"BezierTargetThumb"!==r&&c&&vg(this.diagram)){if(s={targetPoint:d.targetPoint},d.targetPoint.x+=t,d.targetPoint.y+=n,"ConnectorTargetEnd"===r&&"Orthogonal"===d.type&&d.segments&&d.segments.length>0){var u=d.segments[d.segments.length-2];u&&2===d.segments[d.segments.length-1].points.length&&("Left"===u.direction||"Right"===u.direction?u.points[u.points.length-1].x=d.targetPoint.x:u.points[u.points.length-1].y=d.targetPoint.y,u.length=jd.distancePoints(u.points[0],u.points[u.points.length-1]),u.direction=jd.direction(u.points[0],u.points[u.points.length-1]))}"Bpmn"===d.shape.type&&"Default"===d.shape.sequence&&this.updatePathElementOffset(d)}if("Bezier"===d.type)if(s={targetPoint:d.targetPoint},l)this.translateBezierPoints(e,""===r?"ConnectorTargetEnd":r,t,n,l,o,!a);else for(var h=0;h<e.segments.length;h++)this.translateBezierPoints(e,""===r?"ConnectorTargetEnd":r,t,n,e.segments[h],o,!a);return i||this.updateEndPoint(d,s),this.diagram.realActions&Lc.AnimationClick||this.diagram.refreshCanvasLayers(),c},e.prototype.dragControlPoint=function(e,t,n,i,o){var r=this.diagram.nameTable[e.id];if(("Straight"===r.type||"Bezier"===r.type)&&r.segments.length>0){if(void 0!==o&&r.segments[o])r.segments[o].point.x+=t,r.segments[o].point.y+=n;else for(var a=0;a<r.segments.length-1;a++)r.segments[a].point.x+=t,r.segments[a].point.y+=n;i||this.updateEndPoint(r)}return!0},e.prototype.rotatePropertyChnage=function(e){var t=this.diagram.selectedItems,n=[];n=(n=n.concat(t.nodes)).concat(t.connectors),this.rotateObjects(t,n,e-t.rotateAngle,{x:t.offsetX,y:t.offsetY}),t.wrapper.rotateAngle=t.rotateAngle=e,this.diagram.updateSelector()},e.prototype.rotateObjects=function(e,t,n,i,o){i=i||{};var r=Qd();ec(r,n,i.x,i.y);for(var a=0,l=t;a<l.length;a++){var s=l[a];if(s instanceof ry){if(eg(s)&&vg(this.diagram)){if(!1!==o||e!==s){s.rotateAngle+=n,s.rotateAngle=(s.rotateAngle+360)%360;var d=$d(r,{x:s.offsetX,y:s.offsetY});s.offsetX=d.x,s.offsetY=d.y,this.diagram.nodePropertyChange(s,{},{offsetX:s.offsetX,offsetY:s.offsetY,rotateAngle:s.rotateAngle})}if(s.processId){var c=this.diagram.bpmnModule.getChildrenBound(this.diagram.nameTable[s.processId],s.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(c,s,this.diagram)}s.children&&s.children.length&&!s.container&&this.getChildren(s,t)}}else this.rotatePoints(s,n,i||{x:s.wrapper.offsetX,y:s.wrapper.offsetY});this.diagram.updateDiagramObject(s)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},e.prototype.snapConnectorEnd=function(e){return this.diagram.snapSettings.constraints&xc.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(e),e},e.prototype.snapAngle=function(e){return this.diagram.snapSettings.constraints&xc.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,e):0},e.prototype.rotatePoints=function(e,t,n){if(!e.sourceWrapper||!e.targetWrapper){var i=Qd();ec(i,t,n.x,n.y),e.sourcePoint=$d(i,e.sourcePoint),e.targetPoint=$d(i,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e),this.diagram.connectorPropertyChange(e,{},{sourcePoint:e.sourcePoint,targetPoint:e.targetPoint})}},e.prototype.updateInnerParentProperties=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var n=this.getAllDescendants(e,[],!1,!0),i=0;i<n.length;i++){var o=this.diagram.nameTable[n[i].id];o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY,o.width=o.wrapper.width,o.height=o.wrapper.height}this.diagram.protectPropertyChange(t)},e.prototype.scale=function(e,t,n,i,o,r){var a=this.diagram.nameTable[e.id],l=a,s=a.wrapper;o||(o=e);var d=o.wrapper,c=function(e,t,n,i,o,r,a,l){var s={x:0,y:0},d=Qd();switch(ec(d,o,r,a),l.x){case 0:switch(l.y){case 0:s=$d(d,{x:e,y:t});break;case.5:s=$d(d,{x:e,y:t+i/2});break;case 1:s=$d(d,{x:e,y:t+i})}break;case.5:switch(l.y){case 0:s=$d(d,{x:e+n/2,y:t});break;case.5:s=$d(d,{x:e+n/2,y:t+i/2});break;case 1:s=$d(d,{x:e+n/2,y:t+i})}break;case 1:switch(l.y){case 0:s=$d(d,{x:e+n,y:t});break;case.5:s=$d(d,{x:e+n,y:t+i/2});break;case 1:s=$d(d,{x:e+n,y:t+i})}}return{x:s.x,y:s.y}}(d.offsetX-d.actualSize.width*d.pivot.x,d.offsetY-d.actualSize.height*d.pivot.y,d.actualSize.width,d.actualSize.height,d.rotateAngle,d.offsetX,d.offsetY,i);if(void 0!==s.actualSize.width&&void 0!==s.actualSize.height&&vg(this.diagram)){if(l.children&&!l.container){for(var u=0,h=this.getAllDescendants(l,[]);u<h.length;u++)this.scaleObject(t,n,c,h[u],s,o);e.wrapper.measure(new Bd),e.wrapper.arrange(e.wrapper.desiredSize),this.diagram.updateGroupOffset(a),this.updateInnerParentProperties(l)}else this.scaleObject(t,n,c,a,s,o);var p=Wy(e.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,p)&&r)return this.scale(e,1/t,1/n,i,void 0,!0),!1;this.diagram.updateDiagramObject(e)}return!0},e.prototype.getAllDescendants=function(e,t,n,i){for(var o=e,r=[],a=0;a<o.children.length;a++)(e=this.diagram.nameTable[o.children[a]])&&(e.children?(n&&t.push(e),i&&r.push(e),t=this.getAllDescendants(e,t)):t.push(e));return i?r:t},e.prototype.getChildren=function(e,t){var n=e;if(e.children)for(var i=0;i<n.children.length;i++)t.push(e=this.diagram.nameTable[n.children[i]]);return t},e.prototype.cloneChild=function(e){return this.diagram.nameTable[e]},e.prototype.scaleObject=function(e,t,n,i,o,r){e=e<0?1:e,t=t<0?1:t;var a={};if(1!==e||1!==t){var l=void 0,s=void 0;if(i instanceof ry){var d=void 0,c=void 0;a={width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height,offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY,margin:{top:(p=i).margin.top,left:p.margin.left}},"Bpmn"===p.shape.type&&p.shape.activity.subProcess.processes&&p.shape.activity.subProcess.processes.length>0&&(c=this.diagram.bpmnModule.getChildrenBound(p,p.id,this.diagram),d=p.wrapper.bounds.containsRect(c)),l=p.wrapper.actualSize.width*e,s=p.wrapper.actualSize.height*t,void 0!==p.maxWidth&&0!==p.maxWidth&&(l=Math.min(p.maxWidth,l)),void 0!==p.minWidth&&0!==p.minWidth&&(l=Math.max(p.minWidth,l)),void 0!==p.maxHeight&&0!==p.maxHeight&&(s=Math.min(p.maxHeight,s)),void 0!==p.minHeight&&0!==p.minHeight&&(s=Math.max(p.minHeight,s)),d&&(l=Math.max(l,c.right-p.wrapper.bounds.x),s=Math.max(s,c.bottom-p.wrapper.bounds.y)),e=l/p.actualSize.width,t=s/p.actualSize.height}var u,h=Qd();if(r||(r=i),ec(h,-(u=r.wrapper).rotateAngle,n.x,n.y),tc(h,e,t,n.x,n.y),ec(h,u.rotateAngle,n.x,n.y),i instanceof ry){var p,f,g,m=$d(h,{x:(p=i).wrapper.offsetX,y:p.wrapper.offsetY}),v=p.wrapper.offsetX-p.wrapper.actualSize.width*p.pivot.x,y=p.wrapper.offsetY-p.wrapper.actualSize.height*p.pivot.y;if(l>0)if(p.processId){var b=this.diagram.nameTable[p.processId];(!b.maxWidth||p.margin.left+l<b.maxWidth)&&(p.width=l,p.offsetX=m.x)}else p.width=l,p.offsetX=m.x;if(s>0)if(p.processId){var w=this.diagram.nameTable[p.processId];(!w.maxHeight||p.margin.top+s<w.maxHeight)&&(p.height=s,p.offsetY=m.y)}else p.height=s,p.offsetY=m.y;f=p.wrapper.offsetX-p.wrapper.actualSize.width*p.pivot.x,g=p.wrapper.offsetY-p.wrapper.actualSize.height*p.pivot.y,this.diagram.nameTable[p.processId]&&(p.margin.top+(g-y)<=0||p.margin.left+(f-v)<=0)?this.diagram.nodePropertyChange(i,{},{margin:{top:p.margin.top,left:p.margin.left}}):Hg(this.diagram,i,!0)?Bg(this.diagram,i):this.diagram.nodePropertyChange(i,a,{width:p.width,height:p.height,offsetX:p.offsetX,offsetY:p.offsetY,margin:{top:p.margin.top+(g-y),left:p.margin.left+(f-v)}})}else i.sourceWrapper&&i.targetWrapper||this.scaleConnector(i,h,{sourcePoint:i.sourcePoint,targetPoint:i.targetPoint});var C=this.diagram.nameTable[i.processId];C&&(c=this.diagram.bpmnModule.getChildrenBound(C,i.id,this.diagram),this.diagram.bpmnModule.updateSubProcessess(c,i,this.diagram))}},e.prototype.scaleConnector=function(e,t,n){e.sourcePoint=$d(t,e.sourcePoint),e.targetPoint=$d(t,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e),this.diagram.connectorPropertyChange(e,n,{sourcePoint:e.sourcePoint,targetPoint:e.targetPoint})},e.prototype.portDrag=function(e,t,n,i){var o,r,a=this.findTarget(t,e),l=Wy(e.wrapper);a&&bg(a)&&(o=this.getPortChanges(e,a),a.offset.x+=n/l.width,a.offset.y+=i/l.height,r=this.getPortChanges(e,a),this.diagram.nodePropertyChange(e,o,r),this.diagram.updateDiagramObject(e))},e.prototype.labelDrag=function(e,t,n,i){var o,r,a;a=this.findTarget(t,e);var l=Vy(e.wrapper);o=this.getAnnotationChanges(e,a),a instanceof eu?(a.offset.x+=n/l.width,a.offset.y+=i/l.height):(this.updatePathAnnotationOffset(e,a,n,i),a instanceof tu&&(a.alignment="Center")),r=this.getAnnotationChanges(e,a),e instanceof ry?this.diagram.nodePropertyChange(e,o,r):this.diagram.connectorPropertyChange(e,o,r),this.diagram.updateDiagramObject(e),_b(this.diagram,a,!1,t)||this.labelSelect(e,t)},e.prototype.updatePathAnnotationOffset=function(e,t,n,i,o,r){var a,l,s,d,c=this.diagram.getWrapper(e.wrapper,t.id),u=e.intermediatePoints,h=0,p=o||{x:c.offsetX+n,y:c.offsetY+i},f=this.getInterceptWithSegment(p,u),g=u[u.length-1];if(s=jd.getLengthFromListOfPoints(u),f.length>0){if(t.dragLimit.top||t.dragLimit.bottom||t.dragLimit.left||t.dragLimit.right){var m={minDistance:null};g=this.getRelativeOffset(p,u,m);var v={minDistance:null};d=this.getRelativeOffset(p,f,v),g=null!=m&&v.minDistance<m.minDistance?d:Um(e.intermediatePoints,t).point}else g=d=f[f.length-1];if(g){var y=void 0;for(y=0;y<u.length;y++){if(null!=l){if(Zd.toBounds([l,u[y]]).containsPoint(g)){h+=jd.findLength(l,g);break}h+=jd.findLength(l,u[y])}l=u[y]}a={x:h/s,y:0}}this.updateLabelMargin(e,t,a,p,r,n,i)}else this.updateLabelMargin(e,t,null,p,r,n,i)},e.prototype.getRelativeOffset=function(e,t,n){var i,o,r,a;for(a=0;a<t.length;a++)r=t[a],o=Math.round(Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))),null!==n.minDistance&&Math.min(Math.abs(n.minDistance),Math.abs(o))!==Math.abs(o)||(i=r,n.minDistance=o);return i},e.prototype.dragLimitValue=function(e,t,n,i){var o=!1,r=!1;return n.x>=t.x-e.dragLimit.left-i.width/2&&n.x<=t.x+e.dragLimit.right+i.width/2&&(o=!0),n.y>=t.y-e.dragLimit.top-i.height/2&&n.y<=t.y+e.dragLimit.bottom+i.height/2&&(r=!0),{x:o,y:r}},e.prototype.updateLabelMargin=function(e,t,n,i,o,r,a){if(n=n||{x:t.offset,y:0},t&&n&&n.x>0&&n.x<1){var l,s=jd.getLengthFromListOfPoints(e.intermediatePoints);l=this.getPointAtLength(s*n.x,e.intermediatePoints,0);var d=this.diagram.scrollSettings.currentZoom,c=t.dragLimit;if(c.top||c.bottom||c.left||c.right){this.diagram.getWrapper(e.wrapper,t.id);var u=new Zd(0,0,0,0),h=this.diagram.getWrapper(e.wrapper,t.id);u.x=h.offsetX/d+r,u.y=h.offsetY/d+a,u.width=h.bounds.width/d,u.height=h.bounds.height/d;var p=new Zd(l.x-(c.left||0)-u.width/2,l.y-(c.top||0)-u.height/2,(c.left||0)+(c.right||0)+u.width,(c.top||0)+(c.bottom||0)+u.height);if(p.containsPoint(i))i=i;else for(var f=0,g=this.boundsInterSects([l,i],p,!1);f<g.length;f++)i=g[f];var m=this.dragLimitValue(t,l,i,u);t.margin={left:m.x?i.x-l.x:t.margin.left,top:m.y?i.y-l.y:t.margin.top,right:0,bottom:0}}else t.margin={left:i.x-l.x,top:i.y-l.y,right:0,bottom:0};t.offset=n.x,o&&(t.width=o.width,t.height=o.height)}},e.prototype.boundsInterSects=function(e,t,n){var i;return t&&(i=this.intersect(e,[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height},{x:t.x,y:t.y}],n)),i},e.prototype.intersect=function(e,t,n){for(var i=[],o=0;o<e.length-1;o++)for(var r=0;r<t.length-1;r++){var a=Mm(e[o],e[o+1],t[r],t[r+1]);0!==a.x&&0!==a.y&&i.push(a)}return i},e.prototype.getPointAtLength=function(e,t,n){for(var i,o,r=0,a={x:0,y:0},l=0;l<t.length;l++)if(o=t[l],i){var s=jd.findLength(i,o),d=void 0,c=void 0,u=void 0,h=void 0;if(r+s>=e){d=e-r,c=jd.findAngle(i,o),u=d*Math.cos(c*Math.PI/180),h=d*Math.sin(c*Math.PI/180),a={x:i.x+u,y:i.y+h};break}r+=s,i=o}else i=o;return a},e.prototype.getInterceptWithSegment=function(e,t){var n,i,o,r=[],a=[],l=[];o=jd.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight});for(var s=1;s<t.length;s++){l=[t[s-1],t[s]],a=[],i=Math.round(jd.findAngle(l[0],l[1])%360),n=Math.round(jd.findAngle(l[1],l[0])%360);var d=i>0&&i<=90||i>180&&i<=270?90:-90;a.push(jd.transform(e,i+d,o)),a.push(jd.transform(e,n+d,o));var c=Rm({x1:l[0].x,y1:l[0].y,x2:l[1].x,y2:l[1].y},{x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y});c.enabled&&r.push(c.intersectPt)}return r},e.prototype.getAnnotationChanges=function(e,t){var n={};return n[av(e,t.id,!0)]={width:t.width,height:t.height,offset:e instanceof ry?{x:t.offset.x,y:t.offset.y}:t.offset,rotateAngle:t.rotateAngle,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},horizontalAlignment:t.horizontalAlignment,verticalAlignment:t.verticalAlignment,alignment:e instanceof zf?t.alignment:void 0},{annotations:n}},e.prototype.getPortChanges=function(e,t){var n={};return n[av(e,t.id,!1)]={offset:t.offset},{ports:n}},e.prototype.labelRotate=function(e,t,n,i){var o,r;o=this.getAnnotationChanges(e,t),Qd();var a=this.diagram.getWrapper(e.wrapper,t.id),l=Ou({x:a.offsetX,y:a.offsetY},n)+90,s=this.snapAngle(l);l=0!==s?s:l,t instanceof tu&&t.segmentAngle&&(l-=zm(e.intermediatePoints,t).angle),t.rotateAngle+=(l=(l+360)%360)-(t.rotateAngle+a.parentTransform),t.margin.bottom+="Top"===a.verticalAlignment?-t.height/2:"Bottom"===a.verticalAlignment?t.height/2:0,t.margin.right+="Left"===a.horizontalAlignment?-t.width/2:"Right"===a.horizontalAlignment?t.width/2:0,t instanceof tu?t.alignment="Center":t.horizontalAlignment=t.verticalAlignment="Center",i.wrapper.rotateAngle=i.rotateAngle=t.rotateAngle,r=this.getAnnotationChanges(e,t),e instanceof ry?this.diagram.nodePropertyChange(e,o,r):this.diagram.connectorPropertyChange(e,o,r),this.diagram.updateDiagramObject(e)},e.prototype.labelResize=function(e,t,n,i,o,r){var a,l,s;a=this.getAnnotationChanges(e,t);var d=r.wrapper.children[0];if(n&&1!==n||i&&1!==i){var c=Qd(),u=Qd();ec(c,-e.rotateAngle,e.offsetX,e.offsetY),ec(u,-(s=(d.rotateAngle+(e instanceof ry?e.rotateAngle:0)+360)%360),o.x,o.y),tc(u,n,i,o.x,o.y),ec(u,s,o.x,o.y);var h=$d(u,{x:d.offsetX,y:d.offsetY}),p=d.actualSize.height*i,f=d.actualSize.width*n,g=this.findTarget(d,e);if(g instanceof tu)this.updatePathAnnotationOffset(e,t,0,0,h,new Bd(f,p));else{var m=Vy(e.wrapper);(h=$d(c,h)).x=h.x-d.margin.left+d.margin.right,h.y=h.y-d.margin.top+d.margin.bottom,h.y+="Top"===g.verticalAlignment?-p/2:"Bottom"===g.verticalAlignment?p/2:0,h.x+="Left"===g.horizontalAlignment?-f/2:"Right"===g.horizontalAlignment?f/2:0;var v=m.width/(h.x-m.x),y=m.height/(h.y-m.y);f>1&&(g.width=f,g.offset.x=1/v),p>1&&(g.height=p,g.offset.y=1/y)}}t instanceof tu&&(t.alignment="Center"),l=this.getAnnotationChanges(e,t),e instanceof ry?this.diagram.nodePropertyChange(e,a,l):this.diagram.connectorPropertyChange(e,a,l),this.diagram.updateDiagramObject(e)},e.prototype.getSubProcess=function(e){var t,n={nodes:[],connectors:[]};return e instanceof ry?t=e.processId:e&&e.nodes&&e.nodes.length&&e.nodes[0].processId&&(t=e.nodes[0].processId),t?(n.nodes.push(Yy(this.diagram.nameTable[t])),n):n},e.prototype.checkBoundaryConstraints=function(e,t,n){var i=this.diagram.pageSettings,o=this.diagram.pageSettings.boundaryConstraints,r=this.diagram.scroller;if("Page"===o||"Diagram"===o){var a=n?void 0:this.diagram.selectedItems.wrapper.bounds;return(n?n.right:a.right)+(e||0)<=("Page"===o?i.width:r.viewPortWidth)&&(n?n.left:a.left)+(e||0)>=0&&(n?n.bottom:a.bottom)+(t||0)<=("Page"===o?i.height:r.viewPortHeight)&&(n?n.top:a.top)+(t||0)>=0}return!0},e.prototype.dragSelectedObjects=function(e,t){var n=this.diagram.selectedItems;if(this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY),n=Lg(this.diagram,n)||n,this.checkBoundaryConstraints(e,t)){this.diagram.diagramActions=this.diagram.diagramActions|Mc.PreventZIndexOnDragging|Mc.DragUsingMouse;var i=this.diagram.selectedObject.actualObject;return(i&&i instanceof ry&&i.isLane&&xm(i,this.diagram)||!i||!i.isLane)&&this.diagram.drag(n,e,t),this.diagram.diagramActions=this.diagram.diagramActions&~(Mc.PreventZIndexOnDragging|Mc.DragUsingMouse),this.diagram.refreshCanvasLayers(),!0}return!1},e.prototype.scaleSelectedItems=function(e,t,n){var i=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=i.offsetX,this.state.backup.offsetY=i.offsetY,this.state.backup.width=i.width,this.state.backup.height=i.height,this.state.backup.pivot=n),i=Lg(this.diagram,i)||i,this.diagram.scale(i,e,t,n)},e.prototype.rotateSelectedItems=function(e){var t=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=t.rotateAngle),t=Lg(this.diagram,t)||t,this.diagram.rotate(t,e)},e.prototype.hasSelection=function(){return Tb(this.diagram)},e.prototype.isSelected=function(e){return _b(this.diagram,e)},e.prototype.initExpand=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var n=e.target||e.source,i={isExpanded:n.isExpanded};n.isExpanded=!n.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=Mc.PreventIconsUpdate,this.diagram.nodePropertyChange(n,i,{isExpanded:n.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~Mc.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1;for(var o=0,r=this.diagram.views;o<r.length;o++){var a=this.diagram.views[r[o]];a instanceof cw||this.diagram.refreshCanvasDiagramLayer(a)}this.diagram.protectPropertyChange(t)},e.prototype.expandNode=function(e,t){var n,i=this.diagram.preventNodesUpdate,o=e.isExpanded;this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(e,o,this.diagram),e.isExpanded=o;var r=this.diagram.layout.fixedNode;if(this.diagram.layout.fixedNode=e.id,this.diagram.diagramActions!=Mc.Render&&this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),this.diagram.blazorActions|=wc.expandNode,n=this.diagram.doLayout(),this.diagram.blazorActions&=~wc.expandNode,this.diagram.preventNodesUpdate=i,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule)this.diagram.allowServerDataBinding=!1,this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,n,e,this.diagram),this.diagram.allowServerDataBinding=!0;else{var a={element:xv(Yy(e)),state:!!e.isExpanded};this.triggerEvent(jc.expandStateChange,a),this.diagram.lineRoutingModule&&this.diagram.constraints&Ac.LineRouting&&this.diagram.resetSegments()}return this.diagram.layout.fixedNode=""===r?"":this.diagram.layout.fixedNode,n},e.prototype.getparentexpand=function(e,t,n,i){for(var o,r=0;r<e.inEdges.length;r++){var a=t.nameTable[e.inEdges[r]],l=t.nameTable[a.sourceID];if(l.isExpanded&&!n&&l.id!==i.sourceID&&a.visible)return!1;o=!0}return o},e.prototype.expandCollapse=function(e,t,n){for(var i=0;i<e.outEdges.length;i++){var o=n.nameTable[e.outEdges[i]],r=n.nameTable[o.targetID],a=this.getparentexpand(r,n,t,o);o.visible=t;var l={visible:r.visible,style:{opacity:r.wrapper.style.opacity}},s={visible:r.visible,style:{opacity:r.wrapper.style.opacity}};a&&(r.isExpanded&&this.expandCollapse(r,t,n),r.visible=t,r.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&t?.1:r.style.opacity,n.nodePropertyChange(r,l,s)),n.connectorPropertyChange(o,l,s)}},e.prototype.updateNodeDimension=function(e,t){e instanceof ry&&(e.offsetX=t.x+t.width/2,e.offsetY=t.y+t.height/2,e.width=t.width,e.height=t.height,e.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(e,{},{width:t.width,height:t.height,offsetX:e.offsetX,offsetY:e.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},e.prototype.updateConnectorPoints=function(e,t){e instanceof zf&&(this.diagram.connectorPropertyChange(e,{},{targetPoint:e.targetPoint}),this.diagram.updateDiagramObject(e))},e.prototype.updateSelectedNodeProperties=function(e){if(this.diagram.lineRoutingModule&&this.diagram.constraints&Ac.LineRouting){var t=[],n=[],i=[],o=[],r=[],a=[];this.diagram.protectPropertyChange(!0);var l=[],s=[],d=this.diagram.selectedObject.actualObject,c=this.diagram.selectedObject.helperObject;if(c&&d){var u=c.offsetX-d.offsetX,h=c.offsetY-d.offsetY,p=c.width-d.width,f=c.height-d.height,g=c.rotateAngle-d.rotateAngle;if(this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>0&&(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=c.rotateAngle),d instanceof ry&&"SwimLane"!==d.shape.type&&!d.isLane&&!d.isPhase&&!d.isHeader)d.offsetX===d.wrapper.offsetX&&d.offsetY===d.wrapper.offsetY&&d.width===d.wrapper.width&&d.height===d.wrapper.height&&d.rotateAngle===d.wrapper.rotateAngle||(Ka()&&t.push(Yy(d,void 0,void 0,!0)),d.offsetX+=u,d.offsetY+=h,d.width+=p,d.height+=f,d.rotateAngle+=g,this.diagram.nodePropertyChange(d,{},{offsetX:d.offsetX,offsetY:d.offsetY,width:d.width,height:d.height,rotateAngle:d.rotateAngle}),Ka()&&i.push(Yy(d,void 0,void 0,!0))),l=this.diagram.spatialSearch.findObjects(d.wrapper.outerBounds);else if(d instanceof uy)for(var m=0;m<d.nodes.length;m++){var v=d.nodes[m];v instanceof ry&&"SwimLane"!==v.shape.type&&!v.isLane&&!v.isPhase&&!v.isHeader&&(v.offsetX+=u,v.offsetY+=h,v.width+=p,v.height+=f,v.rotateAngle+=g,this.diagram.nodePropertyChange(v,{},{offsetX:v.offsetX,offsetY:v.offsetY,width:v.width,height:v.height,rotateAngle:v.rotateAngle}),l=l.concat(this.diagram.spatialSearch.findObjects(d.wrapper.outerBounds)))}}else e instanceof zf?l.push(e):e instanceof uy&&e.connectors.length&&(l=l.concat(e.connectors));for(m=0;m<l.length;m++)l[m]instanceof zf&&-1===s.indexOf(l[m].id)&&s.push(l[m].id);for(this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0),m=0;m<s.length;m++){var y=this.diagram.nameTable[s[m]];y instanceof zf&&"Orthogonal"===y.type&&(Ka()&&n.push(Yy(y,void 0,void 0,!0)),this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,y,!0),Ka()&&o.push(Yy(y,void 0,void 0,!0)))}this.updateSelector(),Ka()&&(this.getObjectChanges(t,i,r),this.getObjectChanges(n,o,a),window&&window.Blazor&&a.length+r.length&&window.sfBlazor.updateBlazorProperties({methodName:"UpdateBlazorProperties",diagramobj:{nodes:r,connectors:a}},this.diagram)),this.diagram.protectPropertyChange(!1)}},e.prototype.drawSelectionRectangle=function(e,t,n,i){this.diagram.drawSelectionRectangle(e,t,n,i)},e.prototype.startGroupAction=function(){this.diagram.startGroupAction()},e.prototype.endGroupAction=function(){this.diagram.endGroupAction()},e.prototype.removeChildFromBPmn=function(e,t,n){var i=this.diagram.nameTable[e.id]||e.nodes[0];if(n&&i&&i.processId&&i.processId===n.wrapper.id){var o=Yy(i);o.processId=i.processId,this.diagram.startGroupAction();for(var r=[],a=(r=r.concat(i.outEdges,i.inEdges)).length-1;a>=0;a--){var l=this.diagram.nameTable[r[a]];l&&this.diagram.remove(l)}var s=void 0;(s=this.diagram.nameTable[i.processId].shape.activity.subProcess.processes||[]).splice(s.indexOf(i.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[i.processId].wrapper,i.id),this.diagram.nameTable[i.id].processId="",i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY;var d=Yy(i);this.addHistoryEntry({type:"PositionChanged",redoObject:{nodes:[d]},undoObject:{nodes:[o]},category:"Internal"}),this.diagram.endGroupAction()}},e.prototype.isDroppable=function(e,t){var n=this.diagram.nameTable[e.id]||e.nodes[0];return!(!n||!(!Ka()&&"TextAnnotation"===n.shape.shape||Ka()&&"TextAnnotation"===n.shape.bpmnShape)&&n&&"Bpmn"===n.shape.type&&(n.processId===t.id||n.id===t.processId||"Bpmn"===t.shape.type&&t.shape.activity.subProcess.collapsed))},e.prototype.renderHighlighter=function(e,t,n){if(new Zd,e.target instanceof ry||t&&e.source instanceof ry){var i=this.findTarget(t?e.sourceWrapper:e.targetWrapper,t?e.source:e.target,n,!0),o=void 0;if(i instanceof Gv)for(var r=i.id,a=e.target,l=0,s=a.wrapper.children[0].children[0].children[2].children;l<s.length;l++){var d=s[l];if(d.id===a.id+"_"+r){o=d.children[0];break}}else o=i instanceof ry?i.wrapper:t?e.sourceWrapper:e.targetWrapper;this.diagram.renderHighlighter(o)}},e.prototype.mouseOver=function(e,t,n){return!0},e.prototype.snapPoint=function(e,t,n,i){var o,r=o={x:n,y:i};return this.snappingModule&&(r=this.diagram.snappingModule.snapPoint(this.diagram,this.diagram.selectedItems,t.x<e.x,t.y<e.y,o,e,t)),r},e.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&xc.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},e.prototype.dropAnnotation=function(e,t){var n=e instanceof ry?e:e.nodes[0];this.diagram.bpmnModule&&"Bpmn"===t.shape.type&&(!Ka()&&"TextAnnotation"===n.shape.shape||Ka()&&"TextAnnotation"===n.shape.bpmnShape)&&(n.hasTarget=t.id,n.shape.annotation.nodeId=t.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(n.shape.annotation,t),n.shape.annotation.nodeId="",this.diagram.remove(n)),this.diagram.refreshDiagramLayer())},e.prototype.drop=function(e,t,n){if(this.diagram.bpmnModule){var i=e instanceof ry?e:e.nodes[0];i&&"Bpmn"===i.shape.type&&"Bpmn"===t.shape.type&&(this.diagram.bpmnModule.dropBPMNchild(t,e instanceof ry?e:e.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())}},e.prototype.addHistoryEntry=function(e){this.diagram.addHistoryEntry(e)},e.prototype.align=function(e,t,n){if(e.length>0){var i=0;e[0]=this.diagram.nameTable[e[0].id]||e[0];var o="Object"===n?Wy(e[0].wrapper):this.diagram.selectedItems.wrapper.bounds,r={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(i="Object"===n?i+1:i;i<e.length;i++){var l=0,s=0;e[i]=this.diagram.nameTable[e[i].id]||e[i];var d=Wy(e[i].wrapper);"Left"===t?l=o.left+d.width/2-d.center.x:"Right"===t?l=o.right-d.width/2-d.center.x:"Top"===t?s=o.top+d.height/2-d.center.y:"Bottom"===t?s=o.bottom-d.height/2-d.center.y:"Center"===t?l=o.center.x-d.center.x:"Middle"===t&&(s=o.center.y-d.center.y),r=this.storeObject(r,e[i]),this.drag(e[i],l,s),this.diagram.updateSelector(),a=this.storeObject(a,e[i])}r=Yy(r),a=Yy(a);var c={type:"Align",category:"Internal",undoObject:Yy(r),redoObject:Yy(a)};this.addHistoryEntry(c)}},e.prototype.distribute=function(e,t){if(e.length>0){var n=0,i=(new Zd,0),o=0,r=0,a=0,l=0,s=0,d=0,c={nodes:[],connectors:[]},u={nodes:[],connectors:[]};for(n=0;n<e.length;n++)e[n]=this.diagram.nameTable[e[n].id]||e[n];for(e=function(e,t){var n,i=0,o=0;for(i=0;i<e.length;i++){var r=Wy(e[i].wrapper);for(o=0;o<e.length;o++){var a=Wy(e[o].wrapper);"Top"===t||"Bottom"===t||"BottomToTop"===t||"Middle"===t?r.center.y>a.center.y&&(n=e[i],e[i]=e[o],e[o]=n):r.center.x>a.center.x&&(n=e[i],e[i]=e[o],e[o]=n)}}return e}(e,t),n=1;n<e.length;n++)i=i+e[n].wrapper.bounds.topRight.x-e[n-1].wrapper.bounds.topRight.x,o=o+e[n].wrapper.bounds.topLeft.x-e[n-1].wrapper.bounds.topLeft.x,r=r+e[n].wrapper.bounds.topRight.y-e[n-1].wrapper.bounds.topRight.y,a=a+e[n].wrapper.bounds.bottomRight.y-e[n-1].wrapper.bounds.bottomRight.y,l=l+e[n].wrapper.bounds.center.x-e[n-1].wrapper.bounds.center.x,s=s+e[n].wrapper.bounds.center.y-e[n-1].wrapper.bounds.center.y,d=d+e[n].wrapper.bounds.topRight.y-e[n-1].wrapper.bounds.bottomRight.y;for(n=1;n<e.length-1;n++){var h=0,p=0,f=Wy(e[n-1].wrapper),g=Wy(e[n].wrapper);"RightToLeft"===t||"Center"===t?h=f.center.x-g.center.x+l/(e.length-1):"Right"===t?h=f.topRight.x-g.topRight.x+i/(e.length-1):"Left"===t?h=f.topLeft.x-g.topLeft.x+o/(e.length-1):"Middle"===t?p=f.center.y-g.center.y+s/(e.length-1):"Top"===t?p=f.topRight.y-g.topRight.y+r/(e.length-1):"Bottom"===t?p=f.bottomRight.y-g.bottomRight.y+a/(e.length-1):"BottomToTop"===t&&(p=f.bottomRight.y-g.topRight.y+d/(e.length-1)),c=this.storeObject(c,e[n]),this.drag(e[n],h,p),this.diagram.updateSelector(),u=this.storeObject(u,e[n])}c=Yy(c),u=Yy(u);var m={type:"Distribute",category:"Internal",undoObject:Yy(c),redoObject:Yy(u)};this.addHistoryEntry(m)}},e.prototype.sameSize=function(e,t){if(e.length>0){var n,i=0;n={x:.5,y:.5},e[0]=this.diagram.nameTable[e[0].id]||e[0];var o=Wy(e[0].wrapper),r={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(i=1;i<e.length;i++){e[i]=this.diagram.nameTable[e[i].id]||e[0];var l=Wy(e[i].wrapper),s=1,d=1;"Width"===t?s=o.width/l.width:"Height"===t?d=o.height/l.height:"Size"===t&&(s=o.width/l.width,d=o.height/l.height),r=this.storeObject(r,e[i]),this.scale(e[i],s,d,n),a=this.storeObject(a,e[i])}this.diagram.updateSelector(),r=Yy(r),a=Yy(a);var c={type:"Sizing",category:"Internal",undoObject:Yy(r),redoObject:Yy(a)};this.addHistoryEntry(c)}},e.prototype.storeObject=function(e,t){return t instanceof ry?e.nodes.push(Yy(t)):e.connectors.push(Yy(t)),e},e.prototype.updatePanState=function(e){if(e)this.diagram.realActions=this.diagram.realActions|Lc.PanInProgress;else{this.diagram.dataBind();var t=this.diagram.scrollSettings;this.diagram.realActions=this.diagram.realActions&~Lc.PanInProgress;var n={VerticalOffset:t.verticalOffset,HorizontalOffset:t.horizontalOffset,ViewportHeight:t.viewPortHeight,ViewportWidth:t.viewPortWidth,CurrentZoom:t.currentZoom};this.triggerEvent(jc.scrollChange,{oldValue:n,newValue:n,source:this.diagram,panState:"Completed"})}},e.prototype.dataBinding=function(){this.diagram.dataBind()},e.prototype.setBlazorDiagramProps=function(e){this.diagram.setBlazorDiagramProps(e)},e.prototype.scroll=function(e,t,n){var i=this.diagram.constraints&Ac.PanX,o=function(e){return e.constraints&Ac.PanY}(this.diagram);Ka()?(this.diagram.setCursor("grabbing"),this.diagram.scroller.zoom(1,(e=i?e:0)*this.diagram.scroller.currentZoom,(t=o?t:0)*this.diagram.scroller.currentZoom,n)):this.diagram.pan((e=i?e:0)*this.diagram.scroller.currentZoom,(t=o?t:0)*this.diagram.scroller.currentZoom,n)},e.prototype.drawHighlighter=function(e){this.diagram.renderHighlighter(e.wrapper)},e.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},e.prototype.renderContainerHelper=function(e){return Lg(this.diagram,e)},e.prototype.isParentAsContainer=function(e,t){return Hg(this.diagram,e,t)},e.prototype.dropChildToContainer=function(e,t){this.diagram.diagramActions&Mc.PreventLaneContainerUpdate||zg(this.diagram,e,t)},e.prototype.checkSelection=function(e,t){var n;if(1===e.nodes.length&&0===e.connectors.length)if(Hg(this.diagram,e.nodes[0],!0)){var i=e.nodes[0];if("SwimLane"===(n="SwimLane"===e.nodes[0].shape?e.nodes[0]:this.diagram.nameTable[e.nodes[0].parentId]).shape.type){var o="Horizontal"===n.shape.orientation;(i.isPhase&&(o&&"ResizeSouth"===t||!o&&"ResizeEast"===t)||i.isLane&&(o&&"ResizeEast"===t||!o&&"ResizeSouth"===t))&&hm(this.diagram,n,t)}else if("Grid"===n.container.type)if("Horizontal"===n.container.orientation&&1===i.rowIndex||"Vertical"===n.container.orientation&&i.rowIndex>0&&i.columnIndex>0){if("ResizeSouth"===t)for(var r=0;r<this.diagram.nodes.length;r++)if((a=this.diagram.nodes[r]).rowIndex===n.rows.length-1&&0===a.columnIndex){this.select(a);break}}else if("ResizeEast"===t)for(r=0;r<this.diagram.nodes.length;r++){var a;if(1===(a=this.diagram.nodes[r]).rowIndex&&a.columnIndex===n.columns.length-1){this.select(a);break}}}else hm(this.diagram,e.nodes[0],t)},e.prototype.zoom=function(e,t,n,i){this.diagram.scroller.zoom(e,t*this.diagram.scroller.currentZoom,n*this.diagram.scroller.currentZoom,i)},e}(),nw=function(){function e(e){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=e,this.objects=[],this.transform=e.scroller?e.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=e.scrollSettings.viewPortWidth,this.vPortHeight=e.scrollSettings.viewPortHeight,this.currentZoomFActor=e.scrollSettings.currentZoom,this.hOffset=e.scrollSettings.horizontalOffset,this.vOffset=e.scrollSettings.verticalOffset}return Object.defineProperty(e.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(e){this.vPortHeight=e,this.diagram.scrollSettings.viewPortHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(e){this.currentZoomFActor=e,this.diagram.scrollSettings.currentZoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(e){this.vPortWidth=e,this.diagram.scrollSettings.viewPortWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(e){this.hOffset=e,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Lc.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(e){this.vOffset=e,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Lc.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=e},enumerable:!0,configurable:!0}),e.prototype.updateScrollOffsets=function(e,t){var n,i,o=this.getPageBounds(void 0,void 0,!0);o.x*=this.currentZoom,o.y*=this.currentZoom,o.width*=this.currentZoom,o.height*=this.currentZoom,n=Math.max(0,e-o.left),i=Math.max(0,t-o.top),void 0!==e&&void 0!==t?(this.horizontalOffset=n,this.verticalOffset=i,this.diagram.setOffset(n,i)):this.diagram.setOffset(-this.horizontalOffset-o.x,-this.verticalOffset-o.y),this.transform={tx:Math.max(this.horizontalOffset,-o.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-o.top)/this.currentZoom,scale:this.currentZoom}},e.prototype.setScrollOffset=function(e,t){this.scrolled=!1;var n=this.getPageBounds(void 0,void 0,!0);n.x*=this.currentZoom,n.y*=this.currentZoom,n.width*=this.currentZoom,n.height*=this.currentZoom;var i=-n.left,o=-n.top,r=!1,a=this.viewPortWidth*this.currentZoom,l=this.viewPortHeight*this.currentZoom,s=i-e;if(s!==this.horizontalOffset){i<this.horizontalOffset&&(this.horizontalOffset>s?this.horizontalOffset-=e:this.horizontalOffset=s,r=!0);var d=Math.max(n.right+this.vScrollSize,a);if(!r&&d<-s+this.viewPortWidth){var c=-s+a-this.vScrollSize,u=-this.horizontalOffset+a-this.vScrollSize;this.horizontalOffset=c<u?s:c-n.right>c-u?s:-(n.right+this.vScrollSize-a),r=!0}r||(this.horizontalOffset=i-e)}r=!1;var h=o-t;if(h!==this.verticalOffset){o<this.verticalOffset&&(this.verticalOffset>h?this.verticalOffset-=t:this.verticalOffset=h,r=!0);var p=Math.max(n.bottom+this.hScrollSize,l);if(!r&&p<-h+l){var f=-h+l-this.hScrollSize,g=-this.verticalOffset+l-this.hScrollSize;this.verticalOffset=f<g?h:f-n.bottom>f-g?h:-(n.bottom+this.hScrollSize-l),r=!0}r||(this.verticalOffset=o-t)}this.transform={tx:Math.max(this.horizontalOffset,-n.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-n.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},e.prototype.getObjects=function(e,t){for(var n=[],i=0;i<e.length;i++){for(var o=!1,r=0;r<t.length;r++)if(e[i]===t[r]){o=!0;break}o||n.push(e[i])}return n},e.prototype.virtualizeElements=function(){for(var e=this.diagram.spatialSearch.findObjects(new Zd(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,this.viewPortWidth/this.currentZoom,this.viewPortHeight/this.currentZoom)),t=[],n=0;n<e.length;n++)t.push(e[n].id);var i=this.getObjects(t,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=t);var o=this.getObjects(this.oldCollectionObjects,t);this.diagram.updateVirtualObjects(i,!1,o),this.oldCollectionObjects=t},e.prototype.setSize=function(e){var t=this.getPageBounds(void 0,void 0,!0);t.x*=this.currentZoom,t.y*=this.currentZoom,t.width*=this.currentZoom,t.height*=this.currentZoom;var n=Math.min(t.x,-this.horizontalOffset),i=Math.min(t.y,-this.verticalOffset),o=this.scrollerWidth,r=this.scrollerWidth;-this.verticalOffset<=t.y&&-this.verticalOffset+this.viewPortHeight>=t.bottom&&(r=0),-this.horizontalOffset<=t.x&&-this.horizontalOffset+this.viewPortWidth>=t.right&&(o=0),this.hScrollSize=o,this.vScrollSize=r;var a=this.diagramWidth,l=this.diagramHeight;this.diagramWidth=Math.max(t.right,-this.horizontalOffset+this.viewPortWidth-r)-n,this.diagramHeight=Math.max(t.bottom,-this.verticalOffset+this.viewPortHeight-o)-i,a===this.diagramWidth&&l===this.diagramHeight||"Diagram"===this.diagram.scrollSettings.scrollLimit||this.diagram.setSize(this.diagramWidth,this.diagramHeight),"Diagram"===this.diagram.scrollSettings.scrollLimit&&(a===this.diagramWidth&&l===this.diagramHeight&&1===this.currentZoom||this.diagram.diagramActions&&e&&(!this.diagram.diagramActions||!e||0===this.verticalOffset&&this.verticalOffset!==e.y||0===this.horizontalOffset&&this.horizontalOffset!==e.x)?e&&a===this.diagramWidth&&l===this.diagramHeight&&(this.diagram.diagramCanvas.scrollHeight>this.viewPortHeight&&e.y<0&&this.horizontalOffset===e.x&&0===this.verticalOffset||this.diagram.diagramCanvas.scrollWidth>this.viewPortWidth&&e.x<0&&this.verticalOffset===e.y&&0===this.horizontalOffset)&&(this.verticalOffset=e.y,this.horizontalOffset=e.x,this.transform={tx:Math.max(e.x,-t.left)/this.currentZoom,ty:Math.max(e.y,-t.top)/this.currentZoom,scale:this.currentZoom}):(this.diagram.scrollActions&Hc.Interaction&&e&&(this.transform={tx:Math.max(e.x,-t.left/this.currentZoom)/this.currentZoom,ty:Math.max(e.y,-t.top/this.currentZoom)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=e.x,this.verticalOffset=e.y),this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.scrollActions&Hc.PropertyChange||!e||(this.horizontalOffset=e.x,this.verticalOffset=e.y,this.transform={tx:Math.max(e.x,-t.left)/this.currentZoom,ty:Math.max(e.y,-t.top)/this.currentZoom,scale:this.currentZoom}))),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},e.prototype.setViewPortSize=function(e,t){this.viewPortWidth=e,this.viewPortHeight=t},e.prototype.getPageBounds=function(e,t,n){var i,o=new Zd;if("Content"!==t&&null!==this.diagram.pageSettings.width&&null!==this.diagram.pageSettings.height){var r=this.diagram.pageSettings.width,a=this.diagram.pageSettings.height,l=0,s=0;if(this.diagram.pageSettings.multiplePage){if((o=this.diagram.spatialSearch.getPageBounds(0,0)).right>r&&(r*=d=Math.ceil(o.right/r)),o.bottom>a&&(a*=d=Math.ceil(o.bottom/a)),o.left<0&&Math.abs(o.left)>l){var d=Math.ceil(Math.abs(o.left)/this.diagram.pageSettings.width);l=this.diagram.pageSettings.width*d}o.top<0&&Math.abs(o.top)>s&&(d=Math.ceil(Math.abs(o.top)/this.diagram.pageSettings.height),s=this.diagram.pageSettings.height*d)}i=new Zd(-l,-s,r+l,a+s)}else{var c=e?void 0:0;i=this.diagram.spatialSearch.getPageBounds(c,c)}if(n){var u=this.diagram.scrollSettings.padding;i.x-=u.left,i.y-=u.top,i.width+=u.left+u.right,i.height+=u.top+u.bottom}return i},e.prototype.getPageBreak=function(e){for(var t=0,n=0,i=-1,o=[],r=this.diagram.pageSettings.margin.left,a=this.diagram.pageSettings.margin.right,l=this.diagram.pageSettings.margin.top,s=this.diagram.pageSettings.margin.bottom,d=1,c=1;e.width>t;)(t+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:e.width)===this.diagram.pageSettings.width&&(o[++i]={x1:e.left+r,y1:e.top+l,x2:e.left+r,y2:e.bottom-s}),t<e.width&&(o[++i]={x1:e.topLeft.x+this.diagram.pageSettings.width*d,y1:e.topLeft.y+l,x2:e.bottomLeft.x+this.diagram.pageSettings.width*d,y2:e.bottomLeft.y-s},d++),e.width===t&&(o[++i]={x1:e.right-a,y1:e.top+l,x2:e.right-a,y2:e.bottom-s});for(;e.height>n;)(n+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:e.height)===this.diagram.pageSettings.height&&(o[++i]={x1:e.left+r,y1:e.top+l,x2:e.right-a,y2:e.top+l}),n<e.height&&(o[++i]={x1:e.topLeft.x+r,y1:e.topLeft.y+this.diagram.pageSettings.height*c,x2:e.topRight.x-a,y2:e.topRight.y+this.diagram.pageSettings.height*c},c++),e.height===n&&(o[++i]={x1:e.left+r,y1:e.bottom-s,x2:e.right-a,y2:e.bottom-s});return o},e.prototype.zoom=function(e,t,n,i){if(this.diagram.constraints&Ac.Zoom&&1!==e||function(e){return e.constraints&Ac.Pan}(this.diagram)&&1===e){var o=Qd();if(tc(o,this.currentZoom,this.currentZoom),nc(o,this.horizontalOffset,this.verticalOffset),i=$d(o,i=i||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom}),this.currentZoom*e>=this.diagram.scrollSettings.minZoom&&this.currentZoom*e<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=e;var r=this.getPageBounds(void 0,void 0,!0);r.x*=this.currentZoom,r.y*=this.currentZoom;var a=Qd();tc(a,e,e,i.x,i.y),nc(a,t||0,n||0),ic(o,a);var l=$d(o,{x:0,y:0});1===e&&(l=this.applyScrollLimit(l.x,l.y)),!(this.diagram.scrollActions&Hc.PropertyChange)&&this.diagram.scrollActions&Hc.Interaction&&"Diagram"===this.diagram.scrollSettings.scrollLimit||(this.transform={tx:Math.max(l.x,-r.left)/this.currentZoom,ty:Math.max(l.y,-r.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=l.x,this.verticalOffset=l.y),this.setSize(l),"SVG"!==this.diagram.mode&&sg(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||sg(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-r.x,-this.verticalOffset-r.y),Gf(this.diagram)}}},e.prototype.fitToPage=function(e){var t=(e=e||{}).mode,n=e.region,i=e.margin||{},o=e.canZoomIn,r=e.customBounds;i.bottom=i.bottom||25,i.top=i.top||25,i.left=i.left||25,i.right=i.right||25;var a,l=r,s=-this.horizontalOffset,d=-this.verticalOffset;if("PageSettings"===(n=n||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){t=t||"Page","CustomBounds"!==n&&(l=this.getPageBounds(!0,n,!0));var c={x:0,y:0};c.x=(this.viewPortWidth-(i.left+i.right))/l.width,c.y=(this.viewPortHeight-(i.top+i.bottom))/l.height,!o&&l.width-this.horizontalOffset<this.viewPortWidth&&l.height-this.verticalOffset<this.viewPortHeight&&(c.x=Math.min(this.currentZoom,c.x),c.y=Math.min(this.currentZoom,c.y));var u=void 0;switch(t){case"Width":s+=(this.viewPortWidth-l.width*(u=c.x))/2-l.x*u+(i.left-i.right)/2*u,d-=-this.verticalOffset*(a=u/this.currentZoom),d="CustomBounds"!==n?d:d-this.verticalOffset*a;break;case"Height":a=(u=c.y)/this.currentZoom,s+=(this.viewPortWidth-l.width*u)/2-l.x*u+(i.left-i.right)/2*u,d+=(this.viewPortHeight-l.height*u)/2-l.y*u+(i.top-i.bottom)/2*u;break;case"Page":a=(u=Math.min(c.x,c.y))/this.currentZoom,s+=(this.viewPortWidth-l.width*u)/2-l.x*u+(i.left-i.right)/2*u,d+=(this.viewPortHeight-l.height*u)/2-l.y*u+(i.top-i.bottom)/2*u}this.zoom(a,s,d,{x:0,y:0})}else this.zoom(a=1/this.currentZoom,s,d,{x:0,y:0})},e.prototype.bringIntoView=function(e){var t=0,n=0,i=this.currentZoom,o=e,r=-this.horizontalOffset,a=-this.verticalOffset;o=new Zd(o.x*i,o.y*i,o.width*i,o.height*i),new Zd(r,a,this.viewPortWidth,this.viewPortHeight).containsRect(o)||(o.right>-r+this.viewPortWidth&&(t=o.right-this.viewPortWidth),o.x<-r&&(t=o.x),o.bottom>-a+this.viewPortHeight&&(n=o.bottom-this.viewPortHeight),o.y<-a&&(n=o.y),this.zoom(1,-this.horizontalOffset-t,-this.verticalOffset-n,null))},e.prototype.bringToCenter=function(e){var t=this.currentZoom,n=new Zd(e.x*t,e.y*t,e.width*t,e.height*t);this.zoom(1,-this.horizontalOffset-(n.x+n.width/2-this.viewPortWidth/2),-this.verticalOffset-(n.y+n.height/2-this.viewPortHeight/2),null)},e.prototype.applyScrollLimit=function(e,t){if("Infinity"!==this.diagram.scrollSettings.scrollLimit){var n=void 0;if("Limited"===this.diagram.scrollSettings.scrollLimit){var i=this.diagram.scrollSettings.scrollableArea;n=new Zd(i.x,i.y,i.width,i.height)}(n=n||this.getPageBounds(!0)).x*=this.currentZoom,n.y*=this.currentZoom,n.width*=this.currentZoom,n.height*=this.currentZoom,e*=-1,t*=-1;var o=Math.max(n.right,this.viewPortWidth);if(!(e<=n.x&&(e+this.viewPortWidth>=n.right||e>=n.right-this.viewPortWidth)||e>=n.x&&e+this.viewPortWidth<=o))if(e>=n.x)e=Math.max(n.x,Math.min(e,e-(e+this.viewPortWidth-this.vScrollSize-o)));else{var r=n.right-this.viewPortWidth;e=Math.min(r,n.x)}var a=Math.max(n.bottom,this.viewPortHeight);t<=n.y&&t+this.viewPortHeight>=n.bottom||t>=n.y&&t+this.viewPortHeight<=a||(t>=n.y?t=Math.max(n.y,Math.min(t,t-(t+this.viewPortHeight-this.hScrollSize-a))):(r=n.bottom-this.viewPortHeight,t=Math.min(n.y,r))),e*=-1,t*=-1}return{x:e,y:t}},e}(),iw=function(){function e(e,t,n,i,o){this.objects=[],this.left=e,this.top=t,this.width=n,this.height=i,this.spatialSearch=o}return e.prototype.findQuads=function(e,t){null!=this.first&&this.first.isIntersect(e)&&this.first.findQuads(e,t),null!=this.second&&this.second.isIntersect(e)&&this.second.findQuads(e,t),null!=this.third&&this.third.isIntersect(e)&&this.third.findQuads(e,t),null!=this.fourth&&this.fourth.isIntersect(e)&&this.fourth.findQuads(e,t),this.objects.length>0&&t.push(this)},e.prototype.isIntersect=function(e){return!(this.left+this.width<e.left||this.top+this.height<e.top||this.left>e.right||this.top>e.bottom)},e.prototype.selectQuad=function(){for(var e,t=null,n=this;null!=n;)n=(e=n.getQuad(t)).source,t=e.target||t;return t},e.prototype.getQuad=function(t){var n=this.width/2,i=this.height/2;if(n>=1e3&&i>=1e3){var o=this.left+n,r=this.top+i;if(this.spatialSearch.childRight<=o){if(this.spatialSearch.childBottom<=r)return this.first||((a=new e(this.left,this.top,n,i,this.spatialSearch)).parent=this,this.first=a),{source:this.first};if(this.spatialSearch.childTop>=r)return this.third||((a=new e(this.left,r,n,i,this.spatialSearch)).parent=this,this.third=a),{source:this.third}}else if(this.spatialSearch.childLeft>=o){if(this.spatialSearch.childBottom<=r)return this.second||((a=new e(o,this.top,n,i,this.spatialSearch)).parent=this,this.second=a),{source:this.second};var a;if(this.spatialSearch.childTop>=r)return this.fourth||((a=new e(o,r,n,i,this.spatialSearch)).parent=this,this.fourth=a),{source:this.fourth}}}return this.objects.push(this.spatialSearch.childNode),{target:this}},e.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},e.prototype.addIntoAQuad=function(e){var t={};this.spatialSearch.setCurrentNode(e);for(var n=null;!t.isAdded;)n=(t=this.spatialSearch.parentQuad.add(n)).quad;return n},e.prototype.add=function(t){if(t=null,this.isContained())return{isAdded:!0,quad:t=this.selectQuad()};var n=void 0,i=!(0!==this.objects.length||this.first||this.second||this.third||this.fourth),o=2*this.width,r=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(n=new e(this.left-this.width,this.top-this.height,o,r,this.spatialSearch),i||(n.fourth=this)):(n=new e(this.left-this.width,this.top,o,r,this.spatialSearch),i||(n.second=this)):this.spatialSearch.childTop<this.top?(n=new e(this.left,this.top-this.height,o,r,this.spatialSearch),i||(n.third=this)):(n=new e(this.left,this.top,o,r,this.spatialSearch),i||(n.first=this)),this.parent=n,this.spatialSearch.parentQuad=n,{isAdded:!1,quad:t}},e}(),ow=function(){function e(e){this.quadSize=500,this.objectTable=e,this.parentQuad=new iw(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return e.prototype.removeFromAQuad=function(e){if(this.quadTable[e.id]){var t=this.quadTable[e.id],n=this.objectIndex(t.objects,e);-1!==n&&(t.objects.splice(n,1),this.update(t),delete this.quadTable[e.id])}},e.prototype.update=function(e){if(e.parent&&0===e.objects.length&&e.first&&e.second&&e.third&&e.fourth){var t=e.parent;t.first===e?t.first=null:t.second===e?t.second=null:t.third===e?t.third=null:t.fourth===e&&(t.fourth=null),this.update(e.parent)}else e!==this.parentQuad||e.first||e.second||e.third||e.fourth||(e.left=0,e.width=1e3,e.top=0,e.height=1e3)},e.prototype.addIntoAQuad=function(e){var t=this.parentQuad.addIntoAQuad(e);this.quadTable[e.id]=t},e.prototype.objectIndex=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return n;return-1},e.prototype.updateQuad=function(e){this.setCurrentNode(e);var t=e.outerBounds;if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))return!1;if(this.quadTable[e.id]?this.quadTable[e.id].isContained()||(this.removeFromAQuad(e),this.addIntoAQuad(e)):this.addIntoAQuad(e),!this.isWithinPageBounds(t)||this.leftElement===e||this.topElement===e||this.rightElement===e||this.bottomElement===e){var n=!1;return this.pageLeft===this.childLeft&&e===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=e,n=!0):e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),n=!0)),this.pageTop===this.childTop&&e===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=e,n=!0):e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),n=!0)),this.pageBottom===this.childBottom&&e===this.bottomElement||(this.pageBottom<=this.childBottom?(n=!0,this.pageBottom=this.childBottom,this.bottomElement=e):e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),n=!0)),this.pageRight===this.childRight&&e===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=e,n=!0):e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),n=!0)),n}return this.setCurrentNode(null),!1},e.prototype.isWithinPageBounds=function(e){return e.left>=this.pageLeft&&e.right<=this.pageRight&&e.top>=this.pageTop&&e.bottom<=this.pageBottom},e.prototype.findQuads=function(e){var t=[];return this.parentQuad.findQuads(e,t),t},e.prototype.findObjects=function(e){for(var t=[],n=0,i=this.findQuads(e);n<i.length;n++)for(var o=0,r=i[n].objects;o<r.length;o++){var a=r[o];a.outerBounds.intersects(e)&&t.push(this.objectTable[a.id])}return t},e.prototype.updateBounds=function(e){var t=!1;return e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),t=!0),e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),t=!0),e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),t=!0),e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),t=!0),t},e.prototype.findBottom=function(e){e.third||e.fourth?(e.third&&this.findBottom(e.third),e.fourth&&this.findBottom(e.fourth)):(e.second&&this.findBottom(e.second),e.first&&this.findBottom(e.first));for(var t=0,n=e.objects;t<n.length;t++){var i=n[t];this.pageBottom<=i.outerBounds.bottom&&(this.pageBottom=i.outerBounds.bottom,this.bottomElement=i)}},e.prototype.findRight=function(e){e.second||e.fourth?(e.second&&this.findRight(e.second),e.fourth&&this.findRight(e.fourth)):(e.first&&this.findRight(e.first),e.third&&this.findRight(e.third));for(var t=0,n=e.objects;t<n.length;t++){var i=n[t];this.pageRight<=i.outerBounds.right&&(this.pageRight=i.outerBounds.right,this.rightElement=i)}},e.prototype.findLeft=function(e){e.first||e.third?(e.first&&this.findLeft(e.first),e.third&&this.findLeft(e.third)):(e.second&&this.findLeft(e.second),e.fourth&&this.findLeft(e.fourth));for(var t=0,n=e.objects;t<n.length;t++){var i=n[t];this.pageLeft>=i.outerBounds.left&&(this.pageLeft=i.outerBounds.left,this.leftElement=i)}},e.prototype.findTop=function(e){e.first||e.second?(e.first&&this.findTop(e.first),e.second&&this.findTop(e.second)):(e.third&&this.findTop(e.third),e.fourth&&this.findTop(e.fourth));for(var t=0,n=e.objects;t<n.length;t++){var i=n[t];this.pageTop>=i.outerBounds.top&&(this.pageTop=i.outerBounds.top,this.topElement=i)}},e.prototype.setCurrentNode=function(e){if(this.childNode=e,e){var t=e.outerBounds;this.childLeft=Number(t.left),this.childTop=Number(t.top),this.childRight=Number(t.right),this.childBottom=Number(t.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},e.prototype.getPageBounds=function(e,t){if(this.pageLeft===Number.MAX_VALUE)return new Zd(0,0,0,0);var n=void 0!==e?Math.min(this.pageLeft,0):this.pageLeft,i=void 0!==t?Math.min(this.pageTop,0):this.pageTop;return new Zd(Math.round(n),Math.round(i),Math.round(this.pageRight-n),Math.round(this.pageBottom-i))},e.prototype.getQuad=function(e){return this.quadTable[e.id]},e}(),rw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(!1)],t.prototype,"preventDefaults",void 0),t}(fd),aw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"action",void 0),Object(O.__decorate)([Ks("")],t.prototype,"cursor",void 0),t}(fd),lw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(!0)],t.prototype,"inversedAlignment",void 0),t}(fd),sw=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},dw=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},cw=function(e){function t(t,n){var i,o,r=e.call(this,t,n)||this;r.version=17.1,r.checkMenu=!1,r.isServerUpdate=!1,r.oldNodeObjects=[],r.oldDiagramObject={},r.oldConnectorObjects=[],r.canEnableBlazorObject=!1,r.connectorTable={},r.groupTable={},r.scrollActions=Hc.None,r.blazorActions=wc.Default,r.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},r.textEditing=!1,r.isTriggerEvent=!1,r.preventNodesUpdate=!1,r.preventConnectorsUpdate=!1,r.callBlazorModel=!0,r.selectionConnectorsList=[],r.deleteVirtualObject=!1,r.changedConnectorCollection=[],r.changedNodesCollection=[],r.previousNodeCollection=[],r.previousConnectorCollection=[],r.crudDeleteNodes=[],r.blazorAddorRemoveCollection=[],r.blazorRemoveIndexCollection=[],r.diagramid=88123,r.selectedObject={helperObject:void 0,actualObject:void 0},r.renderTimer=null;var a=Ka()&&window&&window.Blazor&&!r.dataSourceSettings.dataSource;r.ignoreCollectionWatch=!0;for(var l=0;t&&t.nodes&&l<t.nodes.length;l++)o=r.nodes[l],(i=t.nodes[l]).children&&i.children.length>0&&(i.style&&i.style.fill||(o.style.fill="transparent"),i.style&&i.style.strokeColor||(o.style.strokeColor="transparent")),i.shape&&"UmlActivity"===i.shape.type&&km(i,o),i.shape&&"SwimLane"===i.shape.type&&Tm(i,o),a&&r.previousNodeCollection.push(Yy(o,void 0,void 0,!0)),r.nodeDefaults&&Im(o,i,r.nodeDefaults),r.updateAnnotationText(o.annotations);if(t&&t.connectors)for(l=0;t&&t.connectors&&l<t.connectors.length;l++)i=t.connectors[l],o=r.connectors[l],a&&r.previousConnectorCollection.push(Yy(o,void 0,void 0,!0)),r.connectorDefaults&&Im(o,i,r.connectorDefaults),r.updateAnnotationText(o.annotations);for(l=0;t&&t.connectors&&l<t.connectors.length;l++){var s=t.connectors[l];if(s.shape&&"None"!==s.shape.type&&Dm(s,r.connectors[l]),Ka()){var d=Yy(r.bulkChanges);r.enableServerDataBinding(!0),r.protectPropertyChange(!0);for(var c=Object.keys(d),u=0;u<c.length;u++){var h=c[u],p=h.split("-");p&&p[0]&&("nodes"===p[0]&&(d[h].sfIndex=Number(p[1]),r.changedNodesCollection.push(d[h])),"connectors"===p[0]&&(d[h].sfIndex=Number(p[1]),r.changedConnectorCollection.push(d[h])))}}}return r}return Object(O.__extends)(t,e),t.prototype.updateAnnotationText=function(e){if(Ka()&&e.length>0)for(var t=0;e&&t<e.length;t++){var n=e[t];n.content=n.content.split("\\n").join("\n")}},t.prototype.callFromServer=function(e){if("getParentID"===e.methodName)return this.nameTable[t=e.id].parentId;if("getEdges"===e.methodName){var t=e.id;return e.outEdge?this.nameTable[t].outEdges:this.nameTable[t].inEdges}if("updateDiagramObjects"===e.methodName){var n=e.obj;this.isServerUpdate=!0,e.IsAdding?this.add.apply(this,n):this.remove.apply(this,n),this.isServerUpdate=!1}else"invokeLoadDiagramMethod"===e.methodName&&this.loadDiagram(e.data)},t.prototype.clearCollection=function(e){for(var t,n=[],i=0,o=Object.keys(this.nameTable);i<o.length;i++)(t=this.nameTable[o[i]])&&(e&&t instanceof zf||!e&&t instanceof ry)&&n.push(t);this.clearObjects(n)},t.prototype.onPropertyChanged=function(n,i){var o=!0,r=!1,a=!1;if(this.diagramActions&Mc.Render){for(var l=0,s=Object.keys(n);l<s.length;l++)switch(s[l]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var d=0,c=this.views;d<c.length;d++)(R=this.views[M=c[d]])instanceof t||R.updateView(R);break;case"nodes":if(n.nodes.length>0&&0===i.nodes.length)this.clearCollection(),a=!0;else{for(var u=0,h=Object.keys(n.nodes);u<h.length;u++){var p=h[u],f=Number(p),g=this.nodes[f],m=n.nodes[f];r=r||void 0!==m.excludeFromLayout,this.nodePropertyChange(g,i.nodes[f],m,void 0,!0,!0);var v={element:xv(g),cause:this.diagramActions,oldValue:xv(i.nodes[f]),newValue:xv(n.nodes[f])};Ka()&&(v.element={node:xv(g)},v.oldValue={node:xv(void 0)},v.newValue={node:xv(void 0)}),this.triggerEvent(jc.propertyChange,v),o&&(o=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(n.connectors.length>0&&0===i.connectors.length)this.clearCollection(!0),a=!0;else{for(var y=0,b=Object.keys(n.connectors);y<b.length;y++)p=b[y],f=Number(p),g=this.connectors[f],(m=n.connectors[f])&&(m.sourceDecorator||m.targetDecorator)&&(this.diagramActions|=Mc.DecoratorPropertyChange),this.connectorPropertyChange(g,i.connectors[f],m,!0,!0),m&&(m.sourceDecorator||m.targetDecorator)&&(this.diagramActions=this.diagramActions&~Mc.DecoratorPropertyChange),v={element:xv(g),cause:this.diagramActions,oldValue:xv(i.connectors[f]),newValue:xv(n.connectors[f])},Ka()&&(v.element={connector:xv(g)},v.oldValue={connector:xv(void 0)},v.newValue={connector:xv(void 0)}),this.triggerEvent(jc.propertyChange,v),g&&g.parentId&&"UmlClassifier"===this.nameTable[g.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[g.parentId]||g),o&&(o=!1);this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(n.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(n.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(n);break;case"commandManager":this.initCommands();break;case"layout":r=!0;break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?a=!0:r=!0;break;case"tooltip":sf(this);break;case"rulerSettings":this.updateRulerSettings(n);break;case"layers":this.updateLayer(n);break;case"scrollSettings":this.scrollActions|=Hc.PropertyChange,this.updateScrollSettings(n),this.scrollActions&=~Hc.PropertyChange;break;case"locale":n.locale!==i.locale&&(this.realActions|=Lc.PreventDataInit,e.prototype.refresh.call(this),this.realActions&=~Lc.PreventDataInit);break;case"contextMenuSettings":if(void 0!==n.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=n.contextMenuSettings.showCustomMenuOnly),void 0!==n.contextMenuSettings.show&&(this.contextMenuSettings.show=n.contextMenuSettings.show),n.contextMenuSettings.items){for(var w=n.contextMenuSettings.items,C=0,x=Object.keys(w);C<x.length;C++)p=x[C],f=Number(p),this.contextMenuSettings.items[f]=w[f];this.contextMenuModule&&this.contextMenuModule.refreshItems()}break;case"serializationSettings":void 0!==n.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=n.serializationSettings.preventDefaults)}if(r&&!a){if(i.layout&&"DifferentPoint"===i.layout.connectionPointOrigin&&"SamePoint"===n.layout.connectionPointOrigin||i.layout&&n.layout&&!n.layout.enableRouting&&i.layout.enableRouting){for(var S=0;S<this.nodes.length;S++){var T=this.nodes[S];if(T.ports&&T.ports.length>0){for(var E=[],_=T.ports.length-1;_>=0;_--)"LineDistribution"===T.ports[_].id.split("_")[1]&&E.push(T.ports[_]);this.removePorts(T,E)}}for(_=0;_<this.connectors.length;_++){var k=this.connectors[_],D=k.sourcePortID,A=k.targetPortID;k.sourcePortID="",k.targetPortID="",k.sourcePortWrapper=void 0,k.targetPortWrapper=void 0,k.segments=[],this.connectorPropertyChange(k,{sourcePortID:D,targetPortID:A},{sourcePortID:"",targetPortID:""})}}this.doLayout(),this.renderReactTemplates()}o&&this.propertyChange&&(v={element:xv(this),cause:this.diagramActions,oldValue:xv(i),newValue:xv(n)},Ka()&&(v.element={diagram:xv(this)},v.oldValue={diagram:xv(void 0)},v.newValue={diagram:xv(void 0)}),this.triggerEvent(jc.propertyChange,v)),!a&&this.canLogChange()&&this.modelChanged(n,i)&&this.historyManager&&this.addHistoryEntry({type:"PropertyChanged",undoObject:i,redoObject:n,category:"Internal"}),this.resetDiagramActions(),a&&(this.initObjects(!0),this.refreshDiagramLayer(),r&&this.doLayout());var O=1===Object.keys(n).length&&void 0!==n.scrollSettings;if(!a)for(var I=0,P=this.views;I<P.length;I++){var R,M;(M=this.views[R=P[I]])instanceof t||(n.scrollSettings&&n.scrollSettings.currentZoom!=i.scrollSettings.currentZoom&&M.updateHtmlLayer(M),O||this.refreshCanvasDiagramLayer(M))}this.resetTemplate()}},t.prototype.updateSnapSettings=function(e){(void 0!==e.snapSettings.constraints||e.snapSettings.horizontalGridlines||e.snapSettings.verticalGridlines||e.snapSettings.gridType)&&this.diagramRenderer.updateGrid(this.snapSettings,Ty(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.updateRulerSettings=function(e){void 0!==e.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,Ty(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==e.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===e.rulerSettings.horizontalRuler&&void 0===e.rulerSettings.verticalRuler||(void 0!==e.rulerSettings.horizontalRuler.thickness||void 0!==e.rulerSettings.verticalRuler.thickness?(qf(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):Gf(this)),this.diagramRenderer.updateGrid(this.snapSettings,Ty(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new pb,this.initializeServices(),this.setCulture(),window.measureElement&&(window.measureElement=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},t.prototype.initializePrivateVariables=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-diagram").length;this.element.id="diagram_"+this.diagramid+"_"+e}this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new tw(this),this.eventHandler=new Jb(this,this.commandHandler),this.spatialSearch=new ow(this.nameTable),this.scroller=new nw(this)},t.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new Ed(this.getModuleName(),this.defaultLocale,this.locale))},t.prototype.setCulture=function(){this.localeObj=new Ed(this.getModuleName(),this.defaultLocale,this.locale)},t.prototype.render=function(){this.refreshing&&this.dataSourceSettings.dataSource&&!this.isLoading&&(this.nodes=[],this.connectors=[]),this.ignoreCollectionWatch=!0,window.domTable={};var e=[];if(Ka()){for(var t=[],n=[],i=0;i<this.changedNodesCollection.length;i++)t.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedNodesCollection[i]));for(i=0;i<this.changedConnectorCollection.length;i++)n.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedConnectorCollection[i]));var o="sfBlazor",r="Blazor",a={nodes:t,connectors:n};if(window&&window[r]&&!this.dataSourceSettings.dataSource&&(t.length>0||n.length>0)){var l={methodName:"UpdateBlazorProperties",diagramobj:a};window[o].updateBlazorProperties(l,this)}}this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new sb(this.element.id,new lb,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0);var s=!1;if(Ka()&&!this.dataSourceSettings.dataSource&&"None"!==this.layout.type){for(var d=0,c=this.nodes;d<c.length;d++)this.insertValue(Yy(l=c[d]),!0);for(var u=0,h=this.connectors;u<h.length;u++)this.insertValue(Yy(l=h[u]),!1);s=!0}if(this.doLayout(),s&&this.commandHandler.getBlazorOldValues(),this.lineRoutingModule){var p=[],f=[],g=[];if(Ka())for(var m=0,v=this.connectors;m<v.length;m++)p.push(Yy(l=v[m],void 0,void 0,!0));if(this.lineRoutingModule.lineRouting(this),Ka()){for(var y=0,b=this.connectors;y<b.length;y++)f.push(Yy(l=b[y],void 0,void 0,!0));this.commandHandler.getObjectChanges(p,f,g),this.blazorActions&wc.ClearObject||(o="sfBlazor",r="Blazor",a={nodes:[],connectors:g},window&&window[r]&&(l={methodName:"UpdateBlazorProperties",diagramobj:a},window[o].updateBlazorProperties(l,this)))}}this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,Ty(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),Il.isDevice&&(this.tool=Oc.ZoomPan|Oc.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=sf(this),this.diagramActions=Mc.Render;var w=this.nodes;for(i=0;i<w.length;i++)w[i].isExpanded||e.push(w[i]);if(e.length)for(i=e.length-1;i>=0;i--)this.commandHandler.expandNode(e[i],this);this.initCommands();var C=document.getElementsByClassName(this.element.id+"_hiddenUserHandleTemplate");!function(e,t,n,i){var o,r,a,l,s,d=document.getElementById(i).ej2_instances[0];if(e&&t){o=qy(e);for(var c=0,u=n.userHandles;c<u.length;c++)if(r=u[c],o){for(a=o(Yy(r),d,"userHandleTemplate_"+r.name,void 0,void 0,!1),l=0;l<a.length;l++)(s=Ay("div",{style:"height: 100%; width: 100%; pointer-events: all",id:r.name+"_template_hiddenUserHandle"})).appendChild(a[l]);t[0].appendChild(s)}}else if(Ka())for(var h=void 0,p=0,f=n.userHandles;p<f.length;p++)if(!(r=f[p]).pathData&&!r.content&&!r.source){for(l=0,h=(a=rs(r.content))(xv(r),d,"userHandleTemplate","diagramsf_userHandle_template");l<h.length;l++)(s=Ay("div",{style:"height: 100%; width: 100%; pointer-events: all",id:r.name+"_template_hiddenUserHandle"})).appendChild(h[l]);t[0].appendChild(s)}}(this.userHandleTemplate,C,this.selectedItems,this.element.id),this.updateTemplate(),this.isLoading=!1,this.renderComplete(),this.updateFitToPage(),this.refreshing&&this.renderReactTemplates()},t.prototype.updateFitToPage=function(){this.pageSettings&&this.pageSettings.fitOptions&&this.pageSettings.fitOptions.canFit&&this.fitToPage(this.pageSettings.fitOptions)},t.prototype.updateTemplate=function(){for(var e,t,n,i=0;i<this.nodes.length;i++)if("HTML"===(e=this.nodes[i]).shape.type||"Native"===e.shape.type){as("diagramsf_node_template","NodeTemplate",this,!1);break}for(i=0;i<this.nodes.length;i++)if((t=(e=this.nodes[i]).annotations[0])&&"Template"===t.annotationType){as("diagramsf_annotation_template","AnnotationTemplate",this,!1);break}for(i=0;i<this.connectors.length;i++)if((n=this.connectors[i].annotations[0])&&"Template"===n.annotationType){as("diagramsf_annotation_template","AnnotationTemplate",this,!1);break}for(i=0;i<this.selectedItems.userHandles.length;i++)if(this.selectedItems.userHandles[i].template){as("diagramsf_userHandle_template","UserHandleTemplate",this,!1);break}},t.prototype.resetTemplate=function(){for(var e,t,n,i=0;i<this.nodes.length;i++)if("HTML"===(e=this.nodes[i]).shape.type&&e.shape.content instanceof HTMLElement){ls("diagramsf_node_template");break}for(i=0;i<this.nodes.length;i++)if((t=(e=this.nodes[i]).annotations[0])&&"Template"===t.annotationType&&t.content instanceof HTMLElement){ls("diagramsf_annotation_template");break}for(i=0;i<this.connectors.length;i++)if((n=this.connectors[i].annotations[0])&&"Template"===n.annotationType&&n.content instanceof HTMLElement){ls("diagramsf_annotation_template");break}for(i=0;i<this.selectedItems.userHandles.length;i++)if(this.selectedItems.userHandles[i].template){as("diagramsf_userHandle_template","UserHandleTemplate",this,!1);break}},t.prototype.renderInitialCrud=function(){var e,t=this;t.dataSourceSettings.crudAction.read&&((e=new Cl(t.dataSourceSettings.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.dataManager?t.dataSourceSettings.dataManager=JSON.parse(e):t.dataSourceSettings.dataSource=JSON.parse(e),t.dataBind()},e.send().then()),t.dataSourceSettings.connectionDataSource.crudAction.read&&((e=new Cl(t.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(e),t.dataBind()},e.send().then())},t.prototype.getModuleName=function(){return"diagram"},t.prototype.getClassName=function(){return"Diagram"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e.push({member:"Bridging",args:[]}),e.push({member:"ConnectorEditingTool",args:[]}),Ka()&&e.push({member:"BlazorTooltip",args:[]}),this.constraints&Ac.UndoRedo&&e.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&e.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&e.push({member:"Snapping",args:[this]}),e.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||e.push({member:"OrganizationalChart",args:[this]}),"ComplexHierarchicalTree"===this.layout.type&&e.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&e.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&e.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&e.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&e.push({member:"DataBinding",args:[]}),this.constraints&Ac.LineRouting&&e.push({member:"LineRouting",args:[]}),(this.layout&&"DifferentPoint"===this.layout.connectionPointOrigin||"Linear"===this.layout.arrangement||this.layout.enableRouting)&&e.push({member:"LineDistribution",args:[]}),e},t.prototype.removeUserHandlesTemplate=function(){if(this.selectedItems.userHandles.length)for(var e=0;e<this.selectedItems.userHandles.length;e++)for(var t=0,n=this.views;t<n.length;t++)My(this.selectedItems.userHandles[e].name+"_template_hiddenUserHandle",n[t])},t.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),this.removeUserHandlesTemplate(),this.clearTemplate(),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var t=document.getElementsByClassName("e-diagram-tooltip");t.length>0;)t[0].parentNode.removeChild(t[0]);var n=document.getElementById(this.element.id+"content");n&&this.element.removeChild(n),window.measureElement&&(window.measureElement.usageCount-=1,window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null))}window.domTable={};for(var i=0;i<this.layers.length;i++)this.layers[i].zIndexTable={};this.diagramActions=void 0},t.prototype.wireEvents=function(){var e=Il.touchEndEvent,t=Il.touchMoveEvent,n=Il.isPointer?"pointerleave":"mouseleave",i="mozilla"===Il.info.name?Il.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";Pl.add(this.diagramCanvas,Il.touchStartEvent,this.eventHandler.mouseDown,this.eventHandler),Pl.add(this.diagramCanvas,t,this.eventHandler.mouseMove,this.eventHandler),Pl.add(this.diagramCanvas,e,this.eventHandler.mouseUp,this.eventHandler),Pl.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),Pl.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),Pl.add(this.diagramCanvas,"keyup",this.eventHandler.keyUp,this.eventHandler),Pl.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),Pl.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),Pl.add(this.diagramCanvas,i,this.eventHandler.mouseWheel,this.eventHandler),Pl.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},t.prototype.unWireEvents=function(){var e=Il.touchMoveEvent,t=Il.isPointer?"pointerleave":"mouseleave",n="mozilla"===Il.info.name?Il.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",i=Il.touchEndEvent;Pl.remove(this.diagramCanvas,Il.touchStartEvent,this.eventHandler.mouseDown),Pl.remove(this.diagramCanvas,e,this.eventHandler.mouseMove),Pl.remove(this.diagramCanvas,i,this.eventHandler.mouseUp),Pl.remove(this.diagramCanvas,t,this.eventHandler.mouseLeave),Pl.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),Pl.remove(this.diagramCanvas,"keyup",this.eventHandler.keyUp),Pl.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),Pl.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),Pl.remove(this.diagramCanvas,n,this.eventHandler.mouseWheel),Pl.remove(window,"resize",this.eventHandler.windowResize)},t.prototype.select=function(e,t){if(Ka()){for(var n=0;n<e.length;n++)e[n]=this.nameTable[e[n].id];e=this.nameTable[e.id]||e}null!=e&&this.commandHandler.selectObjects(e,t)},t.prototype.selectAll=function(){var e;e=this.getObjectsOfLayer(this.activeLayer.objects),this.select(e)},t.prototype.unSelect=function(e){Ka()&&(this.commandHandler.oldSelectedObjects=Yy(this.selectedItems),e=this.nameTable[e.id]||e),e&&_b(this,e)&&(this.commandHandler.unSelect(e),this.commandHandler.updateBlazorSelector())},t.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},t.prototype.updateViewPort=function(){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.eventHandler.updateViewPortSize(this.element),this.updateBlazorDiagramProperties(e,!0)},t.prototype.cutCommand=function(){this.cut()},t.prototype.cut=function(){this.commandHandler.cut()},t.prototype.addProcess=function(e,t){this.bpmnModule&&this.bpmnModule.addProcess(e,t,this)},t.prototype.removeProcess=function(e){this.bpmnModule&&this.bpmnModule.removeProcess(e,this)},t.prototype.pasteCommand=function(){this.paste()},t.prototype.paste=function(e){this.commandHandler.paste(e)},t.prototype.fitToPage=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.fitToPage(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.bringIntoView=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.bringIntoView(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.bringToCenter=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.bringToCenter(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.copyCommand=function(){this.copy()},t.prototype.copy=function(){return this.commandHandler.copy()},t.prototype.group=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.group(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},t.prototype.unGroup=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.unGroup(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},t.prototype.sendToBack=function(){this.commandHandler.sendToBack()},t.prototype.setActiveLayer=function(e){var t=this.commandHandler.getLayer(e);this.activeLayer=t},t.prototype.addLayer=function(e,t){this.commandHandler.addLayer(e,t)},t.prototype.addDiagramLayer=function(e,t){this.commandHandler.addLayer(e,t,!1)},t.prototype.removeLayer=function(e){this.commandHandler.removeLayer(e,Ka())},t.prototype.removeDiagramLayer=function(e){this.commandHandler.removeLayer(e,!1)},t.prototype.moveObjects=function(e,t){var n=Yy(this.layers);this.enableServerDataBinding(!1),this.commandHandler.moveObjects(e,t);var i=this.commandHandler.deepDiffer.map(n,Yy(this.layers)),o=this.commandHandler.deepDiffer.frameObject({},i);this.oldDiagramObject={layers:o},this.commandHandler.updateBlazorProperties()},t.prototype.layerObjectUpdate=function(){if(Ka()){this.enableServerDataBinding(!1),this.oldDiagramObject.layers=[];for(var e=0;e<this.layers.length;e++){var t=Yy(this.layers[e]);t.sfIndex=this.layers[e].zIndex,this.oldDiagramObject.layers.push(t)}}},t.prototype.sendLayerBackward=function(e){this.layerObjectUpdate(),this.commandHandler.sendLayerBackward(e),this.commandHandler.updateLayerObject(this.oldDiagramObject,!0)},t.prototype.bringLayerForward=function(e){this.layerObjectUpdate(),this.commandHandler.bringLayerForward(e),this.commandHandler.updateLayerObject(this.oldDiagramObject)},t.prototype.cloneLayer=function(e){this.commandHandler.cloneLayer(e)},t.prototype.bringToFront=function(){this.commandHandler.bringToFront()},t.prototype.moveForward=function(){this.commandHandler.sendForward()},t.prototype.sendBackward=function(){this.commandHandler.sendBackward()},t.prototype.getObject=function(e){return this.nameTable[e]},t.prototype.getNodeObject=function(e){return Yy(this.nameTable[e])},t.prototype.getConnectorObject=function(e){return Yy(this.nameTable[e])},t.prototype.getActiveLayer=function(){return this.activeLayer},t.prototype.nudgeCommand=function(e,t,n){"object"!=typeof e&&(this.selectedItems.nodes.length||this.selectedItems.connectors.length)>0&&this.nudge(e)},t.prototype.nudge=function(e,t,n){var i=0,o=0;"Left"===e||"Right"===e?i=("Left"===e?-1:1)*(t||1):o=("Up"===e?-1:1)*(n||1);var r=this.selectedItems,a=this.selectedItems.wrapper.children[0];if(a instanceof Gc)this.commandHandler.labelDrag(r.nodes[0],a,i,o);else{var l=Yy(this.selectedItems);this.protectPropertyChange(!0),this.drag(r,i,o),this.protectPropertyChange(!1);var s={type:"PositionChanged",redoObject:Yy(this.selectedItems),undoObject:l,category:"Internal"};this.addHistoryEntry(s)}this.refreshCanvasLayers()},t.prototype.insertBlazorDiagramObjects=function(e){if(Ka()&&!(this.blazorActions&wc.interaction)){if(this.enableServerDataBinding(!1),e instanceof uy){for(var t=0;t<e.nodes.length;t++)this.insertBlazorDiagramObjects(e.nodes[t]);for(t=0;t<e.connectors.length;t++)this.insertBlazorDiagramObjects(e.connectors[t])}if(!(e instanceof uy)){var n;if(e&&e.children&&e.children.length>0)for(t=0;t<e.children.length;t++)this.insertBlazorDiagramObjects(this.nameTable[e.children[t]]);n=Yy(this.nameTable[e.id]),this.insertValue(n,!(hv(e)===zf))}}},t.prototype.drag=function(e,t,n){if(this.insertBlazorDiagramObjects(e),Ka()&&e.id&&(e=this.nameTable[e.id]||e),!(this.bpmnModule&&e instanceof ry&&this.bpmnModule.updateAnnotationDrag(e,this,t,n))){if(e instanceof uy){if(this.preventConnectorsUpdate=!0,e.nodes&&e.nodes.length){for(var i=0,o=e.nodes;i<o.length;i++){var r=o[i];if(this.callBlazorModel=!1,this.drag(r,t,n),r.parentId){var a=this.nameTable[r.parentId];a.isLane&&Fg(a,this.nameTable[a.parentId],r,this)}}this.callBlazorModel=!0}if(e.connectors&&e.connectors.length){this.callBlazorModel=!1;for(var l=0,s=e.connectors;l<s.length;l++){var d=s[l];this.drag(d,t,n),-1===this.selectionConnectorsList.indexOf(d)&&this.selectionConnectorsList.push(d)}this.callBlazorModel=!0}this.updateSelector(),this.diagramActions&Mc.DragUsingMouse&&this.updatePage()}else e instanceof ry&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(e,this,t,n),this.commandHandler.drag(e,t,n);if(e instanceof uy){this.preventConnectorsUpdate=!1;for(var c=0,u=this.selectionConnectorsList;c<u.length;c++){var h=u[c];this.updateConnectorProperties(this.nameTable[h.id]),"Bpmn"===h.shape.type&&"Default"===h.shape.sequence&&this.commandHandler.updatePathElementOffset(h)}this.selectionConnectorsList=[]}this.diagramActions&Mc.ToolAction||this.diagramActions&Mc.DragUsingMouse||this.updateSelector(),!this.callBlazorModel||this.blazorActions&wc.interaction||this.blazorActions&wc.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues()}},t.prototype.disableStackContainerPadding=function(e,t){if(e instanceof _v&&(e.considerPadding=t),e.children)for(var n=0,i=e.children;n<i.length;n++)this.disableStackContainerPadding(i[n],!1)},t.prototype.scale=function(e,t,n,i){this.disableStackContainerPadding(e.wrapper,!1),this.insertBlazorDiagramObjects(e);var o=!0;if(e.id&&(e=this.nameTable[e.id]||e),e instanceof uy){if(e.nodes&&e.nodes.length){this.callBlazorModel=!1;for(var r=0,a=e.nodes;r<a.length;r++){var l=a[r];o=this.commandHandler.scale(l,t,n,i,e),this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds)||this.commandHandler.scale(l,1/t,1/n,i,e)}this.callBlazorModel=!0}if(e.connectors&&e.connectors.length){this.callBlazorModel=!1;for(var s=0,d=e.connectors;s<d.length;s++){var c=d[s];this.commandHandler.scale(c,t,n,i,e),this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds)||this.commandHandler.scale(c,1/t,1/n,i,e)}this.callBlazorModel=!0}this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(e,t,n,i,e.children?e:void 0);return!this.callBlazorModel||this.blazorActions&wc.interaction||this.blazorActions&wc.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),this.disableStackContainerPadding(e.wrapper,!0),o},t.prototype.rotate=function(e,t,n){var i;if(this.insertBlazorDiagramObjects(e),e.id&&(e=this.nameTable[e.id]||e),e)if(n=n||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof uy){this.callBlazorModel=!1,e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var o=Wy(e.wrapper);if(!(i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,o)))return e.rotateAngle-=t,e.wrapper.rotateAngle-=t,i;var r=[];r=(r=r.concat(e.nodes)).concat(e.connectors),this.commandHandler.rotateObjects(e,r,t,n),this.callBlazorModel=!0}else this.commandHandler.rotateObjects(e,[e],t,n);return!this.callBlazorModel||this.blazorActions&wc.interaction||this.commandHandler.getBlazorOldValues(),i},t.prototype.dragSourceEnd=function(e,t,n){this.insertBlazorDiagramObjects(e),this.commandHandler.dragSourceEnd(e,t,n),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},t.prototype.dragTargetEnd=function(e,t,n){this.insertBlazorDiagramObjects(e),this.commandHandler.dragTargetEnd(e,t,n),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},t.prototype.findObjectsUnderMouse=function(e,t){return this.eventHandler.findObjectsUnderMouse(e,t)},t.prototype.findObjectUnderMouse=function(e,t,n){return this.eventHandler.findObjectUnderMouse(e,t,n)},t.prototype.findTargetObjectUnderMouse=function(e,t,n,i,o){return this.eventHandler.findTargetUnderMouse(e,t,n,i,o)},t.prototype.findElementUnderMouse=function(e,t,n){return this.eventHandler.findElementUnderMouse(e,t,n)},t.prototype.findActionToBeDone=function(e,t,n,i){return this.eventHandler.findActionToBeDone(e,t,n,i)},t.prototype.getTool=function(e){var t,n=rb(this.getCustomTool);return n&&(t=n(e))?t:this.eventHandler.getTool(e)},t.prototype.getCursor=function(e,t){var n,i=rb(this.getCustomCursor);if(i&&(n=i(e,t)))return n;if(this.customCursor.length)for(var o=0;o<this.customCursor.length;o++)if(this.customCursor[o].action===e)return this.customCursor[o].cursor;return this.eventHandler.getCursor(e)},t.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},t.prototype.addHistoryEntry=function(e){if(this.undoRedoModule&&this.constraints&Ac.UndoRedo&&(!this.currentSymbol||this.checkCurrentSymbol(this.currentSymbol,e))){if(e.undoObject&&"helper"===e.undoObject.id)return;this.undoRedoModule.addHistoryEntry(e,this),"StartGroup"!==e.type&&"EndGroup"!==e.type&&this.historyChangeTrigger(e,"CustomAction")}},t.prototype.checkCurrentSymbol=function(e,t){if(t.undoObject&&t.redoObject){var n=t.undoObject,i=t.undoObject;return!(!i.id||!n.id||i.id===e.id||n.id===e.id)||!1}return!1},t.prototype.addCustomHistoryEntry=function(e){Ka()&&this.undoRedoModule&&this.constraints&Ac.UndoRedo&&(e.type=void 0,e.category="External",this.undoRedoModule.addHistoryEntry(e,this))},t.prototype.historyChangeTrigger=function(e,t){var n={},i=[];if("Internal"===e.category){switch(e&&e.redoObject&&e.redoObject.nodes instanceof Array&&e.redoObject.connectors instanceof Array?i=e.redoObject.nodes.concat(e.redoObject.connectors):e.redoObject&&i.push(e.redoObject),n.type=e.type,Ka()&&(n.entryType=e.type),e.type){case"PositionChanged":n.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},n.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY};break;case"RotationChanged":n.oldValue={rotateAngle:e.undoObject.rotateAngle},n.newValue={rotateAngle:e.redoObject.rotateAngle};break;case"SizeChanged":n.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY,width:e.undoObject.width,height:e.undoObject.height},n.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY,width:e.redoObject.width,height:e.redoObject.height};break;case"CollectionChanged":n[e.changeType]=i;break;case"ConnectionChanged":n.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},n.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY}}var o=void 0;if(o={cause:e.category,source:xv(i),change:xv(n),action:t},Ka()){var r=(o={cause:e.category,change:xv(n),source:{connectors:void 0,nodes:void 0},action:t}).source;r.connectors=[],r.nodes=[];for(var a=void 0,l=0;l<i.length;l++)a=xv(i[l]),hv(i[l])===zf?r.connectors.push(a):r.nodes.push(a);o.source=r}i.length&&this.triggerEvent(jc.historyChange,o)}},t.prototype.startGroupAction=function(){this.diagramActions&Mc.UndoRedo||this.addHistoryEntry({type:"StartGroup",category:"Internal"})},t.prototype.endGroupAction=function(){this.diagramActions&Mc.UndoRedo||this.addHistoryEntry({type:"EndGroup",category:"Internal"})},t.prototype.undo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&Ac.UndoRedo&&this.undoRedoModule.undo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.redo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&Ac.UndoRedo&&this.undoRedoModule.redo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.getBlazorDiagramObjects=function(e){if(e)for(var t=0;t<e.length;t++)this.insertBlazorDiagramObjects(e[t]);else this.insertBlazorDiagramObjects(this.selectedItems);this.callBlazorModel=!1,this.canEnableBlazorObject=!0},t.prototype.align=function(e,t,n){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Mc.PublicMethod,this.commandHandler.align(t,e,n||"Object"),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.distribute=function(e,t){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Mc.PublicMethod,this.commandHandler.distribute(t,e),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},t.prototype.sameSize=function(e,t){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Mc.PublicMethod,this.commandHandler.sameSize(t,e),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},t.prototype.updateBlazorDiagramProperties=function(e,t){if(Ka()&&!t){var n=this.allowServerDataBinding;this.enableServerDataBinding(!0);for(var i=0;i<e.length;i++)this.oldDiagramObject[e[i]]=Yy(this[e[i]]);this.enableServerDataBinding(n)}t&&this.commandHandler.getDiagramOldValues(this.oldDiagramObject,e)},t.prototype.getZoomingAttribute=function(){var e=[];return e.push("scrollSettings"),e.push("snapSettings"),e},t.prototype.zoom=function(e,t){var n=this.getZoomingAttribute();this.updateBlazorDiagramProperties(n),this.scroller.zoom(e,0,0,t),this.blazorActions&wc.interaction||this.updateBlazorDiagramProperties(n,!0)},t.prototype.zoomTo=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t);var n=e.zoomFactor?e.zoomFactor:.2;this.scroller.zoom(n="ZoomOut"===e.type?1/(1+n):1+n,0,0,e.focusPoint),this.updateBlazorDiagramProperties(t,!0)},t.prototype.pan=function(e,t,n){var i=this.getZoomingAttribute();this.updateBlazorDiagramProperties(i),this.setCursor("grabbing"),this.scroller.zoom(1,e,t,n),this.updateBlazorDiagramProperties(i,!0)},t.prototype.reset=function(){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0}),this.updateBlazorDiagramProperties(e,!0)},t.prototype.resetSegments=function(){var e=[],t=[],n=[];if(Ka())for(var i=0,o=this.connectors;i<o.length;i++)e.push(Yy(d=o[i],void 0,void 0,!0));if(this.constraints&Ac.LineRouting&&this.lineRoutingModule)this.lineRoutingModule.lineRouting(this);else{this.protectPropertyChange(!0);for(var r=void 0,a=0;a<this.connectors.length;a++)(r=this.connectors[a]).segments=[],this.connectorPropertyChange(r,{},{segments:r.segments});this.protectPropertyChange(!1)}if(Ka()){for(var l=0,s=this.connectors;l<s.length;l++)t.push(Yy(d=s[l],void 0,void 0,!0));if(this.commandHandler.getObjectChanges(e,t,n),window&&window.Blazor){var d={methodName:"UpdateBlazorProperties",diagramobj:{nodes:[],connectors:n}};window.sfBlazor.updateBlazorProperties(d,this)}}},t.prototype.setBlazorDiagramProps=function(e){var t=this.getZoomingAttribute();e?this.updateBlazorDiagramProperties(t):this.updateBlazorDiagramProperties(t,!0)},t.prototype.triggerEvent=function(e,t){return sw(this,void 0,void 0,function(){var n;return dw(this,function(i){switch(i.label){case 0:return t&&this.updateEventValue(t),[4,this.trigger(jc[e],t)];case 1:return n=i.sent(),Ka()&&"string"==typeof n&&(n=JSON.parse(n)),[2,n]}})})},t.prototype.updateEventValue=function(e){var t=e.element;e.element&&t instanceof uy&&t.nodes.length+t.connectors.length===1&&(e.element=1===t.nodes.length?t.nodes[0]:t.connectors[0])},t.prototype.addNodeToLane=function(e,t,n){if(this.nameTable[t]){var i=this.nameTable[t];if(this.protectPropertyChange(!0),this.undoRedoModule&&this.historyManager.startGroupAction(),this.nameTable[e.id]||(e.offsetX=i.wrapper.bounds.width+i.wrapper.bounds.x,e.offsetY=i.wrapper.bounds.height+i.wrapper.bounds.y,e=this.add(e)),e.parentId="",i.shape.phases.length)for(var o=0;o<i.shape.phases.length;o++){var r;if(this.nameTable[r=t+n+o]&&this.nameTable[r].isLane){var a=this.nameTable[r].wrapper.bounds,l={x:a.x+(a.x-i.wrapper.bounds.x+e.margin.left+e.wrapper.bounds.width/2),y:a.y+i.wrapper.bounds.y-e.margin.top};if("Horizontal"===i.shape.orientation?l.y=a.y:(l.x=a.x,l.y=a.y+(i.wrapper.bounds.y-this.nameTable[this.nameTable[r].parentId+i.shape.lanes[0].id+"_0_header"].wrapper.bounds.height+e.margin.top+e.wrapper.bounds.height/2)),a.containsPoint(l)||r===t+n+(i.shape.phases.length-1)){zg(this,this.nameTable[r],e,void 0,!0),Fg(this.nameTable[r],i,e,this);break}}}else this.nameTable[r=t+n+"0"]&&(zg(this,this.nameTable[r],e,void 0,!0),Fg(this.nameTable[r],i,e,this));this.undoRedoModule&&this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}this.updateDiagramElementQuad()},t.prototype.showTooltip=function(e){e&&e.id&&!e.wrapper&&(e=this.nameTable[e.id]);var t=Wy(e.wrapper),n=e.tooltip.content?e.tooltip.content:"X:"+Math.round(t.x)+" Y:"+Math.round(t.y);e&&"Custom"===e.tooltip.openOn&&this.commandHandler.showTooltip(e,e instanceof ry?{x:e.offsetX+e.width/2,y:e.offsetY+e.height/2}:{x:e.targetPoint.x,y:e.targetPoint.x},n,"SelectTool",!0)},t.prototype.hideTooltip=function(e){e&&"Custom"===e.tooltip.openOn&&this.tooltipObject.close()},t.prototype.addNode=function(e,t){return this.add(e,t)},t.prototype.addChildToGroup=function(e,t){var n=this.allowServerDataBinding;this.enableServerDataBinding(!1);var i=this.isProtectedOnChange;this.protectPropertyChange(!0),e=this.getObject(e.id),Ka()&&this.insertValue(e,!0);var o=!(this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.Group||this.diagramActions&Mc.PreventHistory);o&&this.startGroupAction();var r=this.addChild(e,t);if(o){var a={};a[r]=Yy(this.getObject(r));var l={type:"AddChildToGroupNode",changeType:"Insert",undoObject:Yy(e),redoObject:Yy(e),category:"Internal",objectId:r,childTable:a};this.addHistoryEntry(l),this.endGroupAction()}this.protectPropertyChange(i),this.enableServerDataBinding(n),this.updateSelector(),Ka()&&o&&this.commandHandler.getBlazorOldValues()},t.prototype.getHistoryStack=function(e){var t,n=[];if(t=e?this.historyManager.undoStack:this.historyManager.redoStack,void 0!==this.historyManager.stackLimit){for(var i=t.length-1;i>=0;i--)if(n.push(t[i]),n.length>this.historyManager.stackLimit)return n}else n=t;return n},t.prototype.getEdges=function(e){return e.outEdge?this.nameTable[e.id].outEdges:this.nameTable[e.id].inEdges},t.prototype.getParentId=function(e){return this.nameTable[e].parentId},t.prototype.addConnector=function(e){return this.add(e)},t.prototype.UpdateBlazorDiagramModelCollection=function(e,t,n,i){if(!(this.blazorActions&wc.ClearObject)&&window&&window.Blazor){var o=void 0,r=[],a=[],l=[],s=[];if(i&&!t)for(var d=0;d<this.blazorAddorRemoveCollection.length;d++)l.push(hv(this.blazorAddorRemoveCollection[d])===zf?"Connector":"Node"),o=xv(this.blazorAddorRemoveCollection[d]),a.push(o),s=this.blazorRemoveIndexCollection;else if(!this.isServerUpdate||n){this.isServerUpdate=!0;var c=xv(e),u=void 0,h=[];if(!t){for(h=n||this.commandHandler.getChildren(e,[]),d=0;d<h.length;d++)c=xv(h[d]),a.push(c),u=hv(h[d])===zf?this.connectors.indexOf(h[d]):this.nodes.indexOf(h[d]),s.push(u),l.push(hv(h[d])===zf?"Connector":"Node");n||(a.push(xv(e)),s.push(this.nodes.indexOf(e)),l.push(hv(e)===zf?"Connector":"Node"))}if(t&&t.length>0)for(d=0;d<t.length;d++)c=xv(t[d]),t[d]instanceof ry?a.push(c):r.push(c),l.push(hv(t[d])===zf?"Connector":"Node");this.isServerUpdate=!1}var p={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(a),ObjectType:l,removalIndex:t?void 0:s,isMultipleObjects:!0,annotationIndex:void 0,connectorObj:JSON.stringify(r)}};window.sfBlazor.updateBlazorProperties(p,this),i&&!t&&(this.blazorAddorRemoveCollection=[],this.blazorRemoveIndexCollection=[])}},t.prototype.UpdateBlazorDiagramModel=function(e,t,n,i){if(!(this.blazorActions&wc.GroupClipboardInProcess)&&window&&window.Blazor&&!this.isServerUpdate&&!(this.diagramActions&Mc.Clear)){var o=xv(e),r={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(o),ObjectType:t,removalIndex:n,isMultipleObjects:!1,annotationIndex:i,connectorObj:void 0}};window.sfBlazor.updateBlazorProperties(r,this)}},t.prototype.UpdateBlazorLabelOrPortObjects=function(e,t,n,i){if(window&&window.Blazor&&e.length>0&&!this.isServerUpdate&&!(this.diagramActions&Mc.Clear)){for(var o=[],r=[],a=[],l=0;l<e.length;l++)o.push(xv(e[l])),r.push(t),a.push(i);var s={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(o),ObjectType:r,removalIndex:n,isMultipleObjects:!0,annotationIndex:a,connectorObj:null,portIndex:"Port"===t?a:[]}};window.sfBlazor.updateBlazorProperties(s,this)}},t.prototype.addBlazorDiagramObjects=function(){var e=[],t=[];if(this.dataBindingModule&&!(this.realActions&Lc.PreventDataInit)){for(var n=0;n<this.nodes.length;n++)e.push(Yy(this.nodes[n],void 0,void 0,!0));for(n=0;n<this.connectors.length;n++)t.push(Yy(this.connectors[n],void 0,void 0,!0))}if(window&&window.Blazor){var i={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(e),isConnector:!1}};window.sfBlazor.updateBlazorProperties(i,this),i={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(t),isConnector:!0}},window.sfBlazor.updateBlazorProperties(i,this)}},t.prototype.removeNodeEdges=function(e,t,n){var i=this.nameTable[e],o=n?i.outEdges:i.inEdges;if(o.length>0)for(var r=0;r<o.length;r++)o[r]===t&&o.splice(r,1)},t.prototype.insertBlazorConnector=function(e){Ka()&&e instanceof zf&&(e.sourceID&&this.nameTable[e.sourceID]&&this.insertValue(Yy(this.nameTable[e.sourceID]),!0),e.targetID&&this.nameTable[e.targetID]&&this.insertValue(Yy(this.nameTable[e.targetID]),!0))},t.prototype.add=function(e,n){var i,o=this.isProtectedOnChange;if(this.protectPropertyChange(!0),e){var r=void 0;r={element:e=Yy(e),cause:this.diagramActions,state:"Changing",type:"Addition",cancel:!1},this.parentObject&&(r.parentId=this.parentObject.id),Ka()&&(r=uv(r,e,"Changing","Addition")),"helper"===e.id||this.diagramActions&Mc.PreventCollectionChangeOnDragOver||this.triggerEvent(jc.collectionChange,r),r.cancel&&this.drawingObject&&(this.removeElements(r.element),this.tooltipObject.close(),hv(r.element)===zf&&(r.element.sourceID&&this.removeNodeEdges(r.element.sourceID,r.element.id,!0),r.element.targetID&&this.removeNodeEdges(r.element.targetID,r.element.id,!1))),this.diagramActions=this.diagramActions|Mc.PublicMethod,e.id=e.id||Fy();var a=this.activeLayer;if(!r.cancel&&!a.lock){if(a.objects.indexOf(e.id)<0&&!a.lock&&(a.visible||(a.visible=!0,this.dataBind()),a.objects.push(e.id)),hv(e)===zf)(i=new zf(this,"connectors",e,!0)).status="New",Im(i,e,this.connectorDefaults),this.connectors.push(i),this.initObject(i),Ka()&&(this.blazorActions&wc.GroupingInProgress?this.blazorAddorRemoveCollection.push(i):this.blazorAddorRemoveCollection.length>0?(this.isServerUpdate=!1,this.blazorAddorRemoveCollection.push(i),this.UpdateBlazorDiagramModelCollection(void 0,this.blazorAddorRemoveCollection,void 0,!0),this.blazorAddorRemoveCollection=[],this.commandHandler.getBlazorOldValues()):this.isServerUpdate||this.blazorActions&wc.GroupClipboardInProcess||(this.UpdateBlazorDiagramModel(i,"Connector"),this.commandHandler.getBlazorOldValues())),!1===e.visible&&this.updateElementVisibility(i.wrapper,i,e.visible),this.updateEdges(i),this.insertBlazorConnector(i);else{if(Im(i=new ry(this,"nodes",e,!0),e,this.nodeDefaults),i.parentId=e.parentId,i.umlIndex=e.umlIndex,i.status="New",this.nodes.push(i),this.initObject(i,a,void 0,n),Ka()&&(this.blazorActions&wc.GroupingInProgress?this.blazorAddorRemoveCollection.push(i):this.blazorAddorRemoveCollection.length>0?(this.blazorAddorRemoveCollection.push(i),this.isServerUpdate=!1,this.UpdateBlazorDiagramModelCollection(void 0,this.blazorAddorRemoveCollection,void 0,!0),this.commandHandler.getBlazorOldValues(),this.blazorAddorRemoveCollection=[]):this.isServerUpdate||this.blazorActions&wc.GroupClipboardInProcess||(this.UpdateBlazorDiagramModel(i,"Node"),this.commandHandler.getBlazorOldValues())),this.updateTemplate(),this.bpmnModule){if(i.shape.annotations&&0!==i.shape.annotations.length)for(var l=0,s=this.bpmnModule.getTextAnnotationConn(i);l<s.length;l++)this.initConnectors(s[l],a,!1);i.shape.activity&&i.shape.activity.subProcess.processes&&i.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(i,this)}if(this.lineRoutingModule&&this.constraints&Ac.LineRouting)for(var d=this.spatialSearch.findObjects(i.wrapper.outerBounds),c=0;c<d.length;c++){var u=d[c];u instanceof zf&&this.connectorPropertyChange(u,{},{sourceID:u.sourceID,targetID:u.targetID,sourcePortID:u.sourcePortID,targetPortID:u.targetPortID,sourcePoint:u.sourcePoint,targetPoint:u.targetPoint})}if(i.umlIndex>-1&&e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type){var h=this.nameTable[e.parentId];h.children.splice(i.umlIndex,0,i.id),h.wrapper.children.splice(i.umlIndex,0,i.wrapper),h.wrapper.measure(new Bd),h.wrapper.arrange(h.wrapper.desiredSize),this.updateDiagramObject(h)}}if(r={element:i,cause:this.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.parentObject&&(r.parentId=this.parentObject.id),Ka()&&(r=uv(r,e,"Changed","Addition")),"helper"===e.id||this.diagramActions&Mc.PreventCollectionChangeOnDragOver||this.triggerEvent(jc.collectionChange,r),!(this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.Group||this.diagramActions&Mc.PreventHistory)){var p={type:"CollectionChanged",changeType:"Insert",undoObject:Yy(e),redoObject:Yy(e),category:"Internal"};this.addHistoryEntry(p)}this.parentObject=void 0,"SVG"===this.mode&&(this.updateSvgNodes(i),this.updateTextElementValue(i),this.updateDiagramObject(i),i.shape.activity&&i.shape.activity.subProcess.processes&&i.shape.activity.subProcess.processes.length&&this.updateProcesses(i),this.updateBridging())}}this.protectPropertyChange(o),this.resetDiagramActions(Mc.PublicMethod),i&&this.layers.length>1&&this.moveNode(i);for(var f=0,g=this.views;f<g.length;f++){var m=this.views[g[f]];m instanceof t||this.refreshCanvasDiagramLayer(m)}return this.renderReactTemplates(),i},t.prototype.updateSvgNodes=function(e){if(e.children)for(var t=0,n=e.children;t<n.length;t++){var i=n[t];if(this.nameTable[i]&&this.nameTable[i].parentId){var o=vy(i+"_groupElement",this.element.id);o&&o.parentNode.removeChild(o)}}},t.prototype.updateProcesses=function(e){if(this.bpmnModule&&e&&e.shape&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length){var t=e.shape.activity.subProcess.processes;this.moveSvgNode(e.id);for(var n=0,i=t;n<i.length;n++){this.moveSvgNode(s=i[n]);for(var o=[],r=(o=o.concat(this.nameTable[s].outEdges,this.nameTable[s].inEdges)).length-1;r>=0;r--)this.moveSvgNode(o[r])}for(var a=0,l=t;a<l.length;a++){var s;this.nameTable[s=l[a]].shape.activity.subProcess.processes&&this.nameTable[s].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[s])}}else this.moveSvgNode(e.id)},t.prototype.moveSvgNode=function(e){var t=vy(e+"_groupElement",this.element.id),n=t.parentElement;t.parentNode.removeChild(t),n.appendChild(t)},t.prototype.addTextAnnotation=function(e,t){if(this.bpmnModule){var n=this.bpmnModule.addAnnotation(t,e,this);if(this.initConnectors(n,this.commandHandler.getObjectLayer(t.id),!1),this.updateDiagramObject(t),!(this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.Group)){var i={type:"CollectionChanged",changeType:"Insert",undoObject:Yy(e),redoObject:Yy(e),category:"Internal"};this.addHistoryEntry(i)}}},t.prototype.spliceConnectorEdges=function(e,t){var n,i=[];if(n=t?this.nameTable[e.sourceID]:this.nameTable[e.targetID]){for(var o=(i=t?n.outEdges:n.inEdges).length-1;o>=0;o--)i[o]===e.id&&i.splice(o,1);for(var r=0;n.ports&&r<n.ports.length;r++)this.removePortEdges(n,n.ports[r].id,e.id,!t)}},t.prototype.removeDependentConnector=function(e){for(var t,n=[],i=(n=n.concat(e.outEdges,e.inEdges)).length-1;i>=0;i--)(t=this.nameTable[n[i]])&&(this.connectorTable[t.id]=Yy(t),this.remove(t))},t.prototype.removeObjectsFromLayer=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var n=this.nameTable[e.children[t]];n&&this.removeObjectsFromLayer(n)}var i=this.layers.indexOf(this.commandHandler.getObjectLayer(e.id)),o=this.layers[i].objects.indexOf(e.id);o>-1&&(_b(this,e)&&this.unSelect(e),this.layers[i].objects.splice(o,1),delete this.layers[i].zIndexTable[this.nameTable[e.id].zIndex])},t.prototype.removeElements=function(e){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===e.shape.type){var t=vy(e.id+"_groupElement",this.element.id),n=e;if(n.ports&&n.ports.length>0)for(var i=0;i<n.ports.length;i++){var o=vy(n.id+"_"+n.ports[i].id+"_groupElement",this.element.id);o&&o.parentNode.removeChild(o)}t&&t.parentNode.removeChild(t)}if(this.refreshCanvasLayers(),e.wrapper){var r=e.wrapper.children,a=void 0;if(r)for(i=0;i<r.length;i++){if(r[i]instanceof Zc||r[i].id&&r[i].id.indexOf("icon_content")>0){r[i].id.indexOf("icon_content")>0&&"SVG"===this.mode&&((a=vy(r[i].id+"_shape_groupElement",this.element.id))&&a.parentNode.removeChild(a),(a=vy(r[i].id+"_rect_groupElement",this.element.id))&&a.parentNode.removeChild(a));for(var l=0,s=this.views;l<s.length;l++){My(r[i].id+"_groupElement",h=s[l]);var d=this.scroller.removeCollection.indexOf(e.id);this.scroller.removeCollection.splice(d,1)}}else if(r[i]instanceof gf)for(var c=0,u=this.views;c<u.length;c++){var h;My(e.id+"_html_element",h=u[c]),My(r[i].id+"_html_element",h),this.clearTemplate(["nodeTemplate_"+e.id]),r[i].annotationId&&this.clearTemplate(["annotationTemplate_"+e.id+r[i].annotationId])}Jm(r[i].id)}}},t.prototype.removeCommand=function(){this.remove()},t.prototype.remove=function(e){var t,n=[];n=n.concat(this.selectedItems.nodes,this.selectedItems.connectors);var i=!1;if(e){if(this.insertBlazorConnector(e=this.nameTable[e.id]),e&&(Jf(e)||this.diagramActions&Mc.Clear)&&(t={element:e,cause:this.diagramActions,state:"Changing",type:"Removal",cancel:!1},Ka()&&(t=uv(t,e,"Changing","Removal")),this.diagramActions&Mc.Clear||"helper"===e.id||this.triggerEvent(jc.collectionChange,t),!t.cancel)){if(Jf(e)&&e&&e.shape&&"SwimLane"===e.shape.type&&function(e,t){var n,i,o,r,a,l,s=t.wrapper.children[0].rows;for(i=0;i<s.length;i++)for(o=0;o<s[i].cells.length;o++){if((a=mm(s[i].cells[o]))&&a.children)for(r=a.children.length-1;r>=0;r--)a.children[r].children&&(l=e.nameTable[a.children[r].id])&&(l.isLane?vm(e,l):(e.removeDependentConnector(l),e.diagramActions|=Mc.PreventHistory,l.constraints&_c.Delete?e.remove(l):Ng(e,l,{},!1),e.diagramActions&=~Mc.PreventHistory));a&&(n=e.nameTable[a.id])&&vm(e,n)}}(this,e),this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(e,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.PreventHistory)&&(e instanceof ry||e instanceof zf)){var o={type:"CollectionChanged",changeType:"Remove",undoObject:Yy(e),redoObject:Yy(e),category:"Internal"};this.diagramActions&Mc.Clear||e.children&&!e.isLane&&!e.isPhase&&e.children.length>0&&this.undoRedoModule&&"None"===this.layout.type&&(this.historyManager.startGroupAction(),i=!0),e instanceof ry&&this.removeDependentConnector(e),e.isLane||e.isPhase||this.diagramActions&Mc.Clear||this.isStackChild(e)||this.addHistoryEntry(o)}!e.children||e.isLane||e.isPhase||Ka()&&this.diagramActions&Mc.UndoRedo||this.deleteGroup(e),e.parentId&&(this.deleteChild(e),this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[e.parentId]),this.updateConnectorEdges(this.nameTable[e.parentId])));var r=void 0;this.diagramActions=this.diagramActions|Mc.PublicMethod;var a=this.nameTable[e.id];if(a instanceof ry?("Bpmn"===a.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(a,this),(a.isLane||a.isPhase||"SwimLane"===a.shape.type)&&(l=a.isLane||a.isPhase?this.nameTable[a.parentId]:this.nameTable[a.id],a.isLane?ym(this,a,l):a.isPhase&&wm(this,a,l)),r=this.nodes.indexOf(a),Ka()&&"helper"!==e.id&&(this.blazorActions&wc.GroupingInProgress?(this.blazorRemoveIndexCollection.splice(0,0,r),this.blazorAddorRemoveCollection.splice(0,0,e)):this.blazorAddorRemoveCollection.length>0?(this.commandHandler.getBlazorOldValues(),this.blazorRemoveIndexCollection.splice(0,0,r),this.blazorAddorRemoveCollection.splice(0,0,e),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0)):this.isServerUpdate||this.blazorActions&wc.GroupClipboardInProcess||this.UpdateBlazorDiagramModel(e,"Node",r)),-1!==r&&(this.crudDeleteNodes.push(this.nameTable[a.id]),this.nodes.splice(r,1),this.updateNodeEdges(a))):(r=this.connectors.indexOf(a),Ka()&&(this.blazorActions&wc.GroupingInProgress?(this.blazorAddorRemoveCollection.splice(0,0,e),this.blazorRemoveIndexCollection.splice(0,0,r)):this.blazorAddorRemoveCollection.length>0?(this.commandHandler.getBlazorOldValues(),this.blazorAddorRemoveCollection.splice(0,0,e),this.blazorRemoveIndexCollection.splice(0,0,r),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0)):this.isServerUpdate||this.blazorActions&wc.GroupClipboardInProcess||this.UpdateBlazorDiagramModel(e,"Connector",r)),-1!==r&&(this.crudDeleteNodes.push(this.nameTable[a.id]),this.connectors.splice(r,1)),this.updateEdges(a),this.spliceConnectorEdges(e,!0),this.spliceConnectorEdges(e,!1)),this.isServerUpdate||this.blazorActions&wc.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),i&&this.historyManager.endGroupAction(),_b(this,a)&&this.unSelect(a),!a.isPhase){if(this.removeObjectsFromLayer(e),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[e.id],n.length>0&&n[0].id===a.id&&a.parentId){var l,s=this.nameTable[a.parentId];s&&s.isLane&&"SwimLane"===this.nameTable[s.parentId].shape.type&&gm(this,l=this.nameTable[s.parentId],s,a)}this.removeElements(a),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&Mc.Clear||(this.removeFromAQuad(a),t={element:e,cause:this.diagramActions,state:"Changed",type:"Removal",cancel:!1},Ka()&&(t=uv(t,e,"Changed","Removal")),"helper"!==e.id&&this.triggerEvent(jc.collectionChange,t),this.resetTool())}}}else if(n.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),this.blazorActions|=wc.GroupingInProgress,i=!0),Ka()&&n.length>1&&this.clearSelection();for(var d=0;d<n.length;d++)if(this.nameTable[n[d].id]){if(n[d]instanceof zf&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(n[d])>-1)return void this.remove(this.nameTable[n[d].targetID]);Ka()&&(!this.isServerUpdate&&n&&n.length>1&&(this.isServerUpdate=!0),n[d].parentId&&this.insertBlazorDiagramObjects(this.nameTable[n[d].parentId])),this.remove(n[d]),Ka()&&n[d].parentId&&(this.commandHandler.getBlazorOldValues(),this.isServerUpdate=!1)}i&&(this.blazorActions&=~wc.GroupingInProgress,this.isServerUpdate=!0,this.commandHandler.getBlazorOldValues(),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0),this.historyManager.endGroupAction(),this.isServerUpdate=!1),this.clearSelection()}if(this.tooltipObject.close(),Ka()&&n&&n.length>0){for(var c=!0,u=0;u<n.length;u++)this.nameTable[n[u].id]&&(c=!1);c&&(this.isServerUpdate=!1)}},t.prototype.isStackChild=function(e){var t,n=this.nameTable[e.parentId];if(e&&e.parentId&&n.container&&"Stack"===n.container.type&&"UmlClassifier"!==this.nameTable[e.parentId].shape.type){t=!0;var i={sourceIndex:n.wrapper.children.indexOf(e.wrapper),source:e,target:void 0,targetIndex:void 0};this.diagramActions&Mc.UndoRedo||this.addHistoryEntry({type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:e,target:void 0,targetIndex:void 0},undoObject:i,category:"Internal"})}return t},t.prototype.deleteChild=function(e,t){var n;if(t=t?this.nameTable[t.id]:this.nameTable[e.parentId],n="string"==typeof e?e:e.id,t&&t.children){for(var i=0;i<t.children.length;i++)if(t.children[i]===n){t.children.splice(i,1);for(var o=0;o<t.wrapper.children.length;o++)t.wrapper.children[o].id===n&&t.wrapper.children.splice(o,1)}t.wrapper.measure(new Bd),t.wrapper.arrange(t.wrapper.desiredSize)}},t.prototype.addChild=function(e,t,n){var i,o=this.nameTable[e.id];if(o.children||(o.children=[]),o.children&&("string"==typeof t?this.nameTable[t]&&(i=t):(i=t.id=t.id||Fy(),this.add(t)),i&&(!t.umlIndex||-1===t.umlIndex))){var r=this.nameTable[i];r.parentId=o.id,o.container&&"Stack"===o.container.type&&this.updateStackProperty(o,r),n?(o.children.splice(n,0,i),o.wrapper.children.splice(n,0,r.wrapper)):(o.children.push(i),o.wrapper.children.push(r.wrapper)),o.wrapper.measure(new Bd),o.wrapper.arrange(o.wrapper.desiredSize),o.isLane||(this.nameTable[e.id].width=o.wrapper.actualSize.width,this.nameTable[e.id].height=o.wrapper.actualSize.height,this.nameTable[e.id].offsetX=o.wrapper.offsetX,this.nameTable[e.id].offsetY=o.wrapper.offsetY),void 0!==o.container&&(r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY),(!o.parentId||this.nameTable[o.parentId]&&"SwimLane"!==this.nameTable[o.parentId].shape.type)&&this.updateDiagramObject(o)}return i},t.prototype.clear=function(){this.clearObjects()},t.prototype.clearObjects=function(e){var t=[];t=e||(t=t.concat(this.nodes)).concat(this.connectors),this.diagramActions=this.diagramActions|Mc.Clear;for(var n=0,i=t;n<i.length;n++){var o=i[n];this.nameTable[o.id]&&this.remove(o)}this.diagramActions=this.diagramActions&~Mc.Clear,this.spatialSearch=new ow(this.nameTable),this.initHistory()},t.prototype.startEditCommad=function(){var e,t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(t&&t instanceof ry)if(t.isLane&&t.parentId)for(var n=this.nameTable[t.parentId],i=n.shape.lanes,o=t.id.slice(n.id.length),r=o.substring(0,o.length-1),a=0;a<i.length;a++)t.isLane&&r===i[a].id&&(e=this.nameTable[i[a].header.id]);else"SwimLane"===t.shape.type&&t.shape.header&&t.shape.hasHeader&&(e=this.nameTable[t.wrapper.children[0].rows[0].cells[0].children[0].id]);this.startTextEdit(e)},t.prototype.startTextEdit=function(e,t){if(!ug(this)&&!cg(this)||dg(this)){this.textEditing=!0;var n=this.scroller.transform,i=mg(this)?n.scale:1,o=void 0,r=void 0,a=void 0,l=void 0,s=void 0;if(e||(e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),e){if(Ka()){var d=Yy(e);d.annotations.length>0&&this.insertValue(d,e instanceof ry),e=this.nameTable[e.id]||e}e.shape&&"UmlClassifier"===e.shape.type&&(e=this.nameTable[e.children[0]]);var c=!1;if(this.bpmnModule&&(s=this.bpmnModule.getTextAnnotationWrapper(e,t))&&(e=this.nameTable[e.id.split("_textannotation_")[0]]),s?c=!0:("Text"!==e.shape.type&&0===e.annotations.length&&(e.constraints&_c.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(e,[{id:Fy(),content:""}]))),!t&&("Text"!==e.shape.type&&e.annotations.length>0||"Text"===e.shape.type)&&(t="Text"===e.shape.type?e.wrapper.children[0].id.split("_")[1]:e.annotations[0].id),t&&(s=this.getWrapper(e.wrapper,t))),e&&s&&!(s instanceof gf)&&(!function(e,t){return"Text"===t.shape.type?t.constraints&_c.ReadOnly:t.constraints&(t instanceof zf?Tc.ReadOnly:_c.ReadOnly)?s.constraints&Ec.InheritReadOnly?1:0:s.constraints&Ec.ReadOnly?1:0}(0,e)||c)){var u=s.style,h=void 0;h=90>(h=s.bounds.width<e.wrapper.bounds.width?s.bounds.width:e.wrapper.bounds.width)?90:h;var p=document.getElementById(this.element.id+"_editTextBoxDiv"),f=document.getElementById(this.element.id+"_editBox");this.activeLabel.text=o=f?f.value:s.content,p||f||(p=Ay("div",{}),f=Ay("textarea",{}),this.diagramCanvas.appendChild(p),p.appendChild(f),f.appendChild(document.createTextNode(o))),(r=fy(s.style,o,void 0,void 0,h)).isEmpty()&&(r=new Bd("Text"!==e.shape.type?iv(e,s.id.split(e.id+"_")[1]).width||50:e.width>50?50:e.width,s.style.fontSize)),e.parentId&&"UmlClassifier"===this.nameTable[e.parentId].shape.type?(r.width=e.wrapper.bounds.width-20,a=(e.wrapper.bounds.center.x+n.tx)*n.scale-r.width/2*i-2.5,l=(e.wrapper.bounds.center.y+n.ty)*n.scale-r.height/2*i-3,s.style.textAlign="Left"):(r.width=Math.max(r.width,50),a=(s.bounds.center.x+n.tx)*n.scale-r.width/2*i-2.5,l=(s.bounds.center.y+n.ty)*n.scale-r.height/2*i-3),By(p,{id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+a+"px;top:"+l+"px;width:"+(r.width+1)*i+"px;height:"+r.height*i+"px; containerName:"+e.id+";"}),By(f,{id:this.element.id+"_editBox",style:"width:"+(r.width+1)*i+"px;height:"+r.height*i+"px;resize: none;outline: none;overflow: hidden;;font-family:"+u.fontFamily+";font-size:"+u.fontSize*i+"px;text-align:"+s.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),f.style.fontWeight=u.bold?"bold":"",f.style.fontStyle=u.italic?"italic":"",f.style.lineHeight=(1.2*u.fontSize+"px;").toString(),f.style.textDecoration=u.textDecoration?u.textDecoration:"",this.activeLabel.parentId=e.id,this.activeLabel.id=t,s.visible=!1,this.updateDiagramObject(e),this.diagramActions=this.diagramActions|Mc.TextEdit,this.isTriggerEvent||(Pl.add(f,"input",this.eventHandler.inputChange,this.eventHandler),Pl.add(f,"focusout",this.focusOutEdit,this),f.select())}}}},t.prototype.updateConnectorfixedUserHandles=function(e){if(e.fixedUserHandles.length)for(var t=void 0,n=0,i=e.fixedUserHandles;n<i.length;n++){var o=i[n];t=this.getWrapper(e.wrapper,o.id),e.updateAnnotation(o,e.intermediatePoints,e.wrapper.bounds,t)}e.wrapper.measure(new Bd(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.updateNodeExpand=function(e,t){for(var n=0;n<e.outEdges.length;n++){var i=this.nameTable[e.outEdges[n]],o=this.nameTable[i.targetID];i.visible=t,t||(this.updateElementVisibility(i.wrapper,i,!1),o.isExpanded=t),this.updateNodeExpand(o,o.isExpanded),o.visible=t,t||this.updateElementVisibility(o.wrapper,o,!1)}},t.prototype.updateConnectorAnnotation=function(e){if(e.annotations.length)for(var t=void 0,n=0,i=e.annotations;n<i.length;n++){var o=i[n];t=this.getWrapper(e.wrapper,o.id),e.updateAnnotation(o,e.intermediatePoints,e.wrapper.bounds,t,this.diagramActions&Mc.Interactions)}e.wrapper.measure(new Bd(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.removeChildrenFromLayout=function(e){for(var t,n=[],i=0;i<e.length;i++)(t=e[i]).parentId||t.processId||n.push(t);return n},t.prototype.doLayout=function(){var e,t=!1,n="ComplexHierarchicalTree"==this.layout.type||"HierarchicalTree"===this.layout.type,i=this.isProtectedOnChange;this.protectPropertyChange(!0);var o=this.removeChildrenFromLayout(this.nodes),r=this.layout.enableRouting&&"ComplexHierarchicalTree"==this.layout.type,a={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if("None"!==this.layout.type){if((r||"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&n||"Linear"===this.layout.arrangement)&&this.lineDistributionModule.initLineDistribution(this.layout,this),this.organizationalChartModule)e=this.organizationalChartModule.updateLayout(o,this.nameTable,this.layout,a,this.dataSourceSettings.id,this.diagramActions),t=!0,this.layoutAnimateModule&&e.rootNode&&!this.diagramActions&&this.updateNodeExpand(e.rootNode,e.rootNode.isExpanded);else if(this.mindMapChartModule)o&&o.length>0&&this.mindMapChartModule.updateLayout(o,this.nameTable,this.layout,a,this.dataSourceSettings.id,this.dataSourceSettings.root),t=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(o,this.nameTable,this.layout,a),t=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(o,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,a),t=!0;else if(this.complexHierarchicalTreeModule){var l=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);l.length>0&&this.complexHierarchicalTreeModule.doLayout(l,this.nameTable,this.layout,a,this.lineDistributionModule),t=!0}if(t){this.preventDiagramUpdate=!0;var s={},d=o;Ka()&&this.updateTemplate();for(var c=0,u=d;c<u.length;c++){var h=u[c];if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&Mc.PreventIconsUpdate||(this.updateIcon(h),this.updateDefaultLayoutIcons(h)),this.preventNodesUpdate=!0,this.nodePropertyChange(h,{},{offsetX:h.offsetX,offsetY:h.offsetY},!0),this.preventNodesUpdate=!1,h.wrapper.measure(new Bd(h.wrapper.width,h.wrapper.height)),h.wrapper.arrange(h.wrapper.desiredSize),this.updateDiagramObject(h,!0),h.inEdges.length>0)for(var p=0;p<h.inEdges.length;p++)s[(b=this.nameTable[h.inEdges[p]]).id]=b;if(h.outEdges.length>0)for(var f=0;f<h.outEdges.length;f++){var g=this.nameTable[h.outEdges[f]];s[g.id]=g}}for(var m=0,v=Object.keys(s);m<v.length;m++){var y=v[m];r&&this.lineDistributionModule.resetConnectorSegments(this.nameTable[y]);var b,w=this.getPoints(b=s[y]);r&&this.lineDistributionModule.resetRoutingSegments(b,this,w),Qm(b,w),"Bpmn"===b.shape.type&&"Default"===b.shape.sequence&&this.commandHandler.updatePathElementOffset(b),b.wrapper.measure(new Bd(void 0,void 0)),b.wrapper.arrange(b.wrapper.desiredSize),this.updateConnectorAnnotation(b),this.updateConnectorfixedUserHandles(b),this.updateQuad(b),this.updateDiagramObject(b,!0)}(r||"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&n)&&this.lineDistributionModule.distributeLines(this.layout,this),this.preventDiagramUpdate=!1,this.updatePage(),this.diagramActions&Mc.Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}i||this.protectPropertyChange(i)}return t&&this.updateDiagramElementQuad(),this.blazorActions&wc.expandNode?e:!Ka()||null},t.prototype.saveDiagram=function(){return e=function(e){for(var t,n,i=[],o=0;o<e.length;o++)if("SwimLane"===(t=e[o]).shape.type){n=t.wrapper.children[0].childTable;for(var r=0,a=Object.keys(n);r<a.length;r++)i=Gm(n[a[r]],i)}return i}(this.nodes),(t=Yy(this,this.getCustomProperty)).selectedItems.nodes=[],t.selectedItems.connectors=[],t.selectedItems.wrapper=null,this.serializationSettings.preventDefaults&&(t=qm(t,this)),function(e,n){var i=t.nodes;if(i)for(var o=0;o<i.length;o++)-1!==e.indexOf(i[o].id)&&(i.splice(o,1),o--)}(e),JSON.stringify(t);var e,t},t.prototype.loadDiagram=function(e){return function(e,t){t.enableServerDataBinding(!1);var n=t.blazorActions;t.blazorActions=t.addConstraints(n,wc.ClearObject),t.clear(),t.blazorActions=t.removeConstraints(n,wc.ClearObject),t.protectPropertyChange(!0);for(var i=t.dataSourceSettings.doBinding,o=t.setNodeTemplate,r=t.getDescription,a=t.getCustomProperty,l={},s=0,d=t.commandManager.commands;s<d.length;s++){var c=d[s];l[c.name]={execute:c.execute,canExecute:c.canExecute}}var u,h=t.rulerSettings.horizontalRuler.arrangeTick,p=t.rulerSettings.verticalRuler.arrangeTick,f=t.layout.getLayoutInfo,g=t.layout.getBranch,m=t.getNodeDefaults,v=t.getConnectorDefaults,y=JSON.parse(e);y=function(e){if(e&&(void 0===e.version||e.version<17.1)&&e.nodes)for(var t=0,n=e.nodes;t<n.length;t++){var i=n[t];if(i&&i.ports&&i.ports.length>0)for(var o=0,r=i.ports;o<r.length;o++){var a=r[o];a&&a.constraints&&a.constraints===zc.None&&(a.constraints=zc.Default)}}return e}(y),t.contextMenuSettings=y.contextMenuSettings||{},t.constraints=y.constraints||Ac.Default,t.tool=y.tool||Oc.Default,t.bridgeDirection=y.bridgeDirection||"Top",t.pageSettings=y.pageSettings||{},t.drawingObject=y.drawingObject||void 0,t.tooltip=y.tooltip||{},t.addInfo=y.addInfo||void 0,t.getDescription=r,t.scrollSettings=y.scrollSettings||{},t.commandManager=y.commandManager||{},t.layers=y.layers||[],t.rulerSettings.horizontalRuler.arrangeTick=h,t.rulerSettings.verticalRuler.arrangeTick=p;for(var b=0,w=t.commandManager.commands;b<w.length;b++){var C=w[b];l[C.name]&&(C.execute=l[C.name].execute,C.canExecute=l[C.name].canExecute)}if(t.backgroundColor=y.backgroundColor||"transparent",t.basicElements=y.basicElements||[],t.connectors=y.connectors||[],t.dataSourceSettings=y.dataSourceSettings||{},t.dataSourceSettings.doBinding=i,t.height=y.height||"100%",t.setNodeTemplate=o,t.getConnectorDefaults=v,t.getNodeDefaults=m,t.getCustomProperty=a,t.mode=y.mode||"SVG",y.nodes)for(var x=0;x<y.nodes.length;x++)y.nodes[x].shape&&"SwimLane"===y.nodes[x].shape.type&&(null==y.nodes[x].wrapper&&(y.nodes[x].wrapper={actualSize:{width:y.nodes[x].width,height:y.nodes[x].height},offsetX:y.nodes[x].offsetX,offsetY:y.nodes[x].offsetY}),pm(y.nodes[x],void 0,void 0,void 0,void 0,!0));for(t.nodes=y.nodes||[],t.rulerSettings=y.rulerSettings||{},t.snapSettings=y.snapSettings||{},t.width=y.width||"100%",t.layout=y.layout||{},t.layout.getLayoutInfo=rb(f),t.layout.getBranch=rb(g),t.diagramActions=0,t.isLoading=!0,t.protectPropertyChange(!1),x=0;x<t.views.length;x++)u=t.views[t.views[x]],t.blazorActions=t.addConstraints(n,wc.ClearObject),u.refresh(),t.blazorActions=t.removeConstraints(n,wc.ClearObject),u instanceof cw&&t.element.classList.add("e-diagram");return y.selectedItems&&(y.selectedItems.nodes=[],y.selectedItems.connectors=[]),t.selectedItems=y.selectedItems,t.enableServerDataBinding(!0),y}(e,this)},t.prototype.getDiagramContent=function(e){return this.printandExportModule?this.printandExportModule.getDiagramContent(e):""},t.prototype.exportImage=function(e,t){this.printandExportModule&&this.printandExportModule.exportImages(e,t)},t.prototype.printImage=function(e,t){this.printandExportModule&&(t.printOptions=!0,this.printandExportModule.exportImages(e,t))},t.prototype.setStackLimit=function(e){this.undoRedoModule&&e&&(this.historyManager.stackLimit=e,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,e,this,!0))},t.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},t.prototype.getDiagramBounds=function(){if(this.printandExportModule){var e=this.printandExportModule.getDiagramBounds("",{});return e.width=e.width>this.scrollSettings.viewPortWidth?e.width+(e.x>0?e.x:0):this.scrollSettings.viewPortWidth,e.height=e.height>this.scrollSettings.viewPortHeight?e.height+(e.y>0?e.y:0):this.scrollSettings.viewPortHeight,e.x=e.x>0?0:e.x,e.y=e.y>0?0:e.y,e}return new Zd},t.prototype.exportDiagram=function(e){return this.printandExportModule?this.printandExportModule.exportDiagram(e):""},t.prototype.print=function(e){this.printandExportModule&&this.printandExportModule.print(e)},t.prototype.addPorts=function(e,t){this.protectPropertyChange(!0);var n,i=[],o=!0;Ka()&&null!==e&&e.ports.length>0&&!(this.diagramActions&Mc.UndoRedo)&&-1!==Number(av(e,t[0].id,!1))&&(o=!1),e=this.nameTable[e.id]||e,t.length>1&&this.startGroupAction();for(var r=0;r<t.length;r++)if(n=new Kc(e,"ports",t[r],!0),e.ports.push(n),Ka()&&o&&i.push(n),e.children?e.initPort(this.getDescription,e.wrapper.children[e.wrapper.children.length-1],n):e.wrapper.children.push(e.initPortWrapper(e.ports[e.ports.length-1])),!(this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.Group)){var a={type:"PortCollectionChanged",changeType:"Insert",undoObject:Yy(n),redoObject:Yy(e),category:"Internal"};this.addHistoryEntry(a)}t.length>1&&this.endGroupAction(),Ka()&&o&&this.UpdateBlazorLabelOrPortObjects(i,"Port",void 0,this.nodes.indexOf(e)),e.wrapper.measure(new Bd(e.width,e.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addConstraints=function(e,t){return e|t},t.prototype.removeConstraints=function(e,t){return e&~t},t.prototype.addNodeLabels=function(e,t){this.addLabels(e,t)},t.prototype.addConnectorLabels=function(e,t){this.addLabels(e,t)},t.prototype.addLabels=function(e,t){this.protectPropertyChange(!0);var n=!0,i=[];Ka()&&null!=e&&e.annotations.length>0&&!(this.diagramActions&Mc.UndoRedo)&&-1!==Number(av(e,t[0].id,!0))&&(n=!1);var o,r=(e=this.nameTable[e.id]||e).wrapper;t.length>1&&this.startGroupAction();for(var a=0;a<t.length;a++){if(e instanceof ry)if(o=new eu(e,"annotations",t[a],!0),e.annotations.push(o),Ka()&&n&&i.push(o),e.children)for(var l=e,s=0;s<l.wrapper.children.length;s++)l.wrapper.children[s].id===l.id+"group_container"&&l.wrapper.children[s].children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id));else r.children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id));else if(e instanceof zf){o=new tu(e,"annotations",t[a],!0),e.annotations.push(o),Ka()&&n&&i.push(o);var d=r.children[0],c=new Zd(d.offsetX-d.width/2,d.offsetY-d.height/2,d.width,d.height);r.children.push(e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,c,this.getDescription,this.element.id))}if(!(this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.Group)){var u={type:"LabelCollectionChanged",changeType:"Insert",undoObject:Yy(o),redoObject:Yy(e),category:"Internal"};this.addHistoryEntry(u)}}t.length>1&&this.endGroupAction(),Ka()&&n&&this.UpdateBlazorLabelOrPortObjects(i,e instanceof ry?"NodeAnnotation":"ConnectorAnnotation",void 0,e instanceof ry?this.nodes.indexOf(e):this.connectors.indexOf(e)),e.wrapper.measure(new Bd(r.width,r.height)),e.wrapper.arrange(r.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addLanes=function(e,t,n){e=this.nameTable[e.id]||e;for(var i=0;i<t.length;i++)sm(this,e,t[i],n),void 0!==n&&(n+=1);this.updateDiagramElementQuad()},t.prototype.addPhases=function(e,t){e=this.nameTable[e.id]||e;for(var n=0;n<t.length;n++)cm(this,e,t[n]);this.updateDiagramElementQuad()},t.prototype.removeLane=function(e,t){ym(this,void 0,e,t),this.updateDiagramElementQuad()},t.prototype.removePhase=function(e,t){wm(this,void 0,e,t),this.updateDiagramElementQuad()},t.prototype.removelabelExtension=function(e,t,n,i){for(var o=0;o<i.children.length;o++){var r=i.children[o];if((r instanceof Gc||r instanceof gf)&&r.id.match("_"+t[n].id+"$")){for(var a=0;a<e.annotations.length;a++)if(r.id.match("_"+e.annotations[a].id+"$")){if(!(this.diagramActions&Mc.UndoRedo)){var l={type:"LabelCollectionChanged",changeType:"Remove",undoObject:Yy(e.annotations[a]),redoObject:Yy(e),category:"Internal"};this.addHistoryEntry(l)}e.annotations.splice(a,1)}if(i.children.splice(o,1),"SVG"===this.mode){var s=vy(r.id,this.element.id);if(s){var d=vy(r.id,this.element.id);d.parentNode.removeChild(d)}vy(r.id+"_text",this.element.id)&&(s=vy(r.id+"_text",this.element.id)).parentNode.removeChild(s);var c=vy(r.id+"_html_element",this.element.id);c&&c.parentNode.removeChild(c)}else this.refreshCanvasLayers()}}},t.prototype.removeLabels=function(e,t){var n=!0;if(!Ka()||null===e||this.diagramActions&Mc.UndoRedo||-1===(a=e.annotations.length>0?Number(av(e,t[0].id,!0)):-1)&&(n=!1),e=this.nameTable[e.id]||e,Ka()&&n){for(var i=[],o=[],r=0;r<t.length;r++){var a=Number(av(e,t[r].id,!0));o.push(a),i.push(t[r])}this.UpdateBlazorLabelOrPortObjects(i,e instanceof ry?"NodeAnnotation":"ConnectorAnnotation",o,e instanceof ry?this.nodes.indexOf(e):this.connectors.indexOf(e))}for(t.length>1&&this.startGroupAction(),r=t.length-1;r>=0;r--)if(e.children&&e.children.length>0)for(var l=0;l<e.wrapper.children.length;l++)this.removelabelExtension(e,t,r,e.wrapper.children[l]);else this.removelabelExtension(e,t,r,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.removePortsExtenion=function(e,t,n,i){for(var o=0;o<i.children.length;o++){var r=i.children[o];if(r instanceof Yc&&r.id.match("_"+t[n].id+"$")){for(var a=0;a<e.ports.length;a++)if(r.id.match("_"+e.ports[a].id+"$")){if(!(this.diagramActions&Mc.UndoRedo)){var l={type:"PortCollectionChanged",changeType:"Remove",undoObject:Yy(e.ports[a]),redoObject:Yy(e),category:"Internal"};this.addHistoryEntry(l)}e.ports.splice(a,1)}if(i.children.splice(o,1),"SVG"===this.mode){var s=vy(r.id,this.element.id);s.parentNode.removeChild(s)}else this.refreshCanvasLayers()}}},t.prototype.removePorts=function(e,t){var n=!0;if(!Ka()||null===e||this.diagramActions&Mc.UndoRedo||-1===(a=e.ports.length>0?Number(av(e,t[0].id,!1)):-1)&&(n=!1),e=this.nameTable[e.id]||e,Ka()&&n){for(var i=[],o=[],r=t.length-1;r>=0;r--){var a=Number(av(e,t[r].id,!1));i.push(a),o.push(t[r])}this.UpdateBlazorLabelOrPortObjects(o,"Port",i,this.nodes.indexOf(e))}for(t.length>1&&this.startGroupAction(),r=t.length-1;r>=0;r--)if(e.children&&e.children.length>0)for(var l=0;l<e.wrapper.children.length;l++)this.removePortsExtenion(e,t,r,e.wrapper.children[l]);else this.removePortsExtenion(e,t,r,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.getSizeValue=function(e,t){var n;return n=e.toString().indexOf("px")>0?e.toString():e.toString().indexOf("%")>0?void 0!==t?"100%":e.toString():e.toString()+"px",t&&(Vf(this),n="calc("+n+" - "+t+"px)"),n},t.prototype.renderRulers=function(){var e,t,n;this.rulerSettings.showRulers?(t=Vf(e=this),n=Ay("div",{id:e.element.id+"_overlapRuler",style:"height:"+t.height+"px;width:"+t.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"}),e.element.insertBefore(n,e.element.firstChild),Ff(this,!0),Ff(this,!1)):qf(this)},t.prototype.intOffPageBackground=function(){var e=new Bd;e=Vf(this);var t=document.getElementById(this.element.id+"content"),n=this.getSizeValue(this.width,e.width),i=this.getSizeValue(this.height,e.height),o=this.rulerSettings.showRulers?"width:"+n+"; height:"+i+";top:"+e.height+"px;left:"+e.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+n+"; height:"+i+";position:absolute; left:0px;  top:0px;overflow: auto;",r={id:this.element.id+"content",tabindex:"0",style:o};t?(this.diagramCanvas=t,Hy(this.diagramCanvas,o)):(this.diagramCanvas=Ay("div",r),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},t.prototype.initDiagram=function(){this.intOffPageBackground(),By(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},t.prototype.renderHiddenUserHandleTemplateLayer=function(e){var t;t=Ay("div",{class:this.element.id+"_hiddenUserHandleTemplate",style:"width:"+e.width+"px; height:"+e.height+"px;visibility:hidden ;  overflow: hidden;"}),this.element.appendChild(t)},t.prototype.renderBackgroundLayer=function(e,t){var n=this.createSvg(this.element.id+"_backgroundLayer_svg",e.width,e.height);Hy(n,t);var i=Oy("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});n.appendChild(i);var o=Oy("g",{id:this.element.id+"_backgroundLayer",class:"e-background-layer"});n.appendChild(o),this.diagramCanvas.appendChild(n)},t.prototype.renderGridLayer=function(e,t){var n=this.createSvg(this.element.id+"_gridline_svg",e.width,e.height);n.setAttribute("class","e-grid-layer");var i=Oy("g",{id:this.element.id+"_gridline",width:"100%",height:"100%"}),o=Oy("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%"});Sv()?o.setAttribute("fill","url("+location.protocol+"//"+location.host+location.pathname+"#"+this.element.id+"_pattern)"):o.setAttribute("fill","url(#"+this.element.id+"_pattern)"),i.appendChild(o),n.appendChild(i),this.diagramCanvas.appendChild(n),Ly(n,{style:t})},t.prototype.renderDiagramLayer=function(e,t){if(this.diagramLayerDiv=Ay("div",{id:this.element.id+"_diagramLayer_div",style:"width:"+e.width+"px; height:"+e.height+"px;"+t}),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",e.width,e.height);n.style["pointer-events"]="none",n.setAttribute("class","e-diagram-layer");var i=Oy("g",{id:this.element.id+"_diagramLayer"}),o=Oy("g",{});this.diagramLayer=i,n.style["pointer-events"]="all",o.appendChild(i),n.appendChild(o),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=ab.createCanvas(this.element.id+"_diagram",e.width,e.height),Hy(this.diagramLayer,"position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},t.prototype.initLayers=function(){var e="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",t=document.getElementById(this.element.id).getBoundingClientRect(),n=function(){var e=Ay("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var n=Ay("div",{style:"width:100%"});e.appendChild(n);var i=n.getBoundingClientRect().width;return e.parentNode.removeChild(e),t-i}();this.scroller.scrollerWidth=n,this.scroller.setViewPortSize(t.width,t.height),this.renderRulers(),window.measureElement&&(window.measureElement=null,document.getElementById("measureElement").remove()),jy(),this.renderBackgroundLayer(t,e),this.renderGridLayer(t,e),this.renderDiagramLayer(t,e),this.renderHTMLLayer(t,e),this.renderPortsExpandLayer(t,e),this.renderNativeLayer(t,e),this.renderAdornerLayer(t,e),this.renderHiddenUserHandleTemplateLayer(t)},t.prototype.renderAdornerLayer=function(e,t){var n=Ay("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t}),i=Ay("div",{id:this.element.id+"_diagramUserHandleLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t});i.setAttribute("class","e-userHandle-layer"),n.appendChild(i);var o=this.createSvg(this.element.id+"_diagramAdorner_svg",e.width,e.height);o.setAttribute("class","e-adorner-layer"),o.style["pointer-events"]="none",this.adornerLayer=Oy("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.style[" pointer-events"]="all",o.appendChild(this.adornerLayer),n.appendChild(o),this.diagramCanvas.appendChild(n);var r=Oy("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(r),Ly(o,{style:"pointer-events:none;"})},t.prototype.renderPortsExpandLayer=function(e,t){var n=this.createSvg(this.element.id+"_diagramPorts_svg",e.width,e.height);n.setAttribute("class","e-ports-expand-layer");var i=Oy("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});n.appendChild(i);var o=Oy("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});n.appendChild(o),this.diagramCanvas.appendChild(n),Ly(n,{style:t})},t.prototype.renderHTMLLayer=function(e,t){this.htmlLayer=Ay("div",{id:this.element.id+"_htmlLayer",style:"width:"+e.width+"px; height:"+e.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var n=Ay("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(n),this.diagramCanvas.appendChild(this.htmlLayer)},t.prototype.renderNativeLayer=function(e,t){var n=this.createSvg(this.element.id+"_nativeLayer_svg",e.width,e.height),i=Oy("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});n.appendChild(i),this.diagramLayerDiv.appendChild(n),Ly(n,{class:"e-native-layer",style:t})},t.prototype.createSvg=function(e,t,n){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");return Ly(i,{id:e,width:t,height:n}),i},t.prototype.updateBazorShape=function(){for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];switch(t.shape.type){case"Bpmn":t.shape.bpmnShape=t.shape.shape?t.shape.shape:t.shape.bpmnShape;break;case"UmlActivity":t.shape.umlActivityShape=t.shape.shape?t.shape.shape:t.shape.umlActivityShape;break;case"Flow":t.shape.flowShape=t.shape.shape?t.shape.shape:t.shape.flowShape;break;case"Basic":t.shape.basicShape=t.shape.shape?t.shape.shape:t.shape.basicShape;break;case"Text":t.shape.textContent=t.shape.content?t.shape.content:t.shape.textContent}}},t.prototype.initObjects=function(e){this.updateBazorShape(),this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(e)},t.prototype.initLayerObjects=function(){var e=this.layers.length>1,t=[],n=window&&window.Blazor&&!this.dataSourceSettings.dataSource,i={},o={},r=[],a=[],l=[],s=[],d=[],c=[],u=[];Ka()&&n&&(a=this.previousNodeCollection,l=this.previousConnectorCollection);for(var h=0,p=this.nodes;h<p.length;h++)(L=p[h]).id=L.id||Fy(),this.addToLayer(L,e),i[L.id]=L;for(var f=0,g=this.connectors;f<g.length;f++)(L=g[f]).id=L.id||Fy(),this.addToLayer(L,e),i[L.id]=L;for(var m=0,v=this.layers;m<v.length;m++){for(var y=0,b=(D=v[m]).objects;y<b.length;y++)if(i[L=b[y]])if(i[L]instanceof zf)if((I=i[L]).sourceID&&I.targetID){var w=i[I.sourceID],C=i[I.targetID];w&&w.wrapper&&C&&C.wrapper?this.initConnectors(i[L],D):t.push(i[L])}else this.initConnectors(i[L],D);else i[L].children?r.push(L):i[L].shape instanceof Xv&&i[L].shape.activity.subProcess.processes&&i[L].shape.activity.subProcess.processes.length>0?o[i[L].id]=L:this.initNodes(i[L],D);if(this.bpmnModule)for(var x=0,S=this.bpmnModule.textAnnotationConnectors;x<S.length;x++)this.initConnectors(L=S[x],D,!1)}for(var T=0,E=Object.keys(o);T<E.length;T++)this.initObject(i[L=E[T]]),this.bpmnModule.updateDocks(i[L],this);for(var _=0,k=this.alignGroup(r,i);_<k.length;_++){var D=this.commandHandler.getObjectLayer(L=k[_]);this.initNodes(i[L],D)}for(var A=0,O=t;A<O.length;A++){var I;D=this.commandHandler.getObjectLayer((I=O[A]).id),this.initConnectors(I,D)}if(Ka()&&n){for(var P=0,R=this.nodes;P<R.length;P++)s.push(Yy(L=R[P],void 0,void 0,!0));for(var M=0,N=this.connectors;M<N.length;M++)d.push(Yy(L=N[M],void 0,void 0,!0));if(this.commandHandler.getObjectChanges(a,s,c),this.commandHandler.getObjectChanges(l,d,u),!(this.blazorActions&wc.ClearObject)){var L={methodName:"UpdateBlazorProperties",diagramobj:{nodes:c,connectors:u}};window.sfBlazor.updateBlazorProperties(L,this)}}},t.prototype.alignGroup=function(e,t){var n,i,o,r,a=[],l=[];for(o=0;o<e.length;o++){var s=void 0;if((i=t[n=e[o]])&&i.children.length)for(r=0;r<i.children.length;r++)e.indexOf(s=i.children[r])>-1&&-1===a.indexOf(s)&&-1===l.indexOf(s)&&a.splice(0,0,s);-1===a.indexOf(n)&&l.push(n)}return a.concat(l)},t.prototype.addToLayer=function(e,t){var n;t&&(n=this.commandHandler.getObjectLayer(e.id)),t&&n||-1===this.activeLayer.objects.indexOf(e.id)&&this.activeLayer.objects.push(e.id),this.setZIndex(n||this.activeLayer,e)},t.prototype.updateLayer=function(e){for(var t=0,n=Object.keys(e.layers);t<n.length;t++){for(var i=n[t],o=0,r=this.layers[i].objects;o<r.length;o++){var a=this.nameTable[r[o]];void 0!==e.layers[i].visible?this.updateElementVisibility(a.wrapper,a,e.layers[i].visible):!0===e.layers[i].lock&&this.unSelect(a)}void 0!==e.layers[i].lock&&(this.layers[i].lock=e.layers[i].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},t.prototype.updateScrollSettings=function(e){var t=-this.scroller.horizontalOffset+e.scrollSettings.horizontalOffset||0,n=this.scroller.verticalOffset-e.scrollSettings.verticalOffset||0,i={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===t&&0===n||this.pan(t,n);var o={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},r="Start";this.realActions&Lc.PanInProgress&&(r="Progress");var a={oldValue:i,newValue:o,source:this,panState:r};Ka()&&this.scrollChange&&(a={oldValue:i,newValue:o,sourceId:this.element.id,panState:r}),this.triggerEvent(jc.scrollChange,a),this.commandHandler.updatePanState(!0),"Canvas"===this.mode&&this.constraints&Ac.Virtualization&&this.refreshDiagramLayer()},t.prototype.initData=function(){var e=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;!this.dataBindingModule||this.realActions&Lc.PreventDataInit||(e&&this.dataSourceSettings.connectionDataSource.dataManager?(this.nodes=this.generateData(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)):e&&e.dataSource&&(e.dataSource.url||"BlazorAdaptor"===e.adaptorName&&!e.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this))},t.prototype.generateData=function(e,t){var n,i=[];for(n=0;n<e.length;n++){var o=this.makeData(e[n],!!t);!o||!o.id||Sm(i,o.id)&&Sm(i,o.id)||i.push(o)}return i},t.prototype.makeData=function(e,t){var n,i=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,o={};if(o.id=e[i.id]?e[i.id]:Fy(),i.sourceID&&(o.sourceID=e[i.sourceID]),i.targetID&&(o.targetID=e[i.targetID]),e[i.sourcePointX]&&e[i.sourcePointY]&&(o.sourcePoint={x:Number(e[i.sourcePointX]),y:Number(e[i.sourcePointY])}),e[i.targetPointX]&&e[i.targetPointY]&&(o.targetPoint={x:Number(e[i.targetPointX]),y:Number(e[i.targetPointY])}),i.crudAction.customFields&&i.crudAction.customFields.length>0)for(n=0;n<i.crudAction.customFields.length;n++)o[i.crudAction.customFields[n]]=e[i.crudAction.customFields[n]];return o},t.prototype.initNodes=function(e,t){this.preventDiagramUpdate=!0,this.initObject(e,t),this.preventDiagramUpdate=!1},t.prototype.initConnectors=function(e,t,n){this.preventDiagramUpdate=!0,this.initObject(e,t,n),this.updateEdges(e),this.preventDiagramUpdate=!1},t.prototype.setZIndex=function(e,t){var n=e;if(-1===t.zIndex){for(;n.zIndexTable[n.objectZIndex+1];)e.objectZIndex++;t.zIndex=++n.objectZIndex}else{var i=t.zIndex;if(n.zIndexTable[i])for(var o=Object.keys(n.zIndexTable).length,r=0;r<o;r++)if(r===i){for(var a=o;a>i;a--)n.zIndexTable[a]=n.zIndexTable[a-1],this.nameTable[n.zIndexTable[a]]&&(this.nameTable[n.zIndexTable[a]].zIndex=a);n.zIndexTable[r]=t.id}}},t.prototype.initializeDiagramLayers=function(){for(var e=0;e<this.layers.length;e++)if(-1!==this.layers[e].zIndex){var t=this.layers[e];this.layers[e]=this.layers[this.layers[e].zIndex],this.layers[t.zIndex]=t}for(var n=0,i=this.layers;n<i.length;n++){var o=i[n];o.zIndex=-1!==o.zIndex?o.zIndex:this.layers.indexOf(o),this.layerZIndexTable[o.zIndex]=o.id}for(e=0;e<this.layers.length;e++)for(var r=e+1;r<this.layers.length;r++)this.layers[e].zIndex>this.layers[r].zIndex&&(t=this.layers[e],this.layers[e]=this.layers[r],this.layers[r]=t);0===this.layers.length&&this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}},null,!0),this.setActiveLayer(this.layers[this.layers.length-1].id)},t.prototype.resetTool=function(){this.eventHandler.resetTool()},t.prototype.initObjectExtend=function(e,t,n){if(n){for(var i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds),o=0,r=Object.keys(t.zIndexTable);o<r.length;o++)t.zIndexTable[r[o]]&&t.zIndexTable[r[o]]===e.id&&delete t.zIndexTable[r[o]];if(t.zIndexTable[e.zIndex]=e.id,!i){var a=e instanceof ry?this.nodes:this.connectors;for(o=0;o<=a.length;o++)a[o]&&e.id===a[o].id&&a.splice(o,1);delete t.zIndexTable[e.zIndex]}}},t.prototype.initObject=function(e,t,n,i){if(void 0===n&&(n=!0),void 0!==e){if(n&&(t||(this.addToLayer(e,!1),t=this.activeLayer),(e instanceof ry||e instanceof zf)&&this.setZIndex(t,e)),e instanceof ry){if(n){if("helper"!==e.id&&(r=rb(this.getNodeDefaults))){if((a=r(e,this))&&a.ports)for(var o=0;o<a.ports.length;o++)a.ports[o].inEdges=[],a.ports[o].outEdges=[];a&&a!==e&&Zy(a,e)}this.initNode(e,this.element.id)}}else if(e instanceof zf){var r,a;(r=rb(this.getConnectorDefaults))&&((a=r(e,this))&&a!==e&&Zy(a,e),e.segments.length&&e.type!==e.segments[0].type&&(e.segments=[]));var l=this.nameTable[e.sourceID],s=this.nameTable[e.targetID],d=this.getConnectedPort(l,e,!0),c=this.getConnectedPort(s,e),u=this.findInOutConnectPorts(l,!1),h=this.findInOutConnectPorts(s,!0);(void 0!==l&&og(l)||""!==e.sourcePortID&&rg(u))&&(e.sourceWrapper=this.getEndNodeWrapper(l,e,!0),e.sourcePortID&&d&&d.constraints&&!(d.constraints&zc.None)&&d.constraints&zc.OutConnect&&(e.sourcePortWrapper=this.getWrapper(l.wrapper,e.sourcePortID))),(void 0!==s&&ng(s)||""!==e.targetPortID&&ig(h))&&(e.targetWrapper=this.getEndNodeWrapper(s,e,!1),e.targetPortID&&c&&c.constraints&&!(c.constraints&zc.None)&&c.constraints&zc.InConnect&&(e.targetPortWrapper=this.getWrapper(s.wrapper,e.targetPortID))),n||Qm(e,e.getConnectorPoints(e.type)),n&&e.init(this);for(var p=0;p<e.wrapper.children.length;p++)this.pathTable[e.wrapper.children[p].data]&&(e.wrapper.children[p].absoluteBounds=this.pathTable[e.wrapper.children[p].data].absoluteBounds);e.wrapper.measure(new Bd(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize),e instanceof zf&&"Bezier"===e.type&&(this.updateConnectorAnnotation(e),this.updateConnectorfixedUserHandles(e));for(var f=0;f<e.wrapper.children.length;f++)this.pathTable[e.wrapper.children[f].data]={},this.pathTable[e.wrapper.children[f].data].absoluteBounds=e.wrapper.children[f].absoluteBounds}if(e instanceof ry&&e.children&&e.container)for(o=0;o<e.children.length;o++)this.nameTable[e.children[o]].offsetX=this.nameTable[e.children[o]].wrapper.offsetX,this.nameTable[e.children[o]].offsetY=this.nameTable[e.children[o]].wrapper.offsetY;if(this.bpmnModule&&e instanceof ry&&"Bpmn"===e.shape.type&&e.shape.annotations.length>0&&this.bpmnModule.updateQuad(e,this),this.initObjectExtend(e,t,n),this.nameTable[e.id]=e,e instanceof ry&&e.children){for(this.preventNodesUpdate=!0,this.preventConnectorsUpdate=!0,i||e.container||this.updateGroupOffset(e,!0),this.groupTable[e.id]=e.children,o=0;o<e.children.length;o++){var g=this.nameTable[e.children[o]];g&&(g.parentId=e.id)}this.isLoading||!e.rotateAngle||e.container||this.commandHandler.rotateObjects(e,[e],e.rotateAngle,{x:e.offsetX,y:e.offsetY},!1),this.preventNodesUpdate=!1,this.preventConnectorsUpdate=!1}void 0===this.enterObject&&this.updateQuad(e)}!1===e.visible&&this.updateElementVisibility(e.wrapper,e,!1)},t.prototype.getConnectedPort=function(e,t,n){if(e&&e.ports)for(var i=0,o=e.ports;i<o.length;i++){var r=o[i];if(r.id===t.sourcePortID&&n)return r;if(r.id===t.targetPortID&&!n)return r}return null},t.prototype.scaleObject=function(e,t,n){var i=n?e.wrapper.actualSize.width:e.wrapper.actualSize.height,o=n?1+(t-i)/i:1,r=n?1:1+(t-i)/i;this.realActions|=Lc.PreventDrag,this.scale(e,o,r,{x:.5,y:.5}),this.realActions&=~Lc.PreventDrag},t.prototype.updateDefaultLayoutIcons=function(e){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(e,e.expandIcon),this.updateDefaultLayoutIcon(e,e.collapseIcon))},t.prototype.updateDefaultLayoutIcon=function(e,t){if("None"!==t.shape&&"Auto"===t.horizontalAlignment&&"Auto"===t.verticalAlignment&&.5===t.offset.x&&1===t.offset.y){var n=this.getWrapper(e.wrapper,"icon_content"),i=void 0,o=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(i=.5,o="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(i="LeftToRight"===this.layout.orientation?1:0,o=.5),n.setOffsetWithRespectToBounds(i,o,"Fraction"),n.horizontalAlignment="Center",n.verticalAlignment="Center",e.wrapper.measure(new Bd(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)}},t.prototype.updateGroupOffset=function(e,t){var n=!1;if(e.children&&e.children.length>0&&!e.container||e.processId){var i=this.nameTable[e.id];if(!(this.realActions&Lc.PreventScale||this.realActions&Lc.PreventDrag)){if(i.offsetX&&(this.realActions&Lc.EnableGroupAction||!(this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.ToolAction||this.diagramActions&Mc.PublicMethod))){this.realActions|=Lc.PreventScale;var o=i.offsetX-e.wrapper.offsetX;i.offsetX=e.wrapper.offsetX;var r=i.offsetY-e.wrapper.offsetY;i.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(i,o,r),this.realActions&=~Lc.PreventScale}else Ka()&&(this.insertValue(Yy(i),!0),n=!0),i.offsetX=e.wrapper.offsetX;i.offsetY&&(this.realActions&Lc.EnableGroupAction||!(this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.ToolAction||this.diagramActions&Mc.PublicMethod))?(this.realActions|=Lc.PreventScale,r=i.offsetY-e.wrapper.offsetY,i.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(i,0,r),this.realActions&=~Lc.PreventScale):(Ka()&&(this.insertValue(Yy(i),!0),n=!0),i.offsetY=e.wrapper.offsetY),this.diagramActions&&(Ka()&&(this.insertValue(Yy(i),!0),n=!0),i.width=e.wrapper.actualSize.width,i.height=e.wrapper.actualSize.height)}}t&&e.children&&e.children.length>0&&(void 0!==this.nameTable[e.id].width?this.scaleObject(e,this.nameTable[e.id].width,!0):(Ka()&&(this.insertValue(Yy(this.nameTable[e.id]),!0),n=!0),this.nameTable[e.id].width=e.wrapper.actualSize.width),void 0!==this.nameTable[e.id].height?this.scaleObject(e,this.nameTable[e.id].height,!1):(Ka()&&(this.insertValue(Yy(this.nameTable[e.id]),!0),n=!0),this.nameTable[e.id].height=e.wrapper.actualSize.height)),!n||this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.ToolAction||this.diagramActions&Mc.PublicMethod||this.commandHandler.getBlazorOldValues()},t.prototype.initNode=function(e,t,n){var i,o,r=e.initContainer(),a=new qc;if(this.diagramSettings.inversedAlignment||(r.inversedAlignment=!1),r.children||(r.children=[]),e.children){r.measureChildren=!1,a.id=e.id+"group_container",a.style.fill="none",a.style.strokeColor="none",a.horizontalAlignment="Stretch",a.verticalAlignment="Stretch",r.style=e.style,a.children=[],a.preventContainer=!0,e.container&&(a.relativeMode="Object");var l=!!(e.ports&&e.ports.length>0);if(Va(e.container)&&!l&&r.children.push(a),e.container&&"Grid"===e.container.type)for(var s=0;s<e.children.length;s++){var d=new qc,c=this.nameTable[e.children[s]];d.children=[],d.children.push(c.wrapper),c&&r.addObject(c.wrapper,c.rowIndex,c.columnIndex,c.rowSpan,c.columnSpan)}else for(s=0;s<e.children.length;s++)this.nameTable[e.children[s]]&&(this.updateStackProperty(e,c=this.nameTable[e.children[s]],s),r.children.push(c.wrapper),r.elementActions=r.elementActions|kc.ElementIsGroup,c.wrapper.flip="None"===c.wrapper.flip?e.wrapper.flip:c.wrapper.flip);(l||e.container&&"Grid"!==e.container.type)&&r.children.push(a)}else{var u=rb(this.setNodeTemplate);u&&"helper"!==e.id&&(i=u(e,this)),i||(i=e.init(this)),r.children.push(i)}o=rb(this.getDescription),(e.children?r:i).description=o||(e.annotations.length?e.annotations[0].content:e.id);var h=e.children?a:r;for(e.initAnnotations(this.getDescription,h,this.element.id,!!sg(this),this.annotationTemplate),e.initPorts(this.getDescription,h),e.initIcons(this.getDescription,this.layout,h,t),s=0;s<e.fixedUserHandles.length;s++){var p=e.initfixedUserHandles(e.fixedUserHandles[s]);h.children.push(p)}"SwimLane"===e.shape.type&&e.wrapper&&e.wrapper.children.length>0&&e.wrapper.children[0]instanceof Ag?(Jg(e),function(e,t){var n,i,o,r,a,l,s,d,c=t.wrapper.children[0],u=t.shape,h=u.padding,p=u.lanes,f=c.bounds.y,g=u.phaseSize>0?u.phases.length:0,m="Horizontal"===u.orientation,v=m?u.phases.length||1:p.length+1,y=m?(u.header&&u.hasHeader?1:0)+(u.phases.length>0?1:0)+u.lanes.length:(u.header&&u.hasHeader?1:0)+u.phases.length;if(0===g&&!m&&u.lanes.length&&(y+=1),m?(n=(u.header&&u.hasHeader?1:0)+(g>0?1:0),i=0):(n=u.header&&u.hasHeader?1:0,i=g>0?1:0),p.length>0)for(f+=u.header&&u.hasHeader?u.header.height:0,l=0;l<p.length;l++){for(s=0;s<p[l].children.length;s++)if((o=p[l].children[s]).offsetX=p[l].width,o.offsetY=p[l].height,e.initObject(o),e.nodes.push(o),r=o.wrapper,m){for(d=i;d<v;d++)if(r.margin.left<(a=c.rows[n].cells[d]).bounds.right-c.bounds.x){o.parentId=a.children[0].id,d>i?r.margin.left=r.margin.left-(a.bounds.left-c.bounds.left):a.children[0].children[1].actualSize.width+h>=r.margin.left&&(r.margin.left=a.children[0].children[1].actualSize.width+h),r.margin.left<h&&(r.margin.left=h),r.margin.top<h&&(r.margin.top=h),Qg(r,o,e);break}}else for(var b=n;b<y;b++)if(r.margin.top<(a=c.rows[b].cells[i]).bounds.bottom-f){o.parentId=a.children[0].id,b>n?r.margin.top=r.margin.top-(a.bounds.top-f):a.children[0].children[1].actualSize.height+h>=r.margin.top&&(r.margin.top=a.children[0].children[1].actualSize.height+h),r.margin.left<h&&(r.margin.left=h),r.margin.top<h&&(r.margin.top=h),Qg(r,o,e);break}m?n++:i++}c.measure(new Bd(t.width,t.height)),c.arrange(c.desiredSize),function(e,t){var n,i,o,r,a,l,s=e.columnDefinitions(),d=e.rowDefinitions(),c=rm(t);"Vertical"===t.shape.orientation&&0===c&&(c=t.shape.header&&t.shape.hasHeader?1:0);var u=t.shape.padding;for(n=0;n<s.length;n++)e.updateColumnWidth(n,s[n].width,!0,u);for(n=c;n<d.length;n++)e.updateRowHeight(n,d[n].height,!0,u);for(i=0;i<d.length;i++)for(l=e.rows[i],n=0;n<s.length;n++)if((r=l.cells[n]).children&&r.children.length>0)for(o=0;o<r.children.length;o++)(a=r.children[o]).maxWidth&&(a.maxWidth=r.actualSize.width),a.maxHeight&&(a.maxHeight=r.actualSize.height)}(c,t),t.width=t.wrapper.width=c.width,t.height=t.wrapper.height=c.height,lm(e,t),t.wrapper.measure(new Bd(t.width,t.height)),t.wrapper.arrange(c.desiredSize),function(e){if("SwimLane"===t.shape.type)for(var n=t.shape.lanes,i=void 0,o=void 0,r=0;r<n.length;r++){i=n[r];for(var a=0;a<i.children.length;a++)(o=i.children[a]).offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY}}(),em(t,e),$g(t)}(this,e),this.updateDiagramElementQuad()):(r.measure(new Bd(e.width,e.height),e.id,this.onLoadImageSize.bind(this)),r instanceof Ag?r.arrange(r.desiredSize,!0):r.arrange(r.desiredSize)),"None"!==e.wrapper.flip&&e.wrapper.elementActions&kc.ElementIsGroup&&gv(e.wrapper,e.wrapper.offsetX,e.wrapper.offsetY,this,e.wrapper.flip),e instanceof ry&&e.container&&(e.width<r.outerBounds.width||e.height<r.outerBounds.height)&&r.bounds.x<=r.outerBounds.x&&r.bounds.y<=r.outerBounds.y&&(e.width=r.width=r.outerBounds.width,e.height=r.height=r.outerBounds.height,r.measure(new Bd(e.width,e.height)),r.arrange(r.desiredSize)),e.container&&"Grid"===e.container.type&&e.children&&e.children.length>0&&this.updateChildPosition(e)},t.prototype.updateDiagramElementQuad=function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].wrapper&&this.nodes[e].wrapper instanceof Fc&&this.updateQuad(this.nodes[e])},t.prototype.onLoadImageSize=function(e,t){var n=this.getObject(e),i=document.getElementById(e+"sf-imageNode");i&&i.parentNode.removeChild(i),this.nodePropertyChange(n,{},{width:t.width,height:t.height});var o={element:Yy(n),size:t};this.triggerEvent(jc.onImageLoad,o)},t.prototype.updateChildPosition=function(e){for(var t=0;t<e.children.length;t++){var n=this.getObject(e.children[t]);n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY,n.children&&n.children.length>0&&this.updateChildPosition(n)}},t.prototype.canExecute=function(){return!0},t.prototype.updateStackProperty=function(e,t,n){e.container&&"Stack"===e.container.type&&(t.width||(t.wrapper.horizontalAlignment="Stretch",t.horizontalAlignment="Stretch"),t.height||(t.verticalAlignment="Stretch",t.wrapper.verticalAlignment="Stretch"),n&&"UmlClassifier"===e.shape.type&&(t.umlIndex=n))},t.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},t.prototype.initCommands=function(){var e=this.commandManager.commands,t={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.C,keyModifiers:Pc.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.V,keyModifiers:Pc.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.X,keyModifiers:Pc.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.A,keyModifiers:Pc.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Z,keyModifiers:Pc.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Y,keyModifiers:Pc.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:Rc.Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:Rc.Tab,keyModifiers:Pc.Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rc.Enter}}};this.initCommandManager(e,t)},t.prototype.overrideCommands=function(e,t){for(var n,i=0,o=Object.keys(t);i<o.length;i++){var r=o[i];if(e.gesture.key===(n=t[r]).gesture.key&&e.gesture.keyModifiers===n.gesture.keyModifiers){delete t[r];break}}},t.prototype.initCommandManager=function(e,t){var n=0;if(e)for(n=0;n<e.length;n++)t[e[n].name]&&e[n]?(e[n].canExecute&&(t[e[n].name].canExecute=e[n].canExecute),e[n].execute&&(t[e[n].name].execute=e[n].execute),(e[n].gesture.key||e[n].gesture.keyModifiers)&&(t[e[n].name].gesture=e[n].gesture),""!==e[n].parameter&&(t[e[n].name].parameter=e[n].parameter)):(this.overrideCommands(e[n],t),t[e[n].name]={execute:e[n].execute,canExecute:e[n].canExecute,gesture:e[n].gesture,parameter:e[n].parameter});this.commands=t},t.prototype.updateNodeEdges=function(e){for(var t=0,n=e.inEdges;t<n.length;t++)this.nameTable[r=n[t]]&&(this.nameTable[r].targetID="");for(var i=0,o=e.outEdges;i<o.length;i++){var r;this.nameTable[r=o[i]]&&(this.nameTable[r].sourceID="")}e.inEdges=[],e.outEdges=[]},t.prototype.updateIconVisibility=function(e,t){for(var n=0;n<e.wrapper.children.length;n++){var i=e.wrapper.children[n];if(i.id){var o=i.id.split(e.id)[1];o&&o.match("^_icon")&&(i.visible=t,this.updateDiagramContainerVisibility(i,t))}}},t.prototype.updateEdges=function(e){var t;void 0!==e.sourceID&&""!==e.sourceID&&((t=this.nameTable[e.sourceID])&&t.outEdges&&0===t.outEdges.length&&(t.outEdges=[]),t&&t.outEdges&&-1===t.outEdges.indexOf(e.id)&&t.outEdges.push(e.id),this.updatePortEdges(t,e,!1)),void 0!==e.targetID&&""!==e.targetID&&((t=this.nameTable[e.targetID])&&t.inEdges&&0===t.inEdges.length&&(t.inEdges=[]),t&&t.inEdges&&-1===t.inEdges.indexOf(e.id)&&t.inEdges.push(e.id),this.updatePortEdges(t,e,!0),t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length))},t.prototype.updatePortEdges=function(e,t,n){if(e)for(var i=0;i<e.ports.length;i++){var o=e.ports[i];if(o.id===(n?t.targetPortID:t.sourcePortID)){var r=n?o.inEdges:o.outEdges;-1===r.indexOf(t.id)&&r.push(t.id)}}},t.prototype.refreshDiagram=function(){if(this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize(),this.addBlazorDiagramObjects(),Ka()&&this.layout&&this.layout.layoutInfo&&this.layout.layoutInfo.isRootInverse&&this.nodes.length>2){var e=this.nodes[0];if(e.outEdges.length>1)for(var t=this.isProtectedOnChange,n=1;n<e.outEdges.length;n++){var i=this.nameTable[e.outEdges[n]],o=this.allowServerDataBinding;this.protectPropertyChange(!1),this.enableServerDataBinding(!1),this.preventDiagramUpdate=!0,"Left"===this.getObject(i.targetID).data.Branch&&(i.sourcePortID=e.ports[1].id),this.dataBind(),this.preventDiagramUpdate=!1,this.enableServerDataBinding(o),this.protectPropertyChange(t)}}if(Ka())for(var r=void 0,a=0,l=this.views;a<l.length;a++)(r=this.views[l[a]]).renderDocument&&(r.renderDocument(r),r.diagramRenderer.setLayers(),r.updateView(r),this.renderNodes(r));this.updateFitToPage()},t.prototype.updateCanupdateStyle=function(e,t){for(var n=0;n<e.length;n++)e[n].children&&this.updateCanupdateStyle(e[n].children,t),e[n].canApplyStyle=t},t.prototype.getZindexPosition=function(e,t){var n,i=[],o=void 0;if(i=(i=i.concat(this.nodes)).concat(this.connectors),-1!==e.zIndex)for(var r=0;r<i.length;r++)if(i[r].zIndex>e.zIndex){"HTML"!==e.shape.type&&"Native"!==e.shape.type||(n="HTML"===e.shape.type?"html":"native"),o=yy(t,i[r].id,n);break}return o},t.prototype.updateDiagramObject=function(e,t,n){for(var i,o=0,r=this.views;o<r.length;o++)if(i=this.views[r[o]],this.diagramActions&&"SVG"===i.mode){var a=void 0;if(this.layers.length>1&&(a=this.commandHandler.getObjectLayer(e.id)),void 0===a||a&&a.visible||n){var l=Dy(this.element.id);window.domTable[i.element.id+"_diagramLayer"]||(window.domTable[i.element.id+"_diagramLayer"]=document.getElementById(i.element.id+"_diagramLayer"));var s=window.domTable[i.element.id+"_diagramLayer"];this.diagramActions&Mc.Interactions&&this.updateCanupdateStyle(e.wrapper.children,!0),this.diagramRenderer.updateNode(e.wrapper,s,l,void 0,t?void 0:this.getZindexPosition(e,i.element.id)),this.updateCanupdateStyle(e.wrapper.children,!0)}}},t.prototype.updateGridContainer=function(e){for(var t,n=Dy(this.element.id),i=0,o=this.views;i<o.length;i++)if("SVG"===(t=this.views[o[i]]).mode&&this.diagramActions){var r=document.getElementById(t.element.id+"_diagramLayer");this.diagramRenderer.updateNode(e,r,n,void 0)}else this.refreshCanvasDiagramLayer(t)},t.prototype.getObjectsOfLayer=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n];this.nameTable[o]&&t.push(this.nameTable[o])}return t},t.prototype.refreshDiagramLayer=function(){for(var e,t=0,n=this.views;t<n.length;t++)switch((e=this.views[n[t]]).mode){case"SVG":this.refreshSvgDiagramLayer(e);break;case"Canvas":this.refreshCanvasLayers(e)}},t.prototype.refreshCanvasLayers=function(e){if(e)this.refreshCanvasDiagramLayer(e);else for(var t=0,n=this.views;t<n.length;t++)this.refreshCanvasDiagramLayer(this.views[n[t]])},t.prototype.renderBasicElement=function(e){for(var t=Dy(e.element.id),n=0;n<this.basicElements.length;n++){var i=this.basicElements[n];i instanceof Fc&&(i.prevRotateAngle=0),i.measure(new Bd(i.width,i.height)),i.arrange(i.desiredSize),e.diagramRenderer.renderElement(i,e.diagramLayer,t)}},t.prototype.refreshElements=function(e){if(!this.isDestroyed){this.clearCanvas(e),e instanceof t&&(e.diagramLayer.getContext("2d").setTransform(e.scroller.currentZoom,0,0,e.scroller.currentZoom,0,0),e.diagramLayer.getContext("2d").scale(1.5,1.5));var n=Dy(e.element.id);this.spatialSearch.getPageBounds(),this.renderDiagramElements(e.diagramLayer,e.diagramRenderer,n);for(var i=0;i<this.basicElements.length;i++){var o=this.basicElements[i];o.measure(new Bd(o.width,o.height)),o.arrange(o.desiredSize),e.diagramRenderer.renderElement(o,e.diagramLayer,n)}e instanceof t&&(e.diagramLayer.style.transform="scale("+2/3+")",e.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},t.prototype.refreshCanvasDiagramLayer=function(e){var t=this;"SVG"===e.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(e),!this.diagramActions||0==(this.diagramActions&Mc.Render)||Mc.ToolAction&this.diagramActions||sg(this)||1!==this.scroller.currentZoom?this.refreshElements(e):this.renderTimer||(this.renderTimer=setTimeout(function(){t.refreshElements(e)},40)))},t.prototype.updatePortVisibility=function(e,t,n){var i;if(e instanceof ry&&(!this.drawingObject||!this.drawingObject.shape)&&Zf(e)){for(var o=e.ports,r=!1,a=0;a<o.length;a++)i=this.getWrapper(e.wrapper,o[a].id),(t&Cc.Hover||t&Cc.Connect)&&nv(o[a],t)&&(i.visible=!n,r=!0);r&&this.updateDiagramObject(e)}},t.prototype.refreshSvgDiagramLayer=function(e){var t,n=document.getElementById(e.element.id+"_diagramLayer"),i=Dy(e.element.id);if(sg(this))this.scroller.virtualizeElements();else{for(var o=0;o<this.basicElements.length;o++)(t=this.basicElements[o]).measure(new Bd(t.width,t.height)),t.arrange(t.desiredSize,!(this.diagramActions&Mc.Render)),this.diagramRenderer.renderElement(t,n,i);this.renderDiagramElements(n,this.diagramRenderer,i)}},t.prototype.removeVirtualObjects=function(e){if(this.deleteVirtualObject){for(var t=0;t<this.scroller.removeCollection.length;t++)this.removeElements(this.nameTable[this.scroller.removeCollection[t]]);this.deleteVirtualObject=!1}clearInterval(e)},t.prototype.updateTextElementValue=function(e){for(var t=0;t<e.wrapper.children.length;t++){var n=e.wrapper.children[t];n instanceof Gc&&(n.canMeasure=!0,n.measure(new Bd(e.width,e.height)),n.arrange(n.desiredSize))}},t.prototype.updateVirtualObjects=function(e,t,n){var i=document.getElementById(this.element.id+"_diagramLayer"),o=Dy(this.element.id);if("SVG"===this.mode){for(var r=0;r<e.length;r++){var a=this.scroller.removeCollection.indexOf(e[r]);a>=0&&this.scroller.removeCollection.splice(a,1);var l=this.nameTable[e[r]];this.updateTextElementValue(l),this.diagramRenderer.renderElement(l.wrapper,i,o,void 0,void 0,void 0,void 0,l.zIndex)}for(var s=0;s<n.length;s++)this.scroller.removeCollection.push(n[s]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},t.prototype.renderDiagramElements=function(e,t,n,i,o,r){void 0===i&&(i=!0);var a=this.scroller.getPageBounds();a.x*=this.scroller.currentZoom,a.y*=this.scroller.currentZoom,a.width*=this.scroller.currentZoom,a.height*=this.scroller.currentZoom;for(var l=-this.scroller.horizontalOffset-a.x,s=-this.scroller.verticalOffset-a.y,d=0,c=Object.keys(this.layerZIndexTable);d<c.length;d++){var u=this.commandHandler.getLayer(this.layerZIndexTable[c[d]]),h=void 0,p=void 0;"Canvas"===this.mode&&sg(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var f="Canvas"===this.mode&&sg(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,g=0,m=Object.keys(f||u.zIndexTable);g<m.length;g++){var v=m[g],y=f?this.nameTable[f[v]]:this.nameTable[u.zIndexTable[v]];if(y&&!y.parentId&&u.visible&&(!y.processId||this.refreshing)){var b={tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale};sg(this)&&(this.scroller.currentZoom<1?(a.x<0||this.scroller.horizontalOffset<0?(h=(l>0?l:0)+"px",p=(this.realActions&Lc.vScrollbarMoved?0:-(this.scroller.verticalOffset<0?this.scroller.verticalOffset:0))+"px"):(h="0px",p="0px"),this.realActions&Lc.hScrollbarMoved&&(this.realActions=this.realActions&~Lc.hScrollbarMoved),this.realActions&Lc.vScrollbarMoved&&(this.realActions=this.realActions&~Lc.vScrollbarMoved)):(h=(a.x<0?l:-this.scroller.horizontalOffset)+"px",p=(a.y<0?s:-this.scroller.verticalOffset)+"px"),this.diagramLayer.style.left=h,this.diagramLayer.style.top=p,b.tx=this.scroller.horizontalOffset/b.scale,b.ty=this.scroller.verticalOffset/b.scale);var w=!0;if(o&&(w=!1),this.updateTextElementValue(y),this.refreshing&&y.shape.activity&&y.shape.activity.subProcess&&y.shape.activity.subProcess.processes){for(var C=0;C<y.shape.activity.subProcess.processes.length;C++)y.wrapper.children.push(this.nameTable[y.shape.activity.subProcess.processes[C]].wrapper);y.wrapper.measure(new Bd(y.wrapper.bounds.width,y.wrapper.bounds.height)),y.wrapper.arrange(y.wrapper.desiredSize)}t.renderElement(y.wrapper,e,n,!t.isSvgMode&&i?b:void 0,void 0,void 0,w&&(!this.diagramActions||r))}}}},t.prototype.updateBridging=function(e){if(this.bridgingModule)for(var t=0;t<this.connectors.length;t++){var n=this.connectors[t];this.bridgingModule.updateBridging(n,this);var i=this.connectors[t].wrapper;if(i){var o=i.children[0],r=o.data;n.getSegmentElement(n,o,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0),o.data!==r&&(i.measure(new Bd),i.arrange(i.desiredSize),"SVG"!==this.mode||e||this.updateDiagramObject(n))}}},t.prototype.setCursor=function(e){this.diagramRenderer.setCursor(this.diagramCanvas,e)},t.prototype.clearCanvas=function(e){var t,n;t=e.contentWidth||e.diagramLayer.width/this.scroller.currentZoom,n=e.contentHeight||e.diagramLayer.height/this.scroller.currentZoom,"SVG"!==e.mode&&ab.getContext(e.diagramLayer).clearRect(0,0,t,n)},t.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),Gf(this),sg(this)&&this.scroller.virtualizeElements()},t.prototype.setOffset=function(e,t){window.domTable[this.element.id+"content"]||(window.domTable[this.element.id+"content"]=document.getElementById(this.element.id+"content"));var n=window.domTable[this.element.id+"content"];n&&(n.scrollLeft=e,n.scrollTop=t)},t.prototype.setSize=function(e,t){if(this.diagramLayer&&!this.preventDiagramUpdate){var n=Vf(this);e-=n.width,t-=n.height;var i=this.spatialSearch.getPageBounds();i.x*=this.scroller.currentZoom,i.y*=this.scroller.currentZoom,i.width*=this.scroller.currentZoom,i.height*=this.scroller.currentZoom;var o="SVG"===this.mode?1:1.5,r="SVG"===this.mode?my(this.element.id):this.diagramLayer,a="Canvas"===this.mode&&this.constraints&Ac.Virtualization?this.scroller.viewPortHeight:t;r.setAttribute("width",(o*("Canvas"===this.mode&&this.constraints&Ac.Virtualization?this.scroller.viewPortWidth:e)).toString()),r.setAttribute("height",(o*a).toString());var l=document.getElementById(this.element.id+"_diagramUserHandleLayer");l&&(l.style.width=e+"px",l.style.height=t+"px");var s={width:e.toString(),height:t.toString()};this.diagramLayerDiv.style.width=e+"px",this.diagramLayerDiv.style.height=t+"px",Ly(Sy(this.element.id),s),Ly(vy(this.element.id).getElementsByClassName("e-ports-expand-layer")[0],s);var d=by(this.element.id);Ly(d,s),d.parentNode.style.width=e+"px",d.parentNode.style.height=t+"px";var c=Ty(this.element.id);Ly(c,s),this.diagramRenderer.updateGrid(this.snapSettings,c,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),Ly(Ey(this.element.id),s),this.htmlLayer.style.width=e+"px",this.htmlLayer.style.height=t+"px","SVG"===this.mode||sg(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&sg(this)&&this.scroller.virtualizeElements()}},t.prototype.transformLayers=function(){var e=this.spatialSearch.getPageBounds();e.x*=this.scroller.currentZoom,e.y*=this.scroller.currentZoom,e.width*=this.scroller.currentZoom,e.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,Ty(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.diagramActions&Mc.DragUsingMouse||this.updateSelector(),this.renderPageBreaks(e)},t.prototype.removePageBreaks=function(){if(this.diagramLayer){var e=_y(this.element.id);if(e&&e.childNodes)for(var t=e.childNodes.length,n=0;n<t;n++)e.removeChild(e.childNodes[0])}},t.prototype.renderPageBreaks=function(e){this.removePageBreaks();var t=_y(this.element.id);if(t){var n=0;e=this.scroller.getPageBounds(!0);var i=(this.scroller.transform.tx+e.x)*this.scroller.currentZoom,o=(this.scroller.transform.ty+e.y)*this.scroller.currentZoom,r=e.height*this.scroller.currentZoom,a=e.width*this.scroller.currentZoom;if(sb.renderSvgBackGroundImage(this.pageSettings.background,this.element,i,o,a,r),this.diagramRenderer.drawRect(t,{id:t.id+"rect",x:i,y:o,height:r,width:a,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"}),this.pageSettings.showPageBreaks){var l=this.scroller.getPageBreak(e);for(n=0;n<l.length;n++)this.diagramRenderer.drawLine(t,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(l[n].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[n].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(l[n].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[n].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:l[n].y1===l[n].y2?"HorizontalLines":"VerticalLines"})}}},t.prototype.validatePageSize=function(){var e=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(e=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=e):this.pageSettings.height>this.pageSettings.width&&(e=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=e)},t.prototype.setOverview=function(e,t){if(e)e&&(this.views.push(e.id),this.views[e.id]=e,e.renderDocument(e),e.diagramRenderer.setLayers(),e.updateView(e),this.renderNodes(e));else{for(var n=0;n<this.views.length;n++)this.views[n]===t&&(e=this.views[t]);this.views[t]=void 0;var i=this.views.indexOf(t);this.views.splice(i,1)}},t.prototype.renderNodes=function(e){if(e){var t=new sb(e.id,new lb,!1),n=document.getElementById(e.element.id+"_diagramLayer"),i=Dy(e.element.id);this.renderDiagramElements(n,e.diagramRenderer||t,i,void 0,void 0,!0)}},t.prototype.updateThumbConstraints=function(e,t,n){for(var i=e.length,o=0;o<i;o++){var r=e[o],a=!1,l=!1,s=t.thumbsConstraints;r instanceof ry?(a="Bpmn"===r.shape.type&&"Activity"===r.shape.shape&&!1===r.shape.activity.subProcess.collapsed||"TextAnnotation"===r.shape.shape,l="Bpmn"===r.shape.type&&"TextAnnotation"===r.shape.shape,eg(r)&&s&Dc.Rotate&&!a||(s&=~Dc.Rotate),ag(r,"SouthEast")&&s&Dc.ResizeSouthEast&&!l||(s&=~Dc.ResizeSouthEast),ag(r,"NorthWest")&&s&Dc.ResizeNorthWest&&!l||(s&=~Dc.ResizeNorthWest),ag(r,"East")&&s&Dc.ResizeEast&&!l||(s&=~Dc.ResizeEast),ag(r,"West")&&s&Dc.ResizeWest&&!l||(s&=~Dc.ResizeWest),ag(r,"North")&&s&Dc.ResizeNorth&&!l||(s&=~Dc.ResizeNorth),ag(r,"South")&&s&Dc.ResizeSouth&&!l||(s&=~Dc.ResizeSouth),ag(r,"NorthEast")&&s&Dc.ResizeNorthEast&&!l||(s&=~Dc.ResizeNorthEast),ag(r,"SouthWest")&&s&Dc.ResizeSouthWest&&!l||(s&=~Dc.ResizeSouthWest)):r instanceof zf?(n||(s|=Dc.Default),Kf(r)?s|=Dc.ConnectorSource:s&=~Dc.ConnectorSource,Qf(r)?s|=Dc.ConnectorTarget:s&=~Dc.ConnectorTarget):(n||(s|=Dc.Default),ag(r)||(s&=~(Dc.ResizeSouthEast|Dc.ResizeSouthWest|Dc.ResizeSouth|Dc.ResizeEast|Dc.ResizeWest|Dc.ResizeNorth|Dc.ResizeNorthEast|Dc.ResizeNorthWest)),eg(r)||(s&=~Dc.Rotate)),t.thumbsConstraints=s}},t.prototype.renderSelector=function(e,t){var n=this.isProtectedOnChange;Ka()&&(this.isProtectedOnChange=!0);var i,o=new Bd,r=this.selectedItems,a=this.diagramRenderer.rendererActions,l=document.getElementsByClassName("blazor-inner-template");if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(a,Nc.DrawSelectorBorder):this.removeConstraints(a,Nc.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===r.nodes.length&&0===r.connectors.length&&(r.rotateAngle=r.nodes[0].rotateAngle,r.pivot=r.nodes[0].pivot),r.wrapper.measure(o),r.wrapper.arrange(r.wrapper.desiredSize),r.width=r.wrapper.actualSize.width,r.height=r.wrapper.actualSize.height,r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,0!==r.rotateAngle){for(var s=0,d=r.nodes;s<d.length;s++){var c=d[s];c.offsetX=c.wrapper.offsetX,c.offsetY=c.wrapper.offsetY}for(var u=0,h=r.connectors;u<h.length;u++);}var p,f;if(this.spatialSearch.getPageBounds(),p=wy(this.element.id),f=xy(this.element.id),r.thumbsConstraints=Dc.Default,r.annotation?this.updateThumbConstraints([r.annotation],r):(this.updateThumbConstraints(r.nodes,r),this.updateThumbConstraints(r.connectors,r,!0)),r.annotation)this.renderSelectorForAnnotation(r,p);else if(r.nodes.length+r.connectors.length===1||this.nameTable.helper){if(r.nodes[0]instanceof ry){var g=r.nodes[0];Hg(this,g)&&(t||"UmlClassifier"===g.shape.type||g.parentId&&this.nameTable[g.parentId]&&"UmlClassifier"===this.nameTable[g.parentId].shape.type||((!g.container||"Canvas"!==g.container.type&&"Grid"!==g.container.type)&&(r.nodes[0].constraints&=~(_c.Rotate|_c.HideThumbs)),r.thumbsConstraints&=~Dc.Rotate));var m=!!t||!!(g.constraints&_c.HideThumbs),v=!!("SwimLane"===g.shape.type||g.isLane||g.isPhase||t);this.diagramRenderer.renderResizeHandle(r.wrapper.children[0],p,r.thumbsConstraints,this.scroller.currentZoom,r.constraints,this.scroller.transform,void 0,Zf(g),m,v)}else if(r.connectors[0]instanceof zf&&wg(this.diagramRenderer.rendererActions)){var y=r.connectors[0];this.diagramRenderer.renderEndPointHandle(y,p,r.thumbsConstraints,r.constraints,this.scroller.transform,void 0!==y.sourceWrapper,void 0!==y.targetWrapper,!(!this.connectorEditingToolModule||!$f(y)))}}else this.diagramRenderer.renderResizeHandle(r.wrapper,p,r.thumbsConstraints,this.scroller.currentZoom,r.constraints,this.scroller.transform,void 0,Zf(r));if(!r.annotation&&!this.currentSymbol&&(this.diagramRenderer.renderUserHandler(r,p,this.scroller.transform,f),Ka()&&l.length>0))for(i=0;i<this.selectedItems.userHandles.length;i++)document.getElementById(this.selectedItems.userHandles[i].name+"_html_element").style.display="block"}this.isProtectedOnChange=n},t.prototype.updateSelector=function(){var e=this.allowServerDataBinding;this.enableServerDataBinding(!1);var t,n=new Bd,i=this.selectedItems,o=i.constraints,r=document.getElementsByClassName("blazor-inner-template");if(this.diagramActions&Mc.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==i.wrapper&&i.wrapper.children&&i.wrapper.children.length)){if(i.wrapper.measure(n),i.wrapper.arrange(i.wrapper.desiredSize),0!==i.rotateAngle||i.rotateAngle!==i.wrapper.prevRotateAngle)for(var a=0,l=i.nodes;a<l.length;a++){var s=l[a];s.offsetX=s.wrapper.offsetX,s.offsetY=s.wrapper.offsetY}var d,c;i.width=i.wrapper.actualSize.width,i.height=i.wrapper.actualSize.height,i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,d=wy(this.element.id),c=xy(this.element.id);var u=this.eventHandler.canHideResizers();if(i.thumbsConstraints=Dc.Default,i.annotation?this.updateThumbConstraints([i.annotation],i):(this.updateThumbConstraints(i.nodes,i),this.updateThumbConstraints(i.connectors,i,!0)),this.selectedItems.constraints&Sc.UserHandle&&!i.annotation&&!this.currentSymbol&&(this.diagramRenderer.renderUserHandler(i,d,this.scroller.transform,c),Ka()&&r.length>0))for(t=0;t<this.selectedItems.userHandles.length;t++)document.getElementById(this.selectedItems.userHandles[t].name+"_html_element").style.display="block";if(i.annotation)this.renderSelectorForAnnotation(i,d);else if(i.nodes.length+i.connectors.length===1){if(i.connectors[0]instanceof zf&&wg(this.diagramRenderer.rendererActions)){var h=i.connectors[0];this.diagramRenderer.renderEndPointHandle(h,d,i.thumbsConstraints,o,this.scroller.transform,void 0!==h.sourceWrapper,void 0!==h.targetWrapper,!(!this.connectorEditingToolModule||!$f(h)))}else if(i.nodes[0]instanceof ry){var p=i.nodes[0];Hg(this,i.nodes[0])&&("UmlClassifier"===p.shape.type||p.parentId&&this.nameTable[p.parentId]&&"UmlClassifier"===this.nameTable[p.parentId].shape.type||((!p.container||"Canvas"!==p.container.type&&"Grid"!==p.container.type)&&(i.nodes[0].constraints&=~(_c.HideThumbs|_c.Rotate)),i.thumbsConstraints&=~Dc.Rotate));var f=!("SwimLane"!==p.shape.type&&!p.isLane&&!p.isPhase);this.diagramRenderer.renderResizeHandle(i.wrapper.children[0],d,i.thumbsConstraints,this.scroller.currentZoom,i.constraints,this.scroller.transform,u,Zf(i.nodes[0]),!!(i.nodes[0].constraints&_c.HideThumbs),f)}}else this.diagramActions&Mc.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|Nc.PreventRenderSelector),this.diagramRenderer.renderResizeHandle(i.wrapper,d,i.thumbsConstraints,this.scroller.currentZoom,i.constraints,this.scroller.transform,u,Zf(i)),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~Nc.PreventRenderSelector}this.enableServerDataBinding(e)},t.prototype.renderSelectorForAnnotation=function(e,t){this.diagramRenderer.renderResizeHandle(e.wrapper.children[0],t,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,void 0,Zf(e.annotation))},t.prototype.drawSelectionRectangle=function(e,t,n,i){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(e,t,n,i,this.adornerLayer,this.scroller.transform)},t.prototype.renderHighlighter=function(e){var t=by(this.element.id);this.diagramRenderer.renderHighlighter(e,t,this.scroller.transform)},t.prototype.clearHighlighter=function(){var e=by(this.element.id),t=e.getElementById(e.id+"_highlighter");t&&t.parentNode.removeChild(t)},t.prototype.getNodesConnectors=function(e){for(var t=0;t<this.nodes.length;t++)e.push(this.nodes[t]);for(t=0;t<this.connectors.length;t++)e.push(this.connectors[t]);return e},t.prototype.clearSelectorLayer=function(){var e,t=by(this.element.id),n=document.getElementsByClassName("blazor-inner-template");if(this.currentSymbol){var i=t.getElementById("borderRect_symbol");i&&i.parentNode.removeChild(i)}else{var o=t.getElementById(this.adornerLayer.id+"_selected_region");o&&o.parentNode.removeChild(o),this.clearHighlighter();for(var r=wy(this.element.id).childNodes,a=void 0,l=r.length;l>0;l--)(a=r[l-1]).parentNode.removeChild(a);if(Ka()&&!(this.diagramActions&Mc.DragUsingMouse)&&n.length>0)for(e=0;e<this.selectedItems.userHandles.length;e++)document.getElementById(this.selectedItems.userHandles[e].name+"_html_element").style.display="none";else if(!Ka()){var s=xy(this.element.id).childNodes;for(e=s.length;e>0;e--)s[e-1].parentNode.removeChild(s[e-1])}}},t.prototype.getWrapper=function(e,t){var n;t=e.id+"_"+t;for(var i=e instanceof qc?e:this.getPortContainer(this.nameTable[e.id]),o=0;o<i.children.length;o++)t===i.children[o].id&&(n=i.children[o]);return n},t.prototype.getEndNodeWrapper=function(e,t,n){if("Bpmn"===e.shape.type&&e.wrapper.children[0]instanceof qc){if(!Ka()&&"Activity"===e.shape.shape||Ka()&&"Activity"===e.shadow.bpmnShape){if(n&&"Transaction"===e.shape.activity.subProcess.type&&t.sourcePortID){var i=t.sourcePortID,o=e.wrapper.children[0].children[0].children[2];if(o.children)for(var r=0,a=o.children;r<a.length;r++){var l=a[r];if(l.visible&&l.id===e.id+"_"+i)return l.children[0]}}return e.wrapper.children[0].children[0].children[0]}return e.wrapper.children[0].children[0]}return this.containsMargin(e.wrapper.children[0])||e.children?e.wrapper:e.wrapper.children[0]},t.prototype.containsMargin=function(e){return e.margin&&(0!==e.margin.left||0!==e.margin.top||0!==e.margin.right||0!==e.margin.bottom)},t.prototype.focusOutEdit=function(){this.endEdit()},t.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1},t.prototype.endEdit=function(){return sw(this,void 0,void 0,function(){var e,t,n,i,o,r,a,l,s,d,c,u,h,p,f,g,m,v,y,b,w,C,x,S,T,E,_,k;return dw(this,function(D){switch(D.label){case 0:return this.diagramActions&Mc.TextEdit?(e="Blazor",t="sfBlazor",n=void 0,i=void 0,o={},this.enableServerDataBinding(!1),Ka()&&(this.canEnableBlazorObject=!0),r=document.getElementById(this.element.id+"_editBox"),Ka()&&r||!Ka()?(a=r.value,Pl.remove(r,"input",this.eventHandler.inputChange),Pl.remove(r,"focusout",this.focusOutEdit),l=document.getElementById(this.element.id+"_editTextBoxDiv"),s=void 0,d=iv(s=this.nameTable[this.activeLabel.parentId],this.activeLabel.id),c={oldValue:this.activeLabel.text,newValue:a,cancel:!1,element:s,annotation:d},Ka()&&this.textEdit&&(c=this.getBlazorTextEditArgs(c)),u=!1,l.parentNode.removeChild(l),h=void 0,this.bpmnModule?(s=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),h=this.bpmnModule.getTextAnnotationWrapper(s,this.activeLabel.id),(u=!!s)?l.textContent===a&&a===this.activeLabel.text?[3,5]:Ka()?this.textEdit&&window&&window[e]?(g={EventName:"textEdit",args:JSON.stringify(c)},[4,window[t].updateBlazorDiagramEvents(g,this)]):[3,2]:[3,3]:[3,5]):[3,5]):[3,11]):[3,11];case 1:c=D.sent()||c,D.label=2;case 2:return[3,4];case 3:this.triggerEvent(jc.textEdit,c),D.label=4;case 4:c.cancel||this.bpmnModule.updateTextAnnotationContent(s,this.activeLabel,a,this),D.label=5;case 5:return u?[3,10]:(!(p=iv(s=this.nameTable[this.activeLabel.parentId],this.activeLabel.id))||p instanceof Lv?n=Ka()&&"Text"===s.shape.type?{shape:{textContent:s.shape.content}}:{shape:{content:s.shape.content}}:(m=av(s,p.id,!0),o[m]={content:p.content},n={annotations:o}),(f=this.eventHandler.isAddTextNode(s,!0))||l.textContent===a&&a===this.activeLabel.text?[3,9]:Ka()?window&&window[e]&&this.textEdit?(g={EventName:"textEdit",args:JSON.stringify(c)},[4,window[t].updateBlazorDiagramEvents(g,this)]):[3,7]:[3,8]);case 6:c=D.sent()||c,D.label=7;case 7:return[3,9];case 8:this.triggerEvent(jc.textEdit,c),D.label=9;case 9:h||(h=this.getWrapper(s.wrapper,this.activeLabel.id)),p.content===a||c.cancel||(s.parentId&&"UmlClassifier"===this.nameTable[s.parentId].shape.type&&-1===a.indexOf("+")&&-1===a.indexOf("-")&&-1===a.indexOf("#")&&-1===a.indexOf("~")&&-1===s.id.indexOf("_umlClass_header")&&(a=" + "+a),(s.isLane||s.isPhase)&&this.protectPropertyChange(!0),p instanceof Lv?i=Ka()&&"Text"===s.shape.type?{shape:{textContent:a}}:{shape:{content:a}}:(m=av(s,p.id,!0),(v={})[m]={content:a},i={annotations:v}),(y=this.getIndex(s,s.id))&&((b={})[y]=n,(w={})[y]=i,hv(s)===ry?this.onPropertyChanged({nodes:w},{nodes:b}):this.onPropertyChanged({connectors:w},{connectors:b})),this.protectPropertyChange(!0),Ka()&&"Text"===s.shape.type?s.shape.textContent=a:p.content=a,this.protectPropertyChange(!1),this.updateSelector(),(s.isLane||s.isPhase)&&this.protectPropertyChange(!1)),f&&(this.removeObjectsFromLayer(s),this.removeFromAQuad(s),delete this.nameTable[this.activeLabel.parentId],""!==a&&(this.clearSelection(),C=Yy(s),s=this.add(C),this.updateDiagramObject(s),this.commandHandler.oldSelectedObjects=mv(this),this.commandHandler.select(this.nameTable[s.id]),this.commandHandler.updateBlazorSelector())),D.label=10;case 10:if(this.selectedItems.nodes.length){if((S=this.nameTable[(x=this.nameTable[this.activeLabel.parentId]).parentId])&&"SwimLane"===S.shape.type||"SwimLane"===x.shape.type)if(T="LaneHeaderParent",E="PhaseHeaderParent","SwimLane"===x.shape.type&&(S=this.nameTable[this.activeLabel.parentId],x=s),x.isLane||x.isPhase)for(_=x.isLane?S.shape.lanes:S.shape.phases,k=0;k<_.length;k++)_[k].id===(x[T]||x[E])&&(_[k].header.annotation.content=x.annotations[0].content);else x.isHeader&&S.shape.hasHeader&&(S.shape.header.annotation.content=x.annotations[0].content);this.dataBind()}h.visible=!0,this.updateDiagramObject(s),this.diagramActions=this.diagramActions&~Mc.TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},this.commandHandler.getBlazorOldValues(),Ka()&&(this.canEnableBlazorObject=!1),this.enableServerDataBinding(!0),D.label=11;case 11:return[2]}})})},t.prototype.getIndex=function(e,t){for(var n=hv(e)===ry?this.nodes:this.connectors,i=0;i<n.length;i++)if(n[i].id.toString()===t.toString())return i.toString();return null},t.prototype.getBlazorTextEditArgs=function(e){var t=hv(e.element)===zf?{connectorId:e.element.id}:{nodeId:e.element.id},n={};return hv(e.element)===ry&&"Text"===e.element.shape.type?n.textNode=e.element.shape:n.annotationId=e.element.annotations[0].id,{oldValue:e.oldValue,newValue:e.newValue,cancel:e.cancel,element:t,annotation:n}},t.prototype.canLogChange=function(){return!(!(this.diagramActions&Mc.Render)||this.diagramActions&Mc.ToolAction||this.diagramActions&Mc.UndoRedo||this.diagramActions&Mc.PublicMethod)},t.prototype.modelChanged=function(e,t){return!!(e.connectors||t.connectors||e.nodes||t.connectors||e.pageSettings||t.pageSettings||e.bridgeDirection||t.bridgeDirection)},t.prototype.resetDiagramActions=function(e){var t=!!e;this.diagramActions&Mc.UndoRedo&&(!t||e===Mc.UndoRedo)&&(this.diagramActions=this.diagramActions&~Mc.UndoRedo),this.diagramActions&Mc.PublicMethod&&(!t||e===Mc.PublicMethod)&&(this.diagramActions=this.diagramActions&~Mc.PublicMethod)},t.prototype.removeNode=function(e,t){this.removeObjectsFromLayer(e),this.removeFromAQuad(this.nameTable[e.id]);var n=document.getElementById(e.id+"_groupElement");if(delete this.nameTable[e.id],e.children&&delete this.groupTable[e.id],Ka())for(var i=0;i<this.nodes.length;i++)e.id===this.nodes[i].id&&this.UpdateBlazorDiagramModel(e,"Node",i);if(this.nodes.splice(this.nodes.indexOf(e),1),n.children&&n.children.length>0)for(var o=void 0,r=n.children.length-1;r>=0;r--){var a=n.children[r];t.length>0&&-1!==t.indexOf(a.id.split("_")[0])&&(n.parentNode.insertBefore(a,o||n),o=a)}n&&n.parentNode.removeChild(n)},t.prototype.deleteGroup=function(e){var t=[];e.children&&(t=this.commandHandler.getChildren(e,[])),this.UpdateBlazorDiagramModelCollection(e);for(var n=0,i=t;n<i.length;n++){var o=i[n];this.nameTable[o.id]&&this.remove(o)}},t.prototype.updateObject=function(e,t,n){if(!(this.diagramActions&Mc.ToolAction||this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.children[0].bounds)))if(e instanceof ry){for(var i=t,o=0,r=Object.keys(n);o<r.length;o++)switch(r[o]){case"width":e.width=i.width;break;case"height":e.height=i.height;break;case"offsetX":e.offsetX=i.offsetX;break;case"offsetY":e.offsetY=i.offsetY;break;case"rotateAngle":e.rotateAngle=i.rotateAngle}this.nodePropertyChange(e,n,t)}else{for(var a=0,l=Object.keys(n);a<l.length;a++){var s=t,d=e.sourcePoint,c=e.targetPoint;switch(l[a]){case"sourcePoint":d.x=s.sourcePoint.x||d.x,d.y=s.sourcePoint.y||d.y;break;case"targetPoint":c.x=s.targetPoint.x||c.x,c.y=s.targetPoint.y||c.y}}this.connectorPropertyChange(e,n,t)}},t.prototype.nodePropertyChangeExtend=function(e,t,n,i){return void 0!==n.style&&"Bpmn"!==e.shape.type&&(Wm(n.style,e.wrapper.children[0]),i=!0),void 0!==n.shadow&&(this.updateShadow(e.shadow,n.shadow),i=!0),void 0!==n.constraints&&(t.constraints&_c.Select&&!(n.constraints&_c.Select)&&_b(this,e)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),i=!0)),this.swimLaneNodePropertyChange(e,t,n,i),i},t.prototype.swimLaneNodePropertyChange=function(e,t,n,i){if("SwimLane"===e.shape.type&&!this.currentSymbol){if(t.shape){var o=n.shape,r=e.shape,a="Horizontal"===r.orientation,l=r.padding,s=t.shape,d=e.wrapper.children[0],c=void 0,u=void 0,h=void 0;if(s.lanes||s.phases){if(s.lanes)for(var p=0,f=Object.keys(o.lanes);p<f.length;p++){var g=Number(f[p]),m=s.lanes[g],v=void 0,y=o.lanes[g];if(y&&y.header&&this.nodePropertyChange(this.nameTable[h=r.lanes[g].header.id],c=m.header,u=y.header),m.children)for(var b=0,w=Object.keys(m.children);b<w.length;b++){var C=w[b];h=r.lanes[g].children[Number(C)].id;var x=this.nameTable[h];c=m.children[Number(C)],u=y.children[Number(C)],this.nodePropertyChange(x,c,u)}m.width&&!a&&(d.updateColumnWidth(v=r.phases&&r.phaseSize?g+1:g,y.width,!0,l),this.updateDiagramElementQuad()),m.height&&a&&(v=r.header&&r.hasHeader?g+1:g,d.updateRowHeight(v+=r.phases&&r.phaseSize?1:0,y.height,!0,l),this.updateDiagramElementQuad())}if(o.phases)for(var S=0,T=Object.keys(o.phases);S<T.length;S++){g=Number(T[S]);var E=o.phases[g],_=void 0,k=r.header&&r.hasHeader?1:0;E&&E.header&&this.nodePropertyChange(this.nameTable[h=r.phases[g].header.id],c=s.phases[g].header,u=E.header),E.offset&&(0===g?_=E.offset:(_=E.offset-r.phases[g-1].offset)<=0&&(_=E.offset),a?(d.updateColumnWidth(g,_,!0,l),am(e,this,d.rows[k].cells[g],g)):d.updateRowHeight(k+g,_,!0,l))}}if(void 0!==o.phaseSize&&r.phases.length)if(0===o.phaseSize||0===s.phaseSize)if(s.phaseSize)a?(d.removeRow(r.header&&r.hasHeader?1:0),e.height=e.wrapper.height=d.height):(r.header&&r.hasHeader&&(d.rows[0].cells[1].children=d.rows[0].cells[0].children,d.rows[0].cells[1].columnSpan=d.rows[0].cells[0].columnSpan-1,d.rows[0].cells[0].children=[]),d.removeColumn(0));else{if(a){var D=new Og;D.height=o.phaseSize,d.addRow(r.header&&r.hasHeader?1:0,D,!0),e.height=e.wrapper.height+=o.phaseSize}else{var A=new Ig;A.width=o.phaseSize,d.addColumn(0,A,!0),r.header&&r.hasHeader&&(d.rows[0].cells[0].children=d.rows[0].cells[1].children,d.rows[0].cells[1].children=[],d.rows[0].cells[1].columnSpan=1,d.rows[0].cells[1].minWidth=void 0,d.rows[0].cells[0].columnSpan=r.lanes.length+1)}for(var O=0;O<r.phases.length;O++)""===r.phases[O].id&&(r.phases[O].id=Fy()),Vg(d,this,e,r.header&&r.hasHeader?1:0,a,O)}else a?d.updateRowHeight(r.header&&r.hasHeader?1:0,o.phaseSize,!1):d.updateColumnWidth(0,o.phaseSize,!1);r.header&&r.hasHeader&&s.header&&this.nodePropertyChange(P=this.nameTable[d.rows[0].cells[0].children[0].id],s.header,o.header),e.height=e.wrapper.height=d.height,e.width=e.wrapper.width=d.width}else if(t.constraints){var I=n.constraints&_c.Select;if((t.constraints&_c.Select)!==I){var P;(P=this.nameTable[e.id+(o=e.shape).header.id]).constraints=I?P.constraints|_c.Select:P.constraints&~_c.Select;var R=void 0;if(o.phaseSize>0)for(var M=0;M<o.phases.length;M++)(R=this.nameTable[e.id+o.phases[M].id+"_header"]).constraints=I?R.constraints|_c.Select:R.constraints&~_c.Select;var N=void 0,L=void 0,H=o.phases.length||1;for(M=0;M<o.lanes.length;M++)for(var B=0;B<H;B++)(N=this.nameTable[e.id+o.lanes[M].id+B]).constraints=I?N.constraints|_c.Select:N.constraints&~_c.Select,0===B&&((L=this.nameTable[e.id+o.lanes[M].id+"_"+B+"_header"]).constraints=I?L.constraints|_c.Select:L.constraints&~_c.Select)}}i=!0}return i},t.prototype.insertValue=function(e,t){if(!(this.blazorActions&wc.GroupClipboardInProcess)){for(var n=void 0,i=t?this.oldNodeObjects:this.oldConnectorObjects,o=0;o<i.length;o++)i[o].id===e.id&&(n=!0);n||(t?this.oldNodeObjects.push(e):this.oldConnectorObjects.push(e))}},t.prototype.nodePropertyChange=function(e,t,n,i,o,r){if(this.canEnableBlazorObject&&"helper"!=e.id){var a=Yy(e);this.insertValue(a,!0)}var l,s=e.wrapper.outerBounds,d=e.wrapper.bounds,c=!1;if(void 0!==n.width&&(e.children?e.container?e.wrapper.width=n.width:this.scaleObject(e,n.width,!0):(e.wrapper.children[0].width=n.width,l=!0,c=!0)),void 0!==n.height&&(e.children?e.container?e.wrapper.height=n.height:this.scaleObject(e,n.height,!1):(e.wrapper.children[0].height=n.height,l=!0,c=!0)),l=this.nodePropertyChangeExtend(e,t,n,l),void 0!==n.constraints&&tg(t)!==tg(n)&&(e.wrapper.children[0].shadow=tg(e)?e.shadow:null),void 0!==n.offsetX){if("None"!==e.wrapper.flip){if(e.offsetX!==e.wrapper.offsetX&&void 0!==t.offsetX){var u=n.offsetX-t.offsetX;e.wrapper.offsetX=e.wrapper.offsetX+u,this.updateFlipOffset(e.wrapper,u,0,e.wrapper.flip)}}else e.wrapper.offsetX=n.offsetX;l=!0,c=!0}if(void 0!==n.offsetY){if("None"!==e.wrapper.flip){if(e.offsetY!==e.wrapper.offsetY&&void 0!==t.offsetY){var h=n.offsetY-t.offsetY;e.wrapper.offsetY=e.wrapper.offsetY+h,this.updateFlipOffset(e.wrapper,0,h,e.wrapper.flip)}}else e.wrapper.offsetY=n.offsetY;l=!0,c=!0}if(void 0!==n.pivot&&(e.wrapper.pivot=n.pivot,l=!0),void 0!==n.minWidth&&(e.wrapper.minWidth=e.wrapper.children[0].minWidth=n.minWidth,l=!0,c=!0),void 0!==n.minHeight&&(e.wrapper.minHeight=e.wrapper.children[0].minHeight=n.minHeight,l=!0,c=!0),void 0!==n.maxWidth&&(e.wrapper.maxWidth=n.maxWidth,l=!0,c=!0),void 0!==n.maxHeight&&(e.wrapper.maxHeight=n.maxHeight,l=!0,c=!0),void 0!==n.flip)if(e.wrapper.flip=n.flip,l=!0,c=!0,e.wrapper.elementActions&kc.ElementIsGroup){if(gv(e.wrapper,e.offsetX,e.offsetY,this,n.flip),e&&e.children)for(var p=0,f=e.children;p<f.length;p++){var g=this.nameTable[f[p]];g.wrapper.flip=n.flip,this.updatePorts(g,n.flip)}}else e.wrapper.children[0].flip=n.flip,this.updatePorts(e,n.flip);if(void 0!==n.rotateAngle&&e.constraints&_c.Rotate&&(e.children&&o&&this.commandHandler.rotateObjects(e,[e],e.rotateAngle-e.wrapper.rotateAngle,{x:e.offsetX,y:e.offsetY},!1),e.wrapper.rotateAngle=n.rotateAngle,l=!0,c=!0),void 0!==n.backgroundColor&&(e.wrapper.style.fill=n.backgroundColor),void 0!==n.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==n.shape&&"Bpmn"!==e.shape.type&&(l=!0,function(e,t,n,i){var o=new Uc;switch(e.shape.type){case"Path":var r=new Yc;r.data=t.shape.data,Xm(o=r,t,i);break;case"Image":var a=new Xc;a.source=t.shape.source,a.imageAlign=t.shape.align,a.imageScale=t.shape.scale,Xm(o=a,t,i);break;case"Text":Xm(o=new Gc,t,i);break;case"Basic":var l=void 0;(l=(Ka()?"Rectangle"===t.shape.basicShape:"Rectangle"===t.shape.shape)?new Uc:new Yc).data=!Ka()&&"Polygon"===t.shape.shape||Ka()&&"Polygon"===t.shape.basicShape?Ud(t.shape.points):Vc(Ka()?t.shape.basicShape:t.shape.shape),Xm(o,t,i),(!Ka()&&"Rectangle"===t.shape.shape||Ka()&&"Rectangle"===t.shape.basicShape)&&(l.cornerRadius=t.shape.cornerRadius),o=l;break;case"Flow":var s=new Yc,d=Ka()?t.shape.flowShape:t.shape.shape;s.data=ru(d),Xm(o=s,t,i);break;case"Native":var c=new Zc(e.id,i.element.id);c.content=t.shape.content,c.scale=t.shape.scale,Xm(o=c,t,i);break;case"HTML":var u=new gf(t.id,i.element.id);u.content=t.shape.content,Xm(o=u,t,i)}void 0===e.shape.type||e.shape.type===n.shape.type||Ka()&&"UmlActivity"===e.shape.type?function(e,t,n,i){if(Object.keys(e.shape).length>0)if("Path"===t.shape.type&&void 0!==e.shape.data)t.wrapper.children[0].data=e.shape.data;else if("Text"===t.shape.type&&void 0!==e.shape.content)t.wrapper.children[0].content=e.shape.content;else if("Image"===t.shape.type&&void 0!==e.shape.source)t.wrapper.children[0].source=e.shape.source;else if("Native"===t.shape.type){for(var o=void 0,r=0;r<n.views.length;r++)o=vy(t.wrapper.children[0].id+"_native_element",n.views[r]),void 0!==e.shape.content&&o&&(o.removeChild(o.children[0]),t.wrapper.children[0].content=e.shape.content,o.appendChild(Ny(t.wrapper.children[0],!1)));t.wrapper.children[0].scale=e.shape.scale?e.shape.scale:t.wrapper.children[0].scale}else if("HTML"===t.shape.type){var a=void 0;for(r=0;r<n.views.length;r++)(a=vy(t.wrapper.children[0].id+"_html_element",n.views[r]))&&(a.removeChild(a.children[0]),t.wrapper.children[0].content=e.shape.content,a.appendChild(Ny(t.wrapper.children[0],!0)))}else if("Flow"===t.shape.type&&(Ka()&&void 0!==e.shape.flowShape||void 0!==e.shape.shape)){t.shape.shape=Ka()?e.shape.flowShape:e.shape.shape;var l=ru(t.shape.shape.toString());t.wrapper.children[0].data=l}else if("UmlActivity"===t.shape.type&&(Ka()&&void 0!==e.shape.umlActivityShape||!Ka()&&void 0!==e.shape.shape))!function(e,t){Ka()?e.shape.umlActivityShape=t.shape.umlActivityShape:e.shape.shape=t.shape.shape;var n=Sg((Ka()?e.shape.umlActivityShape:e.shape.shape).toString());Ka()&&"InitialNode"===e.shape.umlActivityShape||!Ka()&&"InitialNode"===e.shape.shape?e.wrapper.children[0].style.fill="black":!Ka()&&("ForkNode"===e.shape.shape||"JoinNode"===e.shape.shape)||Ka()&&("ForkNode"===e.shape.umlActivityShape||"JoinNode"===e.shape.umlActivityShape)?e.wrapper.children[0].style.fill="black":(!Ka()&&"FinalNode"===e.shape.shape||Ka()&&"FinalNode"===e.shape.umlActivityShape)&&e instanceof ry&&(e.wrapper=Zm(e)),n&&(e.wrapper.children[0].data=n)}(t,e);else if(void 0!==e.shape.cornerRadius)t.wrapper.children[0].cornerRadius=e.shape.cornerRadius;else if("Basic"===t.shape.type&&i&&"Rectangle"===i.shape.shape){var s=new Yc,d=Vc(Ka()?t.shape.basicShape:t.shape.shape);s.data=d,Xm(s,t,n)}else if(Ka()&&void 0!==e.shape.basicShape||void 0!==e.shape.shape){t.shape.shape=Ka()?e.shape.basicShape:e.shape.shape;var c=Vc(t.shape.shape.toString());t.wrapper.children[0].data=c}t.wrapper.children[0].canMeasurePath=!0}(e,t,i,n):(o.width=t.wrapper.children[0].width,o.height=t.wrapper.children[0].height,t.shape instanceof Lv&&(o.margin=t.shape.margin),o.style=t.style,t.wrapper.children[0]=o)}(n,e,t,this),c=!0),n.margin&&(l=!0,this.updateMargin(e,n),c=!0),((void 0!==n.shape&&void 0===n.shape.type||void 0!==n.width||void 0!==n.height||void 0!==n.style)&&"Bpmn"===e.shape.type&&this.bpmnModule||Ka()&&n&&n.shape&&"Bpmn"===n.shape.type)&&(l=!0,c=!0,this.bpmnModule.updateBPMN(n,t,e,this)),"UmlActivity"===e.shape.type&&(!Ka()&&"FinalNode"===e.shape.shape||Ka()&&"FinalNode"===e.shape.umlActivityShape)&&(l=!0,c=!0,this.updateUMLActivity(n,t,e,this)),(e.shape&&"UmlClassifier"===e.shape.type||e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type)&&(l=!0,c=!0),void 0!==n.ports)for(var m=0,v=Object.keys(n.ports);m<v.length;m++){var y=v[m],b=Number(y);l=!0,this.updatePort(x=n.ports[y],e.ports[b],e.wrapper),c=!0}if(void 0!==n.annotation||void 0!==n.annotations||void 0!==n.width)for(var w=0,C=Object.keys(n.annotations||e.annotations);w<C.length;w++){y=C[w],b=Number(y),l=!0;var x=void 0;x=n.annotation?n.annotation:n.annotations?n.annotations[y]:e.annotations;var S=e.annotations[b];if(S){this.updateAnnotation(x,S,e.wrapper,e,!!e.width);var T=this.nameTable[e.parentId];if(T&&"SwimLane"===T.shape.type&&(e.isLane||e.isPhase))for(var E=e.isLane?T.shape.lanes:T.shape.phases,_=0;_<E.length;_++)if(E[_].id===(e.LaneHeaderParent||e.PhaseHeaderParent)){E[_].header.annotation.content=e.annotations[0].content,E[_].header.annotation.style=e.annotations[0].style;break}}}if(void 0===n.expandIcon&&void 0===n.collapseIcon&&void 0===n.isExpanded||(this.updateIcon(e),this.updateDefaultLayoutIcons(e),void 0!==n.isExpanded&&this.commandHandler.expandNode(e,this),l=!0),void 0!==n.fixedUserHandles){b=void 0,x=void 0;for(var k=void 0,D=0,A=Object.keys(n.fixedUserHandles);D<A.length;D++)y=A[D],b=Number(y),l=!0,n.fixedUserHandles[b]&&(x=n.fixedUserHandles[b]),(k=e.fixedUserHandles[b])&&this.updateNodefixedUserHandle(x,k,e.wrapper,e)}if(void 0!==n.tooltip&&this.updateTooltip(e,n),l){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(e,{offsetX:t.offsetX||e.offsetX,offsetY:t.offsetY||e.offsetY},this),this.checkSelectedItem(e)&&e.wrapper.children[0]instanceof Gc&&e.wrapper.children[0].refreshTextElement(),e.wrapper.measure(new Bd(e.wrapper.bounds.width,e.wrapper.bounds.height),e.id,this.onLoadImageSize.bind(this)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateObject(e,t,n),!("SwimLane"!==e.shape.type||this.currentSymbol||this.diagramActions&Mc.ToolAction)){lm(this,e);var O=e.wrapper.children[0],I=e.shape,P=O.columnDefinitions().length;"Horizontal"===I.orientation&&am(e,this,O.rows[b=I.header&&I.hasHeader?1:0].cells[P-1],P-1),e.wrapper.measure(new Bd(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}if(this.diagramActions&Mc.ToolAction&&!(this.diagramActions&Mc.UndoRedo)||this.checkSelectedItem(e)&&this.updateSelector(),!1===s.equals(s,e.wrapper.outerBounds)&&this.updateQuad(e),i?e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length):this.commandHandler.connectorSegmentChange(e,d,void 0!==n.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(e,this),n.annotations&&e.processId||this.updateGroupOffset(e),e.parentId&&this.nameTable[e.parentId]){var R=this.nameTable[e.parentId];R.wrapper.measure(new Bd(R.wrapper.width,e.wrapper.height)),R.wrapper.arrange(R.wrapper.desiredSize),R.offsetX=R.wrapper.offsetX,R.offsetY=R.wrapper.offsetY}if(!1===d.equals(d,e.wrapper.bounds)&&(this.updateGroupSize(e),e.children&&this.updateGroupOffset(e)),"SwimLane"===e.shape.type&&!this.currentSymbol&&this.diagramActions&Mc.Render&&tm(Zg(this,e.wrapper.children[0]),this),!this.preventNodesUpdate&&((!sg(this)||sg(this)&&this.scroller.oldCollectionObjects.indexOf(e.id)>-1)&&(this.diagramActions&Mc.PreventZIndexOnDragging?this.updateDiagramObject(e,!0):this.updateDiagramObject(e)),!i&&c&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&Ac.LineRouting&&"helper"!==e.id&&(this.diagramActions&Mc.ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0)),this.updateConnectorEdges(e),"helper"!==e.id&&!(this.diagramActions&Mc.ToolAction))))for(var M=this.spatialSearch.findObjects(e.wrapper.outerBounds),N=0;N<M.length;N++){var L=M[N];L instanceof zf&&this.connectorPropertyChange(M[N],{},{sourceID:L.sourceID,targetID:L.targetID,sourcePortID:L.sourcePortID,targetPortID:L.targetPortID,sourcePoint:L.sourcePoint,targetPoint:L.targetPoint})}"New"!==e.status&&this.diagramActions&&(e.status="Update")}if(!r){var H=e,B={element:H,cause:this.diagramActions,oldValue:t,newValue:n};Ka()&&this.propertyChange&&(B.element={node:xv(H)},B.oldValue={node:xv(t)},B.newValue={node:xv(n)}),this.triggerEvent(jc.propertyChange,B)}},t.prototype.updatePorts=function(e,t){if(e&&e.ports.length>0)for(var n=0,i=Object.keys(e.ports);n<i.length;n++){var o=Number(i[n]),r=e.ports[o],a=this.getWrapper(e.wrapper,r.id);(a=fv(a,t,r)).relativeMode="Point",a.measure(new Bd(a.width,a.height)),a.arrange(a.desiredSize)}},t.prototype.updateFlipOffset=function(e,t,n,i){if(e.hasChildren())for(var o=0,r=e.children;o<r.length;o++){var a=r[o];"Horizontal"!==i&&"Both"!==i||(a.flipOffset.x=a.flipOffset.x+t),"Vertical"!==i&&"Both"!==i||(a.flipOffset.y=a.flipOffset.y+n),(a instanceof qc||a instanceof Fc)&&this.updateFlipOffset(a,t,n,i)}},t.prototype.updateUMLActivity=function(e,t,n,i){if(void 0!==e.width||void 0!==e.height){var o=n.wrapper.children[0].children[0];o.width=e.width,o.height=e.height;var r=n.wrapper.children[0].children[1];r.width=e.width/1.5,r.height=e.height/1.5}},t.prototype.updateConnectorProperties=function(e){this.preventConnectorsUpdate?-1===this.selectionConnectorsList.indexOf(e)&&this.selectionConnectorsList.push(e):this.connectorPropertyChange(e,{},{sourcePoint:e.sourcePoint,targetPoint:e.targetPoint,sourceID:e.sourceID,targetID:e.targetID,sourcePortID:e.sourcePortID,targetPortID:e.targetPortID},void 0,!0)},t.prototype.updateConnectorEdges=function(e){if(e.inEdges.length>0)for(var t=0;t<e.inEdges.length;t++)this.updateConnectorProperties(this.nameTable[e.inEdges[t]]);if(e.outEdges.length>0)for(var n=0;n<e.outEdges.length;n++)this.updateConnectorProperties(this.nameTable[e.outEdges[n]]);e.parentId&&this.nameTable[e.parentId]&&this.updateConnectorEdges(this.nameTable[e.parentId])},t.prototype.connectorProprtyChangeExtend=function(e,t,n,i){return void 0!==n.type&&n.type!==t.type&&e.segments.length>0&&void 0===n.segments&&(e.segments=[]),void 0!==n.shape&&void 0!==e.shape&&e.shape&&"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(e,t,n,this),void 0!==e.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),!0):i},t.prototype.connectorPropertyChange=function(e,t,n,i,o){if(this.canEnableBlazorObject){var r=Yy(e);this.insertValue(r,!1)}var a,l,s,d,c,u=e.wrapper.bounds,h=!1,p=[];if(h=this.connectorProprtyChangeExtend(e,t,n,h),void 0!==n.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==n.sourcePoint||void 0!==n.targetPoint||void 0!==n.sourceID||void 0!==n.targetID||void 0!==n.targetPadding||void 0!==n.sourcePortID||void 0!==n.targetPortID||void 0!==n.sourcePadding||void 0!==n.type||void 0!==n.segments||void 0!==n.flip){if(void 0!==n.sourceID&&n.sourceID!==t.sourceID||n.sourcePortID){if(l=this.findInOutConnectPorts(m=this.nameTable[e.sourceID],!1),(!m||og(m)||""!==e.sourcePortID&&rg(l))&&(e.sourceWrapper=m?this.getEndNodeWrapper(m,e,!0):void 0,e.sourcePortID&&void 0===n.sourcePortID&&(e.sourcePortWrapper=m?this.getWrapper(m.wrapper,e.sourcePortID):void 0),this.removePortEdges(this.nameTable[t.sourceID]||m,t.sourcePortID||e.sourcePortID,e.id,!1)),void 0!==n.sourceID&&void 0!==t.sourceID&&""!==t.sourceID){var f=this.nameTable[t.sourceID];void 0!==f&&f.outEdges&&-1!==f.outEdges.indexOf(e.id)&&Km(f.outEdges,e.id)}this.updateEdges(e)}if(void 0!==n.targetID&&n.targetID!==t.targetID){if(a=this.findInOutConnectPorts(v=this.nameTable[n.targetID],!0),(!v||ng(v)||""!==e.targetPortID&&ig(a))&&(e.targetWrapper=v?this.getEndNodeWrapper(v,e,!1):void 0,e.targetPortID&&void 0===n.targetPortID&&(e.targetPortWrapper=v?this.getWrapper(v.wrapper,e.targetPortID):void 0),this.removePortEdges(this.nameTable[t.targetID]||v,t.targetPortID||e.targetPortID,e.id,!0)),void 0!==t&&void 0!==t.targetID&&""!==t.targetID){var g=this.nameTable[t.targetID];void 0!==g&&g.inEdges&&-1!==g.inEdges.indexOf(e.id)&&Km(g.inEdges,e.id)}this.updateEdges(e)}var m;if(void 0!==n.sourcePortID&&n.sourcePortID!==t.sourcePortID&&(e.sourceID&&this.nameTable[e.sourceID]&&(s=this.nameTable[e.sourceID].wrapper),!(m=this.nameTable[e.sourceID])||og(m)||""!==e.sourcePortID&&rg(l)?e.sourcePortWrapper=s?this.getWrapper(s,n.sourcePortID):void 0:""!==e.sourcePortID||og(m)||(e.sourcePortWrapper=void 0)),void 0!==n.targetPortID&&n.targetPortID!==t.targetPortID){var v=this.nameTable[e.targetID];e.targetID&&this.nameTable[e.targetID]&&(d=this.nameTable[e.targetID].wrapper),!v||ng(v)||""!==e.targetPortID&&ig(a)?e.targetPortWrapper=d?this.getWrapper(d,n.targetPortID):void 0:""!==e.targetPortID||ng(v)||(e.targetPortWrapper=void 0)}void 0!==n.flip&&(e.flip=n.flip,pv(e)),"Orthogonal"===e.type&&this.lineRoutingModule&&this.diagramActions&&this.constraints&Ac.LineRouting&&!(this.diagramActions&Mc.ToolAction)&&(this.lineRoutingModule.renderVirtualRegion(this,!0),this.lineRoutingModule.refreshConnectorSegments(this,e,!1)),p=this.getPoints(e)}void 0!==n.style&&Wm(n.style,e.wrapper.children[0]),(p.length>0||void 0!==n.sourceDecorator||void 0!==n.targetDecorator&&(-1!==(c=Object.keys(n.targetDecorator)).indexOf("shape")||-1!==c.indexOf("pathData")||-1!==c.indexOf("width")||-1!==c.indexOf("height"))||void 0!==n.cornerRadius)&&(Qm(e,p.length>0?p:e.intermediatePoints,this.diagramActions),void 0!==n.type&&(h=!0),p.length>0&&(e.wrapper.measure(new Bd(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateConnectorAnnotation(e),this.updateConnectorfixedUserHandles(e),this.updateObject(e,t,n))),(n.sourcePoint||n.targetPoint||n.segments)&&this.diagramActions===Mc.Render&&(h=!0),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.commandHandler.updatePathElementOffset(e),i||this.updateBridging(),this.updateAnnotations(n,e),this.updatefixedUserHandle(n,e),e.wrapper.measure(new Bd(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),!1===u.equals(u,e.wrapper.bounds)&&(this.updateQuad(e),this.updateGroupSize(e)),!0!==h||!this.checkSelectedItem(e)||this.diagramActions&Mc.ToolAction&&!(this.diagramActions&Mc.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!sg(this)||sg(this)&&this.scroller.oldCollectionObjects.indexOf(e.id)>-1)&&(this.diagramActions&Mc.PreventZIndexOnDragging?this.updateDiagramObject(e,!0):this.updateDiagramObject(e)),this.diagramActions&&"New"!==e.status&&(e.status="Update"),this.triggerPropertyChange(o,e,t,n)},t.prototype.removePortEdges=function(e,t,n,i){if(e)for(var o=0;o<e.ports.length;o++){var r=e.ports[o];r.id===t&&Km(i?r.inEdges:r.outEdges,n)}},t.prototype.getpropertyChangeArgs=function(e,t,n,i){return i.element={connector:xv(e)},i.oldValue={connector:xv(t)},i.newValue={connector:xv(n)},i},t.prototype.triggerPropertyChange=function(e,t,n,i){if(!e){var o=t,r={element:xv(o),cause:this.diagramActions,oldValue:xv(n),newValue:xv(i)};Ka()&&(r=this.getpropertyChangeArgs(o,n,i,r)),this.triggerEvent(jc.propertyChange,r)}},t.prototype.findInOutConnectPorts=function(e,t){var n={};return e&&(n=rv(e,t)),n},t.prototype.getPoints=function(e,t){return e.getConnectorPoints(e.type,t,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0,!!this.lineDistributionModule)},t.prototype.updateNodeProperty=function(e,t,n){if(void 0===t)this.updateElementVisibility(e,this.nameTable[e.id],t);else{e.style.opacity=n;for(var i=0;i<e.children.length;i++)e.children[i]instanceof Fc&&this.updateNodeProperty(e.children[i],void 0,n),e.children[i].style.opacity=n}},t.prototype.checkSelectedItem=function(e){var t=this.selectedItems,n=!1,i=[];return(i=i.concat(t.nodes,t.connectors)).length>0&&e.id===i[i.length-1].id&&(n=!0),n},t.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof Fc)for(var n=0;n<e.children.length;n++)this.updateDiagramContainerVisibility(e.children[n],t);e.visible=t},t.prototype.updateElementVisibility=function(e,t,n){if(void 0!==n){if(e.visible=n,t instanceof ry){if(t.children)for(var i=0,o=t.children;i<o.length;i++){var r=o[i];this.updateElementVisibility(this.nameTable[r].wrapper,this.nameTable[r],n)}else e.children[0].visible=n,this.updateDiagramContainerVisibility(e.children[0],n),"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(t,n,this);if(t.ports)for(var a=0,l=t.ports;a<l.length;a++){var s=l[a];s.visibility&Cc.Visible&&((f=this.getWrapper(e,s.id)).visible=n)}if(t.annotations)for(var d=0,c=t.annotations;d<c.length;d++)(f=this.getWrapper(e,c[d].id)).visible=n}else for(var u=0;u<3;u++)e.children[u].visible=n;if(t.annotations)for(var h=0,p=t.annotations;h<p.length;h++)(f=this.getWrapper(e,p[h].id)).visible=n;if(t.expandIcon||t.collapseIcon){var f;if(f=this.getWrapper(e,"icon_content")){for(u=0;u<f.children.length;u++)f.children[u].visible=n;f.visible=n}t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length)}!1===n&&this.unSelect(this.nameTable[e.id]),(t instanceof ry&&!this.preventNodesUpdate||t instanceof zf&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[e.id],void 0,!0)}},t.prototype.updateAnnotations=function(e,t){if(void 0!==e.annotations)for(var n=0,i=Object.keys(e.annotations);n<i.length;n++){var o=i[n],r=Number(o);this.updateAnnotation(e.annotations[o],t.annotations[r],t.wrapper,t)}},t.prototype.updatefixedUserHandle=function(e,t){if(void 0!==e.fixedUserHandles)for(var n=void 0,i=0,o=Object.keys(e.fixedUserHandles);i<o.length;i++){var r=o[i];n=Number(r),this.updateConnectorfixedUserHandle(e.fixedUserHandles[r],t.fixedUserHandles[n],t.wrapper,t)}},t.prototype.updateConnectorfixedUserHandle=function(e,t,n,i,o){var r,a=!1;void 0!==(r=this.getWrapper(n,t.id))&&(void 0!==e.width&&(r.width=e.width,a=!0),void 0!==e.height&&(r.height=e.height,a=!0),t instanceof yf&&void 0!==e.offset&&i.updateAnnotation(t,i.intermediatePoints,i.wrapper.bounds,r),t instanceof yf&&e.displacement&&(void 0===e.displacement.x&&void 0===e.displacement.y||(a=!0)),void 0!==e.fill&&(r.style.fill=e.fill),void 0!==e.handleStrokeColor&&(r.style.strokeColor=e.handleStrokeColor),void 0!==e.handleStrokeWidth&&(r.style.strokeWidth=e.handleStrokeWidth),void 0!==e.visibility&&(r.visible=e.visibility),void 0!==e.cornerRadius&&(r.cornerRadius=e.cornerRadius),this.updatefixedUserHandleContent(e,a,r,i,t,n),!0===a&&(r.measure(new Bd(r.width,r.height)),r.arrange(r.desiredSize)))},t.prototype.updateAnnotation=function(e,t,n,i,o){var r,a=!1;if(void 0!==(r=this.getWrapper(n,t.id))){if(void 0!==e.width&&void 0!==e.height&&(r.width=e.width,r.height=e.height,a=!0),void 0!==e.rotateAngle&&(r.rotateAngle=e.rotateAngle),!o||r instanceof gf||r.refreshTextElement(),t instanceof tu&&void 0!==e.segmentAngle&&(r.rotateAngle=t.rotateAngle),t instanceof eu&&void 0!==e.offset){var l=e.offset;a=!0,r.setOffsetWithRespectToBounds(void 0!==l.x?l.x:t.offset.x,void 0!==l.y?l.y:t.offset.y,"Fraction"),r.relativeMode="Point"}else t instanceof tu&&(void 0!==e.offset||void 0!==e.segmentAngle)&&i.updateAnnotation(t,i.intermediatePoints,i.wrapper.bounds,r);t instanceof tu&&e.displacement&&(void 0===e.displacement.x&&void 0===e.displacement.y||(a=!0)),void 0!==e.margin&&(a=!0,void 0!==e.margin.bottom&&(r.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(r.margin.top=e.margin.top),void 0!==e.margin.left&&(r.margin.left=e.margin.left),void 0!==e.margin.right&&(r.margin.right=e.margin.right)),(a||o)&&(r.width=t.width||i.width,t.template&&(r.width=r.width||r.actualSize.width,r.height=t.height||i.height||r.actualSize.height)),void 0!==e.horizontalAlignment&&(r.horizontalAlignment=e.horizontalAlignment,a=!0),void 0!==e.verticalAlignment&&(r.verticalAlignment=e.verticalAlignment,a=!0),void 0!==e.visibility&&(r.visible=!(!n.visible||!e.visibility)),void 0!==e.constraints&&(r.constraints&Ec.Select&&!(e.constraints&Ec.Select)&&_b(this,i,!1,r),r.constraints=e.constraints),void 0!==e.style&&Wm(e.style,r),void 0!==e.hyperlink&&function(e,t,n){for(var i=r,o=i.hyperlink,a=0,l=Object.keys(e);a<l.length;a++)switch(l[a]){case"color":i.style.color=o.color=e.color;break;case"content":i.content=o.content=e.content||o.link;break;case"link":i.style.color=e.link?o.color:n.style.color,i.style.textDecoration=e.link?o.textDecoration:n.style.textDecoration,i.content=e.link?o.content||e.link:n.content,o.link=e.link;break;case"textDecoration":i.style.textDecoration=o.textDecoration=e.textDecoration}}(e.hyperlink,0,t),this.updateAnnotationContent(e,a,r,i,t,n),!0===a&&(r.measure(new Bd(r.width,r.height)),r.arrange(r.desiredSize)),r instanceof gf||r.refreshTextElement()}},t.prototype.updatefixedUserHandleContent=function(e,t,n,i,o,r){void 0!==e&&this.updateConnectorfixedUserHandleWrapper(n,i,o,r)},t.prototype.updateConnectorfixedUserHandleWrapper=function(e,t,n,i){for(var o=0,r=this.views;o<r.length;o++){var a=r[o];My(e.id+"_groupElement",a),My(e.id+"_html_element",a)}if(t instanceof zf){var l=t.wrapper.children[0],s=new Zd(l.offsetX-l.width/2,l.offsetY-l.height/2,l.width,l.height);e=t.getfixedUserHandle(t.fixedUserHandles[t.fixedUserHandles.length-1],t.intermediatePoints,s)}for(var d=0;d<i.children.length;d++)e.id===i.children[d].id&&i.children.splice(d,1,e)},t.prototype.updateAnnotationContent=function(e,t,n,i,o,r){void 0!==e.content&&(n&&(n.content="UmlActivity"===i.shape.type&&(Ka()&&"StructuredNode"===i.shape.umlActivityShape||!Ka()&&"StructuredNode"===i.shape.shape)?"<<"+e.content+">>":e.content),n instanceof gf&&this.updateAnnotationWrapper(n,i,o,r)),void 0!==e.template&&(n.content=e.template,this.updateAnnotationWrapper(n,i,o,r))},t.prototype.updateAnnotationWrapper=function(e,t,n,i){for(var o=0,r=this.views;o<r.length;o++){var a=r[o];My(e.id+"_groupElement",a),My(e.id+"_html_element",a)}if(t instanceof ry)e=t.initAnnotationWrapper(n,this.element.id);else if(t instanceof zf){var l=t.wrapper.children[0],s=new Zd(l.offsetX-l.width/2,l.offsetY-l.height/2,l.width,l.height);e=t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,s,this.getDescription,this.element.id)}for(var d=0;d<i.children.length;d++)e.id===i.children[d].id&&i.children.splice(d,1,e)},t.prototype.updateNodefixedUserHandle=function(e,t,n,i){var o,r=!1;if(void 0!==(o=this.getWrapper(n,t.id))){if(void 0!==e.width&&(o.actualSize.width=e.width,r=!0),void 0!==e.height&&(o.height=e.height,r=!0),t instanceof vf&&void 0!==e.offset){var a=e.offset;r=!0,o.setOffsetWithRespectToBounds(void 0!==a.x?a.x:t.offset.x,void 0!==a.y?a.y:t.offset.y,"Fraction"),o.relativeMode="Point"}void 0!==e.margin&&(r=!0,void 0!==e.margin.bottom&&(o.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(o.margin.top=e.margin.top),void 0!==e.margin.left&&(o.margin.left=e.margin.left),void 0!==e.margin.right&&(o.margin.right=e.margin.right)),void 0!==e.visibility&&(o.visible=e.visibility),void 0!==e.fill&&(o.style.fill=e.fill),void 0!==e.handleStrokeColor&&(o.style.strokeColor=e.handleStrokeColor),void 0!==e.handleStrokeWidth&&(o.style.strokeWidth=e.handleStrokeWidth),void 0!==e.cornerRadius&&(o.cornerRadius=e.cornerRadius),this.updatefixedUserHandleWrapper(o,i,t,n),!0===r&&(o.measure(new Bd(o.width,o.height)),o.arrange(o.desiredSize))}},t.prototype.updatefixedUserHandleWrapper=function(e,t,n,i){for(var o=0,r=this.views;o<r.length;o++){var a=r[o];My(e.id+"_groupElement",a),My(e.id+"_html_element",a)}t instanceof ry&&(e=t.initfixedUserHandles(n));for(var l=0;l<i.children.length;l++)e.id===i.children[l].id&&i.children.splice(l,1,e)},t.prototype.updatePort=function(e,t,n){var i,o=!1;if(void 0!==(i=this.getWrapper(n,t.id))){if(void 0!==e.offset&&(o=!0,i.setOffsetWithRespectToBounds(void 0!==e.offset.x?e.offset.x:t.offset.x,void 0!==e.offset.y?e.offset.y:t.offset.y,"Fraction"),i.relativeMode="Point"),void 0!==e.width&&(o=!0,i.width=e.width),void 0!==e.height&&(o=!0,i.height=e.height),void 0!==e.visibility&&(i.visible=!(!n.visible||!nv(t,Cc.Visible))),void 0!==e.margin&&(o=!0,void 0!==e.margin.bottom&&(i.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(i.margin.top=e.margin.top),void 0!==e.margin.right&&(i.margin.right=e.margin.right),void 0!==e.margin.left&&(i.margin.left=e.margin.left)),void 0!==e.horizontalAlignment&&(o=!0,i.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(o=!0,i.verticalAlignment=e.verticalAlignment),void 0!==e.style&&(void 0!==e.style.fill&&(i.style.fill=e.style.fill),void 0!==e.style.opacity&&(i.style.opacity=e.style.opacity),void 0!==e.style.strokeColor&&(i.style.strokeColor=e.style.strokeColor),void 0!==e.style.strokeWidth&&(i.style.strokeWidth=e.style.strokeWidth),void 0!==e.style.strokeDashArray&&(i.style.strokeDashArray=e.style.strokeDashArray)),void 0!==e.shape&&i){var r=nu(e.shape);i.data=r,i.canMeasurePath=!0}void 0!==e.pathData&&(i.data=String(e.pathData),o=!0),!0===o&&(i.measure(new Bd(i.width,i.height)),i.arrange(i.desiredSize))}},t.prototype.updateIcon=function(e){var t=this.getWrapper(e.wrapper,"icon_content"),n=this.diagramActions&Mc.Render?this.element.id:void 0;if(t){if("SVG"===this.mode){var i=vy(e.wrapper.id+"_icon_content",n);if(i){var o=vy(i.id+"_rect",n),r=vy(i.id+"_shape",n),a=vy(r.id+"_native_element",n);a&&a.parentNode.removeChild(a),r.parentNode.removeChild(r),o.parentNode.removeChild(o),i.parentNode.removeChild(i)}}var l=e.wrapper.children.indexOf(t);e.wrapper.children.splice(l,1)}var s=this.getPortContainer(e);e.initIcons(this.getDescription,this.layout,s,this.element.id)},t.prototype.getPortContainer=function(e){if(e.children)for(var t=0;t<e.wrapper.children.length;t++)if(e.wrapper.children[t].id===e.id+"group_container")return e.wrapper.children[t];return e.wrapper},t.prototype.updateTooltip=function(e,t){void 0!==t.tooltip.content&&(e.tooltip.content=t.tooltip.content),void 0!==t.tooltip.position&&(e.tooltip.position=t.tooltip.position),void 0!==t.tooltip.height&&(e.tooltip.height=t.tooltip.height),void 0!==t.tooltip.width&&(e.tooltip.width=t.tooltip.width),void 0!==t.tooltip.showTipPointer&&(e.tooltip.showTipPointer=t.tooltip.showTipPointer),void 0!==t.tooltip.relativeMode&&(e.tooltip.relativeMode=t.tooltip.relativeMode)},t.prototype.updateQuad=function(e){this.spatialSearch.updateQuad(e.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},t.prototype.removeFromAQuad=function(e){if(e.children)for(var t=void 0,n=e.children,i=0;i<n.length;i++)(t=this.nameTable[n[i]])&&this.removeFromAQuad(t);this.spatialSearch.removeFromAQuad(e.wrapper),this.spatialSearch.updateBounds(e.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},t.prototype.updateGroupSize=function(e){var t;e.parentId&&(t=this.nameTable[e.parentId])&&(t.parentId?this.updateGroupSize(t):(t.wrapper.measure(new Bd),t.wrapper.arrange(t.wrapper.desiredSize),this.updateGroupOffset(t),this.updateDiagramObject(t)))},t.prototype.updatePage=function(){if(this.diagramActions&Mc.Render&&!(this.diagramActions&Mc.DragUsingMouse)){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var e=0,n=this.views;e<n.length;e++){var i=this.views[n[e]];i instanceof t||i.updateView(i)}}this.diagramActions&Mc.DragUsingMouse&&this.renderPageBreaks()},t.prototype.protectPropertyChange=function(e){this.isProtectedOnChange=e},t.prototype.getProtectPropertyChangeValue=function(){return this.isProtectedOnChange},t.prototype.enableServerDataBinding=function(e){Ka()&&(this.allowServerDataBinding=e,e&&(this.bulkChanges={}))},t.prototype.updateShadow=function(e,t){void 0!==t.angle&&(e.angle=t.angle),void 0!==t.color&&(e.color=t.color),void 0!==t.distance&&(e.distance=t.distance),void 0!==t.opacity&&(e.opacity=t.opacity)},t.prototype.updateMargin=function(e,t){void 0!==t.margin.top&&(e.margin.top=t.margin.top),void 0!==t.margin.bottom&&(e.margin.bottom=t.margin.bottom),void 0!==t.margin.left&&(e.margin.left=t.margin.left),void 0!==t.margin.right&&(e.margin.right=t.margin.right)},t.prototype.removePreviewChildren=function(e){if(e.children&&e.children.length&&e.shape&&"SwimLane"===e.shape.type){for(var t=0;t<e.children.length;t++){var n=e.children[t],i=this.nodes.indexOf(this.nameTable[n]);i>=0&&this.nodes.splice(i,1),delete this.nameTable[n]}var o=this.nodes.indexOf(this.nameTable[this.currentSymbol.id]);o>=0&&this.nodes.splice(o,1)}},t.prototype.initDroppables=function(){var e,t,n=this,i={},o={};this.droppable=new xd(this.element),this.droppable.over=function(r){if(n.currentSymbol)r.event.touches&&r.event.touches.length&&n.eventHandler.mouseMove(r.event,r.event.touches);else{var a=null;if(!r.dragData&&"drag"===r.name){var l=document.getElementsByClassName("e-dragclone")[0];l&&(a=l)}if(r.dragData||a){var s=void 0,d=void 0;document.getElementById(n.element.id+"content").focus();var c=n.eventHandler.getMousePosition(r.event),u=void 0,h=a||r.dragData.helper,p=h.getAttribute("paletteId"),f=void 0,g=void 0,m=void 0,v=void 0;if(p){var y=document.getElementById(p).ej2_instances[0];if(n.droppable.sourceElement=y,y){var b=y.selectedSymbols;n.allowServerDataBinding=!1,u=Yy(y.selectedSymbols),i=y.childTable;var w=b.wrapper.children[0].children[0];if(v=function(e,t,n){var i,o;return i=Tv(e,t,n,"width"),o=Tv(e,t,n,"height"),new Bd(i,o)}(y,u,w),y.selectedSymbols instanceof ry){"TextAnnotation"===b.shape.shape?(u.offsetX=c.x+11+v.width*u.pivot.x,u.offsetY=c.y+11+v.height*u.pivot.y):(u.offsetX=c.x+5+v.width*u.pivot.x,u.offsetY=c.y+v.height*u.pivot.y);var C=new ry(n,"nodes",u,!0);"Bpmn"===C.shape.type&&C.shape.activity.subProcess.processes&&C.shape.activity.subProcess.processes.length&&(C.shape.activity.subProcess.processes=[]),g=C.previewSize,m=y.symbolDragSize;var x=y.symbolPreview;if(C.width=(f=C.dragSize).width||m.width||g.width||x.width||C.width,C.height=f.height||m.height||g.height||x.height||C.height,"SwimLane"===C.shape.type){if(n.diagramActions|=Mc.PreventHistory,C.shape.isLane){C.children=[],e={id:"header"+Fy()},"Horizontal"===C.shape.orientation?(e.width=C.shape.lanes[0].header.width,e.height=C.shape.lanes[0].height):(e.width=C.shape.lanes[0].width,e.height=C.shape.lanes[0].header.height),e.style=C.shape.lanes[0].header.style,e.offsetX=c.x+5+e.width/2,e.offsetY=c.y+e.height/2,n.diagramActions|=Mc.PreventCollectionChangeOnDragOver,e=n.add(e),t={id:"body"+Fy()},"Horizontal"===C.shape.orientation?(t.width=C.shape.lanes[0].width-e.width,t.height=C.shape.lanes[0].height,t.offsetX=c.x+5+(C.shape.lanes[0].header.width+t.width/2),t.offsetY=c.y+t.height/2):(t.width=C.shape.lanes[0].width,t.height=C.shape.lanes[0].height-e.height,t.offsetX=c.x+5+t.width/2,t.offsetY=c.y+(C.shape.lanes[0].header.height+t.height/2)),t.style=C.shape.lanes[0].style,t=n.add(t);var S={id:"group"+Fy(),children:[e.id,t.id]};S.shape=C.shape,S.width=C.shape.lanes[0].width,S.height=C.shape.lanes[0].height,S.previewSize=C.previewSize,S.dragSize=C.dragSize,S.addInfo=C.addInfo,C=n.add(S),n.diagramActions&=~Mc.PreventCollectionChangeOnDragOver}n.diagramActions&=~Mc.PreventHistory}if(C.shape.isPhase&&((d="Horizontal"===C.shape.orientation)?(C.offsetX=c.x+5+(C.width||w.actualSize.width)/2,C.offsetY=c.y,C.shape.data="M20,"+C.height/2+" L"+(C.width-20)+","+C.height/2+"z",C.height=1):(C.offsetX=c.x+5,C.offsetY=c.y+(C.height||w.actualSize.height)/2,C.shape.data="M"+C.width/2+",20 L"+C.width/2+","+(C.height-20)+"z",C.width=1)),s=C,u.children){var T=u;o=n.getChildren(T,{},i),sv(T,-T.offsetX,-T.offsetY,o,!0,n)}}else if(y.selectedSymbols instanceof zf){s=new zf(n,"connectors",u,!0);var E=Zd.toBounds([s.sourcePoint,s.targetPoint]),_=c.x-E.left,k=c.y-E.top;s.sourcePoint.x+=_,s.sourcePoint.y+=k,s.targetPoint.x+=_,s.targetPoint.y+=k}s.shape.isLane||(s.id+=Fy());var D={source:y,element:s,cancel:!1,diagram:n};if(Ka()&&(D=n.getBlazorDragEventArgs(D)),n.enterObject=s,n.enterTable=o,n.triggerEvent(jc.dragEnter,D),s instanceof ry&&"SwimLane"===s.shape.type&&s.shape.isLane){var A,O,I=D.element,P=I.shape.lanes[0];d="Horizontal"===I.shape.orientation,A=n.nameTable[s.children[0]],O=n.nameTable[s.children[1]],g=s.previewSize,m=y.symbolDragSize,P.width=(f=s.dragSize).width||m.width||g.width||P.width,P.height=f.height||m.height||g.height||P.height,d?(e.width=P.header.width,e.height=P.height,t.width=P.width-e.width,t.height=P.height,t.offsetX=c.x+5+(P.header.width+O.width/2),t.offsetY=c.y+O.height/2):(e.width=P.width,e.height=P.header.height,t.width=P.width,t.height=P.height-e.height,t.offsetX=c.x+5+O.width/2,t.offsetY=c.y+(P.header.height+O.height/2)),e.offsetX=c.x+5+A.width/2,e.offsetY=c.y+A.height/2,s.width=P.width,s.height=P.height}s instanceof ry&&s.shape.isPhase&&(d?s.height=1:s.width=1),n.activeLayer.lock||D.cancel||(n.preventDiagramUpdate=!0,s.children&&n.findChild(s,o),n.preventDiagramUpdate=!0,-1!==s.zIndex&&(s.zIndex=-1),n.initObject(s,void 0,void 0,!0),n.currentSymbol=s,"SVG"!==n.mode&&n.refreshDiagramLayer(),n.commandHandler.oldSelectedObjects=mv(n),n.commandHandler.select(s),n.commandHandler.updateBlazorSelector(),n.eventHandler.mouseDown(r.event),n.eventHandler.mouseMove(r.event,r),n.preventDiagramUpdate=!1,n.updatePage(),h.style.opacity="0"),delete n.enterObject,delete n.enterTable}n.droppable.selectedSymbols=h,n.allowServerDataBinding=!0}}}},this.droppable.drop=function(e){return sw(n,void 0,void 0,function(){var t,n,i,o,r,a,l,s,d,c,u,h,p;return dw(this,function(f){switch(f.label){case 0:return this.allowServerDataBinding=!1,t="sourceElement",this.currentSymbol?(i=!1,r=void 0,r=this.currentSymbol instanceof zf,e.event.touches&&this.eventHandler.mouseUp(e.event),a=void 0,s=void 0,s={source:this.droppable[t],element:this.currentSymbol,target:this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this,cancel:!1,position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},Ka()?(s={source:xv(this.droppable[t]),element:hv(this.currentSymbol)===zf?{connector:xv(this.currentSymbol)}:{node:xv(this.currentSymbol)},cancel:!1,target:{},position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},this.getDropEventArgs(s),[4,this.triggerEvent(jc.drop,s)]):[3,2]):[3,4];case 1:return s=f.sent()||s,[3,3];case 2:this.triggerEvent(jc.drop,s),f.label=3;case 3:return d=void 0,c="id",(d=Yy(this.currentSymbol)).hasTarget=this.currentSymbol.hasTarget,this.removeFromAQuad(this.currentSymbol),this.removeObjectsFromLayer(this.nameTable[this.currentSymbol.id]),this.removeElements(this.currentSymbol),(this.currentSymbol.shape.isLane||this.currentSymbol.shape.isPhase)&&this.removeChildInNodes(this.currentSymbol),s.cancel&&Fm(this.currentSymbol,this),this.currentSymbol.shape.isPhase&&(i=!0,o=this.currentSymbol.shape.orientation),this.removePreviewChildren(this.currentSymbol),delete this.nameTable[this.currentSymbol.id],this.currentSymbol=null,this.protectPropertyChange(!0),s.cancel?this.clearSelectorLayer():(this.startGroupAction(),d&&(d.shape.isLane||i)&&(i&&(d.shape.isPhase=i,d.shape.orientation=o),this.eventHandler.addSwimLaneObject(d)),"Bpmn"===d.shape.type&&d.shape.annotation&&d.hasTarget&&(l=d.shape.annotation.nodeId,d.shape.annotation.id=d.id,this.addTextAnnotation(d.shape.annotation,this.nameTable[l]),d.nodeId=""),d.shape.isLane||i||(d.children&&this.addChildNodes(d),s.target&&s.target instanceof ry&&!r&&Hg(this,s.target)&&lg(s.target)?zg(this,s.target,d):n=this.add(d,!0),(d||n)&&dg(this)&&this.select([this.nameTable[d[c]]]))),this.protectPropertyChange(!1),a=this.nameTable[d[c]],d.hasTarget&&(d.nodeId=d.hasTarget,this.remove(d)),this.bpmnModule&&a instanceof ry&&d.processId&&(a.processId=d.processId,this.bpmnModule.dropBPMNchild(this.nameTable[a.processId],a,this)),s.cancel||this.endGroupAction(),"SVG"!==this.mode&&this.refreshDiagramLayer(),delete this.droppable[t],[3,5];case 4:s={source:xv(e.droppedElement),element:void 0,target:xv(this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this),cancel:!1,position:void 0},Ka()&&(s={source:xv(e.droppedElement),element:void 0,cancel:!1,position:void 0,target:{}},this.getDropEventArgs(s)),this.triggerEvent(jc.drop,s),d=void 0,c="id",f.label=5;case 5:if(this.droppable[u="selectedSymbols"]&&this.droppable[u].parentNode)Ls(this.droppable[u]);else for(h=document.getElementsByClassName("e-dragclone"),p=0;p<h.length;p++)h[p].remove();return this.allowServerDataBinding=!0,[2]}})})},this.droppable.out=function(e){if(n.currentSymbol&&!n.eventHandler.focus){n.unSelect(n.currentSymbol),n.removeFromAQuad(n.currentSymbol),"SVG"!==n.mode&&"Native"===n.currentSymbol.shape.type&&n.removeElements(n.currentSymbol),n.removeObjectsFromLayer(n.nameTable[n.currentSymbol.id]),n.removePreviewChildren(n.currentSymbol),delete n.nameTable[n.currentSymbol.id];var t={element:xv(n.currentSymbol),diagram:n};Ka()&&(t=n.getBlazorDragLeaveEventArgs(t)),n.triggerEvent(jc.dragLeave,t),"SVG"!==n.mode?n.refreshDiagramLayer():n.removeElements(n.currentSymbol),n.currentSymbol=null,n.droppable.selectedSymbols.style.opacity="1",delete n.droppable.sourceElement,n.diagramRenderer.rendererActions=n.removeConstraints(n.diagramRenderer.rendererActions,Nc.DrawSelectorBorder),n.previousSelectedObject&&n.select(n.previousSelectedObject,n.previousSelectedObject.length>1),n.previousSelectedObject=null}}},t.prototype.getBlazorDragLeaveEventArgs=function(e){return{diagramId:this.element.id,element:hv(e.element)===zf?{connector:xv(e.element)}:{node:xv(e.element)}}},t.prototype.getDropEventArgs=function(e){if(this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode){var t=this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode;e.target=hv(t)===zf?{connector:xv(t)}:{node:xv(t)}}else e.target.diagramId=this.element.id},t.prototype.removeChildInNodes=function(e){if(e){if(e.children)for(var t=0;t<e.children.length;t++)this.removeChildInNodes(this.nameTable[e.children[t]]);var n=this.nodes.indexOf(e);-1!==n&&this.nodes.splice(n,1)}},t.prototype.getBlazorDragEventArgs=function(e){return{source:xv(e.source),element:hv(e.element)===zf?{connector:xv(e.element)}:{node:xv(e.element)},cancel:e.cancel,diagramId:this.element.id}},t.prototype.findChild=function(e,t){for(var n,i,o=0;o<e.children.length;o++)(n=t[e.children[o]])&&(n.children&&this.findChild(n,t),n.id=n.id+Fy(),t[n.id]=n,e.children[o]=n.id,i=new ry(this,"nodes",n,!0),this.initObject(i,void 0,void 0,!0))},t.prototype.getChildren=function(e,t,n){for(var i,o=0;o<e.children.length;o++)(i=n[e.children[o]])&&(i.children&&(t=this.getChildren(i,t,n)),t[i.id]=Yy(i));return t},t.prototype.addChildNodes=function(e){for(var t,n=0;n<e.children.length;n++)(t=this.nameTable[e.children[n]])&&(t.children&&this.addChildNodes(t),this.add(t,!0))},t.prototype.moveNode=function(e){for(var t,n=this.commandHandler.getObjectLayer(e.id),i=n.zIndex,o=n.objects.length,r=0;r<this.layers.length;r++)i===this.layers[r].zIndex&&(t=this.layers[r+1]);if(o>1)this.commandHandler.moveSvgNode(e.id,n.objects[o-2]),this.commandHandler.moveSvgNode(n.objects[o-2],e.id);else if(t){var a=this.commandHandler.getLayer(this.layerZIndexTable[t.zIndex]).objects[0];a?(this.commandHandler.moveSvgNode(e.id,a),this.commandHandler.updateNativeNodeIndex(e.id,a)):this.moveObjectsUp(e,n)}else this.moveObjectsUp(e,n)},t.prototype.moveObjectsUp=function(e,t){for(var n,i=this.layers.length-1;i>=0;i--)if(t.id!==(n=this.layers[i]).id){var o=this.commandHandler.getLayer(this.layerZIndexTable[n.zIndex]).objects[n.objects.length-1];if(o){this.commandHandler.moveSvgNode(e.id,o),this.commandHandler.moveSvgNode(o,e.id);break}}},t.prototype.insertData=function(e){return this.crudOperation(e,"create",this.getNewUpdateNodes("New"))},t.prototype.updateData=function(e){return this.crudOperation(e,"update",this.getNewUpdateNodes("Update"))},t.prototype.removeData=function(e){return this.crudOperation(e,"destroy",this.getDeletedNodes())},t.prototype.crudOperation=function(e,t,n){if(e){var i=this.parameterMap(e,!(e instanceof zf));if(i){var o=e instanceof zf?this.dataSourceSettings.connectionDataSource.crudAction[t]:this.dataSourceSettings.crudAction[t];this.raiseAjaxPost(JSON.stringify(i),o)}return i}var r=n;return this.processCrudCollection(r,this.dataSourceSettings.crudAction[t],this.dataSourceSettings.connectionDataSource.crudAction[t]),r},t.prototype.processCrudCollection=function(e,t,n){if(e.nodes){var i=[],o=void 0;for(o=0;o<e.nodes.length;o++)i.push(this.parameterMap(e.nodes[o],!0));i&&i.length>0&&this.raiseAjaxPost(JSON.stringify(i),t)}if(e.connectors){for(i=[],o=void 0,o=0;o<e.connectors.length;o++)i.push(this.parameterMap(e.connectors[o],!1));i&&i.length>0&&this.raiseAjaxPost(JSON.stringify(i),n)}},t.prototype.parameterMap=function(e,t){var n,i={},o=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(o.id&&(i[o.id]=e.id),o.sourcePointX&&o.sourcePointY&&(i[o.sourcePointX]=e.sourcePoint.x,i[o.sourcePointY]=e.sourcePoint.y),o.targetPointX&&o.targetPointY&&(i[o.targetPointX]=e.targetPoint.x,i[o.targetPointY]=e.targetPoint.y),o.sourceID&&(i[o.sourceID]=e.sourceID),o.targetID&&(i[o.targetID]=e.targetID),o.crudAction&&o.crudAction.customFields&&o.crudAction.customFields.length>0)for(n=0;n<o.crudAction.customFields.length;n++)i[o.crudAction.customFields[n]]=e[o.crudAction.customFields[n]];return i},t.prototype.getNewUpdateNodes=function(e){var t=[],n=[];for(var i in this.nameTable){var o=this.nameTable[i];o.status==e&&(o&&o instanceof zf?(o.status="None",n.push(o)):(o.status="None",t.push(o)))}return{nodes:t,connectors:n}},t.prototype.getDeletedNodes=function(){var e,t=[],n=[];for(e=0;e<this.crudDeleteNodes.length;e++){var i=this.crudDeleteNodes[e];i&&i.segments?n.push(i):i&&t.push(i)}return this.crudDeleteNodes=[],{nodes:t,connectors:n}},t.prototype.raiseAjaxPost=function(e,t){var n=new Cl(t,"POST",!0,"application/json"),i=JSON.stringify(JSON.parse(e));n.send(i).then(),n.onSuccess=function(e){}},t.prototype.getHiddenItems=function(e){if(this.contextMenuModule){this.contextMenuModule.hiddenItems=[];for(var t=0,n=e.items;t<n.length;t++){var i=n[t];if(this.contextMenuModule.ensureItems(i,e.event),i.items&&i.items.length)for(var o=0,r=i.items;o<r.length;o++)this.contextMenuModule.ensureItems(r[o],e.event)}return this.contextMenuModule.hiddenItems}return[]},Object(O.__decorate)([Ks("100%")],t.prototype,"width",void 0),Object(O.__decorate)([Ks("SVG")],t.prototype,"mode",void 0),Object(O.__decorate)([Ks("100%")],t.prototype,"height",void 0),Object(O.__decorate)([Qs({},Dg)],t.prototype,"contextMenuSettings",void 0),Object(O.__decorate)([Ks(Ac.Default)],t.prototype,"constraints",void 0),Object(O.__decorate)([Ks(Oc.Default)],t.prototype,"tool",void 0),Object(O.__decorate)([Ks("Top")],t.prototype,"bridgeDirection",void 0),Object(O.__decorate)([Ks("transparent")],t.prototype,"backgroundColor",void 0),Object(O.__decorate)([Qs({},gb)],t.prototype,"snapSettings",void 0),Object(O.__decorate)([Qs({},vb)],t.prototype,"rulerSettings",void 0),Object(O.__decorate)([Qs({},ub)],t.prototype,"pageSettings",void 0),Object(O.__decorate)([Qs({},rw)],t.prototype,"serializationSettings",void 0),Object(O.__decorate)([ed([],ry)],t.prototype,"nodes",void 0),Object(O.__decorate)([Ks()],t.prototype,"drawingObject",void 0),Object(O.__decorate)([ed([],zf)],t.prototype,"connectors",void 0),Object(O.__decorate)([Ks([])],t.prototype,"basicElements",void 0),Object(O.__decorate)([Qs({},lf)],t.prototype,"tooltip",void 0),Object(O.__decorate)([Qs({},Cb)],t.prototype,"dataSourceSettings",void 0),Object(O.__decorate)([Ks()],t.prototype,"addInfo",void 0),Object(O.__decorate)([Ks()],t.prototype,"historyManager",void 0),Object(O.__decorate)([Ks()],t.prototype,"nodeTemplate",void 0),Object(O.__decorate)([Ks()],t.prototype,"annotationTemplate",void 0),Object(O.__decorate)([Ks()],t.prototype,"userHandleTemplate",void 0),Object(O.__decorate)([Ks()],t.prototype,"getNodeDefaults",void 0),Object(O.__decorate)([Ks()],t.prototype,"nodeDefaults",void 0),Object(O.__decorate)([Ks()],t.prototype,"getConnectorDefaults",void 0),Object(O.__decorate)([Ks()],t.prototype,"connectorDefaults",void 0),Object(O.__decorate)([Ks()],t.prototype,"setNodeTemplate",void 0),Object(O.__decorate)([Ks()],t.prototype,"getDescription",void 0),Object(O.__decorate)([Ks()],t.prototype,"getCustomProperty",void 0),Object(O.__decorate)([Ks()],t.prototype,"getCustomTool",void 0),Object(O.__decorate)([Ks()],t.prototype,"getCustomCursor",void 0),Object(O.__decorate)([ed([],aw)],t.prototype,"customCursor",void 0),Object(O.__decorate)([Ks()],t.prototype,"updateSelection",void 0),Object(O.__decorate)([Qs({},lw)],t.prototype,"diagramSettings",void 0),Object(O.__decorate)([Qs({},uy)],t.prototype,"selectedItems",void 0),Object(O.__decorate)([Qs({},hb)],t.prototype,"scrollSettings",void 0),Object(O.__decorate)([Qs({},xb)],t.prototype,"layout",void 0),Object(O.__decorate)([Qs({},kg)],t.prototype,"commandManager",void 0),Object(O.__decorate)([nd()],t.prototype,"dataLoaded",void 0),Object(O.__decorate)([nd()],t.prototype,"dragEnter",void 0),Object(O.__decorate)([nd()],t.prototype,"dragLeave",void 0),Object(O.__decorate)([nd()],t.prototype,"dragOver",void 0),Object(O.__decorate)([nd()],t.prototype,"click",void 0),Object(O.__decorate)([nd()],t.prototype,"historyChange",void 0),Object(O.__decorate)([nd()],t.prototype,"historyStateChange",void 0),Object(O.__decorate)([nd()],t.prototype,"doubleClick",void 0),Object(O.__decorate)([nd()],t.prototype,"textEdit",void 0),Object(O.__decorate)([nd()],t.prototype,"scrollChange",void 0),Object(O.__decorate)([nd()],t.prototype,"selectionChange",void 0),Object(O.__decorate)([nd()],t.prototype,"sizeChange",void 0),Object(O.__decorate)([nd()],t.prototype,"connectionChange",void 0),Object(O.__decorate)([nd()],t.prototype,"sourcePointChange",void 0),Object(O.__decorate)([nd()],t.prototype,"targetPointChange",void 0),Object(O.__decorate)([nd()],t.prototype,"propertyChange",void 0),Object(O.__decorate)([nd()],t.prototype,"positionChange",void 0),Object(O.__decorate)([nd()],t.prototype,"keyUp",void 0),Object(O.__decorate)([nd()],t.prototype,"keyDown",void 0),Object(O.__decorate)([nd()],t.prototype,"animationComplete",void 0),Object(O.__decorate)([nd()],t.prototype,"rotateChange",void 0),Object(O.__decorate)([nd()],t.prototype,"collectionChange",void 0),Object(O.__decorate)([nd()],t.prototype,"fixedUserHandleClick",void 0),Object(O.__decorate)([nd()],t.prototype,"onUserHandleMouseDown",void 0),Object(O.__decorate)([nd()],t.prototype,"onUserHandleMouseUp",void 0),Object(O.__decorate)([nd()],t.prototype,"onUserHandleMouseEnter",void 0),Object(O.__decorate)([nd()],t.prototype,"onUserHandleMouseLeave",void 0),Object(O.__decorate)([nd()],t.prototype,"segmentCollectionChange",void 0),Object(O.__decorate)([nd()],t.prototype,"onImageLoad",void 0),Object(O.__decorate)([nd()],t.prototype,"expandStateChange",void 0),Object(O.__decorate)([nd()],t.prototype,"created",void 0),Object(O.__decorate)([nd()],t.prototype,"mouseEnter",void 0),Object(O.__decorate)([nd()],t.prototype,"mouseLeave",void 0),Object(O.__decorate)([nd()],t.prototype,"mouseOver",void 0),Object(O.__decorate)([nd()],t.prototype,"contextMenuOpen",void 0),Object(O.__decorate)([nd()],t.prototype,"contextMenuBeforeItemRender",void 0),Object(O.__decorate)([nd()],t.prototype,"contextMenuClick",void 0),Object(O.__decorate)([nd()],t.prototype,"commandExecute",void 0),Object(O.__decorate)([ed([],Qb)],t.prototype,"layers",void 0),Object(O.__decorate)([nd()],t.prototype,"drop",void 0),t}(vd),uw=function(){function e(e){this.diagram=e}return e.prototype.exportDiagram=function(e){var t,n,i,o,r="data",a=[],l=e.margin||{},s=e&&e.region?e.region:"Content";o=e&&e.mode?e.mode:"Download";var d=this.getDiagramBounds(s,e);e.bounds&&(n=!0,d.x=e.bounds.x?e.bounds.x:d.x,d.y=e.bounds.y?e.bounds.y:d.y,d.width=e.bounds.width||d.width,d.height=e.bounds.height||d.height),l={top:void 0!==l.top?l.top:25,bottom:void 0!==l.bottom?l.bottom:25,right:void 0!==l.right?l.right:25,left:void 0!==l.left?l.left:25},"PageSettings"!==s&&(d.x-=l.left,d.y-=l.top,d.width+=l.left+l.right,d.height+=l.top+l.bottom);var c=e.fileName||"diagram";if("SVG"!==e.format){if(null!==(r=this.setCanvas(e,d,l,o,n,s,c)))return r}else{t=e.format,e.bounds=d,e.margin=l;var u=i=this.diagramAsSvg(e,l);if("Data"===o)return Ka()&&"SVG"===e.format?(new XMLSerializer).serializeToString(u):i;var h=(new XMLSerializer).serializeToString(u);a.push(h)}if("Download"===o&&null!==r)for(var p=0;p<a.length;p++){var f=new Blob([a[p]],{type:"application/octet-stream"});if("msie"===Il.info.name)window.navigator.msSaveOrOpenBlob(f,c+"."+t);else{var g=Ay("a",{download:c+"."+t}),m=URL.createObjectURL(f);g.href=m;var v=document.createEvent("MouseEvents");v.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),g.dispatchEvent(v)}}return null},e.prototype.setCanvas=function(e,t,n,i,o,r,a){var l;e.bounds=t,e.region=r,this.setScaleValueforCanvas(e,t);var s,d=this.diagramAsCanvas({bounds:t,margin:n,region:r,scaleX:e.scaleX,scaleY:e.scaleY,scaleOffsetX:e.scaleOffsetX,scaleOffsetY:e.scaleOffsetY},o);return s=l="JPG"===e.format?d.toDataURL("image/jpeg"):d.toDataURL(),"Data"===i?l:(this.canvasMultiplePage(e,d,n,s,a),null)},e.prototype.canvasMultiplePage=function(e,t,n,i,o){var r=this,a=[],l=e.format||"JPG";if(e.multiplePage){if(e.pageHeight=e.pageHeight?e.pageHeight:this.diagram.pageSettings.height,e.pageWidth=e.pageWidth?e.pageWidth:this.diagram.pageSettings.width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,n=e.margin||{},e.pageOrientation&&("Landscape"===e.pageOrientation&&e.pageHeight>e.pageWidth||"Portrait"===e.pageOrientation&&e.pageWidth>e.pageHeight)){var s=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=s}e.margin={top:isNaN(n.top)?0:n.top,bottom:isNaN(n.bottom)?0:n.bottom,left:isNaN(n.left)?0:n.left,right:isNaN(n.right)?0:n.right};var d=Ay("img",{id:this.diagram.element.id+"_printImage",src:i});d.onload=function(){a=r.getMultipleImage(d,e,!0),r.exportImage(a,o,l,i)}}else this.exportImage(a=[i],o,l,i)},e.prototype.exportImage=function(e,t,n,i){for(var o=[],r=e instanceof HTMLElement?0:e.length,a=0;a<r;a++){for(var l=e[a].replace(/^data:[a-z]*;,/,"").split(","),s=atob(l[1]),d=new ArrayBuffer(s.length),c=new Uint8Array(d),u=0;u<s.length;u++)c[u]=s.charCodeAt(u);o.push(d)}for(var h=function(e){var i=new Blob([o[e]],{type:"application/octet-stream"});if("msie"===Il.info.name)window.navigator.msSaveOrOpenBlob(i,t+"."+n);else{var r=Ay("a",{download:t+"."+n}),a=URL.createObjectURL(i);r.href=a;var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout(function(){r.dispatchEvent(l)},5*(e+1))}},p=0;p<o.length;p++)h(p)},e.prototype.getObjectsBound=function(e){for(var t,n=0,i=this.diagram.nodes;n<i.length;n++){var o=i[n];o.visible&&(("SVG"===e.format||o instanceof Zc||o instanceof gf)&&("SVG"!==e.format||o instanceof gf)||(t=t?t.uniteRect(o.wrapper.outerBounds):o.wrapper.outerBounds))}for(var r=0,a=this.diagram.connectors;r<a.length;r++){var l=a[r];l.visible&&(t=t?t.uniteRect(l.wrapper.outerBounds):l.wrapper.outerBounds)}return t||new Zd(0,0,0,0)},e.prototype.getDiagramBounds=function(e,t){var n=this.getObjectsBound(t),i=n.left,o=n.top,r=n.right-n.left,a=n.bottom-n.top;"Content"!==e&&(this.diagram.pageSettings&&this.diagram.pageSettings.multiplePage?(i=n.left,o=n.top,this.diagram.pageSettings.width&&(i=Math.floor(i/this.diagram.pageSettings.width)*this.diagram.pageSettings.width,r=Math.ceil(n.right/this.diagram.pageSettings.width)*this.diagram.pageSettings.width-i),this.diagram.pageSettings.height&&(o=Math.floor(o/this.diagram.pageSettings.height)*this.diagram.pageSettings.height,a=Math.ceil(n.bottom/this.diagram.pageSettings.height)*this.diagram.pageSettings.height-o),0===n.width&&null!==this.diagram.pageSettings.width&&(r=this.diagram.pageSettings.width),0===n.height&&null!==this.diagram.pageSettings.height&&(a=this.diagram.pageSettings.height)):(this.diagram.pageSettings.width&&(i=0,r=this.diagram.pageSettings.width),this.diagram.pageSettings.height&&(o=0,a=this.diagram.pageSettings.height)));var l=new Zd;return l.x=i,l.y=o,l.width=r,l.height=a,l},e.prototype.setScaleValueforCanvas=function(e,t){e.scaleX=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||this.diagram.pageSettings.height,e.pageWidth=e.pageWidth||this.diagram.pageSettings.width;var n=e.pageOrientation||this.diagram.pageSettings.orientation;if(n||(n="Portrait"),"Portrait"===n){if(e.pageWidth>e.pageHeight){var i=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=i}}else e.pageHeight>e.pageWidth&&(i=e.pageWidth,e.pageWidth=e.pageHeight,e.pageHeight=i);e.pageWidth&&e.pageHeight&&!e.multiplePage&&(e.stretch="Meet");var o=e.pageHeight||t.height,r=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e.scaleX=r/t.width,e.scaleY=o/t.height,"Meet"===e.stretch?(e.scaleX=e.scaleY=Math.min(e.scaleX,e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e.scaleX)/2,e.scaleOffsetX=(e.pageWidth-t.width*e.scaleX)/2):"Slice"===e.stretch&&(e.scaleX=e.scaleY=Math.max(e.scaleX,e.scaleY)),t.width=r,t.height=o),t.x*=e.scaleX,t.y*=e.scaleY},e.prototype.diagramAsSvg=function(e,t){var n=this.diagram.createSvg(this.diagram.element.id+"_diagram_svg",e.bounds.width,e.bounds.height);document.body.appendChild(n);var i=Oy("g",{id:this.diagram.element.id+"_pageBackground"}),o=this.getDiagramBounds(e&&e.region?e.region:"Content",e),r=o.x,a=o.y,l=o.width,s=o.height;n.appendChild(i);var d={x:String(r),y:String(a),width:String(l),height:String(s)};Ly(i,d),this.setTransform(i,e.bounds,t);var c=document.getElementById(this.diagram.element.id+"gradient_pattern");c&&n.appendChild(c),d={x:String(r),y:String(a),width:String(l+t.left+t.right),height:String(s+t.top+t.bottom)};var u=document.getElementById(this.diagram.element.id+"_backgroundImageLayer").cloneNode(!0);Ly(u,d),n.appendChild(u),this.setTransform(u,o,t);var h=document.getElementById(this.diagram.element.id+"_backgroundLayerrect").cloneNode(!0);if(Ly(h,d),n.appendChild(h),this.setTransform(h,o,t),"SVG"===this.diagram.mode){var p=void 0,f=void 0,g=my(this.diagram.element.id);for(n.appendChild(g.getElementById(this.diagram.diagramLayer.id).cloneNode(!0)),f=0;f<n.childNodes.length;f++)(p=n.childNodes[f]).id===this.diagram.element.id+"_diagramLayer"&&this.setTransform(p,o,t)}else{i=Oy("g",{id:this.diagram.element.id+"_diagramLayer"}),n.appendChild(i),this.setTransform(i,e.bounds,t);var m=new sb("",null,!0),v=Dy(this.diagram.element.id);this.diagram.renderDiagramElements(n,m,v,!1)}return document.body.removeChild(n),n},e.prototype.setTransform=function(e,t,n){e.setAttribute("transform","translate("+(-t.x+n.left)+", "+(-t.y+n.top)+")")},e.prototype.diagramAsCanvas=function(e,t){var n=e.bounds,i=e.margin,o=e&&e.region?e.region:"Content",r=this.getDiagramBounds(o,e),a=this.diagram.pageSettings.background.color,l=ab.createCanvas(this.diagram.element.id+"_diagram",e.bounds.width,e.bounds.height),s=l.getContext("2d");s.translate(-n.x,-n.y),s.save(),s.fillStyle="transparent"===this.diagram.pageSettings.background.color?"white":this.diagram.pageSettings.background.color,s.fillRect((n="Content"===o?r:n).x,n.y,n.width,n.height);var d=this.diagram.pageSettings.background;if(d&&d.source){r=this.getDiagramBounds(o,e);var c=new Image;c.src=d.source;var u=r.width/c.width,h=r.height/c.height,p=r.x,f=r.y,g=r.width,m=r.height,v=this.isImageExportable(d);if("None"!==d.scale&&"None"!==d.align){var y="Meet"===d.scale?Math.min(u,h):Math.max(u,h);g=y*c.width,m=y*c.height,d.align.indexOf("xmid")>-1?p+=(r.width-g)/2:d.align.indexOf("xmax")>-1&&(p=p+r.width-g),d.align.indexOf("ymid")>-1?f+=(r.height-m)/2:d.align.indexOf("ymax")>-1&&(f=f+r.height-m),"none"!==this.diagram.pageSettings.background.color&&"transparent"!==this.diagram.pageSettings.background.color||(s.fillStyle="white",s.fillRect(r.x*e.scaleX,r.y*e.scaleY,r.width*e.scaleX,r.height*e.scaleY)),v&&s.drawImage(c,p,f,y*c.width,y*c.height)}else v&&s.drawImage(c,p,f,r.width,r.height)}else s.fillStyle="transparent"===a?"white":a,s.fillRect(r.x*e.scaleX-i.left,r.y*e.scaleY-i.top,r.width*e.scaleX+i.left+i.right,e.scaleY*r.height+i.top+i.bottom);var b=this.diagram.pageSettings.background.color,w=this.diagram.pageSettings.width;w&&(s.strokeStyle="none"===b?"transparent":b,s.lineWidth=w,s.strokeRect(r.x*e.scaleX,r.y*e.scaleY,r.width*e.scaleX,r.height*e.scaleY)),s.restore();var C=Dy(this.diagram.element.id),x=new sb("",null,!1);return this.updateObjectValue(e.scaleX,e.scaleOffsetX,e.scaleOffsetY,!0),this.diagram.renderDiagramElements(l,x,C,!1,!0),this.updateObjectValue(e.scaleX,e.scaleOffsetX,e.scaleOffsetY,!1),l},e.prototype.updateWrapper=function(e,t,n,i,o){if(e&&e.length>0)for(var r=0;r<e.length;r++)e[r].children&&this.updateWrapper(e[r].children,t,n,i,o),e[r].exportScaleValue.x=t,e[r].exportScaleValue.y=t,e[r].exportScaleOffset.x=n,e[r].exportScaleOffset.y=i,e[r].isExport=o},e.prototype.updateObjectValue=function(e,t,n,i){for(var o,r=0;r<this.diagram.nodes.length;r++)this.updateWrapper((o=this.diagram.nodes[r].wrapper).children,e,t,n,i),o.exportScaleValue.x=e,o.exportScaleValue.y=e,o.exportScaleOffset.x=t,o.exportScaleOffset.y=n,o.isExport=i;for(var a=0;a<this.diagram.connectors.length;a++){o=this.diagram.connectors[a].wrapper;for(var l=0;l<o.children.length;l++)o.children[l].isExport=i,i&&(o.children[l].exportScaleValue.x=e,o.children[l].exportScaleValue.y=e,o.children[l].exportScaleOffset.x=t,o.children[l].exportScaleOffset.y=n)}},e.prototype.isImageExportable=function(e){var t,n=!0;if(e.source)try{var i=(t=ab.createCanvas(this.diagram.element.id+"temp_canvas",100,100)).getContext("2d");i.save();var o=new Image;o.src=e.source,i.drawImage(o,0,0,100,100),i.restore(),t.toDataURL()}catch(e){n=!1}return n},e.prototype.getPrintCanvasStyle=function(e,t){var n=0,i=0,o=new Bd;if(n=e.width,i=e.height,(t.pageHeight||t.pageWidth)&&(i=t.pageHeight?t.pageHeight:i,n=t.pageWidth?t.pageWidth:n),t.pageOrientation&&("Landscape"===t.pageOrientation&&i>n||"Portrait"===t.pageOrientation&&n>i)){var r=n;n=i,i=r}return o.height=i,o.width=n,o},e.prototype.getMultipleImage=function(e,t,n){var i,o,r=[],a=Ay("div",{}),l=this.getPrintCanvasStyle(e,t),s=t.margin,d=s.left,c=s.top,u=s.right,h=s.bottom,p=0;i=l.width+p,o=l.height+0;var f=0,g=0;if(t&&t.multiplePage){a.style.height="auto",a.style.width="auto";var m=e.height,v=e.width,y=0,b=0,w=void 0,C=0,x=0,S=void 0,T=void 0;do{do{C=l.width,x=l.height,f+l.width>=v&&(C=v-f),g+l.height>=m&&(x=m-g),(S=(T=ab.createCanvas(this.diagram.element.id+"_multiplePrint",l.width,l.height)).getContext("2d")).drawImage(e,p+f+d,0+g+c,C-u-d,x-h-c,0+d,0+c,C-u-d,x-h-c),f+l.width>=v&&(f-=f-v),w=T.toDataURL(),S.restore(),f+=i,n?r.push(w):this.printImage(a,w,y+""+b,i+"px;",o+"px;"),y++}while(f<v);b++,y=p=f=0,g+l.height>=m&&(g-=g-m),g+=o}while(g<m)}else{var E,_,k=this.getPrintCanvasStyle(e,t);S=void 0,T=void 0,w=void 0,(S=(T=ab.createCanvas(this.diagram.element.id+"_diagram",E=k.width,_=k.height)).getContext("2d")).drawImage(e,0+d,0+c,e.width-(u+d),e.height-(c+h),0+d,0+c,E-(u+d),_-(c+h)),w=T.toDataURL(),S.restore(),n?r.push(w):this.printImage(a,w,0)}return n?r:a},e.prototype.printImage=function(e,t,n,i,o){var r={class:"e-diagram-print-page",style:"width:"+i+"height:"+o},a=Ay("img",r),l=Ay("div",r);By(a,r={id:this.diagram.element.id+"_multiplePrint_img"+n,style:"float:left",src:t}),l.appendChild(a),e.appendChild(l)},e.prototype.print=function(e){e.mode="Data";var t=this.exportDiagram(e);this.printImages(t,e)},e.prototype.printImages=function(e,t){var n=this,i={id:this.diagram.element.id+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var o=Ay("img",i);o.onload=function(){var e=n.getMultipleImage(o,t),i=window.open("");null!=i&&e instanceof HTMLElement&&(i.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),i.document.write('<BODY onload="setTimeout(function(){window.print();}, 100)">'),i.document.write("<center>"+e.innerHTML+"</center>"),i.document.close())}},e.prototype.getDiagramContent=function(e){var t,n,i=document.getElementById(this.diagram.element.id+"content"),o=i.scrollLeft,r=i.scrollTop,a=this.diagram.scrollSettings.currentZoom,l=this.diagram.scroller.horizontalOffset,s=this.diagram.scroller.verticalOffset,d=Number(String(this.diagram.width).split("%")[0])?i.clientWidth:Number(String(this.diagram.width).split("px")[0]),c=Number(String(this.diagram.height).split("%")[0])?i.clientHeight:Number(String(this.diagram.height).split("px")[0]),u=this.getDiagramBounds("",{});this.diagram.scroller.zoom(1/a),this.diagram.scroller.transform={tx:-(t=u.x),ty:-(n=u.y),scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=-t,this.diagram.scroller.verticalOffset=-n,this.diagram.scroller.setSize(),this.diagram.setSize(u.width,u.height);var h=this.diagram.snapSettings.constraints;this.diagram.snapSettings.constraints=this.diagram.snapSettings.constraints&~xc.ShowLines,this.diagram.dataBind(),this.diagram.clearSelection(),e=e||document.styleSheets;for(var p="",f=0;f<e.length;f++)(e[f].href||"string"==typeof e[f])&&(p+="<link href='"+(e[f].href||e[f])+"' rel='stylesheet' />");var g=document.getElementById(this.diagram.element.id+"content").innerHTML;return g=(g=p+"<body style=\"margin: 0px; padding: 0px\"><div style='margin-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;'>"+g+"</div></body>").replace(/ transform: t/g," -webkit-transform: t"),this.diagram.setSize(d,c),this.diagram.scroller.zoom(a/this.diagram.scrollSettings.currentZoom),this.diagram.snapSettings.constraints=h,this.diagram.dataBind(),o||r?this.diagram.setOffset(o,r):(this.diagram.scroller.transform={tx:l/this.diagram.scroller.currentZoom,ty:s/this.diagram.scroller.currentZoom,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=l,this.diagram.scroller.verticalOffset=s),this.diagram.renderSelector(!1),Sv()?g.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):g},e.prototype.exportImages=function(e,t){var n=this,i=t&&t.region?t.region:"Content",o=t.margin||{};o={top:isNaN(o.top)?0:o.top,bottom:isNaN(o.bottom)?0:o.bottom,left:isNaN(o.left)?0:o.left,right:isNaN(o.right)?0:o.right};var r=this.getDiagramBounds(i,{});t.bounds&&(r.x=isNaN(t.bounds.x)?r.x:t.bounds.x,r.y=isNaN(t.bounds.y)?r.y:t.bounds.y,r.width=t.bounds.width||r.width,r.height=t.bounds.height||r.height);var a=document.createElement("img");By(a,{src:e});var l=this;a.onload=function(){var i=ab.createCanvas(l.diagram.element.id+"innerImage",r.width+(o.left+o.right),r.height+(o.top+o.bottom)),s=i.getContext("2d");s.fillStyle=l.diagram.pageSettings.background.color,s.fillRect(0,0,r.width+(o.left+o.right),r.height+(o.top+o.bottom)),s.drawImage(a,0,0,r.width,r.height,o.left,o.top,r.width,r.height),e=i.toDataURL(),t.printOptions?l.printImages(e,t):(s.restore(),n.canvasMultiplePage(t,i,o,e,t.fileName||"diagram"))}},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"PrintandExport"},e}(),hw=function(){function e(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,n,i){return(e=e||this.dataManager)?e.executeQuery(this,t,n,i):fw.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):fw.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return this.params.push("function"==typeof t?{key:e,fn:t}:{key:e,value:t}),this},e.prototype.distinct=function(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.expand=function(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,n,i,o){t=t?t.toLowerCase():null;var r=null;return"string"==typeof e?r=new pw(e,t,n,i,o):e instanceof pw&&(r=e),this.queries.push({fn:"onWhere",e:r}),this},e.prototype.search=function(e,t,n,i,o){return"string"==typeof t&&(t=[t]),n&&"none"!==n||(n="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:n,searchKey:e,ignoreCase:i,ignoreAccent:o,comparer:fw.fnOperators[n]}}),this},e.prototype.sortBy=function(e,t,n){return this.sortByForeignKey(e,t,n)},e.prototype.sortByForeignKey=function(t,n,i,o){var r,a,l=Va(o)?"ascending":o;if("string"==typeof t&&fw.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),n="descending"),n&&"string"!=typeof n||(l=n?n.toLowerCase():"ascending",n=fw.fnSort(n)),i){r=e.filterQueries(this.queries,"onSortBy");for(var s=0;s<r.length;s++)if("string"==typeof(a=r[s].e.fieldName)){if(a===t)return this}else if(a instanceof Array)for(var d=0;d<a.length;d++)if(a[d]===t||t.toLowerCase()===a[d]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:n,direction:l}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e,t,n){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:n||null}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.isCountRequired=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter(function(e){return e.fn===t})},e.filterQueryLists=function(e,t){for(var n=e.filter(function(e){return-1!==t.indexOf(e.fn)}),i={},o=0;o<n.length;o++)i[n[o].fn]||(i[n[o].fn]=n[o].e);return i},e}(),pw=function(){function e(t,n,i,o,r){return void 0===o&&(o=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=n.toLowerCase(),this.value=i,this.ignoreCase=o,this.ignoreAccent=r,this.isComplex=!1,this.comparer=fw.fnOperators.processOperator(this.operator)):(t instanceof e&&i instanceof e||i instanceof Array)&&(this.isComplex=!0,this.condition=n.toLowerCase(),this.predicates=[t],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return e.and=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,n,i,o,r){return e.combine(this,t,n,i,"and",o,r)},e.or=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,n,i,o,r){return e.combine(this,t,n,i,"or",o,r)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],n=0,i=e.length;n<i;n++)t.push(this.fromJSONData(e[n]));return t}return this.fromJSONData(e)},e.prototype.validate=function(e){var t,n,i=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,fw.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var o=0;o<i.length;o++)if(n=i[o].validate(e),t){if(!n)return!1}else if(n)return!0;return t},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var n=0;n<t.length;n++)e.push(t[n].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}},e.combinePredicates=function(t,n){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],n,t.slice(1))},e.combine=function(t,n,i,o,r,a,l){return n instanceof e?e[r](t,n):"string"==typeof n?e[r](t,new e(n,i,o,a,l)):fw.throwError("Predicate - "+r+" : invalid arguments")},e.fromJSONData=function(t){for(var n=t.predicates||[],i=n.length,o=[],r=0;r<i;r++)o.push(this.fromJSONData(n[r]));return t.isComplex?new e(o[0],t.condition,o.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},e}(),fw=function(){function e(){}return e.getValue=function(e,t){return"function"==typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.fnSort=function(t){return"ascending"===(t=t?e.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return Va(e)&&Va(t)?-1:null===t||void 0===t?-1:"string"==typeof e?e.localeCompare(t):null===e||void 0===e?1:e-t},e.fnDescending=function(e,t){return Va(e)&&Va(t)?-1:null===t||void 0===t?1:"string"==typeof e?-1*e.localeCompare(t):null===e||void 0===e?-1:t-e},e.extractFields=function(e,t){for(var n={},i=0;i<t.length;i++)n=this.setValue(t[i],this.getObject(t[i],e),n);return n},e.select=function(e,t){for(var n=[],i=0;i<e.length;i++)n.push(this.extractFields(e[i],t));return n},e.group=function(t,n,i,o,r,a,l){o=o||1;var s=t;if("{271bbba0-1ee7}"===s.GroupGuid){for(var d=function(e){if(Va(r))s[e].items=c.group(s[e].items,n,i,s.level+1,null,a,l),s[e].count=s[e].items.length;else{var t,o=r.filter(function(t){return t.key===s[e].key});t=r.indexOf(o[0]),s[e].items=c.group(s[e].items,n,i,s.level+1,r[t].items,a,l),s[e].count=r[t].count}},c=this,u=0;u<s.length;u++)d(u);return s.childLevels+=1,s}var h={},p=[];p.GroupGuid="{271bbba0-1ee7}",p.level=o,p.childLevels=0,p.records=s;for(var f=function(e){var t=g.getVal(s,e,n);if(Va(a)||(t=a(t,n)),!h[t]&&(h[t]={key:t,count:0,items:[],aggregates:{},field:n},p.push(h[t]),!Va(r))){var o=r.filter(function(e){return e.key===h[t].key});h[t].count=o[0].count}h[t].count=Va(r)?h[t].count+=1:h[t].count,(!l||l&&i.length)&&h[t].items.push(s[e])},g=this,m=0;m<s.length;m++)f(m);if(i&&i.length){var v=function(t){for(var n={},o=void 0,a=i,l=0;l<i.length;l++)if(o=e.aggregates[i[l].type],Va(r))o&&(n[a[l].field+" - "+a[l].type]=o(p[t].items,a[l].field));else{var s=r.filter(function(e){return e.key===p[t].key});o&&(n[a[l].field+" - "+a[l].type]=o(s[0].items,a[l].field))}p[t].aggregates=n};for(m=0;m<p.length;m++)v(m)}if(l&&p.length&&i.length)for(m=0;m<p.length;m++)p[m].items=[];return s.length&&p||s},e.buildHierarchy=function(e,t,n,i,o){var r,a={};for(i.result&&(i=i.result),i.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),r=0;r<i.length;r++)(a[l=this.getObject(e,i[r])]||(a[l]=[])).push(i[r]);for(r=0;r<n.length;r++){var l=this.getObject(o||e,n[r]);n[r][t]=a[l]}},e.getFieldList=function(e,t,n){if(void 0===n&&(n=""),void 0===t||null===t)return this.getFieldList(e,[],n);for(var i=e,o=0,r=Object.keys(e);o<r.length;o++){var a=r[o];"object"!=typeof i[a]||i[a]instanceof Array?t.push(n+a):this.getFieldList(i[a],t,n+a+".")}return t},e.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf("."))return t[e];for(var n=t,i=e.split("."),o=0;o<i.length&&null!=n;o++)n=n[i[o]];return n}},e.setValue=function(e,t,n){var i,o,r=e.toString().split("."),a=n||{},l=a,s=r.length;for(i=0;i<s;i++)o=r[i],i+1===s?l[o]=void 0===t?void 0:t:Va(l[o])&&(l[o]={}),l=l[o];return a},e.sort=function(e,t,n){if(e.length<=1)return e;var i=parseInt((e.length/2).toString(),10),o=e.slice(0,i),r=e.slice(i);return o=this.sort(o,t,n),r=this.sort(r,t,n),this.merge(o,r,t,n)},e.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map(function(t){return t in e.diacritics?e.diacritics[t]:t}).join("")},e.merge=function(e,t,n,i){for(var o,r=[];e.length>0||t.length>0;)o=e.length>0&&t.length>0?i?i(this.getVal(e,0,n),this.getVal(t,0,n),e[0],t[0])<=0?e:t:e[0][n]<e[0][n]?e:t:e.length>0?e:t,r.push(o.shift());return r},e.getVal=function(e,t,n){return n?this.getObject(n,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"==typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,n,i){if(t in e){var o=e[t](n,i);Va(o)||(n=o)}return n},e.getAddParams=function(t,n,i){var o={};return e.callAdaptorFunction(t,"addParams",{dm:n,query:i,params:i.params,reqParams:o}),o},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(e){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,n){if("crypto"in window&&"getRandomValues"in crypto){var i=new Uint8Array(1);window.crypto.getRandomValues(i),t=i[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===n?3&t|8:t]})},e.isNull=function(e){return void 0===e||null===e},e.getItemFromComparer=function(t,n,i){var o,r,a,l=0,s="string"==typeof e.getVal(t,0,n);if(t.length)for(;Va(o)&&l<t.length;)o=e.getVal(t,l,n),a=t[l++];for(;l<t.length;l++)Va(r=e.getVal(t,l,n))||(s&&(o=+o,r=+r),i(o,r)>0&&(o=r,a=t[l]));return a},e.distinct=function(t,n,i){i=!Va(i)&&i;var o,r=[],a={};return t.forEach(function(l,s){(o="object"==typeof t[s]?e.getVal(t,s,n):t[s])in a||(r.push(i?t[s]:o),a[o]=1)}),r},e.serverTimezoneOffset=null,e.timeZoneHandling=!0,e.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},e.aggregates={sum:function(t,n){for(var i,o=0,r="number"!=typeof e.getVal(t,0,n),a=0;a<t.length;a++)i=e.getVal(t,a,n),isNaN(i)||null===i||(r&&(i=+i),o+=i);return o},average:function(t,n){return e.aggregates.sum(t,n)/t.length},min:function(t,n){var i;return"function"==typeof n&&(i=n,n=null),e.getObject(n,e.getItemFromComparer(t,n,i||e.fnAscending))},max:function(t,n){var i;return"function"==typeof n&&(i=n,n=null),e.getObject(n,e.getItemFromComparer(t,n,i||e.fnDescending))},truecount:function(e,t){return new xw(e).executeLocal((new hw).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new xw(e).executeLocal((new hw).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},e.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},e.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},e.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},e.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},e.diacritics={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"},e.fnOperators={equal:function(t,n,i,o){return o&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),i?e.toLowerCase(t)===e.toLowerCase(n):t===n},notequal:function(t,n,i,o){return o&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),!e.fnOperators.equal(t,n,i)},lessthan:function(t,n,i){return i?e.toLowerCase(t)<e.toLowerCase(n):t<n},greaterthan:function(t,n,i){return i?e.toLowerCase(t)>e.toLowerCase(n):t>n},lessthanorequal:function(t,n,i){return i?e.toLowerCase(t)<=e.toLowerCase(n):t<=n},greaterthanorequal:function(t,n,i){return i?e.toLowerCase(t)>=e.toLowerCase(n):t>=n},contains:function(t,n,i,o){return o&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),i?!Va(t)&&!Va(n)&&-1!==e.toLowerCase(t).indexOf(e.toLowerCase(n)):!Va(t)&&!Va(n)&&-1!==t.toString().indexOf(n)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(t,n,i,o){return o&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),i?t&&n&&e.startsWith(e.toLowerCase(t),e.toLowerCase(n)):t&&n&&e.startsWith(t,n)},endswith:function(t,n,i,o){return o&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),i?t&&n&&e.endsWith(e.toLowerCase(t),e.toLowerCase(n)):t&&n&&e.endsWith(t,n)},processSymbols:function(t){var n=e.operatorSymbols[t];return n?e.fnOperators[n]:e.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){return e.fnOperators[t]||e.fnOperators.processSymbols(t)}},e.parse={parseJson:function(t){return"string"==typeof t?t=JSON.parse(t,e.parse.jsonReviver):t instanceof Array?e.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&e.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var n=0;n<t.length;n++)"object"==typeof t[n]&&null!==t[n]?e.parse.iterateAndReviveJson(t[n]):t[n]="string"!=typeof t[n]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[n])?e.parse.parseJson(t[n]):e.parse.jsonReviver("",t[n])},iterateAndReviveJson:function(t){for(var n,i=0,o=Object.keys(t);i<o.length;i++){var r=o[i];e.startsWith(r,"__")||("object"==typeof(n=t[r])?n instanceof Array?e.parse.iterateAndReviveArray(n):n&&e.parse.iterateAndReviveJson(n):t[r]=e.parse.jsonReviver(t[r],n))}},jsonReviver:function(t,n){if("string"==typeof n){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(n),o=e.timeZoneHandling?e.serverTimezoneOffset:null;if(i)return e.dateParse.toTimeZone(new Date(parseInt(i[1],10)),o,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(n)){var r=n.indexOf("Z")>-1||n.indexOf("z")>-1,a=n.split(/[^0-9.]/);if(r)n=e.dateParse.toTimeZone(new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),e.serverTimezoneOffset,!1);else{var l=new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),s=parseInt(a[6],10),d=parseInt(a[7],10);if(isNaN(s)&&isNaN(d))return l;n.indexOf("+")>-1?l.setHours(l.getHours()-s,l.getMinutes()-d):l.setHours(l.getHours()+s,l.getMinutes()+d),n=e.dateParse.toTimeZone(l,e.serverTimezoneOffset,!1)}null==e.serverTimezoneOffset&&(n=e.dateParse.addSelfOffset(n))}}return n},isJson:function(t){return"string"==typeof t[0]?t:e.parse.parseJson(t)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(t,n){return e.isPlainObject(t)?e.parse.jsonReplacer(t,n):t instanceof Array?e.parse.arrayReplacer(t):t instanceof Date?e.parse.jsonReplacer({val:t},n).val:t},jsonReplacer:function(t,n){for(var i,o=0,r=Object.keys(t);o<r.length;o++){var a=r[o];if((i=t[a])instanceof Date){var l=i;null==e.serverTimezoneOffset?t[a]=e.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+36e5*e.serverTimezoneOffset),t[a]=e.dateParse.toTimeZone(e.dateParse.addSelfOffset(l),null).toJSON())}}return t},arrayReplacer:function(t){for(var n=0;n<t.length;n++)e.isPlainObject(t[n])?t[n]=e.parse.jsonReplacer(t[n]):t[n]instanceof Date&&(t[n]=e.parse.jsonReplacer({date:t[n]}).date);return t},jsonDateReplacer:function(t,n){if("value"===t&&n){if("string"==typeof n){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(n);if(i)n=e.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(n)){var o=n.split(/[^0-9]/);n=e.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),null,!0)}}if(n instanceof Date)return n=e.dateParse.addSelfOffset(n),null===e.serverTimezoneOffset?e.dateParse.toTimeZone(e.dateParse.addSelfOffset(n),null).toJSON():(n=e.dateParse.toTimeZone(n,n.getTimezoneOffset()/60*2-e.serverTimezoneOffset,!1)).toJSON()}return n}},e.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(t,n,i){if(null===n)return t;var o=i?e.dateParse.toUTC(t):t;return new Date(+o-36e5*n)},toLocalTime:function(e){var t=e,n=-t.getTimezoneOffset(),i=n>=0?"+":"-",o=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+o(t.getMonth()+1)+"-"+o(t.getDate())+"T"+o(t.getHours())+":"+o(t.getMinutes())+":"+o(t.getSeconds())+i+o(n/60)+":"+o(n%60)}},e}(),gw=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,n,i){return e},e}(),mw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.processQuery=function(e,t){for(var n,i,o,r=e.dataSource.json.slice(0),a=r.length,l=!0,s={},d=0,c=[],u=0;u<t.lazyLoad.length;u++)d++,s[t.lazyLoad[u].key]=t.lazyLoad[u].value;var h={};for(u=0;u<t.queries.length;u++)"onPage"!==(i=t.queries[u]).fn&&"onGroup"!==i.fn||!t.lazyLoad.length?(n=this[i.fn].call(this,r,i.e,t),"onAggregates"===i.fn?h[i.e.field+" - "+i.e.type]=n:r=void 0!==n?n:r,"onPage"!==i.fn&&"onSkip"!==i.fn&&"onTake"!==i.fn&&"onRange"!==i.fn||(l=!1),l&&(a=r.length)):("onGroup"===i.fn&&c.push(i.e),"onPage"===i.fn&&(o=i.e));if(d){var p=this.lazyLoadGroup({query:t,lazyLoad:s,result:r,group:c,page:o});r=p.result,a=p.count}return t.isCountRequired&&(r={result:r,count:a,aggregates:h}),r},t.prototype.lazyLoadGroup=function(e){var t=0,n=this.getAggregate(e.query),i=e.result;if(Va(e.lazyLoad.onDemandGroupInfo))t=(i=fw.group(i,e.group[0].fieldName,n,null,null,e.group[0].comparer,!0)).length,a=i,e.page&&(i=this.onPage(i,e.page,e.query)),this.formGroupResult(i,a);else{for(var o=e.lazyLoad.onDemandGroupInfo,r=o.where.length-1;r>=0;r--)i=this.onWhere(i,o.where[r]);e.group.length!==o.level&&(i=fw.group(i,e.group[o.level].fieldName,n,null,null,e.group[0].comparer,!0)),t=i.length;var a=i;i=(i=i.slice(o.skip)).slice(0,o.take),e.group.length!==o.level&&this.formGroupResult(i,a)}return{result:i,count:t}},t.prototype.formGroupResult=function(e,t){return e.length&&t.length&&(e.GroupGuid=t.GroupGuid,e.childLevels=t.childLevels,e.level=t.level,e.records=t.records),e},t.prototype.getAggregate=function(e){var t=hw.filterQueries(e.queries,"onAggregates"),n=[];if(t.length)for(var i=void 0,o=0;o<t.length;o++)n.push({type:(i=t[o].e).type,field:fw.getValue(i.field,e)});return n},t.prototype.batchRequest=function(e,t,n){var i,o=t.deletedRecords.length;for(i=0;i<t.addedRecords.length;i++)this.insert(e,t.addedRecords[i]);for(i=0;i<t.changedRecords.length;i++)this.update(e,n.key,t.changedRecords[i]);for(i=0;i<o;i++)this.remove(e,n.key,t.deletedRecords[i]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter(function(e){if(t)return t.validate(e)}):e},t.prototype.onAggregates=function(e,t){var n=fw.aggregates[t.type];return e&&n&&0!==e.length?n(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&fw.getFieldList(e[0],t.fieldNames),e.filter(function(e){for(var n=0;n<t.fieldNames.length;n++)if(t.comparer.call(e,fw.getObject(t.fieldNames[n],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,t,n){if(!e||!e.length)return e;var i,o=fw.getValue(t.fieldName,n);if(!o)return e.sort(t.comparer);if(o instanceof Array){for(var r=(o=o.slice(0)).length-1;r>=0;r--)o[r]&&(i=t.comparer,fw.endsWith(o[r]," desc")&&(i=fw.fnSort("descending"),o[r]=o[r].replace(" desc","")),e=fw.sort(e,o[r],i));return e}return fw.sort(e,o,t.comparer)},t.prototype.onGroup=function(e,t,n){if(!e||!e.length)return e;var i=this.getAggregate(n);return fw.group(e,fw.getValue(t.fieldName,n),i,null,null,t.comparer)},t.prototype.onPage=function(e,t,n){var i=fw.getValue(t.pageSize,n),o=(fw.getValue(t.pageIndex,n)-1)*i;return e&&e.length?e.slice(o,o+i):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(fw.getValue(t.start),fw.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,fw.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(fw.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?fw.select(e,fw.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t,n,i,o){return Va(o)?e.dataSource.json.push(t):e.dataSource.json.splice(o,0,t)},t.prototype.remove=function(e,t,n,i){var o,r=e.dataSource.json;for("object"!=typeof n||n instanceof Date||(n=fw.getObject(t,n)),o=0;o<r.length&&fw.getObject(t,r[o])!==n;o++);return o!==r.length?r.splice(o,1):null},t.prototype.update=function(e,t,n,i){var o,r,a=e.dataSource.json;for(Va(t)||(r=za(t,n)),o=0;o<a.length&&(Va(t)||za(t,a[o])!==r);o++);return o<a.length?Ga(a[o],n):null},t}(gw),vw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),t.prototype.processQuery=function(e,t,n){var i,o,r=this.getQueryRequest(t),a=hw.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),l=t.params,s=e.dataSource.url,d=null,c=this.options,u={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in a?o=((o=fw.getValue((i=a.onPage).pageIndex,t))-1)*(d=fw.getValue(i.pageSize,t)):"onRange"in a&&(o=(i=a.onRange).start,d=i.end-i.start);for(var h=0;h<r.sorts.length;h++)i=fw.getValue(r.sorts[h].e.fieldName,t),u.sorts.push(fw.callAdaptorFunction(this,"onEachSort",{name:i,direction:r.sorts[h].e.direction},t));for(n&&(i=this.getFiltersFrom(n,t))&&u.filters.push(fw.callAdaptorFunction(this,"onEachWhere",i.toJson(),t)),h=0;h<r.filters.length;h++){u.filters.push(fw.callAdaptorFunction(this,"onEachWhere",r.filters[h].e.toJson(),t));for(var p=0,f="object"==typeof u.filters[h]?Object.keys(u.filters[h]):[];p<f.length;p++)fw.isNull(u[y=f[p]])&&delete u[y]}for(h=0;h<r.searches.length;h++)u.searches.push(fw.callAdaptorFunction(this,"onEachSearch",{fields:(i=r.searches[h].e).fieldNames,operator:i.operator,key:i.searchKey,ignoreCase:i.ignoreCase},t));for(h=0;h<r.groups.length;h++)u.groups.push(fw.getValue(r.groups[h].e.fieldName,t));for(h=0;h<r.aggregates.length;h++)u.aggregates.push({type:(i=r.aggregates[h].e).type,field:fw.getValue(i.field,t)});var g={};if(this.getRequestQuery(c,t,a,u,g),fw.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:l,reqParams:g}),t.lazyLoad.length)for(h=0;h<t.lazyLoad.length;h++)g[t.lazyLoad[h].key]=t.lazyLoad[h].value;for(var m=0,v=Object.keys(g);m<v.length;m++){var y;(fw.isNull(g[y=v[m]])||""===g[y]||0===g[y].length)&&delete g[y]}c.skip in g&&c.take in g||null===d||(g[c.skip]=fw.callAdaptorFunction(this,"onSkip",o,t),g[c.take]=fw.callAdaptorFunction(this,"onTake",d,t));var b=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(g,fw.parse.jsonDateReplacer),url:s,pvtData:b,type:"POST",contentType:"application/json; charset=utf-8"}:(i=this.convertToQueryString(g,t,e),{type:"GET",url:(i=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+i).length?s.replace(/\/*$/,i):s,pvtData:b})},t.prototype.getRequestQuery=function(e,t,n,i,o){var r=o;r[e.from]=t.fromTable,e.apply&&t.distincts.length&&(r[e.apply]="onDistinct"in this?fw.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(r[e.expand]="onExpand"in this&&"onSelect"in n?fw.callAdaptorFunction(this,"onExpand",{selects:fw.getValue(n.onSelect.fieldNames,t),expands:t.expands},t):t.expands),r[e.select]="onSelect"in n&&!t.distincts.length?fw.callAdaptorFunction(this,"onSelect",fw.getValue(n.onSelect.fieldNames,t),t):"",r[e.count]=t.isCountRequired?fw.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",r[e.search]=i.searches.length?fw.callAdaptorFunction(this,"onSearch",i.searches,t):"",r[e.skip]="onSkip"in n?fw.callAdaptorFunction(this,"onSkip",fw.getValue(n.onSkip.nos,t),t):"",r[e.take]="onTake"in n?fw.callAdaptorFunction(this,"onTake",fw.getValue(n.onTake.nos,t),t):"",r[e.where]=i.filters.length||i.searches.length?fw.callAdaptorFunction(this,"onWhere",i.filters,t):"",r[e.sortBy]=i.sorts.length?fw.callAdaptorFunction(this,"onSortBy",i.sorts,t):"",r[e.group]=i.groups.length?fw.callAdaptorFunction(this,"onGroup",i.groups,t):"",r[e.aggregates]=i.aggregates.length?fw.callAdaptorFunction(this,"onAggregates",i.aggregates,t):"",r.param=[]},t.prototype.convertToQueryString=function(e,t,n){return""},t.prototype.processResponse=function(e,t,n,i,o,r){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("application/json")){var a=fw.timeZoneHandling;t&&!t.timeZoneHandling&&(fw.timeZoneHandling=!1),e=fw.parse.parseJson(e),fw.timeZoneHandling=a}var l=o,s=l.pvtData||{},d=e?e.groupDs:[];if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return n.isCountRequired?{result:[],count:0}:[];var c=JSON.parse(l.data);if(c&&"batch"===c.action&&e&&e.addedRecords)return r.addedRecords=e.addedRecords,r;e&&e.d&&(e=e.d);var u={};e&&"count"in e&&(u.count=e.count),u.result=e&&e.result?e.result:e;var h=!1;if(Array.isArray(e.result)&&e.result.length&&(Va(e.result[0].key)||(u.result=this.formRemoteGroupedData(u.result,1,s.groups.length-1)),n&&n.lazyLoad.length&&s.groups.length))for(var p=0;p<n.lazyLoad.length;p++)"onDemandGroupInfo"===n.lazyLoad[p].key&&s.groups.length===n.lazyLoad[p].value.level&&(h=!0);return h||this.getAggregateResult(s,e,u,d,n),fw.isNull(u.count)?u.result:{result:u.result,count:u.count,aggregates:u.aggregates}},t.prototype.formRemoteGroupedData=function(e,t,n){for(var i=0;i<e.length;i++)e[i].items.length&&Object.keys(e[i].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[i].items,t+1,n-1);return e.GroupGuid="{271bbba0-1ee7}",e.level=t,e.childLevels=n,e.records=e[0].items.length?this.getGroupedRecords(e,!Va(e[0].items.records)):[],e},t.prototype.getGroupedRecords=function(e,t){for(var n=[],i=0;i<e.length;i++)if(t)n=n.concat(e[i].items.records);else for(var o=0;o<e[i].items.length;o++)n.push(e[i].items[o]);return n},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,n,i,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(qa({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:n[void 0],key:n[void 0]},fw.getAddParams(this,e,i)))}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,n,i){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(qa({},{value:t,table:n,action:"insert"},fw.getAddParams(this,e,i)))}},t.prototype.remove=function(e,t,n,i,o){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(qa({},{key:n,keyColumn:t,table:i,action:"remove"},fw.getAddParams(this,e,o)))}},t.prototype.update=function(e,t,n,i,o){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(qa({},{value:n,action:"update",keyColumn:t,key:fw.getObject(t,n),table:i},fw.getAddParams(this,e,o)))}},t.prototype.getFiltersFrom=function(e,t){var n,i=t.fKey,o=i,r=t.key,a=[];"object"!=typeof e[0]&&(o=null);for(var l=0;l<e.length;l++)n="object"==typeof e[0]?fw.getObject(r||o,e[l]):e[l],a.push(new pw(i,"equal",n));return pw.or(a)},t.prototype.getAggregateResult=function(e,t,n,i,o){var r=t;if(t&&t.result&&(r=t.result),e&&e.aggregates&&e.aggregates.length){var a=e.aggregates,l=void 0,s=r,d={};t.aggregate&&(s=t.aggregate);for(var c=0;c<a.length;c++)(l=fw.aggregates[a[c].type])&&(d[a[c].field+" - "+a[c].type]=l(s,a[c].field));n.aggregates=d}var u=Array.isArray(t.result)&&t.result.length&&!Va(t.result[0].key);if(e&&e.groups&&e.groups.length&&!u){var h=e.groups;for(c=0;c<h.length;c++){Va(i)||(i=fw.group(i,h[c]));var p=hw.filterQueries(o.queries,"onGroup")[c].e;r=fw.group(r,h[c],e.aggregates,null,i,p.comparer)}n.result=r}return n},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=hw.filterQueries(e.queries,"onSortBy"),t.groups=hw.filterQueries(e.queries,"onGroup"),t.filters=hw.filterQueries(e.queries,"onWhere"),t.searches=hw.filterQueries(e.queries,"onSearch"),t.aggregates=hw.filterQueries(e.queries,"onAggregates"),t},t.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var n=0,i=e.params;n<i.length;n++){var o=i[n];if(t[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[o.key]=o.value,o.fn&&(t[o.key]=o.fn.call(e.query,o.key,e.query,e.dm)),t.params[o.key]=t[o.key]}},t}(gw),yw=function(e){function t(t){var n=e.call(this)||this;return n.options=qa({},n.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),qa(n.options,t||{}),n}return Object(O.__extends)(t,e),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,n,i){var o,r,a="",l=e.value,s=typeof l,d=e.field?t.getField(e.field):null;if(l instanceof Date&&(l="datetime'"+fw.parse.replacer(l)+"'"),"string"===s&&(l="'"+(l=encodeURIComponent(l))+"'",i&&(d="cast("+d+", 'Edm.String')"),fw.parse.isGuid(l)&&(r="guid"),e.ignoreCase&&(r||(d="tolower("+d+")"),l=l.toLowerCase())),o=fw.odBiOperator[e.operator])return a+=d,a+=o,r&&(a+=r),a+l;if("substringof"===(o=Va(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?fw.odUniOperator[e.operator]:fw.odv4UniOperator[e.operator])){var c=l;l=d,d=c}return a+=o+"(",a+=d+",",r&&(a+=r),a+(l+")")},t.prototype.addParams=function(t){e.prototype.addParams.call(this,t),delete t.reqParams.params},t.prototype.onComplexPredicate=function(e,t,n){for(var i=[],o=0;o<e.predicates.length;o++)i.push("("+this.onEachWhere(e.predicates[o],t,n)+")");return i.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,n){return e.isComplex?this.onComplexPredicate(e,t,n):this.onPredicate(e,t,n)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&fw.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],n=0;n<e.fields.length;n++)t.push(new pw(e.fields[n],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=pw.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var n=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)n.push(t.getField(e.name[i])+("descending"===e.direction?" desc":""));else n.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return n.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var n=0;n<e.length;n++)e[n]=t.getField(e[n]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,n){fw.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,n,i,o,r){if(o&&"GET"===o.type&&!this.rootUrl&&e["odata.metadata"]){var a=e["odata.metadata"].split("/$metadata#");this.rootUrl=a[0],this.resourceTableName=a[1]}if(!Va(e.d)){var l=n&&n.isCountRequired?e.d.results:e.d;if(!Va(l))for(var s=0;s<l.length;s++)Va(l[s].__metadata)||delete l[s].__metadata}var d=o&&o.pvtData,c=this.processBatchResponse(e,n,i,o,r);if(c)return c;var u=i&&o.getResponseHeader("DataServiceVersion"),h=null,p=u&&parseInt(u,10)||2;n&&n.isCountRequired&&((e.__count||e["odata.count"])&&(h=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(h=e.__count||e["odata.count"])),3===p&&e.value&&(e=e.value),e.d&&(e=e.d),p<3&&e.results&&(e=e.results);var f={};return f.count=h,f.result=e,this.getAggregateResult(d,e,f,null,n),fw.isNull(h)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},t.prototype.convertToQueryString=function(e,t,n){var i=[],o=e.table||"";delete e.table,n.dataSource.requiresFormat&&(e.$format="json");for(var r=0,a=Object.keys(e);r<a.length;r++){var l=a[r];i.push(l+"="+e[l])}return i=i.join("&"),n.dataSource.url&&-1!==n.dataSource.url.indexOf("?")&&!o?i:i.length?o+"?"+i:o||""},t.prototype.localTimeReplacer=function(e,t){for(var n=0,i=Va(t)?[]:Object.keys(t);n<i.length;n++){var o=i[n];t[o]instanceof Date&&(t[o]=fw.dateParse.toLocalTime(t[o]))}return t},t.prototype.insert=function(e,t,n){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,t,n,i){var o;return o="string"!=typeof n||fw.parse.isGuid(n)?"("+n+")":"('"+n+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:"")+o}},t.prototype.update=function(e,t,n,i,o,r){var a;return"PATCH"!==this.options.updateType||Va(r)||(n=this.compareAndRemove(n,r,t)),a="string"!=typeof n[t]||fw.parse.isGuid(n[t])?"("+n[t]+")":"('"+n[t]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:"")+a,data:JSON.stringify(n,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,n,i,o){var r=n.guid=fw.getGuid(this.options.batchPre),a=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);n.url=this.resourceTableName?this.resourceTableName:n.url;var l={url:n.url,key:n.key,cid:1,cSet:fw.getGuid(this.options.changeSet)},s="--"+r+"\n";return s+="Content-Type: multipart/mixed; boundary="+l.cSet.replace("--","")+"\n",this.pvt.changeSet=0,s+=this.generateInsertRequest(t.addedRecords,l,e),s+=this.generateUpdateRequest(t.changedRecords,l,e,o?o.changedRecords:[]),s+=this.generateDeleteRequest(t.deletedRecords,l,e),s+=l.cSet+"--\n",{type:"POST",url:a,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+r,data:s+="--"+r+"--"}},t.prototype.generateDeleteRequest=function(e,t,n){return e?this.generateBodyContent(e,t,{method:"DELETE ",url:function(e,t,n){var i=fw.getObject(n,e[t]);return"number"==typeof i||fw.parse.isGuid(i)?"("+i+")":i instanceof Date?"("+e[t][n].toJSON()+")":"('"+i+"')"},data:function(e,t){return""}},n)+"\n":""},t.prototype.generateInsertRequest=function(e,t,n){return e?this.generateBodyContent(e,t,{method:"POST ",url:function(e,t,n){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}},n):""},t.prototype.generateUpdateRequest=function(e,t,n,i){var o=this;return e?(e.forEach(function(e){return e=o.compareAndRemove(e,i.filter(function(n){return fw.getObject(t.key,n)===fw.getObject(t.key,e)})[0],t.key)}),this.generateBodyContent(e,t,{method:this.options.updateType+" ",url:function(e,t,n){return"number"==typeof e[t][n]||fw.parse.isGuid(e[t][n])?"("+e[t][n]+")":e[t][n]instanceof Date?"("+e[t][n].toJSON()+")":"('"+e[t][n]+"')"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}},n)):""},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,n,i){for(var o="",r=0;r<e.length;r++)o+="\n"+t.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=n.method,"POST "===n.method?o+=(i.dataSource.insertUrl||i.dataSource.crudUrl||t.url)+n.url(e,r,t.key)+" HTTP/1.1\n":"PUT "===n.method||"PATCH "===n.method?o+=(i.dataSource.updateUrl||i.dataSource.crudUrl||t.url)+n.url(e,r,t.key)+" HTTP/1.1\n":"DELETE "===n.method&&(o+=(i.dataSource.removeUrl||i.dataSource.crudUrl||t.url)+n.url(e,r,t.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",Va(e[r]["@odata.etag"])?o+="\n":(o+="If-Match: "+e[r]["@odata.etag"]+"\n\n",delete e[r]["@odata.etag"]),o+=n.data(e,r);return o},t.prototype.processBatchResponse=function(e,t,n,i,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(i&&this.options.batch&&fw.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()){var r=n.getResponseHeader("Content-Type"),a=void 0,l=void 0,s=e+"";if(r=r.substring(r.indexOf("=batchresponse")+1),(s=s.split(r)).length<2)return{};var d=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(s=s[1]);d&&s.replace(d[0],"");for(var c=(s=s.split(d?d[1]:"")).length;c>-1;c--)/\bContent-ID:/i.test(s[c])&&/\bHTTP.+201/.test(s[c])&&(a=parseInt(/\bContent-ID: (\d+)/i.exec(s[c])[1],10),o.addedRecords[a]&&(l=fw.parse.parseJson(/^\{.+\}/m.exec(s[c])[0]),qa({},o.addedRecords[a],this.processResponse(l))));return o}return null},t.prototype.compareAndRemove=function(e,t,n){var i=this;return Va(t)?e:(Object.keys(e).forEach(function(o){o!==n&&"@odata.etag"!==o&&(fw.isPlainObject(e[o])?(i.compareAndRemove(e[o],t[o]),0===Object.keys(e[o]).filter(function(e){return"@odata.etag"!==e}).length&&delete e[o]):e[o]===t[o]?delete e[o]:e[o]&&t[o]&&e[o].valueOf()===t[o].valueOf()&&delete e[o])}),e)},t}(vw),bw=function(e){function t(){var t=e.call(this)||this;return Ua("beforeSend",vw.prototype.beforeSend,t),t}return Object(O.__extends)(t,e),t.prototype.insert=function(e,t,n,i,o){return this.pvt.position=o,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(qa({},{value:t,table:n,action:"insert"},fw.getAddParams(this,e,i)))}},t.prototype.remove=function(t,n,i,o,r){return e.prototype.remove.call(this,t,n,i),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(qa({},{key:i,keyColumn:n,table:o,action:"remove"},fw.getAddParams(this,t,r)))}},t.prototype.update=function(e,t,n,i,o){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(qa({},{value:n,action:"update",keyColumn:t,key:n[t],table:i},fw.getAddParams(this,e,o)))}},t.prototype.processResponse=function(t,n,i,o,r,a,l){var s;if(t=r?JSON.parse(r.data):t,"add"===this.updateType&&e.prototype.insert.call(this,n,t,null,null,this.pvt.position),"update"===this.updateType&&e.prototype.update.call(this,n,this.updateKey,t),this.updateType=void 0,t.added)for(s=0;s<t.added.length;s++)e.prototype.insert.call(this,n,t.added[s]);if(t.changed)for(s=0;s<t.changed.length;s++)e.prototype.update.call(this,n,l.key,t.changed[s]);if(t.deleted)for(s=0;s<t.deleted.length;s++)e.prototype.remove.call(this,n,l.key,t.deleted[s]);return t},t.prototype.batchRequest=function(e,t,n,i,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(qa({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:n.url,key:n.key},fw.getAddParams(this,e,i)))}},t.prototype.addParams=function(e){(new vw).addParams(e)},t}(mw),ww=function(e){function t(t){var n=e.call(this)||this;return n.options=qa({},n.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),qa(n.options,t||{}),n}return Object(O.__extends)(t,e),t.prototype.getModuleName=function(){return"AjaxAdaptor"},t}(vw),Cw=function(e){function t(t,n,i){var o=e.call(this)||this;o.isCrudAction=!1,o.isInsertAction=!1,Va(t)||(o.cacheAdaptor=t),o.pageSize=i,o.guidId=fw.getGuid("cacheAdaptor"),window.localStorage.setItem(o.guidId,JSON.stringify({keys:[],results:[]}));var r=o.guidId;return Va(n)||setInterval(function(){var e;e=fw.parse.parseJson(window.localStorage.getItem(r));for(var t=[],i=0;i<e.results.length;i++){var o=+new Date,a=+new Date(e.results[i].timeStamp);e.results[i].timeStamp=o-a,o-a>n&&t.push(i)}for(i=0;i<t.length;i++)e.results.splice(t[i],1),e.keys.splice(t[i],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(e))},n),o}return Object(O.__extends)(t,e),t.prototype.generateKey=function(e,t){var n=this.getQueryRequest(t),i=hw.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e;"onPage"in i&&(o+=i.onPage.pageIndex),n.sorts.forEach(function(e){o+=e.e.direction+e.e.fieldName}),n.groups.forEach(function(e){o+=e.e.fieldName}),n.searches.forEach(function(e){o+=e.e.searchKey});for(var r=0;r<n.filters.length;r++){var a=n.filters[r];if(a.e.isComplex){var l=t.clone();l.queries=[];for(var s=0;s<a.e.predicates.length;s++)l.queries.push({fn:"onWhere",e:a.e.predicates[s],filter:t.queries.filter});o+=a.e.condition+this.generateKey(e,l)}else o+=a.e.field+a.e.operator+a.e.value}return o},t.prototype.processQuery=function(e,t,n){var i,o=this.generateKey(e.dataSource.url,t),r=(i=fw.parse.parseJson(window.localStorage.getItem(this.guidId)))?i.results[i.keys.indexOf(o)]:null;return null==r||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):r},t.prototype.processResponse=function(e,t,n,i,o,r){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&fw.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,n,i,o,r);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var a=n?this.generateKey(t.dataSource.url,n):t.dataSource.url,l={},s=(l=fw.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(a);for(-1!==s&&(l.results.splice(s,1),l.keys.splice(s,1)),l.results[l.keys.push(a)-1]={keys:a,result:e.result,timeStamp:new Date,count:e.count};l.results.length>this.pageSize;)l.results.splice(0,1),l.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(l)),e},t.prototype.beforeSend=function(e,t,n){!Va(this.cacheAdaptor.options.batch)&&fw.endsWith(n.url,this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,n,i){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,n,i)},t.prototype.insert=function(e,t,n){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,n)},t.prototype.remove=function(e,t,n,i){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,n,i)},t.prototype.batchRequest=function(e,t,n){return this.cacheAdaptor.batchRequest(e,t,n)},t}(vw),xw=function(){function e(e,t,n){var i,o=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],e||this.dataSource||(e=[]),n=n||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?i={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),i={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof bw||e.adaptor instanceof ww||e.url),requiresFormat:e.requiresFormat}):fw.throwError("DataManager: Invalid arguments"),void 0!==i.requiresFormat||fw.isCors()||(i.requiresFormat=!!Va(i.crossDomain)||i.crossDomain),void 0===i.dataType&&(i.dataType="json"),this.dataSource=i,this.defaultQuery=t,i.url&&i.offline&&!i.json.length?(this.isDataAvailable=!1,this.adaptor=n||new yw,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new hw),this.ready.then(function(e){o.dataSource.offline=!0,o.isDataAvailable=!0,i.json=e.result,o.adaptor=new mw})):this.adaptor=i.offline?new mw:new yw,!i.jsonp&&this.adaptor instanceof yw&&(i.jsonp="callback"),this.adaptor=n||this.adaptor,i.enableCaching&&(this.adaptor=new Cw(this.adaptor,i.timeTillExpiration,i.cachingPageSize)),this}return e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof hw||fw.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||fw.throwError("DataManager - executeLocal() : Json data is required to execute");var n=this.adaptor.processQuery(this,t=t||this.defaultQuery);if(t.subQuery){var i=t.subQuery.fromTable,o=t.subQuery.lookups,r=t.isCountRequired?n.result:n;o&&o instanceof Array&&fw.buildHierarchy(t.subQuery.fKey,i,r,o,t.subQuery.key);for(var a=0;a<r.length;a++)r[a][i]instanceof Array&&(r[a]=qa({},{},r[a]),r[a][i]=this.adaptor.processResponse(t.subQuery.using(new e(r[a][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(n,this,t)},e.prototype.executeQuery=function(t,n,i,o){var r=this;"function"==typeof t&&(o=i,i=n,n=t,t=null),t||(t=this.defaultQuery),t instanceof hw||fw.throwError("DataManager - executeQuery() : A query is required to execute");var a=new Sw,l={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!Va(this.adaptor.makeRequest)||this.isAjaxAdaptor(this.adaptor)){var s=this.adaptor.processQuery(this,t);Va(this.adaptor.makeRequest)?!Va(s.url)||this.isAjaxAdaptor(this.adaptor)?this.makeRequest(s,a,l,t):(l=e.getDeferedArgs(t,s,l),a.resolve(l)):this.adaptor.makeRequest(s,a,l,t)}else e.nextTick(function(){var n=r.executeLocal(t);l=e.getDeferedArgs(t,n,l),a.resolve(l)});return(n||i)&&a.promise.then(n,i),o&&a.promise.then(o,o),a.promise},e.getDeferedArgs=function(e,t,n){return e.isCountRequired?(n.result=t.result,n.count=t.count,n.aggregates=t.aggregates):n.result=t,n},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,n){return qa({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:n},e)},e.prototype.makeRequest=function(e,t,n,i){var o=this,r=!!i.subQuerySelector,a=function(e){n.error=e,t.reject(n)},l=function(e,i,o,r,a,l,s){n.xhr=o,n.count=i?parseInt(i.toString(),10):0,n.result=e,n.request=r,n.aggregates=l,n.actual=a,n.virtualSelectRecords=s,t.resolve(n)},s=function(e,t){var s=new Sw,d={parent:n};i.subQuery.isChild=!0;var c=o.adaptor.processQuery(o,i.subQuery,e?o.adaptor.processResponse(e):t),u=o.makeRequest(c,s,d,i.subQuery);return r||s.then(function(t){e&&(fw.buildHierarchy(i.subQuery.fKey,i.subQuery.fromTable,e,t,i.subQuery.key),l(e,t.count,t.xhr))},a),u},d=this.extendRequest(e,function(e,t){o.isAjaxAdaptor(o.adaptor)&&(t=qa({},o.ajaxReqOption,t)),-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&o.dateParse&&(e=fw.parse.parseJson(e));var n=o.adaptor.processResponse(e,o,i,t.httpRequest,t),a=0,d=null,c=e.virtualSelectRecords;i.isCountRequired&&(a=n.count,d=n.aggregates,n=n.result),i.subQuery?r||s(n,t):l(n,a,t.httpRequest,t.type,e,d,c)},a);if(this.isAjaxAdaptor(this.adaptor))this.ajaxReqOption=d,this.adaptor.options.getData({data:d.data,onSuccess:d.onSuccess,onFailure:d.onFailure});else{var c=new Cl(d);c.beforeSend=function(){o.beforeSend(c.httpRequest,c)},(d=c.send()).catch(function(e){return!0}),this.requests.push(c)}if(r){var u=i.subQuerySelector.call(this,{query:i.subQuery,parent:i});u&&u.length?Promise.all([d,s(null,u)]).then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],a=o.adaptor.processResponse(n[0],o,i,o.requests[0].httpRequest,o.requests[0]),s=0;i.isCountRequired&&(s=a.count,a=a.result);var d=o.adaptor.processResponse(n[1],o,i.subQuery,o.requests[1].httpRequest,o.requests[1]);s=0,i.subQuery.isCountRequired&&(s=d.count,d=d.result),fw.buildHierarchy(i.subQuery.fKey,i.subQuery.fromTable,a,d,i.subQuery.key),r=!1,l(a,s,o.requests[0].httpRequest)}):r=!1}return d},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var n,i=this.dataSource.headers,o=0;i&&o<i.length;o++){n=[];for(var r=0,a=Object.keys(i[o]);r<a.length;r++){var l=a[r];n.push(l),e.setRequestHeader(l,i[o][l])}}},e.prototype.saveChanges=function(e,t,n,i,o){var r=this;n instanceof hw&&(i=n,n=null);var a={url:n,key:t||this.dataSource.key},l=this.adaptor.batchRequest(this,e,a,i||new hw,o);if(this.dataSource.offline)return l;if(Va(this.adaptor.doAjaxRequest)){if(this.isAjaxAdaptor(this.adaptor))return this.doAjaxRequest(l,this.adaptor.options.batchUpdate);var s=new Sw,d=new Cl(l);return d.beforeSend=function(){r.beforeSend(d.httpRequest,d)},d.onSuccess=function(t,n){s.resolve(r.adaptor.processResponse(t,r,null,n.httpRequest,n,e,a))},d.onFailure=function(e){s.reject([{error:e}])},d.send().catch(function(e){return!0}),s.promise}return this.adaptor.doAjaxRequest(l)},e.prototype.insert=function(e,t,n,i){t instanceof hw&&(n=t,t=null);var o=this.adaptor.insert(this,e,t,n,i);return this.dataSource.offline?o:Va(this.adaptor.doAjaxRequest)?this.doAjaxRequest(o,this.adaptor.options.addRecord):this.adaptor.doAjaxRequest(o)},e.prototype.remove=function(e,t,n,i){"object"==typeof t&&(t=fw.getObject(e,t)),n instanceof hw&&(i=n,n=null);var o=this.adaptor.remove(this,e,t,n,i);return this.dataSource.offline?o:Va(this.adaptor.doAjaxRequest)?this.doAjaxRequest(o,this.adaptor.options.deleteRecord):this.adaptor.doAjaxRequest(o)},e.prototype.update=function(e,t,n,i,o){n instanceof hw&&(i=n,n=null);var r=this.adaptor.update(this,e,t,n,i,o);return this.dataSource.offline?r:Va(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r,this.adaptor.options.updateRecord):this.adaptor.doAjaxRequest(r)},e.prototype.isAjaxAdaptor=function(e){return this.adaptor.getModuleName&&"AjaxAdaptor"===this.adaptor.getModuleName()},e.prototype.successFunc=function(e,t){this.isAjaxAdaptor(this.adaptor)&&(t=qa({},this.ajaxReqOption,t));try{fw.parse.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(fw.parse.parseJson(e),this,null,t.httpRequest,t),this.ajaxDeffered.resolve(e)},e.prototype.failureFunc=function(e){this.ajaxDeffered.reject([{error:e}])},e.prototype.doAjaxRequest=function(e,t){var n=this;if(e=qa({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.ajaxDeffered=new Sw,this.isAjaxAdaptor(this.adaptor))this.ajaxReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var i=new Cl(e);i.beforeSend=function(){n.beforeSend(i.httpRequest,i)},i.onSuccess=this.successFunc.bind(this),i.onFailure=this.failureFunc.bind(this),i.send().catch(function(e){return!0})}return this.ajaxDeffered.promise},e}(),Sw=function(){return function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),Tw=function(){function e(){this.dataTable={}}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"DataBinding"},e.prototype.initData=function(e,t){var n,i=e.dataManager||e.dataSource||{};(n=i.data||i.json||(i.dataSource?i.dataSource.json:void 0))&&0===n.length&&i.dataSource.data&&(n=i.dataSource.data),n&&n.length&&(this.applyDataSource(e,n,t),t.trigger("dataLoaded",{diagram:Ka()?null:xv(t)}))},e.prototype.initSource=function(e,t){var n,i=this;if(e.dataManager instanceof xw||e.dataSource instanceof xw){var o=(e.dataManager||e.dataSource).defaultQuery||new hw;(e.dataManager||e.dataSource).executeQuery(o).then(function(o){n=o.result,t.isDestroyed||(t.protectPropertyChange(!0),i.applyDataSource(e,n,t),t.refreshDiagram(),t.protectPropertyChange(!1),t.trigger("dataLoaded",{diagram:Ka()?null:xv(t)}))})}},e.prototype.applyDataSource=function(e,t,n){var i,o,r;this.dataTable={};var a,l,s=[],d=[];if(void 0!==t){for(var c=0;c<t.length;c++)void 0===(i=t[c])[e.parentId]||null===i[e.parentId]||"object"!=typeof i[e.parentId]?void 0!==s[i[e.parentId]]?s[i[e.parentId]].items.push(i):s[i[e.parentId]]={items:[i]}:s=this.updateMultipleRootNodes(i,s,e,t),e.root===i[e.id]&&(o={items:[i]});if(o)d.push(o);else for(var u=0,h=Object.keys(s);u<h.length;u++){var p=h[u];p&&"undefined"!==p&&"''"!==p&&"null"!==p||d.push(s[p])}for(var f=0;f<d.length;f++)for(var g=0;g<d[f].items.length;g++)r=this.applyNodeTemplate(e,a=d[f].items[g],n),n.nodes.push(r),this.dataTable[a[e.id]]=r,void 0!==(l=s[r.data[e.id]])&&this.renderChildNodes(e,l,r.id,s,n)}this.dataTable=null},e.prototype.updateMultipleRootNodes=function(e,t,n,i){for(var o,r=e[n.parentId],a=0;a<r.length;a++)t[o=r[a]]?t[o].items.push(e):t[o]={items:[e]};return t},e.prototype.applyNodeTemplate=function(e,t,n){var i={id:Fy(),data:t},o=rb(e.doBinding);o&&o(i,t,n);var r=new ry(n,"nodes",i,!0);if(Im(r,i,n.nodeDefaults),e.dataMapSettings)for(var a=void 0,l=[],s=[],d=0;d<e.dataMapSettings.length;d++){if(-1!==e.dataMapSettings[d].property.indexOf(".")){s=this.splitString(e.dataMapSettings[d].property);for(var c=0;c<s.length;c++)-1!==s[c].indexOf("[")&&(a=s[c].indexOf("["),l=s[c].split("["));if(a)if(s[2])r[l[0]][s[0].charAt(a+1)][s[1]][s[2]]=t[e.dataMapSettings[d].field];else{var u=t[e.dataMapSettings[d].field];r[l[0]][s[0].charAt(a+1)][s[1]]=u}else s[2]?r[s[0]][s[1]][s[2]]=t[e.dataMapSettings[d].field]:r[s[0]][s[1]]=t[e.dataMapSettings[d].field]}else{var h=e.dataMapSettings[d].property;r[h=h.charAt(0).toLowerCase()+h.slice(1)]=t[e.dataMapSettings[d].field]}a=0,l=[],s=[]}return this.collectionContains(r,n,e.id,e.parentId)?this.dataTable[t[e.id]]:r},e.prototype.splitString=function(e){var t=[];t=e.split(".");for(var n=0;n<t.length;n++)t[n]=t[n].charAt(0).toLowerCase()+t[n].slice(1);return t},e.prototype.renderChildNodes=function(e,t,n,i,o){for(var r,a,l,s=0;s<t.items.length;s++){l=this.applyNodeTemplate(e,r=t.items[s],o);var d=!1;this.collectionContains(l,o,e.id,e.parentId)?d=!0:(this.dataTable[r[e.id]]=l,o.nodes.push(l)),this.containsConnector(o,n,l.id)||o.connectors.push(this.applyConnectorTemplate(n,l.id,o)),d||void 0!==(a=i[l.data[e.id]])&&this.renderChildNodes(e,a,l.id,i,o)}},e.prototype.containsConnector=function(e,t,n){if(""!==t&&""!==n)for(var i=0;i<e.connectors.length;i++){var o=e.connectors[i];if(void 0!==o&&o.sourceID===t&&o.targetID===n)return!0}return!1},e.prototype.collectionContains=function(e,t,n,i){var o=this.dataTable[e.data[n]];return void 0!==o&&o.data[n]===e.data[n]&&o.data[i]===e.data[i]},e.prototype.applyConnectorTemplate=function(e,t,n){var i={id:Fy(),sourceID:e,targetID:t},o=new zf(n,"connectors",i,!0);return Im(o,i,n.connectorDefaults),o},e}(),Ew=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(O.__extends)(t,e),t.prototype.preRender=function(){this.browser=Il.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Il.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Ya("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new Dd(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Pl.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){Va(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var n=this.element,i=0,o=[].slice.call(n.children);i<o.length;i++)e.appendChild(o[i]);t.appendChild(e),n.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device");var n=js(".e-"+t.id+"_nav.e-scroll-nav",t),i=js(".e-scroll-overlay",t);[].slice.call(i).forEach(function(e){Ns(e)});for(var o=0,r=[].slice.call(this.scrollItems.children);o<r.length;o++)t.appendChild(r[o]);this.uniqueId&&this.element.removeAttribute("id"),Ns(this.scrollEle),n.length>0&&(Ns(n[0]),Va(n[1])||Ns(n[1])),Pl.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=js(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),n=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),o=this.createElement("div",{id:t.concat("_right"),className:i}),r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});o.appendChild(r);var a=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(a,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),i=this.createElement("div",{id:t.concat("_right"),className:n});i.setAttribute("aria-disabled","false");var o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),r="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),a=this.createElement("div",{id:t.concat("_left"),className:r+" e-overlay"});a.setAttribute("aria-disabled","true");var l=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});a.appendChild(l),i.appendChild(o),e.appendChild(i),e.insertBefore(a,e.firstChild),this.ieCheck&&(i.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([i,a])},t.prototype.onKeyPress=function(e){var t=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new Dd(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),Pl.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,n=e.originalEvent.target;n=this.contains(n,"e-scroll-nav")?n.firstElementChild:n,this.timeout=window.setInterval(function(){t.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,n){var i=this.element,o=t.classList;o.contains("e-scroll-nav")&&(o=t.querySelector(".e-nav-arrow").classList),this.contains(i,"e-rtl")&&this.browserCheck&&(e=-e),!this.contains(i,"e-rtl")||this.browserCheck||this.ieCheck?o.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n):o.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,n=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var i=.5,o=function(){var r=Math.sin(i);r<=0?window.cancelAnimationFrame(r):("Left"===e.swipeDirection?n.scrollLeft+=t*r:"Right"===e.swipeDirection&&(n.scrollLeft-=t*r),i-=.5,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,n){var i=this;if(n)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(js(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetWidth});var o=function(){var n,r;i.contains(i.element,"e-rtl")&&i.browserCheck?(n=-e,r=-10):(n=e,r=10),n<10?window.cancelAnimationFrame(r):(i.scrollUpdating(r,t),e-=r,window.requestAnimationFrame(o))};o()}},t.prototype.touchHandler=function(e){var t,n=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?n.scrollLeft=n.scrollLeft+t:"Right"===e.scrollDirection&&(n.scrollLeft=n.scrollLeft-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var n=(Va(e)?t:e).querySelector(".e-nav-arrow");Va(e)?Gs(n,["e-nav-right-arrow"],["e-nav-left-arrow"]):Gs(n,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,n=t.offsetWidth,i=this.element,o=this.element.querySelector(".e-scroll-left-nav"),r=this.element.querySelector(".e-scroll-right-nav"),a=this.element.querySelector(".e-scroll-left-overlay"),l=this.element.querySelector(".e-scroll-right-overlay"),s=t.scrollLeft;if(s<=0&&(s=-s),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(a=this.element.querySelector(".e-scroll-right-overlay"),l=this.element.querySelector(".e-scroll-left-overlay")),a.style.width=s<40?s+"px":"40px",l.style.width=t.scrollWidth-Math.ceil(n+s)<40?t.scrollWidth-Math.ceil(n+s)+"px":"40px"),0===s)!this.contains(i,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(o,r):this.arrowDisabling(r,o);else if(Math.ceil(n+s+.1)>=t.scrollWidth)!this.contains(i,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,o):this.arrowDisabling(o,r);else{var d=this.element.querySelector(".e-scroll-nav.e-overlay");d&&(d.classList.remove("e-overlay"),d.setAttribute("aria-disabled","false"),d.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},Object(O.__decorate)([Ks(null)],t.prototype,"scrollStep",void 0),Object(O.__decorate)([id],t)}(vd),_w=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(O.__extends)(t,e),t.prototype.preRender=function(){this.browser=Il.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Il.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Ya("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new Dd(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Pl.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),Pl.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){Va(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=ks("div",{className:"e-vscroll-content"}),t=ks("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var n=this.element,i=0,o=[].slice.call(n.children);i<o.length;i++)e.appendChild(o[i]);t.appendChild(e),n.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",As([this.element],["e-vscroll","e-scroll-device"]);var n=js(".e-"+t.id+"_nav.e-scroll-nav",t),i=js(".e-scroll-overlay",t);[].slice.call(i).forEach(function(e){Ns(e)});for(var o=0,r=[].slice.call(this.scrollItems.children);o<r.length;o++)t.appendChild(r[o]);this.uniqueId&&this.element.removeAttribute("id"),Ns(this.scrollEle),n.length>0&&(Ns(n[0]),Va(n[1])||Ns(n[1])),Pl.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=js(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),n=ks("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),o=ks("div",{id:t.concat("down"),className:i}),r=ks("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});o.appendChild(r);var a=ks("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(a,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),i=ks("div",{id:t.concat("_down"),className:n});i.setAttribute("aria-disabled","false");var o=ks("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),r="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),a=ks("div",{id:t.concat("_up"),className:r+" e-overlay"});a.setAttribute("aria-disabled","true");var l=ks("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});a.appendChild(l),i.appendChild(o),i.setAttribute("tabindex","0"),e.appendChild(i),e.insertBefore(a,e.firstChild),this.ieCheck&&(i.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([i,a])},t.prototype.onKeyPress=function(e){var t=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new Dd(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),Pl.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,n=e.originalEvent.target;n=this.contains(n,"e-scroll-nav")?n.firstElementChild:n,this.timeout=window.setInterval(function(){t.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,n){var i=t.classList;i.contains("e-scroll-nav")&&(i=t.querySelector(".e-nav-arrow").classList),i.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",n):i.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,n=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var i=.5,o=function(){var r=Math.sin(i);r<=0?window.cancelAnimationFrame(r):("Up"===e.swipeDirection?n.scrollTop+=t*r:"Down"===e.swipeDirection&&(n.scrollTop-=t*r),i-=.02,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,n){var i=this;if(n)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(js(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetHeight});var o=function(){e<10?window.cancelAnimationFrame(10):(i.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(o))};o()}},t.prototype.touchHandler=function(e){var t,n=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?n.scrollTop=n.scrollTop+t:"Down"===e.scrollDirection&&(n.scrollTop=n.scrollTop-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var n=(Va(e)?t:e).querySelector(".e-nav-arrow");Va(e)?Gs(n,["e-nav-down-arrow"],["e-nav-up-arrow"]):Gs(n,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,n=t.offsetHeight,i=this.element.querySelector(".e-scroll-up-nav"),o=this.element.querySelector(".e-scroll-down-nav"),r=this.element.querySelector(".e-scroll-up-overlay"),a=this.element.querySelector(".e-scroll-down-overlay"),l=t.scrollTop;if(l<=0&&(l=-l),this.isDevice&&(r.style.height=l<40?l+"px":"40px",a.style.height=t.scrollHeight-Math.ceil(n+l)<40?t.scrollHeight-Math.ceil(n+l)+"px":"40px"),0===l)this.arrowDisabling(i,o);else if(Math.ceil(n+l+.1)>=t.scrollHeight)this.arrowDisabling(o,i);else{var s=this.element.querySelector(".e-scroll-nav.e-overlay");s&&(s.classList.remove("e-overlay"),s.setAttribute("aria-disabled","false"),s.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},Object(O.__decorate)([Ks(null)],t.prototype,"scrollStep",void 0),Object(O.__decorate)([id],t)}(vd);function kw(e,t,n,i,o,r){var a,l;if("vscroll"===i?(a=r||t.getBoundingClientRect().height,l=n.getBoundingClientRect().height):(a=t.getBoundingClientRect().width,l=n.getBoundingClientRect().width),a<l){var s=e("div",{className:"e-menu-"+i});return t.appendChild(s),s.appendChild(n),r?(s.style.overflow="hidden",s.style.height=r+"px"):(s.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden"),"vscroll"===i?new _w({enableRtl:o},s).scrollStep=Bs(".e-"+i+"-bar",t).offsetHeight/2:new Ew({enableRtl:o},s).scrollStep=Bs(".e-"+i+"-bar",t).offsetWidth,s}return n}function Dw(e,t,n){if(e){var i=Bs(".e-menu-parent",t);i?n&&n!==i||(e.destroy(),t.parentElement.appendChild(i),Ns(t)):(e.destroy(),Ns(t))}}var Aw,Ow={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function Iw(e,t){var n={};if(Va(e)||"string"==typeof e||"number"==typeof e||!Va(e.isHeader))return e;for(var i=0,o=Object.keys(t);i<o.length;i++){var r=t[o[i]],a=Va(r)||"string"!=typeof r?void 0:za(r,e);Va(a)||(n[r]=a)}return n}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},n={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function i(e,t,n,i,r){return b(e,o(e,t,n,i,r),null,i)}function o(e,t,i,o,r){var a=[],l=qa({},n,o);Ow=m(l.moduleName);for(var s=p(),d=0;d<t.length;d++)if(!Va(t[d])){var c;l.itemCreating&&"function"==typeof l.itemCreating&&l.itemCreating({dataSource:t,curData:t[d],text:t[d],options:l}),c=i?g(e,t[d],void 0,null,null,[],null,s,d,o):y(e,t[d],void 0,null,null,o,r),l.itemCreated&&"function"==typeof l.itemCreated&&l.itemCreated({dataSource:t,curData:t[d],text:t[d],item:c,options:l}),a.push(c)}return a}function r(i,o,r,a,l,s){var d=qa({},n,r);Ow=m(d.moduleName);var h,v=qa({},e.defaultMappedFields,d.fields),b=qa({},t,d.ariaAttributes),w=[];a&&(b.level=a);var C,x,S=[];o&&o.length&&!Va(c(o).item)&&!c(o).item.hasOwnProperty(v.id)&&(h=p());for(var T=0;T<o.length;T++){var E=Iw(o[T],v);if(!Va(o[T])){d.itemCreating&&"function"==typeof d.itemCreating&&d.itemCreating({dataSource:o,curData:o[T],text:E[v.text],options:d,fields:v});var _=o[T];d.itemCreating&&"function"==typeof d.itemCreating&&(E=Iw(o[T],v)),E.hasOwnProperty(v.id)&&!Va(E[v.id])&&(h=E[v.id]);var k=[];if(d.showCheckBox&&(d.itemNavigable&&(E[v.url]||E[v.urlAttributes])?w.push(i("input",{className:Ow.check,attrs:{type:"checkbox"}})):k.push(i("input",{className:Ow.check,attrs:{type:"checkbox"}}))),!0===l)d.showIcon&&E.hasOwnProperty(v.iconCss)&&!Va(E[v.iconCss])&&k.push(i("span",{className:Ow.icon+" "+E[v.iconCss]})),x=(C=g(i,_,E,v,d.itemClass,k,!(!_.hasOwnProperty("isHeader")||!_.isHeader),h,T,r)).querySelector("."+Ow.anchorWrap),d.itemNavigable&&w.length&&Ps(w,C.firstElementChild);else{if((C=y(i,_,E,v,d.itemClass,r,s)).classList.add(Ow.level+"-"+b.level),C.setAttribute("aria-level",b.level.toString()),x=C.querySelector("."+Ow.anchorWrap),E.hasOwnProperty(v.tooltip)&&C.setAttribute("title",E[v.tooltip]),E.hasOwnProperty(v.htmlAttributes)&&E[v.htmlAttributes]&&u(C,E[v.htmlAttributes]),E.hasOwnProperty(v.enabled)&&!1===E[v.enabled]&&C.classList.add(Ow.disabled),E.hasOwnProperty(v.isVisible)&&!1===E[v.isVisible]&&(C.style.display="none"),E.hasOwnProperty(v.imageUrl)&&!Va(E[v.imageUrl])&&!d.template){var D={src:E[v.imageUrl]};Ga(D,E[v.imageAttributes]);var A=i("img",{className:Ow.image,attrs:D});x?x.insertAdjacentElement("afterbegin",A):Ps([A],C.firstElementChild)}var O;d.showIcon&&E.hasOwnProperty(v.iconCss)&&!Va(E[v.iconCss])&&!d.template&&(O=i("div",{className:Ow.icon+" "+E[v.iconCss]}),x?x.insertAdjacentElement("afterbegin",O):Ps([O],C.firstElementChild)),k.length&&Ps(k,C.firstElementChild),d.itemNavigable&&w.length&&Ps(w,C.firstElementChild),f(i,E,v,0,d,C,b.level)}x&&Ds([C],[Ow.navigable]),d.itemCreated&&"function"==typeof d.itemCreated&&d.itemCreated({dataSource:o,curData:o[T],text:E[v.text],item:C,options:d,fields:v}),w=[],S.push(C)}}return S}function a(e,t,i,o,a,l){var s=qa({},n,i);return b(e,r(e,t,i,o,a,l),s.listClass,i)}function l(e,t){if(t&&e)return Array.prototype.slice.call(t).indexOf(e)}function s(e,t,n){if(void 0===n&&(n=new hw),"Ascending"===e)n.sortBy(t,"ascending",!0);else if("Descending"===e)n.sortBy(t,"descending",!0);else for(var i=0;i<n.queries.length;i++)"onSortBy"===n.queries[i].fn&&n.queries.splice(i,1);return n}function d(e,t){return new xw(e).executeLocal(t)}function c(e){for(var t=0;t<e.length;t++)if(!Va(e[t]))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}function u(e,t){var n={};Ga(n,t),n.class&&(Ds([e],n.class.split(" ")),delete n.class),Hs(e,n)}function h(e){for(var t={},n=e.attributes,i=0;i<n.length;i++)t[n[i].nodeName]=n[i].nodeValue;return t}function p(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function f(e,t,n,i,o,r,l){var s=t[n.child]||[],d=t[n.hasChildren];if(s.length&&(d=!0,r.classList.add(Ow.hasChild),o.processSubChild)){var c=a(e,s,o,++l);r.appendChild(c)}o.expandCollapse&&d&&!o.template&&(r.firstElementChild.classList.add(Ow.iconWrapper),("Left"===o.expandIconPosition?Ps:Rs)([e("div",{className:"e-icons "+o.expandIconClass})],r.querySelector("."+Ow.textContent)))}function g(e,i,o,r,a,l,s,d,c,h){var p,f,g=qa({},n,h),m=qa({},t,g.ariaAttributes),y=i,b=i;"string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i&&(p=i,y="boolean"==typeof o[r.text]||"number"==typeof o[r.text]?o[r.text]:o[r.text]||"",b=o[r.value]),f=Va(p)||Va(o[r.id])||""===o[r.id]?d+"-"+c:d;var w=e("li",{className:(!0===s?Ow.group:Ow.li)+" "+(Va(a)?"":a),id:f,attrs:""!==m.groupItemRole&&""!==m.itemRole?{role:!0===s?m.groupItemRole:m.itemRole}:{}});return p&&o.hasOwnProperty(r.enabled)&&"false"===o[r.enabled].toString()&&w.classList.add(Ow.disabled),s?w.innerText=y:(w.setAttribute("data-value",Va(b)?"null":b),w.setAttribute("role","option"),p&&o.hasOwnProperty(r.htmlAttributes)&&o[r.htmlAttributes]&&u(w,o[r.htmlAttributes]),l.length&&!g.itemNavigable&&Rs(l,w),p&&(o[r.url]||o[r.urlAttributes]&&o[r.urlAttributes].href)?w.appendChild(v(e,p,r,y,l,g.itemNavigable)):(l.length&&g.itemNavigable&&Rs(l,w),w.appendChild(document.createTextNode(y)))),w}function m(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function v(e,t,n,i,o,r){var a,l=Iw(t,n),s={href:l[n.url]};if(l.hasOwnProperty(n.urlAttributes)&&l[n.urlAttributes]&&(Ga(s,l[n.urlAttributes]),s.href=l[n.url]?l[n.url]:l[n.urlAttributes].href),r){a=e("a",{className:Ow.text+" "+Ow.url});var d=e("div",{className:Ow.anchorWrap});o&&o.length&&Rs(o,d),d.appendChild(document.createTextNode(i)),Rs([d],a)}else a=e("a",{className:Ow.text+" "+Ow.url,innerHTML:i});return u(a,s),a}function y(e,i,o,r,a,l,s){var d,c,u,h=qa({},n,l),f=qa({},t,h.ariaAttributes),g=i;"string"!=typeof i&&"number"!=typeof i&&(u=i,g=o[r.text]||"",d=Va(o._id)?o[r.id]:o._id,c=!(!i.hasOwnProperty("isHeader")||!i.isHeader)),l&&l.enableHtmlSanitizer&&(g=g);var m=e("li",{className:(!0===c?Ow.group:Ow.li)+" "+(Va(a)?"":a),attrs:""!==f.groupItemRole&&""!==f.itemRole?{role:!0===c?f.groupItemRole:f.itemRole}:{}});if(Va(d)?m.setAttribute("data-uid",p()):m.setAttribute("data-uid",d),l&&l.removeBlazorID&&"object"==typeof i&&i.hasOwnProperty("BlazId")&&delete i.BlazId,c&&l&&l.groupTemplate)Rs(rs(l.groupTemplate)(i,s,"groupTemplate",h.groupTemplateID,!!h.isStringTemplate),m);else if(!c&&l&&l.template)Rs(rs(l.template)(i,s,"template",h.templateID,!!h.isStringTemplate),m);else{var y=e("div",{className:Ow.textContent,attrs:""!==f.wrapperRole?{role:f.wrapperRole}:{}});if(u&&(o[r.url]||o[r.urlAttributes]&&o[r.urlAttributes].href))y.appendChild(v(e,u,r,g,null,h.itemNavigable));else{var b=e("span",{className:Ow.text,attrs:""!==f.itemText?{role:f.itemText}:{}});l&&l.enableHtmlSanitizer?b.innerText=g:b.innerHTML=g,y.appendChild(b)}m.appendChild(y)}return m}function b(e,i,o,r){var a=qa({},n,r),l=qa({},t,a.ariaAttributes),s=e("ul",{className:(Ow=m(a.moduleName)).ul+" "+(Va(o)?"":o),attrs:""!==l.listRole?{role:l.listRole}:{}});return Rs(i,s),s}e.createList=function(e,o,r,l,s){var d=qa({},n,r),u=qa({},t,d.ariaAttributes),h=c(o).typeof;return"string"===h||"number"===h?i(e,o,l,r,s):a(e,o,r,u.level,l,s)},e.createListFromArray=i,e.createListItemFromArray=o,e.createListItemFromJson=r,e.createListFromJson=a,e.getSiblingLI=function(e,t,i){if(Ow=m(n.moduleName),e&&e.length){var o,r,a=Array.prototype.slice.call(e);for(o=a[(r=t?l(t,a):!0===i?a.length:-1)+(!0===i?-1:1)];o&&(!Is(o)||o.classList.contains(Ow.disabled));)o=a[r+=!0===i?-1:1];return o}},e.indexOf=l,e.groupDataSource=function(t,n,i){void 0===i&&(i="None");var o=qa({},e.defaultMappedFields,n),r=(new hw).group(o.groupBy),a=d(t,r=s(i,"key",r));t=[];for(var l=0;l<a.length;l++){var c=a[l].items,u={};u[o.text]=a[l].key,u.isHeader=!0;var h=o.text;"id"===h&&(u[h="text"]=a[l].key),u._id="group-list-item-"+(a[l].key?a[l].key.toString().trim():"undefined"),u.items=c,t.push(u);for(var p=0;p<c.length;p++)t.push(c[p])}return t},e.addSorting=s,e.getDataSource=d,e.createJsonFromElement=function t(i,o){var r=qa({},n,o),a=qa({},e.defaultMappedFields,r.fields),l=i.cloneNode(!0),s=[];l.classList.add("json-parent");var d=l.querySelectorAll(".json-parent>li");l.classList.remove("json-parent");for(var c=0;c<d.length;c++){for(var u=d[c],f=u.querySelector("a"),g=u.querySelector("ul"),m={},v=f?f.childNodes:u.childNodes,y=Object.keys(v),b=0;b<v.length;b++)v[Number(y[b])].hasChildNodes()||(m[a.text]=v[Number(y[b])].textContent);var w=h(u);w.id?(m[a.id]=w.id,delete w.id):m[a.id]=p(),Object.keys(w).length&&(m[a.htmlAttributes]=w),f&&(w=h(f),Object.keys(w).length&&(m[a.urlAttributes]=w)),g&&(m[a.child]=t(g,o)),s.push(m)}return s},e.renderContentTemplate=function(t,i,o,r,a,l){for(var s,d=t("ul",{className:(Ow=m(n.moduleName)).ul,attrs:{role:"presentation"}}),c=qa({},n,a),u=qa({},e.defaultMappedFields,r),h=rs(i),f=[],g=p(),v=0;v<o.length;v++){var y=Iw(o[v],u),b=o[v],w=b.isHeader;s="string"==typeof o[v]||"number"==typeof o[v]?b:y[u.value],c.itemCreating&&"function"==typeof c.itemCreating&&c.itemCreating({dataSource:o,curData:b,text:s,options:c,fields:u}),c.itemCreating&&"function"==typeof c.itemCreating&&(y=Iw(o[v],u),s="string"==typeof o[v]||"number"==typeof o[v]?b:y[u.value]);var C=t("li",{id:g+"-"+v,className:w?Ow.group:Ow.li,attrs:{role:"presentation"}});w?C.innerText="string"==typeof o[v]||"number"==typeof o[v]?b:y[u.text]:(Rs(h(b,l,w?"headerTemplate":"template",w?c.groupTemplateID:c.templateID,!!c.isStringTemplate),C),C.setAttribute("data-value",Va(s)?"null":s),C.setAttribute("role","option")),c.itemCreated&&"function"==typeof c.itemCreated&&c.itemCreated({dataSource:o,curData:b,text:s,item:C,options:c,fields:u}),f.push(C)}return Rs(f,d),d},e.renderGroupTemplate=function(t,i,o,r,a,l){for(var s=rs(t),d=qa({},e.defaultMappedFields,o),c=qa({},n,a),u=d.groupBy,h=0,p=r;h<p.length;h++){var f=p[h],g={};g[u]=f.textContent,f.innerHTML="",Rs(s(g,l,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate),f)}return r},e.generateId=p,e.generateUL=b,e.generateIcon=function(e,t,i,o){var r=qa({},n,o);return Ow=m(r.moduleName),("Left"===r.expandIconPosition?Ps:Rs)([e("div",{className:"e-icons "+r.expandIconClass+" "+(Va(i)?"":i)})],t.querySelector("."+Ow.textContent)),t}}(Aw||(Aw={}));var Pw,Rw,Mw="e-focused",Nw="e-menu-header",Lw="e-selected",Hw="e-menu-item",Bw="e-menu-hide",jw="e-menu-popup",zw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("id")],t.prototype,"itemId",void 0),Object(O.__decorate)([Ks("parentId")],t.prototype,"parentId",void 0),Object(O.__decorate)([Ks("text")],t.prototype,"text",void 0),Object(O.__decorate)([Ks("iconCss")],t.prototype,"iconCss",void 0),Object(O.__decorate)([Ks("url")],t.prototype,"url",void 0),Object(O.__decorate)([Ks("separator")],t.prototype,"separator",void 0),Object(O.__decorate)([Ks("items")],t.prototype,"children",void 0),t}(fd),Uw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(null)],t.prototype,"iconCss",void 0),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"separator",void 0),Object(O.__decorate)([ed([],t)],t.prototype,"items",void 0),Object(O.__decorate)([Ks("")],t.prototype,"text",void 0),Object(O.__decorate)([Ks("")],t.prototype,"url",void 0),t}(fd),Fw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("SlideDown")],t.prototype,"effect",void 0),Object(O.__decorate)([Ks(400)],t.prototype,"duration",void 0),Object(O.__decorate)([Ks("ease")],t.prototype,"easing",void 0),t}(fd),Gw=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.navIdx=[],i.animation=new rd({}),i.isTapHold=!1,i.tempItem=[],i}return Object(O.__extends)(t,e),t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:Ya(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=za("ej2_instances",this.element);As([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,Ua("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:Ya(this.getModuleName())}),Rs([].slice.call(this.element.cloneNode(!0).children),e);var n=this.element.nextElementSibling;n?this.element.parentElement.insertBefore(e,n):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var i=this.element,o=za("ej2_instances",i),r=(e=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),a=0,l=i.attributes.length;a<l;a++)e.setAttribute(i.attributes[a].nodeName,i.attributes[a].nodeValue);i.parentNode.insertBefore(r,i),Ns(i),r.appendChild(i=e),Ua("ej2_instances",o,i),this.clonedElement=r,this.element=i,this.element.id||(this.element.id=Ya(this.getModuleName()))}},t.prototype.render=function(){if(this.initialize(),this.renderItems(),this.isMenu&&this.template&&Ka()){var e=this.element.id+"Template";ls(e),Object.keys(is).length&&qa(this.tempItem,is[e],[],!0),as(e,"Template",this)}this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&Ds([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add("e-rtl"),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e))},t.prototype.renderItems=function(){if(!this.items.length){var e=Aw.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),Ka()?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var t=this.createItems(this.items);if(Rs(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){var n=this.getWrapper();this.element.classList.contains("e-vertical")?kw(this.createElement,n,this.element,"vscroll",this.enableRtl):kw(this.createElement,n,this.element,"hscroll",this.enableRtl)}},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,n=js(this.target),i=0,o=n.length;i<o;i++)t=n[i],this.isMenu?Pl.add(t,"click",this.menuHeaderClickHandler,this):Il.isIos?new Dd(t,{tapHold:this.touchHandler.bind(this)}):Pl.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){Pl.add(this.targetElement,"scroll",this.scrollHandler,this);for(var r=0,a=_h(this.targetElement);r<a.length;r++)Pl.add(a[r],"scroll",this.scrollHandler,this)}}Il.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),Pl.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),Pl.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),Pl.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=ad(e,{selector:"."+Hw})},t.prototype.wireKeyboardEvent=function(e){var t={downarrow:"downarrow",uparrow:"uparrow",enter:"enter",leftarrow:"leftarrow",rightarrow:"rightarrow",escape:"escape"};this.isMenu&&(t.home="home",t.end="end"),new Td(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},t.prototype.mouseDownHandler=function(e){Us(e.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||Us(e.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,e)},t.prototype.keyBoardHandler=function(e){var t="",n=e.target,i=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&n.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Mw,Lw],[Us(n,".e-"+this.getModuleName()+"-wrapper")]),i)switch(e.action){case"rightarrow":t="rightarrow",e.action="downarrow";break;case"leftarrow":t="leftarrow",e.action="uparrow";break;case"downarrow":t="downarrow",e.action="rightarrow";break;case"uparrow":t="uparrow",e.action=""}else if(this.enableRtl)switch(e.action){case"leftarrow":i=!0,t="leftarrow",e.action="rightarrow";break;case"rightarrow":i=!0,t="rightarrow",e.action="leftarrow"}switch(e.action){case"downarrow":case"uparrow":case"end":case"home":this.upDownKeyHandler(e);break;case"rightarrow":this.rightEnterKeyHandler(e);break;case"leftarrow":this.leftEscKeyHandler(e);break;case"enter":this.hamburgerMode&&"SPAN"===n.tagName&&n.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case"escape":this.leftEscKeyHandler(e)}i&&(e.action=t)},t.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),n="downarrow"===e.action||"home"===e.action?0:t.childElementCount-1,i=n,o=this.getLIByClass(t,Mw);o&&("end"!==e.action&&"home"!==e.action&&(i=this.getIdx(t,o)),o.classList.remove(Mw),"end"!==e.action&&"home"!==e.action&&("downarrow"===e.action?i++:i--,i===("downarrow"===e.action?t.childElementCount:-1)&&(i=n))),i=this.isValidLI(t.children[i],i,e.action),t.children[i].classList.add(Mw),t.children[i].focus()},t.prototype.isValidLI=function(e,t,n){this.getWrapper();var i=this.getUlByNavIdx();return(e.classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(Bw))&&("downarrow"===n||"rightarrow"===n?t++:t--),((e=i.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(Bw))&&(t=this.isValidLI(e,t,n)),t},t.prototype.getUlByNavIdx=function(e){if(void 0===e&&(e=this.navIdx.length),this.isMenu){var t=[this.getWrapper()].concat([].slice.call(js("."+jw)))[e];return Va(t)?null:Bs(".e-menu-parent",t)}return this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var t=this.getUlByNavIdx(),n=this.getLIByClass(t,Mw);if(n){var i=this.getIdx(t,n),o=this.navIdx.concat(i),r=this.getItem(o);r.items.length?(this.navIdx.push(i),this.keyType="right",this.action=e.action,this.openMenu(n,r,-1,-1,e)):"enter"===e.action&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([Lw],[this.getWrapper()]):n.classList.remove(Mw),n.classList.add(Lw),this.trigger("select",{element:n,item:r,event:e}),this.closeMenu(null,e))}},t.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):"escape"===e.action&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},t.prototype.closeMenu=function(e,t,n){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=null),this.isMenuVisible()){var o,r,a,l=void 0,s=this.getWrapper(),d=void 0,c=this.getPopups(),u=!1,h=this.isMenu?c.length+1:s.childElementCount;if(o=this.isMenu&&1!==h?Bs(".e-ul",c[h-2]):js(".e-menu-parent",s)[h-1],this.isMenu&&o.classList.contains("e-menu")&&((l=this.getLIByClass(o,Lw))&&l.classList.remove(Lw),u=!0),!u){var p=t&&t.target&&this.getLI(t.target);r=this.navIdx.length?this.getItem(this.navIdx):null,a=r?r.items:this.items,d={element:o,parentItem:this.isMenu&&Ka()?this.getMenuItemModel(r,e):r,items:a,event:t,cancel:!1,isFocused:!0},this.trigger("beforeClose",d,function(l){var s,d,c,u,h,f="",g=!l.cancel;(g||i.isCMenu)&&(i.isMenu?(s=Us(o,"."+jw),i.hamburgerMode&&(s.parentElement.style.minHeight="",Us(o,".e-menu-item").setAttribute("aria-expanded","false")),i.unWireKeyboardEvent(s),Dw(Qa(s.children[0],_w),s.children[0]),(d=Qa(s,Eh)).hide(),f=s.id,d.destroy(),Ns(s)):i.toggleAnimation(o,!1),i.trigger("onClose",{element:o,parentItem:r,items:a}),i.navIdx.pop()),i.updateReactTemplate();var m=i.getWrapper()&&i.getUlByNavIdx();i.isCMenu&&(i.canOpen(t.target)&&i.openMenu(null,null,i.pageY,i.pageX,t),i.isCMenu=!1),i.isMenu&&m&&f.length&&(c=new RegExp("(.*)-ej2menu-"+i.element.id+"-popup").exec(f)[1],u=m.querySelector('[id="'+c+'"]'),h=p&&m.querySelector('[id="'+p.id+'"]'));var v=p&&p.querySelectorAll(".e-menu-item");if(g&&i.hamburgerMode&&e&&!v.length)i.afterCloseMenu(t);else if(g&&!i.hamburgerMode&&i.navIdx.length&&u&&!h){var y=t&&t.target.classList.contains("e-vscroll")?Us(t.target,".e-menu-wrapper"):null;y?(y=y.querySelector(".e-menu-item"),(i.showItemOnClick||y&&i.getIndex(y.id,!0).length<=i.navIdx.length)&&i.closeMenu(i.navIdx[i.navIdx.length-1],t,!0)):i.closeMenu(i.navIdx[i.navIdx.length-1],t)}else if(g&&!n&&!e&&(i.hamburgerMode&&i.navIdx.length||1===i.navIdx.length))i.closeMenu(null,t);else if(g&&Va(e)&&i.navIdx.length)i.closeMenu(null,t);else if(!g||i.isMenu||e||0!==i.navIdx.length||i.isMenusClosed)if(g&&i.isMenu&&t&&t.target&&0!==i.navIdx.length&&Us(t.target,".e-menu-parent.e-control"))i.closeMenu(0,t);else if(!g||"right"!==i.keyType&&"click"!==i.keyType){var b=i.getUlByNavIdx(),w=i.getLIByClass(b,Lw);if(w&&(w.setAttribute("aria-expanded","false"),w.classList.remove(Lw),l.isFocused&&p&&(w.classList.add(Mw),w.focus())),!g&&i.hamburgerMode&&p&&"false"===p.getAttribute("aria-expanded")&&"true"===p.getAttribute("aria-haspopup")){Us(p,".e-menu-parent.e-control")?i.navIdx=[]:i.navIdx.pop(),i.navIdx.push(i.cliIdx);var C=i.getItem(i.navIdx);p.setAttribute("aria-expanded","true"),i.openMenu(p,C,-1,-1,t)}}else i.afterCloseMenu(t);else i.isMenusClosed=!0,i.closeMenu(0,t);i.removeStateWrapper()})}}},t.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&0===this.navIdx.length){var e=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}},t.prototype.getMenuItemModel=function(e,t){if(Va(e))return null;Va(t)&&(t=0);var n=this.getFields(t);return{text:e[n.text],id:e[n.id],items:e[n.child],separator:e[n.separator],iconCss:e[n.iconCss],url:e[n.url]}},t.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll("."+jw)).forEach(function(n){e.getIndex(n.querySelector("."+Hw).id,!0).length&&t.push(n)}),t},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&Is(this.element).valueOf()},t.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var n=this.filter.split(" "),i=0,o=n.length;i<o;i++)if(Us(e,"."+n[i])){t=!0;break}}return t},t.prototype.openMenu=function(e,t,n,i,o,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=null),void 0===r&&(r=this.targetElement);var a=this.getWrapper();this.lItem=e;var l=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,Va(n)&&(n=-1),Va(i)&&(i=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&Il.isDevice){a.lastChild.style.display="none";var s={text:t[this.getField("text")].toString(),iconCss:"e-icons e-previous"},d=new Uw(this.items[0],"items",s,!0),c=this.createItems([d]).children[0];c.classList.add(Nw),this.uList.insertBefore(c,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+jw,id:e.id+"-ej2menu-"+l+"-popup"}),this.hamburgerMode?(n=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&Ds([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.triggerBeforeOpen(e,this.uList,t,o,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,a.appendChild(this.uList),this.triggerBeforeOpen(e,this.uList,t,o,n,i,"none"))}else this.uList=this.element,this.uList.style.zIndex=kh(r||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,o,n,i,"none");if(this.isMenu&&this.template&&Ka()){var u=this.element.id+"Template";Object.keys(is).length&&(this.tempItem=this.tempItem.concat(is[u]),is[u]=this.tempItem),as(u,"Template",this)}},t.prototype.calculateIndentSize=function(e,t){var n=getComputedStyle(t),i=parseInt(n.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?i*=2:i+=i/4,e.style.textIndent=i+"px";var o=e.querySelectorAll(".e-blankicon");if(o&&o.length)for(var r=e.querySelector(".e-menu-icon"),a=getComputedStyle(r),l=parseInt(a.marginRight,10)+r.offsetWidth+i,s=0;s<o.length;s++)o[s].style.textIndent=l+"px"},t.prototype.generatePopup=function(e,t,n,i){var o=this,r=new Eh(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:n,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:i||this.enableRtl?"none":"flip",Y:"fit"},position:i&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:function(){var e=Bs(".e-menu-vscroll",r.element);e&&(e.style.height="inherit",e.style.maxHeight="");var t=Bs(".e-ul",r.element);r.element.style.maxHeight="",t.focus(),o.triggerOpen(t)}});return r},t.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),n=this.enableHtmlSanitizer?Pd.sanitize(this.title):this.title,i=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:n}),o=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(i),t.appendChild(o),e.insertBefore(t,this.element)},t.prototype.openHamburgerMenu=function(e){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")},t.prototype.closeHamburgerMenu=function(e){var t=this;this.hamburgerMode&&this.trigger("beforeClose",{element:this.element,parentItem:null,event:e,items:this.items,cancel:!1},function(n){n.cancel||(t.closeMenu(null,e),t.element.classList.add("e-hide-menu"),t.trigger("onClose",{element:t.element,parentItem:null,items:t.items}))})},t.prototype.callFit=function(e,t,n,i,o){return lh(e,null,{X:t,Y:n},{top:i,left:o})},t.prototype.triggerBeforeOpen=function(e,t,n,i,o,r,a){var l,s=this,d=(this.getIndex(e?e.id:null,!0),e?n[this.getField("children",this.navIdx.length-1)]:this.items),c={element:t,items:d,parentItem:this.isMenu&&Ka()?this.getMenuItemModel(n,this.navIdx.length-1):n,event:i,cancel:!1,top:o,left:r},u=a;this.trigger("beforeOpen",c,function(o){switch(u){case"menu":if(s.hamburgerMode||(s.top=o.top,s.left=o.left),s.popupWrapper.style.display="block",s.hamburgerMode||(s.popupWrapper.style.maxHeight=s.popupWrapper.getBoundingClientRect().height+"px",s.enableScrolling&&kw(s.createElement,s.popupWrapper,s.uList,"vscroll",s.enableRtl),s.checkScrollOffset(i)),s.hamburgerMode||s.left||s.top)s.popupObj.collision={X:"none",Y:"none"};else{if(s.popupObj.refreshPosition(s.lItem,!0),s.left=parseInt(s.popupWrapper.style.left,10),s.top=parseInt(s.popupWrapper.style.top,10),s.enableRtl&&(s.left=s.isNestedOrVertical?s.left-s.popupWrapper.offsetWidth-s.lItem.parentElement.offsetWidth+2:s.left-s.popupWrapper.offsetWidth+s.lItem.offsetWidth),l=sh(s.popupWrapper,null,s.left,s.top),(s.isNestedOrVertical||s.enableRtl)&&(l.indexOf("right")>-1||l.indexOf("left")>-1)){s.popupObj.collision.X="none";var r=Us(s.lItem,".e-"+s.getModuleName()+"-wrapper").offsetWidth;s.left=s.enableRtl?Ju(s.lItem,s.isNestedOrVertical?"right":"left","top").left:s.left-s.popupWrapper.offsetWidth-r+2}((l=sh(s.popupWrapper,null,s.left,s.top)).indexOf("left")>-1||l.indexOf("right")>-1)&&(s.left=s.callFit(s.popupWrapper,!0,!1,s.top,s.left).left),s.popupWrapper.style.left=s.left+"px"}s.popupWrapper.style.display="";break;case"none":s.top=o.top,s.left=o.left;break;case"hamburger":o.cancel||(s.element.classList.remove("e-hide-menu"),s.triggerOpen(s.element))}if("hamburger"!==u&&(o.cancel?(s.isMenu?(s.popupObj.destroy(),Ns(s.popupWrapper)):t.className.indexOf("e-ul")>-1&&Ns(t),s.navIdx.pop()):s.isMenu?s.hamburgerMode?(s.popupWrapper.style.top=s.top+"px",s.popupWrapper.style.left="0px",s.toggleAnimation(s.popupWrapper)):(s.setBlankIconStyle(s.popupWrapper),s.wireKeyboardEvent(s.popupWrapper),ad(s.popupWrapper,{selector:"."+Hw}),s.popupWrapper.style.left=s.left+"px",s.popupWrapper.style.top=s.top+"px",s.popupObj.show("None"!==s.animationSettings.effect?{name:s.animationSettings.effect,duration:s.animationSettings.duration,timingFunction:s.animationSettings.easing}:null,s.lItem)):(s.setBlankIconStyle(s.uList),s.setPosition(s.lItem,s.uList,s.top,s.left),s.toggleAnimation(s.uList))),"right"===s.keyType){var a,d=s.getUlByNavIdx();e.classList.remove(Mw),s.isMenu&&1===s.navIdx.length&&s.removeLIStateByClass([Lw],[s.getWrapper()]),e.classList.add(Lw),"enter"===s.action&&s.trigger("select",{element:e,item:n,event:i}),e.focus(),d=s.getUlByNavIdx(),a=s.isValidLI(d.children[0],0,s.action),d.children[a].classList.add(Mw),d.children[a].focus()}})},t.prototype.setBlankIconStyle=function(e){var t=[].slice.call(e.getElementsByClassName("e-blankicon"));if(t.length){var n=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),i=n.querySelector(".e-menu-icon");if(i){var o=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},r=getComputedStyle(i),a=parseInt(r.fontSize,10);parseInt(r.width,10)&&parseInt(r.width,10)>a&&(a=parseInt(r.width,10));var l=a+parseInt(r[o.margin],10)+parseInt(getComputedStyle(n)[o.padding],10)+"px";t.forEach(function(e){e.style[o.padding]=l})}}},t.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var n,i,o=Va(e)?this.element:Us(e.target,"."+Hw),r=Bs(".e-hscroll-bar",t);r.scrollLeft>o.offsetLeft&&(r.scrollLeft-=r.scrollLeft-o.offsetLeft),(n=r.scrollLeft+r.offsetWidth)<(i=o.offsetLeft+o.offsetWidth)&&(r.scrollLeft+=i-n)}},t.prototype.setPosition=function(e,t,n,i){if(this.toggleVisiblity(t),t===this.element||i>-1&&n>-1){if((a=sh(t,null,i,n)).indexOf("right")>-1&&(i-=t.offsetWidth),a.indexOf("bottom")>-1&&(n=(r=this.callFit(t,!1,!0,n,i)).top-20)<0){var o=pageYOffset+document.documentElement.clientHeight-t.getBoundingClientRect().height;o>-1&&(n=o)}(a=sh(t,null,i,n)).indexOf("left")>-1&&(i=(r=this.callFit(t,!0,!1,n,i)).left)}else if(Il.isDevice)n=Number(this.element.style.top.replace("px","")),i=Number(this.element.style.left.replace("px",""));else{var r;n=(r=Ju(e,this.enableRtl?"left":"right","top")).top,i=r.left;var a,l=(a=sh(t,null,this.enableRtl?i-t.offsetWidth:i,n)).indexOf("left")>-1||a.indexOf("right")>-1;l&&(i=(r=Ju(e,this.enableRtl?"right":"left","top")).left),(this.enableRtl||l)&&(i=this.enableRtl&&l?i:i-t.offsetWidth),a.indexOf("bottom")>-1&&(n=(r=this.callFit(t,!1,!0,n,i)).top)}this.toggleVisiblity(t,!1),t.style.top=n+"px",t.style.left=i+"px"},t.prototype.toggleVisiblity=function(e,t){void 0===t&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},t.prototype.createItems=function(e){var t=this,n=this.navIdx?this.navIdx.length:0,i=this.getFields(n);if(Ka()&&this.template&&e.length&&e[0].properties){var o=[];e.forEach(function(e,t){o.push({}),o[t][i.text]=e[i.text],e[i.id]||(e[i.id]=Ya("menuitem")),o[t][i.id]=e[i.id],o[t][i.iconCss]=e[i.iconCss],o[t][i.url]=e[i.url],o[t][i.child]=e[i.child],o[t][i.separator]=e[i.separator]}),e=o}var r=this.hasField(e,this.getField("iconCss",n)),a={showIcon:r,moduleName:"menu",fields:i,template:this.template,itemNavigable:!0,itemCreating:function(e){e.curData[e.fields[i.id]]||(e.curData[e.fields[i.id]]=Ya("menuitem")),e.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},t.isMenu&&!e.curData[t.getField("separator",n)]&&(e.curData.htmlAttributes["aria-label"]=e.curData[e.fields.text]),""===e.curData[e.fields[i.iconCss]]&&(e.curData[e.fields[i.iconCss]]=null)},itemCreated:function(e){if(e.curData[t.getField("separator",n)]&&(e.item.classList.add("e-separator"),e.item.removeAttribute("role")),!r||e.curData[e.fields.iconCss]||e.curData[t.getField("separator",n)]||e.item.classList.add("e-blankicon"),e.curData[e.fields.child]&&e.curData[e.fields.child].length){var i=t.createElement("span",{className:"e-icons e-caret"});e.item.appendChild(i),e.item.setAttribute("aria-haspopup","true"),e.item.setAttribute("aria-expanded","false"),t.isMenu||e.item.removeAttribute("role"),e.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(e.item.setAttribute("id",e.curData[e.fields.id].toString()),e.item.removeAttribute("data-uid"),e.item.classList.contains("e-level-1")&&e.item.classList.remove("e-level-1"),e.item.classList.contains("e-has-child")&&e.item.classList.remove("e-has-child")),t.trigger("beforeItemRender",{item:e.curData,element:e.item})}};this.setProperties({items:this.items},!0),this.isMenu&&(a.templateID=this.element.id+"Template");var l=Aw.createList(this.createElement,e,a,!this.template,this);return l.setAttribute("tabindex","0"),this.isMenu&&l.setAttribute("role","menu"),l},t.prototype.moverHandler=function(e){var t=e.target;this.liTrgt=t;var n=this.getLI(t),i=n?Us(n,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),o=this.getWrapper(),r=new RegExp("-ej2menu-(.*)-popup"),a=!1;if(i){if((""!==i.id?r.exec(i.id)[1]:i.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([Mw,Lw],[this.getWrapper()]),!this.navIdx.length)return;a=!0}n&&Us(n,".e-"+this.getModuleName()+"-wrapper")&&!a?(this.removeLIStateByClass([Mw],this.isMenu?[i].concat(this.getPopups()):[i]),this.removeLIStateByClass([Mw],this.isMenu?[o].concat(this.getPopups()):[o]),n.classList.add(Mw),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!a&&this.removeLIStateByClass([Mw],[i].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||t.parentElement===i||Us(t,".e-"+this.getModuleName()+"-popup")||n&&(!n||this.getIndex(n.id,!0).length)?a&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([Mw],[i]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},t.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=Us(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([Mw,Lw],[e])}},t.prototype.removeLIStateByClass=function(e,t){for(var n,i=function(i){e.forEach(function(e){(n=Bs("."+e,t[i]))&&n.classList.remove(e)})},o=0;o<t.length;o++)i(o)},t.prototype.getField=function(e,t){void 0===t&&(t=0);var n=this.fields[e];return"string"==typeof n?n:n[t]?n[t].toString():n[n.length-1].toString()},t.prototype.getFields=function(e){return void 0===e&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n][t])return!0;return!1},t.prototype.menuHeaderClickHandler=function(e){Us(e.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))},t.prototype.clickHandler=function(e){if(this.isTapHold)this.isTapHold=!1;else{var t=this.getWrapper(),n=e.target,i=this.cli=this.getLI(n),o=new RegExp("-ej2menu-(.*)-popup"),r=i?Us(i,".e-"+this.getModuleName()+"-wrapper"):null,a=i&&r&&(this.isMenu?this.getIndex(i.id,!0).length>0:t.firstElementChild.id===r.firstElementChild.id);if(Il.isDevice&&this.isMenu&&(this.removeLIStateByClass([Mw],[t].concat(this.getPopups())),this.mouseDownHandler(e)),i&&r&&this.isMenu){var l=r.id?o.exec(r.id)[1]:r.querySelector(".e-menu-parent").id;if(this.element.id!==l)return}if(a&&"click"===e.type&&!i.classList.contains(Nw)){this.setLISelected(i);var s=this.getIndex(i.id,!0),d=this.getItem(s);this.trigger("select",{element:i,item:d,event:e})}if(a&&("mouseover"===e.type||Il.isDevice||this.showItemOnClick)){var c=void 0;if(i.classList.contains(Nw))this.toggleAnimation(c=t.children[this.navIdx.length-1]),(h=this.getLIByClass(c,Lw))&&h.classList.remove(Lw),Ns(i.parentNode),this.navIdx.pop();else if(!i.classList.contains("e-separator")){this.showSubMenu=!0;var u=i.parentNode;if(this.cliIdx=this.getIdx(u,i),this.isMenu||!Il.isDevice){var h,p=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),Us(u,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,u);this.navIdx[p]===this.cliIdx&&(this.showSubMenu=!1),p===this.navIdx.length||"mouseover"===e.type&&!this.showSubMenu||((h=this.getLIByClass(u,Lw))&&h.classList.remove(Lw),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(i),this.closeMenu(p+1,e),this.showItemOnClick&&this.setLISelected(i))}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===n.tagName&&this.navIdx.length&&Us(n,".e-menu-vscroll")){var f=Us(n,"."+jw),g=Array.prototype.indexOf.call(this.getPopups(),f)+1;g<this.navIdx.length&&(this.closeMenu(g+1,e),f&&this.removeLIStateByClass([Mw,Lw],[f]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===n.tagName&&n.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):"UL"===n.tagName&&(this.isMenu?!n.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(n.querySelector("."+Hw).id,!0).length:n.parentElement===t)||(i||this.removeLIStateByClass([Lw],[t]),i&&i.querySelector(".e-caret")||this.closeMenu(null,e))}},t.prototype.afterCloseMenu=function(e){var t;if(this.showSubMenu){t=Us(this.showItemOnClick&&0===this.navIdx.length?e.target:this.element,".e-menu-parent.e-control");var n=this.navIdx.concat(this.cliIdx),i=this.getItem(n);if(i&&i[this.getField("children",n.length-1)]&&i[this.getField("children",n.length-1)].length?(("mouseover"===e.type||Il.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,i,null,null,e))):"mouseover"!==e.type&&this.closeMenu(null,e),!t){var o=this.getUlByNavIdx(),r=this.getLIByClass(o,Lw);r&&(r.setAttribute("aria-expanded","false"),r.classList.remove(Lw))}}this.keyType=""},t.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,Lw);t&&t.classList.remove(Lw),this.isMenu||e.classList.remove(Mw),e.classList.add(Lw)},t.prototype.getLIByClass=function(e,t){for(var n=0,i=e.children.length;n<i;n++)if(e.children[n].classList.contains(t))return e.children[n];return null},t.prototype.getItemIndex=function(e,t){return this.getIndex("string"==typeof e?e:e.id,!1!==t)},t.prototype.setItem=function(e,t,n){var i=this.getIndex(t||e.id,!1!==n),o=this.getItem(i);o.iconCss=e.iconCss,o.id=e.id,o.text=e.text,o.url=e.url,o.separator=e.separator,o.items=e.items},t.prototype.getItem=function(e){var t=(e=e.slice()).pop();return this.getItems(e)[t]},t.prototype.getItems=function(e){for(var t=this.items,n=0;n<e.length;n++)t=t[e[n]][this.getField("children",n)];return t},t.prototype.setItems=function(e,t){var n=this.getItems(t);n.splice(0,n.length);for(var i=0;i<e.length;i++)n.splice(i,0,e[i])},t.prototype.getIdx=function(e,t,n){void 0===n&&(n=!0);var i=Array.prototype.indexOf.call(e.querySelectorAll("li"),t);return i=this.isMenu&&this.template&&Ka()?Array.prototype.indexOf.call(e.querySelectorAll(t.tagName),t):Array.prototype.indexOf.call(e.children,t),n&&e.children[0].classList.contains(Nw)&&i--,i},t.prototype.getLI=function(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:Us(e,"li.e-menu-item")},t.prototype.updateItemsByNavIdx=function(){for(var e=this.items,t=0,n=0;n<this.navIdx.length&&(e=e[n].items);n++){var i=this.getUlByNavIdx(++t);if(!i)break;this.updateItem(i,e)}},t.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},t.prototype.onPropertyChanged=function(e,t){for(var n=this,i=this.getWrapper(),o=function(o){switch(o){case"cssClass":t.cssClass&&As([i],t.cssClass.split(" ")),e.cssClass&&Ds([i],e.cssClass.split(" "));break;case"enableRtl":i.classList.toggle("e-rtl");break;case"showItemOnClick":r.unWireEvents(),r.showItemOnClick=e.showItemOnClick,r.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var a;r.element.classList.contains("e-vertical")?kw(r.createElement,i,r.element,"vscroll",r.enableRtl):kw(r.createElement,i,r.element,"hscroll",r.enableRtl),r.getPopups().forEach(function(e){a=Bs(".e-ul",e),kw(n.createElement,e,a,"vscroll",n.enableRtl)})}else{var l=i.children[0];r.element.classList.contains("e-vertical")?Dw(Qa(l,_w),l):Dw(Qa(l,Ew),l),i.style.overflow="",i.appendChild(r.element),r.getPopups().forEach(function(e){Dw(Qa(l=e.children[0],_w),l),e.style.overflow=""})}break;case"items":var s=void 0,d=void 0,c=void 0;if(Object.keys(t.items).length){var u=Object.keys(e.items);for(h=0;h<u.length;h++)(d=r.getChangedItemIndex(e,[],Number(u[h]))).length<=r.getWrapper().children.length&&(s=d.pop(),c=r.getItems(d),r.insertAfter([c[s]],c[s].text),r.removeItem(c,d,s),r.setItems(c,d)),d.length=0}else{r.updateItem(r.element,r.items);for(var h=1,p=i.childElementCount;h<p;h++)Ns(i.lastElementChild);r.isMenu&&Ka()?r.updateItemsByNavIdx():r.navIdx=[]}}},r=this,a=0,l=Object.keys(e);a<l.length;a++)o(l[a])},t.prototype.updateItem=function(e,t){Ka()?e=this.removeChildElement(e):e.innerHTML="",[].slice.call(this.createItems(t).children).forEach(function(t){e.appendChild(t)})},t.prototype.getChangedItemIndex=function(e,t,n){t.push(n);var i=Object.keys(e.items[n]).pop();if("items"===i){var o=e.items[n],r=Object.keys(o.items).pop();r&&this.getChangedItemIndex(o,t,Number(r))}else"isParentArray"===i&&t.length>1&&t.pop();return t},t.prototype.removeItem=function(e,t,n){e.splice(n,1);var i=this.getWrapper().children;t.length<i.length&&Ns(i[t.length].children[n])},t.prototype.unWireEvents=function(e){void 0===e&&(e=this.target);var t=this.getWrapper();if(e){for(var n=void 0,i=void 0,o=js(e),r=0,a=o.length;r<a;r++)n=o[r],this.isMenu?Pl.remove(n,"click",this.menuHeaderClickHandler):Il.isIos?(i=Qa(n,Dd))&&i.destroy():Pl.remove(n,"contextmenu",this.cmenuHandler);if(!this.isMenu){Pl.remove(this.targetElement,"scroll",this.scrollHandler);for(var l=0,s=_h(this.targetElement);l<s.length;l++)Pl.remove(s[l],"scroll",this.scrollHandler)}}Il.isDevice||(Pl.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),Pl.remove(document,"mousedown",this.delegateMouseDownHandler)),Pl.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},t.prototype.unWireKeyboardEvent=function(e){var t=Qa(e,Td);t&&t.destroy()},t.prototype.toggleAnimation=function(e,t){var n,i,o=this;void 0===t&&(t=!0),"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(e){o.hamburgerMode?(i=e.element.parentElement,e.element.style.position="absolute",n=i.offsetHeight,e.element.style.maxHeight=e.element.offsetHeight+"px",i.style.maxHeight=""):(e.element.style.display="block",e.element.style.maxHeight=e.element.getBoundingClientRect().height+"px")},progress:function(e){o.hamburgerMode&&(i.style.minHeight=n+e.element.offsetHeight+"px")},end:function(e){o.hamburgerMode?(e.element.style.position="",e.element.style.maxHeight="",i.style.minHeight="",e.element.style.top="0px",e.element.children[0].focus(),o.triggerOpen(e.element.children[0])):o.end(e.element,t)}}):this.end(e,t)},t.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null;this.trigger("onOpen",{element:e,parentItem:t,items:t?t.items:this.items})},t.prototype.end=function(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+Mw))e.querySelector("."+Mw).focus();else{var n=void 0;(n=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1])?n.querySelector("."+Lw).focus():this.element.focus()}else if(e===this.element){var i=this.getLIByClass(this.element,Mw);i&&i.classList.remove(Mw);var o=this.getLIByClass(this.element,Lw);o&&o.classList.remove(Lw),e.style.display="none"}else Ns(e)},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return Us(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,t,n,i,o,r){var a;void 0===n&&(n=this.items),void 0===i&&(i=[]),void 0===o&&(o=!1),void 0===r&&(r=0),r=o?r+1:0;for(var l=0,s=n.length;l<s;l++){if(a=n[l],(t?a[this.getField("itemId",r)]:a[this.getField("text",r)])===e){i.push(l);break}if(a[this.getField("children",r)]&&a[this.getField("children",r)].length){if(-1!==(i=this.getIndex(e,t,a[this.getField("children",r)],i,!0,r))[i.length-1]){i.unshift(l);break}l!==s-1&&i.pop()}else l===s-1&&i.push(-1)}return o||-1!==i[0]?i:[]},t.prototype.enableItems=function(e,t,n){var i,o,r;void 0===t&&(t=!0);for(var a,l="e-disabled",s=0;s<e.length;s++){if(r=this.getIndex(e[s],n),this.navIdx.length){if(1!==r.length){a=!1;for(var d=0,c=r.length-1;d<c;d++)if(r[d]!==this.navIdx[d]){a=!0;break}if(a)continue}}else if(1!==r.length)continue;o=r.pop(),(i=this.getUlByNavIdx(r.length))&&(t?this.isMenu?(i.children[o].classList.remove(l),i.children[o].removeAttribute("aria-disabled")):Il.isDevice&&!i.classList.contains("e-contextmenu")?i.children[o+1].classList.remove(l):i.children[o].classList.remove(l):this.isMenu?(i.children[o].classList.add(l),i.children[o].setAttribute("aria-disabled","true")):Il.isDevice&&!i.classList.contains("e-contextmenu")?i.children[o+1].classList.add(l):i.children[o].classList.add(l))}},t.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},t.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},t.prototype.showHideItems=function(e,t,n){for(var i,o,r,a=0;a<e.length;a++)o=(r=this.getIndex(e[a],n)).pop(),(i=this.getUlByNavIdx(r.length))&&(t?Il.isDevice&&!i.classList.contains("e-contextmenu")?i.children[o+1].classList.add(Bw):i.children[o].classList.add(Bw):Il.isDevice&&!i.classList.contains("e-contextmenu")?i.children[o+1].classList.remove(Bw):i.children[o].classList.remove(Bw))},t.prototype.removeItems=function(e,t){for(var n,i,o,r=0;r<e.length;r++)n=(i=this.getIndex(e[r],t)).pop(),o=this.getItems(i),this.removeItem(o,i,n)},t.prototype.insertAfter=function(e,t,n){this.insertItems(e,t,n)},t.prototype.insertBefore=function(e,t,n){this.insertItems(e,t,n,!1)},t.prototype.insertItems=function(e,t,n,i){var o,r,a,l,s;void 0===i&&(i=!0);for(var d=0;d<e.length;d++){r=(a=this.getIndex(t,n)).pop(),l=this.getItems(a),s=new Uw(l[0],"items",e[d],!0),l.splice(i?r+1:r,0,s);var c=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(a.length<c.length){r=i?r+1:r,this.hasField(l,this.getField("iconCss",a.length-1)),o=this.createItems(l).children[r];var u=this.isMenu?Bs(".e-menu-parent",c[a.length]):c[a.length];u.insertBefore(o,u.children[r])}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach(function(t){e.element.style.removeProperty(t)}),["role","tabindex","class","style"].forEach(function(t){"class"===t&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(t)&&e.element.getAttribute(t)||e.element.removeAttribute(t),e.isMenu&&"class"===t&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")})},t.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),Ka()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t);else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)Ds([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var n=this.clonedElement.nextElementSibling;n&&n!==t?this.clonedElement.parentElement.insertBefore(this.element,n):this.clonedElement.parentElement.appendChild(this.element),Ka()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",Rs([].slice.call(this.clonedElement.children),this.element),Ns(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(Ns(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):Ns(t),e.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}},Object(O.__decorate)([nd()],t.prototype,"beforeItemRender",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeOpen",void 0),Object(O.__decorate)([nd()],t.prototype,"onOpen",void 0),Object(O.__decorate)([nd()],t.prototype,"beforeClose",void 0),Object(O.__decorate)([nd()],t.prototype,"onClose",void 0),Object(O.__decorate)([nd()],t.prototype,"select",void 0),Object(O.__decorate)([nd()],t.prototype,"created",void 0),Object(O.__decorate)([Ks("")],t.prototype,"cssClass",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"showItemOnClick",void 0),Object(O.__decorate)([Ks("")],t.prototype,"target",void 0),Object(O.__decorate)([Ks("")],t.prototype,"filter",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"template",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableScrolling",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableHtmlSanitizer",void 0),Object(O.__decorate)([Qs({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},zw)],t.prototype,"fields",void 0),Object(O.__decorate)([ed([],Uw)],t.prototype,"items",void 0),Object(O.__decorate)([Qs({duration:400,easing:"ease",effect:"SlideDown"},Fw)],t.prototype,"animationSettings",void 0),Object(O.__decorate)([id],t)}(vd),qw="e-acrdn-header",Vw="e-acrdn-panel",Ww="e-acrdn-content",Yw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("SlideDown")],t.prototype,"effect",void 0),Object(O.__decorate)([Ks(400)],t.prototype,"duration",void 0),Object(O.__decorate)([Ks("linear")],t.prototype,"easing",void 0),t}(fd),Xw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Qs({effect:"SlideUp",duration:400,easing:"linear"},Yw)],t.prototype,"collapse",void 0),Object(O.__decorate)([Qs({effect:"SlideDown",duration:400,easing:"linear"},Yw)],t.prototype,"expand",void 0),t}(fd),Zw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks(null)],t.prototype,"content",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"header",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"cssClass",void 0),Object(O.__decorate)([Ks(null)],t.prototype,"iconCss",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"expanded",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"visible",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"disabled",void 0),t}(fd),Jw=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},i}return Object(O.__extends)(t,e),t.prototype.destroy=function(){var t=this;this.isReact&&this.clearTemplate();var n=this.element;if(e.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(n.children).forEach(function(e){n.removeChild(e)}),this.trgtEle)for(;this.ctrlTem.firstElementChild;)n.appendChild(this.ctrlTem.firstElementChild);n.classList.remove("e-acrdn-root"),n.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach(function(e){t.element.removeAttribute(e)}),!this.isNested&&hd&&this.removeRippleEffect()},t.prototype.preRender=function(){var e=Us(this.element,"."+Vw);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),Va(e)?this.element.classList.add("e-acrdn-root"):(e.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,"e-rtl")},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.render=function(){this.isServerRendered?this.wireFocusEvents():(this.initializeheaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl()),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=Ja(this.width),t=Ja(this.height);Fs(this.element,{width:e,height:t}),Va(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),Hs(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?Bs("div",this.element):null,this.renderItems(),this.initItemExpand()},t.prototype.wireFocusEvents=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-acrdn-item"));e<t.length;e++){var n=t[e],i=n.querySelector("."+qw);n.childElementCount>0&&i&&(Pl.clearEvents(i),Pl.add(i,"focus",this.focusIn,this),Pl.add(i,"blur",this.focusOut,this))}},t.prototype.unwireEvents=function(){Pl.remove(this.element,"click",this.clickHandler),Va(this.keyModule)||this.keyModule.destroy()},t.prototype.wireEvents=function(){Pl.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||(this.removeRippleEffect=ad(this.element,{selector:"."+qw})),this.isNested||(this.keyModule=new Td(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},t.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return rs(document.querySelector(e).innerHTML.trim())}catch(t){return rs(e)}},t.prototype.initializeheaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},t.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},t.prototype.getheaderTemplate=function(){return this.headerTemplateFn},t.prototype.getItemTemplate=function(){return this.itemTemplateFn},t.prototype.focusIn=function(e){e.target.parentElement.classList.add("e-item-focus")},t.prototype.focusOut=function(e){e.target.parentElement.classList.remove("e-item-focus")},t.prototype.ctrlTemplate=function(){this.ctrlTem=this.element.cloneNode(!0);var e=Bs(".e-accordion-container",this.element),t=[];[].slice.call(e?e.children:this.element.children).forEach(function(e){t.push({header:e.childElementCount>0&&e.children[0]?e.children[0]:"",content:e.childElementCount>1&&e.children[1]?e.children[1]:""}),e.parentNode.removeChild(e)}),e&&this.element.removeChild(e),this.setProperties({items:t},!0)},t.prototype.toggleIconGenerate=function(){var e=this.createElement("div",{className:"e-toggle-icon"}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e},t.prototype.initItemExpand=function(){var e=this.initExpand.length;if(0!==e){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(var t=0;t<e;t++)this.expandItem(!0,this.initExpand[t]);this.isReact&&this.renderReactTemplates()}},t.prototype.renderItems=function(){var e,t,n=this,i=this.element;if(Va(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach(function(e,o){t=n.renderInnerItem(e,o),i.appendChild(t),t.childElementCount>0&&(Pl.add(t.querySelector("."+qw),"focus",n.focusIn,n),Pl.add(t.querySelector("."+qw),"blur",n.focusOut,n))});else{var o=this.items;i&&o.length>0&&o.forEach(function(t,o){e=n.renderInnerItem(t,o),i.appendChild(e),e.childElementCount>0&&(Pl.add(e.querySelector("."+qw),"focus",n.focusIn,n),Pl.add(e.querySelector("."+qw),"blur",n.focusOut,n))})}this.isReact&&this.renderReactTemplates()},t.prototype.clickHandler=function(e){var t,n,i=this,o=e.target,r=this.getItems(),a={};if(Us(o,".e-accordion")===this.element){o.classList.add("e-target");var l,s=Us(o,".e-acrdn-item"),d=Us(o,"."+qw),c=Us(o,"."+Vw);if(s&&(Va(d)||Va(c))&&(d=s.children[0],c=s.children[1]),d&&(n=Bs(".e-toggle-icon",d)),d?l=Us(d,".e-acrdn-item"):c&&(l=Us(c,".e-acrdn-item")),t=this.getIndexByItem(s),l&&(a.item=r[this.getIndexByItem(l)]),a.originalEvent=e,Va(n)||!(s.childElementCount<=1)||!Va(c)&&Va(Bs(".e-acrdn-header .e-toggle-icon",l)))this.afterContentRender(o,a,s,d,c,l);else if(this.isServerRendered){var u=s.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",t).then(function(){i.isDestroyed||i.afterContentRender(o,a,s,d,c,l)}):this.interopAdaptor.invokeMethodAsync("OnDataClick",u).then(function(){i.isDestroyed||i.afterContentRender(o,a,s,d,c,l)})}else s.appendChild(this.contentRendering(t)),this.ariaAttrUpdate(s),this.afterContentRender(o,a,s,d,c,l);this.isReact&&this.renderReactTemplates()}},t.prototype.afterContentRender=function(e,t,n,i,o,r){var a=this,l=[];this.trigger("clicked",t);var s=o&&!Va(Bs(".e-target",o)),d=o&&!Va(Bs(".e-accordion",o))&&Va(Us(e,".e-acrdn-panel .e-accordion")),c=o&&Va(Bs(".e-accordion",o))||!(Us(e,".e-accordion")===this.element);if(s=s&&(d||c),e.classList.remove("e-target"),!(e.classList.contains(Vw)||e.classList.contains(Ww)||s)){var u=this.element.querySelector(".e-accordion-container");[].slice.call(u?u.children:this.element.children).forEach(function(e){e.classList.contains("e-active")&&l.push(e)});var h=[].slice.call(this.element.querySelectorAll(".e-acrdn-item [e-animate]"));if(h.length>0)for(var p=0,f=h;p<f.length;p++)l.push(f[p].parentElement);var g=-1!==l.indexOf(r)&&"true"===o.getAttribute("e-animate"),m=!1;if(!Va(n)&&!Va(i)){var v=Bs("."+Vw,n),y=Us(n,".e-acrdn-root").querySelector(".e-expand-state");if(Va(v))return;m=y===n,!Is(v)||g&&!r.classList.contains("e-selected")?(l.length>0&&"Single"===this.expandMode&&!g&&l.forEach(function(e){a.collapse(Bs("."+Vw,e)),e.classList.remove("e-expand-state")}),this.expand(v)):this.collapse(v),Va(y)||m||y.classList.remove("e-expand-state")}}},t.prototype.eleMoveFocus=function(e,t,n){var i,o=Us(n,".e-acrdn-item");n===t?i=("moveUp"===e?n.lastElementChild:n).querySelector("."+qw):n.classList.contains(qw)&&(o="moveUp"===e?o.previousElementSibling:o.nextElementSibling)&&(i=Bs("."+qw,o)),i&&i.focus()},t.prototype.keyActionHandler=function(e){var t=e.target;if(!Va(Us(e.target,qw))||t.classList.contains("e-accordion")||t.classList.contains(qw)){var n,i=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,i,t);break;case"space":case"enter":!Va(n=t.nextElementSibling)&&n.classList.contains(Vw)?"true"!==n.getAttribute("e-animate")&&t.click():t.click();break;case"home":case"end":("home"===e.action?i.firstElementChild.children[0]:i.lastElementChild.children[0]).focus()}}},t.prototype.headerEleGenerate=function(){var e=this.createElement("div",{className:qw,id:Ya("acrdn_header")});return Hs(e,{tabindex:"0",role:"heading","aria-selected":"false","aria-disabled":"false","aria-level":this.getItems().length.toString()}),e},t.prototype.renderInnerItem=function(e,t){var n;if((n=this.createElement("div",{className:"e-acrdn-item"})).id=Ya("acrdn_item"),Hs(n,{"aria-expanded":"false"}),this.headerTemplate){var i=this.headerEleGenerate(),o=this.createElement("div",{className:"e-acrdn-header-content"});return i.appendChild(o),Rs(this.getheaderTemplate()(e,this,"headerTemplate",this.element.id+"_headerTemplate",!1),o),n.appendChild(i),i.appendChild(this.toggleIconGenerate()),this.add(n,"e-select"),n}e.header&&this.angularnativeCondiCheck(e,"header")&&(this.enableHtmlSanitizer&&"string"==typeof e.header&&(e.header=Pd.sanitize(e.header)),i=this.headerEleGenerate(),o=this.createElement("div",{className:"e-acrdn-header-content"}),i.appendChild(o),i.appendChild(this.fetchElement(o,e.header,t,!0)),n.appendChild(i));var r=Bs("."+qw,n);if(!e.expanded||Va(t)||this.enablePersistence||-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&Ds([n],e.cssClass.split(" ")),e.disabled&&Ds([n],"e-overlay"),!1===e.visible&&Ds([n],"e-hide"),e.iconCss){var a=this.createElement("div",{className:"e-acrdn-header-icon"}),l=this.createElement("span",{className:e.iconCss+" e-icons"});a.appendChild(l),Va(r)?((r=this.headerEleGenerate()).appendChild(a),n.appendChild(r)):r.insertBefore(a,r.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){var s=this.toggleIconGenerate();Va(r)&&(r=this.headerEleGenerate(),n.appendChild(r)),r.appendChild(s),this.add(n,"e-select")}return n},t.prototype.angularnativeCondiCheck=function(e,t){var n="content"===t?e.content:e.header;if(this.isAngular&&!Va(n.elementRef)){var i=n.elementRef.nativeElement.data;if(Va(i)||""===i||-1===i.indexOf("bindings="))return!0;var o=JSON.parse(n.elementRef.nativeElement.data.replace("bindings=",""));return!(!Va(o)&&"false"===o["ng-reflect-ng-if"])}return!0},t.prototype.fetchElement=function(e,t,n,i){var o,r,a;try{if(document.querySelectorAll(t).length&&"Button"!==t){var l=document.querySelector(t);r=l.outerHTML.trim(),e.appendChild(l),l.style.display=""}}catch(n){"string"==typeof t?e.innerHTML=Pd.sanitize(t):!Va(this.trgtEle)&&t instanceof HTMLElement?(e.appendChild(t),e.firstElementChild.style.display=""):o=rs(t)}if(!Va(o)){this.isReact&&this.renderReactTemplates();var s=void 0,d=void 0;e.classList.contains("e-acrdn-header-content")?(s=this.element.id+n+"_header",d="header"):e.classList.contains(Ww)&&(s=this.element.id+n+"_content",d="content"),a=o({},this,d,s,this.isStringTemplate)}return Va(a)||!(a.length>0)||Va(a[0].tagName)&&1===a.length?0===e.childElementCount&&(e.innerHTML=Pd.sanitize(t)):[].slice.call(a).forEach(function(t){Va(t.tagName)||(t.style.display=""),e.appendChild(t)}),Va(r)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e},t.prototype.ariaAttrUpdate=function(e){var t=Bs("."+qw,e),n=Bs("."+Vw,e);t.setAttribute("aria-controls",n.id),n.setAttribute("aria-labelledby",t.id),n.setAttribute("role","definition")},t.prototype.contentRendering=function(e){var t=this.createElement("div",{className:Vw+" e-content-hide",id:Ya("acrdn_panel")});Hs(t,{"aria-hidden":"true"});var n=this.createElement("div",{className:Ww});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),Rs(this.getItemTemplate()(this.dataSource[e],this,"itemTemplate",this.element.id+"_itemTemplate",!1),n),t.appendChild(n)):(this.enableHtmlSanitizer&&(this.items[e].content=Pd.sanitize(this.items[e].content)),t.appendChild(this.fetchElement(n,this.items[e].content,e,!1))),t},t.prototype.expand=function(e){var t,n=this,i=this.getItems(),o=Us(e,".e-acrdn-item");if(!(Va(e)||Is(e)&&"true"!==e.getAttribute("e-animate")||o.classList.contains("e-overlay"))){var r=Us(o,".e-acrdn-root").querySelector(".e-expand-state"),a={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},l=Bs(".e-toggle-icon",o).firstElementChild;t={element:o,item:i[this.getIndexByItem(o)],index:this.getIndexByItem(o),content:o.querySelector("."+Vw),isExpanded:!0},this.trigger("expanding",t,function(t){t.cancel||(l.classList.add("e-toggle-animation"),n.expandedItemsPush(o),Va(r)||r.classList.remove("e-expand-state"),o.classList.add("e-expand-state"),"None"===a.name?(n.expandProgress("begin",l,e,o,t),n.expandProgress("end",l,e,o,t)):n.expandAnimation(a.name,l,e,o,a,t))})}},t.prototype.expandAnimation=function(e,t,n,i,o,r){var a,l=this;this.lastActiveItemId=i.id,"SlideDown"===e?(o.begin=function(){l.expandProgress("begin",t,n,i,r),n.style.position="absolute",a=i.offsetHeight,n.style.maxHeight=n.offsetHeight+"px",i.style.maxHeight=""},o.progress=function(){i.style.minHeight=a+n.offsetHeight+"px"},o.end=function(){Fs(n,{position:"",maxHeight:""}),i.style.minHeight="",l.expandProgress("end",t,n,i,r)}):(o.begin=function(){l.expandProgress("begin",t,n,i,r)},o.end=function(){l.expandProgress("end",t,n,i,r)}),new rd(o).animate(n)},t.prototype.expandProgress=function(e,t,n,i,o){this.remove(n,"e-content-hide"),this.add(i,"e-selected"),this.add(t,"e-expand-icon"),"end"===e&&(this.add(i,"e-active"),n.setAttribute("aria-hidden","false"),Hs(i,{"aria-expanded":"true"}),Hs(n.previousElementSibling,{"aria-selected":"true"}),t.classList.remove("e-toggle-animation"),this.trigger("expanded",o))},t.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);if(-1===this.expandedIndices.indexOf(t)){var n=[].slice.call(this.expandedIndices);n.push(t),this.setProperties({expandedIndices:n},!0)}},t.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},t.prototype.getItemElements=function(){var e=[];return[].slice.call(this.element.children).forEach(function(t){t.classList.contains("e-acrdn-item")&&e.push(t)}),e},t.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e),n=[].slice.call(this.expandedIndices);n.splice(n.indexOf(t),1),this.setProperties({expandedIndices:n},!0)},t.prototype.collapse=function(e){var t,n=this,i=this.getItems(),o=Us(e,".e-acrdn-item");if(!Va(e)&&Is(e)&&!o.classList.contains("e-overlay")){var r={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},a=Bs(".e-toggle-icon",o).firstElementChild;t={element:o,item:i[this.getIndexByItem(o)],index:this.getIndexByItem(o),content:o.querySelector("."+Vw),isExpanded:!1},this.trigger("expanding",t,function(t){t.cancel||(n.expandedItemsPop(o),o.classList.add("e-expand-state"),a.classList.add("e-toggle-animation"),"None"===r.name?(n.collapseProgress("begin",a,e,o,t),n.collapseProgress("end",a,e,o,t)):n.collapseAnimation(r.name,e,o,a,r,t))})}},t.prototype.collapseAnimation=function(e,t,n,i,o,r){var a,l,s,d,c=this;this.lastActiveItemId=n.id,"SlideUp"===e?(o.begin=function(){n.style.minHeight=(s=n.offsetHeight)+"px",t.style.position="absolute",a=n.offsetHeight,t.style.maxHeight=(l=t.offsetHeight)+"px",c.collapseProgress("begin",i,t,n,r)},o.progress=function(){(d=a-(l-t.offsetHeight))<s&&(n.style.minHeight=d+"px")},o.end=function(){t.style.display="none",c.collapseProgress("end",i,t,n,r),n.style.minHeight="",Fs(t,{position:"",maxHeight:"",display:""})}):(o.begin=function(){c.collapseProgress("begin",i,t,n,r)},o.end=function(){c.collapseProgress("end",i,t,n,r)}),new rd(o).animate(t)},t.prototype.collapseProgress=function(e,t,n,i,o){this.remove(t,"e-expand-icon"),this.remove(i,"e-selected"),"end"===e&&(this.add(n,"e-content-hide"),t.classList.remove("e-toggle-animation"),this.remove(i,"e-active"),n.setAttribute("aria-hidden","true"),Hs(i,{"aria-expanded":"false"}),Hs(n.previousElementSibling,{"aria-selected":"false"}),this.trigger("expanded",o))},t.prototype.getModuleName=function(){return"accordion"},t.prototype.itemAttribUpdate=function(){var e=this.getItems(),t=this.getItemElements(),n=e.length;t.forEach(function(e){Bs("."+qw,e).setAttribute("aria-level",""+n)})},t.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},t.prototype.addItem=function(e,t){var n=this,i=this.element,o=this.getItemElements(),r=this.getItems();Va(t)&&(t=r.length),i.childElementCount>=t&&(e instanceof Array?e:[e]).forEach(function(e,a){var l=t+a;r.splice(l,0,e);var s=n.renderInnerItem(e,l);i.childElementCount===l?i.appendChild(s):i.insertBefore(s,o[l]),Pl.add(s.querySelector("."+qw),"focus",n.focusIn,n),Pl.add(s.querySelector("."+qw),"blur",n.focusOut,n),n.itemAttribUpdate(),n.expandedIndices=[],n.expandedItemRefresh(i),e&&e.expanded&&n.expandItem(!0,l)}),this.isReact&&this.renderReactTemplates()},t.prototype.expandedItemRefresh=function(e){var t=this,n=this.getItemElements();[].slice.call(n).forEach(function(e){e.classList.contains("e-selected")&&t.expandedItemsPush(e)})},t.prototype.removeItem=function(e){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],e);var t=this.getItemElements()[e],n=this.getItems();Va(t)||(this.restoreContent(e),Ns(t),n.splice(e,1),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(this.element))},t.prototype.select=function(e){var t=this.getItemElements()[e];Va(t)||Va(Bs("."+qw,t))||t.children[0].focus()},t.prototype.hideItem=function(e,t){var n=this.getItemElements()[e];Va(n)||(Va(t)&&(t=!0),t?this.add(n,"e-hide"):this.remove(n,"e-hide"))},t.prototype.enableItem=function(e,t){var n=this.getItemElements()[e];if(!Va(n)){var i=n.firstElementChild;t?(this.remove(n,"e-overlay"),Hs(i,{tabindex:"0","aria-disabled":"false"}),i.focus()):(n.classList.contains("e-active")&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,i)),this.add(n,"e-overlay"),i.setAttribute("aria-disabled","true"),i.removeAttribute("tabindex"))}},t.prototype.refresh=function(){this.isServerRendered||e.prototype.refresh.call(this)},t.prototype.expandItem=function(e,t){var n=this,i=this.getItemElements();if(Va(t))if("Single"===this.expandMode&&e)this.itemExpand(e,a=i[i.length-1],this.getIndexByItem(a));else{var o=Bs("#"+this.lastActiveItemId,this.element);[].slice.call(i).forEach(function(t){n.itemExpand(e,t,n.getIndexByItem(t)),t.classList.remove("e-expand-state")});var r=Bs(".e-expand-state",this.element);r&&r.classList.remove("e-expand-state"),o&&o.classList.add("e-expand-state")}else{var a;if(Va(a=i[t])||!a.classList.contains("e-select")||a.classList.contains("e-active")&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,a,t)}},t.prototype.itemExpand=function(e,t,n){var i=this,o=t.children[1];if(!t.classList.contains("e-overlay")){if(Va(o)&&e)if(this.isServerRendered){var r=t.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",n).then(function(){i.isDestroyed||i.expand(o=t.children[1])}):this.interopAdaptor.invokeMethodAsync("OnDataClick",r).then(function(){i.isDestroyed||i.expand(o=t.children[1])})}else o=this.contentRendering(n),t.appendChild(o),this.ariaAttrUpdate(t),this.expand(o);else Va(o)||(e?this.expand(o):this.collapse(o));this.isReact&&this.renderReactTemplates()}},t.prototype.destroyItems=function(){this.restoreContent(null),this.isReact&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll(".e-acrdn-item")).forEach(function(e){Ns(e)})},t.prototype.restoreContent=function(e){var t;t=Va(e)?this.element:this.element.querySelectorAll(".e-acrdn-item")[e],this.templateEle.forEach(function(e){Va(t.querySelector(e))||(document.body.appendChild(t.querySelector(e)).style.display="none")})},t.prototype.updateItem=function(e,t){if(!Va(e)){var n=this.getItems(),i=n[t];n.splice(t,1),this.restoreContent(t),Ns(e),this.addItem(i,t)}},t.prototype.setTemplate=function(e,t,n){t.innerHTML="",this.templateCompile(t,e,n),this.isReact&&this.renderReactTemplates()},t.prototype.templateCompile=function(e,t,n){var i=this.createElement("div");this.fetchElement(i,t,n,!1),0!==i.childNodes.length&&[].slice.call(i.childNodes).forEach(function(t){e.appendChild(t)})},t.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},t.prototype.onPropertyChanged=function(e,t){for(var n=this.element,i=!1,o=0,r=Object.keys(e);o<r.length;o++)switch(r[o]){case"items":if(this.isServerRendered){this.wireFocusEvents();break}if(e.items instanceof Array&&t.items instanceof Array)i=!0;else for(var a=Object.keys(e.items),l=0;l<a.length;l++){var s=parseInt(Object.keys(e.items)[l],10),d=Object.keys(e.items[s])[0],c=js(".e-acrdn-item",this.element)[s],u=Object(t.items[s])[d],h=Object(e.items[s])[d];if(("header"===d||"iconCss"===d||"expanded"===d||"content"===d&&""===u)&&this.updateItem(c,s),"cssClass"!==d||Va(c)||(c.classList.remove(u),c.classList.add(h)),"visible"!==d||Va(c)||(!1===Object(e.items[s])[d]?c.classList.add("e-hide"):c.classList.remove("e-hide")),"disabled"!==d||Va(c)||this.enableItem(s,!h),"content"===d&&!Va(c)&&2===c.children.length)if("function"==typeof h){var p=c.querySelector("."+Ww);p.innerHTML="",this.setTemplate(h,p,s)}else c.classList.contains("e-selected")&&this.expandItem(!1,s),Ns(c.querySelector("."+Vw))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),i=!0;break;case"headerTemplate":this.initializeheaderTemplate(),i=!0;break;case"itemTemplate":this.initializeItemTemplate(),i=!0;break;case"enableRtl":e.enableRtl?this.add(n,"e-rtl"):this.remove(n,"e-rtl");break;case"height":Fs(this.element,{height:Ja(e.height)});break;case"width":Fs(this.element,{width:Ja(e.width)});break;case"expandMode":"Single"===e.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedIndices.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}i&&!this.isServerRendered&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},Object(O.__decorate)([ed([],Zw)],t.prototype,"items",void 0),Object(O.__decorate)([Ks([])],t.prototype,"dataSource",void 0),Object(O.__decorate)([Ks()],t.prototype,"itemTemplate",void 0),Object(O.__decorate)([Ks()],t.prototype,"headerTemplate",void 0),Object(O.__decorate)([Ks("100%")],t.prototype,"width",void 0),Object(O.__decorate)([Ks("auto")],t.prototype,"height",void 0),Object(O.__decorate)([Ks([])],t.prototype,"expandedIndices",void 0),Object(O.__decorate)([Ks("Multiple")],t.prototype,"expandMode",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableHtmlSanitizer",void 0),Object(O.__decorate)([Qs({},Xw)],t.prototype,"animation",void 0),Object(O.__decorate)([nd()],t.prototype,"clicked",void 0),Object(O.__decorate)([nd()],t.prototype,"expanding",void 0),Object(O.__decorate)([nd()],t.prototype,"expanded",void 0),Object(O.__decorate)([nd()],t.prototype,"created",void 0),Object(O.__decorate)([nd()],t.prototype,"destroyed",void 0),Object(O.__decorate)([id],t)}(vd),Kw=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(O.__extends)(t,e),t.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||Ya("ej2-contextmenu"),e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),Hs(this.element,{role:"context menu",tabindex:"0"}),this.element.style.zIndex=kh(this.element).toString()},t.prototype.open=function(t,n,i){e.prototype.openMenu.call(this,null,null,t,n,null,i)},t.prototype.close=function(){e.prototype.closeMenu.call(this)},t.prototype.onPropertyChanged=function(t,n){e.prototype.onPropertyChanged.call(this,t,n);for(var i=0,o=Object.keys(t);i<o.length;i++)switch(o[i]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(n.target),this.wireEvents()}},t.prototype.getModuleName=function(){return"contextmenu"},Object(O.__decorate)([Ks("")],t.prototype,"target",void 0),Object(O.__decorate)([Ks("")],t.prototype,"filter",void 0),Object(O.__decorate)([ed([],Uw)],t.prototype,"items",void 0),Object(O.__decorate)([id],t)}(Gw),Qw={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"};!function(e){var t;function n(e){i(e.floatLabelType,e.element),e.element.addEventListener("focus",function(){var e=u(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.add("e-input-focus")}),e.element.addEventListener("blur",function(){var e=u(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.remove("e-input-focus")}),e.element.addEventListener("input",function(){i(t,e.element)})}function i(e,t){var n=t.value;""!==n&&!Va(n)&&t.parentElement?t.parentElement.classList.add("e-valid-input"):"Always"!==e&&t.parentElement&&t.parentElement.classList.remove("e-valid-input")}function o(){var e=u(this).getElementsByClassName("e-float-text")[0];Va(e)||(Ds([e],Qw.LABELTOP),e.classList.contains(Qw.LABELBOTTOM)&&As([e],Qw.LABELBOTTOM))}function r(){var e=u(this);if(e.getElementsByTagName("textarea")[0]?""===e.getElementsByTagName("textarea")[0].value:""===e.getElementsByTagName("input")[0].value){var t=e.getElementsByClassName("e-float-text")[0];Va(t)||(t.classList.contains(Qw.LABELTOP)&&As([t],Qw.LABELTOP),Ds([t],Qw.LABELBOTTOM))}}function a(e){e.addEventListener("focus",o),e.addEventListener("blur",r)}function l(e,t,n){var i,o,r=Va(n)?ks:n;if("Auto"===e.floatLabelType&&a(e.element),Va(t.container)?(t.container=f(e,Qw.FLOATINPUT,Qw.FLOATCUSTOMTAG,"div",r),e.element.parentNode.insertBefore(t.container,e.element)):(Va(e.customTag)||t.container.classList.add(Qw.FLOATCUSTOMTAG),t.container.classList.add(Qw.FLOATINPUT)),i=r("span",{className:Qw.FLOATLINE}),o=r("label",{className:Qw.FLOATTEXT}),Va(e.element.id)||""===e.element.id||(o.id="label_"+e.element.id.replace(/ /g,"_"),Hs(e.element,{"aria-labelledby":o.id})),Va(e.element.placeholder)||""===e.element.placeholder||(o.innerText=g(e.element.placeholder),e.element.removeAttribute("placeholder")),Va(e.properties)||Va(e.properties.placeholder)||""===e.properties.placeholder||(o.innerText=g(e.properties.placeholder)),o.innerText||t.container.classList.add(Qw.NOFLOATLABEL),t.container.classList.contains("e-float-icon-left")){var l=t.container.querySelector(".e-input-in-wrap");l.appendChild(e.element),l.appendChild(i),l.appendChild(o)}else t.container.appendChild(e.element),t.container.appendChild(i),t.container.appendChild(o);c(e.element.value,o),"Always"===e.floatLabelType&&(o.classList.contains(Qw.LABELBOTTOM)&&As([o],Qw.LABELBOTTOM),Ds([o],Qw.LABELTOP)),"Auto"===e.floatLabelType&&(e.element.addEventListener("input",function(t){c(e.element.value,o)}),e.element.addEventListener("blur",function(t){c(e.element.value,o)})),Va(e.element.getAttribute("id"))||o.setAttribute("for",e.element.getAttribute("id"))}function s(e,t){"Always"===e&&t.classList.contains("e-outline")&&t.classList.add("e-valid-input")}function d(e,t){e?As([t],Qw.CLEARICONHIDE):Ds([t],Qw.CLEARICONHIDE)}function c(e,t){e?(Ds([t],Qw.LABELTOP),t.classList.contains(Qw.LABELBOTTOM)&&As([t],Qw.LABELBOTTOM)):(t.classList.contains(Qw.LABELTOP)&&As([t],Qw.LABELTOP),Ds([t],Qw.LABELBOTTOM))}function u(e){var t=Va(e.parentNode)?e:e.parentNode;return t&&t.classList.contains("e-input-in-wrap")&&(t=t.parentNode),t}function h(e,t,n){t.addEventListener("click",function(n){e.classList.contains(Qw.DISABLE)||e.readOnly||(n.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",Ds([t],Qw.CLEARICONHIDE))}),e.addEventListener("input",function(n){d(e.value,t)}),e.addEventListener("focus",function(n){d(e.value,t)}),e.addEventListener("blur",function(e){setTimeout(function(){Ds([t],Qw.CLEARICONHIDE)},200)})}function p(e,t){if(u(e).classList.contains(Qw.FLOATINPUT)&&"Auto"===t){var n=u(e).getElementsByClassName("e-float-text")[0];c(e.value,n)}}function f(e,t,n,i,o){var r,a=Va(o)?ks:o;return Va(e.customTag)?r=a(i,{className:t}):(r=a(e.customTag,{className:t})).classList.add(n),r.classList.add("e-control-wrapper"),r}function g(e){var t="";if(!Va(e)&&""!==e){var n=document.createElement("span");n.innerHTML='<input  placeholder="'+e+'"/>',t=n.children[0].placeholder}return t}function m(e,t,n){Va(n)||""===n||As(t,n.split(" ")),Va(e)||""===e||Ds(t,e.split(" "))}function v(e,t){var n;e=g(e),(n=u(t)).classList.contains(Qw.FLOATINPUT)?Va(e)||""===e?(n.classList.add(Qw.NOFLOATLABEL),n.getElementsByClassName(Qw.FLOATTEXT)[0].textContent=""):(n.getElementsByClassName(Qw.FLOATTEXT)[0].textContent=e,n.classList.remove(Qw.NOFLOATLABEL),t.removeAttribute("placeholder")):Va(e)||""===e?(t.removeAttribute("placeholder"),t.removeAttribute("aria-placeholder")):Hs(t,{placeholder:e,"aria-placeholder":e})}function y(e,t,n){e?Hs(t,{readonly:""}):t.removeAttribute("readonly"),Va(n)||p(t,n)}function b(e,t){e?Ds(t,Qw.RTL):As(t,Qw.RTL)}function w(e,t,n,i){var o={disabled:"disabled","aria-disabled":"true"},r=!Va(i);e?(t.classList.remove(Qw.DISABLE),x(o,t),r&&As([i],Qw.DISABLE)):(t.classList.add(Qw.DISABLE),S(o,t),r&&Ds([i],Qw.DISABLE)),Va(n)||p(t,n)}function C(e,t,n,i,o){var r=Va(o)?ks:o;e?n.clearButton=function(e,t,n,i){var o=(Va(i)?ks:i)("span",{className:Qw.CLEARICON}),r=t.container;return Va(n)?(t.container.classList.contains(Qw.FLOATINPUT)?t.container.querySelector("."+Qw.FLOATTEXT):e).insertAdjacentElement("afterend",o):r.appendChild(o),!Va(r)&&r.classList.contains(Qw.FLOATINPUT)&&Ds([r],Qw.INPUTGROUP),Ds([o],Qw.CLEARICONHIDE),h(e,o),o.setAttribute("aria-label","close"),o}(t,n,i,r):(Ls(n.clearButton),n.clearButton=null)}function x(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n],r=void 0;r=u(t),"disabled"===o&&t.classList.remove(Qw.DISABLE),"disabled"===o&&r.classList.contains(Qw.INPUTGROUP)&&r.classList.remove(Qw.DISABLE),"placeholder"===o&&r.classList.contains(Qw.FLOATINPUT)?r.getElementsByClassName(Qw.FLOATTEXT)[0].textContent="":t.removeAttribute(o)}}function S(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n],r=void 0;r=u(t),"disabled"===o&&t.classList.add(Qw.DISABLE),"disabled"===o&&r.classList.contains(Qw.INPUTGROUP)&&r.classList.add(Qw.DISABLE),"placeholder"===o&&r.classList.contains(Qw.FLOATINPUT)?r.getElementsByClassName(Qw.FLOATTEXT)[0].textContent=e[o]:t.setAttribute(o,e[o])}}function T(e,t,n){var i=[];i.push(n);var o=Va(n)?t.querySelectorAll(".e-input-group-icon"):i;if(e&&o.length>0)for(var r=0;r<o.length;r++)o[r].addEventListener("mousedown",E,!1),o[r].addEventListener("mouseup",_,!1);else if(o.length>0)for(r=0;r<o.length;r++)o[r].removeEventListener("mousedown",E,this),o[r].removeEventListener("mouseup",_,this)}function E(){for(var e,t=this.parentElement;!t.classList.contains("e-input-group");)t=t.parentElement;(e=t).classList.contains("e-disabled")||e.querySelector("input").readOnly||this.classList.add("e-input-btn-ripple")}function _(){var e=this;setTimeout(function(){e.classList.remove("e-input-btn-ripple")},500)}function k(e,t){var n=t("span",{className:e});return n.classList.add("e-input-group-icon"),n}function D(e,t,n,i){var o=Va(i)?ks:i,r=k(e,o);t.classList.add("e-float-icon-left");var a=t.querySelector(".e-input-in-wrap");if(Va(a)){a=o("span",{className:"e-input-in-wrap"}),n.parentNode.insertBefore(a,n);var l=t.querySelectorAll(n.tagName+" ~ *");a.appendChild(n);for(var s=0;s<l.length;s++)a.appendChild(l[s])}return a.parentNode.insertBefore(r,a),t.classList.contains(Qw.INPUTGROUP)||t.classList.add(Qw.INPUTGROUP),T(!0,t,r),r}function A(e,t,n){var i=k(e,Va(n)?ks:n);return t.classList.contains(Qw.INPUTGROUP)||t.classList.add(Qw.INPUTGROUP),(t.classList.contains("e-float-icon-left")?t.querySelector(".e-input-in-wrap"):t).appendChild(i),T(!0,t,i),i}function O(e,t){"hidden"===t.type?e.classList.add("e-hidden"):e.classList.contains("e-hidden")&&e.classList.remove("e-hidden")}e.createInput=function(e,i){var o=Va(i)?ks:i,r={container:null,buttons:[],clearButton:null};if(t=e.floatLabelType,Va(e.floatLabelType)||"Never"===e.floatLabelType?(r.container=f(e,Qw.INPUTGROUP,Qw.INPUTCUSTOMTAG,"span",o),e.element.parentNode.insertBefore(r.container,e.element),Ds([e.element],Qw.INPUT),r.container.appendChild(e.element)):l(e,r,o),n(e),Va(e.properties)||Va(e.properties.showClearButton)||!e.properties.showClearButton||"TEXTAREA"===e.element.tagName||(C(e.properties.showClearButton,e.element,r,!0,o),r.clearButton.setAttribute("role","button"),r.container.classList.contains(Qw.FLOATINPUT)&&Ds([r.container],Qw.INPUTGROUP)),!Va(e.buttons)&&"TEXTAREA"!==e.element.tagName)for(var a=0;a<e.buttons.length;a++)r.buttons.push(A(e.buttons[a],r.container,o));return Va(e.element)||"TEXTAREA"!==e.element.tagName||Ds([r.container],Qw.TEXTAREA),O(r.container,e.element),function(e,t){if(!Va(e.properties))for(var n=0,i=Object.keys(e.properties);n<i.length;n++)switch(i[n]){case"cssClass":m(e.properties.cssClass,[t.container]),s(e.floatLabelType,t.container);break;case"enabled":w(e.properties.enabled,e.element,e.floatLabelType,t.container);break;case"enableRtl":b(e.properties.enableRtl,[t.container]);break;case"placeholder":v(e.properties.placeholder,e.element);break;case"readonly":y(e.properties.readonly,e.element)}return t}(e,r)},e.bindInitialEvent=n,e.wireFloatingEvents=a,e.wireClearBtnEvents=h,e.setValue=function(e,t,n,o){if(t.value=e,Va(n)||"Auto"!==n||p(t,n),!Va(o)&&o){var r=u(t);if(!Va(r)){var a=r.getElementsByClassName(Qw.CLEARICON)[0];Va(a)||(t.value&&r.classList.contains("e-input-focus")?As([a],Qw.CLEARICONHIDE):Ds([a],Qw.CLEARICONHIDE))}}i(n,t)},e.setCssClass=m,e.setWidth=function(e,t){"number"==typeof e?t.style.width=Ja(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:Ja(e))},e.setPlaceholder=v,e.setReadonly=y,e.setEnableRtl=b,e.setEnabled=w,e.setClearButton=C,e.removeAttributes=x,e.addAttributes=S,e.removeFloating=function(e){var t,n=e.container;if(!Va(n)&&n.classList.contains(Qw.FLOATINPUT)){var i=n.querySelector("textarea")?n.querySelector("textarea"):n.querySelector("input"),a=n.querySelector("."+Qw.FLOATTEXT).textContent,l=null!==n.querySelector(".e-clear-icon");Ns(n.querySelector("."+Qw.FLOATLINE)),Ns(n.querySelector("."+Qw.FLOATTEXT)),Gs(n,[Qw.INPUTGROUP],[Qw.FLOATINPUT]),(t=i).removeEventListener("focus",o),t.removeEventListener("blur",r),Hs(i,{placeholder:a}),i.classList.add(Qw.INPUT),l||"INPUT"!==i.tagName||i.removeAttribute("required")}},e.addFloating=function(e,n,i,o){var r=Va(o)?ks:o,a=Us(e,"."+Qw.INPUTGROUP);if(t=n,"Never"!==n){var d=a.tagName,c={element:e,floatLabelType:n,customTag:d="DIV"!==d&&"SPAN"!==d?d:null,properties:{placeholder:i}},u=a.querySelector(".e-clear-icon"),h={container:a};e.classList.remove(Qw.INPUT),l(c,h,r);var p=a.classList.contains("e-float-icon-left");if(Va(u)&&(u=p?a.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):a.querySelector(".e-input-group-icon")),Va(u))p&&(u=a.querySelector(".e-input-group-icon")),Va(u)&&a.classList.remove(Qw.INPUTGROUP);else{var f=a.querySelector("."+Qw.FLOATLINE),g=a.querySelector("."+Qw.FLOATTEXT),m=p?a.querySelector(".e-input-in-wrap"):a;m.insertBefore(e,u),m.insertBefore(f,u),m.insertBefore(g,u)}}s(n,e.parentElement)},e.setRipple=function(e,t){for(var n=0;n<t.length;n++)T(e,t[n].container)},e.addIcon=function(e,t,n,i,o){var r="string"==typeof t?t.split(","):t;if("append"===e.toLowerCase())for(var a=0,l=r;a<l.length;a++)A(l[a],n,o);else for(var s=0,d=r;s<d.length;s++)D(d[s],n,i,o)},e.prependSpan=D,e.appendSpan=A,e.validateInputType=O}(Pw||(Pw={})),new RegExp("^(-)?(\\d*)$"),new function(){},new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),new RegExp("^[0-9]*$"),new RegExp("^[+]?[0-9]{9,13}$"),new RegExp("^\\d{13,16}$"),function(e){e[e.Message=0]="Message",e[e.Label=1]="Label"}(Rw||(Rw={}));var $w=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},eC=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},tC=function(){function e(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.serviceLocator=t,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},e.prototype.render=function(){if(this.l10n=this.serviceLocator.getService("localization"),!Ka()){this.element=Ay("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var e="#"+this.parent.element.id;this.contextMenu=new Kw({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu",animationSettings:{effect:"None"}}),this.contextMenu.appendTo(this.element)}},e.prototype.getMenuItems=function(){var e=[],t=[],n=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var i=0,o=this.getDefaultItems();i<o.length;i++){var r=o[i];-1!==r.toLocaleLowerCase().indexOf("group")?"grouping"!==r.toLocaleLowerCase()&&n.push(this.buildDefaultItems(r)):-1!==r.toLocaleLowerCase().indexOf("order")?"order"!==r.toLocaleLowerCase()&&t.push(this.buildDefaultItems(r)):e.push(this.buildDefaultItems(r))}var a;n.length>0&&((a=this.buildDefaultItems("grouping")).items=n,e.push(a)),t.length>0&&((a=this.buildDefaultItems("order")).items=t,e.push(a))}if(this.parent.contextMenuSettings.items)for(var l=0,s=this.parent.contextMenuSettings.items;l<s.length;l++)e.push(s[l]);return e},e.prototype.contextMenuOpen=function(){this.isOpen=!0},e.prototype.BeforeItemRender=function(e){this.parent.trigger("contextMenuBeforeItemRender",e)},e.prototype.contextMenuItemClick=function(e){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger("contextMenuClick",e);var t=this.getKeyFromId(e.item.id);if(!e.cancel)switch(t){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof Kw&&this.updateItemStatus()},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.ensureItems=function(e,t){var n=this.getKeyFromId(e.id);-1!==this.getDefaultItems().indexOf(n)&&e.target&&(t||this.parent.checkMenu)&&!this.ensureTarget(e)&&this.hiddenItems.push(e.id)},e.prototype.refreshItems=function(){this.updateItems(),this.contextMenu.refresh()},e.prototype.updateItems=function(){for(var e=!0,t=0;t<this.parent.contextMenuSettings.items.length;t++){for(var n=this.parent.contextMenuSettings.items[t],i=0;i<this.contextMenu.items.length;i++)this.contextMenu.items[i].text===this.parent.contextMenuSettings.items[t].text&&(e=!1);e&&this.contextMenu.insertAfter([n],this.contextMenu.items[this.contextMenu.items.length-1].text)}},e.prototype.contextMenuBeforeOpen=function(e){return $w(this,void 0,void 0,function(){var t,n,i,o,r,a,l,s,d;return eC(this,function(c){switch(c.label){case 0:for(this.parent.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.parent.checkMenu=e.cancel=!0),this.parent.checkMenu&&(this.hiddenItems=[]),(t=e).hiddenItems=[],n=0,i=e.items;n<i.length;n++)if(this.ensureItems(d=i[n],e.event),d.items.length)for(o=0,r=d.items;o<r.length;o++)this.ensureItems(r[o],e.event);return this.eventArgs=e.event,Ka()?[4,this.parent.trigger("contextMenuOpen",t)]:[3,2];case 1:return"string"==typeof(t=c.sent()||t)&&(t=JSON.parse(t)),[3,3];case 2:this.parent.trigger("contextMenuOpen",t),c.label=3;case 3:for(a=!0,this.hiddenItems=this.hiddenItems.concat(t.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0),l=this,s=0;s<e.items.length;s++)l.hiddenItems.indexOf((d=e.items[s]).id)>-1&&l.contextMenu.hideItems([d.id],!0);for(s=0;s<l.contextMenu.items.length;s++)-1===l.hiddenItems.indexOf((d=l.contextMenu.items[s]).id)&&(a=!1,l.contextMenu.showItems([d.id],!0));return a&&(t.cancel=a,this.hiddenItems=[]),this.parent.selectedItems.nodes.length&&this.parent.selectedItems.nodes[0].isPhase&&(e.cancel=!0),[2]}})})},e.prototype.ensureTarget=function(e){var t=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,n=!1;switch(this.getKeyFromId(e.id)){case"undo":n=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":n=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":n=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":n=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":n=!!(t>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":n=t>1;break;case"unGroup":n=!!(this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":n=!!t}return n},e.prototype.destroy=function(){Ka()||(this.contextMenu.destroy(),Ls(this.element)),this.removeEventListener()},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.generateID=function(e){return this.parent.element.id+"_contextMenu_"+e},e.prototype.getKeyFromId=function(e){return e.replace(this.parent.element.id+"_contextMenu_","")},e.prototype.buildDefaultItems=function(e){var t;switch(e){case"copy":t={target:".e-diagramcontent",iconCss:"e-copy"};break;case"cut":t={target:".e-diagramcontent",iconCss:"e-cut"};break;case"paste":t={target:".e-diagramcontent",iconCss:"e-paste"};break;case"undo":t={target:".e-diagramcontent",iconCss:"e-undo"};break;case"redo":t={target:".e-diagramcontent",iconCss:"e-redo"};break;case"grouping":t={target:".e-diagramcontent"};break;case"group":t={target:".e-diagramcontent",iconCss:"e-group"};break;case"unGroup":t={target:".e-diagramcontent",iconCss:"e-ungroup"};break;case"order":t={target:".e-diagramcontent",iconCss:"e-order"};break;case"bringToFrontOrder":t={target:".e-diagramcontent",iconCss:"e-bringfront"};break;case"moveForwardOrder":t={target:".e-diagramcontent",iconCss:"e-bringforward"};break;case"sendToBackOrder":t={target:".e-diagramcontent",iconCss:"e-sendback"};break;case"sendBackwardOrder":t={target:".e-diagramcontent",iconCss:"e-sendbackward"};break;case"selectAll":t={target:".e-diagramcontent"}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},e.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}},e}(),nC=function(){function e(){this.annotationObjects={}}return Object.defineProperty(e.prototype,"textAnnotationConnectors",{get:function(){for(var e=[],t=0,n=Object.keys(this.annotationObjects);t<n.length;t++)for(var i=this.annotationObjects[n[t]],o=0,r=Object.keys(i);o<r.length;o++)e.push(i[r[o]].connector);return e},enumerable:!0,configurable:!0}),e.prototype.getTextAnnotationConn=function(e){var t=[];if("Bpmn"===e.shape.type&&0!==e.shape.annotations.length)for(var n=this.annotationObjects[e.id],i=0,o=Object.keys(n);i<o.length;i++)t.push(n[o[i]].connector);return t},e.prototype.getSize=function(e,t){var n=new Bd(e.width,e.height);if(void 0===n.width||void 0===n.height){if(t instanceof Yc||(n.width=n.width||50,n.height=n.height||50),t.actualSize.width&&t.actualSize.height)return t.actualSize;t.measure(new Bd),n.width=n.width||t.desiredSize.width,n.height=n.height||t.desiredSize.height,void 0!==e.maxWidth&&(n.width=Math.min(n.width,e.maxWidth)),void 0!==e.maxHeight&&(n.height=Math.min(n.height,e.maxHeight)),void 0!==e.minWidth&&(n.width=Math.max(n.width,e.minWidth)),void 0!==e.minHeight&&(n.height=Math.max(n.height,e.minHeight))}return n},e.prototype.initBPMNContent=function(e,t,n){var i=(Ka(),t.shape),o=Ka()?t.shape.bpmnShape:t.shape.shape;if("Event"===o&&(e=this.getBPMNEventShape(t,i.event)),"Gateway"===o&&(e=this.getBPMNGatewayShape(t)),"DataObject"===o&&(e=this.getBPMNDataObjectShape(t)),"Message"!==o&&"DataSource"!==o||(e=this.getBPMNShapes(t)),"Activity"===o&&(e=this.getBPMNActivityShape(t)),"TextAnnotation"===o&&(e=this.renderBPMNTextAnnotation(n,t,e)),i.annotations.length>0){for(var r=0;r<i.annotations.length&&i.annotations[r].text;r++)e.children.push(this.getBPMNTextAnnotation(t,n,i.annotations[r],e));e.style.strokeDashArray="2 2 6 2"}return e},e.prototype.getBPMNShapes=function(e){var t=new Yc;this.setStyle(t,e),0!=(e.constraints&_c.Shadow)&&(t.shadow=e.shadow);var n=iC(Ka()?e.shape.bpmnShape:e.shape.shape);return t.data=n,t.id=e.id+"_"+(Ka()?e.shape.bpmnShape:e.shape.shape),void 0!==e.width&&void 0!==e.height&&(t.width=e.width,t.height=e.height),t},e.prototype.getBPMNGatewayShape=function(e){var t=new qc,n=new Yc;n.id=e.id+"_0_gateway",n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.data="M 40 20 L 20 40 L 0 20 L 20 0 L 40 20 Z",this.setStyle(n,e);var i=new Yc;i.id=e.id+"_1_gatewayType",i.style.opacity=e.style.opacity,i.style.strokeColor=e.style.strokeColor,i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object";var o,r=e.shape.gateway;o=rC(r.type),i.style.fill="EventBased"===r.type||"ExclusiveEventBased"===r.type||"ParallelEventBased"===r.type?"white":"black",i.data=o,t.style.fill="transparent",t.style.strokeColor="transparent",t.style.strokeWidth=0,t.children=[n,i];var a=this.getSize(e,n);return this.setSizeForBPMNGateway(e.shape.gateway,t,a.width,a.height),t},e.prototype.getBPMNDataObjectShape=function(e){var t=new qc,n=e.shape.dataObject,i=new Yc;i.id=e.id+"_0_dataobj",i.data="M29.904,5 L7.853,5 L7.853,45 L42.147,45 L42.147,17.242,L29.932,5,L29.932,17.242,L42.147,17.242";var o=this.getSize(e,i);i.width=o.width,i.height=o.height,this.setStyle(i,e);var r=new Yc;r.id=e.id+"_1_type",r.width=25,r.height=20,r.margin.left=5,r.margin.top=5,r.data="M 3 9.4 l 6 0 v 2.4 l 3.6 -4 L 9 4 v 2.5 H 3 V 9.4 Z",r.style.opacity=e.style.opacity;var a=new Yc;switch(a.id=e.id+"_2_collection",a.width=7.5,a.height=15,a.style.fill="black",a.visible=!0,a.horizontalAlignment="Center",a.verticalAlignment="Bottom",a.relativeMode="Object",a.style.opacity=e.style.opacity,a.data="M 0 0 L 0.1 0 L 0.1 2 L 0 2 Z M 0.4 0 L 0.6 0 L 0.6 2 L0.4 2 Z M 0.9 0 L 1 0 L 1 2 L 0.9 2 Z",n.type){case"None":r.visible=!1;break;case"Input":r.style.fill="white";break;case"Output":r.style.fill="black"}return!1===n.collection&&(a.visible=!1),t.style.fill="transparent",t.style.strokeColor="transparent",t.style.strokeWidth=0,t.children=[i,r,a],t},e.prototype.getBPMNTaskShape=function(e){var t=e.shape.activity.task,n=new qc,i=new Uc;i.cornerRadius=10;var o=this.getSize(e,i);i.id=e.id+"_0_task",i.width=o.width,i.height=o.height,this.setStyle(i,e),void 0!==t.call&&!0===t.call&&(i.style.strokeWidth=4),n.width=o.width,n.height=o.height;var r,a=this.getTaskChildCount(e),l=o.width/2-12*a;r=1===a?l+8:l+8*(a-1);var s,d=new Yc;if("Receive"===t.type||"Send"===t.type?(d.width=18,d.height=16):(d.width=20,d.height=20),d.id=e.id+"_1_tasktType",d.margin.left=5,d.margin.top=5,s=aC(t.type),d.data=s,d.style.fill="transparent",d.style.opacity=e.style.opacity,n.style.fill="transparent",n.style.strokeColor="transparent",n.style.strokeWidth=0,n.children=[i,d],"Service"===t.type){var c=new Yc;c.id=e.id+"_1_taskTypeService",c.data=s,c.margin.left=d.margin.left+9,c.margin.top=d.margin.top+9,c.style.fill="white",c.style.opacity=e.style.opacity,n.children.push(c)}var u,h=t.loop,p=new Yc;u=lC(h),p.data=u,p.style.fill="black",p.visible="None"!==h,1===a&&(r=l+9),p.margin.left=r,!0===p.visible&&(r+=20),p.width=12,p.height=12,p.margin.bottom=5,p.id=e.id+"_2_loop",p.horizontalAlignment="Left",p.verticalAlignment="Bottom",p.setOffsetWithRespectToBounds(0,1,"Fraction"),p.relativeMode="Point",p.style.fill="transparent",d.style.opacity=e.style.opacity,n.children.push(p);var f=new Yc;return(f=this.getBPMNCompensationShape(e,f)).visible=!0===t.compensation,1===a&&(r=l+9),f.margin.left=r-3,r+=18,n.children.push(f),n},e.prototype.getBPMNEventShape=function(e,t,n,i){var o,r,a,l,s=new qc;i=i||e.id;var d="M164.1884,84.6909000000001C156.2414,84.6909000000001,149.7764,78.2259000000001,149.7764,70.2769000000001C149.7764,62.3279000000001,156.2414,55.8629000000001,164.1884,55.8629000000001C172.1354,55.8629000000001,178.6024,62.3279000000001,178.6024,70.2769000000001C178.6024,78.2259000000001,172.1354,84.6909000000001,164.1884,84.6909000000001",c=e.shape.event;if((!Ka()&&"Event"===e.shape.shape||Ka()&&"Event"===e.shape.bpmnShape)&&(o=c.event,r=c.trigger),a=t.width,l=t.height,n)a=a||20,l=l||20;else if(void 0===t.width||void 0===t.height){var u=new Yc;u.data=d;var h=this.getSize(e,u);a=h.width,l=h.height}(!Ka()&&"Activity"===e.shape.shape||Ka()&&"Activity"===e.shape.bpmnShape)&&(o=t.event,r=t.trigger);var p=new Yc;p.data=d,p.id=i+"_0_event",p.width=a,p.height=l,p.horizontalAlignment="Center",p.verticalAlignment="Center",p.relativeMode="Object",this.setStyle(p,e);var f=new Yc;f.data=d,f.id=i+"_1_event",f.style.gradient=e.style.gradient,f.horizontalAlignment="Center",f.verticalAlignment="Center",f.relativeMode="Object",f.style.strokeColor=e.style.strokeColor,f.style.opacity=e.style.opacity;var g=new Yc,m=oC(r);switch(g.data=m,g.id=i+"_2_trigger",g.horizontalAlignment="Center",g.verticalAlignment="Center",g.relativeMode="Object",g.style.strokeColor=e.style.strokeColor,g.style.opacity=e.style.opacity,o){case"Start":f.visible=!1;break;case"NonInterruptingStart":p.style.strokeDashArray="2 3",f.visible=!1;break;case"Intermediate":p.style.fill="white",p.style.gradient=null;break;case"NonInterruptingIntermediate":p.style.fill="white",p.style.gradient=null,p.style.strokeDashArray="2 3",f.style.strokeDashArray="2 3";break;case"ThrowingIntermediate":case"End":p.style.fill="End"!==o?"white":"black",p.style.gradient=null,g.style.fill="black",g.style.strokeColor="white"}return s.style.fill="transparent",s.style.strokeColor="transparent",s.style.strokeWidth=0,s.children=[p,f,g],this.setSizeForBPMNEvents(c,s,a,l),s},e.prototype.setEventVisibility=function(e,t){var n=t[0],i=t[1];switch(e.shape.event.event){case"Start":i.visible=!1;break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",i.visible=!1}},e.prototype.setSubProcessVisibility=function(e){var t=e.shape.activity.subProcess,n=t.events.length,i="Transaction"===e.shape.activity.subProcess.type?2:0,o=e.wrapper.children[0].children[0];if(!1===t.adhoc&&(o.children[3+i+n].visible=!1),!1===t.compensation&&(o.children[4+i+n].visible=!1),n>0)for(var r=0;r<n;r++)this.setEventVisibility(e,o.children[2+r].children)},e.prototype.getBPMNSubProcessShape=function(e){var t,n,i=new qc,o=new Yc,r=(new qc,new Yc),a=e.shape.activity,l=a.subProcess,s=this.getSubprocessChildCount(e),d=new Uc;d.id=e.id+"_0_Subprocess",d.style.fill="transparent",d.cornerRadius=10;var c=this.getSize(e,d);d.width=c.width,d.height=c.height,i.children=[d],"Transaction"===a.subProcess.type&&this.getBPMNSubProcessTransaction(e,e.shape,i);var u=c.width/2;n=1===s?u-6:u-12*s/2-4*(s-1)/2,this.setStyle(d,e),0!=(e.constraints&_c.Shadow)&&(i.shadow=e.shadow);var h=new Yc;if(h.id=e.id+"_0_collapsed",h.width=12,h.height=12,h.style.fill="black",h.style.strokeColor=e.style.strokeColor,h.margin.bottom=5,h.horizontalAlignment="Left",h.verticalAlignment="Bottom",h.setOffsetWithRespectToBounds(0,1,"Fraction"),h.relativeMode="Point",h.data=iC("collapsedShape"),h.margin.left=n,h.visible=!0===l.collapsed&&!l.processes,!0===h.visible&&(n+=18),i.children.push(h),"Event"===l.type){d.style.strokeWidth=1,d.style.strokeDashArray="2 2",t=l.events;for(var p=0;p<t.length;p++)this.getBPMNSubEvent(t[p],e,i)}r=this.getBPMNSubProcessLoopShape(e),1===s&&(n=u+8),r.margin.left=n,!0===r.visible&&(n+=16),i.children.push(r),d.id=e.id+"_boundary","Default"===l.boundary&&(d.style.strokeWidth=1,d.style.strokeDashArray="1 0"),"Call"===l.boundary&&(d.style.strokeWidth=4,d.style.strokeDashArray="1 0"),"Event"===l.boundary&&(d.style.strokeWidth=1,d.style.strokeDashArray="2 2"),o=this.getBPMNAdhocShape(e,o,l),1===s&&(n=u+8),o.margin.left=n,!0===o.visible&&(n+=16),i.children.push(o);var f=new Yc;return f.visible=!0===l.compensation,f=this.getBPMNCompensationShape(e,f),1===s&&(n=u+8),f.margin.left=n,!0===f.visible&&(n+=16),i.children.push(f),i.style.strokeColor="transparent",i.style.strokeWidth=0,i.style.fill="transparent",i},e.prototype.getBPMNSubEvent=function(e,t,n,i){var o;n.children=n.children||[],o=this.getBPMNEventShape(t,e,!0,i),this.getBPMNSubprocessEvent(t,o,e),o.id=i||t.id+"_subprocessEvents",o.width=e.width||20,o.height=e.height||20,o.setOffsetWithRespectToBounds(e.offset.x,e.offset.y,"Fraction"),o.relativeMode="Point",o.margin=e.margin,o.horizontalAlignment=e.horizontalAlignment,o.verticalAlignment=e.verticalAlignment,o.style.fill="transparent",o.style.strokeColor="transparent",o.style.strokeWidth=0,n.children.push(o)},e.prototype.getBPMNSubProcessTransaction=function(e,t,n){var i=n.children[0].width,o=n.children[0].height,r=new Uc;r.margin={left:3,right:0,top:3,bottom:0},r.id=e.id+"_0_Subprocess_innnerRect",r.cornerRadius=10,r.width=i-6,r.height=o-6,n.children.push(r);var a=new qc;a.id=e.id+"_transaction_events",a.style.gradient=e.style.gradient;var l=t.activity.subProcess.transaction;this.getBPMNSubEvent(l.success,e,a,e.id+"_success"),this.getBPMNSubEvent(l.cancel,e,a,e.id+"_cancel"),this.getBPMNSubEvent(l.failure,e,a,e.id+"_failure"),this.updateDiagramContainerVisibility(a.children[0],l.success.visible),this.updateDiagramContainerVisibility(a.children[1],l.cancel.visible),this.updateDiagramContainerVisibility(a.children[2],l.failure.visible),a.float=!0,a.width=i,a.height=o,a.style.fill=a.style.strokeColor="transparent",n.children.push(a)},e.prototype.getBPMNSubProcessLoopShape=function(e){var t,n,i=e.shape.activity,o=new Yc;return n=lC(t=i.subProcess.loop),o.visible="None"!==t,o.id=e.id+"_loop",o.data=n,o.style.fill="black",o.width=12,o.height=12,o.horizontalAlignment="Left",o.verticalAlignment="Bottom",o.setOffsetWithRespectToBounds(0,1,"Fraction"),o.relativeMode="Point",o.margin.bottom=5,o.style.fill="transparent",o.style.strokeColor=e.style.strokeColor,o},e.prototype.drag=function(e,t,n,i){var o=i.nameTable[e.processId];e.margin.top+n>=0&&i.nodePropertyChange(e,{},{margin:{top:e.margin.top+n}}),e.margin.left+t>=0&&i.nodePropertyChange(e,{},{margin:{left:e.margin.left+t}});var r=this.getChildrenBound(o,e.id,i);this.updateSubProcessess(r,e,i),o.wrapper.measure(new Bd(void 0,void 0)),o.wrapper.arrange(o.wrapper.desiredSize),i.refreshCanvasLayers(),i.updateSelector(),this.updateDocks(e,i)},e.prototype.dropBPMNchild=function(e,t,n){if(t&&"Bpmn"===t.shape.type&&"Bpmn"===e.shape.type&&(!Ka()&&"TextAnnotation"!==t.shape.shape||Ka()&&"TextAnnotation"!==t.shape.bpmnShape)){var i=n.nameTable[e.id].shape.activity.subProcess;if(n.currentSymbol&&"Bpmn"===e.shape.type&&!i.collapsed)return void(t.processId=e.id);if(i.processes=i.processes||[],i.processes&&-1===i.processes.indexOf(t.id)&&!i.collapsed){i.processes.push(t.id);var o=Yy(t),r=n.nameTable[t.id].wrapper,a=n.nameTable[e.id].wrapper;r.margin.top=r.offsetY-r.actualSize.height/2-(e.offsetY-e.actualSize.height/2),r.margin.left=r.offsetX-r.actualSize.width/2-(e.offsetX-e.actualSize.width/2),r.margin.top=r.margin.top<0?0:r.margin.top,r.margin.left=r.margin.left<0?0:r.margin.left,n.nameTable[t.id].processId=e.id,a.children.push(n.nameTable[t.id].wrapper);var l=this.getChildrenBound(e,t.id,n);this.updateSubProcessess(l,t,n),a.measure(new Bd(void 0,void 0)),a.arrange(a.desiredSize),n.refreshCanvasLayers(),n.updateSelector();for(var s=[],d=(s=s.concat(t.outEdges,t.inEdges)).length-1;d>=0;d--)-1===n.bpmnModule.textAnnotationConnectors.indexOf(n.nameTable[s[d]])&&n.remove(n.nameTable[s[d]]);var c=Yy(t);n.addHistoryEntry({type:"PositionChanged",undoObject:{nodes:[o]},redoObject:{nodes:[c]},category:"Internal"}),"SVG"===n.mode&&t.zIndex<e.zIndex&&(n.updateProcesses(t),this.updateSubprocessNodeIndex(t,n,e)),this.updateDocks(t,n)}}},e.prototype.updateIndex=function(e,t){var n,i=e.getIndex(n=t,n.id);e.nodes.splice(Number(i),1),n.zIndex=e.nodes[e.nodes.length-1].zIndex+1,e.nodes.push(n)},e.prototype.updateSubprocessNodeIndex=function(e,t,n){if(e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var i=0;i<e.shape.activity.subProcess.processes.length;i++){this.updateIndex(t,e);var o=e.shape.activity.subProcess.processes[i];t.nameTable[o].shape.activity.subProcess.processes.length>0?this.updateSubprocessNodeIndex(t.nameTable[o],t,n):this.updateIndex(t,t.nameTable[e.shape.activity.subProcess.processes[i]])}else this.updateIndex(t,e)},e.prototype.updateDocks=function(e,t){if("Bpmn"===e.shape.type&&e.shape.activity.subProcess.processes&&!e.shape.activity.subProcess.collapsed)for(var n=0,i=e.shape.activity.subProcess.processes;n<i.length;n++){var o=t.nameTable[i[n]];o&&(t.updateConnectorEdges(o),o.wrapper.measure(new Bd(o.wrapper.width,o.wrapper.height)),o.wrapper.arrange(o.wrapper.desiredSize),o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length&&this.updateDocks(o,t))}},e.prototype.removeBpmnProcesses=function(e,t){var n=t.nameTable[e.processId];if("Bpmn"===e.shape.type&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var i=(o=e.shape.activity.subProcess.processes).length-1;i>=0;i--)t.remove(t.nameTable[o[i]]);if(n){t.removeDependentConnector(e);var o=n.shape.activity.subProcess.processes;this.removeChildFromBPMN(n.wrapper,e.id);var r=o.indexOf(e.id);o.splice(r,1)}},e.prototype.removeChildFromBPMN=function(e,t){for(var n=0,i=e.children;n<i.length;n++){var o=i[n];o.id===t?e.children.splice(e.children.indexOf(o),1):o.children&&this.removeChildFromBPMN(o,t)}},e.prototype.removeProcess=function(e,t){var n=t.nameTable[e];if(n){var i=t.nameTable[n.processId];if(i&&"Bpmn"===i.shape.type){var o=i.shape.activity.subProcess.processes;t.removeDependentConnector(n),this.removeChildFromBPMN(i.wrapper,e);var r=o.indexOf(e);o.splice(r,1),n.processId="",t.refreshDiagramLayer(),t.updateSelector()}}},e.prototype.addProcess=function(e,t,n){var i;e.id=e.id||Fy();var o=n.nameTable[i=e.id];o||n.add(e),e.processId=t;var r=n.nameTable[t];if(o&&r&&"Bpmn"===r.shape.type&&"Bpmn"===o.shape.type&&r.shape.activity.subProcess.processes){o.processId=t;var a=r.shape.activity.subProcess.processes;a.indexOf(i)<0&&a.push(i),r.wrapper.children.push(o.wrapper),r.wrapper.measure(new Bd),r.wrapper.arrange(r.wrapper.desiredSize),n.bpmnModule.updateDocks(r,n),n.refreshDiagramLayer(),"SVG"===n.mode&&o.shape&&o.shape.activity&&!o.shape.activity.subProcess.processes&&vy(t+"_groupElement").appendChild(vy(e.id+"_groupElement"))}},e.prototype.getChildrenBound=function(e,t,n){var i,o=e.shape.activity.subProcess.processes;if(o&&o.length)for(var r=0,a=o;r<a.length;r++){var l=a[r];t!==l&&(i=i?n.nameTable[l].wrapper.bounds.uniteRect(i):n.nameTable[l].wrapper.bounds)}return i||n.nameTable[t].wrapper.bounds},e.prototype.updateSubProcessess=function(e,t,n){var i,o,r,a,l=n.nameTable[t.processId],s={x:.5,y:.5};l.wrapper.bounds.left+t.margin.left+t.width>l.wrapper.bounds.right&&(r=!0),l.wrapper.bounds.top+t.margin.top+t.height>l.wrapper.bounds.bottom&&(a=!0),r&&(s.x=0),a&&(s.y=0);var d=l.wrapper.actualSize;r&&(i=(t.wrapper.margin.left+t.wrapper.bounds.width)/d.width),a&&(o=(t.wrapper.margin.top+t.wrapper.bounds.height)/d.height),(i>0||o>0)&&n.commandHandler.scale(n.nameTable[t.processId],i||1,o||1,s)},e.prototype.getBPMNCompensationShape=function(e,t){return t.id=e.id+"_0_compensation",t.width=12,t.height=12,t.margin.bottom=5,t.style.fill="transparent",t.style.strokeColor=e.style.strokeColor,t.horizontalAlignment="Left",t.verticalAlignment="Bottom",t.relativeMode="Object",t.data="M 22.462 18.754 l -6.79 3.92 l 6.79 3.92 V 22.89 l 6.415 3.705 v -7.841 l -6.415 3.705 V 18.754 Z M 28.331 19.701 v 5.947 l -5.149 -2.973 L 28.331 19.701 Z M 21.916 25.647 l -5.15 -2.973 l 5.15 -2.973 V 25.647 Z M 22.275 12.674 c -5.513 0 -9.999 4.486 -9.999 9.999 c 0 5.514 4.486 10.001 9.999 10.001 c 5.514 0 9.999 -4.486 9.999 -10.001 C 32.274 17.16 27.789 12.674 22.275 12.674 Z M 22.275 32.127  c -5.212 0 -9.453 -4.241 -9.453 -9.454 c 0 -5.212 4.241 -9.453 9.453 -9.453 c 5.212 0 9.453 4.241 9.453 9.453 C 31.728 27.887 27.487 32.127 22.275 32.127 Z",t},e.prototype.getBPMNActivityShape=function(e){var t,n=new qc,i=e.shape.activity,o=i.activity,r=i.subProcess;return"Task"===o&&(t=this.getBPMNTaskShape(e)),"SubProcess"===o&&r&&(t=this.getBPMNSubProcessShape(e)),t.id=o+e.id,n.children=[t],n.style.fill="transparent",n.style.strokeColor="transparent",n.style.strokeWidth=0,n},e.prototype.getBPMNSubprocessEvent=function(e,t,n){var i,o;if(0!==n.annotations.length)for(var r=0;r<n.annotations.length;r++)(i=e.initAnnotationWrapper(n.annotations[r])).width=n.width,i.height=n.height,t.children.push(i);if(0!==n.ports.length)for(r=0;r<n.ports.length;r++)o=e.initPortWrapper(n.ports[r]),t.children.push(o)},e.prototype.getBPMNAdhocShape=function(e,t,n){return t.id=e.id+"_0_adhoc",t.width=12,t.height=8,t.style.fill="black",t.style.strokeColor=e.style.strokeColor,t.margin.bottom=5,t.horizontalAlignment="Left",t.verticalAlignment="Bottom",t.relativeMode="Object",t.data="M 49.832 76.811 v -2.906 c 0 0 0.466 -1.469 1.931 -1.5 c 1.465 -0.031 2.331 1.219 2.897 1.688 s 1.06 0.75 1.526 0.75 c 0.466 0 1.548 -0.521 1.682 -1.208 s 0.083 3.083 0.083 3.083 s -0.76 0.969 -1.859 0.969 c -1.066 0 -1.865 -0.625 -2.464 -1.438 s -1.359 -0.998 -2.064 -0.906 C 50.598 75.467 49.832 76.811 49.832 76.811 Z",t.visible=!(!n||!0!==n.adhoc),t},e.prototype.getBPMNTextAnnotation=function(e,t,n,i){n.id=n.id||Fy(),n.nodeId=e.id;var o=new qc,r=new Yc,a=new Gc;r.id=e.id+"_"+n.id+"_path",r.width=n.width,r.height=n.height,r.relativeMode="Object",a.id=e.id+"_"+n.id+"_text",a.content=n.text;var l=e.style;a.style={fontSize:l.fontSize,italic:l.italic,gradient:null,opacity:l.opacity,bold:l.bold,textWrapping:l.textWrapping,color:l.color,fill:"white",fontFamily:l.fontFamily,whiteSpace:l.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:l.strokeDashArray,textAlign:l.textAlign,textDecoration:l.textDecoration},a.horizontalAlignment="Center",a.verticalAlignment="Center",a.relativeMode="Object",a.margin={left:5,right:5,top:5,bottom:5},o.offsetX=e.offsetX+n.length*Math.cos(n.angle*(Math.PI/180)),o.offsetY=e.offsetY+n.length*Math.sin(n.angle*(Math.PI/180)),o.float=!0,o.transform=Ic.Self,o.id=e.id+"_textannotation_"+n.id,o.style.strokeColor="transparent",o.margin={left:10,right:10,top:10,bottom:10},o.relativeMode="Object",o.rotateAngle=0,o.children=[r,a];var s=new ry(e.shape,"annotations",{id:o.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);s.ports=[{id:r.id+"_port",shape:"Square",offset:{x:0,y:.5}}],s.offsetX=o.offsetX,s.offsetY=o.offsetY,s.text=n.text,s.angle=n.angle,s.length=n.length,s.width=n.width,s.height=n.height,s.wrapper=o,o.children.push(s.initPortWrapper(s.ports[0]));var d=new Zd(0,0,0,0),c=e.width||e.minWidth||0,u=e.height||e.minHeight||0;void 0!==c&&void 0!==u&&(d=new Zd(e.offsetX-c/2,e.offsetY-u/2,c,u)),this.setAnnotationPath(d,o,{x:s.offsetX,y:s.offsetY},s,n.length,n.angle);var h=new zf(e.shape,"annotations",{id:e.id+"_"+n.id+"_connector",constraints:Tc.Default&~(Tc.DragTargetEnd|Tc.Drag),sourceID:e.id,targetID:o.id,targetDecorator:{shape:"None"}},!0);h.targetPortID=s.ports[0].id,h.init(t),h.wrapper.float=!1,h.wrapper.transform=Ic.Self,i.children.push(h.wrapper),h.zIndex=1e4;var p=this.annotationObjects[e.id];return p||(p={}),p[n.id]||(p[n.id]={}),p[n.id].node=s,p[n.id].connector=h,this.annotationObjects[e.id]=p,t.initObject(s,void 0,!1),s.zIndex=1e4,o},e.prototype.renderBPMNTextAnnotation=function(e,t,n){t.id=t.id||Fy();var i=new qc,o=new Yc,r=new Gc;o.id="_"+t.id+"_path",o.width=t.width,o.height=t.height,o.relativeMode="Object",r.id=t.id+"_text",r.content=t.shape.annotation.text;var a=t.style;r.style={fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,bold:a.bold,textWrapping:a.textWrapping,color:a.color,fill:"white",fontFamily:a.fontFamily,whiteSpace:a.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textDecoration:a.textDecoration},r.horizontalAlignment="Left",r.verticalAlignment="Center",r.relativeMode="Object",r.margin={left:5,right:5,top:5,bottom:5},i.offsetX=t.offsetX+t.shape.annotation.length*Math.cos(t.shape.annotation.angle*(Math.PI/180)),i.offsetY=t.offsetY+t.shape.annotation.length*Math.sin(t.shape.annotation.angle*(Math.PI/180)),i.float=!0,i.id=t.id+"_textannotation_"+t.id,i.style.strokeColor="transparent",i.margin={left:10,right:10,top:10,bottom:10},i.relativeMode="Object",i.rotateAngle=0,i.children=[o,r];var l=new ry(t.shape,"annotations",{id:i.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);l.ports=[{id:o.id+"_port",shape:"Square",offset:{x:0,y:.5}}],l.offsetX=i.offsetX,l.offsetY=i.offsetY,l.shape&&l.shape.annotation&&(l.text=t.shape.annotation.text,l.angle=t.shape.annotation.angle,l.length=t.shape.annotation.length),l.width=t.width,l.height=t.height,l.wrapper=i,i.children.push(l.initPortWrapper(l.ports[0]));var s=new Zd(0,0,0,0),d=t.width||0,c=t.height||0;return void 0!==d&&void 0!==c&&(s=new Zd(t.offsetX-d/2,t.offsetY-c/2,d,c)),this.setAnnotationPath(s,i,{x:l.offsetX,y:l.offsetY},l,t.length,t.angle),i},e.prototype.getTextAnnotationWrapper=function(e,t){if(e&&"Bpmn"===e.shape.type){if("TextAnnotation"===(Ka()?e.shape.bpmnShape:e.shape.shape))return e.wrapper.children[1];if(this.annotationObjects[e.id]&&this.annotationObjects[e.id][t])return this.getTextAnnotationWrapper(this.annotationObjects[e.id][t].node,t)}return null},e.prototype.addAnnotation=function(e,t,n){var i=e.wrapper.children[0],o=e.shape;t.nodeId=e.id;var r=new Yv(o,"annotations",t,!0);return o.annotations.push(r),i.children.push(this.getBPMNTextAnnotation(e,n,t,i)),e.wrapper.measure(new Bd),e.wrapper.arrange(e.wrapper.desiredSize),this.annotationObjects[e.id][t.id].connector},e.prototype.clearAnnotations=function(e,t){var n=e.shape;if(n.annotations.length)for(var i=n.annotations.length-1;i>=0;i--)this.removeAnnotationObjects(e,n.annotations[i],t);delete this.annotationObjects[e.id]},e.prototype.checkAndRemoveAnnotations=function(e,t){if("Bpmn"===e.shape.type)if(!Ka()&&"TextAnnotation"===e.shape.shape||Ka()&&"TextAnnotation"===e.shape.bpmnShape)for(var n=e.id.split("_"),i=n[n.length-1],o=t.nameTable[n[n.length-3]||n[0]],r=o.shape,a=0,l=r.annotations;a<l.length;a++){var s=l[a];if(s.id===i&&-1!==r.annotations.indexOf(s))return t.removeDependentConnector(e),this.removeAnnotationObjects(o,s,t),!0}else e.shape.annotations&&e.shape.annotations.length&&this.clearAnnotations(e,t);return!1},e.prototype.removeAnnotationObjects=function(e,t,n){var i=e.shape,o=i.annotations.indexOf(t);if(-1!==o){if(!(n.diagramActions&Mc.UndoRedo||n.diagramActions&Mc.Group)){var r={type:"CollectionChanged",changeType:"Remove",undoObject:Yy(t),redoObject:Yy(t),category:"Internal"};n.addHistoryEntry(r)}i.annotations.splice(o,1);var a=this.annotationObjects[e.id];if(a&&a[t.id]){var l=a[t.id].node,s=a[t.id].connector;n.removeElements(l),n.removeElements(s);var d=e.wrapper.children[0];o=d.children.indexOf(l.wrapper),d.children.splice(o,1),o=d.children.indexOf(s.wrapper),d.children.splice(o,1),n.removeFromAQuad(l),n.removeFromAQuad(s),delete n.nameTable[l.id],delete n.nameTable[s.id],delete a[t.id]}}},e.prototype.setAnnotationPath=function(e,t,n,i,o,r){var a,l,s=this.getAnnotationPathAngle(n,e),d="",c=t.children[0],u=t.children[2],h=t.children[1];c.horizontalAlignment="Stretch",c.verticalAlignment="Stretch",h.margin.left=h.margin.right=5,h.margin.top=h.margin.bottom=5,0===s?(d="M10,20 L0,20 L0,0 L10,0",c.width=10,c.horizontalAlignment="Left",u.setOffsetWithRespectToBounds(0,.5,"Fraction"),h.margin.top=h.margin.bottom=10,a=e.middleRight,l={x1:e.right,y1:e.top,x2:e.right,y2:e.bottom}):180===s?(d="M0,0 L10,0 L10,20 L0,20",c.width=10,c.horizontalAlignment="Right",u.setOffsetWithRespectToBounds(1,.5,"Fraction"),h.margin.top=h.margin.bottom=10,a=e.middleLeft,l={x1:e.left,y1:e.top,x2:e.left,y2:e.bottom}):90===s?(d="M20,10 L20,0 L0,0 L0,10",c.height=10,c.verticalAlignment="Top",u.setOffsetWithRespectToBounds(.5,0,"Fraction"),h.margin.left=h.margin.right=10,a=e.bottomCenter,l={x1:e.right,y1:e.bottom,x2:e.left,y2:e.bottom}):(d="M0,0 L0,10 L20,10 L20,0",c.height=10,c.verticalAlignment="Bottom",u.setOffsetWithRespectToBounds(.5,1,"Fraction"),h.margin.left=h.margin.right=10,a=e.topCenter,l={x1:e.right,y1:e.top,x2:e.left,y2:e.top});var p=e.center;a=Nu(l,[p,jd.transform(n,r,Math.max(e.width,e.height))],0,p),c.data=d,void 0!==o&&void 0!==r&&(a=jd.transform(a,r,o),t.offsetX=i.offsetX=a.x,t.offsetY=i.offsetY=a.y)},e.prototype.isBpmnTextAnnotation=function(e,t){if(this.annotationObjects){var n=e.parentId,i=t.nameTable[n];return i&&"Bpmn"===i.shape.type&&this.annotationObjects[n]&&this.annotationObjects[n][e.id]?i:null}return null},e.prototype.updateTextAnnotationContent=function(e,t,n,i){var o=t.parentId,r=t.id;if(this.annotationObjects[o]&&this.annotationObjects[o][r])for(var a=0,l=e.shape.annotations;a<l.length;a++){var s=l[a];if(s.id===r){s.text=n;var d=this.annotationObjects[o][r].node.wrapper.children[1];d.content=n,d.visible=!0,e.wrapper.measure(new Bd),e.wrapper.arrange(e.wrapper.desiredSize)}}},e.prototype.updateQuad=function(e,t){var n=e.shape.annotations;if(n&&n.length>0)for(var i=0;i<n.length;i++)t.updateQuad(this.annotationObjects[e.id][n[i].id].node)},e.prototype.updateTextAnnotationProp=function(e,t,n){if("Bpmn"===e.shape.type){var i=e.shape.annotations;if(i&&i.length>0)for(var o=0;o<e.wrapper.children[0].children.length;o++)for(var r=0;r<i.length;r++){var a=e.wrapper.children[0].children[o].id.split("_");if(a[a.length-1]===i[r].id){var l=this.annotationObjects[e.id][i[r].id].node,s=this.annotationObjects[e.id][i[r].id].connector,d=(qu(s.targetPoint,e.wrapper.bounds,e.wrapper.bounds),s.sourcePoint);d=jd.transform(d={x:s.sourcePoint.x+e.offsetX-t.offsetX,y:s.sourcePoint.y+e.offsetY-t.offsetY},i[r].angle,i[r].length),e.wrapper.children[0].children[o].offsetX=l.offsetX=d.x,e.wrapper.children[0].children[o].offsetY=l.offsetY=d.y,n.updateQuad(l)}}}},e.prototype.getSubprocessChildCount=function(e){var t,n=0,i=e.shape.activity.subProcess;return void 0!==(t=i.loop)&&"None"!==t&&n++,void 0!==i.compensation&&!0===i.compensation&&n++,void 0!==i.collapsed&&!0===i.collapsed&&n++,void 0!==i.adhoc&&!0===i.adhoc&&n++,n},e.prototype.getTaskChildCount=function(e){var t=0,n=e.shape.activity.task;return void 0!==n.compensation&&!0===n.compensation&&t++,void 0!==n.loop&&"None"!==n.loop&&t++,t},e.prototype.setStyle=function(e,t){e.style.fill=t.style.fill,e.style.strokeColor=t.style.strokeColor,e.style.strokeWidth=t.style.strokeWidth,e.style.strokeDashArray=t.style.strokeDashArray,e.style.opacity=t.style.opacity,e.style.gradient=t.style.gradient,0!=(t.constraints&_c.Shadow)&&(e.shadow=t.shadow)},e.prototype.updateBPMN=function(e,t,n,i){var o=e.shape||{},r=n.wrapper.children[0],a=n.shape.shape||n.shape.bpmnShape,l=void 0!==e.width||void 0!==e.height;(Ka()&&"Gateway"===o.bpmnShape||"Gateway"===o.shape)&&o.gateway?n.wrapper.children[0]=this.getBPMNGatewayShape(n):(Ka()&&"DataObject"===o.bpmnShape||"DataObject"===o.shape)&&o.dataObject?n.wrapper.children[0]=this.getBPMNDataObjectShape(n):(Ka()&&"Activity"===o.bpmnShape||"Activity"===o.shape)&&o.activity?n.wrapper.children[0]=this.getBPMNActivityShape(n):(Ka()&&"Event"===o.bpmnShape||"Event"===n.shape.bpmnShape||"Event"===o.shape)&&o.event?n.wrapper.children[0]=this.getBPMNEventShape(n,o.event):Ka()&&"Message"===o.bpmnShape||"Message"===o.shape||Ka()&&"DataSource"===o.bpmnShape||"DataSource"===o.shape?n.wrapper.children[0]=this.getBPMNShapes(n):void 0!==o.gateway||"Gateway"===a&&l?this.updateBPMNGateway(n,e):void 0!==o.dataObject||"DataObject"===a&&l?this.updateBPMNDataObject(n,e,t):void 0!==o.activity||"Activity"===a&&l?this.updateBPMNActivity(n,e,t,i):(void 0!==o.event||"Event"===a&&l)&&this.updateBPMNEvent(n,e,t),n.wrapper.children[0].id=n.wrapper.children[0].id||r.id,e.style&&(Wm(e.style,r instanceof Fc?!Ka()&&"Activity"===n.shape.shape||Ka()&&"Activity"===n.shape.bpmnShape?r.children[0].children[0]:r.children[0]:r),e.style&&e.style.strokeColor&&r.children.length>0&&((!Ka()&&"Activity"===n.shape.shape||Ka()&&"Activity"===n.shape.bpmnShape)&&"SubProcess"===n.shape.activity.activity?this.updateBPMNStyle(r.children[0],e.style.strokeColor):(!Ka()&&"Gateway"===n.shape.shape||Ka()&&"Gateway"===n.shape.bpmnShape||!Ka()&&"Event"===n.shape.shape||Ka()&&"Event"===n.shape.bpmnShape)&&this.updateBPMNStyle(r,e.style.strokeColor)))},e.prototype.updateBPMNStyle=function(e,t){for(var n=0;n<e.children.length;n++)Wm({strokeColor:t},e.children[n])},e.prototype.updateBPMNGateway=function(e,t){var n=e.shape,i=e.wrapper.children[0];if(n){Wm(e.style,i.children[0]);var o=rC(n.gateway.type);i.children[1].data=o}void 0===t.width&&void 0===t.height||this.setSizeForBPMNGateway(e.shape.gateway,i,t.width||e.width,t.height||e.height)},e.prototype.updateBPMNDataObject=function(e,t,n){var i=t.shape,o=e.wrapper.children[0];if(i){var r=o.children[1],a=o.children[2];if(void 0!==t.style&&(Wm(t.style,o.children[0]),r.style.opacity=e.style.opacity,a.style.opacity=e.style.opacity),i.dataObject){switch(i.dataObject.type){case"None":r.visible=!1;break;case"Input":r.style.fill="white";break;case"Output":r.style.fill="black"}"None"===n.shape.dataObject.type&&(r.visible=!0),void 0!==t.shape.dataObject.collection&&(a.visible=i.dataObject.collection)}}void 0===t.width&&void 0===t.height||this.setSizeForBPMNDataObjects(e.shape.dataObject,o,t.width||e.width,t.height||e.height)},e.prototype.getEvent=function(e,t,n,i,o,r){switch(n){case"Start":o.visible=!1,i.style.strokeDashArray="",r.style.fill="white",r.style.strokeColor="black",i.style.fill="white";break;case"NonInterruptingStart":i.style.strokeDashArray="2 3",r.style.fill="white",i.style.fill="white",r.style.strokeColor="black",o.visible=!1;break;case"Intermediate":i.style.strokeDashArray="",i.style.fill="white",o.style.strokeDashArray="",i.style.gradient=null,r.style.fill="white",r.style.strokeColor="black",this.updateEventVisibility(t,o);break;case"NonInterruptingIntermediate":i.style.fill="white",i.style.gradient=null,r.style.fill="white",r.style.strokeColor="black",i.style.strokeDashArray="2 3",o.style.strokeDashArray="2 3",this.updateEventVisibility(t,o);break;case"ThrowingIntermediate":case"End":i.style.fill="End"!==n?"white":"black",i.style.strokeDashArray="",o.style.strokeDashArray="",i.style.gradient=null,r.style.fill="black",this.updateEventVisibility(t,o),r.style.strokeColor=e.style.fill}},e.prototype.updateEventVisibility=function(e,t){e.shape.activity&&e.shape.activity.subProcess&&e.shape.activity.subProcess.events&&void 0!==e.shape.activity.subProcess.events[0]&&void 0!==e.shape.activity.subProcess.events[0].event?"NonInterruptingStart"!==e.shape.activity.subProcess.events[0].event&&"Start"!==e.shape.activity.subProcess.events[0].event||(t.visible=!0):void 0!==e.shape.event&&("NonInterruptingStart"!==e.shape.event.event&&"Start"!==e.shape.event.event||(t.visible=!0))},e.prototype.updateBPMNEvent=function(e,t,n){var i,o=t.shape,r=e.wrapper.children[0];if(o){var a,l=r.children[0],s=r.children[1],d=r.children[2];void 0!==t.style&&(Wm(e.style,r.children[0]),void 0===t.style.opacity&&void 0===t.style.strokeColor||(s.style.opacity=e.style.opacity,s.style.strokeColor=e.style.strokeColor)),i=o.event.trigger,void 0!==(a=o.event.event)&&this.getEvent(e,n,a,l,s,d),void 0!==i&&this.updateBPMNEventTrigger(e,t)}void 0===t.width&&void 0===t.height&&void 0===i||this.setSizeForBPMNEvents(e.shape.event,r,t.width||e.width,t.height||e.height)},e.prototype.updateBPMNEventTrigger=function(e,t){var n=e.shape,i=e.wrapper.children[0].children[2];i.canMeasurePath=!0,!t.style||void 0===t.style.strokeColor&&void 0===t.style.opacity||Wm(e.style,i);var o=oC(n.event.trigger);i.data=o},e.prototype.updateBPMNActivity=function(e,t,n,i){var o=t.shape,r=e.wrapper.children[0],a=this.getSize(e,r.children[0].children[0]);if(o){var l=n.shape.activity.activity,s=e.shape.activity.activity;if("SubProcess"!==l&&"Task"!==l||"SubProcess"!==s&&"Task"!==s){if("Task"===s&&void 0!==o.activity.task){this.updateBPMNActivityTask(e,t);var d=this.getTaskChildCount(e),c=a.width/2-12*d;void 0!==o.activity.task.loop&&this.updateBPMNActivityTaskLoop(e,t,1===d?c+8:c+8*(d-1),d,c,2)}"SubProcess"===s&&void 0!==o.activity.subProcess&&this.updateBPMNActivitySubProcess(e,t,n,i)}else i.removeElements(e),e.wrapper.children[0]=this.getBPMNActivityShape(e);this.setSizeForBPMNActivity(e.shape.activity,r,t.width||a.width,t.height||a.height,e)}void 0===t.width&&void 0===t.height||this.setSizeForBPMNActivity(e.shape.activity,r,t.width||a.width,t.height||a.height,e)},e.prototype.updateBPMNActivityTask=function(e,t){for(var n=t.shape,i=e.wrapper.children[0].children[0],o=n.activity.task,r=0;r<i.children.length;r++)i.children[r].id===e.id+"_1_taskTypeService"&&(i.children.splice(r,1),(l=document.getElementById(e.id+"_1_taskTypeService")).parentNode.removeChild(l));if(i.children[1].height="Receive"===o.type||"Send"===o.type?14:20,void 0!==o.type){var a=aC(o.type);if(i.children[1].data=a,"Service"===o.type){for(r=0;r<i.children.length;r++){var l;i.children[r].id===e.id+"_1_tasktType"&&(i.children.splice(r,1),(l=document.getElementById(e.id+"_1_tasktType")).parentNode.removeChild(l))}var s=new Yc;s.id=e.id+"_1_tasktType",s.margin.left=5,s.margin.top=5,s.data=a,s.style.fill="transparent",s.style.opacity=e.style.opacity,s.width=20,s.height=20,i.children.splice(1,0,s);var d=new Yc;d.id=e.id+"_1_taskTypeService",d.data=a,d.margin.left=i.children[1].margin.left+9,d.margin.top=i.children[1].margin.top+9,d.style.fill="white",d.style.opacity=e.style.opacity,i.children.splice(2,0,d)}}void 0!==n.activity.task.call&&(i.children[0].style.strokeWidth=!1!==n.activity.task.call?4:1),void 0!==n.activity.task.compensation&&(i.children[3].visible=!0===n.activity.task.compensation)},e.prototype.updateBPMNActivityTaskLoop=function(e,t,n,i,o,r){var a,l,s=e.wrapper.children[0].children[0],d=t.shape.activity,c=0;void 0!==d.subProcess?(c="Transaction"===d.subProcess.type?2:0,l=lC(a=d.subProcess.loop),s.children[2+c].data=l,s.children[2+c].visible="None"!==a):void 0!==d.task&&void 0!==d.task.loop&&(l=lC(d.task.loop),s.children[2].data=l,s.children[2].visible="None"!==d.task.loop),this.updateChildMargin(s,i,o,n,r+c)},e.prototype.updateChildMargin=function(e,t,n,i,o){if(1===t)for(var r=o;r<e.children.length;r++)2!==r&&!0===e.children[r].visible&&(e.children[r].margin.left=i,i=n+8);else for(i=n+8*(t-1),r=o;r<e.children.length;r++)2!==r&&!0===e.children[r].visible&&(e.children[r].margin.left=i,i+=20)},e.prototype.updateBPMNActivitySubProcess=function(e,t,n,i){var o,r=t.shape,a=e.wrapper.children[0],l=this.getSize(e,a.children[0].children[0]),s=r.activity.subProcess,d=this.getSubprocessChildCount(e),c=l.width/2-12*d;o=1===d?c+8:c+8*(d-1),Wm(e.style,a.children[0].children[0]),void 0!==s.events&&this.updateBPMNSubProcessEvent(e,t,n,i),void 0!==s.adhoc&&this.updateBPMNSubProcessAdhoc(e,n,s,o,d,c),void 0!==s.boundary&&this.updateBPMNSubProcessBoundary(e,s),void 0!==s.collapsed&&this.updateBPMNSubProcessCollapsed(e,n,s,o,d,c,i),void 0!==s.compensation&&this.updateBPMNSubProcessCompensation(e,n,s,o,d,c),void 0!==s.loop&&this.updateBPMNSubProcessLoop(e,n,s,o,d,c),void 0!==s.transaction&&this.updateBPMNSubProcessTransaction(e,t,n,i)},e.prototype.updateBPMNSubProcessEvent=function(e,t,n,i){for(var o=e.wrapper.children[0].children[0],r=t.shape.activity.subProcess,a=0,l=Object.keys(r.events);a<l.length;a++){var s=Number(l[a]);this.updateBPMNSubEvent(e,r.events[s],e.shape.activity.subProcess.events[s],o.children[s+2],t,n,i)}},e.prototype.updateBPMNSubEvent=function(e,t,n,i,o,r,a){var l,s,d=e.wrapper.children[0],c=o.shape,u=i.children[0],h=i.children[1],p=i.children[2];if(o.style&&(void 0===o.style.strokeColor&&void 0===o.style.opacity||(d.children[0].children[1].style.strokeColor=o.style.strokeColor,d.children[0].children[1].style.opacity=o.style.opacity)),void 0!==c.activity.subProcess&&(l=t.event,s=t.trigger),void 0!==l&&this.getEvent(o,r,l,u,h,p),void 0!==s){o.style&&Wm(o.style,d.children[0]);var f=oC(s);i.children[2].data=f}void 0===t.height&&void 0===t.width||this.getEventSize(t,i),void 0!==t.id&&(i.id=t.id),void 0!==t.margin&&(i.margin=t.margin),void 0!==t.horizontalAlignment&&(i.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(i.verticalAlignment=t.verticalAlignment),void 0!==t.offset&&(i.setOffsetWithRespectToBounds(n.offset.x,n.offset.y,"Fraction"),i.relativeMode="Point"),void 0!==t.annotations&&i.children[3]&&i.children.length>3&&a.updateAnnotation(t.annotations[0],i.children[3],d.children[0].children[2]),void 0!==t.ports&&i.children[4]&&i.children.length>4&&a.updatePort(t.ports[0],i.children[4],d.children[0].children[2]),void 0!==t.visible&&this.updateDiagramContainerVisibility(i,t.visible)},e.prototype.updateBPMNSubProcessTransaction=function(e,t,n,i){var o=t.shape.activity.subProcess.transaction,r=e.wrapper.children[0].children[0].children[2];void 0!==o.success&&this.updateBPMNSubEvent(e,o.success,e.shape.activity.subProcess.transaction.success,r.children[0],t,n,i),void 0!==o.cancel&&this.updateBPMNSubEvent(e,o.cancel,e.shape.activity.subProcess.transaction.cancel,r.children[1],t,n,i),void 0!==o.failure&&this.updateBPMNSubEvent(e,o.failure,e.shape.activity.subProcess.transaction.failure,r.children[2],t,n,i);for(var a=0,l=e.outEdges;a<l.length;a++){var s=i.nameTable[l[a]];switch(s.sourcePortID){case"success":o.success&&void 0!==o.success.visible&&i.connectorPropertyChange(s,{},{sourcePortID:"success"});break;case"cancel":o.cancel&&void 0!==o.cancel.visible&&i.connectorPropertyChange(s,{},{sourcePortID:"cancel"});break;case"failure":o.failure&&void 0!==o.failure.visible&&i.connectorPropertyChange(s,{},{sourcePortID:"failure"})}}},e.prototype.getEventSize=function(e,t){void 0!==e.height&&(t.height=e.height,t.children[0].height=e.height,t.children[1].height=.85*e.height,t.children[2].height=.54*e.height),void 0!==e.width&&(t.width=e.width,t.children[0].width=e.width,t.children[1].width=.85*e.width,t.children[2].width=.54*e.width)},e.prototype.updateBPMNSubProcessAdhoc=function(e,t,n,i,o,r){var a=e.wrapper.children[0].children[0],l="Transaction"===e.shape.activity.subProcess.type?2:0;a.children[3+l].visible=!1!==n.adhoc,this.updateChildMargin(a,o,r,i,3+l)},e.prototype.updateBPMNSubProcessBoundary=function(e,t){var n=e.wrapper.children[0].children[0].children[0];"Default"===t.boundary&&(n.style.strokeWidth=1,n.style.strokeDashArray="1 0"),"Call"===t.boundary&&(n.style.strokeWidth=4,n.style.strokeDashArray="1 0"),"Event"===t.boundary&&(n.style.strokeWidth=1,n.style.strokeDashArray="2 2")},e.prototype.updateElementVisibility=function(e,t,n){if(e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var i=e.shape.activity.subProcess.processes,o=i.length-1;o>=0;o--){var r=n.nameTable[i[o]];r.visible=t,n.updateElementVisibility(r.wrapper,r,t),t&&((!Ka()&&"Event"===r.shape.shape||Ka()&&"Event"===r.shape.bpmnShape)&&this.setEventVisibility(r,r.wrapper.children[0].children),"SubProcess"===r.shape.activity.activity&&this.setSubProcessVisibility(r));for(var a=r.inEdges.concat(r.outEdges),l=a.length-1;l>=0;l--){var s=n.nameTable[a[l]];s.visible=t,n.updateElementVisibility(s.wrapper,s,t)}}t&&((!Ka()&&"Event"===e.shape.shape||Ka()&&"Event"===e.shape.bpmnShape)&&this.setEventVisibility(e,e.wrapper.children[0].children),"SubProcess"===e.shape.activity.activity&&this.setSubProcessVisibility(e),"Task"===e.shape.activity.activity&&(!Ka()&&"Activity"===e.shape.shape||Ka()&&"Activity"===e.shape.bpmnShape)&&"None"===e.shape.activity.subProcess.loop&&(e.wrapper.children[0].children[0].children[3].visible=!1))},e.prototype.updateBPMNSubProcessCollapsed=function(e,t,n,i,o,r,a){var l=e.shape.activity.subProcess.events.length,s=e.wrapper.children[0].children[0],d="Transaction"===e.shape.activity.subProcess.type?3:1;!1===n.collapsed?(this.updateElementVisibility(e,!0,a),s.children[d+l].visible=!1):(this.updateElementVisibility(e,!1,a),s.children[d+l].visible=!0),this.updateChildMargin(s,o,r,i,3+l)},e.prototype.updateBPMNSubProcessCompensation=function(e,t,n,i,o,r){var a=e.wrapper.children[0].children[0],l="Transaction"===e.shape.activity.subProcess.type?2:0;a.children[4+l].visible=!1!==n.compensation,this.updateChildMargin(a,o,r,i,4+l)},e.prototype.updateBPMNSubProcessLoop=function(e,t,n,i,o,r){this.updateBPMNActivityTaskLoop(e,e,i,o,r,1)},e.prototype.updateBPMNConnector=function(e,t,n,i){var o=n.shape;return void 0!==o.sequence&&(e=this.getSequence(e,t,n,i)),void 0!==o.association&&(e=this.getAssociation(e,t,n,i)),void 0!==o.message&&(e=this.getMessage(e,t,n,i)),e},e.prototype.getSequence=function(e,t,n,i){if("Normal"===n.shape.sequence&&(i.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}}}),e.wrapper.children[3].visible=!1),"Default"===n.shape.sequence){i.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}});var o=new Yc,r=void new Yc;o=e.getSegmentElement(e,o);for(var a=e.intermediatePoints,l=0;l<a.length-1;l++)length+=e.distance(a[l],a[l+1]),r=e.findPath(a[l],a[l+1]);e.wrapper.children[3].data=r[0],e.wrapper.children[3].id=e.id+"_"+n.shape.sequence,e.wrapper.children[3].offsetX=r[1].x,e.wrapper.children[3].offsetY=r[1].y,e.wrapper.children[3].rotateAngle=45,e.wrapper.children[3].transform=Ic.Self}return"Conditional"===n.shape.sequence&&(i.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Diamond",width:20,height:10,style:{fill:"white"}}}),e.wrapper.children[3].visible=!1),e},e.prototype.getAssociation=function(e,t,n,i){return"Default"===n.shape.association&&i.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"Directional"===n.shape.association&&i.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"BiDirectional"===n.shape.association&&i.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Arrow",width:5,height:10,style:{fill:"white"}}}),e},e.prototype.getMessage=function(e,t,n,i){var o,r;if("Default"===t.shape.message){if(void 0!==n.shape.message){if("InitiatingMessage"===n.shape.message||"NonInitiatingMessage"===n.shape.message){var a=new Yc;a=e.getSegmentElement(e,a);for(var l=e.intermediatePoints,s=0;s<l.length-1;s++){length+=e.distance(l[s],l[s+1]);var d=.5*length;length>=d&&(o=Ou(l[s],l[s+1]),r=jd.transform(l[s],o,d))}}e.wrapper.children[3].id=e.id+"_"+n.shape.message,e.wrapper.children[3].width=25,e.wrapper.children[3].height=15,e.wrapper.children[3].data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.wrapper.children[3].horizontalAlignment="Center",e.wrapper.children[3].verticalAlignment="Center",e.wrapper.children[3].transform=Ic.Self,e.wrapper.children[3].style.fill="NonInitiatingMessage"===n.shape.message?"lightgrey":"white",e.wrapper.children[3].offsetX=r.x,e.wrapper.children[3].offsetY=r.y}}else"NonInitiatingMessage"===t.shape.message&&"InitiatingMessage"===t.shape.message||("Default"!==n.shape.message?e.wrapper.children[3].style.fill="NonInitiatingMessage"===n.shape.message?"lightgrey":"white":e.wrapper.children[3].visible=!1);return e},e.prototype.setSizeForBPMNEvents=function(e,t,n,i){t.children[0].width=n,t.children[0].height=i;var o=t.children[1];o.width=.85*n,o.height=.85*i;var r=t.children[2];"Message"===e.trigger?(r.width=.54*n,r.height=.4*i):(r.width=.5*n,r.height=.5*i)},e.prototype.updateAnnotationDrag=function(e,t,n,i){var o=e.id.split("_");if("textannotation"===o[1])for(var r=void 0,a=0;a<e.inEdges.length;a++){var l=t.nameTable[e.inEdges[a]];l&&(r=t.nameTable[l.sourceID]);var s={x:e.offsetX+n,y:e.offsetY+i},d=l.sourcePoint,c=jd.findLength(s,d),u=jd.findAngle(d,s);if(r.shape.annotations)for(var h=0;h<r.shape.annotations.length;h++)if(r.shape.annotations[h].id===o[o.length-1])return r.shape.annotations[h].length=c,r.shape.annotations[h].angle=u,this.setAnnotationPath(r.wrapper.bounds,e.wrapper,s,e),!1}return!!e.processId&&(this.drag(e,n,i,t),!0)},e.prototype.getAnnotationPathAngle=function(e,t){var n=0;switch(qu(e,t,t)){case"Right":n=0;break;case"Left":n=180;break;case"Bottom":n=90;break;case"Top":n=270}return n},e.prototype.setSizeForBPMNGateway=function(e,t,n,i){t.children[0].width=n,t.children[0].height=i,t.children[1].width=.45*n,t.children[1].height=.45*i},e.prototype.setSizeForBPMNDataObjects=function(e,t,n,i){t.children[0].width=n,t.children[0].height=i},e.prototype.setSizeForBPMNActivity=function(e,t,n,i,o){t.children[0].width=n,t.children[0].height=i,t.children[0].children[0].width=n,t.children[0].children[0].height=i,"Transaction"===e.subProcess.type&&(t.children[0].children[1].width=Math.max(n-6,1),t.children[0].children[1].height=Math.max(i-6,1),t.children[0].children[2].width=n,t.children[0].children[2].height=i);var r,a,l=new Uc,s=this.getSize(o,l);a="Task"===e.activity?this.getTaskChildCount(o):this.getSubprocessChildCount(o);var d=(n||s.width)/2;r=1===a?d-6:d-12*a/2-4*(a-1)/2;for(var c=0;c<t.children[0].children.length;c++)t.children[0].children[c].visible&&(t.children[0].children[c].id.indexOf("_loop")>-1||t.children[0].children[c].id.indexOf("_0_compensation")>-1||t.children[0].children[c].id.indexOf("_0_adhoc")>-1||t.children[0].children[c].id.indexOf("_0_collapsed")>-1)&&(t.children[0].children[c].margin.left=r,r+=t.children[0].children[c].actualSize.width+4)},e.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof Fc)for(var n=0;n<e.children.length;n++)this.updateDiagramContainerVisibility(e.children[n],t);e.visible=t},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Bpmn"},e}();function iC(e){return sC[e.toString()]}function oC(e){return dC[e.toString()]}function rC(e){return cC[e.toString()]}function aC(e){return uC[e.toString()]}function lC(e){return hC[e.toString()]}var sC={Event:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Message:"M0,0L19.8,12.8L40,0L0,0L0,25.5L40,25.5L40,0z",DataSource:"M 0 10.6 c 0 5.9 16.8 10.6 37.5 10.6 S 75 16.4 75 10.6 v 0 v 68.9 v -0.1 C 75 85.3 58.2 90 37.5 90 S 0 85.3 0 79.4 l 0 0.1 V 56 V 40.6 L 0 10.6 C 0 4.7 16.8 0 37.5 0 S 75 4.7 75 10.6 S 58.2 21.2 37.5 21.2S 0 16.5 0 10.6 l 0 6.7 v -0.2 c 0 5.9 16.8 10.6 37.5 10.6 S 75 22.9 75 17.1 v 6.8 v -0.1 c 0 5.9 -16.8 10.6 -37.5 10.6 S 0 29.6 0 23.8",SubProcess:"M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z",collapsedShape:"M 8.13789 15 H 0 V 0 H 8.13789 V 15 Z M 0.625991 13.75 H 7.51189 V 1.25 H 0.625991 V 13.75 Z M 2.18095 7.03125 L 5.95631 7.03125 L 5.95631 7.46875 L 2.18095 7.46875 Z M 3.8342 3.73 L 4.30369 3.73 L 4.30369 11.2687 L 3.8342 11.2687 Z"},dC={Message:"M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",Timer:"M40,20c0,8.654-5.496,16.024-13.189,18.81C24.685,39.58,22.392,40,20,40C8.954,40,0,31.046,0,20S8.954,0,20,0S40,8.954,40,20z M20,0 L20,2.583 L20,5.283 M10.027,2.681L11.659,5.507 L12.669,7.257 M2.731,9.989 L6.014,11.885 L7.307,12.631 M0.067,19.967 L2.667,19.967 L5.35,19.967M2.748,29.939 L5.731,28.217 L7.323,27.298 M10.056,37.236 L11.292,35.095 L12.698,32.66 M20.033,39.9 L20.033,36.417 L20.033,34.617M30.006,37.219 L28.893,35.292 L27.364,32.643 M37.302,29.911 L34.608,28.355 L32.727,27.269M39.967,19.933 L37.417,19.933 L34.683,19.933 M37.286,9.961 L34.583,11.521 L32.71,12.602 M29.977,2.664 L28.653,4.957 L27.336,7.24 M22.104,8.5 L19.688,20 L24.75,20 L31.604,20 L24.75,20 L19.688,20z",Error:"M 23.77 18.527 l -7.107 27.396 l 8.507 -17.247 L 36.94 40.073 l 6.394 -25.997 l -8.497 15.754 L 23.77 18.527 Z",Escalation:"M 30.001 8.098 L 11.842 43.543 l 18.159 -18.882 l 18.162 18.882 L 30.001 8.098 Z ",Cancel:"M 3.5 16 L 0 12.6 L 4.6 8 L 0 3.5 L 3.4 0 L 8 4.6 l 4.5 -4.5 L 16 3.5 L 11.5 8 l 4.5 4.5 l -3.4 3.5 L 8 11.4 L 3.5 16 Z",Compensation:"M 25.7086 0 L 0 25 L 25.7086 50 V 26.3752 L 50 50 V 0 L 25.7086 23.6248 V 0 Z ",Conditional:"M 0 0 H 16 V 16 H 0 z M 1.14 3.2 H 14.85 M 1.14 6.4 H 14.85 M 1.14 9.6 H 14.85 M 1.14 12.8 H 14.85",Link:"M 32.014 19.258 v 5.992 H 9.373 v 9.504 h 22.641 v 5.988 L 50.622 30 L 32.014 19.258 Z",Signal:"M 50 50 H 0 L 25.0025 0 L 50 50 Z",Terminate:"M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",Multiple:"M 17.784 48.889 H 42.21 l 7.548 -23.23 L 29.997 11.303 L 10.236 25.658 L 17.784 48.889 Z",Parallel:"M 27.276 49.986 h 5.58 v -17.15 h 17.146 V 27.17 h -17.15 l 0.004 -17.15 h -5.58 l -0.004 17.15 H 9.994 v 5.666 h 17.278 L 27.276 49.986 Z"},cC={None:"",Exclusive:"M 11.196 29.009 l 6.36 -9.712 l -5.764 -8.899 h 4.393 l 3.732 5.979 l 3.656 -5.979 h 4.354 l -5.789 9.039l 6.36 9.572 h -4.532 l -4.126 -6.437 l -4.139 6.437 H 11.196 Z",Inclusive:"M 20.323 31.333 c -6.625 0 -12.015 -5.39 -12.015 -12.015 s 5.39 -12.015 12.015 -12.015 s 12.016 5.39 12.016 12.015 S 26.948 31.333 20.323 31.333 Z M 20.323 9.303 c -5.522 0 -10.015 4.493 -10.015 10.015 s 4.492 10.015 10.015 10.015 s 10.016 -4.493 10.016 -10.015 S 25.846 9.303 20.323 9.303 Z",Parallel:"M 18.394 29.542 v -8.833 H 9.626 v -3.691 h 8.768 V 8.251 h 3.734 v 8.767 h 8.768 v 3.691 h -8.768 v 8.833 H 18.394 Z",Complex:"M29.198,19.063L23.089,19.063L27.794,14.358L26.38,12.944L21.223,18.101L21.223,10.443L19.223,10.443L19.223,17.976L14.022,12.776L12.608,14.19L17.48,19.063L10.365,19.063L10.365,21.063L18.261,21.063L12.392,26.932L13.806,28.346L19.223,22.929L19.223,30.225L21.223,30.225L21.223,22.805L25.925,27.507L27.339,26.093L22.309,21.063L29.198,21.063z",EventBased:"M 20.322 29.874 c -5.444 0 -9.873 -4.43 -9.873 -9.874 s 4.429 -9.874 9.873 -9.874 s 9.874 4.429 9.874 9.874 S 25.767 29.874 20.322 29.874 Z M 20.322 32.891 c -7.107 0 -12.89 -5.783 -12.89 -12.891 c 0 -7.107 5.782 -12.89 12.89 -12.89 c 7.108 0 12.891 5.783 12.891 12.89 C 33.213 27.108 27.431 32.891 20.322 32.891 Z M 24.191 25.386 h -7.984 l -2.469 -7.595 l 6.461 -4.693 l 6.461 4.693 L 24.191 25.386 Z",ExclusiveEventBased:"M 30 15 C 30 23.28 23.28 30 15 30 S 0 23.28 0 15 S 6.72 0 15 0 S 30 6.72 30 15 z M 15 5 L 5 12.5 L 8 22.5 H 22 L 25 12.5 z",ParallelEventBased:"M 35 17.5 C 35 27.16 27.16 35 17.5 35 S 0 27.16 0 17.5 S 7.84 0 17.5 0 S 35 7.84 35 17.5 z M 14.58 5.83 V 14.58 H 5.83 V 20.42 H 14.58 V 29.17 H 20.42 V 20.42 H 29.17 V 14.58 H 20.42 V 5.83 z"},uC={None:"",Service:"M 32.699 20.187 v -4.005 h -3.32 c -0.125 -0.43 -0.292 -0.83 -0.488 -1.21 l 2.373 -2.375 l -2.833 -2.83 l -2.333 2.333 c -0.44 -0.253 -0.9 -0.448 -1.387 -0.595 v -3.32 h -4.003 v 3.32 c -0.46 0.137 -0.890.322 -1.3 0.537 l -2.285 -2.275 l -2.833 2.83 l 2.285 2.278 c -0.235 0.42 -0.41 0.847 -0.547 1.307 h -3.33 v 4.005 h 3.33 c 0.148 0.488 0.343 0.955 0.588 1.395 l -2.325 2.325 l 2.822 2.832 l 2.373 -2.382 c 0.392 0.205 0.792 0.37 1.212 0.497 v 3.33 h 4.003 v -3.33 c 0.46 -0.138 0.89 -0.323 1.3 -0.547 l 2.43 2.432 l 2.822 -2.832 l -2.42 -2.422 c 0.222 -0.41 0.4 -0.85 0.535-1.297 H 32.699 Z M 22.699 21.987 c -2.1 0 -3.803 -1.703 -3.803 -3.803 c 0 -2.1 1.703 -3.803 3.803 -3.803 c 2.1 0 3.803 1.703 3.803 3.803 C 26.502 20.285 24.8 21.987 22.699 21.987 Z",Receive:"M 12.217 12.134 v 13.334 h 20 V 12.134 H 12.217 Z M 30.44 13.007 l -8.223 5.35 l -8.223 -5.35 H 30.44 Z M 13.09 24.594 V 13.459 l 9.127 5.94 l 9.127 -5.94 v 11.135 H 13.09 Z",Send:"M 45.7256 3.16055 L 25 23.4017 L 4.27442 3.16055 H 45.7256 Z M 47.8963 46.8413 H 2.10375 V 4.80813 L 25 27.1709 L 47.8963 4.80813 V 46.8413 Z",InstantiatingReceive:"M 16.306 17.39 v 8.79 h 13.198 v -8.79 H 16.306 Z M 28.375 17.946 l -5.47 3.558 l -5.47 -3.558 H 28.375 Z M 28.948 25.625 H 16.861 v -7.389 l 6.043 3.931 l 6.043 -3.931 V 25.625 Z M 22.905 11.785c -5.514 0 -9.999 4.486 -9.999 10 c 0 5.514 4.485 10 9.999 10 s 9.999 -4.486 9.999 -10 C 32.904 16.272 28.419 11.785 22.905 11.785 Z M 22.905 31.239 c -5.212 0 -9.453 -4.241 -9.453 -9.454c 0 -5.212 4.241 -9.453 9.453 -9.453 s 9.452 4.241 9.452 9.453 C 32.357 26.998 28.117 31.239 22.905 31.239 Z",Manual:"M 13.183 15.325 h 2.911 c 0.105 0 0.207 -0.043 0.281 -0.117 c 0.078 -0.074 0.117 -0.176 0.117 -0.281c 0 -0.753 0.718 -1.362 1.596 -1.362 h 2.579 c -0.117 0.227 -0.191 0.48 -0.195 0.757 c 0 0.433 0.168 0.851 0.46 1.144 c 0.008 0.004 0.015 0.011 0.019 0.015 c -0.289 0.285 -0.475 0.691 -0.479 1.148 c 0 0.433 0.168 0.846 0.46 1.139 c 0.011 0.012 0.023 0.02 0.035 0.032 c -0.301 0.281 -0.491 0.694 -0.495 1.155 c 0 0.432 0.168 0.847 0.46 1.143c 0.265 0.266 0.612 0.414 0.975 0.414 h 0.839 c 0.027 0.004 0.051 0.012 0.074 0.012 h 8.443 c 0.352 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.285 0.753 -0.636 0.753 h -6.687 c -0.019 0 -0.035 -0.008 -0.051 -0.008h -2.27 c -0.121 -0.835 -0.667 -1.187 -1.795 -1.187 h -2.158 c -0.223 0 -0.402 0.18 -0.402 0.403c 0 0.219 0.179 0.398 0.402 0.398 h 2.158 c 0.972 0 1.019 0.203 1.019 0.784 c 0 0.219 0.179 0.399 0.402 0.399 c 0.008 0 0.016 -0.004 0.027 -0.004 c 0.028 0.004 0.055 0.016 0.082 0.016 h 2.56 c 0.34 0.015 0.616 0.343 0.616 0.752c 0 0.418 -0.285 0.757 -0.636 0.761 h -0.004 h -6.442 c -0.878 0 -1.595 -0.639 -1.595 -1.427 v -0.683 c 0 -0.109 -0.043 -0.211 -0.114 -0.285 c -0.078 -0.074 -0.179 -0.117 -0.285 -0.117 h -0.004 l -2.989 0.027 c -0.223 0 -0.398 0.184 -0.398 0.402 c 0 0.219 0.179 0.395 0.398 0.395 h 0.004 l 2.591 -0.02 v 0.282 c 0 1.229 1.073 2.223 2.391 2.223 h 3.895 c 0.004 0 0.007 0.004 0.011 0.004 h 2.536 c 0.792 0 1.436 -0.698 1.436 -1.561 c 0 -0.273 -0.07 -0.53 -0.188 -0.752 h 5.49 c 0.792 0 1.436 -0.695 1.436 -1.553 c 0 -0.858 -0.644 -1.557 -1.436 -1.557h -3.566 c 0.121 -0.226 0.199 -0.487 0.199 -0.768 c 0 -0.468 -0.195 -0.882 -0.495 -1.167c 0.301 -0.285 0.495 -0.698 0.495 -1.163 c 0 -0.456 -0.191 -0.866 -0.483 -1.152 c 0.293 -0.285 0.483 -0.694 0.483 -1.151c 0 -0.858 -0.647 -1.557 -1.439 -1.557 h -8.373 c -1.167 0 -2.142 0.757 -2.352 1.76 l -2.548 -0.004 c -0.219 0 -0.399 0.18 -0.399 0.403 C 12.784 15.145 12.964 15.325 13.183 15.325 L 13.183 15.325 Z M 21.907 19.707 c -0.191 0 -0.328 -0.094 -0.41 -0.176 c -0.144 -0.145 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.418 0.289 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.008 h 0.051 c 0.351 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.286 0.753 -0.636 0.753 H 21.907 Z M 27.097 16.629 c 0 0.414 -0.286 0.753 -0.64 0.753 h -4.464 c -0.004 0 -0.004 0 -0.004 0 h -0.082c -0.191 0 -0.328 -0.098 -0.414 -0.18 c -0.14 -0.145 -0.222 -0.352 -0.222 -0.573 c 0 -0.413 0.285 -0.749 0.631 -0.753h 3.434 c 0 0 0 0 0.004 0 h 1.116 c 0.008 0 0.012 -0.004 0.02 -0.004 C 26.819 15.887 27.097 16.215 27.097 16.629L 27.097 16.629 Z M 27.097 14.322 c 0 0.41 -0.278 0.737 -0.62 0.749 c -0.008 0 -0.012 0 -0.016 0 h -3.637 c -0.008 0 -0.015 0.004 -0.023 0.004 h -0.886 c -0.004 0 -0.008 0 -0.012 0 c -0.187 0 -0.324 -0.094 -0.406 -0.176c -0.144 -0.144 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.414 0.293 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.004 h 0.051 C 26.811 13.565 27.097 13.905 27.097 14.322 L 27.097 14.322 Z M 27.097 14.322",BusinessRule:"M 32.844 13.245 h -0.089 v 0 H 13.764 v -0.015 h -1.009 v 16.989 h 0.095 v 0.011 h 19.716 v -0.011 h 0.278 V 13.245 Z M 31.844 14.229 v 4.185 h -18.08 v -4.185 H 31.844 Z M 18.168 25.306 v 3.938 h -4.404 v -3.938 H 18.168 Z M 13.764 24.322 v -4.923 h 4.404 v 4.923 H 13.764 Z M 19.177 25.306 h 12.667 v 3.938 H 19.177 V 25.306 Z M 19.177 24.322v -4.923 h 12.667 v 4.923 H 19.177 Z",User:"M 21.762 21.935 c 2.584 0 4.687 -2.561 4.687 -5.703 c 0 -3.147 -2.103 -5.703 -4.687 -5.703 c -1.279 0 -2.475 0.61-3.363 1.721 c -0.855 1.071 -1.327 2.484 -1.324 3.983 C 17.075 19.374 19.178 21.935 21.762 21.935 L 21.762 21.935 ZM 21.762 11.779 c 1.894 0 3.436 1.995 3.436 4.452 c 0 2.453 -1.541 4.452 -3.436 4.452 c -1.895 0 -3.44 -1.999 -3.44 -4.452C 18.323 13.774 19.864 11.779 21.762 11.779 L 21.762 11.779 Z M 25.699 21.309 c -0.348 0 -0.626 0.277 -0.626 0.626 c 0 0.344 0.277 0.622 0.626 0.622 c 2.136 0 3.875 1.74 3.875 3.879 c 0 0.272 -0.227 0.498 -0.501 0.498 H 14.447 c -0.274 0 -0.497 -0.223 -0.497 -0.498 c 0 -2.139 1.736 -3.879 3.872 -3.879 c 0.344 0 0.625 -0.277 0.625 -0.622 c 0 -0.348 -0.28 -0.626-0.625 -0.626 c -2.826 0 -5.124 2.297 -5.124 5.126 c 0 0.965 0.784 1.749 1.748 1.749 h 14.626 c 0.964 0 1.748 -0.7841.748 -1.749 C 30.822 23.606 28.524 21.309 25.699 21.309 L 25.699 21.309 Z M 22.217 9.832 c 0.448 -0.263 0.924 -0.396 1.419 -0.396 c 1.895 0 3.436 1.995 3.436 4.452 c 0 0.439 -0.048 0.873 -0.143 1.284 c -0.08 0.336 0.128 0.672 0.464 0.751 c 0.048 0.012 0.098 0.019 0.143 0.019 c 0.284 0 0.541 -0.195 0.608 -0.483 c 0.119 -0.506 0.18 -1.034 0.18 -1.571c 0 -3.147 -2.102 -5.703 -4.687 -5.703 c -0.711 0 -1.419 0.198 -2.054 0.573 c -0.296 0.174 -0.397 0.559 -0.219 0.855C 21.536 9.911 21.921 10.009 22.217 9.832 L 22.217 9.832 Z M 27.697 18.81 c -0.345 0 -0.626 0.277 -0.626 0.622 c 0 0.348 0.281 0.626 0.626 0.626 c 2.137 0 3.75 1.782 3.75 3.918 c 0 0.07 -0.013 0.141 -0.043 0.205 c -0.14 0.314 0.0030.684 0.318 0.823 c 0.082 0.037 0.167 0.055 0.253 0.055 c 0.241 0 0.466 -0.141 0.57 -0.373 c 0.101 -0.226 0.153 -0.464 0.153-0.714 C 32.699 21.15 30.523 18.81 27.697 18.81 L 27.697 18.81 Z M 27.697 18.81",Script:"M 22.453 15.04 c 0 0 -1.194 -3.741 2.548 -3.774 c 0 0 2.497 0.126 1.766 4.321 c -0.008 0.043 -0.015 0.086 -0.024 0.13c -0.806 4.323 -2.516 8.42 -3.193 10.581 h 3.904 c 0 0 0.983 4.581 -2.549 4.968 H 13.292 c 0 0 -3.097 -1.42 -1.517 -5.323 l 3 -10.839 H 11.84 c 0 0 -1.129 -2.902 1.709 -3.806 l 11.425 -0.032 l -0.73 0.355 l -1.193 1.726 L 22.453 15.04 Z M 22.409 12.597 c 0 0 -0.242 0.483 -0.278 0.98 h -9.098 c 0 0 -0.06 -0.871 0.714 -1.041 L 22.409 12.597 Z M 26.341 27.734c 0 0 -0.13 2.678 -2.226 1.871 c 0 0 -0.823 -0.565 -0.758 -1.855 L 26.341 27.734 Z M 22.905 15.008 c 0 0 0.653 -0.258 0.709-1.501 c 0 0 0.145 -1.144 1.483 -0.693 c 0 0 0.808 0.355 0.259 2.404 c 0 0 -2.226 8.5 -3.032 10.339 c 0 0 -1.064 2.646 0.096 4.226 h -8.581 c 0 0 -1.806 -0.452 -0.741 -3.613 c 0 0 2.935 -9.549 3.193 -11.162 L 22.905 15.008 Z"},hC={None:"",Standard:"M 52.002 73.379 c -2.494 -2.536 -6.55 -2.534 -9.043 0 c -1.208 1.228 -1.874 2.861 -1.874 4.598 c 0 1.225 0.337 2.395 0.957 3.411 l -1.167 1.186 l 2.071 0.458 l 2.071 0.458 l -0.45 -2.106 l -0.45 -2.106 l -1.292 1.314c -1.119 -2.065 -0.842 -4.709 0.877 -6.458 c 2.084 -2.119 5.475 -2.117 7.557 0 c 2.083 2.119 2.083 5.565 0 7.685c -0.976 0.992 -2.272 1.557 -3.65 1.59 l 0.025 1.068 c 1.65 -0.041 3.2 -0.716 4.368 -1.903 c 1.208 -1.228 1.874 -2.861 1.874 -4.597 C 53.875 76.24 53.209 74.607 52.002 73.379 Z",ParallelMultiInstance:"M 51.5,69.5 L52.5,69.5 L52.5,84.5 L51.5 84.5 Z M 46.5,69.5 L47.5,69.5 L47.5,84.5 L46.5 84.5 Z M 41.5,69.5 L42.5,69.5 L42.5,84.5 L41.5 84.5 Z  ",SequenceMultiInstance:"M 40.375,71.5 L 55.375,71.5 L 55.375,72.5 L 40.375,72.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,81.5 L 55.375,81.5L 55.375,82.5 L 40.375,82.5 Z"},pC=function(){function e(){}return e.prototype.updateBridging=function(e,t){var n,i=[];if(e.bridges=[],function(t,n){return e.constraints&Tc.Bridging?e.constraints&Tc.Bridging:e.constraints&Tc.InheritBridging?n.constraints&Ac.Bridging:0}(0,t)){var o=this.getPoints(e);n=Zd.toBounds(o);for(var r=e.bridgeSpace,a=t.bridgeDirection,l=-1,s=t.connectors,d=0;d<s.length;d++){var c=s[d];if(e&&c&&e.id!==c.id){var u=this.getPoints(c),h=Zd.toBounds(u);if(this.intersectsRect(n,h)){var p=this.intersect(o,u,!1,a,!0);if(p.length>0)for(var f=0;f<p.length;f++){var g=0,m=0,v=0,y=this.getLengthAtFractionPoint(e,p[f]);if(-1!==y.pointIndex){m=y.segmentIndex,v=y.pointIndex;var b=this.getPointAtLength((g=y.lengthFractionIndex)-r/2,o),w=this.getPointAtLength(g+r/2,o);this.isEmptyPoint(w)&&(w=b);var C=this.angleCalculation(e.sourcePoint,"Straight"===e.type?e.targetPoint:e.intermediatePoints[v]);if(i.length){var x;x=e.sourcePoint;var S=Math.abs(this.lengthCalculation(x,w)),T=-1;l=-1;for(var E=0;E<i[m].bridges.length;E++)if(l++,S<Math.abs(this.lengthCalculation(x,i[m].bridges[E].endPoint))){T=l;break}if(T>=0){var _=void 0;(_=this.createSegment(b,w,C,a,v,e,t)).target=c.id,i[m].bridges.splice(T,0,_),i[m].bridges.join(),i[m].bridgeStartPoint.splice(T,0,b),i[m].bridgeStartPoint.join(),i[m].segmentIndex=m}else _=void 0,(_=this.createSegment(b,w,C,a,v,e,t)).target=c.id,i[m].bridges.push(_),i[m].bridgeStartPoint.push(b),i[m].segmentIndex=m}else if(!isNaN(b.x)&&!isNaN(b.y)&&!this.isEmptyPoint(w)){var k,D={bridges:[],bridgeStartPoint:[],segmentIndex:m};(k=this.createSegment(b,w,C,a,v,e,t)).target=c.id;var A=[];A.push(b),[].push(w),i[m]=D,i[m].bridges.push(k),i[m].bridgeStartPoint=A,i[m].segmentIndex=m}}}}}}0!==i.length&&this.firstBridge(i,e,r)}},e.prototype.firstBridge=function(e,t,n){for(var i=0;i<e.length;i++){for(var o=e[i],r=1;r<o.bridges.length;r++)if(jd.findLength(o.bridges[r].endPoint,o.bridges[r-1].endPoint)<n){o.bridges[r-1].endPoint=o.bridges[r].endPoint;var a=this.createBridgeSegment((s=o.bridges[r-1]).startPoint,s.endPoint,s.angle,n,s.sweep);o.bridges[r-1].path=a,o.bridges.splice(r,1),o.bridgeStartPoint.splice(r,1),r--}for(var l=0;l<o.bridges.length;l++){var s;t.bridges.push(s=o.bridges[l])}}},e.prototype.createSegment=function(e,t,n,i,o,r,a){var l,s,d={angle:0,endPoint:{x:0,y:0},target:"",path:"",segmentPointIndex:-1,startPoint:{x:0,y:0},sweep:1,rendered:!1};return s=this.sweepDirection(n,i,r,a),l=this.createBridgeSegment(e,t,n,r.bridgeSpace,s),d.path=l,d.startPoint=e,d.endPoint=t,d.angle=n,d.segmentPointIndex=o,d.sweep=s,d},e.prototype.createBridgeSegment=function(e,t,n,i,o){return"A "+i/2+" "+i/2+" "+n+" , 1 "+o+" "+t.x+","+t.y},e.prototype.sweepDirection=function(e,t,n,i){var o,r=Math.abs(e);switch(t){case"Top":case"Bottom":o=1,r>=0&&r<=90&&(o=0);break;case"Left":case"Right":o=1,e<0&&e>=-180&&(o=0)}return"Right"!==t&&"Bottom"!==t||(o=0===o?1:0),o},e.prototype.getPointAtLength=function(e,t){for(var n,i=0,o={x:0,y:0},r=0;r<t.length;r++){var a=t[r];if(n){var l=this.lengthCalculation(n,a);if(i+l>e){var s=e-i,d=jd.findAngle(n,a),c=s*Math.cos(d*Math.PI/180),u=s*Math.sin(d*Math.PI/180);o={x:n.x+c,y:n.y+u};break}i+=l,n=a}else n=a}return o},e.prototype.getPoints=function(e){var t=[];if(e.intermediatePoints&&("Straight"===e.type||"Orthogonal"===e.type))for(var n=0;n<e.intermediatePoints.length;n++)t.push(e.intermediatePoints[n]);return t},e.prototype.intersectsRect=function(e,t){return t.x<e.x+e.width&&e.x<t.x+t.width&&t.y<e.y+e.height&&e.y<t.y+t.height},e.prototype.intersect=function(e,t,n,i,o){n&&t.length>=2&&(t.splice(0,1),t.splice(0,1));for(var r=[],a=0;a<e.length-1;a++){var l=this.inter1(e[a],e[a+1],t,o,i);if(l.length>0)for(var s=0;s<l.length;s++)r.push(l[s]);n&&t.length>=1&&t.splice(0,1)}return r},e.prototype.inter1=function(e,t,n,i,o){for(var r=[],a=0;a<n.length-1;a++){var l=Mm(e,t,n[a],n[a+1]);if(!this.isEmptyPoint(l)){var s=this.angleCalculation(e,t),d=this.angleCalculation(n[a],n[a+1]);switch(s=this.checkForHorizontalLine(s),d=this.checkForHorizontalLine(d),o){case"Left":case"Right":s>d&&r.push(l);break;case"Top":case"Bottom":s<d&&r.push(l)}s===d&&i&&r.push(l)}}return r},e.prototype.checkForHorizontalLine=function(e){var t=Math.abs(e);return t>90?180-t:t},e.prototype.isEmptyPoint=function(e){return 0===e.x&&0===e.y},e.prototype.getLengthAtFractionPoint=function(e,t){for(var n=100,i=-1,o=0,r=-1,a=0,l=0,s=e.sourcePoint,d=s,c=[],u=0;u<e.intermediatePoints.length;u++)c.push(e.intermediatePoints[u]);for(var h=0;h<c.length;h++){var p=c[h],f=this.getSlope(p,s,t,e);f<n&&(n=f,l=o+this.lengthCalculation(t,d),r=a,i=h),o+=jd.findLength(p,s),s=p,d=p}return a++,{lengthFractionIndex:l,fullLength:o,segmentIndex:r,pointIndex:i}},e.prototype.getSlope=function(e,t,n,i){var o=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y),a=(n.y-e.y)/(t.y-e.y),l=(n.x-e.x)/(t.x-e.x);if(!isFinite(a)||!isFinite(l)||isNaN(a)||isNaN(l)){if(e.x===t.x){if(e.y===t.y)return 1e4;if(e.y>n.y&&n.y>t.y||e.y<n.y&&n.y<t.y)return Math.abs(e.x-n.x)}else if(e.y===t.y&&(e.x>n.x&&n.x>t.x||e.x<n.x&&n.x<t.x))return Math.abs(e.y-n.y)}else if((e.x>=n.x&&n.x>=t.x||e.x<=n.x&&n.x<=t.x||o<3)&&(e.y>=n.y&&n.y>=t.y||e.y<=n.y&&n.y<=t.y||r<3))return Math.abs(a-l);return 1e4},e.prototype.angleCalculation=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI)},e.prototype.lengthCalculation=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Bridging"},e}(),fC=function(){function e(e){this.line=[],this.diagram=e}return e.prototype.canSnap=function(){return 0!=(this.diagram.snapSettings.constraints&(xc.SnapToObject|xc.SnapToLines))},e.prototype.getWrapperObject=function(e,t){if(e.nodes&&e.nodes.length>0&&(this.diagram.snapSettings.constraints&xc.SnapToLines||this.diagram.snapSettings.constraints&xc.SnapToObject))for(var n=0;n<e.nodes.length;n++)return("SwimLane"===e.nodes[n].shape.type||e.nodes[n].isLane||""!==e.nodes[n].parentId&&t[e.nodes[n].parentId]&&t[e.nodes[n].parentId].isLane)&&t.helper?t.helper.wrapper:e.wrapper;return e.wrapper},e.prototype.snapPoint=function(e,t,n,i,o,r,a){var l=this.diagram.snapSettings,s=this.diagram.scroller.currentZoom,d={x:0,y:0},c=Wy(this.getWrapperObject(t,e.nameTable)),u={snapped:!1,offset:0},h={snapped:!1,offset:0};if(this.diagram.snapSettings.constraints&xc.SnapToObject){var p=void 0;(p=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),p.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(p),this.snapObject(e,t,p,u,h,o,r===a)}var f=c.x+o.x,g=c.y+o.y,m=c.y+c.height+o.y,v=l.verticalGridlines.scaledIntervals,y=this.round(c.x+c.width+o.x,v,s),b=this.round(f,v,s),w=this.round(g,v=l.horizontalGridlines.scaledIntervals,s),C=this.round(m,v,s),x=c.x+c.width,S=c.y+c.height;return u.snapped?d.x=this.diagram.snapSettings.constraints&xc.SnapToObject?u.offset:a.x-r.x:this.diagram.snapSettings.constraints&xc.SnapToVerticalLines?Math.abs(o.x)>=1&&(n?Math.abs(y-x)>Math.abs(b-c.x)?d.x+=b-c.x:d.x+=y-x:Math.abs(y-x)<Math.abs(b-c.x)?d.x+=y-x:d.x+=b-c.x):d.x=a.x-r.x,h.snapped?d.y=h.offset:this.diagram.snapSettings.constraints&xc.SnapToHorizontalLines?Math.abs(o.y)>=1&&(i?Math.abs(C-S)>Math.abs(w-c.y)?d.y+=w-c.y:d.y+=C-S:Math.abs(C-S)<Math.abs(w-c.y)?d.y+=C-S:d.y+=w-c.y):d.y=a.y-r.y,d},e.prototype.round=function(e,t,n){n=1===n?Math.pow(2,Math.floor(Math.log(n)/Math.log(2))):n;var i=0,o=0;for(o=0;o<t.length;o++)i+=t[o];var r=e%(i/=n),a=Math.floor(Math.abs(e)/i)*i;if(a!==e)if(e>=0)for(o=0;o<t.length;o++){if(r<=t[o]/n)return a+(r<t[o]/(2*n)?0:t[o]/n);a+=t[o]/n,r-=t[o]/n}else for(a*=-1,o=t.length-1;o>=0;o--){if(Math.abs(r)<=t[o]/n)return a-(Math.abs(r)<t[o]/(2*n)?0:t[o]/n);a-=t[o]/n,r+=t[o]/n}return e},e.prototype.snapObject=function(e,t,n,i,o,r,a){var l,s,d,c=null,u=this.diagram.scroller,h=this.diagram.snapSettings,p=[],f=[],g=[],m=[],v=Wy(this.getWrapperObject(t,e.nameTable)),y=e.scroller.currentZoom,b=-u.horizontalOffset,w=-u.verticalOffset,C=h.snapObjectDistance/y,x=new Zd(0,0,u.viewPortWidth,u.viewPortHeight),S=new Zd(b/y,v.y-C-5,x.width/y,v.height+2*C+10),T=new Zd(v.x-C-5,w/y,v.width+2*C+10,x.height/y);x=new Zd(b/y,w/y,x.width/y,x.height/y);var E,_,k,D=this.findNodes(e.spatialSearch,t,T,x),A=e.nameTable;for(E=0;E<D.length;E++)this.canBeTarget(e,_=D[E])&&(this.diagram.nameTable[_.id]instanceof zf||!this.canConsider(A,t,_)||((k=_.bounds).height+k.y<r.y+v.y?g.push({obj:_,distance:Math.abs(v.y+r.y-k.y-k.height)}):k.y>v.y+r.y+v.height&&m.push({obj:_,distance:Math.abs(v.y+r.y+v.height-k.y)}),(null==c||c>Math.abs(k.y-v.y-r.y))&&(Math.abs(k.x+k.width/2-(v.x+v.width/2+r.x))<=C?(s=this.createSnapObject(k,v,"centerX"),c=Math.abs(k.y-v.y)):Math.abs(k.x+k.width-(v.x+v.width+r.x))<=C?(s=this.createSnapObject(k,v,"right"),c=Math.abs(k.y-v.y)):Math.abs(k.x-(v.x+r.x))<=C?(s=this.createSnapObject(k,v,"left"),c=Math.abs(k.y-v.y)):Math.abs(k.x-(v.x+v.width+r.x))<=C?(s=this.createSnapObject(k,v,"rightLeft"),c=Math.abs(k.y-v.y)):Math.abs(k.x+k.width-(v.x+r.x))<=C&&(s=this.createSnapObject(k,v,"leftRight"),c=Math.abs(k.y-v.y)))));D=this.findNodes(e.spatialSearch,t,S,x);for(var O=0;O<D.length;O++)this.canBeTarget(e,_=D[O])&&(this.diagram.nameTable[_.id]instanceof zf||!this.canConsider(A,t,_)||((k=_.bounds).x+k.width<v.x+r.x&&(p[p.length]={obj:_,distance:Math.abs(v.x+r.x-k.x-k.width)}),k.x>v.x+r.x+v.width&&(f[f.length]={obj:_,distance:Math.abs(v.x+r.x+v.width-k.x)}),(null==l||l>Math.abs(k.x-v.x-r.x))&&(Math.abs(k.y+k.height/2-(v.y+v.height/2+r.y))<=C?(d=this.createSnapObject(k,v,"centerY"),l=Math.abs(k.x-v.x)):Math.abs(k.y-v.y-r.y)<=C?(d=this.createSnapObject(k,v,"top"),l=Math.abs(k.x-v.x)):Math.abs(k.y+k.height-(v.y+v.height+r.y))<=C?(d=this.createSnapObject(k,v,"bottom"),l=Math.abs(k.x-v.x)):Math.abs(k.y+k.height-v.y-r.y)<=C?(d=this.createSnapObject(k,v,"topBottom"),l=Math.abs(k.x-v.x)):Math.abs(k.y-(v.y+v.height+r.y))<=C&&(d=this.createSnapObject(k,v,"bottomTop"),l=Math.abs(k.x-v.x)))));this.createGuidelines(e,s,d,n,i,o,a),i.snapped||this.createHSpacingLines(e,n,t,p,f,i,o,a,r,C),o.snapped||this.createVSpacingLines(e,n,t,g,m,i,o,a,r,C)},e.prototype.snapConnectorEnd=function(e){var t=this.diagram.snapSettings,n=this.diagram.scroller.currentZoom;return t.constraints&xc.SnapToLines&&(e.x=this.round(e.x,t.verticalGridlines.scaledIntervals,n),e.y=this.round(e.y,t.horizontalGridlines.scaledIntervals,n)),e},e.prototype.canBeTarget=function(e,t){return!_b(this.diagram,t=this.diagram.nameTable[t.id],!1)},e.prototype.snapSize=function(e,t,n,i,o,r,a,l){var s,d,c,u,h=this.diagram.snapSettings,p=this.diagram.scroller,f=Wy(a.wrapper),g=e.nameTable,m=[],v=[],y=e.scroller.currentZoom,b=-p.horizontalOffset,w=-p.verticalOffset,C=h.snapObjectDistance/y,x=new Zd(0,0,p.viewPortWidth,p.viewPortHeight),S=new Zd(b/y,(f.y-5)/y,x.width/y,(f.height+10)/y),T=new Zd((f.x-5)/y,w/y,(f.width+10)/y,x.height/y);x=new Zd(b/y,w/y,x.width/y,x.height/y);var E,_,k,D=[],A=this.findNodes(e.spatialSearch,a,T,x,D);for(E=0;E<A.length;E++)!this.canConsider(g,a,_=A[E])||this.diagram.nameTable[_.id]instanceof zf||(k=_.bounds,(null==s||s>Math.abs(k.y-f.y))&&(t.left?Math.abs(f.x+o-k.x)<=C?(c=this.createSnapObject(k,f,"left"),s=Math.abs(k.y-f.y)):Math.abs(f.x+o-k.x-k.width)<=C&&(c=this.createSnapObject(k,f,"leftRight"),s=Math.abs(k.y-f.y)):t.right&&(Math.abs(f.x+o+f.width-k.x-k.width)<=C?(c=this.createSnapObject(k,f,"right"),s=Math.abs(k.y-f.y)):Math.abs(f.x+o+f.width-k.x)<=C&&(c=this.createSnapObject(k,f,"rightLeft"),s=Math.abs(k.y-f.y)))));A=this.findNodes(e.spatialSearch,a,S,x);for(var O=0;O<A.length;O++){var I=A[O];if(this.canConsider(g,a,I)&&!(this.diagram.nameTable[I.id]instanceof zf)){var P=I.bounds;(null==d||d>Math.abs(P.x-f.x))&&(n.top?Math.abs(f.y+r-P.y)<=C?(u=this.createSnapObject(P,f,"top"),d=Math.abs(P.x-f.x)):Math.abs(f.y+r-P.y-P.height)<=C&&(u=this.createSnapObject(P,f,"topBottom"),d=Math.abs(P.x-f.x)):n.bottom&&(Math.abs(f.y+f.height+r-P.y-P.height)<=C?(u=this.createSnapObject(P,f,"bottom"),d=Math.abs(P.x-f.x)):Math.abs(f.y+f.height+r-P.y)<=C&&(u=this.createSnapObject(P,f,"bottomTop"),d=Math.abs(P.x-f.x))))}}for(E=0;E<D.length;E++)if(this.canConsider(g,a,_=D[E])){var R=_.bounds,M=t.left?-o:o,N=Math.abs(f.width+M-R.width);N<=C&&(m[m.length]={source:_,difference:N,offset:t.left?-R.width+f.width:R.width-f.width}),M=n.top?-r:r;var L=Math.abs(f.height+M-R.height);L<=C&&(v[v.length]={source:_,difference:L,offset:n.top?-R.height+f.height:R.height-f.height})}e.getTool||this.createGuidelines(e,c,u,i,t,n,l),!t.snapped&&m.length>0&&(t.left||t.right)&&this.addSameWidthLines(e,i,m,t,l,a),!n.snapped&&v.length>0&&(n.top||n.bottom)&&this.addSameHeightLines(e,i,v,n,l,a)},e.prototype.snapTop=function(e,t,n,i,o,r,a,l){var s,d=o;t.top=!0,e.left=e.right=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&xc.SnapToObject&&!r.rotateAngle&&this.snapSize(this.diagram,e,t,n,i,s=l.y-l.height*r.pivot.y+o-(r.offsetY-r.height*r.pivot.y),this.diagram.selectedItems,a),t.snapped)d=o-s+t.offset;else if(this.diagram.snapSettings.constraints&xc.SnapToHorizontalLines){var u=l.y-l.height*r.pivot.y;d=this.round(u+o,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-u}return d},e.prototype.snapRight=function(e,t,n,i,o,r,a,l){var s,d=i;e.right=!0,t.top=t.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&xc.SnapToObject&&!r.rotateAngle&&this.snapSize(this.diagram,e,t,n,s=l.x+l.width*(1-r.pivot.x)+i-(r.offsetX+r.width*(1-r.pivot.x)),o,this.diagram.selectedItems,a),e.snapped)d=i-s+e.offset;else if(this.diagram.snapSettings.constraints&xc.SnapToVerticalLines){var u=l.x+l.width*(1-r.pivot.x);d=this.round(u+i,this.diagram.snapSettings.verticalGridlines.scaledIntervals,c)-u}return d},e.prototype.snapLeft=function(e,t,n,i,o,r,a,l){var s=i,d=0;e.left=!0,t.top=t.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&xc.SnapToObject&&!r.rotateAngle&&this.snapSize(this.diagram,e,t,n,d=l.x-l.width*r.pivot.x+i-(r.offsetX-r.width*r.pivot.x),o,this.diagram.selectedItems,a),e.snapped)s=i-d+e.offset;else if(this.diagram.snapSettings.constraints&xc.SnapToVerticalLines){var u=l.x-l.width*r.pivot.x;s=this.round(u+i,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-u}return s},e.prototype.snapBottom=function(e,t,n,i,o,r,a,l){var s=o;t.bottom=!0,e.left=e.right=!1;var d=this.diagram.scroller.currentZoom,c=0;if(this.diagram.snapSettings.constraints&xc.SnapToObject&&!r.rotateAngle&&this.snapSize(this.diagram,e,t,n,i,c=l.y+l.height*(1-r.pivot.y)+o-(r.offsetY+r.height*(1-r.pivot.y)),this.diagram.selectedItems,a),Wy(r instanceof Gc||r instanceof gf?r:r.wrapper),t.snapped)s=o-c+t.offset;else if(this.diagram.snapSettings.constraints&xc.SnapToHorizontalLines){var u=l.y+l.height*(1-r.pivot.y);s=this.round(u+o,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,d)-u}return s},e.prototype.createGuidelines=function(e,t,n,i,o,r,a){return t&&(o.offset=t.offsetX,o.snapped=!0,a||this.renderAlignmentLines(t.start,t.end,i,e.scroller.transform)),n&&(r.offset=n.offsetY,r.snapped=!0,a||this.renderAlignmentLines(n.start,n.end,i,e.scroller.transform)),i},e.prototype.renderAlignmentLines=function(e,t,n,i){var o={stroke:"#07EDE1",strokeWidth:1,startPoint:{x:(e={x:(e.x+i.tx)*i.scale,y:(e.y+i.ty)*i.scale}).x,y:e.y},endPoint:{x:(t={x:(t.x+i.tx)*i.scale,y:(t.y+i.ty)*i.scale}).x,y:t.y},fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Fy()},r=0;for(this.line.push(o),r=0;r<this.line.length;r++)this.diagram.diagramRenderer.drawLine(n,this.line.pop())},e.prototype.createHSpacingLines=function(e,t,n,i,o,r,a,l,s,d){var c=0;this.sortByDistance(i,"distance",!0),this.sortByDistance(o,"distance",!0);var u,h,p,f,g=[],m=Wy(n.wrapper);if(i.length>0&&(g[g.length]=i[0],c=(u=i[0].obj.bounds).y,i.length>1?(f=u.x-(p=i[1].obj.bounds).x-p.width,Math.abs(f-i[0].distance)<=d?c=this.findEquallySpacedNodesAtLeft(i,f,c,g):f=i[0].distance):f=i[0].distance),this.sortByDistance(g,"distance"),g[g.length]={obj:n,distance:0},c=m.y<c||!c?m.y:c,o.length>0){var v=void 0;if(c=(h=o[0].obj.bounds).y<c?h.y:c,o.length>1&&(v=(p=o[1].obj.bounds).x-h.x-h.width),i.length>0)if(Math.abs(o[0].distance-i[0].distance)<=d){var y=Math.abs(o[0].distance-i[0].distance)/2;o[0].distance<i[0].distance?f-=y:f+=y,g[g.length]=o[0]}else 1===i.length&&(u=void 0,g.splice(0,1),g[g.length]=o[0],f=v);else f=v,g[g.length]=o[0];o.length>1&&h.x+h.width<p.x&&(c=this.findEquallySpacedNodesAtRight(o,v,c,g,d))}if(g.length>2){this.addHSpacingLines(e,t,g,l,c);var b=0;l&&(b=s.x),u?r.offset=f-Math.abs(m.x+b-u.x-u.width)+b:h&&(r.offset=Math.abs(m.x+m.width+b-h.x)-f+b),r.snapped=!0}},e.prototype.createVSpacingLines=function(e,t,n,i,o,r,a,l,s,d){var c=0;this.sortByDistance(i,"distance",!0),this.sortByDistance(o,"distance",!0);var u,h,p,f,g,m=[],v=Wy(n.wrapper);if(i.length>0&&(m[m.length]=i[0],c=(u=i[0].obj.bounds).x+u.width,i.length>1?(f=u.y-(p=i[1].obj.bounds).y-p.height,Math.abs(f-i[0].distance)<=d?c=this.findEquallySpacedNodesAtTop(i,f,c,m):f=i[0].distance):f=i[0].distance),this.sortByDistance(m,"distance"),m[m.length]={obj:n,distance:0},c=v.x+v.width>c||!c?v.x+v.width:c,o.length>0){if(c=(h=o[0].obj.bounds).x+h.width>c?h.x+h.width:c,o.length>1&&(g=(p=o[1].obj.bounds).y-h.y-h.height),i.length>0)if(Math.abs(o[0].distance-i[0].distance)<=d){var y=Math.abs(o[0].distance-i[0].distance)/2;o[0].distance<i[0].distance?f-=y:f+=y,m[m.length]=o[0]}else 1===i.length&&(u=void 0,m.splice(0,1),m[m.length]=o[0],f=g);else f=g,m[m.length]=o[0];o.length>1&&p.y>h.y+h.height&&(c=this.findEquallySpacedNodesAtBottom(o,g,c,m,d))}if(m.length>2){this.addVSpacingLines(e,t,m,l,c);var b=0;l&&(b=s.y),u?a.offset=f-Math.abs(v.y+b-u.y-u.height)+b:h&&(a.offset=Math.abs(v.y+v.height+b-h.y)-f+b),a.snapped=!0}},e.prototype.addHSpacingLines=function(e,t,n,i,o){var r;if(!i)for(r=0;r<n.length-1;r++){var a=n[r].obj instanceof uy?Wy(n[r].obj.wrapper):n[r].obj.bounds,l=n[r+1].obj instanceof uy?Wy(n[r+1].obj.wrapper):n[r+1].obj.bounds;this.renderSpacingLines({x:a.x+a.width,y:o-15},{x:l.x,y:o-15},t,this.getAdornerLayerSvg(),e.scroller.transform)}},e.prototype.addVSpacingLines=function(e,t,n,i,o){if(!i)for(var r=0;r<n.length-1;r++){var a=n[r].obj instanceof uy?Wy(n[r].obj.wrapper):n[r].obj.bounds,l=n[r+1].obj instanceof uy?Wy(n[r+1].obj.wrapper):n[r+1].obj.bounds;this.renderSpacingLines({x:o+15,y:a.y+a.height},{x:o+15,y:l.y},t,this.getAdornerLayerSvg(),e.scroller.transform)}},e.prototype.addSameWidthLines=function(e,t,n,i,o,r){this.sortByDistance(n,"offset");var a,l=Wy(r.wrapper),s=n[0],d=s.source.bounds,c=[];for(c.push(n[0]),a=1;a<n.length;a++)n[a].source.bounds.width===d.width&&c.push(n[a]);if(!o)for(this.renderSpacingLines({x:l.x+s.offset,y:l.y-15},{x:l.x+l.width+s.offset,y:l.y-15},t,this.getAdornerLayerSvg(),e.scroller.transform),a=0;a<c.length;a++)this.renderSpacingLines({x:(l=c[a].source.bounds).x,y:l.y-15},{x:l.x+l.width,y:l.y-15},t,this.getAdornerLayerSvg(),e.scroller.transform);i.offset=s.offset,i.snapped=!0},e.prototype.addSameHeightLines=function(e,t,n,i,o,r){this.sortByDistance(n,"offset");var a,l=Wy(r.wrapper),s=n[0],d=s.source.bounds,c=[];for(c.push(n[0]),a=0;a<n.length;a++)n[a].source.bounds.height===d.height&&c.push(n[a]);if(!o)for(this.renderSpacingLines({x:l.x+l.width+15,y:l.y+s.offset},{x:l.x+l.width+15,y:l.y+s.offset+l.height},t,this.getAdornerLayerSvg(),e.scroller.transform),a=0;a<c.length;a++)this.renderSpacingLines({x:(l=c[a].source.bounds).x+l.width+15,y:l.y},{x:l.x+l.width+15,y:l.y+l.height},t,this.getAdornerLayerSvg(),e.scroller.transform);i.offset=s.offset,i.snapped=!0},e.prototype.renderSpacingLines=function(e,t,n,i,o){var r,a,l=new Yc,s={};(e={x:(e.x+o.tx)*o.scale,y:(e.y+o.ty)*o.scale}).x===(t={x:(t.x+o.tx)*o.scale,y:(t.y+o.ty)*o.scale}).x?(r="M"+(e.x-5)+" "+(e.y+5)+"L"+e.x+" "+e.y+"L"+(e.x+5)+" "+(e.y+5)+"zM"+(t.x-5)+" "+(t.y-5)+" L"+t.x+" "+t.y+" L"+(t.x+5)+" "+(t.y-5)+"z",a={startPoint:{x:e.x-8,y:e.y-1},endPoint:{x:e.x+8,y:e.y-1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Fy()},l.data=r,s.data=l.data,s.angle=0,s.pivotX=0,s.pivotY=0,s.x=0,s.y=0,s.height=0,s.width=1,s.id=Fy(),this.diagram.diagramRenderer.drawPath(n,s),this.line.push(a),this.diagram.diagramRenderer.drawLine(n,this.line.pop()),a={startPoint:{x:t.x-8,y:t.y+1},endPoint:{x:t.x+8,y:t.y+1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:this.getAdornerLayerSvg().id+"spacing"},this.line.push(a),this.diagram.diagramRenderer.drawLine(n,this.line.pop())):(l.data=r="M"+(e.x+5)+" "+(e.y+5)+" L"+e.x+" "+e.y+" L"+(e.x+5)+" "+(e.y-5)+"zM"+(t.x-5)+" "+(t.y-5)+" L"+t.x+" "+t.y+" L"+(t.x-5)+" "+(t.y+5)+"z",s.data=r,s.angle=0,s.pivotX=0,s.pivotY=0,s.x=0,s.y=0,s.height=0,s.width=1,s.id=Fy(),this.diagram.diagramRenderer.drawPath(n,s),a={visible:!0,opacity:1,id:Fy(),startPoint:{x:e.x-1,y:e.y-8},endPoint:{x:e.x-1,y:e.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0},this.line.push(a),this.diagram.diagramRenderer.drawLine(n,this.line.pop()),a={width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Fy(),startPoint:{x:t.x+1,y:t.y-8},endPoint:{x:t.x+1,y:t.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0"},this.line.push(a),this.diagram.diagramRenderer.drawLine(n,this.line.pop())),a={startPoint:{x:e.x,y:e.y},endPoint:{x:t.x,y:t.y},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Fy()},this.line.push(a),this.diagram.diagramRenderer.drawLine(n,this.line.pop())},e.prototype.createSnapObject=function(e,t,n){var i;switch(n){case"left":i={start:{x:e.x,y:Math.min(e.y,t.y)},end:{x:e.x,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x-t.x,offsetY:0,type:"sideAlign"};break;case"right":i={type:"sideAlign",start:{x:e.x+e.width,y:Math.min(e.y,t.y)},offsetX:e.x+e.width-t.x-t.width,offsetY:0,end:{x:e.x+e.width,y:Math.max(e.y+e.height,t.y+t.height)}};break;case"top":i={offsetY:e.y-t.y,offsetX:0,type:"sideAlign",start:{x:Math.min(e.x,t.x),y:e.y},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y}};break;case"bottom":i={type:"sideAlign",offsetY:e.y+e.height-t.y-t.height,offsetX:0,end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height},start:{x:Math.min(e.x,t.x),y:e.y+e.height}};break;case"topBottom":i={start:{x:Math.min(e.x,t.x),y:e.y+e.height},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height},offsetY:e.y+e.height-t.y,offsetX:0,type:"sideAlign"};break;case"bottomTop":i={start:{x:Math.min(e.x,t.x),y:e.y},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y},offsetY:e.y-t.y-t.height,offsetX:0,type:"sideAlign"};break;case"leftRight":i={start:{x:e.x+e.width,y:Math.min(e.y,t.y)},end:{x:e.x+e.width,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x+e.width-t.x,offsetY:0,type:"sideAlign"};break;case"rightLeft":i={start:{x:e.x,y:Math.min(e.y,t.y)},end:{x:e.x,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x-t.x-t.width,offsetY:0,type:"sideAlign"};break;case"centerX":i={start:{x:e.x+e.width/2,y:Math.min(e.y,t.y)},end:{x:e.x+e.width/2,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x+e.width/2-(t.x+t.width/2),offsetY:0,type:"centerAlign"};break;case"centerY":i={start:{x:Math.min(e.x,t.x),y:e.y+e.height/2},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height/2},offsetY:e.y+e.height/2-(t.y+t.height/2),offsetX:0,type:"centerAlign"}}return i},e.prototype.snapAngle=function(e,t){var n=this.diagram.snapSettings.snapAngle,i=t%(n||0);return i>=n/2?t+n-i:t-i},e.prototype.canConsider=function(e,t,n){return!this.diagram.selectedItems.nodes.length||this.diagram.selectedItems.nodes[0].id!==n.id},e.prototype.findNodes=function(e,t,n,i,o){for(var r,a,l=[],s=e.findQuads(o?i:n),d=0;d<s.length;d++){var c=s[d];if(c.objects.length>0)for(var u=0;u<c.objects.length;u++)this.diagram.nameTable[(r=c.objects[u]).id]instanceof zf||!r.visible||"SwimLane"===this.diagram.nameTable[r.id].shape.type||this.diagram.nameTable[r.id].isLane||this.diagram.nameTable[r.id].isPhase||this.diagram.nameTable[r.id].isHeader||"helper"===r.id||(a=Wy(r),-1===l.indexOf(r)&&this.intersectsRect(n,a)&&l.push(r),o&&o.indexOf(r)&&this.intersectsRect(i,a)&&o.push(r))}return l},e.prototype.intersectsRect=function(e,t){return t.x<e.x+e.width&&e.x<t.x+t.width&&t.y<e.y+e.height&&e.y<t.y+t.height},e.prototype.getAdornerLayerSvg=function(){return this.diagram.diagramRenderer.adornerSvgLayer},e.prototype.removeGuidelines=function(e){var t=this.getAdornerLayerSvg().getElementById("_SnappingLines"),n=this.getAdornerLayerSvg().getElementById("pivotLine");t&&t.parentNode.removeChild(t),n&&n.parentNode.removeChild(n)},e.prototype.sortByDistance=function(e,t,n){var i,o,r;if(n)for(i=0;i<e.length;i++)for(o=i+1;o<e.length;o++)e[i][t]>e[o][t]&&(r=e[i],e[i]=e[o],e[o]=r);else for(i=0;i<e.length;i++)for(o=i+1;o<e.length;o++)e[i][t]<e[o][t]&&(r=e[i],e[i]=e[o],e[o]=r)},e.prototype.findEquallySpacedNodesAtLeft=function(e,t,n,i){var o,r;for(r=1;r<e.length&&(o=e[r].obj.bounds,Math.abs(e[r-1].obj.bounds.x-o.x-o.width-t)<=1);r++)i[i.length]=e[r],o.y<n&&(n=o.y);return n},e.prototype.findEquallySpacedNodesAtRight=function(e,t,n,i,o){var r;if(Math.abs(t-e[0].distance)<=o)for(var a=0;a<e.length-1&&(r=e[a].obj.bounds,Math.abs(e[a+1].obj.bounds.x-r.x-r.width-t)<=1);a++)i[i.length]=e[a+1],r.y<n&&(n=r.y);return n},e.prototype.findEquallySpacedNodesAtTop=function(e,t,n,i){for(var o,r=1;r<e.length&&(o=e[r].obj.bounds,Math.abs(e[r-1].obj.bounds.y-o.y-o.height-t)<=1);r++)i[i.length]=e[r],o.x+o.width>n&&(n=o.x+o.width);return n},e.prototype.findEquallySpacedNodesAtBottom=function(e,t,n,i,o){var r;if(Math.abs(t-e[0].distance)<=o)for(var a=0;a<e.length-1&&(r=e[a].obj.bounds,Math.abs(e[a+1].obj.bounds.y-r.y-r.height-t)<=1);a++)i[i.length]=e[a+1],r.x+r.width>n&&(n=r.x+r.width);return n},e.prototype.getLayer=function(){var e;return this.diagram.snapSettings.constraints&xc.SnapToObject&&((e=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),e.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(e)),e},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Snapping"},e}(),gC=function(){function e(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0}return e.prototype.initHistory=function(e){e.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:e.addHistoryEntry.bind(e),undo:Function,redo:Function,startGroupAction:e.startGroupAction.bind(e),endGroupAction:e.endGroupAction.bind(e),canLog:null,undoStack:[],redoStack:[],stackLimit:e.historyManager?e.historyManager.stackLimit:void 0}},e.prototype.addHistoryEntry=function(e,t){var n=null;t.historyManager.canLog&&!0===t.historyManager.canLog(e).cancel||(t.historyManager&&t.historyManager.canUndo&&t.historyManager.currentEntry&&((n=t.historyManager.currentEntry).next?n.previous&&(n.next.previous=null,n.next=e,e.previous=n):(n.next=e,e.previous=n)),t.historyManager.currentEntry=e,t.historyManager.stackLimit&&("StartGroup"!==e.type&&"EndGroup"!==e.type||this.setEntryLimit("EndGroup"===e.type),this.hasGroup||0!==this.groupCount||(this.historyCount<t.historyManager.stackLimit?this.historyCount++:this.applyLimit(t.historyManager.currentEntry,t.historyManager.stackLimit,t))),this.getHistoryList(t),t.historyManager.canUndo=!0,t.historyManager.canRedo=!1)},e.prototype.applyLimit=function(e,t,n,i){e&&e.previous&&("StartGroup"!==e.type&&"EndGroup"!==e.type||this.setEntryLimit("StartGroup"===e.type),this.hasGroup||0!==this.groupCount||t--,0===t?(i&&this.limitHistoryStack(e.previous,n),n.historyManager.stackLimit<this.historyCount&&(this.historyCount=n.historyManager.stackLimit),delete e.previous):e.previous&&this.applyLimit(e.previous,t,n,i)),this.groupCount=0},e.prototype.clearHistory=function(e){var t=e.historyManager;t.currentEntry=void 0,t.canUndo=!1,t.canRedo=!1,this.historyCount=0,this.groupCount=0,e.historyManager.undoStack=[],e.historyManager.redoStack=[]},e.prototype.setEntryLimit=function(e){e?this.groupCount--:this.groupCount++,this.hasGroup=e?!e:e},e.prototype.limitHistoryStack=function(e,t){"StartGroup"!==e.type&&"EndGroup"!==e.type&&(this.removeFromStack(t.historyManager.undoStack,e),this.removeFromStack(t.historyManager.redoStack,e)),e.previous&&this.limitHistoryStack(e.previous,t)},e.prototype.removeFromStack=function(e,t){if(e.length)for(var n=0;n<=e.length;n++)if(e[n].undoObject===t.undoObject&&e[n].redoObject===t.redoObject){e.splice(n,1);break}},e.prototype.undo=function(e){var t=this.getUndoEntry(e),n=0;if(t)if("Internal"===t.category)"EndGroup"===t.type?(n++,this.groupUndo=!0,Ka()&&(e.blazorActions|=wc.GroupingInProgress)):this.undoEntry(t,e),this.groupUndo&&(this.undoGroupAction(t,e,n),this.groupUndo=!1);else{Ka()||e.historyManager.undo(t);var i={entryType:"undo",oldValue:t.undoObject,newValue:t.redoObject};Ka()&&(i={entryType:"undo",oldValue:this.getHistoryChangeEvent(t.undoObject,t.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(t.redoObject,t.blazorHistoryEntryType)}),e.triggerEvent(jc.historyStateChange,i)}},e.prototype.getHistoryChangeEvent=function(e,t){var n={};switch(t){case"Node":n.node=e;break;case"Connector":n.connector=e;break;case"Selector":n.selector=e;break;case"Diagram":n.diagram=e;break;case"ShapeAnnotation":n.shapeAnnotation=e;break;case"PathAnnotation":n.pathAnnotation=e;break;case"PortObject":n.pointPortModel=e;break;case"Object":n.object=e}return n},e.prototype.getHistoryList=function(e){var t=[],n=[],i=e.historyManager.currentEntry;for(i=e.historyManager.currentEntry,this.getHistroyObject(e.historyManager.canUndo||0===e.historyManager.undoStack.length?t:n,i);i&&i.previous;)this.getHistroyObject(t,i.previous),i=i.previous;for(i=e.historyManager.currentEntry;i&&i.next;)this.getHistroyObject(n,i.next),i=i.next;e.historyManager.undoStack=t,e.historyManager.redoStack=n},e.prototype.getHistroyObject=function(e,t){t&&"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.push({redoObject:t.redoObject?t.redoObject:null,undoObject:t.undoObject?t.undoObject:null,type:t.type?t.type:null,category:t.category?t.category:null})},e.prototype.undoGroupAction=function(e,t,n){for(;0!==n;)this.undoEntry(e,t),"StartGroup"===(e=this.getUndoEntry(t)).type?n--:"EndGroup"===e.type&&n++;n=0},e.prototype.undoEntry=function(e,t){var n,i;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&"LabelCollectionChanged"!==e.type&&(n=e.undoObject,i=e.undoObject),"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.undoStack.length>0){var o=t.historyManager.undoStack.splice(0,1);t.historyManager.redoStack.splice(0,0,o[0]),i=e.undoObject}switch(t.protectPropertyChange(!0),t.diagramActions|=Mc.UndoRedo,Ka()&&e.previous&&"StartGroup"===e.previous.type&&(t.blazorActions&=~wc.GroupingInProgress),e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(n,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(n,t,e);break;case"RotationChanged":this.recordRotationChanged(n,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(n,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!1);break;case"CollectionChanged":if(e&&e.next&&"AddChildToGroupNode"===e.next.type&&"Insert"===e.next.changeType){var r=t.getObject(e.next.undoObject.id);t.insertValue(Yy(r),!0)}e.isUndo=!0,this.recordCollectionChanged(e,t),e.isUndo=!1,e&&e.next&&"AddChildToGroupNode"===e.next.type&&"Insert"===e.next.changeType&&((r=t.getObject(e.next.undoObject.id)).wrapper.measure(new Bd),r.wrapper.arrange(r.wrapper.desiredSize),t.updateDiagramObject(r));break;case"LabelCollectionChanged":e.isUndo=!0,this.recordLabelCollectionChanged(e,t),e.isUndo=!1;break;case"PortCollectionChanged":e.isUndo=!0,this.recordPortCollectionChanged(e,t),e.isUndo=!1;break;case"Group":this.unGroup(e,t);break;case"UnGroup":this.group(e,t);break;case"SegmentChanged":this.recordSegmentChanged(n,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":e.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(e,t,!1),e.isUndo=!1;break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(e,t,!1);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(e,t,!1)}if(t.diagramActions&=~Mc.UndoRedo,t.protectPropertyChange(!1),t.historyChangeTrigger(e,"Undo"),i){var a=this.checkNodeObject(i,t);if(a){var l=rb(t.updateSelection);l&&l(a,t)}}},e.prototype.checkNodeObject=function(e,t){var n;if(e.id)n=t.nameTable[e.id];else if(e.nodes&&e.nodes.length>0||e.connectors&&e.connectors.length>0)for(var i=0,o=e.nodes.length>0?e.nodes:e.connectors;i<o.length;i++)n=t.nameTable[(n=o[i]).id];else{var r=e.nodes?e.nodes:e.connectors;if(r)for(var a=0,l=Object.keys(r);a<l.length;a++){var s=Number(l[a]);n=e.nodes?t.nodes[s]:t.connectors[s]}}return n},e.prototype.group=function(e,t){t.add(e.undoObject)},e.prototype.unGroup=function(e,t){e.redoObject=Yy(e.undoObject),t.commandHandler.unGroup(e.undoObject)},e.prototype.ignoreProperty=function(e){return"zIndex"===e||"wrapper"===e||"parentObj"===e||"controlParent"===e},e.prototype.getProperty=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];this.ignoreProperty(o)||(t[o]instanceof Object?this.getProperty(e[o],t[o]):e[o]=t[o])}},e.prototype.recordLaneOrPhaseCollectionChanged=function(e,t,n){var i=e.redoObject,o=e.undoObject;if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))t.remove(i);else if(i.isPhase)t.addPhases(r=t.nameTable[i.parentId],[o]);else{var r,a=om(r=t.nameTable[i.parentId],i);t.addLanes(r,[o],a)}t.clearSelection()},e.prototype.recordAnnotationChanged=function(e,t,n){var i=n?e.redoObject:e.undoObject;if(t.canEnableBlazorObject){var o=Yy(t.nameTable[i.id]);t.insertValue(o,o instanceof ry)}var r=iv(i,e.objectId),a=t.commandHandler.getAnnotationChanges(t.nameTable[i.id],r),l=t.nameTable[i.id],s=iv(l,e.objectId);s.offset=r.offset,s.margin=r.margin,s.width=r.width,s.height=r.height,s.rotateAngle=r.rotateAngle,s.margin=r.margin,l instanceof ry?t.nodePropertyChange(l,{},a):t.connectorPropertyChange(l,{},a)},e.prototype.recordChildCollectionChanged=function(e,t,n){var i=n?e.redoObject:e.undoObject,o=t.nameTable[i.parentId],r=t.nameTable[i.id];o?zg(t,o,r,!n,"AddNodeToLane"===e.historyAction):(r.parentId&&((o=t.nameTable[r.parentId]).children.splice(o.children.indexOf(r.id),1),o.wrapper.children.splice(o.wrapper.children.indexOf(r.wrapper),1)),""!==i.parentId&&((o=t.nameTable[i.parentId]).children.push(i.id),o.wrapper.children.push(r.wrapper)),r.parentId=i.parentId,t.removeElements(r),t.updateDiagramObject(r))},e.prototype.recordStackPositionChanged=function(e,t,n){var i=n?e.redoObject:e.undoObject;if(i.source){var o=t.nameTable[i.source.parentId];o&&(i.target?(o.wrapper.children.splice(i.targetIndex,1),o.wrapper.children.splice(i.sourceIndex,0,i.source.wrapper)):void 0!==i.sourceIndex?(t.nameTable[i.source.id]||t.add(i.source),o.wrapper.children.splice(i.sourceIndex,0,t.nameTable[i.source.id].wrapper),t.nameTable[i.source.id].parentId=o.id):(o.wrapper.children.splice(o.wrapper.children.indexOf(t.nameTable[i.source.id].wrapper),1),t.nameTable[i.source.id].parentId=""),n&&"UmlClassifier"===o.shape.type&&t.remove(i.source),o.wrapper.measure(new Bd),o.wrapper.arrange(o.wrapper.desiredSize),t.updateDiagramObject(o),t.updateSelector())}},e.prototype.recordGridSizeChanged=function(e,t,n,i){var o=n?e.redoObject:e.undoObject;if(o.parentId){var r=t.nameTable[o.parentId],a=t.nameTable[o.id],l=r.wrapper.bounds.x,s=r.wrapper.bounds.y;if("SwimLane"===r.shape.type){var d=r.wrapper.children[0],c=r.shape.padding;im(t,n?e.undoObject:e.redoObject,r,o),i?(d.updateRowHeight(o.rowIndex,o.wrapper.actualSize.height,!0,c),r.height=r.wrapper.height=d.height):(d.updateColumnWidth(o.columnIndex,o.wrapper.actualSize.width,!0,c),r.width=r.wrapper.width=d.width,o.isPhase&&(a.maxWidth=a.wrapper.maxWidth=o.wrapper.actualSize.width)),Jg(r),t.drag(r,l-r.wrapper.bounds.x,s-r.wrapper.bounds.y),t.clearSelection(),t.updateDiagramObject(r)}}},e.prototype.recordLanePositionChanged=function(e,t,n){var i=n?e.redoObject:e.undoObject;if(i.source){var o=t.nameTable[i.source.parentId];o&&"SwimLane"===o.shape.type&&(nm(t,i.target,i.source),t.clearSelection())}},e.prototype.recordPortChanged=function(e,t,n){var i=n?e.redoObject.nodes[0]:e.undoObject.nodes[0];if(t.canEnableBlazorObject){var o=Yy(t.nameTable[i.id]);t.insertValue(o,!0)}var r=ov(i,e.objectId),a=t.commandHandler.getPortChanges(t.nameTable[i.id],r),l=t.nameTable[i.id];ov(l,e.objectId).offset=r.offset,t.nodePropertyChange(l,{},a),l.parentId&&t.updateConnectorEdges(t.nameTable[l.parentId])},e.prototype.recordPropertyChanged=function(e,t,n){var i=e.redoObject,o=e.undoObject;if(Ka())for(var r=0,a=Object.keys(o);r<a.length;r++){var l=void 0;switch(a[r]){case"nodes":for(var s=0,d=Object.keys(o.nodes);s<d.length;s++){var c=d[s];t.canEnableBlazorObject&&(l=Yy(t.nodes[Number(c)]),t.insertValue(l,!0))}break;case"connectors":for(var u=0,h=Object.keys(o.connectors);u<h.length;u++)c=h[u],t.canEnableBlazorObject&&(l=Yy(t.connectors[Number(c)]),t.insertValue(l,!1))}}this.getProperty(t,n?i:o),n?t.onPropertyChanged(i,o):t.onPropertyChanged(o,i),t.diagramActions=t.diagramActions|Mc.UndoRedo},e.prototype.recordOrderCommandChanged=function(e,t,n){t.commandHandler.orderCommands(n,n?e.redoObject:e.undoObject,e.type),t.diagramActions=t.diagramActions|Mc.UndoRedo},e.prototype.recordAddChildToGroupNode=function(e,t,n){n&&"Insert"===e.changeType&&t.addChildToGroup(t.nameTable[e.undoObject.id],t.nameTable[e.objectId].id)},e.prototype.recordSegmentChanged=function(e,t){var n=0;if(e.connectors&&e.connectors.length>0)for(n=0;n<e.connectors.length;n++)this.segmentChanged(e.connectors[n],t)},e.prototype.segmentChanged=function(e,t){var n=t.nameTable[e.id];n.segments=e.segments,t.commandHandler.updateEndPoint(n)},e.prototype.recordPositionChanged=function(e,t){var n=0;if(e.nodes&&e.nodes.length>0)for(n=0;n<e.nodes.length;n++)this.positionChanged(e.nodes[n],t);if(e.connectors&&e.connectors.length>0)for(n=0;n<e.connectors.length;n++)this.connectionChanged(e.connectors[n],t)},e.prototype.positionChanged=function(e,t){var n=t.nameTable[e.id];if(e.processId&&!n.processId&&t.addProcess(e,e.processId),!e.processId&&n.processId&&t.removeProcess(e.id),n.processId)t.drag(n,e.margin.left-n.margin.left,e.margin.top-n.margin.top);else{if(n.parentId){var i=t.nameTable[n.parentId];i.isLane&&(e.wrapper.offsetX=e.width/2+(i.wrapper.bounds.x+e.margin.left),e.wrapper.offsetY=e.height/2+(i.wrapper.bounds.y+e.margin.top))}t.drag(n,e.wrapper.offsetX-n.offsetX,e.wrapper.offsetY-n.offsetY)}t.bpmnModule&&t.bpmnModule.updateDocks(n,t)},e.prototype.recordSizeChanged=function(e,t,n){var i,o=0;if(e&&e.nodes&&e.nodes.length>0)for(o=0;o<e.nodes.length;o++)if((i=e.nodes[o]).children&&!i.container)for(var r=t.commandHandler.getAllDescendants(i,[]),a=0;a<r.length;a++){var l=n.childTable[r[a].id];hv(l)===ry?(this.sizeChanged(l,t,n),this.positionChanged(l,t)):this.connectionChanged(l,t,n)}else this.sizeChanged(i,t),this.positionChanged(i,t);if(e&&e.connectors&&e.connectors.length>0){var s=e.connectors;for(o=0;o<s.length;o++)this.connectionChanged(s[o],t)}},e.prototype.sizeChanged=function(e,t,n){var i=t.nameTable[e.id],o=e.wrapper.actualSize.width/i.wrapper.actualSize.width,r=e.wrapper.actualSize.height/i.wrapper.actualSize.height;n&&n.childTable&&(n.childTable[e.id]=Yy(i)),t.scale(i,o,r,{x:e.wrapper.offsetX/i.wrapper.offsetX,y:e.wrapper.offsetY/i.wrapper.offsetY})},e.prototype.recordRotationChanged=function(e,t,n){var i,o=0,r=t.selectedItems;if(r.rotateAngle=e.rotateAngle,r&&r.wrapper&&(r.wrapper.rotateAngle=e.rotateAngle),e&&e.nodes&&e.nodes.length>0)for(o=0;o<e.nodes.length;o++)this.rotationChanged(i=e.nodes[o],t),this.positionChanged(i,t);if(e&&e.connectors&&e.connectors.length>0)for(o=0;o<e.connectors.length;o++)this.connectionChanged(e.connectors[o],t)},e.prototype.rotationChanged=function(e,t){var n=t.nameTable[e.id];t.rotate(n,e.rotateAngle-n.rotateAngle)},e.prototype.recordConnectionChanged=function(e,t){var n=e.connectors[0];n.sourceID&&t.nameTable[n.sourceID]&&t.insertValue(t.nameTable[n.sourceID],!0),n.targetID&&t.nameTable[n.targetID]&&t.insertValue(t.nameTable[n.targetID],!0),this.connectionChanged(n,t)},e.prototype.connectionChanged=function(e,t,n){var i,o=t.nameTable[e.id];e.sourcePortID!==o.sourcePortID&&(t.removePortEdges(t.nameTable[o.sourceID],o.sourcePortID,o.id,!1),o.sourcePortID=e.sourcePortID,t.connectorPropertyChange(o,{},{sourcePortID:e.sourcePortID})),e.targetPortID!==o.targetPortID&&(t.removePortEdges(t.nameTable[o.targetID],o.targetPortID,o.id,!0),o.targetPortID=e.targetPortID,t.connectorPropertyChange(o,{},{targetPortID:e.targetPortID})),e.sourceID!==o.sourceID&&(""===e.sourceID?Km((i=t.nameTable[o.sourceID]).outEdges,e.id):((i=t.nameTable[e.sourceID]).outEdges.push(e.id),t.updatePortEdges(i,e,!1)),o.sourceID=e.sourceID,t.connectorPropertyChange(o,{},{sourceID:e.sourceID})),e.targetID!==o.targetID&&(""===e.targetID?Km((i=t.nameTable[o.targetID]).inEdges,e.id):((i=t.nameTable[e.targetID]).inEdges.push(e.id),t.updatePortEdges(i,e,!0)),o.targetID=e.targetID,t.connectorPropertyChange(o,{},{targetID:e.targetID})),n&&n.childTable&&(n.childTable[e.id]=Yy(o));var r=e.sourcePoint.x-o.sourcePoint.x,a=e.sourcePoint.y-o.sourcePoint.y;0===r&&0===a||t.dragSourceEnd(o,r,a);var l=e.targetPoint.x-o.targetPoint.x,s=e.targetPoint.y-o.targetPoint.y;0===l&&0===s||t.dragTargetEnd(o,l,s),t.updateSelector(),"SVG"!==t.mode&&t.refreshDiagramLayer()},e.prototype.recordCollectionChanged=function(e,t){var n=e.undoObject;if(e&&e.changeType){if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))n.nodeId?t.remove(t.nameTable[n.nodeId+"_textannotation_"+n.id]):(t.remove(n),t.clearSelectorLayer());else{if(t.clearSelectorLayer(),n.parentId){var i=t.nameTable[n.parentId];i?t.addChild(i,n):t.add(n)}else n.nodeId?t.addTextAnnotation(n,t.nameTable[n.nodeId]):t.nameTable[n.id]||(n&&n.shape&&"SwimLane"===n.shape.type&&e.isUndo&&pm(n,void 0,void 0,void 0,void 0,!0),t.add(n));n.processId&&t.nameTable[n.processId]&&t.addProcess(n,n.processId)}"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.recordLabelCollectionChanged=function(e,t){var n=e.undoObject,i=t.nameTable[e.redoObject.id];e&&e.changeType&&("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removeLabels(i,[n]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addLabels(i,[n])),"SVG"!==t.mode&&t.refreshDiagramLayer())},e.prototype.recordPortCollectionChanged=function(e,t){var n=e.undoObject,i=t.nameTable[e.redoObject.id];e&&e.changeType&&("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removePorts(i,[n]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addPorts(i,[n])),"SVG"!==t.mode&&t.refreshDiagramLayer())},e.prototype.redo=function(e){var t=this.getRedoEntry(e),n=0;if(t)if("Internal"===t.category)"StartGroup"===t.type?(n++,this.groupUndo=!0,Ka()&&(e.blazorActions|=wc.GroupingInProgress)):this.redoEntry(t,e),this.groupUndo&&(this.redoGroupAction(t,e,n),this.groupUndo=!1);else{Ka()||e.historyManager.redo(t);var i={entryType:"redo",oldValue:t.redoObject,newValue:t.undoObject};Ka()&&(i={entryType:"redo",oldValue:this.getHistoryChangeEvent(t.redoObject,t.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(t.undoObject,t.blazorHistoryEntryType)}),e.triggerEvent(jc.historyStateChange,i)}},e.prototype.redoGroupAction=function(e,t,n){for(;0!==n;)this.redoEntry(e,t),"EndGroup"===(e=this.getRedoEntry(t)).type?n--:"StartGroup"===e.type&&n++;n=0},e.prototype.redoEntry=function(e,t){var n,i;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&(n=e.redoObject,i=e.redoObject),t.diagramActions|=Mc.UndoRedo,"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.redoStack.length>0){var o=t.historyManager.redoStack.splice(0,1);t.historyManager.undoStack.splice(0,0,o[0]),i=e.redoObject}switch(t.protectPropertyChange(!0),Ka()&&e.next&&"EndGroup"===e.next.type&&(t.blazorActions&=~wc.GroupingInProgress),e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(n,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(n,t,e);break;case"RotationChanged":this.recordRotationChanged(n,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(n,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!0);break;case"CollectionChanged":this.recordCollectionChanged(e,t);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(e,t);break;case"PortCollectionChanged":this.recordPortCollectionChanged(e,t);break;case"Group":this.group(e,t);break;case"UnGroup":this.unGroup(e,t);break;case"SegmentChanged":this.recordSegmentChanged(n,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(e,t,!0);break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(e,t,!0);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(e,t,!0)}if(t.protectPropertyChange(!1),t.diagramActions&=~Mc.UndoRedo,t.historyChangeTrigger(e,"Redo"),i){var r=this.checkNodeObject(i,t);if(r){var a=rb(t.updateSelection);a&&a(r,t)}}},e.prototype.getUndoEntry=function(e){var t,n=null,i=e.historyManager;return i.canUndo&&(n=i.currentEntry,(t=i.currentEntry.previous)?(i.currentEntry=t,i.canRedo||(i.canRedo=!0)):(i.canRedo=!0,i.canUndo=!1)),n},e.prototype.getRedoEntry=function(e){var t,n=null,i=e.historyManager;return i.canRedo&&((t=i.currentEntry.previous||i.canUndo?i.currentEntry.next:i.currentEntry)&&(i.currentEntry=t,i.canUndo||(i.canUndo=!0),t.next||(i.canRedo=!1,i.canUndo=!0)),n=i.currentEntry),n},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"UndoRedo"},e}(),mC=function(){function e(){this.protectChange=!1}return e.prototype.expand=function(e,t,n,i){var o=this,r={},a=0;if(i.realActions=i.realActions|Lc.AnimationClick,r[0]=setInterval(function(){return o.layoutAnimation(t,r,6==++a,i,n)},20),n.isExpanded){var l=.2;this.protectChange=i.isProtectedOnChange,i.protectPropertyChange(!1);var s={};e&&(this.updateOpacity(n,l,i),s[0]=setInterval(function(){i.allowServerDataBinding=!1,l<=1?o.updateOpacity(n,l,i):clearInterval(s[0]),l+=.2,i.allowServerDataBinding=!0},20))}},e.prototype.layoutAnimation=function(e,t,n,i,o){if(!n)for(var r=0;r<e.objects.length;r++){var a=i.nameTable[e.objects[r].id];a.offsetX+=e.objects[r].differenceX/5,a.offsetY+=e.objects[r].differenceY/5}if(n){clearInterval(t[0]),i.realActions=i.realActions&~Lc.AnimationClick,i.refreshCanvasLayers(),i.protectPropertyChange(!0),i.triggerEvent(jc.animationComplete,void 0),i.organizationalChartModule.isAnimation=!1,i.layout.fixedNode="",i.protectPropertyChange(this.protectChange);var l={element:xv(Yy(o)),state:!!o.isExpanded};i.triggerEvent(jc.expandStateChange,l),i.lineRoutingModule&&i.constraints&Ac.LineRouting&&i.resetSegments()}},e.prototype.updateOpacity=function(e,t,n){for(var i=0;i<e.outEdges.length;i++){var o=n.nameTable[e.outEdges[i]],r=n.nameTable[o.targetID];o.style.opacity=t;for(var a=0;a<o.wrapper.children.length;a++)o.wrapper.children[a].style.opacity=t,r.style.opacity=t,r.wrapper instanceof Fc&&n.updateNodeProperty(r.wrapper,void 0,t);this.updateOpacity(r,t,n)}},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LayoutAnimate"},e}(),vC=function(){function e(){this.size=20,this.intermediatePoints=[],this.gridCollection=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.considerWalkable=[]}return e.prototype.lineRouting=function(e){var t=e.connectors.length;if(this.renderVirtualRegion(e),t>0)for(var n=0;n<t;n++){var i=e.connectors[n];"Orthogonal"===i.type&&i.visible&&this.refreshConnectorSegments(e,i,!0)}},e.prototype.renderVirtualRegion=function(e,t){var n=this.size;(e.spatialSearch.pageTop<0||e.spatialSearch.pageLeft<0)&&(n=this.size+this.size/2);var i=e.spatialSearch.pageRight+n,o=e.spatialSearch.pageBottom+n,r=e.spatialSearch.pageLeft-n,a=e.spatialSearch.pageTop-n;if(r=r<0?r-20:0,a=a<0?a-20:0,t&&(this.width!==i-r||this.height!==o-a||this.diagramStartX!==r||this.diagramStartY!==a)||void 0===t){this.width=i-r,this.height=o-a,this.diagramStartX=r,this.diagramStartY=a,this.gridCollection=[],this.noOfRows=this.width/this.size,this.noOfCols=this.height/this.size;for(var l=this.size,s=this.diagramStartX<0?this.diagramStartX:0,d=this.diagramStartY<0?this.diagramStartY:0,c=0;c<this.noOfCols;c++){for(var u=0;u<this.noOfRows;u++)0===c&&this.gridCollection.push([0]),this.gridCollection[u][c]={x:s,y:d,width:l,height:l,gridX:u,gridY:c,walkable:!0,tested:void 0,nodeId:[]},s+=l;s=this.diagramStartX<0?this.diagramStartX:0,d+=l}}var h=this.findNodes(e.nodes);this.updateNodesInVirtualRegion(h)},e.prototype.findNodes=function(e){for(var t,n=[],i=0;i<e.length;i++)"SwimLane"===(t=e[i]).shape.type||t.isLane||t.isPhase||t.isHeader||!t.visible||n.push(t);return n},e.prototype.updateNodesInVirtualRegion=function(e){for(var t=this.size,n=this.diagramStartX<0?this.diagramStartX:0,i=this.diagramStartY<0?this.diagramStartY:0,o=0;o<this.noOfCols;o++){for(var r=0;r<this.noOfRows;r++){var a=this.gridCollection[r][o],l=new Zd(n,i,this.size,this.size),s=void 0,d=void 0;for(a.walkable=!0,a.tested=void 0,a.nodeId=[],d=0;d<e.length;d++)e[d].wrapper.bounds&&(s=this.intersectRect(l,e[d].wrapper.bounds)),s&&(a.nodeId.push(e[d].id),a.walkable=!1,""!==e[d].parentId&&(a.parentNodeId=e[d].parentId));n+=t}n=this.diagramStartX<0?this.diagramStartX:0,i+=t}},e.prototype.intersectRect=function(e,t){return!(t.left>=e.right||t.right<=e.left||t.top>=e.bottom||t.bottom<=e.top)},e.prototype.findEndPoint=function(e,t,n){var i,o;if(t&&""!==e.sourcePortID||!t&&""!==e.targetPortID){o=qu(i=t?{x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY}:{x:e.targetPortWrapper.offsetX,y:e.targetPortWrapper.offsetY},void 0,t?e.sourceWrapper.bounds:e.targetWrapper.bounds);var r=t?e.sourcePortWrapper.bounds:e.targetPortWrapper.bounds;i=n?"Top"===o?{x:r.topCenter.x,y:r.topCenter.y}:"Left"===o?{x:r.middleLeft.x,y:r.middleLeft.y}:"Right"===o?{x:r.middleRight.x,y:r.middleRight.y}:{x:r.bottomCenter.x,y:r.bottomCenter.y}:{x:r.center.x,y:r.center.y}}else i=t&&this.startNode||!t&&this.targetNode?t?{x:this.startNode.wrapper.offsetX,y:this.startNode.wrapper.offsetY}:{x:this.targetNode.wrapper.offsetX,y:this.targetNode.wrapper.offsetY}:t?{x:e.sourcePoint.x,y:e.sourcePoint.y}:{x:e.targetPoint.x,y:e.targetPoint.y};return i},e.prototype.refreshConnectorSegments=function(e,t,n){var i,o,r,a,l,s,d,c,u,h,p,f=t.sourceID,g=t.targetID,m=t.sourcePortID,v=t.targetPortID;if(function(e,t){var n=0;return e.constraints&Tc.LineRouting?n=e.constraints&Tc.LineRouting:e.constraints&Tc.InheritLineRouting&&(n=t.constraints&Ac.LineRouting),n}(t,e)){this.startNode=e.nameTable[f],this.targetNode=e.nameTable[g],this.intermediatePoints=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.startGrid=void 0,this.targetGrid=void 0;for(var y=0;y<this.noOfCols;y++)for(var b=0;b<this.noOfRows;b++)this.gridCollection[b][y].tested=this.gridCollection[b][y].parent=void 0,this.gridCollection[b][y].previousDistance=this.gridCollection[b][y].afterDistance=void 0,this.gridCollection[b][y].totalDistance=void 0;for(i=this.findEndPoint(t,!0),o=this.findEndPoint(t,!1),y=0;y<this.noOfRows;y++)for(b=0;b<this.noOfCols;b++){var w,C=new Zd((r=this.gridCollection[y][b]).x,r.y,r.width,r.height);!C.containsPoint(i)||this.startGrid||-1===r.nodeId.indexOf(f)&&""!==f||(this.startGrid=r),!C.containsPoint(o)||this.targetGrid||-1===r.nodeId.indexOf(g)&&""!==g||(this.targetGrid=r),!m&&this.startNode&&(C.containsPoint((w=this.startNode.wrapper.bounds).topCenter)&&!a&&(a=r),C.containsPoint(w.middleLeft)&&!s&&(s=r),C.containsPoint(w.middleRight)&&!d&&(d=r),C.containsPoint(w.bottomCenter)&&!l&&(l=r)),!v&&this.targetNode&&(C.containsPoint((w=this.targetNode.wrapper.bounds).topCenter)&&!u&&(u=r),C.containsPoint(w.middleLeft)&&!p&&(p=r),C.containsPoint(w.middleRight)&&!c&&(c=r),C.containsPoint({x:w.bottomCenter.x,y:w.bottomCenter.y})&&!h&&(h=r))}this.findEdgeBoundary(m,s,d,a,l,!0),this.findEdgeBoundary(v,p,c,u,h,!1),this.startGrid.totalDistance=0,this.startGrid.previousDistance=0,this.intermediatePoints.push({x:this.startGrid.gridX,y:this.startGrid.gridY}),this.startArray.push(this.startGrid),this.checkObstacles(t);e:for(;this.startArray.length>0;){var x=this.startArray.pop();for(y=0;y<this.targetGridCollection.length;y++){var S=this.targetGridCollection[y];if(x.gridX===S.gridX&&x.gridY===S.gridY){if(this.getIntermediatePoints(x),this.updateConnectorSegments(e,this.intermediatePoints,this.gridCollection,t,n)){this.considerWalkable=[];break e}this.targetGridCollection.splice(this.targetGridCollection.indexOf(S),1),x=this.startArray.pop()}}this.findPath(x)}}},e.prototype.findEdgeBoundary=function(e,t,n,i,o,r){var a,l=r?this.sourceGridCollection:this.targetGridCollection;if(!e&&(r?this.startNode:this.targetNode)){for(var s=t.gridX;s<=n.gridX;s++)(1===(a=this.gridCollection[s][t.gridY]).nodeId.length&&(s===t.gridX||s===n.gridX)||s!==t.gridX&&s!==n.gridX)&&l.push(a);for(s=i.gridY;s<=o.gridY;s++)(1===(a=this.gridCollection[i.gridX][s]).nodeId.length&&(s===i.gridY||s===o.gridY)||s!==i.gridY&&s!==o.gridY)&&-1===l.indexOf(a)&&l.push(a)}else l.push(r?this.startGrid:this.targetGrid)},e.prototype.checkObstacles=function(e){var t=this.findNearestNeigbours(this.startGrid,this.gridCollection,!0);if(0===t.length)if(""!==e.sourcePortID){var n=qu({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},void 0,e.sourceWrapper.bounds);this.resetGridColl(this.startGrid,"Top"===n?"top":"Right"===n?"right":"Bottom"===n?"bottom":"left",!0)}else this.resetGridColl(this.startGrid,"top",!0),this.resetGridColl(this.startGrid,"right",!0),this.resetGridColl(this.startGrid,"bottom",!0),this.resetGridColl(this.startGrid,"left",!0);0===(t=this.findNearestNeigbours(this.targetGrid,this.gridCollection,!1)).length&&(""!==e.targetPortID?(n=qu({x:e.targetPortWrapper.offsetX,y:e.targetPortWrapper.offsetY},void 0,e.targetWrapper.bounds),this.resetGridColl(this.targetGrid,"Top"===n?"top":"Right"===n?"right":"Bottom"===n?"bottom":"left",!0)):(this.resetGridColl(this.targetGrid,"top",!1),this.resetGridColl(this.targetGrid,"right",!1),this.resetGridColl(this.targetGrid,"bottom",!1),this.resetGridColl(this.targetGrid,"left",!1)))},e.prototype.getIntermediatePoints=function(e){var t;for(this.intermediatePoints=[];e;)this.intermediatePoints.push({x:e.gridX,y:e.gridY}),e=e.parent;this.intermediatePoints.reverse(),this.intermediatePoints[0].x===this.intermediatePoints[1].x?this.intermediatePoints[0].y<this.intermediatePoints[1].y?(t=this.neigbour(this.startGrid,"bottom",void 0,!0),this.intermediatePoints[0].y+=t-1):(t=this.neigbour(this.startGrid,"top",void 0,!0),this.intermediatePoints[0].y-=t-1):this.intermediatePoints[0].x<this.intermediatePoints[1].x?(t=this.neigbour(this.startGrid,"right",void 0,!0),this.intermediatePoints[0].x+=t-1):(t=this.neigbour(this.startGrid,"left",void 0,!0),this.intermediatePoints[0].x-=t-1)},e.prototype.updateConnectorSegments=function(e,t,n,i,o){var r,a,l,s,d,c,u=[],h=[],p=i.targetWrapper,f=i.sourceWrapper,g=this.findEndPoint(i,!0);""===i.targetPortID&&i.targetWrapper||(r=this.findEndPoint(i,!1,!0));for(var m=0;m<t.length;m++)h.push({x:(a=n[t[m].x][t[m].y]).x+a.width/2,y:a.y+a.height/2}),m>=1&&(d=h[h.length-2].x!==h[h.length-1].x?h[h.length-2].x>h[h.length-1].x?"Left":"Right":h[h.length-2].y>h[h.length-1].y?"Top":"Bottom"),m>=2&&c===d&&h.splice(h.length-2,1),c=d;for(var v=0;v<h.length-1;v++)h[v].x!==h[v+1].x?(0===v&&""===i.sourcePortID&&f&&(g=h[v].x>h[v+1].x?f.bounds.middleLeft:f.bounds.middleRight),v===h.length-2&&""===i.targetPortID&&p&&(r=h[v].x>h[v+1].x?p.bounds.middleRight:p.bounds.middleLeft),0===v&&g&&(h[v].x=g.x,h[v].y=h[v+1].y=g.y),v===h.length-2&&r&&(r.x-h[v+1].x<0&&Math.abs(r.x-h[v].x)<i.targetDecorator.width+1&&(h[v].x=h[v-1].x-=this.size/2),r.x-h[v+1].x>0&&Math.abs(r.x-h[v].x)<i.targetDecorator.width+1&&(h[v].x=h[v-1].x+=this.size/2),h[v+1].x=r.x,h[v].y=h[v+1].y=r.y)):(0===v&&f&&(g=h[v].y>h[v+1].y?f.bounds.topCenter:f.bounds.bottomCenter),v===h.length-2&&""===i.targetPortID&&p&&(r=h[v].y>h[v+1].y?p.bounds.bottomCenter:p.bounds.topCenter),0===v&&g&&(h[v].y=g.y,h[v].x=h[v+1].x=g.x),v===h.length-2&&r&&(r.y-h[v+1].y<0&&Math.abs(r.y-h[v].y)<i.targetDecorator.height+1&&(h[v].y=h[v-1].y-=this.size/2),r.y-h[v+1].y>0&&Math.abs(r.y-h[v].y)<i.targetDecorator.width+1&&(h[v].y=h[v-1].y+=this.size/2),h[v+1].y=r.y,h[v].x=h[v+1].x=r.x));for(v=0;v<h.length-1;v++)h[v].x!==h[v+1].x?h[v].x>h[v+1].x?(l="Left",s=h[v].x-h[v+1].x):(l="Right",s=h[v+1].x-h[v].x):h[v].y>h[v+1].y?(l="Top",s=h[v].y-h[v+1].y):(l="Bottom",s=h[v+1].y-h[v].y),u.push({type:"Orthogonal",length:s,direction:l});var y=u[u.length-1];return 1===u.length&&(y.length-=20),y.length<10&&2===u.length&&(u.pop(),u[0].length-=20,y=u[0]),(("Top"===y.direction||"Bottom"===y.direction)&&y.length>i.targetDecorator.height+1||("Right"===y.direction||"Left"===y.direction)&&y.length>i.targetDecorator.width+1)&&(i.segments=u,o&&e.connectorPropertyChange(i,{},{type:"Orthogonal",segments:u}),!0)},e.prototype.findPath=function(e){for(var t,n=[],i=this.findNearestNeigbours(e,this.gridCollection,!0),o=0;o<i.length;o++)if(null!==(t=this.findIntermediatePoints(i[o].gridX,i[o].gridY,e.gridX,e.gridY,this.targetGrid.gridX,this.targetGrid.gridY))){var r=this.gridCollection[t.x][t.y],a=this.octile(Math.abs(t.x-e.gridX),Math.abs(t.y-e.gridY)),l=e.previousDistance+a;r.previousDistance&&!(r.previousDistance>l)||t.x===e.gridX&&t.y===e.gridY||(n.push(t),r.previousDistance=l,r.afterDistance=r.afterDistance||this.manhattan(Math.abs(t.x-this.targetGrid.gridX),Math.abs(t.y-this.targetGrid.gridY)),r.totalDistance=r.previousDistance+r.afterDistance,r.parent=e)}if(n.length>0)for(o=0;o<n.length;o++)-1===this.startArray.indexOf(r=this.gridCollection[n[o].x][n[o].y])&&this.startArray.push(r);this.sorting(this.startArray)},e.prototype.sorting=function(e){for(var t=!1;!t;){t=!0;for(var n=1;n<e.length;n+=1)if(e[n-1].totalDistance<e[n].totalDistance){t=!1;var i=e[n-1];e[n-1]=e[n],e[n]=i}}return e},e.prototype.octile=function(e,t){var n=Math.SQRT2-1;return t>e?n*e+t:n*t+e},e.prototype.manhattan=function(e,t){return e+t},e.prototype.findNearestNeigbours=function(e,t,n){var i=[],o=e.parent;if(o){var r=(e.gridX-o.gridX)/Math.max(Math.abs(e.gridX-o.gridX),1),a=(e.gridY-o.gridY)/Math.max(Math.abs(e.gridY-o.gridY),1);0!==r?(this.isWalkable(e.gridX,e.gridY-1,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX][e.gridY-1])&&i.push(t[e.gridX][e.gridY-1]),this.isWalkable(e.gridX,e.gridY+1,!0)&&this.sourceGridCollection.indexOf(t[e.gridX][e.gridY+1])&&i.push(t[e.gridX][e.gridY+1]),this.isWalkable(e.gridX+r,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX+r][e.gridY])&&i.push(t[e.gridX+r][e.gridY])):0!==a&&(this.isWalkable(e.gridX-1,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX-1][e.gridY])&&i.push(t[e.gridX-1][e.gridY]),this.isWalkable(e.gridX+1,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX+1][e.gridY])&&i.push(t[e.gridX+1][e.gridY]),this.isWalkable(e.gridX,e.gridY+a,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX][e.gridY+a])&&i.push(t[e.gridX][e.gridY+a]))}else this.neigbour(e,"top",i,n),this.neigbour(e,"right",i,n),this.neigbour(e,"bottom",i,n),this.neigbour(e,"left",i,n);return i},e.prototype.neigbour=function(e,t,n,i){for(var o,r=1;r>0;){var a="top"===t||"bottom"===t?e.gridX:"left"===t?e.gridX-r:e.gridX+r,l="right"===t||"left"===t?e.gridY:"top"===t?e.gridY-r:e.gridY+r;if((o=this.gridCollection[a][l])&&(i&&-1===this.sourceGridCollection.indexOf(o)||!i&&-1===this.targetGridCollection.indexOf(o)))return n&&this.isWalkable(a,l)&&n.push(o),r;if(!(a>0&&l>0))break;r++}return null},e.prototype.resetGridColl=function(e,t,n){for(var i,o=1;o>0;){var r="top"===t||"bottom"===t?e.gridX:"left"===t?e.gridX-o:e.gridX+o,a="right"===t||"left"===t?e.gridY:"top"===t?e.gridY-o:e.gridY+o;if((i=this.gridCollection[r][a])&&(n&&-1===this.sourceGridCollection.indexOf(i)||!n&&-1===this.targetGridCollection.indexOf(i))){if(this.isWalkable(r,a))break;this.considerWalkable.push(this.gridCollection[r][a])}if(!(r>0&&a>0))break;"top"===t||"left"===t?o--:o++}return null},e.prototype.isWalkable=function(e,t,n){if(e>=0&&e<this.noOfRows&&t>=0&&t<this.noOfCols){var i=this.gridCollection[e][t];if(i&&(i.walkable||(1===i.nodeId.length||2===i.nodeId.length&&i.parentNodeId)&&(-1!==this.sourceGridCollection.indexOf(i)||-1!==this.targetGridCollection.indexOf(i)||-1!==this.considerWalkable.indexOf(i)))&&(n&&!i.parent||!n))return!0}return!1},e.prototype.findIntermediatePoints=function(e,t,n,i,o,r){for(var a=e-n,l=t-i,s=e,d=t,c=0;c<this.targetGridCollection.length;c++)if(e===this.targetGridCollection[c].gridX&&t===this.targetGridCollection[c].gridY)return{x:e,y:t};if(!this.isWalkable(e,t))return null;var u=this.gridCollection[e][t];if(u.tested)return{x:e,y:t};if(u.tested=!0,0!==a&&(a=a>0?1:-1,this.isWalkable(s,d-1)&&!this.isWalkable(s-a,d-1)||this.isWalkable(s,d+1)&&!this.isWalkable(s-a,d+1)))return{x:e,y:t};if(0!==l){if(l=l>0?1:-1,this.isWalkable(s-1,d)&&!this.isWalkable(s-1,d-l)||this.isWalkable(s+1,d)&&!this.isWalkable(s+1,d-l))return{x:e,y:t};if(this.findIntermediatePoints(s+1,d,s,d,o,r)||this.findIntermediatePoints(s-1,d,s,d,o,r))return{x:e,y:t}}return this.findIntermediatePoints(s+a,d+l,s,d,o,r)},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LineRouting"},e}(),yC=function(){function e(){}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LineDistribution"},e.prototype.initLineDistribution=function(e,t){var n="Bottom";if(this.diagram=t,"DifferentPoint"===t.layout.connectionPointOrigin||t.layout.enableRouting){var i="Top";"BottomToTop"===e.orientation?(n="Top",i="Bottom"):"RightToLeft"===e.orientation?(n="Left",i="Right"):"LeftToRight"===e.orientation&&(n="Right",i="Left");var o=t.nodes;if(o.length>0)for(var r=0;r<o.length;r++)this.addDynamicPortandDistrrbuteLine(e,t.nameTable[o[r].id],n,i,t)}},e.prototype.ObstacleSegment=function(e){return e.direction=wv(e.startpt,e.endpt),e.distance=jd.findLength(e.startpt,e.endpt),e.orientation="Left"===e.direction||"Right"===e.direction?"horizontal":"vertical",e.id=e.id,"horizontal"===e.orientation?(e.coord=e.startpt.y,"Left"===e.direction?(e.start=e.endpt.x,e.end=e.startpt.x):(e.start=e.startpt.x,e.end=e.endpt.x)):(e.coord=e.startpt.x,"Top"===e.direction?(e.start=e.endpt.y,e.end=e.startpt.y):(e.start=e.startpt.y,e.end=e.endpt.y)),e},e.prototype.distributeLines=function(e,t){for(var n="LeftToRight"===e.orientation||"RightToLeft"===e.orientation,i=(n?e.horizontalSpacing:e.verticalSpacing)-8-10,o=[],r=[],a=t.connectors,l=0;l<a.length;l++){for(var s=a[l],d=[],c=0;c<s.segments.length;c++)for(var u=s.segments[c],h=0;h<u.points.length;h++){var p=u.points[h];0!==d.length&&jd.equals(p,d[d.length-1])||d.push(p)}for(var f=[],g=1;g<d.length;g++){var m=this.ObstacleSegment({startpt:d[g-1],endpt:d[g],id:s.id});f.push(m)}var v={wrapper:s,segments:f},y=[];if(n)for(c=0;c<v.segments.length;c++)"vertical"===(m=v.segments[c]).orientation&&y.push(m);else for(c=0;c<v.segments.length;c++)"horizontal"===(m=v.segments[c]).orientation&&y.push(m);for(g=0;g<y.length;g++){this.containsValue(o,(k=y[g]).coord)||o.push({key:k.coord,value:[]});var b=void 0;for(h=0;h<o.length;h++)if(c=o[h].key,Number(c)===k.coord){b=h;break}o[b].value.push(k)}r.push(v)}for(var w=[],C=0;C<o.length;C++){var x=o[C],S=x.value;S.sort();var T=void 0;T=[],b=0;var E=Number.MIN_VALUE;T.push([]);for(var _=0;_<S.length;_++){var k=S[_];!(T[b].length>0)||E>=k.start?(T[b].push(k),E=Math.max(E,T[b][T[b].length-1].end)):(b++,T.push([]),T[b].push(k),E=T[b][T[b].length-1].end)}for(_=0;_<T.length;_++){var D=T[_],A=[];for(g=0;g<D.length;g++)(R=D[g]).start&&A.push(R);var O=n?"Bottom":"Right",I=[];for(g=0;g<A.length;g++)(R=A[g]).direction===O&&I.push(R);var P=[];for(g=0;g<A.length;g++){var R;(R=A[g]).direction!==O&&P.push(R)}var M=[];if(I.length>0){var N=I[0].start;for(g=0;g<P.length;)P[g].end>N?(M.push(P[g]),P.splice(g,1)):g++}var L=[];L=this.updateSegmentRow(M,L);var H=[];H=this.updateSegmentRow(P,H=[]),I.reverse(),H=this.updateSegmentRow(I,H),L[L.length-1].length>0||L.splice(L.length-1,1),H[H.length-1].length>0||H.splice(H.length-1,1);var B=[];if(M.length>0&&(A[0].direction===M[0].direction||A[A.length-1].direction===M[M.length-1].direction)){B=H;for(var j=0;j<L.length;j++)B[B.length]=L[j]}else for(B=L,j=0;j<H.length;j++)B[B.length]=H[j];if(B.length>1){var z=1;"BottomToTop"!==e.orientation&&"RightToLeft"!==e.orientation||(z=-1);var U=x.key-z*i/2,F=i/B.length;for(l=0;l<B.length;l++){var G=U+l*F*z;for(j=0;j<B[l].length;j++){(k=B[l][j]).coord=G,this.containsValue(w,k.coord)||w.push({key:k.coord,value:[]});var q=void 0;for(h=0;h<w.length;h++)if(w[h].key===k.coord){q=h;break}w[q].value.push(k)}}}}}for(C=0;C<r.length;C++){for(v=r[C],d=[],l=0;l<v.segments.length;l++)0===l?d.push(this.getObstacleStartPoint(v.segments[l])):n?"vertical"===v.segments[l].orientation&&(d[d.length-1]=this.getObstacleStartPoint(v.segments[l])):n||"horizontal"===v.segments[l].orientation&&(d[d.length-1]=this.getObstacleStartPoint(v.segments[l])),d.push(this.getObstacleEndPoint(v.segments[l]));for(v.wrapper.obstaclePointCollection=[],g=0;g<d.length;g++){var V=d[g];(0===g||g>0&&!jd.equals(V,d[g-1]))&&v.wrapper.obstaclePointCollection.push(this.getPointvalue(V.x,V.y))}this.resetConnectorPoints(v.wrapper,t)}},e.prototype.inflate=function(e,t,n){return e.x-=t,e.y-=n,e.width+=2*t,e.height+=2*n,e},e.prototype.updateConnectorPoints=function(e,t,n,i,o){var r=i,a="LeftToRight"===o||"RightToLeft"===o,l=e;if(l.length>2){var s=jd.transform(l[0],jd.findAngle(l[0],l[1]),t),d=jd.transform(s,jd.findAngle(l[1],l[2]),jd.findLength(l[1],l[2]));if(l.splice(1,2,s,d),null!=n){var c=l.length,u=jd.transform(l[c-1],jd.findAngle(l[c-1],l[c-2]),t);for(l.splice(c-1,0,u);2<l.length-2;)l.splice(2,1);var h=n;this.inflate(r,r.width,r.height);var p=[];p[0]=this.getPointvalue(h.x,r.y),p[1]=this.getPointvalue(h.x,r.y+r.height);var f=[];f[0]=this.getPointvalue(r.x,l[1].y),f[1]=this.getPointvalue(r.x+r.width,l[1].y);var g=[];g[0]=this.getPointvalue(r.x,u.y),g[1]=this.getPointvalue(r.x+r.width,u.y),a&&(p[0]=this.getPointvalue(r.x,h.y),p[1]=this.getPointvalue(r.x+r.width,h.y),f[0]=this.getPointvalue(l[1].x,r.y),f[1]=this.getPointvalue(l[1].x,r.y+r.height),g[0]=this.getPointvalue(u.x,r.y),f[1]=this.getPointvalue(u.x,r.y+r.height));var m=[Mm(p[0],p[1],f[0],f[1])],v=[Mm(p[0],p[1],g[0],g[1])];v.length>0&&l.splice(2,0,v[0]),m.length>0&&l.splice(2,0,m[0])}}for(var y=1;y<l.length-1;)jd.equals(l[y-1],l[y])?l.splice(y,1):jd.findAngle(l[y-1],l[y])===jd.findAngle(l[y],l[y+1])?l.splice(y,1):y++;return l},e.prototype.resetConnectorPoints=function(e,t){var n="obstaclePointCollection";if(e.segments[0].points&&e.segments[0].points.length>0&&e[n]){var i=e;i.sourcePoint=e[n][0],i.targetPoint=e[n][e[n].length-1];var o=void 0;o=[];for(var r=0;r<e[n].length-1;r++){var a=e[n][r],l=e[n][r+1],s=Cv(a,l),d=wv(a,l);r===e[n].length-2&&("RightToLeft"===t.layout.orientation&&"Left"===d||"LeftToRight"===t.layout.orientation&&"Right"===d||"TopToBottom"===t.layout.orientation&&"Bottom"===d||"BottomToTop"===t.layout.orientation&&"Top"===d)&&(s/=2);var c=new Af(e,"segments",{type:"Orthogonal"},!0);c.length=s,c.direction=d,o.push(c)}i.segments=o,i.type="Orthogonal",t.connectorPropertyChange(i,{},{type:"Orthogonal",segments:i.segments})}},e.prototype.getObstacleEndPoint=function(e){return"horizontal"===e.orientation?this.getPointvalue("Left"===e.direction?e.start:e.end,e.coord):this.getPointvalue(e.coord,"Top"===e.direction?e.start:e.end)},e.prototype.getObstacleStartPoint=function(e){return"horizontal"===e.orientation?this.getPointvalue("Left"===e.direction?e.end:e.start,e.coord):this.getPointvalue(e.coord,"Top"===e.direction?e.end:e.start)},e.prototype.updateSegmentRow=function(e,t){var n=0;t.length>0||(t[0]=[]);for(var i=0;i<e.length;i++)for(var o=e[i];n<t.length;){if(n===t.length-1&&(t[n+1]=[]),!(t[n].length>0)||t[n][t[n].length-1].end<o.start){t[n].push(o);break}n++}return t},e.prototype.portOffsetCalculation=function(e,t,n,i){"Top"===n&&(e.offset={x:(i+1)*(1/(t+1)),y:0}),"Bottom"===n&&(e.offset={x:(i+1)*(1/(t+1)),y:1}),"Left"===n&&(e.offset={x:0,y:(i+1)*(1/(t+1))}),"Right"===n&&(e.offset={x:1,y:(i+1)*(1/(t+1))})},e.prototype.addDynamicPortandDistrrbuteLine=function(e,t,n,i,o){t.ports&&t.ports.length>0&&o.removePorts(t,t.ports);var r=t.inEdges;this.initPort(t.outEdges,o,t,n,!1),this.initPort(r,o,t,i,!0)},e.prototype.initPort=function(e,t,n,i,o){for(var r=0;r<=e.length-1;r++){var a=t.nameTable[e[r]];a.obstaclePointCollection=[];var l=ov(n,o?a.targetPortID:a.sourcePortID),s=i;void 0===l&&((l=new Kc(n,"ports","",!0)).id=Fy()+"_LineDistribution",o?a.targetPortID=l.id:a.sourcePortID=l.id),this.portOffsetCalculation(l,e.length,s,r),n.ports.push(l);var d=n.initPortWrapper(n.ports[n.ports.length-1]);n.wrapper.children.push(d),t.connectorPropertyChange(a,o?{targetPortID:""}:{sourcePortID:""},o?{targetPortID:l.id}:{sourcePortID:l.id})}},e.prototype.shiftMatrixCells=function(e,t,n,i,o){if(0!==e){for(var r=o.matrix[t.level].value,a=r.indexOf(t),l=a;l<r.length;l++)r[l].offset+=e;if(n)if(t.visitedChildren.length>0)this.shiftMatrixCells(e,t.visitedChildren[0],!0,t,o);else{l=1;for(var s=null;a+l<r.length;){var d=r[a+l];if(null!=i&&this.containsValue(d.visitedParents,i)){if(!(d.visitedChildren.length>0)){l++;continue}s=d}break}null!=s&&this.shiftMatrixCells(e,s.visitedChildren[0],!0,s,o)}}},e.prototype.arrangeMatrix=function(e,t,n){var i=n.model.layout,o="LeftToRight"===i.orientation||"RightToLeft"===i.orientation?i.verticalSpacing:i.horizontalSpacing,r=n.matrix[e.level].value,a=r.indexOf(e);if(e.visitedParents.length>0&&(1===e.visitedParents.length&&(e.initialOffset=e.offset),a+1<r.length&&r[a+1].visitedParents.length>0&&!this.containsValue(e.visitedParents,t)))return e.visitedParents.push(t),void t.ignoredChildren.push(e);if(e.children.length>0){for(var l=0;l<e.children.length;l++){var s=e.children[l];this.containsValue(e.visitedChildren,s)||(this.arrangeMatrix(s,e,n),e.visitedChildren.push(s))}if(e.visitedChildren.length>0){var d=e.visitedChildren.slice();for(l=0;l<e.ignoredChildren.length;l++)d.splice(0,1),e.visitedChildren.splice(0,1);if(d.length>0){var c=e.visitedChildren[0],u=e.visitedChildren[e.visitedChildren.length-1],h=(c.offset-c.size/2+(u.offset+u.size/2))/2;h<e.offset?this.shiftMatrixCells(e.offset-h,c,!0,e,n):h>e.offset&&this.shiftMatrixCells(h-e.offset,e,!1,null,n)}}}else{var p=e.offset;if(a>0){var f=r[a-1];p=f.offset+f.size/2+o+e.size/2}this.shiftMatrixCells(p-e.offset,e,!1,null,n)}this.containsValue(e.visitedParents,t)||e.visitedParents.push(t)},e.prototype.getFixedTerminalPoint=function(){return null},e.prototype.setAbsoluteTerminalPoint=function(e,t,n){t?(null==n.absolutePoints&&(n.absolutePoints=[]),0===n.absolutePoints.length?n.absolutePoints.push(e):n.absolutePoints[0]=e):null==n.absolutePoints?(n.absolutePoints=[],n.absolutePoints.push(null),n.absolutePoints.push(e)):1===n.absolutePoints.length?n.absolutePoints.push(e):n.absolutePoints[n.absolutePoints.length-1]=e},e.prototype.updateFixedTerminalPoint=function(e,t){this.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(),t,e)},e.prototype.updateFixedTerminalPoints=function(e,t){this.updateFixedTerminalPoint(e,!0),this.updateFixedTerminalPoint(e,!1)},e.prototype.updatePoints=function(e,t){if(null!=e){var n=[];n.push(e.absolutePoints[0]);for(var i=0;i<t.length;i++)null!=t[i]&&n.push(t[i]);var o=e.absolutePoints;n.push(o[o.length-1]),e.absolutePoints=n}},e.prototype.updateFloatingTerminalPoint=function(e,t,n,i){this.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(e,t,n,i),i,e)},e.prototype.getNextPoint=function(e,t,n){var i=e.absolutePoints,o=null;if(null!=i&&i.length>=2){var r=i.length;o=i[n?Math.min(1,r-1):Math.max(0,r-2)]}return o},e.prototype.getCenterX=function(e){return e.offsetX?e.offsetX+e.width:e.x+e.width},e.prototype.getCenterY=function(e){return e.offsetY?e.offsetY+e.height:e.y+e.height},e.prototype.getPerimeterBounds=function(e){return e.wrapper.outerBounds},e.prototype.getPerimeterFunction=function(e,t,n){var i=this.getCenterX(e),o=this.getCenterY(e),r=Math.atan2(t.y-o,t.x-i),a=this.getPointvalue(0,0),l=Math.PI,s=Math.PI/2-r,d=Math.atan2(e.height,e.width);return r<-l+d||r>l-d?(a.x=e.x,a.y=o-e.width*Math.tan(r)/2):r<-d?(a.y=e.y,a.x=i-e.height*Math.tan(s)/2):r<d?(a.x=e.x+e.width,a.y=o+e.width*Math.tan(r)/2):(a.y=e.y+e.height,a.x=i+e.height*Math.tan(s)/2),n&&(t.x>=e.x&&t.x<=e.x+e.width?a.x=t.x:t.y>=e.y&&t.y<=e.y+e.height&&(a.y=t.y),t.x<e.x?a.x=e.x:t.x>e.x+e.width&&(a.x=e.x+e.width),t.y<e.y?a.y=e.y:t.y>e.y+e.height&&(a.y=e.y+e.height)),a},e.prototype.getPerimeterPoint=function(e,t,n){var i=null;if(null!=e&&null!=t){var o=this.getPerimeterBounds(e);(o.width>0||o.height>0)&&(i=this.getPointvalue(t.x,t.y),i=this.getPerimeterFunction(o,i,n))}return i},e.prototype.getFloatingTerminalPoint=function(e,t,n,i){t=t;var o=this.getNextPoint(e,n,i);return this.getPerimeterPoint(t,o,1)},e.prototype.updateFloatingTerminalPoints=function(e,t,n){var i=e.absolutePoints,o=i[0];null==i[i.length-1]&&null!=n&&this.updateFloatingTerminalPoint(e,n,t,!1),null==o&&null!=t&&this.updateFloatingTerminalPoint(e,t,n,!0)},e.prototype.getConnectorPoints=function(e,t){this.updateFixedTerminalPoints(e,t),this.updatePoints(e,e.geometry.points),this.updateFloatingTerminalPoints(e,t.nameTable[e.sourceID],t.nameTable[e.targetID]),e.absolutePoints[0].y=e.sourcePoint.y,e.absolutePoints[e.absolutePoints.length-1].y=e.targetPoint.y},e.prototype.adjustSegmentPoints=function(e,t,n){"TopToBottom"!==n.layout.orientation&&"BottomToTop"!==n.layout.orientation||(e[0].x=t[0].x,e[1].x=t[1].x,e[e.length-1].x=t[t.length-1].x,e[e.length-2].x=t[t.length-2].x,"TopToBottom"===n.layout.orientation?(e[e.length-2].y=e[e.length-1].y-n.layout.verticalSpacing/2,e[1].y=e[0].y+n.layout.verticalSpacing/2):(e[1].y=e[0].y-n.layout.verticalSpacing/2,e[e.length-2].y=e[e.length-1].y+n.layout.verticalSpacing/2),e[2].y=e[1].y,e[e.length-3].y=e[e.length-2].y),"RightToLeft"!==n.layout.orientation&&"LeftToRight"!==n.layout.orientation||(e[0]=t[0],e[1]=t[1],e[e.length-1]=t[t.length-1],e[e.length-2]=t[t.length-2],"RightToLeft"===n.layout.orientation&&(e[1].x=e[0].x-n.layout.verticalSpacing/2),"LeftToRight"===n.layout.orientation&&(e[1].x=e[0].x+n.layout.verticalSpacing/2),e[2].x=e[1].x,"RightToLeft"===n.layout.orientation&&(e[e.length-2].x=e[e.length-1].x+n.layout.verticalSpacing/2),"LeftToRight"===n.layout.orientation&&(e[e.length-2].x=e[e.length-1].x-n.layout.verticalSpacing/2),e[e.length-3].x=e[e.length-2].x)},e.prototype.updateConnectorSegmentPoints=function(e,t){if(e.length>1)if("TopToBottom"===t.layout.orientation||"BottomToTop"===t.layout.orientation)for(var n=1;n<e.length-1;n+=2)e[n].y===e[n+1].y||"TopToBottom"!==t.layout.orientation&&"BottomToTop"!==t.layout.orientation||(e[n+1].y=e[n].y);else{var i=!1;for(n=e.length-1;n>1;n=n-=2)"RightToLeft"===t.layout.orientation||"LeftToRight"===t.layout.orientation?i?(e[n-2].x=e[n-1].x,i=!1):(e[n-1].x=e[n-2].x,i=!0):e[n+1].x=e[n].x}},e.prototype.updateConnectorSegmentPoint=function(e,t){for(var n=[],i=0;i<e.absolutePoints.length-1;i++){var o=e.absolutePoints[i],r=e.absolutePoints[i+1],a=Cv(o,r),l=wv(o,r);i===e.absolutePoints.length-2&&("TopToBottom"===t.layout.orientation&&"Bottom"===l||"RightToLeft"===t.layout.orientation&&"Left"===l||"LeftToRight"===t.layout.orientation&&"Right"===l||"BottomToTop"===t.layout.orientation&&"Top"===l)&&(a/=2);var s=new Af(e,"segments",{type:"Orthogonal"},!0);s.length=a,s.direction=l,n.push(s)}e.segments=n,e.type="Orthogonal",t.connectorPropertyChange(e,{},{type:"Orthogonal",segments:e.segments})},e.prototype.resetConnectorSegments=function(e){for(var t=e.segments,n=t.length;n>1;n--)t.splice(n-1,1)},e.prototype.resetRoutingSegments=function(e,t,n){var i;e.levelSkip&&(this.getConnectorPoints(e,t),this.updateConnectorSegmentPoints(i=e.absolutePoints,t),this.adjustSegmentPoints(i,n,t),this.updateConnectorSegmentPoint(e,t))},e.prototype.arrangeElements=function(e,t){var n=e.model.layout,i="LeftToRight"===t.orientation||"RightToLeft"===t.orientation?n.verticalSpacing:n.horizontalSpacing;this.groupLayoutCells(e),this.createMatrixCells(e);for(var o=0;o<e.matrix.length;o++)for(var r=e.matrix[e.matrix[o].key].value,a=1;a<r.length;a++){var l=r[a-1];(c=r[a]).offset+=l.offset+l.size/2+i+c.size/2}for(o=0;o<e.matrix[0].value.length;o++)this.arrangeMatrix(e.matrix[0].value[o],null,e);for(var s=0;s<e.matrix.length;s++){var d=e.matrix[s].value;for(a=0;a<d.length;a++){var c;if((c=d[a]).visitedParents.length>1){var u=c.visitedParents[0],h=c.visitedParents[c.visitedParents.length-1],p=this.findParentVertexCellGroup(u),f=this.findParentVertexCellGroup(h);u!==p&&p.offset<u.offset&&(u=p),h!==f&&f.offset>h.offset&&(h=p);var g=(u.offset+h.offset)/2,m=c.initialOffset,v=c.offset;v!==m&&(g>=m&&g<=v?this.translateMatrixCells(g-c.offset,c):g<m&&this.translateMatrixCells(m-c.offset,c))}}}this.setXYforMatrixCell(e)},e.prototype.findParentVertexCellGroup=function(e){return e.cells[0]?e:e.parents.length>0?this.findParentVertexCellGroup(e.parents[0]):e},e.prototype.setXYforMatrixCell=function(e){for(var t=e.model.layout,n="LeftToRight"===t.orientation||"RightToLeft"===t.orientation,i=n?t.verticalSpacing:t.horizontalSpacing,o=0;o<e.matrix.length;o++)for(var r=e.matrix[o].value,a=0;a<r.length;a++)for(var l=r[a],s=l.offset-l.size/2,d=0;d<l.cells.length;d++){var c=l.cells[d],u=this.getType(c.type);if("internalVertex"===u){var h=c.cell.geometry.width,p=c.cell.geometry.height;c.cell.geometry=n?new Zd(e.rowOffset[l.level]-h/2,s,h,p):new Zd(s,e.rowOffset[l.level]-p/2,h,p),s+=(n?p:h)+i}else if("internalEdge"===u){var f=c,g=l.visitedParents[0];if(g)for(var m=0;m<g.visitedChildren.length;m++){for(var v=g.visitedChildren[m],y=[],b=0;b<v.cells.length;b++){var w=v.cells[b];"internalVertex"===this.getType(w.type)&&y.push(w)}if(y.length>0)break}for(b=0;b<f.edges.length;b++){var C=f.edges[b],x=this.getPointvalue(s+.5,e.rowOffset[l.level]);if(n&&(x=this.getPointvalue(e.rowOffset[l.level],s+.5)),this.containsValue(this.getEdgeMapper(),C)){var S=void 0;for(m=0;m<this.getEdgeMapper().length;m++)if(this.getEdgeMapper()[m].key===C){S=m;break}this.getEdgeMapper()[S].value.push(x)}s+=6}s+=i}}},e.prototype.getEdgeMapper=function(){return this.edgeMapper},e.prototype.setEdgeMapper=function(e){this.edgeMapper.push(e)},e.prototype.translateMatrixCells=function(e,t){if(0!==e&&(t.offset+=e,t.visitedChildren.length>0))for(var n=0;n<t.visitedChildren.length;n++)this.translateMatrixCells(e,t.visitedChildren[n])},e.prototype.groupLayoutCells=function(e){for(var t=e.model.ranks,n=t.length-1;n>=0;n--){for(var i=[],o=0;o<t[n].length;o++)"internalVertex"===this.getType((l=t[n][o]).type)&&i.push(t[n][o]);for(var r=[],a=0;a<t[n].length;a++){var l;"internalEdge"===this.getType((l=t[n][a]).type)&&r.push(l)}for(;i.length>1;){for(var s=i[0],d=this.selectIds(s.connectsAsTarget,!0),c=this.selectIds(s.connectsAsSource,!1);i.length>1;){var u=i[1],h=this.selectIds(u.connectsAsTarget,!0),p=this.selectIds(u.connectsAsSource,!1),f=this.compareLists(d,h),g=this.compareLists(c,p);if(!f||!g)break;this.updateMutualSharing(i[0],u.id),this.updateMutualSharing(i[1],s.id),i.splice(1,1)}i.splice(0,1)}for(;r.length>1;){var m=r[0],v=m.source,y=m.target;if(null!=v.identicalSibiling){for(var b=[],w=0;w<r.length;w++){var C=r[w];C.target===y&&b.push(C)}for(w=0;w<b.length;w++){var x=b[w];this.containsValue(v.identicalSibiling,x.source.id)&&(x.source.identicalSibiling=null)}m.source.identicalSibiling=null}r.splice(0,1)}}},e.prototype.getType=function(e){return"internalVertex"===e?"internalVertex":"internalEdge"},e.prototype.selectIds=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i];n.push(t?o.source.id:o.target.id)}return n},e.prototype.compareLists=function(e,t){var n=e.slice(),i=t.slice();if(n.length===i.length){if(0===n.length)return!0;for(var o=!0,r=0;r<i.length;r++)for(var a=i[r],l=r;l<n.length;l++)if(n[l]!==a){o=!1;break}return o}return!1},e.prototype.updateMutualSharing=function(e,t){null!=e.identicalSibiling?e.identicalSibiling.push(t):(e.identicalSibiling=[],e.identicalSibiling.push(t))},e.prototype.matrixCellGroup=function(e){return e.level=e.level,e.parents=e.parents,e.children=e.children,e.visitedChildren=e.visitedChildren,e.visitedParents=e.visitedParents,e.ignoredChildren=e.ignoredChildren,e.cells=e.cells,e.offset=e.offset,e.initialOffset=e.initialOffset,e},e.prototype.getPointvalue=function(e,t){return{x:Number(e)||0,y:Number(t)||0}},e.prototype.containsValue=function(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t||e[n]===t)return!0;return!1},e.prototype.createMatrixCells=function(e){for(var t=e.model.layout,n="LeftToRight"===t.orientation||"RightToLeft"===t.orientation,i=n?t.verticalSpacing:t.horizontalSpacing,o=n?t.horizontalSpacing:t.verticalSpacing,r=e.model.ranks,a=[],l=-o,s=r.length-1;s>=0;s--){var d=0,c=r.length-1-s,u=r[s].slice(),h=[];e.matrix.push({key:c,value:h});var p=[];for(a.push({index:c,value:p});u.length>0;){var f=u[0],g=this.matrixCellGroup({level:c,parents:[],children:[],visitedParents:[],visitedChildren:[],ignoredChildren:[],cells:[],size:0,offset:0,initialOffset:0});h.push(g);var m=this.getType(f.type);if("internalVertex"===m){if(g.cells.push(f),null!=f.identicalSibiling)for(var v=0;v<u.length&&!("internalVertex"===this.getType((y=u[v]).type)&&this.containsValue(f.identicalSibiling,y.id)&&(g.cells.push(y),g.cells.length>f.identicalSibiling.length));v++);for(v=0;v<g.cells.length;v++){var y;if("internalVertex"===this.getType((y=g.cells[v]).type)){var b=y.cell.geometry;if(g.size+=n?b.height:b.width,d=Math.max(d,n?b.width:b.height),p.push({key:y.id,value:g}),y.connectsAsTarget.length>0)for(var w=0;w<y.connectsAsTarget.length;w++){var C=y.connectsAsTarget[w],x=null;if(this.containsValue(a[c-1].value,C.ids)?x=C.ids:this.containsValue(a[c-1].value,C.source.id)&&(x=C.source.id),null!=x){for(var S=a[c-1].value,T=void 0,E=0;E<S.length;E++)if(S[E].key==x){T=S[E].value;break}this.containsValue(g.parents,T)||g.parents.push(T),this.containsValue(T.children,g)||T.children.push(g)}}u.reverse(),u.pop(),u.reverse()}}g.size+=(g.cells.length-1)*i}else if("internalEdge"===m){for(g.cells.push(f),v=0;v<g.cells.length;v++){var _=g.cells[v];if("internalEdge"===this.getType(_.type)&&null!=_.edges){var k=-5;for(w=0;w<_.edges.length;w++)k+=6;g.size+=k}if(p.push({key:_.ids,value:g}),x=null,this.containsValue(a[c-1].value,_.ids)?x=_.ids:this.containsValue(a[c-1].value,_.source.id)&&(x=_.source.id),null!=x){var D=a[c-1].value;for(T=void 0,E=0;E<D.length;E++)if(D[E].key==x){T=D[E].value;break}this.containsValue(g.parents,T)||g.parents.push(T),this.containsValue(T.children,g)||T.children.push(g)}u.reverse(),u.pop(),u.reverse()}g.size+=(g.cells.length-1)*i}}e.rowOffset.push(l+d/2+o),l+=d+o}},e.prototype.updateLayout=function(e,t,n,i,o,r){var a=(e.x-t.width)/2-t.x,l=(e.y-t.height)/2-t.y;a=Math.round(a),l=Math.round(l);for(var s=[],d=new Zd(t.x+a,t.y+l,t.width,t.height),c=n.margin,u="RightToLeft"===i.orientation||"LeftToRight"===i.orientation?i.horizontalSpacing:i.verticalSpacing,h=0;h<o.length;h++){var p=o[h];if(null!=p.outEdges&&p.outEdges.length>0)for(var f=p.outEdges.length,g=0;g<f;g++){if((I=r[p.outEdges[g]]).pointCollection=[],f>1){for(var m=u/2,v=null,y=void 0,b=this.getEdgeMapper(),w=0;w<b.length;w++)if(b[w].key===I){y=w;break}if(b[y].value.length>0){var C=b[y].value[0],x=C.x+c.left,S=C.y+c.top,T=x,E=S;"BottomToTop"===i.orientation?E=t.height-S:"RightToLeft"===i.orientation&&(T=t.width-x),v=this.getPointvalue(T+=a,E+=l)}for(var _=[],k=0;k<I.segments.length;k++){var D=I.segments[k].points;for(var A in D)_.push(D[A])}_=this.updateConnectorPoints(_,m,v,d,i.orientation);for(var O=0;O<_.length;O++)I.pointCollection.push(this.getPointvalue((D=_[O]).x,D.y));this.resetConnectorPoints(I,this.diagram)}s.push(I)}if(null!=p.inEdges&&p.inEdges.length>1)for(f=p.inEdges.length,b=this.getEdgeMapper(),g=0;g<f;g++){var I;if(this.containsValue(s,I=r[p.inEdges[g]])||(I.pointCollection=[]),f>1){for(m=u/2,v=null,y=void 0,w=void 0,w=0;w<b.length;w++)if(b[w].key===I){y=w;break}if(b[y].value.length>0&&!this.containsValue(s,I)){var P=b[w].value[0],R=P.x+c.left,M=P.y+c.top;T=R,E=M,"BottomToTop"===i.orientation?E=t.height-M:"RightToLeft"===i.orientation&&(T=t.width-R),v=this.getPointvalue(T+=a,E+=l)}for(_=[],O=0;O<I.segments.length;O++)for(var A in D=I.segments[O].points)_.push(D[A]);for(_.reverse(),(_=this.updateConnectorPoints(_,m,v,d,n.orientation)).reverse(),I.pointCollection=[],O=0;O<_.length;O++)I.pointCollection.push(this.getPointvalue((D=_[O]).x,D.y));this.resetConnectorPoints(I,this.diagram)}}}},e}(),bC=function(){function e(){this.isAnimation=!1}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"OrganizationalChart"},e.prototype.updateLayout=function(e,t,n,i,o,r){var a={type:n.type,nameTable:t,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:n.orientation,horizontalSpacing:n.horizontalSpacing,verticalSpacing:n.verticalSpacing,verticalAlignment:n.verticalAlignment,horizontalAlignment:n.horizontalAlignment,fixedNode:n.fixedNode,getLayoutInfo:rb(n.getLayoutInfo),layoutInfo:n.layoutInfo,margin:n.margin,bounds:n.bounds,objects:[],root:n.root};return this.doLayout(a,e,i,o,r),a},e.prototype.doLayout=function(e,t,n,i,o){var r,a,l=[];for(e.nameTable[e.root]&&e.firstLevelNodes.push(e.nameTable[e.root]),a=0;a<t.length;a++)(r=t[a]).excludeFromLayout||((e.graphNodes[r.id]=this.setUpLayoutInfo(e,r)).tree.hasSubTree=!1,e.nameTable[e.root]||r.inEdges&&r.inEdges.length)||(r.parentId||r.processId||l.push(r),r.data&&String(r.data[i])===e.root&&e.firstLevelNodes.push(r));for(0===e.firstLevelNodes.length&&(e.firstLevelNodes=l),a=0;a<e.firstLevelNodes.length;a++)this.updateEdges(e,r=e.firstLevelNodes[a],1,o,t);if(e.firstLevelNodes.length>0){e.rootNode=e.firstLevelNodes[0];var s=0,d=0,c=void 0,u=void 0,h=void 0,p=void 0,f=void 0;for(a=0;a<e.firstLevelNodes.length;a++){f=this.updateTree(e,s,d,e.firstLevelNodes[a],0,e.firstLevelNodes[a-1]);var g=e.graphNodes[e.firstLevelNodes[a].id];f.y=Math.min(f.y,g.y),f.x=Math.min(f.x,g.x),-1!==e.orientation.indexOf("Left")?d=f.right+e.horizontalSpacing:s=f.right+e.horizontalSpacing,0===a?(c=f.x,p=f.y,h=f.right,u=f.bottom):(c=Math.min(c,f.x),p=Math.min(p,f.y),h=Math.max(h,f.right),u=Math.max(u,f.bottom))}for(this.updateAnchor(e,{x:c,y:p,right:h,bottom:u},n),a=0;a<e.firstLevelNodes.length;a++)this.updateNodes(e,e.firstLevelNodes[a],0);for(a=0;a<e.firstLevelNodes.length;a++)this.updateConnectors(e,e.firstLevelNodes[a],1)}},e.prototype.getBounds=function(e){return new Zd(e.offsetX-e.actualSize.width*e.pivot.x,e.offsetY-e.actualSize.height*e.pivot.y,e.actualSize.width,e.actualSize.height)},e.prototype.updateTree=function(e,t,n,i,o,r,a){var l,s,d,c,u={};if(l=this.getDimensions(e,i,t,n,o),u=e.graphNodes[i.id],e.maxLevel=Math.max(e.maxLevel,o),s=o,(c=this.hasChild(e,i))||u.tree.assistants.length){var h=void 0,p=void 0,f=void 0,g=void 0,m=void 0;return m=l.y+l.height+e.verticalSpacing,u.tree.assistants.length&&(s=(d=this.setDepthSpaceForAssitants(e,i,m,l.height,o,e.verticalSpacing)).level,m=d.bottom),u.tree.assistants.length||"Horizontal"===u.tree.orientation||(m=l.y+l.height+e.verticalSpacing/2),u.tree.children.length&&(h="Horizontal"!==u.tree.orientation||"Balanced"===u.tree.type&&1!==u.tree.children.length?"Balanced"===u.tree.type?this.updateHorizontalTreeWithMultipleRows(e,i,r,l.x,m,s):this.updateVerticalTree(e,i,l.x,m,s,a):this.updateHorizontalTree(e,i,r,l.x,m,s)),u.y&&u.y>l.y||(u.y=l.y),u.mid&&(t=u.mid),u.tree.assistants.length&&(g=this.setBreadthSpaceForAssistants(e,i,l,void 0!==t?t:l.x,m,o),c||(t=((p=h=g).x+p.right)/2-l.width/2,h=p),f=g?g.canMoveBy:void 0),u.x=t,u.translate||(u.treeWidth=h.right-h.x),this.translateSubTree({layout:e,shape:i,shapeBounds:{x:t,y:l.y,right:t+l.width,bottom:l.y+l.height},treeBounds:h,dim:l,level:o},f,void 0!==r,a),u.firstChild&&"string"!=typeof u.firstChild&&(u.firstChild.x+=u.subTreeTranslation),i.treeBounds=h,h}return i.treeBounds=this.updateLeafNode(e,i,r,l,o,a),i.treeBounds},e.prototype.updateLeafNode=function(e,t,n,i,o,r){var a,l=e.graphNodes[t.id];return l.x=i.x,l.y&&l.y>i.y||(l.y=i.y,l.maxLevel=Math.max(o,l.maxLevel||0)),a={x:i.x,y:i.y,right:i.x+i.width,bottom:i.y+i.height},l.maxLevel=Math.max(l.maxLevel||0,o),this.translateSubTree({layout:e,shape:t,shapeBounds:a,treeBounds:a,dim:i,level:o},void 0,void 0!==n,r),{x:l.x,y:l.y,right:l.x+i.width,bottom:l.y+i.height}},e.prototype.setUpLayoutInfo=function(e,t){var n={subTreeTranslation:0};return n.tree="OrganizationalChart"===e.type?{orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:{orientation:"Horizontal",type:"Center",enableRouting:!0},n.tree.children=[],n.tree.assistants=[],n.tree.level=0,n.translate=!0,n},e.prototype.translateSubTree=function(e,t,n,i){var o=e.layout,r=e.shape,a=e.shapeBounds,l=e.treeBounds,s=e.level,d=e.dim,c=o.graphNodes[r.id],u=o.nameTable[c.firstChild?c.firstChild.child:c.tree.children[0]],h=u?o.graphNodes[u.id]:null,p=this.hasChild(o,r),f=this.findIntersectingLevels(o,a,s,c.actualLevel),g=this.findIntersectingLevels(o,l,s,c.actualLevel),m=[];f.length&&c.translate?(c.intersect=f,this.spaceLeftFromPrevSubTree(o,r,a),c.canMoveBy=c.diff,void 0!==t&&(c.canMoveBy=Math.min(t,c.canMoveBy)),u&&void 0!==h.canMoveBy&&(h.canMoveBy>=c.canMoveBy&&(c.translated=!0),c.canMoveBy=Math.min(c.canMoveBy,h.canMoveBy)),n&&(c.x-=c.canMoveBy,c.subTreeTranslation-=c.canMoveBy,p&&(this.shiftSubordinates(o,g,c.canMoveBy),l.x=Math.min(l.x,c.x),l.right=Math.max(l.right,c.x+d.width),l.bottom=Math.max(l.bottom,c.y+d.height),l.x-=c.canMoveBy,l.right-=c.canMoveBy),u&&h.canMoveBy>c.canMoveBy?c.canMoveBy=h.canMoveBy-c.canMoveBy:u&&void 0!==c.canMoveBy&&(c.canMoveBy=0))):(p&&(l.x=Math.min(l.x,a.x),l.right=Math.max(l.right,a.x+d.width),l.bottom=Math.max(l.bottom,c.y+d.height)),c.translate||(c.canMoveBy=0,c.subTreeTranslation=0)),i||(m.push({rBounds:a={x:c.x,y:d.y,right:c.x+d.width,bottom:d.y+d.height}}),this.updateRearBounds(o,r,m,s))},e.prototype.updateRearBounds=function(e,t,n,i,o){var r,a,l,s,d,c,u=!0,h={};if(t&&(o=(h=e.graphNodes[t.id]).intersect,u=!h.tree.children.length&&!h.tree.assistants.length),s=n[0].rBounds,d=n[n.length-1].rBounds,o&&o.length){for(c=(r=e.levels[o[0]].rBounds).bottom,r.y<s.y&&(r.bottom=s.y,n.splice(0,0,{rBounds:r})),c>d.bottom?n.push({rBounds:{x:r.x,right:r.right,y:s.bottom,bottom:c}}):(r=e.levels[o[o.length-1]].rBounds,u&&r.bottom>d.bottom&&(r.y=d.bottom,n.push({rBounds:r}))),a=o[0],l=n.length-1;l>=0;l--)e.levels.splice(a,0,n[l]);e.levels.splice(a+=n.length,o.length)}else for(a=this.findLevel(e,n[n.length-1].rBounds,i),l=n.length-1;l>=0;l--)e.levels.splice(a,0,n[l])},e.prototype.shiftSubordinates=function(e,t,n){var i;if(0!==n)for(i=0;i<t.length;i++)e.levels[t[i]].rBounds&&(e.levels[t[i]].rBounds.x-=n,e.levels[t[i]].rBounds.right-=n)},e.prototype.setDepthSpaceForAssitants=function(e,t,n,i,o,r){var a,l,s,d,c=e.graphNodes[t.id],u={};for(d=n,l=0;l<c.tree.assistants.length;l++)(u=e.graphNodes[c.tree.assistants[l]])&&(u.tree.children=u.tree.assistants=[],u.y=n,a=(s=e.nameTable[c.tree.assistants[l]]).actualSize.height,-1!==e.orientation.indexOf("Left")&&(a=s.actualSize.width),d=n+a+r/2,e.maxLevel=o+1,l%2==1&&l!==c.tree.assistants.length-1&&(n=d,o++));return{level:e.maxLevel,bottom:n+a+r}},e.prototype.setBreadthSpaceForAssistants=function(e,t,n,i,o,r){var a,l,s,d,c,u,h={},p=e.graphNodes[t.id],f=r,g={x:0,y:0,right:0,bottom:0};for(d=0;d<p.tree.assistants.length;d++)(h=e.graphNodes[p.tree.assistants[d]])&&(a=(s=e.nameTable[p.tree.assistants[d]]).actualSize.width,-1!==e.orientation.indexOf("Left")&&(a=s.actualSize.height),l=this.updateTree(e,d%2==0?i+n.width/2-20-a:i+n.width/2+20,h.y,e.nameTable[p.tree.assistants[d]],f+1),this.hasChild(e,t)||(0===d?g=l:this.uniteRects(g,l)),d%2==0&&h.prevBounds&&(c=void 0===c?h.canMoveBy:Math.min(c,h.canMoveBy)),d%2!=1&&d!==p.tree.assistants.length-1||(u=this.findIntersectingLevels(e,l,f+1),this.updateRearBounds(e,null,[{rBounds:l}],f+1,u),f++));return g&&(g.canMoveBy=c),g},e.prototype.getDimensions=function(e,t,n,i,o){var r,a,l;(r=t.actualSize.width,a=t.actualSize.height,-1!==e.orientation.indexOf("Left"))&&(o||(l=n,n=i,i=l),a=t.actualSize.width,r=t.actualSize.height);return{x:n,y:i,width:r,height:a}},e.prototype.hasChild=function(e,t){var n=e.graphNodes[t.id];return n?n.tree.children&&n.tree.children.length:0},e.prototype.updateHorizontalTree=function(e,t,n,i,o,r){var a;a=this.getDimensions(e,t,i,o,r);var l,s={},d=(s=e.graphNodes[t.id]).tree.type;l=r;var c,u,h,p,f,g,m,v,y,b,w,C,x,S,T,E=0;if(E=i,c=o,e.levels.slice(0,e.levels.length),this.hasChild(e,t)){var _;for(_=-1!==e.orientation.indexOf("Left"),x=0;x<s.tree.children.length;x++)u=(p=e.nameTable[s.tree.children[x]]).actualSize.width,h=p.actualSize.height,g=_?h:u,m=_?u:h,f=this.updateTree(e,E,c,p,l+1,e.nameTable[s.tree.children[x-1]]),S=e.graphNodes[p.id],s.maxLevel=Math.max(s.maxLevel||0,S.maxLevel||0),y={x:S.x,y:S.y,right:S.x+g,bottom:S.y+m},0===x&&(v={x:Math.min(S.x,f.x),y:Math.min(S.y,f.y),right:f.right,bottom:f.bottom},T=S),C?(C.x=y.x,C.y=y.y,y.right>C.right&&(C.right=y.right),C.bottom=y.bottom):C=y,0===x&&(s.firstChild={x:S.x,canMoveBy:S.canMoveBy,child:p.id}),this.hasChild(e,p)&&(!s.firstChild||s.firstChild.x>=S.firstChild.x?(S.firstChild&&s.firstChild.canMoveBy<S.canMoveBy&&(S.canMoveBy=w=s.firstChild.canMoveBy,e.graphNodes[s.firstChild.child].canMoveBy=w,s.firstChild.canMoveBy=w),s.firstChild={x:S.firstChild.x,canMoveBy:void 0!==w?w:S.canMoveBy,child:p.id}):S.firstChild&&S.translated&&s.firstChild.canMoveBy>S.canMoveBy&&(s.firstChild.canMoveBy=e.graphNodes[s.firstChild.child].canMoveBy=S.canMoveBy)),b=b?Math.max(S.maxLevel,b):S.maxLevel,this.uniteRects(v,f),E=0!==x&&!this.hasChild(e,p)&&S.subTreeTranslation<0?f.right-S.subTreeTranslation+e.horizontalSpacing:f.right+e.horizontalSpacing;isNaN(void 0)||(T.canMoveBy=void 0),s.mid=(T.x+C.right)/2-a.width/2,"Left"===d?s.mid=y.right-a.width:"Right"===d&&(s.mid=i)}return v},e.prototype.updateHorizontalTreeWithMultipleRows=function(e,t,n,i,o,r){var a,l,s,d,c,u,h,p,f,g,m=this.getDimensions(e,t,i,o,r),v=e.graphNodes[t.id],y=r,b=i,w=o,C=(e.levels.slice(0,e.levels.length),0);if(this.hasChild(e,t)){var x=-1!==e.orientation.indexOf("Left"),S=void 0,T=this.splitChildrenInRows(e,t),E=5===v.tree.children.length&&3===T[0].length,_=[],k=[];E?k=T:this.splitRows(T,_,k);var D={leftTree:_,rows:T,rightTree:k,dimensions:m},A=this.updateLeftTree(e,D,t,i,w,y);c=D.bounds;var O=void 0;void 0!==A&&(v.mid=(A||0)+(void 0!==A?e.horizontalSpacing/2:0)-m.width/2,O=A+e.horizontalSpacing),w=o;var I=void 0;for(I=[],p=0;p<k.length;p++)for(b=T[p].length%2==1&&p===k.length-1||E?i:O||i,0!==p&&(w=I[p-1].bottom+e.verticalSpacing),h=0;h<k[p].length;h++)u=(a=e.nameTable[k[p][h]]).actualSize.width,d=x?a.actualSize.height:u,(l=e.graphNodes[a.id]).actualLevel=y+1+p,0===h&&_[p]&&_[p].length&&(l.translate=!1),E&&1===p&&(0===h&&f+d+e.horizontalSpacing<=g&&(S=!0,b=f-d/2),S&&1===h&&(b=g-d/2)),s=this.updateTree(e,b,w,a,y+1,e.nameTable[k[p][h-1]]),E&&h<=2&&0===p&&1===h&&(f=s.x-e.horizontalSpacing/2,g=s.x+d+e.horizontalSpacing/2),0===h?I[p]={x:s.x,y:s.y,right:s.right,bottom:s.bottom}:this.uniteRects(I[p],s),c||(c={x:I[p].x,y:I[p].y,right:I[p].right,bottom:I[p].bottom}),this.uniteRects(c,I[p]),b=s.right+e.horizontalSpacing,(!v.firstChild||(p===k.length-1&&T[p].length%2==1||E)&&0===h&&void 0!==l.canMoveBy&&C>l.canMoveBy)&&(C=Math.min(C,l.canMoveBy||0),v.firstChild={x:l.x,child:a.id,canMoveBy:l.canMoveBy}),D.leftCenter=f,D.rightCenter=g,D.align=S,D.level=y,D.rightBounds=I,this.alignRowsToCenter(e,p,t,D,O)}return c},e.prototype.updateLeftTree=function(e,t,n,i,o,r){for(var a,l,s,d,c,u=t.leftTree,h=e.graphNodes[n.id],p=[],f=(e.orientation.indexOf("Left"),0);f<u.length&&u[f].length;f++){a=i,p[f-1]&&(o=p[f-1].bottom+e.verticalSpacing);for(var g=0;g<u[f].length;g++){var m=e.nameTable[u[f][g]],v=e.graphNodes[m.id];v.actualLevel=r+1+f,d=this.updateTree(e,a,o,m,r+1,e.nameTable[u[f][g-1]]),0===g?p[f]={x:d.x,y:d.y,right:d.right,bottom:d.bottom}:this.uniteRects(p[f],d),0===f&&0===g?(l=v.canMoveBy,h.firstChild={x:v.x,child:m.id,canMoveBy:v.canMoveBy}):0===g&&void 0!==v.canMoveBy&&l>v.canMoveBy&&(l=Math.min(l,v.canMoveBy||0),h.firstChild={x:v.x,child:m.id,canMoveBy:v.canMoveBy}),a=d.right+e.horizontalSpacing}s=0===f?p[f].right:Math.max(s,p[f].right)}for(f=0;f<u.length&&u[f].length;f++){if(s!==p[f].right){var y=s-p[f].right;for(g=0;g<u[f].length;g++)e.graphNodes[u[f][g]].x+=y}0===f?c={x:p[0].x,y:p[0].y,right:p[0].right,bottom:p[0].bottom}:this.uniteRects(c,p[f])}return t.bounds=c,s},e.prototype.alignRowsToCenter=function(e,t,n,i,o){var r,a,l,s=e.graphNodes[n.id],d=i.rows,c=i.rightTree,u=i.leftCenter,h=i.rightCenter,p=i.align,f=i.rightBounds,g=i.dimensions,m=i.level,v=5===s.tree.children.length&&3===d[0].length;if(v&&1===t&&(r=f[0].right-f[0].x>=f[1].right-f[1].x?0:1),t===d.length-1&&(d[t].length%2==1||v&&1===t)){a=c[t][Math.floor(c[t].length/2)];var y,b=e.graphNodes[a].x;y=this.getDimensions(e,e.nameTable[a],b,e.graphNodes[a].y,m+1),l=void 0,!p&&v?(1===r&&(t=0),l=(f[r].x+f[r].right)/2-(f[t].x+f[t].right)/2,0===t&&(s.mid+=l)):v||void 0===o||(l=o-e.horizontalSpacing/2-(b+y.width/2)),void 0!==l&&this.updateRearBoundsOfTree(e,c[t],l,g),v&&(s.mid=(h+u)/2+(0===t?l:0)-g.width/2),void 0===s.mid&&e.graphNodes[a]&&(s.mid=b),p=!1,t++}},e.prototype.updateRearBoundsOfTree=function(e,t,n,i){for(var o=0;o<t.length;o++){var r=e.graphNodes[t[o]];if(r.x+=n,r.canMoveBy+=n,o===t.length-1){var a={x:r.x,y:r.y,right:r.x+i.width,bottom:r.y+i.height},l=this.findIntersectingLevels(e,a,r.actualLevel);this.updateRearBounds(e,null,[{rBounds:a}],r.actualLevel,l)}}},e.prototype.splitRows=function(e,t,n){for(var i=0;i<e.length;i++){t[i]=[],n[i]=[];var o=void 0;if(o=e[i].length,e[i].length%2!=1){o=Math.ceil(e[i].length/2);for(var r=0;r<o;r++)t[i].push(e[i][r])}for(var a=t[i].length;a<e[i].length;a++)n[i].push(e[i][a])}},e.prototype.updateVerticalTree=function(e,t,n,i,o,r){this.getDimensions(e,t,n,i,o);var a,l,s,d,c,u,h,p,f,g,m,v,y,b=e.graphNodes[t.id],w=e.nameTable[b.tree.children[0]],C=-1!==e.orientation.indexOf("Left"),x="Left"===b.tree.type?-1:0,S=n,T=i;g=o;var E,_=[],k=[];for(m=0;m<b.tree.children.length;m++){if("Alternate"===b.tree.type&&(y=m%2==0&&b.tree.children.length>2?"Left":"Right",x=m%2==0&&b.tree.children.length>2?-1:0),S=n+this.findOffset(e,t,b,y),a=e.nameTable[b.tree.children[m]],d=C?a.actualSize.height:a.actualSize.width,c=C?a.actualSize.width:a.actualSize.height,s=this.updateTree(e,S+x*d,T,a,o+1,void 0,!0),p={x:(l=e.graphNodes[a.id]).x,y:l.y,right:l.x+d,bottom:l.y+c},0===m?(this.uniteRects(s,p),h=s):this.uniteRects(h,s),!l.prevBounds||"Alternate"===b.tree.type&&m%2==1&&b.tree.children.length>2||(E=void 0!==E?Math.min(l.canMoveBy,E):l.canMoveBy),b.maxLevel=Math.max(b.maxLevel||0,l.maxLevel||0),"Alternate"===b.tree.type&&b.tree.children.length>2&&m%2==0?(0!==m&&(T=u.bottom+e.verticalSpacing/2),k.push({rBounds:p}),l.levelBounds&&(k=k.concat(l.levelBounds))):(T="Alternate"===b.tree.type&&b.tree.children.length>2?Math.max(s.bottom,u.bottom)+e.verticalSpacing/2:s.bottom+e.verticalSpacing/2,o=b.maxLevel,_.push({rBounds:p}),f?this.uniteRects(f,p):f={x:l.x,y:l.y,right:l.x+d,bottom:l.y+c},l.levelBounds&&(_=_.concat(l.levelBounds))),0===m&&(b.firstChild={x:l.x,canMoveBy:l.canMoveBy,child:a.id}),this.hasChild(e,a))if(!b.firstChild||b.firstChild.x>=l.firstChild.x){if(l.firstChild&&b.firstChild.canMoveBy<l.canMoveBy){var D=b.firstChild.canMoveBy;l.canMoveBy=D,e.graphNodes[b.firstChild.child].canMoveBy=D,b.firstChild.canMoveBy=D}b.firstChild={x:l.firstChild.x,canMoveBy:void 0!==E?E:l.canMoveBy,child:a.id}}else l.firstChild&&l.translated&&b.firstChild.canMoveBy>l.canMoveBy&&(b.firstChild.canMoveBy=e.graphNodes[b.firstChild.child].canMoveBy=l.canMoveBy);u=p}return r?b.levelBounds=_:("Alternate"===b.tree.type&&b.tree.children.length>2&&(v=this.findIntersectingLevels(e,{x:k[0].rBounds.x,y:k[0].rBounds.y,right:k[k.length-1].rBounds.right,bottom:k[k.length-1].rBounds.bottom},g+1),this.updateRearBounds(e,null,k,g+1,v)),v=this.findIntersectingLevels(e,f||h,g+1),this.updateRearBounds(e,null,f?_:[{rBounds:h}],g+1,v)),isNaN(E)||(e.graphNodes[w.id].canMoveBy=E),b.childBounds=h,b.mid=n,h},e.prototype.splitChildrenInRows=function(e,t){var n,i;i=4;var o,r=[];o=(n=e.graphNodes[t.id]).tree.children.length;var a,l=this.extend(n.tree.children);for(n.tree.rows?i=(a=n.tree.rows)%2==0?a:a-1:3===n.tree.children.length||4===n.tree.children.length?i=2:5===n.tree.children.length&&(i=3);o>0;)r[r.length]=l.splice(0,i),(o-=i)<i&&(o%2==0?i=o:1!==o&&(i=o-1),o<i&&(i=o));return r},e.prototype.extend=function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n},e.prototype.findOffset=function(e,t,n,i){var o=0,r=-1!==e.orientation.indexOf("Left")?t.actualSize.height:t.actualSize.width;switch(o=n.tree.offset||20,"Alternate"===n.tree.type&&o>=e.horizontalSpacing&&(o=e.horizontalSpacing/2),i||n.tree.type){case"Left":o=r/2-o;break;case"Right":o+=r/2}return o},e.prototype.uniteRects=function(e,t){e.x=Math.min(e.x,t.x),e.right=Math.max(e.right,t.right),e.bottom=Math.max(e.bottom,t.bottom)},e.prototype.spaceLeftFromPrevSubTree=function(e,t,n){var i,o,r,a;for(i=e.graphNodes[t.id],a=e.horizontalSpacing,r=0;r<i.intersect.length;r++)o=n.x-(e.levels[i.intersect[r]].rBounds.right+a),(void 0===i.diff||o<i.diff)&&(i.diff=o,i.prevBounds=e.levels[i.intersect[r]].rBounds)},e.prototype.findIntersectingLevels=function(e,t,n,i){var o,r,a,l;(o={x:t.x,y:t.y,right:t.right,bottom:t.bottom}).y-=e.verticalSpacing/2,o.bottom+=e.verticalSpacing/2,r=[],a=e.levels[l=void 0!==i?i:n]?e.levels[l].rBounds:null;do{if(a&&(o.y<a.y&&o.bottom>a.y||o.y<a.bottom&&a.bottom<o.bottom||o.y>=a.y&&o.bottom<=a.bottom||o.y<a.y&&o.bottom>a.bottom))r.splice(0,0,l);else if(a&&a.bottom<o.y)break;a=e.levels[--l]?e.levels[l].rBounds:null}while(l>=0);a=e.levels[l=(void 0!==i?i:n)+1]?e.levels[l].rBounds:null;do{if(a&&(o.y<a.y&&o.bottom>a.y||o.y<a.bottom&&a.bottom<o.bottom||o.y>=a.y&&o.bottom<=a.bottom||o.y<a.y&&o.bottom>a.bottom))r.push(l);else if(a&&a.y>o.bottom)break;a=e.levels[++l]?e.levels[l].rBounds:null}while(l<=e.levels.length);return r},e.prototype.findLevel=function(e,t,n){var i,o,r;for(i=t,r=e.levels[o=0]?e.levels[o].rBounds:null;o<e.levels.length;){if(r&&i.bottom<r.y)return o;r=e.levels[++o]?e.levels[o].rBounds:null}return o},e.prototype.getParentNode=function(e,t){return e.nameTable[e.nameTable[t.inEdges[0]].sourceID]},e.prototype.updateEdges=function(e,t,n,i,o){var r,a;if(r=e.graphNodes[t.id],t.outEdges&&t.outEdges.length&&(t.isExpanded||i===Mc.Render))for(a=0;a<t.outEdges.length;a++){var l;(l=e.nameTable[e.nameTable[t.outEdges[a]].targetID])&&!l.excludeFromLayout&&(-1===r.tree.children.indexOf(l.id)&&r.tree.children.push(l.id),l.outEdges&&l.outEdges.length&&l.isExpanded&&(r.tree.hasSubTree=!0),this.updateEdges(e,l,n+1,i,o))}r.tree.level=n,r.tree.hasSubTree&&(r.tree.orientation="Horizontal",r.tree.type="Center"),(e.getLayoutInfo||e.layoutInfo)&&"OrganizationalChart"===e.type&&(e.getLayoutInfo?e.getLayoutInfo(t,r.tree):function(e,t,n,i){var o;if(t)for(var r=0,a=Object.keys(t);r<a.length;r++){var l=a[r];if(o=t[l],"getAssistantDetails"===l){if(i.data.Role===t[l].root)for(var s=t[l].assistants,d=0;d<s.length;d++)for(var c=0;c<n.length;c++)n[c].data.Role===s[d]&&(e.assistants.push(n[c].id),e.children.splice(0,1))}else o&&(e[l]=t[l])}!e.hasSubTree&&t.canEnableSubTree&&(e.orientation=i.layoutInfo.orientation,e.type=i.layoutInfo.type,i.layoutInfo.offset!==e.offset&&void 0!==i.layoutInfo.offset&&(e.offset=i.layoutInfo.offset)),i.layoutInfo.hasSubTree=e.hasSubTree}(r.tree,e.layoutInfo,o,t),"Balanced"===r.tree.type&&r.tree.hasSubTree&&(r.tree.type="Center",r.tree.orientation="Horizontal")),e.level&&"Alternate"!==r.tree.type&&n>=e.level&&(r.tree.hasSubTree=!1)},e.prototype.updateAnchor=function(e,t,n){var i,o,r,a=0,l=0,s=0,d=0,c=new Zd(0,0,n.x,n.y);r=e.bounds?e.bounds:c;var u=e.orientation;if(e.fixedNode){a=(o=e.nameTable[e.fixedNode]).actualSize.width,l=o.actualSize.height,e.anchorX=o.offsetX,e.anchorY=o.offsetY;var h=o.pivot;for(e.anchorX+="RightToLeft"===e.orientation?a*h.x:-a*h.x,e.anchorY+="BottomToTop"===e.orientation?l*h.y:-l*h.y,i=o,s=0;i.inEdges.length;)i=this.getParentNode(e,i),s+=e.graphNodes[i.id].subTreeTranslation||0;-1!==e.orientation.indexOf("Left")?(d=e.graphNodes[o.id].y,"LeftToRight"===u?e.anchorX-=d:e.anchorX+=d,e.anchorY-=e.graphNodes[o.id].x+s):(d=e.graphNodes[o.id].y,e.anchorX-=e.graphNodes[o.id].x+s,"TopToBottom"===u?e.anchorY-=d:e.anchorY+=d)}else if("TopToBottom"===u||"BottomToTop"===u){switch(e.horizontalAlignment){case"Left":e.anchorX=r.x-t.x+e.margin.left;break;case"Right":e.anchorX=r.x+r.width-e.margin.right-t.right;break;case"Auto":case"Center":e.anchorX=r.x+r.width/2-(t.x+t.right)/2}switch(e.verticalAlignment){case"Auto":case"Top":var p;p=r.y+e.margin.top,e.anchorY="TopToBottom"===u?p:t.bottom+p;break;case"Bottom":var f;f=r.y+r.height-e.margin.bottom,e.anchorY="TopToBottom"===u?f-t.bottom:f;break;case"Center":var g=void 0;g=r.y+r.height/2,e.anchorY="TopToBottom"===e.orientation?g-(t.y+t.bottom)/2:g+(t.y+t.bottom)/2}}else{switch(e.horizontalAlignment){case"Auto":case"Left":var m;m=r.x+e.margin.left,e.anchorX="LeftToRight"===u?m:t.bottom+m;break;case"Right":var v;v=r.x+r.width-e.margin.right,e.anchorX="LeftToRight"===u?v-t.bottom:v;break;case"Center":g=void 0,g=r.width/2+r.x,e.anchorX="LeftToRight"===e.orientation?g-(t.y+t.bottom)/2:g+(t.y+t.bottom)/2}switch(e.verticalAlignment){case"Top":e.anchorY=r.y+e.margin.top-t.x;break;case"Auto":case"Center":e.anchorY=r.y+r.height/2-(t.right+t.x)/2;break;case"Bottom":e.anchorY=r.y+r.height-e.margin.bottom-t.right}}},e.prototype.updateConnectors=function(e,t,n){var i,o,r,a;if(o=e.graphNodes[t.id],t.outEdges.length)for(i=0;i<t.outEdges.length;i++)(a=e.nameTable[t.outEdges[i]]).points=[],r=e.nameTable[a.targetID],a.visible&&(a.visited=!0,e.getConnectorSegments?e.getConnectorSegments(a):o&&-1!==o.tree.children.indexOf(a.targetID)&&(a.segments=[],"OrganizationalChart"===e.type&&"Orthogonal"===a.type&&this.updateSegments(e,a,t,r,i)),r&&(r.isExpanded||this.hasChild(e,r))&&this.updateConnectors(e,r,n+1));if(o&&o.tree.assistants.length)for(i=0;i<o.tree.assistants.length;i++)this.get3Points(e,t,r=e.nameTable[o.tree.assistants[i]],a=e.nameTable[r.inEdges[0]]),(r.isExpanded||this.hasChild(e,r))&&this.updateConnectors(e,r,n+1)},e.prototype.updateSegments=function(e,t,n,i,o){var r=e.graphNodes[n.id];r.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(e,n,i,t):"Horizontal"===r.tree.orientation&&"Balanced"===r.tree.type?this.updateSegmentsForBalancedTree(e,t,n,i,o):"Horizontal"===r.tree.orientation?this.updateSegmentsForHorizontalOrientation(e,n,i,t):r.tree.offset<5?this.get5Points(e,n,i,t):this.get3Points(e,n,i,t)},e.prototype.updateSegmentsForBalancedTree=function(e,t,n,i,o){var r,a=e.graphNodes[n.id];5===a.tree.children.length&&o>2?(r=a.tree.children[1],isNaN(e.graphNodes[r].treeWidth)&&(e.graphNodes[r].treeWidth=e.nameTable[r].actualSize.width),e.orientation.indexOf("Left"),this.getSegmentsForMultipleRows(e,n,i,t)):a.tree.children.length>5?o<4||o<a.tree.rows?this.getSegmentsForMultipleRows(e,n,i,t):this.updateSegmentsForHorizontalOrientation(e,n,i,t):4===a.tree.children.length?o<2||o<a.tree.rows?this.getSegmentsForMultipleRows(e,n,i,t):this.updateSegmentsForHorizontalOrientation(e,n,i,t):this.getSegmentsForMultipleRows(e,n,i,t)},e.prototype.get3Points=function(e,t,n,i){var o=[],r=this.getBounds(t),a=this.getBounds(n);if(-1!==e.orientation.indexOf("Top")){var l=0===e.orientation.indexOf("Top")?r.bottomCenter:r.topCenter;o.push(l,{x:r.bottomCenter.x,y:(s=t.offsetX>n.offsetX?a.middleRight:a.middleLeft).y},s)}else{var s;l=0===e.orientation.indexOf("Left")?r.middleRight:r.middleLeft,o.push(l,{x:a.bottomCenter.x,y:r.middleRight.y},s=t.offsetY>n.offsetY?a.bottomCenter:a.topCenter)}this.getSegmentsFromPoints(o,i)},e.prototype.get5Points=function(e,t,n,i){var o,r,a,l,s=[],d=this.getBounds(t),c=this.getBounds(n);-1!==e.orientation.indexOf("Top")?(o=t.offsetY<n.offsetY?d.bottomCenter:d.topCenter,l=e.verticalSpacing/4*(t.offsetY<n.offsetY?1:-1),a=e.horizontalSpacing/2*(t.offsetX>n.offsetX?1:-1),s.push(o,{x:o.x,y:o.y+l},{x:(r=t.offsetX>n.offsetX?c.middleRight:c.middleLeft).x+a,y:o.y+l},{x:r.x+a,y:r.y},r)):(o=t.offsetX>n.offsetX?d.middleLeft:d.middleRight,r=t.offsetY>n.offsetY?c.bottomCenter:c.topCenter,s.push(o,{x:o.x+(a=e.horizontalSpacing/4*(t.offsetX<n.offsetX?1:-1)),y:o.y},{x:o.x+a,y:o.y+(l=e.verticalSpacing/2*(t.offsetY>n.offsetY?1:-1))},{x:r.x,y:o.y+l},r)),this.getSegmentsFromPoints(s,i)},e.prototype.getSegmentsFromPoints=function(e,t){for(var n,i=[],o=0;o<e.length-2;o++)(n=new Af(t,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(e[o],e[o+1]),n.length=jd.distancePoints(e[o],e[o+1]),i.push(n);t.segments=i},e.prototype.getSegmentsForMultipleRows=function(e,t,n,i){var o,r,a=[],l=this.getBounds(n),s=this.getBounds(t);switch(e.orientation){case"TopToBottom":o={x:s.bottomCenter.x,y:s.bottomCenter.y+e.verticalSpacing/4},(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(s.bottomCenter,o),r.length=jd.distancePoints(s.bottomCenter,o),a.push(r);break;case"BottomToTop":o={x:s.bottomCenter.x,y:s.topCenter.y-e.verticalSpacing/4},(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(s.topCenter,o),r.length=jd.distancePoints(s.topCenter,o),a.push(r);break;case"LeftToRight":if(o={x:s.middleRight.x+e.verticalSpacing/4,y:s.middleRight.y},(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(s.middleRight,o),r.length=jd.distancePoints(s.middleRight,o),a.push(r),l.center.y!==s.center.y){var d={x:s.middleRight.x+e.verticalSpacing/4,y:l.middleLeft.y};(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(o,d),r.length=jd.distancePoints(o,d),a.push(r)}break;case"RightToLeft":if(o={x:s.middleLeft.x-e.verticalSpacing/4,y:s.middleRight.y},(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(s.middleLeft,o),r.length=jd.distancePoints(s.middleLeft,o),a.push(r),l.center.y!==s.center.y){var c={x:s.middleLeft.x-e.verticalSpacing/4,y:l.middleLeft.y};(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(c,c),r.length=jd.distancePoints(c,c),a.push(r)}}i.segments=a},e.prototype.updateSegmentsForHorizontalOrientation=function(e,t,n,i){var o,r,a=[],l=this.getBounds(t),s=this.getBounds(n);switch(e.orientation){case"TopToBottom":o={x:l.bottomCenter.x,y:s.topCenter.y-e.verticalSpacing/2},(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(l.bottomCenter,o),r.length=jd.distancePoints(l.bottomCenter,o),a.push(r);break;case"BottomToTop":o={x:l.topCenter.x,y:s.bottomCenter.y+e.verticalSpacing/2},(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(l.topCenter,o),r.length=jd.distancePoints(l.topCenter,o),a.push(r);break;case"LeftToRight":if(o={x:s.middleLeft.x-e.verticalSpacing/2,y:l.middleRight.y},(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(l.middleRight,o),r.length=jd.distancePoints(l.middleRight,o),a.push(r),s.center.y!==l.center.y){var d={x:s.middleLeft.x-e.verticalSpacing/2,y:s.middleLeft.y};(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(o,d),r.length=jd.distancePoints(o,d),a.push(r)}break;case"RightToLeft":if(o={x:s.middleRight.x+e.verticalSpacing/2,y:l.middleRight.y},(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(l.middleLeft,o),r.length=jd.distancePoints(l.middleLeft,o),a.push(r),s.center.y!==l.center.y){var c={x:s.middleRight.x+e.verticalSpacing/2,y:s.middleLeft.y};(r=new Af(i,"segments",{type:"Orthogonal"},!0)).direction=jd.direction(o,c),r.length=jd.distancePoints(o,c),a.push(r)}}return i.segments=a,[]},e.prototype.updateNodes=function(e,t,n,i,o,r){var a,l,s,d,c,u;if(t&&!t.excludeFromLayout){s=t.actualSize.width,d=t.actualSize.height,c=e.anchorX,u=e.anchorY,"LeftToRight"===e.orientation?(c+=e.graphNodes[t.id].y+s/2,u+=e.graphNodes[t.id].x+n+d/2):"RightToLeft"===e.orientation?(c-=e.graphNodes[t.id].y+s/2,u+=e.graphNodes[t.id].x+n+d/2):"TopToBottom"===e.orientation?(c+=e.graphNodes[t.id].x+n+s/2,u+=e.graphNodes[t.id].y+d/2):(c+=e.graphNodes[t.id].x+n+s/2,u-=e.graphNodes[t.id].y+d/2),e.graphNodes&&(c+=o=o||0,u+=r=r||0,this.isAnimation||(t.offsetX=c,t.offsetY=u)),e.objects.push({id:t.id,differenceX:c-t.offsetX,differenceY:u-t.offsetY});var h=void 0;if(h=[],this.hasChild(e,t))for(a=0;a<e.graphNodes[t.id].tree.children.length;a++)this.updateNodes(e,l=e.nameTable[e.graphNodes[t.id].tree.children[a]],n+(e.graphNodes[t.id].subTreeTranslation||0),i,o,r),h.push(l);if(e.graphNodes[t.id].tree.assistants.length)for(a=0;a<e.graphNodes[t.id].tree.assistants.length;a++)this.updateNodes(e,l=e.nameTable[e.graphNodes[t.id].tree.assistants[a]],n+(e.graphNodes[t.id].subTreeTranslation||0),null,o,r)}},e}(),wC=function(){function e(){this.isAnimation=!1}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"MindMapChart"},e.prototype.updateLayout=function(e,t,n,i,o,r){var a;if(a=this.checkRoot(e,n,o,r,t))n.fixedNode=a;else for(var l=0,s=e;l<s.length;l++)if(!((g=s[l]).excludeFromLayout||g.inEdges&&g.inEdges.length)){n.fixedNode=g.id;break}var d=this.findFirstLevelNodes(t[n.fixedNode],n,t),c=[],u=[],h=rb(n.getBranch);h=h||rb(this.getBranch);for(var p=0,f=d;p<f.length;p++){var g,m=h(g=f[p],d);"Left"===(m=g&&g.branch?g.branch:m)?c.push(g):u.push(g)}var v=new Zd(0,0,i.x,i.y);t[n.fixedNode].offsetX=v.x+v.width/2,t[n.fixedNode].offsetY=v.y+v.height/2,c.length&&this.updateMindMapBranch(e,u,t,n,i,o,"Left"),u.length&&this.updateMindMapBranch(e,c,t,n,i,o,"Right")},e.prototype.checkRoot=function(e,t,n,i,o){for(var r=0,a=e;r<a.length;r++){var l=a[r];if(!l.excludeFromLayout){if(l.data&&(l.data[n].toString()===i||l.data[n].toString()===t.root))return l.id;if(!l.data&&l.id===t.root)return l.id}}return""},e.prototype.updateMindMapBranch=function(e,t,n,i,o,r,a){var l;(l={type:"HierarchicalTree",horizontalSpacing:i.verticalSpacing,verticalSpacing:i.horizontalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,getLayoutInfo:rb(i.getLayoutInfo),layoutInfo:i.layoutInfo,margin:i.margin,root:i.fixedNode}).orientation="Left"===a?"LeftToRight":"RightToLeft",this.excludeFromLayout(t,n,!0),(new bC).updateLayout(e,n,l,o,r),this.excludeFromLayout(t,n,!1)},e.prototype.getBranch=function(e,t){return t.indexOf(e)%2==0?"Left":"Right"},e.prototype.excludeFromLayout=function(e,t,n){for(var i=0,o=e;i<o.length;i++)t[o[i].id].excludeFromLayout=n},e.prototype.findFirstLevelNodes=function(e,t,n){var i=[];if(e&&e.outEdges.length)for(var o=0,r=e.outEdges;o<r.length;o++)i.push(n[n[r[o]].targetID]);return i},e}(),CC=function(){function e(){}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"RadialTree"},e.prototype.updateLayout=function(e,t,n,i){this.doLayout({type:n.type,nameTable:t,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},layoutNodes:[],orientation:n.orientation,horizontalSpacing:n.horizontalSpacing,verticalSpacing:n.verticalSpacing,verticalAlignment:n.verticalAlignment,horizontalAlignment:n.horizontalAlignment,fixedNode:n.fixedNode,margin:n.margin,bounds:n.bounds,objects:[],root:n.root},e,t,i)},e.prototype.doLayout=function(e,t,n,i){for(var o,r=0;r<t.length;r++)(o=t[r]).excludeFromLayout||(e.graphNodes[o.id]=this.setUpLayoutInfo(e,o),o.inEdges&&o.inEdges.length||e.firstLevelNodes.push(o));e.root&&n[e.root]?e.centerNode=n[e.root]:e.firstLevelNodes.length&&(e.centerNode=e.firstLevelNodes[0],e.root=e.centerNode.id),e.centerNode&&(this.updateEdges(e,e.centerNode,0,n),this.depthFirstAllignment(e,e.centerNode,0,0),this.populateLevels(e),this.transformToCircleLayout(e),this.updateAnchor(e,i),this.updateNodes(e,e.centerNode,n))},e.prototype.updateEdges=function(e,t,n,i){var o=e.graphNodes[t.id];e.layoutNodes.push(o),o.level=n,o.visited=!0,e.maxLevel=Math.max(e.maxLevel,n);for(var r=0;r<t.outEdges.length;r++){var a=i[i[t.outEdges[r]].targetID];a.excludeFromLayout||a.visited||(o.children.push(a),this.updateEdges(e,a,n+1,i))}},e.prototype.depthFirstAllignment=function(e,t,n,i){var o,r=e.graphNodes[t.id];if(r.children.length){i+=300;for(var a=0;a<r.children.length;a++)n=(o=this.depthFirstAllignment(e,r.children[a],n,i)).x,i=o.y;r.children=r.children.sort(function(t,n){return e.graphNodes[t.id].x-e.graphNodes[n.id].x});var l=e.graphNodes[r.children[0].id].min,s=e.graphNodes[r.children[r.children.length-1].id].max;if(r.x=l+(s-l)/2,n=s+e.horizontalSpacing,r.segmentOffset=s+e.horizontalSpacing,r.x-=r.width/2,r.y-=r.height/2,r.min=l,r.max=s,r.x<l&&r.visited){for(r.x=l,n=r.x+r.width/2-(s-l)/2,r.visited=!1,a=0;a<r.children.length;a++)o=this.depthFirstAllignment(e,r.children[a],n,i);r.visited=!0,n=r.x+r.width+e.horizontalSpacing}n=n<(s=e.graphNodes[r.children[r.children.length-1].id].segmentOffset)?s:n,r.y=i-=300}else r.x=n,r.y=i,r.min=n,r.max=n+r.width,n+=r.width+e.horizontalSpacing;return{x:n,y:i}},e.prototype.populateLevels=function(e){var t=[],n=Math.min.apply(Math,e.layoutNodes.map(function(e){return e.x})),i=Math.max.apply(Math,e.layoutNodes.map(function(t){return t.x+t.width+e.horizontalSpacing}))-n;e.levels=[];for(var o=function(o){var r={};t=(t=e.layoutNodes.filter(function(e){return e.level===o?e:null})).sort(function(e,t){return e.x-t.x}),r.min=t[0].x,r.max=t[t.length-1].x+t[t.length-1].width+e.horizontalSpacing,r.actualCircumference=0,r.height=0;for(var a=0;a<t.length;a++)t[a].height>r.height&&(r.height=t[a].height),r.actualCircumference+=Math.max(t[a].width,t[a].height),a!==t.length-1&&(r.actualCircumference+=e.horizontalSpacing);r.circumference=r.max-r.min,r.actualCircumference<r.circumference&&(r.circumference=(r.circumference+r.actualCircumference)/2),r.radius=r.circumference/(2*Math.PI)+r.height,r.nodes=[],o>1&&e.levels[o-1].radius+e.levels[o-1].height>=r.radius&&(r.radius=e.levels[o-1].radius+e.levels[o-1].height);for(var l=0;l<t.length;l++)t[l].ratio=Math.abs(t[l].x+t[l].width/2-n)/i,r.nodes.push(t[l]);e.levels.push(r)},r=0;r<=e.maxLevel;r++)o(r)},e.prototype.transformToCircleLayout=function(e){var t=e.graphNodes[e.centerNode.id];t.x=0,t.y=0;for(var n=1;n<e.levels.length;n++)for(var i=0;i<e.levels[n].nodes.length;i++){var o=e.levels[n].nodes[i];o.x=Math.cos(360*o.ratio*Math.PI/180)*(e.levels[n].radius+e.verticalSpacing*n),o.y=Math.sin(360*o.ratio*Math.PI/180)*(e.levels[n].radius+e.verticalSpacing*n),e.anchorX=Math.min(e.anchorX,o.x),e.anchorY=Math.min(e.anchorY,o.y)}},e.prototype.updateAnchor=function(e,t){e.anchorX=e.centerNode.offsetX||t.x/2,e.anchorY=e.centerNode.offsetY||t.y/2},e.prototype.updateNodes=function(e,t,n){var i=e.graphNodes[t.id],o=i.y+e.anchorY;t.offsetX+=i.x+e.anchorX,t.offsetY+=o;for(var r=0;r<i.children.length;r++)this.updateNodes(e,n[i.children[r].id],n)},e.prototype.setUpLayoutInfo=function(e,t){var n={};return n.name=t.id,n.x=0,n.y=0,n.min=0,n.max=0,n.width=t.actualSize.width,n.height=t.actualSize.height,n.children=[],n.level=0,n.ratio=0,n.visited=!1,n},e}(),xC=function(){function e(e){this.velocityX=0,this.velocityY=0,this.nodes=[],this.graphNode=e;var t=EC(this.graphNode);this.location=t.center,this.nodes=[],e.treeInfo.parents||(e.treeInfo.parents=[]),e.treeInfo.children||(e.treeInfo.children=[]),this.nodes=e.treeInfo.parents.concat(e.treeInfo.children)}return e.prototype.applyChanges=function(){this.graphNode.treeInfo.center=this.location},e}(),SC=function(){function e(){this.cdCOEF=.442,this.cfMAXVELOCITY=50,this.cnMAXITERACTION=1e3,this.cnSPRINGLENGTH=100,this.mszMaxForceVelocity={width:this.cfMAXVELOCITY,height:this.cfMAXVELOCITY},this.springLength=0,this.springFactor=this.cdCOEF,this.maxIteration=this.cnMAXITERACTION,this.springLength=this.cnSPRINGLENGTH}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"SymmetricalLayout"},e.prototype.doGraphLayout=function(e){var t=this.selectedNode;t.treeInfo.Bounds=e.getModelBounds(e.nodes);var n=this.convertGraphNodes(t.treeInfo.GraphNodes),i=n.length;i=Math.min(this.maxIteration,i*i*i),this.preLayoutNodes(n,t.treeInfo.Bounds);for(var o=0,r=i;o<r;o++)this.makeSymmetricLayout(n),this.appendForces(n);this.resetGraphPosition(n,t)},e.prototype.preLayoutNodes=function(e,t){for(var n=Math.max(t?t.width:25,t?t.height:25),i=n/2,o=n/2,r=2*Math.PI/e.length,a=r,l=0;l<e.length;l++)this.getForceNode(e[l]).location={x:i+n*Number(Math.cos(a).toFixed(2)),y:o+n*Number(Math.sin(a).toFixed(2))},a-=r},e.prototype.doLayout=function(e){this.selectedNode=e.selectedNode,this.doGraphLayout(e)},e.prototype.makeSymmetricLayout=function(e){for(var t,n,i=0;i<e.length;i++){for(var o=e[i],r=(t=this.getForceNode(o)).nodes,a=0;a<r.length;a++)_C((f=r[a]).id,e)&&this.calcNodesForce(t,this.getForceNode(f));for(var l=0,s=r.length;l<s&&!(s<2);l++){var d=this.getForceNode(r[l]),c=this.getForceNode(l+1>=s?r[0]:r[l+1]),u=360/r.length/2*Math.PI/180,h=2*this.springLength*Math.sin(u);this.calcRelatesForce(d,c,h)}for(var p=0;p<e.length;p++){var f;_C((f=e[p]).id,r)||f.id===o.id||(n=this.getForceNode(f),this.updateNeigbour(t,n))}}},e.prototype.appendForces=function(e){for(var t=null,n=0;n<e.length;n++){var i=(t=this.getForceNode(e[n])).location;i.x+=Math.min(t.velocityX,this.mszMaxForceVelocity.width),i.y+=Math.min(t.velocityY,this.mszMaxForceVelocity.height),t.velocityX=0,t.velocityY=0,t.location=i}},e.prototype.resetGraphPosition=function(e,t){for(var n,i={width:Number.MAX_VALUE,height:Number.MAX_VALUE},o=null,r=0;r<e.length;r++){var a={x:(o=this.getForceNode(n=e[r])).location.x-n.actualSize.width/2,y:o.location.y-n.actualSize.height/2};i.width=Math.min(i.width,a.x),i.height=Math.min(i.height,a.y)}for(r=0;r<e.length;r++)(a=(o=this.getForceNode(n=e[r])).location).x-=i.width-(t.treeInfo.location?t.treeInfo.location.x:0),a.y-=i.height-(t.treeInfo.location?t.treeInfo.location.y:0),o.location=a,o.applyChanges()},e.prototype.convertGraphNodes=function(e){for(var t=[],n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(e[o]){var r=e[o],a=new xC(r);r.treeInfo.tag=a,t.push(r)}}return t},e.prototype.getForceNode=function(e){return e.treeInfo.tag},e.prototype.updateNeigbour=function(e,t){if(null!=t&&null!=e){var n=this.pointDistance(e.location,t.location),i=this.lineAngle(e.location,t.location),o=.9*this.springLength;n<o&&this.calcForce(n,o,i,t)}},e.prototype.lineAngle=function(e,t){var n=0,i=t.x-e.x,o=t.y-e.y;return 0===i?n=o<=0?3*Math.PI/2:Math.PI/2:0===o?n=i<0?Math.PI:0:(n=Math.atan(o/i),i<0&&o>0?n=Math.PI+n:i<0&&o<0?n=Math.PI+n:i>0&&o<0&&(n=2*Math.PI+n)),n},e.prototype.pointDistance=function(e,t){var n=0,i=t.x-e.x,o=t.y-e.y,r=i*i+o*o;return r>0&&(n=Math.sqrt(r)),n},e.prototype.calcRelatesForce=function(e,t,n){var i=this.pointDistance(e.location,t.location),o=this.lineAngle(e.location,t.location);i<n&&this.calcForce(i,n,o,t)},e.prototype.updateLayout=function(e,t,n,i,o,r){(new TC).updateLayout(e,t,n,i,o,r)},e.prototype.calcNodesForce=function(e,t){var n=this.pointDistance(e.location,t.location),i=this.lineAngle(e.location,t.location);(n>this.springLength||n<this.springLength)&&this.calcForce(n,this.springLength,i,t)},e.prototype.calcForce=function(e,t,n,i){var o=i.nodes.length,r=e-t,a=this.springFactor/(o*o)*Math.sqrt(o);if(0!==r){var l=r*a,s=Math.cos(n)*l,d=Math.sin(n)*l;i.velocityX-=s,i.velocityY-=d}},e}(),TC=function(){function e(){this.visitedStack=[],this.cycleEdgesCollection=[],this.graphObjects=[],this.passedNodes=[]}return e.prototype.updateLayout=function(e,t,n,i,o,r){this.nameTable=i,this.nodes=e,this.connectors=t;var a=e;a.length>0&&(this.mhelperSelectedNode=Yy(a[0]));for(var l=0,s=e;l<s.length;l++){var d=void 0;(d=g=s[l]).treeInfo={},d.treeInfo.graphType="Node",this.graphObjects.push(d)}for(var c=0,u=t;c<u.length;c++){var h=void 0;(h=u[c]).treeInfo={},h.treeInfo.graphType="Connector",this.graphObjects.push(h)}this.updateLayout1(this.graphObjects,n);for(var p=this.getModelBounds(a),f=0;f<a.length;f++){var g=a[f],m=(r.x-p.width)/2,v=o.margin||{};v.left=v.left||0,v.right=v.right||0,v.top=v.top||0,v.bottom=v.bottom||0,o.margin.left&&(v.left=o.margin.left),o.margin.top&&(v.top=o.margin.top);var y=g.treeInfo.tag.location.y-(g.offsetY-g.actualSize.height/2)-p.y+v.top;g.offsetX+=g.treeInfo.tag.location.x-(g.offsetX-g.actualSize.width/2)-p.x+m+v.left,g.offsetY+=y,delete g.treeInfo}return!0},e.prototype.getModelBounds=function(e){e=e.slice();for(var t,n=null,i=null,o=0;o<e.length;o++){var r=EC(t=e[o]);n=new Zd(t.treeInfo.tag?t.treeInfo.tag.location.x:r.x,t.treeInfo.tag?t.treeInfo.tag.location.y:r.y,t.actualSize.width,t.actualSize.height),i=i?i.uniteRect(n):n}return i},e.prototype.updateLayout1=function(e,t){this.detectCyclesInGraph(e);var n=e.length;if(n>0){for(var i=[],o=[],r=[],a=0;a<e.length;a++){var l=e[a];void 0===l.treeInfo.isCycleEdge&&(l.treeInfo.isCycleEdge=!1),"Connector"!==l.treeInfo.graphType||l.treeInfo.isCycleEdge?"Connector"===l.treeInfo.graphType?i.push(l):r.push(l):o.push(l)}for(o=o.concat(r),o=i.concat(o);n>this.dictionaryLength(this.passedNodes);)if(this.getNodesToPosition(o),null!=this.selectedNode){t.doLayout(this),this.selectedNode=null,this.visitedStack=[];for(var s=0,d=this.cycleEdgesCollection;s<d.length;s++)d[s].treeInfo.isCycleEdge=!1}this.passedNodes=null,this.selectedNode=null}return!1},e.prototype.getNodesToPosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!_C(n.id,this.passedNodes)){n&&this.selectNodes(n);break}}},e.prototype.selectNodes=function(e){var t=e;"Connector"===e.treeInfo.graphType?this.exploreGraphEdge(e):null!=t&&this.addNode(e,"passed")&&(this.addNode(e,"selected"),this.isConnectedToAnotherNode(t)?(this.selectedNode={treeInfo:{}},this.selectedNode.treeInfo.LeftMargin=10,this.selectedNode.treeInfo.TopMargin=10,this.selectConnectedNodes(t)):this.selectedNode=e)},e.prototype.selectConnectedNodes=function(e){var t=this.selectedNode;t.treeInfo.GraphNodes||(t.treeInfo.GraphNodes={});var n=e;if(null!=n&&this.addNode(n,"passed")){var i=n.id;if(this.dictionaryContains(t.treeInfo.GraphNodes,n)){var o=t.treeInfo.GraphNodes[i];o.treeInfo.Added&&(o.treeInfo.Added=!1,this.getConnectedRelatives(o),this.exploreRelatives(e))}else{var r=this.addGraphNode(n);this.getConnectedRelatives(r),this.exploreRelatives(e)}}},e.prototype.exploreRelatives=function(e){this.exploreRelatives1(e,"Parents"),this.exploreRelatives1(e,"Children")},e.prototype.exploreRelatives1=function(e,t){var n=[];"Parents"===t?n=e.inEdges:"Children"===t&&(n=e.outEdges);for(var i=0;i<n.length;i++){var o=this.nameTable[n[i]];if(this.addNode(o,"passed")){var r=this.nameTable[o.sourceID],a=this.nameTable[o.targetID];"Parents"===t&&null!=r&&_C(r.id,this.nodes)?this.selectConnectedNodes(this.nameTable[o.sourceID]):"Children"===t&&null!=a&&_C(a.id,this.nodes)&&this.selectConnectedNodes(this.nameTable[o.targetID])}}},e.prototype.getConnectedRelatives=function(e){this.getConnectedParents(e),this.getConnectedChildren(e)},e.prototype.dictionaryContains=function(e,t){for(var n=Object.keys(e),i=0;i<n.length;i++)if(n[i]===t.id)return!0;return!1},e.prototype.dictionaryLength=function(e){return Object.keys(e).length},e.prototype.getConnectedChildren=function(e){for(var t=this.selectedNode,n=e,i=0;i<n.outEdges.length;i++){var o=this.nameTable[n.outEdges[i]];if(!o.treeInfo.isCycleEdge){var r=this.nameTable[o.targetID];if(_C(r.id,this.nodes)&&null!=r&&r.visible){var a=void 0;this.dictionaryContains(t.treeInfo.GraphNodes,r)?a=t.treeInfo.GraphNodes[r.id]:(a=this.addGraphNode(r)).treeInfo.Added=!0,e.treeInfo.children||(e.treeInfo.children=[]),a.treeInfo.parents||(a.treeInfo.parents=[]),this.setNode(a.treeInfo.parents,e),this.findNode(e.treeInfo.children,a.id)<0&&e.treeInfo.children.push(a)}}}},e.prototype.getConnectedParents=function(e){for(var t=this.selectedNode,n=e,i=0;i<n.inEdges.length;i++){var o=this.nameTable[n.inEdges[i]];if(!o.treeInfo.isCycleEdge){var r=this.nameTable[o.sourceID];if(_C(r.id,this.nodes)&&null!=r&&r.visible){var a=void 0;this.dictionaryContains(t.treeInfo.GraphNodes,r)?a=t.treeInfo.GraphNodes[r.id]:(a=this.addGraphNode(r)).treeInfo.Added=!0,e.treeInfo.parents||(e.treeInfo.parents=[]),a.treeInfo.children||(a.treeInfo.children=[]),this.setNode(a.treeInfo.children,e),this.findNode(e.treeInfo.parents,a.id)<0&&e.treeInfo.parents.push(a)}}}},e.prototype.setNode=function(e,t){var n=this.findNode(e,t.id);n>=0&&n<e.length?e[n]=t:e.push(t)},e.prototype.findNode=function(e,t){var n=-1;if(null!=e&&""!==t)for(var i=0,o=e.length;i<o;i++){var r=e[i];if("string"==typeof r&&r===t){n=i;break}if(null!=r&&r.id===t){n=i;break}}return n},e.prototype.addGraphNode=function(e){var t=this.selectedNode;t.treeInfo.GraphNodes||(t.treeInfo.GraphNodes={});var n=e;if(null!=t){t.treeInfo.GraphNodes[n.id]=n;var i=this.mhelperSelectedNode;null!=i&&e.id===i.id&&(this.mhelperSelectedNode=n)}return n},e.prototype.isConnectedToAnotherNode=function(e){var t=!1;return e.inEdges.concat(e.outEdges).length>0&&(null!=e.inEdges&&e.inEdges.length>0&&(t=this.searchEdgeCollection(e.inEdges,"FromNode")),!t&&null!=e.outEdges&&e.outEdges.length>0&&(t=this.searchEdgeCollection(e.outEdges,"ToNode"))),t},e.prototype.searchEdgeCollection=function(e,t){for(var n=!1,i=0;i<e.length-1;i++){var o=this.nameTable[e[i]];if(this.addNode(o,"passed")&&!o.treeInfo.isCycleEdge&&("FromNode"===t&&null!=this.nameTable[o.sourceID]||"ToNode"===t&&null!=this.nameTable[o.targetID])){n=!0;break}}return n},e.prototype.exploreGraphEdge=function(e){var t=e;if(null!=t&&!t.treeInfo.isCycleEdge&&this.addNode(e,"passed")){this.addNode(e,"selected");var n=this.nameTable[t.sourceID],i=this.nameTable[t.targetID];null!=n?this.selectNodes(n):null!=i?this.selectNodes(i):this.selectedNode=e}},e.prototype.addNode=function(e,t){var n=e;return"passed"!==t&&n.visible||this.dictionaryContains(this.passedNodes,n)||(this.passedNodes[n.id]=n),!!n.visible},e.prototype.detectCyclesInGraph=function(e){for(var t=[],n=[],i=0;i<e.length;i++)"Connector"!==e[i].treeInfo.graphType&&t.push(e[i]);if(t.length>0)for(n.push(t[0]),this.visitedStack.push(t[0]);n.length>0;){var o=this.getUnVisitedChildNodes(n[n.length-1]);if(o.length>0){var r=o[0],a=o[o.length-1];_C(r.id,this.visitedStack)?(a.treeInfo.isCycleEdge=!0,this.cycleEdgesCollection.push(a)):(n.push(r),this.visitedStack.splice(0,0,r))}else n.pop()}},e.prototype.getUnVisitedChildNodes=function(e){var t=[];if(e.outEdges.length>0){for(var n=0;n<e.outEdges.length;n++){var i=this.nameTable[e.outEdges[n]];if(!_C(i.id,this.visitedStack)){var o=this.nameTable[i.targetID];return null!=o&&t.push(o),t.push(i),this.visitedStack.splice(0,0,i),t}}return t}return t},e}();function EC(e){return new Zd(e.offsetX-e.actualSize.width*e.pivot.x,e.offsetY-e.actualSize.height*e.pivot.y,e.actualSize.width,e.actualSize.height)}function _C(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e)return!0;return!1}var kC=function(){function e(){}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ComplexHierarchicalTree"},e.prototype.doLayout=function(e,t,n,i,o){(new DC).doLayout(e,t,n,i,o)},e.prototype.getLayoutNodesCollection=function(e){for(var t,n=[],i=0;i<e.length;i++)(t=e[i]).inEdges.length+t.outEdges.length>0&&!t.parentId&&!t.processId&&n.push(t);return n},e}(),DC=function(){function e(){this.nameTable={},this.crossReduction=new OC,this.previousEdgeOffset=6,this.previousEdgeDistance=5,this.jettyPositions={},this.rankBottomY=null,this.limitX=null,this.rankTopY=null,this.parallelEdgeSpacing=10,this.minEdgeJetty=12}return e.prototype.createVertex=function(e,t,n,i,o,r){return{value:t,geometry:{x:n,y:i,width:o,height:r},name:t,vertex:!0,inEdges:e.inEdges.slice(),outEdges:e.outEdges.slice()}},e.prototype.getEdges=function(e){var t=[];if(e){for(var n=0;e.inEdges.length>0&&n<e.inEdges.length;n++)t.push(this.nameTable[e.inEdges[n]]);for(n=0;e.outEdges.length>0&&n<e.outEdges.length;n++)t.push(this.nameTable[e.outEdges[n]])}return t},e.prototype.findRoots=function(e){for(var t=[],n=null,i=-1e5,o=0,r=Object.keys(e);o<r.length;o++){for(var a=e[r[o]],l=this.getEdges(a),s=0,d=0,c=0;c<l.length;c++)this.getVisibleTerminal(l[c],!0).name===a.name?s++:d++;0===d&&s>0&&t.push(a);var u=s-d;u>i&&(i=u,n=a)}return 0===t.length&&null!=n&&t.push(n),t},e.prototype.getVisibleTerminal=function(e,t){var n=this.nameTable[e.targetID];t&&(n=this.nameTable[e.sourceID]);for(var i=0;i<this.vertices.length;i++)if(this.vertices[i].name===n.id)return this.vertices[i];return null},e.prototype.traverse=function(e,t,n,i,o,r){if(null!=e){var a=e.name;if(null==r||null!=r[a]){null==i[a]&&(i[a]=e),null!=r&&delete r[a];for(var l=this.getEdges(e),s=[],d=0;d<l.length;d++)s[d]=this.getVisibleTerminal(l[d],!0)===e;for(d=0;d<l.length;d++)if(!t||s[d]){for(var c=this.getVisibleTerminal(l[d],!s[d]),u=1,h=0;h<l.length;h++)if(h!==d){var p=s[h];this.getVisibleTerminal(l[h],!p)===c&&(p?u++:u--)}u>=0&&(i=this.traverse(c,t,l[d],i,o,r))}}else if(null==i[a])for(d=0;d<o.length;d++){var f=o[d];if(null!=f[a]){for(var g=0,m=Object.keys(f);g<m.length;g++){var v=m[g];i[v]=f[v]}return o.splice(d,1),i}}}return i},e.prototype.getModelBounds=function(e){e=e.slice();for(var t=null,n=null,i=0;i<e.length;i++)if(t=e[i].geometry,n){var o=Math.max(n.x+n.width,t.x+t.width),r=Math.max(n.y+n.height,t.y+t.height);n.x=Math.min(n.x,t.x),n.y=Math.min(n.y,t.y),n.width=o-n.x,n.height=r-n.y}else n={x:t.x,y:t.y,width:t.width,height:t.height};return n},e.prototype.doLayout=function(e,t,n,i,o){this.nameTable=t;var r,a=n.enableRouting,l={horizontalSpacing:n.horizontalSpacing,verticalSpacing:n.verticalSpacing,orientation:n.orientation,marginX:n.margin.left,marginY:n.margin.top,enableLayoutRouting:a};o&&(o.edgeMapper=[]);var s=[];this.vertices=[];for(var d={},c=0;c<e.length;c++){var u=this.createVertex(e[c],e[c].id,0,0,e[c].actualSize.width,e[c].actualSize.height);if(this.vertices.push(u),(e[c].inEdges.length>0||e[c].outEdges.length>0)&&s.push(e[c]),d[u.name]=u,o)for(var h=e[c].outEdges.slice(),p=0;p<h.length;p++)o.setEdgeMapper({key:t[h[p]],value:[]})}var f,g=[];for(f=this.findRoots(d),c=0;c<f.length;c++)g.push(w={}),this.traverse(f[c],!0,null,w,g,d);var m,v={marginX:0,marginY:0},y=[],b=!1;for(c=0;c<g.length;c++){for(var w=g[c],C=0,x=Object.keys(w);C<x.length;C++)y.push(w[x[C]]);("Linear"===n.arrangement&&c===g.length-1||a)&&(b=!0),r=new AC(this,y,f,l),this.cycleStage(r),this.layeringStage(r),o&&"DifferentPoint"===n.connectionPointOrigin||b?(m=this.matrixModel({model:r,matrix:[],rowOffset:[]}),o.arrangeElements(m,n)):"Nonlinear"===n.arrangement&&(this.crossingStage(r),v=this.placementStage(r,v.marginX,v.marginY),y=[])}var S=this.getModelBounds(this.vertices);for(this.updateMargin(n,l,S,i),c=0;c<this.vertices.length;c++)if(B=this.vertices[c]){var T=this.nameTable[B.name];T.offsetX=0,T.offsetY=0;var E=B.geometry.x-(T.offsetX-T.actualSize.width/2)+l.marginX,_=B.geometry.y-(T.offsetY-T.actualSize.height/2)+l.marginY,k=E,D=_;"BottomToTop"===l.orientation?(a&&(B.geometry.y=S.height-_-T.actualSize.height/2),D=S.height-_):"RightToLeft"===l.orientation&&(k=S.width-E),T.offsetX+=k-T.offsetX,T.offsetY+=D-T.offsetY}if(!b)for(c=0;c<this.vertices.length;c++)this.isNodeOverLap(this.nameTable[this.vertices[c].name],n);if((o&&"DifferentPoint"===n.connectionPointOrigin||a)&&o.updateLayout(i,S,n,l,s,t),a){for(var A={},O=void 0,I=0;I<m.matrix.length;I++){O=m.matrix[I].value;for(var P=0;P<O.length;P++)for(var R=O[P],M=0;M<R.cells.length;M++){var N=R.cells[M];"internalVertex"===this.getType(N.type)&&(A[N.id]=N)}}this.updateRankValuess(r),c=0;for(var L=Object.keys(A);c<L.length;c++)this.setVertexLocationValue(A[L[c]],n.orientation,S);this.localEdgeProcessing(r,A),this.assignRankOffset(r),this.updateEdgeSetXYValue(r);var H=this.getValues(r.edgeMapper);for(c=0;c<H.length;c++){if(H[c].x.length>0)for(p=0;p<H[c].x.length;p++)H[c].x[p]="RightToLeft"!==n.orientation&&"LeftToRight"!==n.orientation?H[c].x[p]+l.marginX:H[c].x[p]+n.verticalSpacing/2;this.setEdgePosition(H[c],r,l)}for(I=0;I<this.vertices.length;I++){var B;(B=this.vertices[I]).outEdges.length>1&&this.updateMultiOutEdgesPoints(B)}}},e.prototype.setEdgeXY=function(e,t,n,i){if(e&&t.source.id){for(var o=void 0,r=void 0,a=0;a<e.length;a++)for(var l=0;l<e[a].length;l++)e[a][l].id!==t.target.id&&e[a][l].id!==t.source.id||(e[a][l].id===t.target.id&&void 0===o&&(o=a),e[a][l].id===t.source.id&&void 0===r&&(r=a));for(var s=void 0,d=o;d<=r;d++)void 0===s&&(s=this[d+"_RankOffset"]),void 0!==s&&s<this[d+"_RankOffset"]&&(s=this[d+"_RankOffset"]);void 0===this.edges&&(this.edges={}),this.edges[t.ids[0]]={x:t.x,y:0};var c=this.resetOffsetXValue(s,n/10);for(t.x[i-t.minRank-1]=c,l=0;l<t.edges.length;l++)t.edges[l].levelSkip=!0}},e.prototype.resetOffsetXValue=function(e,t){for(var n=0,i=Object.keys(this.edges);n<i.length;n++)for(var o=i[n],r=this.edges[o].x,a=0;a<r.length;a++)if(this.edges[o].x[a]===e)return this.resetOffsetXValue(e+t,t);return e},e.prototype.setEdgePosition=function(e,t,n){var i=0;if(101207!==e.temp[0]){void 0===e.maxRank&&(e.maxRank=-1),void 0===e.minRank&&(e.minRank=-1);var o=e.maxRank,r=e.minRank;o===r&&(o=e.source.maxRank,r=e.target.minRank);var a=0,l=this.jettyPositions[e.ids[0]];e.isReversed=void 0!==e.isReversed;var s=e.isReversed?e.target.cell:e.source.cell,d=!1;"TopToBottom"===t.layout.orientation||"LeftToRight"===t.layout.orientation?("TopToBottom"===t.layout.orientation&&(d=!1),"LeftToRight"===t.layout.orientation&&(d=!1)):e.isReversed||(d=!0);for(var c=0;c<e.edges.length;c++){var u=e.edges[c],h=this.getVisibleTerminal(u,!0),p=[],f=e.isReversed;if(h!==s&&(f=!f),null!=l){var g=f?2:0,m=f?d?this.rankBottomY[r]:this.rankTopY[r]:d?this.rankTopY[o]:this.rankBottomY[o],v=l[4*a+1+g];f!==d&&(v=-v),"TopToBottom"!==n.orientation&&"BottomToTop"!==n.orientation||(m+=v);var y=l[4*a+g];p.push("TopToBottom"===n.orientation||"BottomToTop"===n.orientation?this.getPointvalue(y,m+n.marginY):this.getPointvalue("LeftToRight"===n.orientation?m+v:m,y+n.marginY))}var b=e.x.length-1,w=-1,C=-1,x=e.maxRank-1;f&&(b=0,w=e.x.length,C=1,x=e.minRank+1);for(var S=b;e.maxRank!==e.minRank&&S!==w;S+=C){var T=e.x[S]+i,E=(this.rankTopY[x]+this.rankBottomY[x+1])/2,_=(this.rankTopY[x-1]+this.rankBottomY[x])/2;if(f){var k=E;E=_,_=k}"TopToBottom"===n.orientation||"BottomToTop"===n.orientation?(p.push(this.getPointvalue(T,E+n.marginY)),p.push(this.getPointvalue(T,_+n.marginY))):(p.push(this.getPointvalue(E,T+n.marginY)),p.push(this.getPointvalue(_,T+n.marginY))),this.limitX=Math.max(this.limitX,T),x+=C}null!=l&&(v=l[4*a+3-(g=f?2:0)],f!==d&&(v=-v),m=(f?d?this.rankTopY[o]:this.rankBottomY[o]:d?this.rankBottomY[r]:this.rankTopY[r])-v,y=l[4*a+2-g],p.push("TopToBottom"===n.orientation||"BottomToTop"===n.orientation?this.getPointvalue(y,m+n.marginY):this.getPointvalue(m,y+n.marginY))),this.setEdgePoints(u,p,t),i=0===i?this.parallelEdgeSpacing:i>0?-i:-i+this.parallelEdgeSpacing,a++}e.temp[0]=101207}},e.prototype.getPointvalue=function(e,t){return{x:Number(e)||0,y:Number(t)||0}},e.prototype.updateEdgeSetXYValue=function(e){if(e.layout.enableLayoutRouting){var t=!1;"LeftToRight"!==e.layout.orientation&&"RightToLeft"!==e.layout.orientation||(t=!0);for(var n=0;n<e.ranks.length;n++)for(var i=e.ranks[n],o=0;o<i.length;o++){var r=i[o];if(r.edges&&r.edges.length>0){var a=!0;r.minRank!==n-1&&r.maxRank!==n-1&&(a=!1),a&&this.setXY(r,n,void 0,!!t,e.ranks,e.layout.horizontalSpacing>0?e.layout.horizontalSpacing/2:15)}}}},e.prototype.getPreviousLayerConnectedCells=function(e,t){if(null==t.previousLayerConnectedCells){t.previousLayerConnectedCells=[],t.previousLayerConnectedCells[0]=[];for(var n=0;n<t.connectsAsSource.length;n++){var i=t.connectsAsSource[n];t.previousLayerConnectedCells[0].push(-1===i.minRank||i.minRank===e-1?i.target:i)}}return t.previousLayerConnectedCells[0]},e.prototype.compare=function(e,t){if(null!=e&&null!=t){if(t.weightedValue>e.weightedValue)return-1;if(t.weightedValue<e.weightedValue)return 1}return 0},e.prototype.localEdgeProcessing=function(e,t){for(var n=0;n<e.ranks.length;n++)for(var i=e.ranks[n],o=0;o<i.length;o++){var r=i[o];if(this.crossReduction.isVertex(r))for(var a=this.getPreviousLayerConnectedCells(n,r),l=n-1,s=0;s<2;s++){if(l>-1&&l<e.ranks.length&&null!=a&&a.length>0){for(var d=[],c=0;c<a.length;c++){var u=this.weightedCellSorter(a[c],this.getX(l,a[c]));d.push(u)}d.sort(this.compare),r.width=t[r.id].cell.geometry.width,r.height=t[r.id].cell.geometry.height;var h=void 0;"TopToBottom"===e.layout.orientation||"BottomToTop"===e.layout.orientation?(r.x[0]=t[r.id].cell.geometry.x+t[r.id].cell.geometry.width/2,h=r.x[0]-r.width/2+t[r.id].cell.geometry.height/2):(r.x[0]=t[r.id].cell.geometry.y,h=r.x[0]);var p=h+r.width,f=0,g=[];for(c=0;c<d.length;c++){var m=d[c].cell,v=void 0;if(this.crossReduction.isVertex(m)){v=0===s?r.connectsAsSource:r.connectsAsTarget;for(var y=0;y<v.length;y++)v[y].source!==m&&v[y].target!==m||(f+=v[y].edges.length,g.push(v[y]))}else f+=m.edges.length,g.push(m)}r.width>(f+1)*this.previousEdgeDistance+2*this.previousEdgeDistance&&(h+=this.previousEdgeDistance,p-=this.previousEdgeDistance);var b=(p-h)/f,w=h+b/2,C=this.minEdgeJetty-this.previousEdgeOffset,x=0;for(c=0;c<g.length;c++){var S=g[c].edges.length;void 0===this.jettyPositions&&(this.jettyPositions={});var T=this.jettyPositions[g[c].ids[0]];null==T&&(this.jettyPositions[g[c].ids[0]]=T=[]),c<f/2?C+=this.previousEdgeOffset:c>f/2&&(C-=this.previousEdgeOffset);for(var E=0;E<S;E++)T[4*E+2*s]=w,w+=b,T[4*E+2*s+1]=C;x=Math.max(x,C)}}a=this.getNextLayerConnectedCells(n,r),l=n+1}}},e.prototype.updateMultiOutEdgesPoints=function(e){for(var t=0;t<e.outEdges.length/2;t++)this.nameTable[e.outEdges[e.outEdges.length-(t+1)]].geometry.points[0].y=this.nameTable[e.outEdges[t]].geometry.points[0].y},e.prototype.getNextLayerConnectedCells=function(e,t){if(null==t.nextLayerConnectedCells){t.nextLayerConnectedCells=[],t.nextLayerConnectedCells[0]=[];for(var n=0;n<t.connectsAsTarget.length;n++){var i=t.connectsAsTarget[n];t.nextLayerConnectedCells[0].push(-1===i.maxRank||i.maxRank===e+1?i.source:i)}}return t.nextLayerConnectedCells[0]},e.prototype.getX=function(e,t){return this.crossReduction.isVertex(t)?t.x[0]:this.crossReduction.isVertex(t)?0:t.x[e-t.minRank-1]||t.temp[e-t.minRank-1]},e.prototype.getGeometry=function(e){return e.geometry},e.prototype.setEdgePoints=function(e,t,n){if(null!=e){var i=this.getGeometry(e);if(null!=t)for(var o=0;o<t.length;o++)t[o].x=t[o].x,t[o].y=t[o].y;i.points=t,e.geometry=i}},e.prototype.assignRankOffset=function(e){if(e)for(var t=0;t<e.ranks.length;t++)this.rankCoordinatesAssigment(t,e)},e.prototype.rankCoordinatesAssigment=function(e,t){for(var n,i=t.ranks[e],o=t.layout.horizontalSpacing,r=0;r<i.length;r++)void 0===this[e+"_RankOffset"]&&(this[e+"_RankOffset"]=0),this[e+"_RankOffset"]<(n=i[r].x[0])&&(this[e+"_RankOffset"]=n+i[r].width/2+o)},e.prototype.getType=function(e){return"internalVertex"===e?"internalVertex":"internalEdge"},e.prototype.updateRankValuess=function(e){this.rankTopY=[],this.rankBottomY=[];for(var t=0;t<e.ranks.length;t++)this.rankTopY[t]=Number.MAX_VALUE,this.rankBottomY[t]=-Number.MAX_VALUE},e.prototype.setVertexLocationValue=function(e,t,n){var i,o=e.cell.geometry;i="TopToBottom"===t||"BottomToTop"===t?o.y:o.x,"RightToLeft"===t?(i=n.width-o.x-o.height,this.rankBottomY[e.minRank]=Math.max(this.rankBottomY[e.minRank],i),this.rankTopY[e.minRank]=Math.min(this.rankTopY[e.minRank],i+o.height)):(this.rankTopY[e.minRank]=Math.min(this.rankTopY[e.minRank],i),this.rankBottomY[e.minRank]=Math.max(this.rankBottomY[e.minRank],i+o.height))},e.prototype.matrixModel=function(e){return e.model=e.model,e.matrix=e.matrix||[],e.rowOffset=e.rowOffset||[],e},e.prototype.calculateRectValue=function(e){var t={x:0,y:0,right:0,bottom:0,height:0,width:0};return t.x=e.offsetX-e.actualSize.width/2,t.right=e.offsetX+e.actualSize.width/2,t.y=e.offsetY-e.actualSize.height/2,t.bottom=e.offsetY+e.actualSize.height/2,t},e.prototype.isNodeOverLap=function(e,t){for(var n={x:0,y:0,right:0,bottom:0,height:0,width:0},i=0;i<this.vertices.length;i++){var o,r={x:0,y:0,width:0,height:0};e.id!==(o=this.nameTable[this.vertices[i].value]).id&&0!==o.offsetX&&0!==o.offsetY&&(n=this.calculateRectValue(e),r=this.calculateRectValue(o),this.isIntersect(r,n,t)&&("TopToBottom"===t.orientation||"BottomToTop"===t.orientation?e.offsetX+=t.horizontalSpacing:e.offsetY+=t.verticalSpacing,this.isNodeOverLap(e,t)))}},e.prototype.isIntersect=function(e,t,n){return!(Math.floor(e.right+n.horizontalSpacing)<=Math.floor(t.x)||Math.floor(e.x-n.horizontalSpacing)>=Math.floor(t.right)||Math.floor(e.y-n.verticalSpacing)>=Math.floor(t.bottom)||Math.floor(e.bottom+n.verticalSpacing)<=Math.floor(t.y))},e.prototype.updateMargin=function(e,t,n,i){var o,r=n.x,a=n.y,l=n.x+n.width,s=n.y+n.height;if(o=e.bounds?e.bounds:{x:0,y:0,width:i.x,height:i.y},"TopToBottom"===t.orientation||"BottomToTop"===t.orientation){switch(e.horizontalAlignment){case"Auto":case"Left":t.marginX=o.x-r+e.margin.left;break;case"Right":t.marginX=o.x+o.width-e.margin.right-l;break;case"Center":t.marginX=o.x+o.width/2-(r+l)/2}switch(e.verticalAlignment){case"Top":var d;d=o.y+e.margin.top,t.marginY="TopToBottom"===t.orientation?d:-d;break;case"Bottom":var c;c=o.y+o.height-e.margin.bottom,t.marginY="TopToBottom"===t.orientation?c-s:-(c-s);break;case"Auto":case"Center":var u=void 0;u=o.y+o.height/2,t.marginY="TopToBottom"===t.orientation?u-(a+s)/2:(a+s)/2-u}}else{switch(e.horizontalAlignment){case"Auto":case"Left":var h;h=o.x+e.margin.left,t.marginX="LeftToRight"===t.orientation?h:-h;break;case"Right":var p;p=o.x+o.width-e.margin.right,t.marginX="LeftToRight"===t.orientation?p-l:l-p;break;case"Center":u=void 0,u=o.width/2+o.x,t.marginX="LeftToRight"===t.orientation?u-(a+s)/2:(r+l)/2-u}switch(e.verticalAlignment){case"Top":t.marginY=o.y+e.margin.top-r;break;case"Auto":case"Center":t.marginY=o.y+o.height/2-(a+s)/2;break;case"Bottom":t.marginY=o.y+o.height-e.margin.bottom-s}}},e.prototype.placementStage=function(e,t,n){var i=this.coordinateAssignment(t,n,parent,e);return i.model=e,i.widestRankValue=null,this.placementStageExecute(i),{marginX:i.marginX+e.layout.horizontalSpacing,marginY:i.marginY+e.layout.verticalSpacing}},e.prototype.coordinateAssignment=function(e,t,n,i){var o={};return"TopToBottom"===i.layout.orientation||"BottomToTop"===i.layout.orientation?(o.horizontalSpacing=i.layout.horizontalSpacing,o.verticalSpacing=i.layout.verticalSpacing):(o.horizontalSpacing=i.layout.verticalSpacing,o.verticalSpacing=i.layout.horizontalSpacing),o.orientation="north",o.marginX=o.marginX=e,o.marginY=o.marginY=t,o},e.prototype.calculateWidestRank=function(e,t,n){var i=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(i=!0);var o=-e.verticalSpacing,r=0;e.rankSizes=[],e.rankOffset=[];for(var a=n.maxRank;a>=0;a--){for(var l=0,s=n.ranks[a],d=i?e.marginY:e.marginX,c=0;c<s.length;c++){var u=s[c];if(this.crossReduction.isVertex(u)){var h=u;if(h.cell&&(h.cell.inEdges||h.cell.outEdges)){var p=this.nameTable[h.cell.name];h.width=p.actualSize.width,h.height=p.actualSize.height,l=Math.max(l,i?h.width:h.height)}}else if(u){var f=1;null!=u.edges&&(f=u.edges.length),u.width=10*(f-1)}i&&(u.height||(u.height=0)),this.setXY(u,a,d+=(i?u.height:u.width)/2,!!i),this.setTempVariable(u,a,d),(d+=(i?u.height:u.width)/2+e.horizontalSpacing)>e.widestRankValue&&(e.widestRankValue=d,e.widestRank=a),e.rankSizes[a]=d}e.rankOffset[a]=o;var g=l/2+r/2+e.verticalSpacing;for(r=l,"north"===e.orientation||"west"===e.orientation?o+=g:o-=g,c=0;c<s.length;c++)this.setXY(s[c],a,o,!i)}},e.prototype.setTempVariable=function(e,t,n){this.crossReduction.isVertex(e)?e.temp[0]=n:e.temp[t-e.minRank-1]=n},e.prototype.setXY=function(e,t,n,i,o,r){e&&e.cell?e.cell.inEdges||e.cell.outEdges?i?e.y[0]=n:e.x[0]=n:i?e.y[t-e.minRank-1]=n:e.x[t-e.minRank-1]=n:this.setEdgeXY(o,e,r,t)},e.prototype.rankCoordinates=function(e,t,n,i){var o=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(o=!0);for(var r=i.ranks[t],a=0,l=(o?e.marginY:e.marginX)+(e.widestRankValue-e.rankSizes[t])/2,s=0;s<r.length;s++){var d=r[s];if(this.crossReduction.isVertex(d)){var c=this.nameTable[d.cell.name];d.width=c.actualSize.width,d.height=c.actualSize.height,a=Math.max(a,d.height)}else{var u=1;null!=d.edges&&(u=d.edges.length),o?d.height=10*(u-1):d.width=10*(u-1)}var h=(o?d.height:d.width)/2;this.setXY(d,t,l+=h,!!o),this.setTempVariable(d,t,l),l+=h+e.horizontalSpacing}},e.prototype.initialCoords=function(e,t,n){this.calculateWidestRank(e,t,n);for(var i=e.widestRank;i>=0;i--)i<n.maxRank&&this.rankCoordinates(e,i,t,n);for(i=e.widestRank+1;i<=n.maxRank;i++)i>0&&this.rankCoordinates(e,i,t,n)},e.prototype.isAncestor=function(e,t){if(null!=t&&null!=e.hashCode&&null!=t.hashCode&&e.hashCode.length<t.hashCode.length){if(e.hashCode===t.hashCode)return!0;if(null==e.hashCode||null==e.hashCode)return!1;for(var n=0;n<e.hashCode.length;n++)if(e.hashCode[n]!==t.hashCode[n])return!1;return!0}return!1},e.prototype.weightedCellSorter=function(e,t){var n={};return n.cell=e||null,n.weightedValue=t||0,n.visited=!1,n.rankIndex=null,n},e.prototype.minNode=function(e,t){for(var n=[],i={map:{}},o=[],r=0;r<=t.maxRank;r++){o[r]=t.ranks[r];for(var a=0;a<o[r].length;a++){var l=o[r][a],s=this.weightedCellSorter(l,r);s.rankIndex=a,s.visited=!0,n.push(s),t.setDictionaryForSorter(i,l,s,!0)}}for(var d=10*n.length,c=0;n.length>0&&c<=d;){var u=n.shift(),h=u.cell,p=u.weightedValue,f=u.rankIndex,g=this.crossReduction.getConnectedCellsOnLayer(h,p),m=this.crossReduction.getConnectedCellsOnLayer(h,p,!0),v=g.length,y=m.length,b=this.medianXValue(e,g,p+1),w=this.medianXValue(e,m,p-1),C=v+y,x=this.crossReduction.getTempVariable(h,p),S=x;C>0&&(S=(b*v+w*y)/C),1===v&&1===y?S=w*y/y:1===v&&(S=b*v/v);var T=!1,E=void 0;if(S<x-1)if(0===f)E=S,T=!0;else{var _=o[p][f-1],k=this.crossReduction.getTempVariable(_,p);(k=k+_.width/2+e.intraCellSpacing+h.width/2)<S?(E=S,T=!0):k<this.crossReduction.getTempVariable(h,p)-1&&(E=k,T=!0)}else if(S>x+1)if(f===o[p].length-1)E=S,T=!0;else{var D=o[p][f+1],A=this.crossReduction.getTempVariable(D,p);(A=A-D.width/2-e.intraCellSpacing-h.width/2)>S?(E=S,T=!0):A>this.crossReduction.getTempVariable(h,p)+1&&(E=A,T=!0)}T&&(this.setTempVariable(h,p,E),this.updateNodeList(n,i,g,t),this.updateNodeList(n,i,m,t)),this.crossReduction.isVertex(u.cell)&&(u.visited=!1),c++}},e.prototype.updateNodeList=function(e,t,n,i){for(var o=0;o<n.length;o++){var r=i.getDictionaryForSorter(t,n[o]);null!=r&&!1===r.visited&&(r.visited=!0,e.push(r))}},e.prototype.medianXValue=function(e,t,n){if(0===t.length)return 0;for(var i=[],o=0;o<t.length;o++)i[o]=this.crossReduction.getTempVariable(t[o],n);if(i.sort(function(e,t){return e-t}),t.length%2==1)return i[Math.floor(t.length/2)];var r=t.length/2;return(i[r-1]+i[r])/2},e.prototype.placementStageExecute=function(e){var t=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(t=!0),e.jettyPositions={};var n=e.model;t?e.currentYDelta=0:e.currentXDelta=0,this.initialCoords(e,{model:n},n),this.minNode(e,n);var i=1e8;e.maxIterations||(e.maxIterations=8);for(var o=0;o<e.maxIterations;o++){if((t?e.currentYDelta:e.currentXDelta)<i){for(var r=0;r<n.ranks.length;r++)for(var a=n.ranks[r],l=0;l<a.length;l++){var s=a[l];this.setXY(s,r,this.crossReduction.getTempVariable(s,r),!!t)}i=t?e.currentYDelta:e.currentXDelta}t?e.currentYDelta=0:e.currentXDelta=0}this.setCellLocations(e,n)},e.prototype.setCellLocations=function(e,t){for(var n=this.getValues(t.vertexMapper),i=0;i<n.length;i++)this.setVertexLocation(e,n[i])},e.prototype.garphModelsetVertexLocation=function(e,t,n,i){var o=t.geometry,r=null;return null!=o&&(r={x:n,y:i,width:o.width,height:o.height},o.x===n&&o.y===i||(t.geometry=r)),r},e.prototype.setVertexLocation=function(e,t){var n=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(n=!0);var i=t.x[0]-t.width/2,o=t.y[0]-t.height/2;this.garphModelsetVertexLocation(e,t.cell,i,o),n?(e.marginY||(e.marginY=0),e.marginY=Math.max(e.marginY,o+t.height)):(e.marginX||(e.marginX=0),e.marginX=Math.max(e.marginX,i+t.width))},e.prototype.getValues=function(e){var t=[];if(e.map)for(var n=0,i=Object.keys(e.map);n<i.length;n++)t.push(e.map[i[n]]);return t},e.prototype.crossingStage=function(e){this.crossReduction.execute(e)},e.prototype.layeringStage=function(e){this.initialRank(e),this.fixRanks(e)},e.prototype.initialRank=function(e){for(var t=e.startNodes,n=e.getDictionaryValues(e.vertexMapper),i=t.slice();t.length>0;){for(var o=(u=t[0]).connectsAsTarget,r=u.connectsAsSource,a=!0,l=1e8,s=0;s<o.length;s++){if(5270620!==(f=o[s]).temp[0]){a=!1;break}var d=f.source;l=Math.min(l,d.temp[0]-1)}if(a){if(u.temp[0]=l,e.maxRank||(e.maxRank=1e8),e.maxRank=Math.min(e.maxRank,l),null!=r)for(s=0;s<r.length;s++)(f=r[s]).temp[0]=5270620,-1===(d=f.target).temp[0]&&(t.push(d),d.temp[0]=-2);t.shift()}else{var c=t.shift();if(t.push(u),c===u&&1===t.length)break}}for(s=0;s<n.length;s++)n[s].temp[0]-=e.maxRank;for(s=0;s<i.length;s++)for(var u,h=0,p=(o=(u=i[s]).connectsAsSource,0);p<o.length;p++){var f;d=(f=o[p]).target,u.temp[0]=Math.max(h,d.temp[0]+1),h=u.temp[0]}e.maxRank=1e8-e.maxRank},e.prototype.fixRanks=function(e){e.fixRanks()},e.prototype.cycleStage=function(e){var t={};e.startNodes=[];for(var n=e.getDictionaryValues(e.vertexMapper),i=[],o=0;o<n.length;o++)n[o].temp[0]=-1,i[n[o].id]=n[o];var r=null;if(null!=e.roots){var a=e.roots;for(r=[],o=0;o<a.length;o++)r[o]=e.getDictionary(e.vertexMapper,a[o]),null!=r[o]&&e.startNodes.push(r[o])}e.visit("removeParentConnection",r,!0,null,{seenNodes:t,unseenNodes:i});var l=e.clone(t,null,!0);e.visit("removeNodeConnection",i,!0,l,{seenNodes:t,unseenNodes:i})},e.prototype.remove=function(e,t){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),e},e.prototype.invert=function(e,t){var n=e.source;e.source=e.target,e.target=n,e.isReversed=!e.isReversed},e.prototype.getEdgesBetween=function(e,t,n){n=null!=n&&n;for(var i=this.getEdges(e),o=[],r=0;r<i.length;r++){var a=this.getVisibleTerminal(i[r],!0),l=this.getVisibleTerminal(i[r],!1);(a===e&&l===t||!n&&a===t&&l===e)&&o.push(i[r])}return o},e}(),AC=function(){function e(e,t,n,i){this.multiObjectIdentityCounter=0,this.dfsCount=0,this.hierarchicalUtil=new DC,this.roots=n,this.vertexMapper={map:{}};var o=[];this.layout=i,this.maxRank=1e8,this.edgeMapper={map:{}},this.hierarchicalLayout=e,this.createInternalCells(e,t,o,i);for(var r=0;r<t.length;r++){for(var a=o[r].connectsAsSource,l=0;l<a.length;l++){var s=a[l],d=s.edges;if(null!=d&&d.length>0){var c=d[0],u=e.getVisibleTerminal(c,!1),h=this.getDictionary(this.vertexMapper,u);o[r]===h&&(u=e.getVisibleTerminal(c,!0),h=this.getDictionary(this.vertexMapper,u)),null!=h&&o[r]!==h&&(s.target=h,0===h.connectsAsTarget.length&&(h.connectsAsTarget=[]),h.connectsAsTarget.indexOf(s)<0&&h.connectsAsTarget.push(s))}}o[r].temp[0]=1}}return e.prototype.resetEdge=function(e){return e.geometry={x:0,y:0,width:0,height:0,relative:!0},e},e.prototype.createInternalCells=function(e,t,n,i){for(var o=0;o<t.length;o++){n[o]={x:[],y:[],temp:[],cell:t[o],id:t[o].name,connectsAsTarget:[],connectsAsSource:[],type:"internalVertex"},this.setDictionary(this.vertexMapper,t[o],n[o]);var r=e.getEdges(t[o]);n[o].connectsAsSource=[];for(var a=0;a<r.length;a++){var l=e.getVisibleTerminal(r[a],!1);if(l!==t[o]){var s=e.getEdgesBetween(t[o],l,!1),d=e.getEdgesBetween(t[o],l,!0);if(null!=s&&s.length>0&&2*d.length>=s.length){var c={x:[],y:[],temp:[],edges:s,ids:[]};if(i.enableLayoutRouting)for(var u=0;u<s.length;u++){var h=s[u];this.setDictionary(this.edgeMapper,void 0,c,h.id),this.resetEdge(h)}c.source=n[o];for(var p=0;p<s.length;p++)c.ids.push(s[p].id);c.source=n[o],n[o].connectsAsSource||(n[o].connectsAsSource=[]),n[o].connectsAsSource.indexOf(c)<0&&n[o].connectsAsSource.push(c)}}}n[o].temp[0]=0}},e.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var n=null;if(null!=this.roots){var i=this.roots;for(n=[],t=0;t<i.length;t++){var o=this.getDictionary(this.vertexMapper,i[t]);n[t]=o}}this.visit("updateMinMaxRank",n,!1,null,{seenNodes:null,unseenNodes:null,rankList:e})},e.prototype.updateMinMaxRank=function(e,t,n){var i=n.parent,o=n.root,r=n.edge,a=n.rankList;if(o.maxRank||0===o.maxRank||(o.maxRank=-1),o.minRank||0===o.minRank||(o.minRank=-1),0===t&&o.maxRank<0&&o.minRank<0&&(a[o.temp[0]].push(o),o.maxRank=o.temp[0],o.minRank=o.temp[0],o.temp[0]=a[o.maxRank].length-1),null!=i&&null!=r&&i.maxRank-o.maxRank>1){r.maxRank=i.maxRank,r.minRank=o.maxRank,r.temp=[],r.x=[],r.y=[];for(var l=r.minRank+1;l<r.maxRank;l++)a[l].push(r),this.hierarchicalUtil.setTempVariable(r,l,a[l].length-1)}},e.prototype.setDictionary=function(e,t,n,i){if(i)return r=e.map[i],e.map[i]=n,r;var o=t.name,r=e.map[o];return e.map[o]=n,r},e.prototype.setDictionaryForSorter=function(e,t,n,i){var o=t.id,r=e.map[o];return e.map[o]=n,r},e.prototype.getDictionary=function(e,t){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var n=t.name;return n?e.map[n]:t.layoutObjectId?e.map[t.layoutObjectId]:(t.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,t.layoutObjectId)},e.prototype.getDictionaryForSorter=function(e,t){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var n=t.id;return n?e.map[n]:t.layoutObjectId?e.map[t.layoutObjectId]:(t.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,t.layoutObjectId)},e.prototype.getDictionaryValues=function(e){for(var t=[],n=0,i=Object.keys(e.map);n<i.length;n++)t.push(e.map[i[n]]);return t},e.prototype.visit=function(e,t,n,i,o){if(null!=t){for(var r=0;r<t.length;r++){var a=t[r];null!=a&&(null==i&&(i=new Object),o.parent=null,o.root=a,o.edge=null,n?(a.hashCode=[],a.hashCode[0]=this.dfsCount,a.hashCode[1]=r,this.extendedDfs(e,i,r,0,o)):this.depthFirstSearch(e,i,0,o))}this.dfsCount++}},e.prototype.depthFirstSearch=function(e,t,n,i){var o=i.root;if(null!=o){var r=o.id;if(null==t[r]){t[r]=o,this.updateConnectionRank(e,n,0,i);for(var a=o.connectsAsSource.slice(),l=0;l<a.length;l++){var s=a[l],d=s.target;i.parent=o,i.root=d,i.edge=s,this.depthFirstSearch(e,t,n+1,i)}}else this.updateConnectionRank(e,n,1,i)}},e.prototype.updateConnectionRank=function(e,t,n,i){"removeParentConnection"!==e&&"removeNodeConnection"!==e||this.removeConnectionEdge(i.parent,i.root,i.edge,t,i,"removeNodeConnection"===e),"updateMinMaxRank"===e&&this.updateMinMaxRank(t,n,i)},e.prototype.removeConnectionEdge=function(e,t,n,i,o,r){var a=o.seenNodes,l=o.unseenNodes;this.hierarchicalUtil.isAncestor(t,e)&&(this.hierarchicalUtil.invert(n,0),this.hierarchicalUtil.remove(n,e.connectsAsSource),r?(t.connectsAsSource.push(n),e.connectsAsTarget.push(n),this.hierarchicalUtil.remove(n,t.connectsAsTarget)):(e.connectsAsTarget.push(n),this.hierarchicalUtil.remove(n,t.connectsAsTarget),t.connectsAsSource.push(n))),a[t.id]=t,delete l[t.id]},e.prototype.extendedDfs=function(e,t,n,i,o){var r=o.parent,a=o.root;if(null!=a){if(null!=r&&(null==a.hashCode||a.hashCode[0]!==r.hashCode[0])){var l=r.hashCode.length+1;a.hashCode=r.hashCode.slice(),a.hashCode[l-1]=n}var s=a.id;if(null==t[s]){t[s]=a,this.updateConnectionRank(e,i,0,o);for(var d=a.connectsAsSource.slice(),c=0;c<d.length;c++){var u=d[c],h=u.target;o.parent=a,o.root=h,o.edge=u,this.extendedDfs(e,t,c,i+1,o)}}else this.updateConnectionRank(e,i,1,o)}},e.prototype.clone=function(e,t,n){if(n=null!=n&&n,null!=e&&"function"==typeof e.constructor){for(var i=e.constructor(),o=0,r=Object.keys(e);o<r.length;o++){var a=r[o];"layoutObjectId"!==a&&(null==t||t.indexOf(a)<0)&&(n||"object"!=typeof e[a])&&(i[a]=e[a])}return i}return null},e}(),OC=function(){function e(){}return e.prototype.calculateCrossings=function(e){for(var t=e.ranks.length,n=0,i=1;i<t;i++)n+=this.calculateRankCrossing(i,e);return n},e.prototype.getTempVariable=function(e,t){return e?this.isVertex(e)?e.temp[0]:e.temp[t-e.minRank-1]:0},e.prototype.calculateRankCrossing=function(e,t){for(var n=0,i=t.ranks[e],o=t.ranks[e-1],r=[],a=0;a<i.length;a++){for(var l=i[a],s=this.getTempVariable(l,e),d=this.getConnectedCellsOnLayer(l,e,!0),c=[],u=0;u<d.length;u++){var h=this.getTempVariable(d[u],e-1);c.push(h)}c.sort(function(e,t){return e-t}),r[s]=c}var p=[];for(a=0;a<r.length;a++)p=p.concat(r[a]);for(var f=1;f<o.length;)f<<=1;var g=2*f-1;f-=1;var m=[];for(a=0;a<g;++a)m[a]=0;for(a=0;a<p.length;a++){var v=p[a]+f;for(++m[v];v>0;)v%2&&(n+=m[v+1]),++m[v=v-1>>1]}return n},e.prototype.execute=function(e){this.nestedBestRanks=[];for(var t=0;t<e.ranks.length;t++)this.nestedBestRanks[t]=e.ranks[t].slice();var n=0,i=this.calculateCrossings(e);for(t=0;t<24&&n<2;t++){this.weightedMedian(t,e);var o=this.calculateCrossings(e);if(o<i){i=o,n=0;for(var r=0;r<this.nestedBestRanks.length;r++)for(var a=e.ranks[r],l=0;l<a.length;l++){var s=this.nestedBestRanks[r][(c=a[l]).temp[0]],d=!0;c.edges&&s&&!s.edges&&(d=!1),s&&d&&(this.nestedBestRanks[r][c.temp[0]]=c)}}else for(n++,r=0;r<this.nestedBestRanks.length;r++)for(a=e.ranks[r],l=0;l<a.length;l++){var c;this.setTempVariable(c=a[l],r,l)}if(0===i)break}var u=[],h=[];for(t=0;t<e.maxRank+1;t++)h[t]=[],u[t]=h[t];for(t=0;t<this.nestedBestRanks.length;t++)for(r=0;r<this.nestedBestRanks[t].length;r++)h[t].push(this.nestedBestRanks[t][r]);e.ranks=u},e.prototype.isVertex=function(e){return!(!e||!e.cell||!e.cell.inEdges&&!e.cell.outEdges)},e.prototype.weightedMedian=function(e,t){var n=e%2==0;if(n)for(var i=t.maxRank-1;i>=0;i--)this.medianRank(i,n);else for(i=1;i<t.maxRank;i++)this.medianRank(i,n)},e.prototype.getConnectedCellsOnLayer=function(e,t,n){void 0===n&&(n=!1);var i="nextLayerConnectedCells",o="connectsAsTarget";if(n&&(i="previousLayerConnectedCells",o="connectsAsSource"),e){if(this.isVertex(e)){if(null==e[i]){e[i]=[],e[i][0]=[];for(var r=0;r<e[o].length;r++){var a=e[o][r];void 0===a.maxRank&&(a.maxRank=-1),e[i][0].push(-1===a.maxRank||(n?a.minRank===t-1:a.maxRank===t+1)?n?a.target:a.source:a)}}return e[i][0]}if(null==e[i])for(e[i]=[],r=0;r<e.temp.length;r++)e[i][r]=[],e[i][r].push(r===(n?0:e.temp.length-1)?n?e.target:e.source:e);return e[i][t-e.minRank-1]}return null},e.prototype.medianValue=function(e,t){for(var n=[],i=0,o=0;o<e.length;o++)n[i++]=this.getTempVariable(e[o],t);if(n.sort(function(e,t){return e-t}),i%2==1)return n[Math.floor(i/2)];if(2===i)return(n[0]+n[1])/2;var r=i/2,a=n[r-1]-n[0],l=n[i-1]-n[r];return(n[r-1]*l+n[r]*a)/(a+l)},e.prototype.setTempVariable=function(e,t,n){e&&(e.temp[0]=n)},e.prototype.medianRank=function(e,t){for(var n=this.nestedBestRanks[e].length,i=[],o=[],r=0;r<n;r++){var a,l={medianValue:0};l.cell=s=this.nestedBestRanks[e][r],null!=(a=t?this.getConnectedCellsOnLayer(s,e):this.getConnectedCellsOnLayer(s,e,!0))&&0!==a.length?(l.medianValue=this.medianValue(a,t?e+1:e-1),i.push(l)):o[this.getTempVariable(s,e)]=!0}for(i.sort(this.compare),r=0;r<n;r++)if(null==o[r]&&i.length>0){var s=i.shift().cell;this.setTempVariable(s,e,r)}},e.prototype.compare=function(e,t){if(null!=e&&null!=t){if(t.medianValue>e.medianValue)return-1;if(t.medianValue<e.medianValue)return 1}return 0},e}(),IC=function(e){return e.sourcePoint||e.targetPoint||e.sourceID||e.targetID||e.sourcePortID||e.targetPortID||e.sourceDecorator||e.targetDecorator?zf:ry},PC=function(e){function t(t,n,i,o){return e.call(this,t,n,i,o)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks("")],t.prototype,"id",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"expanded",void 0),Object(O.__decorate)([Ks("")],t.prototype,"iconCss",void 0),Object(O.__decorate)([Ks("")],t.prototype,"title",void 0),Object(O.__decorate)([td(IC)],t.prototype,"symbols",void 0),t}(fd),RC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),t}(fd),MC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(O.__extends)(t,e),Object(O.__decorate)([Ks()],t.prototype,"width",void 0),Object(O.__decorate)([Ks()],t.prototype,"height",void 0),Object(O.__decorate)([Qs({},jd)],t.prototype,"offset",void 0),t}(fd),NC=function(e){function t(t,n){var i,o,r=e.call(this,t,n)||this;r.symbolTable={},r.childTable={},r.info="info",r.oldObject=null,r.laneTable={},r.isExpand=!1,r.isExpandMode=!1,r.isMethod=!1,r.paletteid=88123,r.checkOnRender=!1,r.helper=function(e){var t,n=r.selectedSymbol&&r.selectedSymbol.id||e.sender.target.id.split("_container")[0],i=r.symbolTable[n];return i&&r.selectedSymbol&&(r.selectedSymbols=r.selectedSymbol.id===i.id?i:r.selectedSymbol,r.getMousePosition(e.sender),(t=r.getSymbolPreview(r.selectedSymbols,e.sender,r.element)).setAttribute("paletteId",r.element.id)),t};for(var a=0;r&&r.palettes&&a<r.palettes.length;a++)for(var l=0;l<r.palettes[a].symbols.length;l++)o=t.palettes[a].symbols[l],(i=r.palettes[a].symbols[l])&&"UmlActivity"===i.shape.type&&km(o,i),(r.nodeDefaults||r.connectorDefaults)&&Im(i,o,i instanceof ry?r.nodeDefaults:r.connectorDefaults);return r}return Object(O.__extends)(t,e),t.prototype.onPropertyChanged=function(e,t){for(var n=!1,i=0,o=Object.keys(e);i<o.length;i++)switch(o[i]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":n=!0;break;case"enableSearch":if(e.enableSearch&&!Ka())this.createTextbox();else{var r=document.getElementById(this.element.id+"_search");r&&r.parentNode.removeChild(r)}break;case"palettes":for(var a=0,l=Object.keys(e.palettes);a<l.length;a++){var s=Number(l[a]);Ka()||this.accordionElement.items[s]||(this.accordionElement.items[s]={header:e.palettes[s].title||"",expanded:e.palettes[s].expanded,iconCss:e.palettes[s].iconCss||""}),e.palettes[s].height&&(document.getElementById(this.palettes[s].id+"_content").style.height=e.palettes[s].height+"px"),void 0!==e.palettes[s].iconCss&&(Ka()||(this.accordionElement.items[s].iconCss=e.palettes[s].iconCss||"",n=!0)),void 0===e.palettes[s].expanded||Ka()||(this.palettes[s].isInteraction?this.palettes[s].isInteraction=!1:(this.accordionElement.items[s].expanded=e.palettes[s].expanded,this.isExpand=!0),this.isExpandMode||this.isMethod||this.isExpand||(this.isExpand=!0)),Ka()&&null!==e.palettes[s].symbols&&(n=!0),Ka()&&null===e.palettes[s].symbols&&this.updateBlazorProperties(e)}break;case"enableAnimation":Ka()||(this.accordionElement.animation=this.enableAnimation?{expand:{duration:400},collapse:{duration:400}}:{expand:{duration:0},collapse:{duration:0}});break;case"expandMode":Ka()||(this.accordionElement.expandMode=this.expandMode,n=!0,this.isExpandMode=!0);break;case"allowDrag":this.allowDrag=e.allowDrag,this.allowDrag?(this.initDraggable(),this.draggable.helper=this.helper):this.draggable.helper=function(){return null}}if(n&&this.refreshPalettes(),this.isExpand&&!n){this.refresh(),this.isExpand=!1;for(var d=0;d<this.palettes.length;d++){var c=this.palettes[d].id;window[c]&&window[c].length>1&&(window[c][1].parentNode.removeChild(window[c][1]),window[c][1]=null)}}this.isMethod=!1},t.prototype.updateBlazorProperties=function(e){window&&window.Blazor&&window.sfBlazor.updateBlazorProperties({methodName:"UpdateBlazorProperties",paletteobj:{palette:e.palettes}},this)},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){var e=this;if(""===this.element.id){var t=document.getElementsByClassName("e-symbolpalette").length;this.element.id="symbolpalette_"+this.paletteid+"_"+t}if(this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&!Ka()&&this.createTextbox(),!Ka()){var n=Ay("div",{id:this.element.id+"_container"});this.accordionElement=new Jw({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.created=function(){e.checkOnRender=!0},this.accordionElement.expanded=function(t){var n=e.accordionElement.items.indexOf(t.item),i=e.allowServerDataBinding;e.allowServerDataBinding=!1,e.palettes[n].expanded=t.isExpanded,e.palettes[n].isInteraction=!0,e.allowServerDataBinding=i},this.accordionElement.expanding=function(t){if(e.checkOnRender){var n={element:t.element,content:t.content,index:t.index,cancel:!1,isExpanded:t.isExpanded,palette:e.palettes[t.index]};e.trigger("paletteExpanding",n),t.cancel=n.cancel}},this.element.appendChild(n)}window.measureElement&&(window.measureElement=null),jy(),this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new sb(this.element.id,new lb,!1),this.svgRenderer=new sb(this.element.id,new lb,!0),this.updatePalettes(),Ka()||this.accordionElement.appendTo("#"+this.element.id+"_container"),this.renderComplete(),Ka()&&this.element.classList.remove("e-symbolpalette-hidden")},t.prototype.getModuleName=function(){return"SymbolPalette"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e},t.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this);var t=document.getElementById(this.element.id+"_container");t&&(this.element.removeChild(t),window.measureElement&&(window.measureElement.usageCount-=1,window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null))),(t=document.getElementById(this.element.id+"_search"))&&t.parentNode.removeChild(t),this.element.classList.remove("e-symbolpalette")}},t.prototype.addPalettes=function(e){for(var t,n=0;n<e.length;n++){var i=this.allowServerDataBinding;this.isProtectedOnChange=!0,this.allowServerDataBinding=!1,t=new PC(this,"palettes",e[n],!0),this.palettes.push(t),this.initSymbols(t),this.allowServerDataBinding=i,this.isProtectedOnChange=!1,this.renderPalette(t)}this.bulkChanges={},Ka()||this.accordionElement.refresh()},t.prototype.removePalette=function(e){for(var t=0;t<this.palettes.length;t++)if(this.palettes[t].id===e){this.palettes.splice(t,1),Ka()||this.accordionElement.items.splice(t,1);break}},t.prototype.removePalettes=function(e){var t=this.allowServerDataBinding;this.allowServerDataBinding=!1;for(var n=0;n<e.length;n++)this.removePalette(e[n]);Ka()||this.accordionElement.refresh(),this.allowServerDataBinding=t},t.prototype.initSymbols=function(e){for(var t=[],n=0,i=0,o=e.symbols;i<o.length;i++){if("SwimLane"===(x=o[i]).shape.type){var r=x,a=x.shape,l="Horizontal"===a.orientation;if(a.isLane){this.laneTable[x.id]={height:l?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,width:n=l?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2};var s=a.lanes[0].header,d=a.lanes[0].style,c=s.style,u={id:"header"+Fy(),shape:{type:"Basic",shape:"Rectangle"},width:l?s.width:r.width,height:l?r.height:s.height,style:c,annotations:[{content:s.annotation.content}]};u.offsetX=u.width/2,u.offsetY=u.height/2,this.addPaletteItem(e.id,u);var h={id:"lane"+Fy(),shape:{type:"Basic",shape:"Rectangle"},width:l?r.width-s.width:r.width,height:l?r.height:r.height-s.height,style:d};h.offsetX=l?u.width+h.width/2:h.width/2,h.offsetY=l?h.height/2:u.height+h.height/2,this.addPaletteItem(e.id,h),r.children=[u.id,h.id]}else a.isPhase&&(n=r.width?r.width:this.symbolWidth,x.shape.type="Path",x.shape.data=l?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if(x instanceof ry){var p=rb(this.getNodeDefaults);p&&p(x,this)}else if(x instanceof zf){var f=rb(this.getConnectorDefaults);f&&f(x,this)}this.symbolTable[x.id]=x,x instanceof ry&&x.children&&t.push(x)}for(var g=0;g<t.length;g++)for(var m=void 0,v=0;v<t[g].children.length;v++)(m=this.symbolTable[t[g].children[v]])&&(this.childTable[m.id]=m,m.parentId=t[g].id);for(var y=0,b=e.symbols;y<b.length;y++)(x=b[y])instanceof ry&&x.children||this.prepareSymbol(x);for(var w=0,C=t;w<C.length;w++){var x;this.prepareSymbol(x=C[w])}},t.prototype.renderPalette=function(e){var t=Ka()?"overflow:auto;":"display:none;overflow:auto;";e.height&&(t+="height:"+e.height+"px");var n,i=document.getElementById(e.id);Ka()&&null!=i?(n=Ay("div",{id:e.id+"_content",style:t,class:"e-remove-palette"}),i.appendChild(n)):(n=Ay("div",{id:e.id,style:t,class:"e-remove-palette"}),this.element.appendChild(n)),Ka()||this.accordionElement.items.push({header:e.title,expanded:e.expanded,content:"#"+e.id,iconCss:e.iconCss}),this.renderSymbols(e,n)},t.prototype.addPaletteItem=function(e,t,n){t=Yy(t);for(var i=0;i<this.palettes.length;i++){var o=this.palettes[i];if(-1!==o.id.indexOf(e)){for(var r=[void 0,o,"symbols",{},!0],a=new(Function.prototype.bind.apply(IC(t),r)),l=0;l<Object.keys(t).length;l++){var s=this.allowServerDataBinding;this.allowServerDataBinding=!1,a[Object.keys(t)[l]]=t[Object.keys(t)[l]],this.allowServerDataBinding=s}Im(a,t,a instanceof ry?this.nodeDefaults:this.connectorDefaults),o.symbols.push(a);var d=this.allowServerDataBinding;if(this.allowServerDataBinding=!1,this.prepareSymbol(a),this.allowServerDataBinding=d,this.symbolTable[a.id]=a,n)this.childTable[a.id]=a;else{var c=void 0;(c=Ka()?document.getElementById(o.id+"_content"):document.getElementById(o.id))&&c.appendChild(this.getSymbolContainer(a,c))}break}}},t.prototype.removePaletteItem=function(e,t){for(var n,i=0;i<this.palettes.length;i++){var o=this.palettes[i];if(-1!==o.id.indexOf(e))for(var r=0,a=o.symbols;r<a.length;r++){var l=a[r];if(-1!==l.id.indexOf(t)){var s=o.symbols.indexOf(l);if(o.symbols.splice(s,1),l.children)for(var d=l.children,c=0;c<d.length;c++)delete this.symbolTable[d[c]];delete this.symbolTable[l.id];var u=document.getElementById(l.id+"_container");u.parentNode.removeChild(u),n=!0;break}}if(n)break}},t.prototype.prepareSymbol=function(e){var t,n,i,o,r,a=new _v,l=e,s=new qc,d=e instanceof ry?e.initContainer():null;d&&!d.children&&(d.children=[]);var c=rb(this.getSymbolTemplate);if(c&&(r=c(e)),r||(l.children?r=this.getContainer(l,d):(r=e.init(this),e instanceof ry&&e.parentId&&d.children.push(r))),!e.parentId){var u={width:this.symbolWidth,height:this.symbolHeight},h=rb(this.getSymbolInfo);if(h?u=h(e):Ka()&&(u=this.getBlazorSymbolInfo(e,u)),u=u||this.symbolInfo||{},e.shape&&e.shape.isPhase&&(u.width=u.width||this.symbolWidth,u.height=u.height||this.symbolHeight),r.relativeMode="Object",r.horizontalAlignment=r.verticalAlignment="Center",s.style.strokeColor=s.style.fill="none",s.children=[r],r.measure(new Bd),r.arrange(r.desiredSize),t=u.width=u.width||(void 0!==l.width?r.actualSize.width:void 0)||this.symbolWidth,i=u.height=u.height||(void 0!==l.height?r.actualSize.height:void 0)||this.symbolHeight,void 0!==t&&void 0!==i){var p=t,f=i,g=!!e.shape.isPhase;void 0!==this.symbolWidth?p=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:t+=l.style.strokeWidth,void 0!==this.symbolHeight?f=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:i+=l.style.strokeWidth,u.description&&""!==u.description.text&&(f-=20),n=p/(!g&&r.width||t),o=f/(!g&&r.height||i),u.fit&&(n=p/u.width,o=f/u.height),t=p,i=f,n=o=Math.min(n,o),s.width=t,s.height=i,r.width=u.width,r.height=u.height,this.scaleSymbol(e,s,n,o,t,i)}else{var m=void 0;e instanceof zf&&(m=Vu(e)),r.width=e.width||m?m.width:r.actualSize.width,r.height=e.height||m?m.height:r.actualSize.height}e.wrapper=a,a.children=[s],r.pivot=a.pivot={x:0,y:0},a.id=r.id+"_symbol",a.style.fill=a.style.strokeColor="transparent",e instanceof ry?(a.offsetX=e.style.strokeWidth/2,a.offsetY=e.style.strokeWidth/2):(a.offsetX=.5,a.offsetY=.5),this.getSymbolDescription(u,t,a),a.measure(new Bd),a.arrange(a.desiredSize),u.width=u.width||r.actualSize.width,u.height=u.height||r.actualSize.height,e[this.info]=u}e.parentId&&(d.measure(new Bd(l.width,l.height)),d.arrange(d.desiredSize))},t.prototype.getBlazorSymbolInfo=function(e,t){var n=e.symbolInfo;return n&&(t.description=n.description||this.symbolInfo.description,t.fit=n.fit||this.symbolInfo.fit,t.height=n.height||this.symbolInfo.height,t.width=n.width||this.symbolInfo.width,t.tooltip=n.tooltip||this.symbolInfo.tooltip,t.template=n.template||this.symbolInfo.template),t},t.prototype.getContainer=function(e,t){var n;t.measureChildren=!1;var i=e.children;t.children=[];for(var o=0;o<i.length;o++)this.symbolTable[i[o]]&&t.children.push(this.symbolTable[i[o]].wrapper);return t.measure(new Bd(e.width,e.height)),t.arrange(t.desiredSize),0===t.bounds.x&&0===t.bounds.y||(sv(e,(n=t.bounds).x,n.y,this.symbolTable,!1,this),t=this.getContainer(e,t)),t},t.prototype.getSymbolDescription=function(e,t,n){if(e&&e.description&&e.description.text){var i=new Gc;e.description.overflow=e.description.overflow||"Ellipsis",e.description.wrap=e.description.wrap||"WrapWithOverflow",i.id=n.id+"_text",i.content=e.description.text,i.width=t,i.height=20,i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.style.textWrapping=e.description.wrap,i.style.textOverflow=e.description.overflow,i.margin={left:0,right:0,top:0,bottom:5},n.children.push(i)}},t.prototype.renderSymbols=function(e,t){for(var n=0,i=e.symbols;n<i.length;n++){var o=i[n];o.parentId||this.getSymbolContainer(o,t)}},t.prototype.getSymbolPreview=function(e,t,n){var i,o,r;this.allowServerDataBinding=!1;var a=e.wrapper.children[0].desiredSize.width+e.style.strokeWidth,l=e.wrapper.children[0].desiredSize.height+e.style.strokeWidth,s=e.wrapper.children[0].children[0],d=e.previewSize;if(e&&(d.width||d.height)||void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){o=(a=(d.width||this.symbolPreview.width||a)-e.style.strokeWidth)/s.actualSize.width,r=(l=(d.height||this.symbolPreview.height||l)-e.style.strokeWidth)/s.actualSize.height,o=r=Math.min(o,r);var c=s.actualSize.width*o,u=s.actualSize.height*r;e.wrapper.children[0].width=a,e.wrapper.children[0].height=l,this.measureAndArrangeSymbol(s,e instanceof ry),this.scaleSymbol(e,e.wrapper.children[0],o,r,c,u,!0),a=c,l=u}var h={x:s.offsetX,y:s.offsetY};s.offsetX=s.offsetY=e.style.strokeWidth/2,s.pivot={x:0,y:0},this.measureAndArrangeSymbol(s,e instanceof ry);var p,f=Ay("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(f);var g="margin:5px;";if("Native"===e.shape.type){i=Oy("svg",{id:e.id+"_preview",width:Math.ceil(a)+1,height:Math.ceil(l)+1});var m=Oy("g",{id:e.id+"_g"});i.appendChild(m),f.appendChild(i),this.svgRenderer.renderElement(s,m,void 0,void 0,i)}else if("HTML"===e.shape.type)p=this.getHtmlSymbol(e,i,f,l,a,!0);else if(e.children&&e.children.length>0&&Om(e,"HTML",this.childTable))p=this.getGroupParent(e,i,f,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!0);else{i=ab.createCanvas(e.id+"_preview",2*(Math.ceil(a)+e.style.strokeWidth+1),2*(Math.ceil(l)+e.style.strokeWidth+1)),f.appendChild(i),g+="Basic"===e.shape.type||"Flow"===e.shape.type?"transform: scale(0.5) translate(-"+i.width/2+"px, -"+i.height/2+"px);":"transform:scale(0.5);",i.setAttribute("transform-origin","0 0");var v=2;e instanceof zf&&(v=1.9),i.getContext("2d").setTransform(v,0,0,v,0,0),this.diagramRenderer.renderElement(s,i,void 0)}return Hy(p&&("HTML"===e.shape.type||e.children&&e.children.length>0)?p:i,g),s.offsetX=h.x,s.offsetY=h.y,this.allowServerDataBinding=!0,f},t.prototype.measureAndArrangeSymbol=function(e,t){e.children&&!t&&(e.children[0].transform=Ic.Self),e.measure(new Bd),e.arrange(e.desiredSize),e.children&&(e.children[0].transform=Ic.Parent)},t.prototype.updateSymbolSize=function(e,t,n){var i=e.wrapper.children[0].children[0],o=e.style.strokeWidth;i.width=(t||i.width)-(o+1),i.height=(n||i.height)-(o+1),e.wrapper.measure(new Bd),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.getSymbolContainer=function(e,t,n){var i,o,r,a=this.symbolTable[e.id][this.info],l=this.getSymbolSize(e,a),s=l.width+1,d=l.height+1,c=Ay("div",{id:e.id+"_container",style:"width:"+s+"px;height:"+d+"px;float:left;overflow:hidden",title:a.tooltip?a.tooltip:e.id});if(t.appendChild(c),"Native"===e.shape.type)i=Oy("svg",{id:e.id,width:Math.ceil(e.wrapper.actualSize.width)+1,height:Math.ceil(e.wrapper.actualSize.height)+1}),o=Oy("g",{id:e.id+"_g"}),i.appendChild(o),c.appendChild(i),this.updateSymbolSize(e),this.svgRenderer.renderElement(e.wrapper,o,void 0,void 0,i);else if("HTML"===e.shape.type)r=this.getHtmlSymbol(e,i,c,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else if(e.children&&e.children.length>0&&Om(e,"HTML",this.childTable))r=this.getGroupParent(e,i,c,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else{i=ab.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),c.appendChild(i);var u=2;e instanceof zf&&(u=1.9),i.getContext("2d").setTransform(u,0,0,u,0,0),this.diagramRenderer.renderElement(e.wrapper,o||i,void 0,void 0,void 0,void 0,!0,void 0,!0)}if(!n){var h=e.wrapper.actualSize.width+e.style.strokeWidth,p=e.wrapper.actualSize.height+e.style.strokeWidth,f="pointer-events:none;transform-origin:0 0;overflow:hidden;";return f+=e.shape.isPhase?"Horizontal"===e.shape.orientation?"margin-left:"+Math.max(this.symbolMargin.left,(s-h)/2)+"px;margin-top:"+l.height/2+"px;":"margin-left:"+l.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(d-p)/2)+"px;":"margin-left:"+Math.max(this.symbolMargin.left,(s-h)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(d-p)/2)+"px;",i instanceof HTMLCanvasElement&&(f+="transform:scale(.5,.5);"),Hy(r&&("HTML"===e.shape.type||e.children&&e.children.length>0)?r:i,f),c.classList.add("e-symbol-draggable"),c}return i},t.prototype.getGroupParent=function(e,t,n,i,o,r){var a=Ay("div",{id:e.id+(r?"_html_div_preview":"_html_div")}),l=Ay("div",{id:e.id+(r?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(o+1)+"px;height:"+Math.ceil(i+1)+"px;position:absolute",class:"e-html-layer"}),s=Ay("div",{id:e.id+(r?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(o+1)+"px;height:"+Math.ceil(i+1)+"px;position:absolute"});return l.appendChild(s),a.appendChild(l),t=ab.createCanvas(r?e.id+"_preview":e.id,Math.ceil(o)+1,Math.ceil(i)+1),a.appendChild(t),n.appendChild(a),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,l),a},t.prototype.getHtmlSymbol=function(e,t,n,i,o,r){var a=Ay("div",{id:e.id+(r?"_html_div_preview":"_html_div")}),l=Ay("div",{id:e.id+(r?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(o+1)+"px;height:"+Math.ceil(i+1)+"px;position:absolute",class:"e-html-layer"}),s=Ay("div",{id:e.id+(r?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(o+1)+"px;height:"+Math.ceil(i+1)+"px;position:absolute"});return l.appendChild(s),a.appendChild(l),t=ab.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),n.appendChild(t),t.getContext("2d").setTransform(2,0,0,2,0,0),a.appendChild(t),n.appendChild(a),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,l),a},t.prototype.getSymbolSize=function(e,t){var n=e.wrapper.actualSize.width,i=e.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(n=this.symbolWidth,i=Math.max(this.symbolHeight,i)):(n+=this.symbolMargin.left+this.symbolMargin.right+e.style.strokeWidth,i+=this.symbolMargin.top+this.symbolMargin.bottom+e.style.strokeWidth),new Bd(n,i)},t.prototype.getMousePosition=function(e){var t,n,i;return-1!==e.type.indexOf("touch")?(t=(i=e).changedTouches[0].clientY-this.element.offsetTop,n=i.changedTouches[0].clientX-this.element.offsetLeft):(t=e.clientY-this.element.offsetTop,n=e.clientX-this.element.offsetLeft),{x:n,y:t}},t.prototype.mouseMove=function(e,t){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var n=e.target.id.split("_container")[0];if(this.symbolTable[n]){var i=document.getElementById(n+"_container");i.classList.add("e-symbol-hover"),this.highlightedSymbol=i}e.preventDefault()},t.prototype.mouseUp=function(e){if(this.isMethod=!0,e&&e.target)if("iconSearch"===e.srcElement.id){var t=document.getElementById("iconSearch");t.classList.contains("e-clear-searchtext")&&(t.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",Ka()&&document.getElementById(this.element.id+"_search_content").classList.add("e-symbolpalette-search-hidden"),this.searchPalette(""))}else{var n=e.target.id.split("_container")[0];n&&this.selectedSymbol?(this.trigger("paletteSelectionChange",{oldValue:this.oldObject,newValue:n}),this.oldObject=n,e.preventDefault()):""!==this.oldObject&&(this.oldObject="")}},t.prototype.keyUp=function(e){var t=this;if(this.enableSearch){var n=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",Ka()&&e.target instanceof HTMLInputElement&&(""===e.target.value?document.getElementById(this.element.id+"_search_content").classList.add("e-symbolpalette-search-hidden"):document.getElementById(this.element.id+"_search_content").classList.remove("e-symbolpalette-search-hidden")),!e||"Enter"!==e.key&&13!==e.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.target instanceof HTMLInputElement&&(n.searchPalette(e.target.value),t.timer=null)},500)):e.target instanceof HTMLInputElement&&this.searchPalette(e.target.value)}},t.prototype.mouseDown=function(e){var t=e.target.id.split("_container")[0];if(this.selectedSymbol){var n,i=document.getElementById(this.selectedSymbol.id+"_container");t!==this.selectedSymbol.id&&i&&i.classList.remove("e-symbol-selected"),(n=document.getElementById(this.selectedSymbol.id+"_container"))&&(n.style.backgroundColor=""),this.selectedSymbol=null}this.symbolTable[t]&&((n=document.getElementById(t+"_container")).classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[t],e.preventDefault())},t.prototype.keyDown=function(e){if(e&&"Escape"===e.key){var t=this.draggable.helperElement;t&&t.parentNode&&(t.parentNode.removeChild(t),this.draggable.intDestroy())}},t.prototype.initDraggable=function(){this.allowDrag&&(this.draggable=new Cd(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(e){var t=Iy(e.target,"e-droppable");t&&t.classList.contains("e-diagram")&&t.ej2_instances[0].droppable.over(e)},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}}))},t.prototype.dragStart=function(e){var t=this.helper[0];t&&t.setAttribute("paletteId",this.element.id),Ka()&&e.bindEvents(e.dragElement)},t.prototype.dragStop=function(e){Iy(e.target,"e-diagram")||Ls(e.helper)},t.prototype.scaleSymbol=function(e,t,n,i,o,r,a){if(e instanceof zf){var l=e.wrapper;e.wrapper=t.children[0];for(var s=e.scale(n,i,o,r,t.children[0]),d=o/2-t.children[0].children[0].offsetX+s.x/2,c=r/2-t.children[0].children[0].offsetY+s.y/2,u=0,h=t.children[0].children;u<h.length;u++){var p=h[u];p.offsetX+=d,p.offsetY+=c,p.staticSize=!1}e.wrapper=l}else if("Bpmn"===e.shape.type&&this.bpmnModule)l=e.wrapper,e.wrapper=t,t.children[0].width=o,t.children[0].height=r,this.bpmnModule.updateBPMN({width:o,height:r},e,e,null),e.wrapper=l;else if(e.children){var f,g,m=e.children;if(!a)for(var v=void 0,y=void 0,b=0;b<m.length;b++)(y=t.children[0].children[b])&&(y.children[0].children&&this.measureChild(y),y.width=(v=this.symbolTable[y.id]).width,y.height=v.height,y.measure(new Bd),y.arrange(y.children[0].desiredSize));if(f=o/t.children[0].desiredSize.width,g=r/t.children[0].desiredSize.height,t.children[0].measure(new Bd),t.children[0].arrange(t.children[0].desiredSize),!a){var w=void 0;for(b=0;b<m.length;b++)(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,f,g,e),this.scaleGroup(w,f,g,e))}if(a){v=void 0;var C=void 0,x=void 0;for(w=void 0,b=0;b<m.length;b++)v=this.symbolTable[m[b]],C=o/e.wrapper.children[0].desiredSize.width,x=r/e.wrapper.children[0].desiredSize.height,(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,C,x,e,!0),this.scaleGroup(w,C,x,e,!0));e.wrapper.children[0].measure(new Bd),e.wrapper.children[0].arrange(e.wrapper.children[0].desiredSize)}}else!function e(t,n,i,o){if(void 0!==t.width&&void 0!==t.height&&(t.width*=n,t.height*=i),t instanceof Fc){var r=Qd(),a=o.width||o.actualSize.width,l=o.height||o.actualSize.height;if(void 0!==a&&void 0!==l){var s={x:o.offsetX-a*o.pivot.x+a*o.pivot.x,y:o.offsetY-l*o.pivot.y+l*o.pivot.y};s=ob(o.rotateAngle,o.offsetX,o.offsetY,s),ec(r,-o.rotateAngle,s.x,s.y),tc(r,n,i,s.x,s.y),ec(r,o.rotateAngle,s.x,s.y);for(var d=0,c=t.children;d<c.length;d++){var u=c[d];if(void 0!==u.width&&void 0!==u.height){var h=$d(r,{x:u.offsetX,y:u.offsetY});u.offsetX=h.x,u.offsetY=h.y,e(u,n,i,o)}}}}}(t.children[0],n,i,t)},t.prototype.scaleChildren=function(e,t,n,i,o){for(var r,a=0;a<e.children.length;a++)(r=e.children[a]).children[0].children?this.scaleChildren(r,t,n,i,o):this.scaleGroup(r,t,n,i,o)},t.prototype.measureChild=function(e){for(var t,n,i=0;i<e.children.length;i++)(t=e.children[i]).children[0].children?this.measureChild(t):(t.width=(n=this.symbolTable[t.id]).width,t.height=n.height,t.measure(new Bd),t.arrange(t.children[0].desiredSize))},t.prototype.scaleGroup=function(e,t,n,i,o){e.width=e.width*t,e.height=e.height*n,e.offsetX=o?e.offsetX*t-i.style.strokeWidth:e.offsetX*t+i.style.strokeWidth/2,e.offsetY=o?e.offsetY*n-i.style.strokeWidth:e.offsetY*n+i.style.strokeWidth/2,e.measure(new Bd),e.arrange(e.children[0].desiredSize)},t.prototype.refreshPalettes=function(){Ka()||(this.accordionElement.items=[]),function(e,t){var n;for(n=t?document.getElementById(t).getElementsByClassName("e-remove-palette"):document.getElementsByClassName("e-remove-palette");n.length>0;)n[0].parentNode.removeChild(n[0])}(0,this.element.id),this.updatePalettes(),Ka()||this.accordionElement.dataBind()},t.prototype.updatePalettes=function(){for(var e=0;e<this.palettes.length;e++){var t=this.palettes[e];this.initSymbols(t),this.renderPalette(t)}},t.prototype.createTextbox=function(){var e=Ay("div",{id:this.element.id+"_search"});Hy(e,"backgroundColor:white;height:30px"),e.className="e-input-group",this.element.appendChild(e);var t=Ay("input",{});t.placeholder="Search Shapes",t.id="textEnter",Hy(t,"width:100%;height:auto"),t.className="e-input",e.appendChild(t);var n=Ay("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});e.appendChild(n)},t.prototype.getFilterSymbol=function(e){for(var t=[],n=0;n<e.length;n++)for(var i=0;i<this.ignoreSymbolsOnSearch.length;i++)this.ignoreSymbolsOnSearch[i]!==e[n].id&&t.push(e[0]);return t},t.prototype.searchPalette=function(e){var t,n=[],i=document.getElementById("SearchPalette");if(i)for(var o=i.children.length-1;o>=0;o--)i.removeChild(i.children[o]);for(var r=0;r<this.palettes.length;r++)for(var a=this.palettes[r],l=0;l<a.symbols.length;l++){var s=a.symbols[l];""!==e&&-1!==s.id.toLowerCase().indexOf(e.toLowerCase())&&n.push(s)}var d=rb(this.filterSymbols);if(d&&(n=d(n)||[]),this.ignoreSymbolsOnSearch&&this.ignoreSymbolsOnSearch.length>0&&(n=this.getFilterSymbol(n)),i||Ka()||(i=t=this.createSearchPalette(t)),n.length>0)for(var c=0,u=n;c<u.length;c++)this.getSymbolContainer(u[c],i);else if(""!==e){var h=Ay("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});h.innerHTML="No Items To Display",i.appendChild(h)}else if(document.getElementById("iconSearch").className="e-input-group-icon e-search e-icons",!Ka()){this.accordionElement.removeItem(0);var p=document.getElementById("SearchPalette");p&&p.remove()}},t.prototype.createSearchPalette=function(e){return e=Ay("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(e),this.accordionElement.addItem({header:"Search Results",expanded:!0,content:"#SearchPalette"},0),e},t.prototype.wireEvents=function(){var e=Il.touchEndEvent,t=Il.touchMoveEvent;Pl.add(this.element,Il.touchStartEvent,this.mouseDown,this),Pl.add(this.element,t,this.mouseMove,this),Pl.add(this.element,e,this.mouseUp,this),Pl.add(this.element,"keyup",this.keyUp,this),Pl.add(document,"keydown",this.keyDown,this),this.initDraggable()},t.prototype.unWireEvents=function(){var e=Il.touchEndEvent,t=Il.touchMoveEvent;Pl.remove(this.element,Il.touchStartEvent,this.mouseDown),Pl.remove(this.element,t,this.mouseMove),Pl.remove(this.element,e,this.mouseUp),Pl.remove(this.element,"keyup",this.keyUp),Pl.remove(document,"keydown",this.keyDown)},Object(O.__decorate)([Ks("S")],t.prototype,"accessKey",void 0),Object(O.__decorate)([Ks("100%")],t.prototype,"width",void 0),Object(O.__decorate)([Ks("100%")],t.prototype,"height",void 0),Object(O.__decorate)([ed([],PC)],t.prototype,"palettes",void 0),Object(O.__decorate)([Ks()],t.prototype,"getSymbolInfo",void 0),Object(O.__decorate)([Ks({fit:!0})],t.prototype,"symbolInfo",void 0),Object(O.__decorate)([Ks()],t.prototype,"filterSymbols",void 0),Object(O.__decorate)([Ks()],t.prototype,"ignoreSymbolsOnSearch",void 0),Object(O.__decorate)([Ks()],t.prototype,"getSymbolTemplate",void 0),Object(O.__decorate)([Ks()],t.prototype,"symbolWidth",void 0),Object(O.__decorate)([Ks()],t.prototype,"symbolHeight",void 0),Object(O.__decorate)([Qs({left:10,right:10,top:10,bottom:10},cc)],t.prototype,"symbolMargin",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"allowDrag",void 0),Object(O.__decorate)([Qs({},MC)],t.prototype,"symbolPreview",void 0),Object(O.__decorate)([Qs({},RC)],t.prototype,"symbolDragSize",void 0),Object(O.__decorate)([Ks(!1)],t.prototype,"enableSearch",void 0),Object(O.__decorate)([Ks(!0)],t.prototype,"enableAnimation",void 0),Object(O.__decorate)([Ks("Multiple")],t.prototype,"expandMode",void 0),Object(O.__decorate)([nd()],t.prototype,"paletteSelectionChange",void 0),Object(O.__decorate)([nd()],t.prototype,"paletteExpanding",void 0),Object(O.__decorate)([Ks()],t.prototype,"getNodeDefaults",void 0),Object(O.__decorate)([Ks()],t.prototype,"nodeDefaults",void 0),Object(O.__decorate)([Ks()],t.prototype,"getConnectorDefaults",void 0),Object(O.__decorate)([Ks()],t.prototype,"connectorDefaults",void 0),t}(vd),LC=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.mode="Canvas",i.id="overview",i.actionName="",i.startPoint=null,i.currentPoint=null,i.prevPoint=null,i.scale=null,i.inAction=!1,i.viewPortRatio=1,i.horizontalOffset=0,i.verticalOffset=0,i.model={},i.event=!0,i.overviewid=88123,i.model={width:i.width,height:i.height},i}return Object(O.__extends)(t,e),t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"sourceID":this.setParent(e.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-overview").length;this.element.id="overview_"+this.overviewid+"_"+e}this.element.style.background="transparent",this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new sb(this.element.id,new lb,!1),this.renderCanvas(),this.setParent(this.sourceID),this.renderComplete()},t.prototype.getSizeValue=function(e){return e.toString().indexOf("px")>0||e.toString().indexOf("%")>0?e.toString():e.toString()+"px"},t.prototype.renderCanvas=function(e){var t=document.getElementById(this.element.id+"_canvas");t||(t=Ay("div",{}),this.element.appendChild(t)),By(t,{id:this.element.id+"_canvas",class:"drawing",style:"position:relative; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"}),this.element.setAttribute("tabindex",String(0)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=t},t.prototype.setParent=function(e){var t=document.getElementById(e);if(this.parent){var n=this.parent;this.parent=null,n.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(t,"ej2_instances"),this.parent&&this.parent.setOverview(this)},t.prototype.getDiagram=function(e,t){for(var n,i=e[t].length,o=0;o<i;o++)if(Py(e[t][o].element,"e-diagram")){n=e[t][o];break}return n},t.prototype.unWireEvents=function(){var e=Il.touchMoveEvent,t=Il.isPointer?"pointerleave":"mouseleave",n=Il.touchEndEvent;Pl.remove(this.element,Il.touchStartEvent,this.mouseDown),Pl.remove(this.element,e,this.mouseMove),Pl.remove(this.element,n,this.mouseUp),Pl.remove(this.element,t,this.documentMouseUp),Pl.remove(window,"resize",this.windowResize);var i=document.getElementById(this.sourceID+"content");i&&Pl.remove(i,"scroll",this.scrolled)},t.prototype.wireEvents=function(){var e=Il.touchEndEvent,t=Il.touchMoveEvent,n=Il.isPointer?"pointerleave":"mouseleave";Pl.add(this.element,Il.touchStartEvent,this.mouseDown,this),Pl.add(this.element,t,this.mouseMove,this),Pl.add(this.element,e,this.mouseUp,this),Pl.add(this.element,n,this.documentMouseUp,this),Pl.add(window,"resize",this.windowResize,this);var i=document.getElementById(this.sourceID+"content");i&&Pl.add(i,"scroll",this.scrolled,this)},t.prototype.renderDocument=function(e){e.canvas=this.canvas;var t=document.getElementById(this.canvas.id+"_svg");t&&t.parentNode.removeChild(t);var n=Oy("svg",{id:this.canvas.id+"_svg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",class:"overview_svg"});this.svg=n,e.svg=n,e.canvas.appendChild(n);var i=document.getElementById(this.element.id),o=i.clientWidth,r=i.clientHeight,a=i.getBoundingClientRect(),l=window.screenX<0?-1*window.screenX:window.screenX,s=window.screenY<0?-1*window.screenY:window.screenY;if(0===o){var d=Math.floor(window.innerWidth-l-Math.floor(a.left));o=d>0?d:Math.floor(window.innerWidth)}if(0===r){var c=Math.floor(window.innerHeight-s-Math.floor(a.top));r=c>0?c:Math.floor(window.innerHeight)}o>0&&(n.setAttribute("width",String(o)),this.model.height=r),r>0&&(n.setAttribute("height",String(r)),this.model.width=o),e.diagramLayerDiv||(e.diagramLayerDiv=Ay("div",{}),document.getElementById(this.element.id),e.diagramLayer=ab.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),e.diagramLayer.setAttribute("style","position:absolute; left:0px;  top:0px "),e.diagramLayerDiv.appendChild(e.diagramLayer),e.canvas.appendChild(e.diagramLayerDiv)),By(e.diagramLayerDiv,{id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"}),this.renderHtmlLayer(e.canvas),this.renderNativeLayer(e.canvas,e),this.addOverviewRectPanel(e)},t.prototype.removeDocument=function(e){var t=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(t);var n=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(n);var i=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(i),e.diagramLayerDiv=null,e.diagramLayer=null},t.prototype.renderHtmlLayer=function(e){var t=Ay("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),n=Ay("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"});return t.appendChild(n),e.appendChild(t),t},t.prototype.renderNativeLayer=function(e,t){if(!document.getElementById(this.element.id+"_nativeLayer_svg")){var n=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),i=Oy("g",{id:this.element.id+"_nativeLayer"});n.appendChild(i),t.diagramLayerDiv.appendChild(n),Ly(n,{class:"e-native-layer"})}},t.prototype.addOverviewRectPanel=function(e){var t=document.getElementById(this.canvas.id+"_overviewsvg");t&&t.parentNode.removeChild(t),t=Oy("svg",{id:this.canvas.id+"_overviewsvg",class:"overviewsvg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height}),e.canvas.appendChild(t);var n=Oy("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});t.appendChild(n);var i=Oy("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});i.setAttribute("style"," pointer-events: none; "),n.appendChild(i);var o=Oy("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});n.appendChild(o);var r=Oy("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});o.appendChild(r),this.renderOverviewCorner("left",o),this.renderOverviewCorner("right",o),this.renderOverviewCorner("top",o),this.renderOverviewCorner("bottom",o),this.renderOverviewCorner("topleft",o),this.renderOverviewCorner("topright",o),this.renderOverviewCorner("bottomleft",o),this.renderOverviewCorner("bottomright",o)},t.prototype.renderOverviewCorner=function(e,t){var n,i=Oy(n="top"===e||"bottom"===e||"right"===e||"left"===e?"rect":"circle",{id:this.canvas.id+"visible"+e});t.appendChild(i);var o=Oy(n,{id:this.canvas.id+e,class:"overviewresizer",fill:"transparent"});t.appendChild(o)},t.prototype.updateOverviewRectangle=function(){var e=this.currentPoint.x-this.prevPoint.x,t=this.currentPoint.y-this.prevPoint.y,n=new Bd;n.width=0,n.height=0;var i=0,o=0;switch(this.resizeDirection){case"left":n.width-=e,n.height-=e/this.viewPortRatio,i=e,o=e/this.viewPortRatio,o/=2;break;case"right":n.width+=e,n.height+=e/this.viewPortRatio,o=e/this.viewPortRatio,o/=-2;break;case"top":n.height-=t,n.width-=t*this.viewPortRatio,o=t,i=t*this.viewPortRatio,i/=2;break;case"bottom":n.height+=t,n.width+=t*this.viewPortRatio,i=t*this.viewPortRatio,i/=-2;break;case"topleft":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,n.width-=e,n.height-=t,i=e,o=t;break;case"topright":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,o=t,n.width+=e,n.height-=t;break;case"bottomleft":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,i=e,n.width-=e,n.height+=t;break;case"bottomright":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,n.width+=e,n.height+=t}this.updateHelper(i,o,n,void 0,void 0)},t.prototype.updateHelper=function(e,t,n,i,o){var r,a,l,s,d,c=this.element.getElementsByTagName("svg")[2].getElementById("helper");n?(r=(l=c.getBBox()).x+e,a=l.y+t,i=l.width+n.width,o=l.height+n.height):(s=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x,d=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y,Math.abs(d)>Math.abs(s)?s=this.viewPortRatio*d:d=s/this.viewPortRatio,l=c.getBBox(),r=this.startPoint.x>this.currentPoint.x?l.x-s:l.x,a=this.startPoint.y>this.currentPoint.y?l.y-d:l.y,i=l.width+s,o=l.height+d),Ly(this.helper,{id:this.helper.id,x:r,y:a,width:Math.max(0,i),height:Math.max(0,o)})},t.prototype.updateOverviewrect=function(e,t,n,i){By(document.getElementById(this.canvas.id+"overviewrect"),{x:e,y:t,width:Math.max(1,n),height:Math.max(1,i)}),this.updateOverviewCorner("top",e+8,t+1,Math.max(0,n-16),2),this.updateOverviewCorner("bottom",e+8,t+i+3,Math.max(0,n-16),2),this.updateOverviewCorner("left",e-2,t+11,2,Math.max(0,i-16)),this.updateOverviewCorner("right",e+n,t+11,2,Math.max(0,i-16)),this.updateOverviewCorner("topleft",e,t+3,5,5),this.updateOverviewCorner("topright",e+n,t+3,5,5),this.updateOverviewCorner("bottomleft",e,t+i+3,5,5),this.updateOverviewCorner("bottomright",e+n,t+i+3,5,5)},t.prototype.updateOverviewCorner=function(e,t,n,i,o){var r,a,l=document.getElementById(this.canvas.id+"visible"+e);"top"===e||"bottom"===e||"right"===e||"left"===e?(r={x:t,y:n,width:i,height:o,fill:"#ED1C24"},a={x:t-2,y:n-2,width:2===i?4:i,height:2===o?4:o}):(r={cx:t,cy:n,r:4,fill:"#ED1C24"},a={cx:t,cy:n,r:6,fill:"transparent"}),By(l,r),By(document.getElementById(this.canvas.id+e),a)},t.prototype.translateOverviewRectangle=function(){var e=Number(this.model.width),t=Number(this.model.height),n=this.currentPoint.x-this.prevPoint.x,i=this.currentPoint.y-this.prevPoint.y,o=(Math.min(this.parent.scroller.viewPortWidth/e,this.parent.scroller.viewPortHeight/t),this.element.getElementsByClassName("overviewsvg")[0].getElementById(this.canvas.id+"overviewrect").getBBox()),r=o.x+n,a=o.y+i,l=o.width,s=o.height;this.updateOverviewrect(r,a,l,s),this.updateParentView(this.parent.scroller.currentZoom,r,a,l,s,null)},t.prototype.renderOverviewRect=function(e,t,n,i){var o=Number(this.model.width),r=Number(this.model.height),a=Math.max(this.parent.scroller.viewPortWidth/(n/o*this.contentWidth),this.parent.scroller.viewPortHeight/(i/r*this.contentHeight));if(a>=.25&&a<=30){this.updateParentView(a,e,t,n,i,{x:0,y:0});var l=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var s=this.element.getElementsByTagName("rect")[10].getBBox();l.x=s.x,l.y=s.y}this.updateOverviewrect(l.x,l.y,l.width,l.height)}},t.prototype.scrollOverviewRect=function(e,t,n,i){if(!this.actionName||i){var o=Number(this.model.width),r=Number(this.model.height),a=Math.min(this.contentWidth/o,this.contentHeight/r),l=new Zd,s=l.x=e/n/a,d=l.y=t/n/a,c=l.width=this.parent.scroller.viewPortWidth/n/a,u=l.height=this.parent.scroller.viewPortHeight/n/a;if(i){var h=new Zd;return h.x=s,h.y=d,h.width=c,h.height=u,h}this.updateOverviewrect(-s,-d,c,u)}return null},t.prototype.updateParentView=function(e,t,n,i,o,r){var a,l,s=Number(this.model.width),d=Number(this.model.height),c=t*(this.contentWidth/s)*e,u=n*(this.contentHeight/d)*e;this.parent.scroller.getPageBounds(),1===e&&"pan"!==this.actionName||(a=-c-this.parent.scroller.horizontalOffset,l=-u-this.parent.scroller.verticalOffset),this.parent.setBlazorDiagramProps(!0),this.parent.realActions|=Lc.OverViewAction,"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(e/this.parent.scroller.currentZoom,a,l,r):Ka()?this.parent.scroller.zoom(1,a,l,r):this.parent.pan(a,l,r)},t.prototype.updateHtmlLayer=function(e){var t=Dy(e.element.id),n=this.parent.scroller.getPageBounds(!0),i=n.height,o=Math.max(n.width,this.parent.scroller.viewPortWidth),r=Math.max(i,this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom),a=Math.min(Number(this.model.width)/o,Number(this.model.height)/r);t.style.transform="scale("+a+") translate("+this.parent.scroller.transform.tx+"px,"+this.parent.scroller.transform.ty+"px)"},t.prototype.updateView=function(e){var t,n,i=this.parent.scroller.getPageBounds(),o=this.parent.scroller.viewPortWidth/this.parent.scroller.currentZoom,r=this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom,a=0,l=0;this.parent.scroller.currentZoom<1&&o>i.width&&r>i.height&&(a=(o-i.width)/2,l=(r-i.height)/2),t=i.width,n=i.height;var s,d=Number(this.model.width),c=Number(this.model.height),u=Math.max(t,this.parent.scroller.viewPortWidth),h=Math.max(n,this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom);this.contentWidth=u=Math.max(u,d/c*h),this.contentHeight=h=Math.max(h,c/d*u),s=Math.min(d/u,c/h);var p=document.getElementById(this.element.id+"_htmlLayer");p.style.webkitTransform="scale("+s+") translate("+-i.x+"px,"+-i.y+"px)",p.style.transform="scale("+s+") translate("+(-i.x+a)+"px,"+(-i.y+l)+"px)",document.getElementById(this.element.id+"_overviewlayer").setAttribute("transform","translate("+-i.x*s+","+-i.y*s+")"),this.horizontalOffset=i.x*s,this.verticalOffset=i.y*s;var f=document.getElementById(this.element.id+"_diagramLayer"),g=ky(this.element.id),m=f.getContext("2d"),v=Number(this.model.width)/this.contentWidth,y=Number(this.model.height)/this.contentHeight;v=Math.min(v,y),g.setAttribute("transform","translate(0,0),scale("+v+")"),m.setTransform(v,0,0,v,0,0),m.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},t.prototype.scrolled=function(e){if(this.event){var t=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-t.x,-t.y,t.width,t.height)}},t.prototype.updateCursor=function(e){if(Py(e.target,"overviewresizer"))switch(e.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},t.prototype.mouseMove=function(e){if(this.event=!1,this.updateCursor(e),this.currentPoint=this.mousePosition(e),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},t.prototype.documentMouseUp=function(e){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){var e=document.getElementById(t.element.id).getBoundingClientRect();t.model.width=e.width>0?e.width:t.model.width,t.model.height=e.height>0?e.height:t.model.height,t.renderCanvas(),t.setParent(t.sourceID)},10),!1},t.prototype.mouseDown=function(e){if(e.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),e.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),Py(e.target,"overviewresizer"))switch(this.actionName="scale",e.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(e),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},t.prototype.mouseUp=function(e){if(this.currentPoint=this.mousePosition(e),Number(this.model.width),Number(this.model.height),this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var t=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"";var n=t.width,i=t.height;this.renderOverviewRect(t.x,t.y,n,i)}}else e.target.id!==this.canvas.id+"_overviewsvg"&&"helper"!==e.target.id||(n=(t=this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()).width,i=t.height,this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-n/2,this.currentPoint.y-i/2,n,i),this.inAction=!1);this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.initHelper=function(){var e=this.element.getElementsByTagName("svg")[2],t=this.startPoint.x,n=this.startPoint.y,i=1,o=1;if("scale"===this.actionName){var r=e.getElementById(this.canvas.id+"overviewrect").getBBox();t=r.x,n=r.y,i=r.width,o=r.height}var a=Oy("rect",{id:"helper",x:t,y:n,width:i,height:o,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});e.getElementById(this.element.id+"_overviewlayer").appendChild(a),this.helper=a},t.prototype.mousePosition=function(e){var t,n,i;-1!==e.type.indexOf("touch")?(n=(t=e).changedTouches[0].clientX-this.element.offsetLeft,i=t.changedTouches[0].clientY-this.element.offsetTop):(n=e.clientX,i=e.clientY);var o=this.element.getBoundingClientRect();return{x:(n-=o.left)+this.horizontalOffset,y:(i-=o.top)+this.verticalOffset}},t.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var t=document.getElementById(this.element.id+"_canvas");t&&this.element.removeChild(t)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},t.prototype.getModuleName=function(){return"Overview"},Object(O.__decorate)([Ks("100%")],t.prototype,"width",void 0),Object(O.__decorate)([Ks("100%")],t.prototype,"height",void 0),Object(O.__decorate)([Ks("")],t.prototype,"sourceID",void 0),Object(O.__decorate)([nd()],t.prototype,"created",void 0),t}(vd),HC=["animationComplete","click","collectionChange","commandExecute","connectionChange","contextMenuBeforeItemRender","contextMenuClick","contextMenuOpen","created","dataLoaded","doubleClick","dragEnter","dragLeave","dragOver","drop","expandStateChange","fixedUserHandleClick","historyChange","historyStateChange","keyDown","keyUp","mouseEnter","mouseLeave","mouseOver","onImageLoad","onUserHandleMouseDown","onUserHandleMouseEnter","onUserHandleMouseLeave","onUserHandleMouseUp","positionChange","propertyChange","rotateChange","scrollChange","segmentCollectionChange","selectionChange","sizeChange","sourcePointChange","targetPointChange","textEdit"],BC=[""],jC=function(e){function t(t,n,i,o){var r=e.call(this)||this;r.ngEle=t,r.srenderer=n,r.viewContainerRef=i,r.injector=o,r.tags=["layers","customCursor","connectors","nodes"],r.element=r.ngEle.nativeElement,r.injectedModules=r.injectedModules||[];try{var a=r.injector.get("DiagramsHierarchicalTree");-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsMindMap"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsRadialTree"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsComplexHierarchicalTree"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsDataBinding"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsSnapping"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsPrintAndExport"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsBpmnDiagrams"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsSymmetricLayout"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsConnectorBridging"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsUndoRedo"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsLayoutAnimation"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsDiagramContextMenu"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsLineRouting"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsConnectorEditing"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsBlazorTooltip"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}try{a=r.injector.get("DiagramsLineDistribution"),-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}return r.registerEvents(HC),r.addTwoWay.call(r,BC),Md("currentInstance",r,r.viewContainerRef),r.context=new Nd,r}return Object(O.__extends)(t,e),t.prototype.ngOnInit=function(){this.context.ngOnInit(this)},t.prototype.ngAfterViewInit=function(){this.context.ngAfterViewInit(this)},t.prototype.ngOnDestroy=function(){this.context.ngOnDestroy(this)},t.prototype.ngAfterContentChecked=function(){this.tagObjects[0].instance=this.childLayers,this.childCustomCursor&&(this.tagObjects[1].instance=this.childCustomCursor),this.childConnectors&&(this.tagObjects[2].instance=this.childConnectors),this.childNodes&&(this.tagObjects[3].instance=this.childNodes),this.context.ngAfterContentChecked(this)},t}(cw);Object(O.__decorate)([Hd(),Object(O.__metadata)("design:type",Object)],jC.prototype,"annotationTemplate",void 0),Object(O.__decorate)([Hd(),Object(O.__metadata)("design:type",Object)],jC.prototype,"nodeTemplate",void 0),Object(O.__decorate)([Hd(),Object(O.__metadata)("design:type",Object)],jC.prototype,"userHandleTemplate",void 0),jC=Object(O.__decorate)([Rd([Nd])],jC);var zC=function(){},UC=function(){},FC=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},GC=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qC=["paletteExpanding","paletteSelectionChange"],VC=[""],WC=function(e){function t(t,n,i,o){var r=e.call(this)||this;r.ngEle=t,r.srenderer=n,r.viewContainerRef=i,r.injector=o,r.tags=["palettes"],r.element=r.ngEle.nativeElement,r.injectedModules=r.injectedModules||[];try{var a=r.injector.get("DiagramsBpmnDiagrams");-1===r.injectedModules.indexOf(a)&&r.injectedModules.push(a)}catch(e){}return r.registerEvents(qC),r.addTwoWay.call(r,VC),Md("currentInstance",r,r.viewContainerRef),r.context=new Nd,r}return Object(O.__extends)(t,e),t.prototype.ngOnInit=function(){this.context.ngOnInit(this)},t.prototype.ngAfterViewInit=function(){this.context.ngAfterViewInit(this)},t.prototype.ngOnDestroy=function(){this.context.ngOnDestroy(this)},t.prototype.ngAfterContentChecked=function(){this.tagObjects[0].instance=this.childPalettes,this.context.ngAfterContentChecked(this)},t}(NC);WC=FC([Rd([Nd]),GC("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])],WC);var YC=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},XC=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ZC=["created"],JC=[""],KC=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r.ngEle=t,r.srenderer=n,r.viewContainerRef=i,r.injector=o,r.tags=[""],r.element=r.ngEle.nativeElement,r.injectedModules=r.injectedModules||[],r.registerEvents(ZC),r.addTwoWay.call(r,JC),Md("currentInstance",r,r.viewContainerRef),r.context=new Nd,r}return Object(O.__extends)(t,e),t.prototype.ngOnInit=function(){this.context.ngOnInit(this)},t.prototype.ngAfterViewInit=function(){this.context.ngAfterViewInit(this)},t.prototype.ngOnDestroy=function(){this.context.ngOnDestroy(this)},t.prototype.ngAfterContentChecked=function(){this.context.ngAfterContentChecked(this)},t}(LC);KC=YC([Rd([Nd]),XC("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])],KC);var QC=function(){},$C=function(){},ex=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function tx(e){return i["\u0275vid"](2,[],null,null)}var nx=function(){function e(e){this.translateService=e,this.tool=Oc.None,this.snapSettings={constraints:xc.None},this.scrollSettings={scrollLimit:"Infinity"},this.exportFileName="",this.flowshapes=[{type:"Flow",shape:"Extract"},{type:"Flow",shape:"Merge"},{type:"Flow",shape:"Decision"},{type:"Image",source:"../../../../assets/image/cut.jfif"},{type:"Basic",shape:"Ellipse"},{type:"Flow",shape:"Process"}],this.graphData=[]}return e.prototype.nodeDefaults=function(e){return e.width=80,e.height=60,e.annotations=[{offset:"Operation"===e.data.Type||"Machine"===e.data.Type?{x:.5,y:.5}:"ProductNomenclature"===e.data.Type?{x:1,y:1}:{x:.5,y:1},content:e.data.Name,verticalAlignment:"ProductNomenclature"===e.data.Type?"Bottom":"Center",horizontalAlignment:"MP"===e.data.Type?"Left":"ProductNomenclature"===e.data.Type?"Right":"Center",style:{color:"black",textAlign:"Justify",textOverflow:"Wrap",textWrapping:"WrapWithOverflow",fontSize:14,bold:!0}}],e.style.fill={MP:"rgb(0, 139,139)",Operation:"rgb(80, 255,215)",ProductNomenclature:"rgb(91, 207, 131)",Machine:"rgb(190, 237, 230)",Responsible:"rgb(126, 179, 36)"}[e.data.Type],e.shape=e.data.Shape,e},e.prototype.connDefaults=function(e){e.type="Orthogonal",e.cornerRadius=7,e.targetDecorator.height=7,e.targetDecorator.width=7,e.style.strokeColor="#6d6d6d"},e.prototype.ngOnInit=function(){this.diagram.constraints=Ac.None,this.getGammeData(),this.setDataToDiagram(),this.addBackgroundImageToGraphVue(),this.getFileName()},e.prototype.getFileName=function(){this.exportFileName=this.translateService.instant("GRAPH_VUE")+this.gammeToBeDisplayedInGraph.reference+"("+this.gammeToBeDisplayedInGraph.article+")"},e.prototype.setDataToDiagram=function(){this.diagram.layout={type:"ComplexHierarchicalTree",enableAnimation:!0,horizontalSpacing:60,verticalSpacing:50,horizontalAlignment:"Center",verticalAlignment:"Center"},this.diagram.dataSourceSettings={id:"Name",parentId:"ParentNode",dataManager:new xw(this.graphData)}},e.prototype.addBackgroundImageToGraphVue=function(){this.diagram.pageSettings={orientation:"Portrait",background:{source:"../../../../assets/image/Visualisation_gamme.png",scale:"Meet",align:"XMinYMid"},boundaryConstraints:"Infinity",width:150,height:400}},e.prototype.getGammeData=function(){for(var e=0;e<this.gammeToBeDisplayedInGraph.gammeOperations.length;e++)this.pushOperationToGraphVue(e),this.pushProductNomenclatureToGraphVue(e),this.pushMaterialToGraphVue(e),this.pushPersonsToGraphVue(e);this.graphData.push({Name:this.gammeToBeDisplayedInGraph.article,ParentNode:this.gammeToBeDisplayedInGraph.gammeOperations[this.gammeToBeDisplayedInGraph.gammeOperations.length-N.a.ONE].operation.description,Type:"MP",Shape:this.flowshapes[1]})},e.prototype.pushOperationToGraphVue=function(e){this.graphData.push({Name:this.gammeToBeDisplayedInGraph.gammeOperations[e].operation.description,ParentNode:this.prepareOperationParentID(e),Type:"Operation",Shape:this.flowshapes[4]})},e.prototype.prepareOperationParentID=function(e){var t=[];return e>0&&t.push(this.gammeToBeDisplayedInGraph.gammeOperations[e-N.a.ONE].operation.description),this.gammeToBeDisplayedInGraph.gammeOperations[e].productNomenclatures.length>N.a.ZERO&&this.gammeToBeDisplayedInGraph.gammeOperations[e].productNomenclatures.forEach(function(e){t.push(e.articleName.replaceAll("'"," "))}),this.gammeToBeDisplayedInGraph.gammeOperations[e].responsibles.length>N.a.ZERO&&this.gammeToBeDisplayedInGraph.gammeOperations[e].responsibles.forEach(function(e){t.push(e.email.replaceAll("'"," "))}),this.gammeToBeDisplayedInGraph.gammeOperations[e].machines.length>N.a.ZERO&&this.gammeToBeDisplayedInGraph.gammeOperations[e].machines.forEach(function(e){t.push(e.description.replaceAll("'"," "))}),t},e.prototype.pushProductNomenclatureToGraphVue=function(e){var t=this;this.gammeToBeDisplayedInGraph.gammeOperations[e].productNomenclatures.length>N.a.ZERO&&this.gammeToBeDisplayedInGraph.gammeOperations[e].productNomenclatures.forEach(function(e){t.graphData.push({Name:e.articleName.replaceAll("'"," "),Type:"ProductNomenclature",Shape:t.flowshapes[0]})})},e.prototype.pushMaterialToGraphVue=function(e){var t=this;this.gammeToBeDisplayedInGraph.gammeOperations[e].machines.length>N.a.ZERO&&this.gammeToBeDisplayedInGraph.gammeOperations[e].machines.forEach(function(e){t.graphData.push({Name:e.description.replaceAll("'"," "),Type:"Machine",Shape:t.flowshapes[5]})})},e.prototype.pushPersonsToGraphVue=function(e){var t=this;this.gammeToBeDisplayedInGraph.gammeOperations[e].responsibles.length>N.a.ZERO&&this.gammeToBeDisplayedInGraph.gammeOperations[e].responsibles.forEach(function(e){t.graphData.push({Name:e.email.replaceAll("'"," "),Type:"Responsible",Shape:t.flowshapes[2]})})},e.prototype.exportDiagramAsPng=function(){var e={mode:"Download",format:"SVG"};e.fileName=this.exportFileName,e.multiplePage=!1,e.margin={left:10,right:10,top:10,bottom:10},e.region="CustomBounds",e.bounds=new Zd(0,0,1500,1500),e.pageHeight=700,e.pageWidth=700,this.diagram.exportDiagram(e)},e}(),ix=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function ox(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{diagram:0}),(e()(),i["\u0275eld"](1,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["\u0275ted"](2,null,[""," "," ( ",")"])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275eld"](5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275eld"](7,0,null,null,1,"button",[["class","btn btn-success"],["style","float: left"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.exportDiagramAsPng()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Export diagram"])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275eld"](10,16777216,null,null,9,"ejs-diagram",[["height","150%"],["id","diagram"],["width","100%"]],null,null,null,tx,ex)),i["\u0275did"](11,6537216,[[1,4],["diagram",4]],7,jC,[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector],{constraints:[0,"constraints"],dataSourceSettings:[1,"dataSourceSettings"],getConnectorDefaults:[2,"getConnectorDefaults"],getNodeDefaults:[3,"getNodeDefaults"],height:[4,"height"],layout:[5,"layout"],pageSettings:[6,"pageSettings"],scrollSettings:[7,"scrollSettings"],snapSettings:[8,"snapSettings"],tool:[9,"tool"],width:[10,"width"]},null),i["\u0275qud"](335544320,2,{childLayers:0}),i["\u0275qud"](335544320,3,{childCustomCursor:0}),i["\u0275qud"](335544320,4,{childConnectors:0}),i["\u0275qud"](335544320,5,{childNodes:0}),i["\u0275qud"](335544320,6,{annotationTemplate:0}),i["\u0275qud"](335544320,7,{nodeTemplate:0}),i["\u0275qud"](335544320,8,{userHandleTemplate:0}),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,11,1,[i["\u0275nov"](t,11).constraints,i["\u0275nov"](t,11).dataSourceSettings,n.connDefaults,n.nodeDefaults,"150%",i["\u0275nov"](t,11).layout,i["\u0275nov"](t,11).pageSettings,n.scrollSettings,n.snapSettings,n.tool,"100%"])},function(e,t){var n=t.component;e(t,2,0,i["\u0275unv"](t,2,0,i["\u0275nov"](t,3).transform("GRAPH_VUE")),n.gammeToBeDisplayedInGraph.reference,n.gammeToBeDisplayedInGraph.article)})}var rx=function(){function e(e,t){this.gammeService=e,this.itemService=t,this.displayGraph=!1,this.value="",this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.enum_product=[{name:"PF"},{name:"PSF"},{name:"Tous"}],this.currentStatus="confirmed",this.currentPage=N.a.ZERO,this.size=N.a.TEN,this.listProductsToBeAdded=[],this.gridState={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:Ln.a.REFERENCE_FIELD,title:Ln.a.REFERENCE_TITLE,filterable:!0},{field:Ln.a.DESIGNATION_FIELD,title:Ln.a.DESIGNATION_TITLE,filterable:!0}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig}}return e.prototype.ngOnInit=function(){this.initGridDataSource()},e.prototype.rowCallback=function(e){return{dragging:e.dataItem.dragging}},e.prototype.dataStateChange=function(e){this.gridSettings.state=e},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.goPage(),this.initGridDataSource()},e.prototype.goPage=function(){var e=this;this.gammeService.getJavaGenericService().getEntityList(Ln.a.GET_GAMME_LIST_PAGEABLE+"?page="+this.currentPage+"&size="+this.size).subscribe(function(t){e.gridSettings.gridData.data=t.content})},e.prototype.initGridDataSource=function(){var e=this;(parseInt(this.value,10)||""===this.value)&&(this.subscription$=this.gammeService.getJavaGenericService().getEntityList(Ln.a.GET_GAMME_LIST_PAGEABLE+"?reference="+this.value+"&page="+this.currentPage+"&size="+this.size).subscribe(function(t){var n=0;t.content.map(function(i){i.showGammeInGraph=!1,i.gammeOperations.forEach(function(t){t.productNomenclatures.map(function(t){e.itemService.getById(t.productId).subscribe(function(e){t.articleName=e.Description})})}),e.itemService.getById(i.articleId).subscribe(function(e){i.article=e.Description},function(e){},function(){t.content.length===++n&&(e.gridSettings.gridData={data:t.content,total:t.totalElements})})})}))},e.prototype.mapArticleNameInProductNomenclature=function(e){},e.prototype.displayGammeInGraphe=function(e){e.showGammeInGraph=!e.showGammeInGraph,this.sendGamme=e,this.displayGraph=!this.displayGraph},e}(),ax=i["\u0275crt"]({encapsulation:0,styles:[[".radio-group[_ngcontent-%COMP%]{padding-left:20px;margin-top:10px;margin-bottom:20px}.radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]::after{content:'\\00a0\\00a0\\00a0\\00a0'}.radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:last-of-type::after{content:''}"]],data:{}});function lx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,12,"div",[["class","radio-group"],["style","display: inline-block;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](2,0,null,null,9,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](4,0,null,null,6,"input",[["name","enums"],["type","radio"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var o=!0,r=e.component;return"input"===t&&(o=!1!==i["\u0275nov"](e,5)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,5).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,5)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,5)._compositionEnd(n.target.value)&&o),"change"===t&&(o=!1!==i["\u0275nov"](e,6).onChange()&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,6).onTouched()&&o),"ngModelChange"===t&&(o=!1!==(r.radioSelected=n)&&o),o},null,null)),i["\u0275did"](5,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](6,212992,null,0,v.RadioControlValueAccessor,[i.Renderer2,i.ElementRef,v["\u0275i"],i.Injector],{name:[0,"name"],value:[1,"value"]},null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[v.DefaultValueAccessor,v.RadioControlValueAccessor]),i["\u0275did"](8,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),i["\u0275did"](10,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](11,null,["\n                    ","\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "]))],function(e,t){var n=t.component;e(t,6,0,"enums",t.context.$implicit.name),e(t,8,0,"enums",n.radioSelected)},function(e,t){e(t,2,0,i["\u0275inlineInterpolate"](1,"enum_answer_",t.context.$implicit.name,"")),e(t,4,0,i["\u0275inlineInterpolate"](1,"enum_answer_",t.context.$implicit.name,""),i["\u0275nov"](t,10).ngClassUntouched,i["\u0275nov"](t,10).ngClassTouched,i["\u0275nov"](t,10).ngClassPristine,i["\u0275nov"](t,10).ngClassDirty,i["\u0275nov"](t,10).ngClassValid,i["\u0275nov"](t,10).ngClassInvalid,i["\u0275nov"](t,10).ngClassPending),e(t,11,0,t.context.$implicit.name)})}function sx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"app-grid-cell-input-template",[["controlName","Reference"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](1,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                            "]))],function(e,t){e(t,1,0,t.component.formGroup,"Reference","text")},null)}function dx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"app-grid-cell-input-template",[["controlName","TypeNomenclature"],["inputType","text"]],null,null,null,p.b,p.a)),i["\u0275did"](1,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                            "]))],function(e,t){e(t,1,0,t.component.formGroup,"TypeNomenclature","text")},null)}function cx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,sx)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,dx)),i["\u0275did"](7,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n                          "]))],function(e,t){e(t,3,0,"REFERENCE"==t.parent.context.$implicit.field),e(t,7,0,"article"==t.parent.context.$implicit.field)},null)}function ux(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](1,49152,null,9,m.t,[[8,null]],{title:[0,"title"],width:[1,"width"],field:[2,"field"],format:[3,"format"],filter:[4,"filter"],filterable:[5,"filterable"]},null),i["\u0275qud"](603979776,8,{headerTemplates:1}),i["\u0275qud"](335544320,9,{footerTemplate:0}),i["\u0275qud"](603979776,10,{columnMenuTemplates:1}),i["\u0275qud"](335544320,11,{template:0}),i["\u0275qud"](335544320,12,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,13,{groupFooterTemplate:0}),i["\u0275qud"](335544320,14,{editTemplate:0}),i["\u0275qud"](335544320,15,{filterCellTemplate:0}),i["\u0275qud"](335544320,16,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275and"](0,null,null,1,null,cx)),i["\u0275did"](15,16384,[[14,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],function(e,t){e(t,1,0,i["\u0275unv"](t,1,0,i["\u0275nov"](t,11).transform(t.context.$implicit.title)),t.context.$implicit._width,t.context.$implicit.field,t.context.$implicit.format,t.context.$implicit.filter,t.context.$implicit.filterable)},null)}function hx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275eld"](1,0,null,null,5,"button",[["class","btn"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.displayGammeInGraphe(e.context.dataItem)&&i),i},null,null)),i["\u0275did"](2,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](3,{"btn-secondary":0,"btn-info":1}),(e()(),i["\u0275ted"](4,null,["\n                              ","\n                            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                          "]))],function(e,t){e(t,2,0,"btn",e(t,3,0,t.context.dataItem.showGammeInGraph,!t.context.dataItem.showGammeInGraph))},function(e,t){e(t,1,0,!t.context.dataItem.showGammeInGraph&&t.component.displayGraph),e(t,4,0,i["\u0275unv"](t,4,0,t.context.dataItem.showGammeInGraph?i["\u0275nov"](t,6).transform("CLOSE"):i["\u0275nov"](t,5).transform("SHOW_RANGE_GRAPH")))})}function px(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","col col-md-6"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](2,0,null,null,1,"app-gamme-flowchart",[],null,null,null,ox,ix)),i["\u0275did"](3,114688,null,0,nx,[s.k],{gammeToBeDisplayedInGraph:[0,"gammeToBeDisplayedInGraph"]},null),(e()(),i["\u0275ted"](-1,null,["\n  "]))],function(e,t){e(t,3,0,t.component.sendGamme)},null)}function fx(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{grid:0}),(e()(),i["\u0275eld"](1,0,null,null,118,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](3,0,null,null,112,"div",[["class","col"]],null,null,null,null,null)),i["\u0275did"](4,278528,null,0,h.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](5,{"col-md-6":0,"col-md-12":1}),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](7,0,null,null,107,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](9,0,null,null,104,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](11,0,null,null,101,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](14,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](16,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](18,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](19,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](26,0,null,null,84,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](28,0,null,null,7,"div",[["class","row d-flex justify-content-between mt-6"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](30,0,null,null,4,"div",[["class","col-md-6 d-flex justify-content-center"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](16777216,null,null,1,null,lx)),i["\u0275did"](33,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](37,0,null,null,72,"div",[["class","row  d-flex justify-content-between mt-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](39,0,null,null,69,"div",[["class","col col-md-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](41,0,null,null,66,"div",[["class","card  mt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](43,0,null,null,63,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](45,0,null,null,60,"div",[["class","card-body p-3"],["style","min-height: fit-content;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](47,0,null,null,57,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](79,8110080,[[1,4]],6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],rowClass:[8,"rowClass"],reorderable:[9,"reorderable"],columnMenu:[10,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange"}),i["\u0275qud"](603979776,2,{columns:1}),i["\u0275qud"](603979776,3,{detailTemplateChildren:1}),i["\u0275qud"](603979776,4,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,5,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,6,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,7,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](16777216,null,null,1,null,ux)),i["\u0275did"](90,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](93,0,null,null,10,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](94,49152,null,4,m.J,[[8,null]],{width:[0,"width"]},null),i["\u0275qud"](603979776,17,{headerTemplates:1}),i["\u0275qud"](335544320,18,{footerTemplate:0}),i["\u0275qud"](603979776,19,{columnMenuTemplates:1}),i["\u0275qud"](335544320,20,{template:0}),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275and"](0,null,null,1,null,hx)),i["\u0275did"](102,16384,[[20,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275and"](16777216,null,null,1,null,px)),i["\u0275did"](118,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,"col",e(t,5,0,n.displayGraph,!n.displayGraph)),e(t,33,0,n.enum_product),e(t,79,1,[n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,!1,!1,n.pagerSettings,n.rowCallback,!1,!1]),e(t,90,0,n.gridSettings.columnsConfig),e(t,94,0,170),e(t,118,0,n.displayGraph)},function(e,t){e(t,19,0,i["\u0275unv"](t,19,0,i["\u0275nov"](t,20).transform("RANGE_VISIBILITY"))),e(t,47,0,i["\u0275nov"](t,79).dir,i["\u0275nov"](t,79).hostClasses,i["\u0275nov"](t,79).hostClasses,i["\u0275nov"](t,79).lockedClasses,i["\u0275nov"](t,79).virtualClasses,i["\u0275nov"](t,79).columnResizing,i["\u0275nov"](t,79).noScrollbarClass)})}var gx=i["\u0275ccf"]("app-gamme-visualisation",rx,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-gamme-visualisation",[],null,null,null,fx,ax)),i["\u0275did"](1,114688,null,0,rx,[te.a,l.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),mx=n("77LS"),vx=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},yx=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},bx=function(){function e(e,t,n,i,o,r,a,l){this.router=e,this.advancedSearchProduction=t,this.gammeService=n,this.itemService=i,this.datePipe=o,this.swalWarrings=r,this.translate=a,this.companyService=l,this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.currentPage=N.a.ZERO,this.size=N.a.TEN,this.sortParams="",this.value="",this.spinner=!0,this.checkedGamme=[],this.filterFieldsColumns=[],this.filterFieldsInputs=[],this.searchType=N.a.ONE,this.filters=new Array,this.predicateTiers=[],this.montantTotal=0,this.totalMaterialsCost=0,this.hasCostPrice=!1,this.gridState={skip:N.a.ZERO,take:N.a.TWENTY,filter:{logic:"and",filters:[]},sort:[{field:"id",dir:"desc"}],group:[]},this.columnsConfig=[{field:mx.a.ARTICLES_FIELD,title:mx.a.ARTICLES_TITLE,filterable:!0},{field:mx.a.RANGE_FIELD,title:mx.a.RANGE_TITLE,filterable:!0},{field:mx.a.UM_FIELD,title:mx.a.UM_TITLE,filterable:!0},{field:mx.a.TAUX_DE_CHARGE_FIELD,title:mx.a.TAUX_CHARGE_TITLE,filterable:!0},{field:mx.a.COUT_REVIENT_FIELD,title:mx.a.COUT_REVIENT_TITLE,filterable:!0},{field:mx.a.DATE_FIELD,title:mx.a.DATE_TITLE,filterable:!0}],this.gridSettings={state:this.gridState,columnsConfig:this.columnsConfig},this.checkedGammes=!1}return e.prototype.ngOnInit=function(){this.initPredicateAdvancedSearch(),this.initFilterFiledConfig(),this.getCompanyCurrency(),this.initGridDataSource()},e.prototype.getCompanyCurrency=function(){var e=this;this.companyService.getDefaultCurrencyDetails().subscribe(function(t){e.currency=t,e.formatNumberOptions={style:"decimal",maximumFractionDigits:e.currency.Precision,minimumFractionDigits:e.currency.Precision}})},e.prototype.dataStateChange=function(e){this.gridSettings.state=e,this.gridSettings.state=e,this.currentPage=e.skip/this.size,this.size=e.take,this.sortParams=this.advancedSearchProduction.getSortParams(e.sort)},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.size=e.take,this.initGridDataSource()},e.prototype.filterChange=function(){this.initGridDataSource()},e.prototype.resetToFirstPage=function(){this.currentPage=N.a.ZERO,this.gridSettings.state.skip=this.currentPage},e.prototype.sortChange=function(){this.resetToFirstPage(),this.initGridDataSource()},e.prototype.initGridDataSource=function(){var e=this;this.subscription$=this.gammeService.getAllGammeForCostPriceListPageable(this.currentPage,this.size,this.sortParams,this.filters).subscribe(function(t){t.content.length===N.a.ZERO&&(e.spinner=!1,e.gridSettings.gridData={data:t.content,total:t.totalElements});var n=0;t.content.map(function(i){e.itemService.getById(i.articleId).subscribe(function(t){i.article=t.Description,i.unitOfMeasure=null===t.IdUnitStockNavigation?"":t.IdUnitStockNavigation.Label,i.chargeRate=N.a.ZERO,null!==i.costPriceCalculatedDate&&(i.costPriceCalculatedDate=i.costPriceCalculatedDate.split("T")[0]),e.hasCostPrice=null!==i.costPrice},function(t){e.spinner=!1},function(){t.content.length===++n&&(e.gridSettings.gridData={data:t.content,total:t.totalElements})})})},function(){e.spinner=!1},function(){return e.spinner=!1})},e.prototype.calculateCostPrice=function(e){return vx(this,void 0,void 0,function(){return yx(this,function(t){switch(t.label){case 0:return[4,this.calculateMaterialCost(e.gammeOperations)];case 1:return[2,t.sent()+this.calculateEquipmentCost(e.gammeOperations)+this.calculatePersonnelCost(e.gammeOperations)]}})})},e.prototype.calculateMaterialCost=function(e){return vx(this,void 0,void 0,function(){var t,n,i,o,r;return yx(this,function(a){switch(a.label){case 0:t=0,n=function(e){var n,o,r;return yx(this,function(a){switch(a.label){case 0:if(e.productNomenclatures.length===N.a.ZERO)return[3,4];n=function(e){return yx(this,function(n){switch(n.label){case 0:return[4,i.itemService.getModelByCondition(Ct(e.productId)).toPromise().then(function(n){t+=(null==n.CostPrice?N.a.ZERO:n.CostPrice)*e.quantity})];case 1:return n.sent(),[2]}})},o=0,r=e.productNomenclatures,a.label=1;case 1:return o<r.length?[5,n(r[o])]:[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:return[2]}})},i=this,o=0,r=e,a.label=1;case 1:return o<r.length?[5,n(r[o])]:[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:return[2,t]}})})},e.prototype.calculateEquipmentCost=function(e){var t=0;return e.forEach(function(e){t+=e.costMachines/N.a.ONE_HOUR_SECONDS*e.machineTimeNet}),t},e.prototype.calculatePersonnelCost=function(e){var t=0;return e.forEach(function(e){t+=Number(e.costPersons/N.a.ONE_HOUR_SECONDS)*e.personTimeNet}),t},e.prototype.addOrRemoveSelectedGammeForCalculateCostPrice=function(e,t){!0===e.target.checked?this.checkedGamme.push(t):this.checkedGamme.splice(this.findGammeInCheckedList(t),1)},e.prototype.findGammeInCheckedList=function(e){return this.checkedGamme.findIndex(function(t){return t.id===e.id})},e.prototype.goToNeedsPerOperation=function(e){this.router.navigateByUrl("/main/manufacturing/needs-per-operation/article/".concat(e.id))},e.prototype.calculateAllSelectedCostPrice=function(){var e=this;this.checkedGamme.forEach(function(t){e.calculateCostPrice(t).then(function(n){e.gridSettings.gridData.data.map(function(i){i.id===t.id&&(i.costPrice=n.toFixed(N.a.THREE),i.costPriceCalculatedDate=e.datePipe.transform(new Date,mx.a.PIPE_FORMAT_DATE_DD_MM_YYYY),e.updateGammeCostPriceAndCostPriceCalculatedDate(i))})})})},e.prototype.onBtnCalculateClick=function(){var e=this;this.swalWarrings.CreateSwal(this.translate.instant(mx.a.DO_YOU_WANT_TO_CALCULATE),""+this.translate.instant(vt.a.ARE_YOU_SURE),L.a.YES,L.a.NO).then(function(t){t.value&&e.calculateAllSelectedCostPrice()})},e.prototype.updateGammeCostPriceAndCostPriceCalculatedDate=function(e){this.gammeService.getJavaGenericService().callService(wt.a.POST,"update-gamme",e).subscribe()},e.prototype.selectAllGammes=function(e){!0===e.target.checked?(this.checkedGammes=!0,this.checkedGamme=this.gridSettings.gridData.data):(this.checkedGammes=!1,this.checkedGamme=[])},e.prototype.initPredicateAdvancedSearch=function(){this.filters=[],this.predicateAdvancedSearch=new x.n,this.predicateAdvancedSearch.Filter=new Array},e.prototype.initFilterFiledConfig=function(){this.filterFieldsColumns.push(new Zi.a(mx.a.DATE_TITLE,mx.a.DATE_TYPE,mx.a.DATE_FIELD),new Zi.a(mx.a.RANGE_TITLE,mx.a.STRING_TYPE,mx.a.RANGE_FIELD),new Zi.a(mx.a.ARTICLES_TITLE,mx.a.STRING_ARTICLE_TYPE,mx.a.ARTICLES_FIELD))},e.prototype.prepareFiltreFromAdvancedSearch=function(e){this.predicateAdvancedSearch.Filter=this.predicateAdvancedSearch.Filter.filter(function(t){return t.prop!==e.prop}),e.isDateFiltreBetween&&this.prepareDatesFiltres(e),!e.operation||Object(Ji.isNullOrUndefined)(e.value)||e.SpecificFiltre||this.predicateAdvancedSearch.Filter.push(e)},e.prototype.getOperatorPredicate=function(e){this.predicateAdvancedSearch.Operator=e},e.prototype.searchClick=function(){return vx(this,void 0,void 0,function(){var e,t,n,i,o=this;return yx(this,function(r){switch(r.label){case 0:this.filters=this.prepareFilter(),e=function(e){var n;return yx(this,function(i){switch(i.label){case 0:return"date"!==e.type||e.operator||(e.operator="eq"),"article"!==e.field?[3,2]:(n="",[4,t.itemService.getByCodeAndDesignation(e.value).toPromise().then(function(t){return vx(o,void 0,void 0,function(){return yx(this,function(i){switch(i.label){case 0:return t?[4,new Promise(function(e){return e(t.map(function(e){n+=e+","}))})]:[3,2];case 1:i.sent(),e.value=n,i.label=2;case 2:return[2]}})})})]);case 1:i.sent(),i.label=2;case 2:return[2]}})},t=this,n=0,i=this.filters,r.label=1;case 1:return n<i.length?[5,e(i[n])]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return this.gridSettings.state.skip=N.a.ZERO,this.initGridDataSource(),[2]}})})},e.prototype.resetClickEvent=function(){this.initPredicateAdvancedSearch(),this.initGridDataSource()},e.prototype.prepareFilter=function(){var e=this,t=new Array;return this.predicateAdvancedSearch.Filter.forEach(function(n){t.push(new Xi.a(e.getFieldType(n),e.getOperation(n),n.prop,n.value))}),t},e.prototype.prepareDatesFiltres=function(e){Object(Ki.c)(e.filtres[N.a.ZERO].value)&&this.predicateAdvancedSearch.Filter.push(e.filtres[N.a.ZERO]),Object(Ki.c)(e.filtres[N.a.ONE].value)&&this.predicateAdvancedSearch.Filter.push(e.filtres[N.a.ONE])},e.prototype.getFieldType=function(e){var t=this.advancedSearchProduction.getType(e,this.filterFieldsColumns,this.filterFieldsInputs);return this.advancedSearchProduction.getFilterType(t)},e.prototype.getOperation=function(e){return this.advancedSearchProduction.getOperation(e,this.filterFieldsColumns,this.filterFieldsInputs)},e}(),wx=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Cx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-spinner",[["class","spinner"]],null,null,null,Er.b,Er.a)),i["\u0275did"](1,114688,null,0,_r.a,[],null,null)],function(e,t){e(t,1,0)},null)}function xx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275eld"](1,0,null,null,6,"div",[["class","row"],["style","float :right; margin-right: 40px;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                         "])),(e()(),i["\u0275eld"](3,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](4,null,["","\n                           "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275eld"](6,0,null,null,0,"input",[["name","options"],["style","text-align: center !important; padding: 0 !important;"],["type","checkbox"]],null,[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.selectAllGammes(n)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275ted"](-1,null,["\n                      "]))],null,function(e,t){e(t,4,0,i["\u0275unv"](t,4,0,i["\u0275nov"](t,5).transform("SELECT_ALL")))})}function Sx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                  ","\n                "]))],null,function(e,t){e(t,0,0,t.context.dataItem.article)})}function Tx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                ","\n              "]))],null,function(e,t){e(t,0,0,t.context.dataItem.reference)})}function Ex(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n              ","\n            "]))],null,function(e,t){e(t,0,0,t.context.dataItem.unitOfMeasure)})}function _x(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:0rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,i["\u0275inlineInterpolate"](1,"",t.context.dataItem.chargeRate,""))},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function kx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:0rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,i["\u0275inlineInterpolate"](1,"",t.context.$implicit.costPrice,""))},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function Dx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"span",[["class","pl-5"]],null,null,null,null,null)),(e()(),i["\u0275ted"](2,null,["",""])),i["\u0275ppd"](3,2),(e()(),i["\u0275ted"](-1,null,["\n              "]))],null,function(e,t){var n=t.component;e(t,2,0,i["\u0275unv"](t,2,0,e(t,3,0,i["\u0275nov"](t.parent,0),t.context.dataItem.costPriceCalculatedDate,n.gridSettings.columnsConfig[5].format)))})}function Ax(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](1,0,null,null,3,"button",[["class","btn btn-sm btn-back-to-list mr-2"],["content-type","template"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.goToNeedsPerOperation(e.context.dataItem)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                            "])),(e()(),i["\u0275eld"](3,0,null,null,0,"i",[["class","fa fa-eye zoom"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275ted"](-1,null,["\n                          "])),(e()(),i["\u0275eld"](6,0,null,null,0,"input",[["name","options"],["style"," text-align: center !important; padding: 0 !important;"],["type","checkbox"]],[[8,"value",0],[8,"checked",0]],[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.addOrRemoveSelectedGammeForCalculateCostPrice(n,e.context.dataItem)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n                        "]))],null,function(e,t){var n=t.component;e(t,6,0,i["\u0275inlineInterpolate"](1,"",t.context.dataItem,""),n.checkedGammes)})}function Ox(e){return i["\u0275vid"](0,[i["\u0275pid"](0,h.DatePipe,[i.LOCALE_ID]),i["\u0275qud"](402653184,1,{grid:0}),(e()(),i["\u0275and"](16777216,null,null,1,null,Cx)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275eld"](5,0,null,null,226,"div",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](7,0,null,null,223,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](9,0,null,null,220,"div",[["class","card card full-screen-card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](11,0,null,null,217,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](14,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](16,0,null,null,5,"div",[["class","col-sm-5 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](18,0,null,null,2,"h3",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](19,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](26,0,null,null,200,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](28,0,null,null,2,"app-advanced-search",[],null,[[null,"filtrePredicateToSend"],[null,"predicateOperator"],[null,"searchClickEvent"],[null,"resetClickEvent"]],function(e,t,n){var i=!0,o=e.component;return"filtrePredicateToSend"===t&&(i=!1!==o.prepareFiltreFromAdvancedSearch(n)&&i),"predicateOperator"===t&&(i=!1!==o.getOperatorPredicate(n)&&i),"searchClickEvent"===t&&(i=!1!==o.searchClick()&&i),"resetClickEvent"===t&&(i=!1!==o.resetClickEvent()&&i),i},Vi.b,Vi.a)),i["\u0275did"](29,114688,null,0,Wi.a,[],{filtreFieldsColumns:[0,"filtreFieldsColumns"],filtreFieldsInputs:[1,"filtreFieldsInputs"]},{filtrePredicateToSend:"filtrePredicateToSend",predicateOperator:"predicateOperator",searchClickEvent:"searchClickEvent",resetClickEvent:"resetClickEvent"}),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](32,0,null,null,8,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"],["id","addButton1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](34,0,null,null,5,"a",[["class","btn-Add k-button btn btn-add"],["data-target","#exampleModalCenter"],["data-toggle","modal"],["id","addButton2"],["style"," border: 2px double #4c9aae!important; margin-bottom: 0.7%"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onBtnCalculateClick()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](36,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](37,null,["\xa0 ",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](42,0,null,null,183,"div",[["class","row  d-flex justify-content-between mt-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](44,0,null,null,180,"div",[["class","col"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](46,0,null,null,177,"div",[["class","card  mt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](48,0,null,null,174,"div",[["class","card-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](50,0,null,null,171,"div",[["class","card-body p-3"],["style","min-height: fit-content;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](52,0,null,null,168,"kendo-grid",[],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"],[null,"sortChange"],[null,"filterChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),"sortChange"===t&&(i=!1!==o.sortChange()&&i),"filterChange"===t&&(i=!1!==o.filterChange()&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](84,8110080,[[1,4]],6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{filterChange:"filterChange",pageChange:"pageChange",sortChange:"sortChange",dataStateChange:"dataStateChange"}),i["\u0275qud"](603979776,2,{columns:1}),i["\u0275qud"](603979776,3,{detailTemplateChildren:1}),i["\u0275qud"](603979776,4,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,5,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,6,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,7,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275and"](0,null,null,1,null,xx)),i["\u0275did"](96,16384,[[6,4]],0,m._110,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](99,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](100,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,8,{headerTemplates:1}),i["\u0275qud"](335544320,9,{footerTemplate:0}),i["\u0275qud"](603979776,10,{columnMenuTemplates:1}),i["\u0275qud"](335544320,11,{template:0}),i["\u0275qud"](335544320,12,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,13,{groupFooterTemplate:0}),i["\u0275qud"](335544320,14,{editTemplate:0}),i["\u0275qud"](335544320,15,{filterCellTemplate:0}),i["\u0275qud"](335544320,16,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,Sx)),i["\u0275did"](114,16384,[[11,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](117,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](118,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,17,{headerTemplates:1}),i["\u0275qud"](335544320,18,{footerTemplate:0}),i["\u0275qud"](603979776,19,{columnMenuTemplates:1}),i["\u0275qud"](335544320,20,{template:0}),i["\u0275qud"](335544320,21,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,22,{groupFooterTemplate:0}),i["\u0275qud"](335544320,23,{editTemplate:0}),i["\u0275qud"](335544320,24,{filterCellTemplate:0}),i["\u0275qud"](335544320,25,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Tx)),i["\u0275did"](132,16384,[[20,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](135,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](136,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,26,{headerTemplates:1}),i["\u0275qud"](335544320,27,{footerTemplate:0}),i["\u0275qud"](603979776,28,{columnMenuTemplates:1}),i["\u0275qud"](335544320,29,{template:0}),i["\u0275qud"](335544320,30,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,31,{groupFooterTemplate:0}),i["\u0275qud"](335544320,32,{editTemplate:0}),i["\u0275qud"](335544320,33,{filterCellTemplate:0}),i["\u0275qud"](335544320,34,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,Ex)),i["\u0275did"](150,16384,[[29,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](153,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](154,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,35,{headerTemplates:1}),i["\u0275qud"](335544320,36,{footerTemplate:0}),i["\u0275qud"](603979776,37,{columnMenuTemplates:1}),i["\u0275qud"](335544320,38,{template:0}),i["\u0275qud"](335544320,39,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,40,{groupFooterTemplate:0}),i["\u0275qud"](335544320,41,{editTemplate:0}),i["\u0275qud"](335544320,42,{filterCellTemplate:0}),i["\u0275qud"](335544320,43,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](0,null,null,1,null,_x)),i["\u0275did"](168,16384,[[38,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        \n        \n        "])),(e()(),i["\u0275eld"](171,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](172,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],filter:[2,"filter"],filterable:[3,"filterable"]},null),i["\u0275qud"](603979776,44,{headerTemplates:1}),i["\u0275qud"](335544320,45,{footerTemplate:0}),i["\u0275qud"](603979776,46,{columnMenuTemplates:1}),i["\u0275qud"](335544320,47,{template:0}),i["\u0275qud"](335544320,48,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,49,{groupFooterTemplate:0}),i["\u0275qud"](335544320,50,{editTemplate:0}),i["\u0275qud"](335544320,51,{filterCellTemplate:0}),i["\u0275qud"](335544320,52,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            \n              "])),(e()(),i["\u0275and"](0,null,null,1,null,kx)),i["\u0275did"](186,16384,[[47,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](189,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](190,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],filter:[2,"filter"],filterable:[3,"filterable"]},null),i["\u0275qud"](603979776,53,{headerTemplates:1}),i["\u0275qud"](335544320,54,{footerTemplate:0}),i["\u0275qud"](603979776,55,{columnMenuTemplates:1}),i["\u0275qud"](335544320,56,{template:0}),i["\u0275qud"](335544320,57,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,58,{groupFooterTemplate:0}),i["\u0275qud"](335544320,59,{editTemplate:0}),i["\u0275qud"](335544320,60,{filterCellTemplate:0}),i["\u0275qud"](335544320,61,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            \n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Dx)),i["\u0275did"](204,16384,[[56,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275eld"](208,0,null,null,11,"kendo-grid-command-column",[],null,null,null,g.B,g.j)),i["\u0275did"](209,49152,null,4,m.J,[[8,null]],{title:[0,"title"]},null),i["\u0275qud"](603979776,62,{headerTemplates:1}),i["\u0275qud"](335544320,63,{footerTemplate:0}),i["\u0275qud"](603979776,64,{columnMenuTemplates:1}),i["\u0275qud"](335544320,65,{template:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.J]),(e()(),i["\u0275ted"](-1,null,["\n                        "])),(e()(),i["\u0275and"](0,null,null,1,null,Ax)),i["\u0275did"](218,16384,[[65,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n                      "])),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n\n"]))],function(e,t){var n=t.component;e(t,3,0,n.spinner),e(t,29,0,n.filterFieldsColumns,n.filterFieldsInputs),e(t,84,0,n.gridSettings.gridData,n.gridSettings.state.take,n.gridSettings.state.skip,n.gridSettings.state.sort,n.gridSettings.state.filter,!1,!0,n.pagerSettings,!1,!1),e(t,100,0,i["\u0275unv"](t,100,0,i["\u0275nov"](t,110).transform(n.gridSettings.columnsConfig[0].title)),n.gridSettings.columnsConfig[0].field,n.gridSettings.columnsConfig[0].format,n.gridSettings.columnsConfig[0].filter,n.gridSettings.columnsConfig[0].filterable),e(t,118,0,i["\u0275unv"](t,118,0,i["\u0275nov"](t,128).transform(n.gridSettings.columnsConfig[1].title)),n.gridSettings.columnsConfig[1].field,n.gridSettings.columnsConfig[1].format,n.gridSettings.columnsConfig[1].filter,n.gridSettings.columnsConfig[1].filterable),e(t,136,0,i["\u0275unv"](t,136,0,i["\u0275nov"](t,146).transform(n.gridSettings.columnsConfig[2].title)),n.gridSettings.columnsConfig[2].field,n.gridSettings.columnsConfig[2].format,n.gridSettings.columnsConfig[2].filter,n.gridSettings.columnsConfig[2].filterable),e(t,154,0,i["\u0275unv"](t,154,0,i["\u0275nov"](t,164).transform(n.gridSettings.columnsConfig[3].title)),n.gridSettings.columnsConfig[3].field,n.gridSettings.columnsConfig[3].format,n.gridSettings.columnsConfig[3].filter,n.gridSettings.columnsConfig[3].filterable),e(t,172,0,i["\u0275unv"](t,172,0,i["\u0275nov"](t,182).transform(n.gridSettings.columnsConfig[4].title)),n.gridSettings.columnsConfig[4].field,n.gridSettings.columnsConfig[4].filter,n.gridSettings.columnsConfig[4].filterable),e(t,190,0,i["\u0275unv"](t,190,0,i["\u0275nov"](t,200).transform(n.gridSettings.columnsConfig[5].title)),n.gridSettings.columnsConfig[5].field,n.gridSettings.columnsConfig[5].filter,n.gridSettings.columnsConfig[5].filterable),e(t,209,0,i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](t,209,0,i["\u0275nov"](t,214).transform("ACTION")),""))},function(e,t){e(t,19,0,i["\u0275unv"](t,19,0,i["\u0275nov"](t,20).transform("CALCULATION_COST_PRICE"))),e(t,37,0,i["\u0275unv"](t,37,0,i["\u0275nov"](t,38).transform("CALCULATE"))),e(t,52,0,i["\u0275nov"](t,84).dir,i["\u0275nov"](t,84).hostClasses,i["\u0275nov"](t,84).hostClasses,i["\u0275nov"](t,84).lockedClasses,i["\u0275nov"](t,84).virtualClasses,i["\u0275nov"](t,84).columnResizing,i["\u0275nov"](t,84).noScrollbarClass)})}var Ix=i["\u0275ccf"]("app-cost-price",bx,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-cost-price",[],null,null,null,Ox,wx)),i["\u0275did"](1,114688,null,0,bx,[T.Router,eo,te.a,l.a,h.DatePipe,E.a,s.k,mt.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Px=function(){function e(e,t){this.translate=e,this.gammeService=t,this.selectedOperation=new i.EventEmitter,this.firstOperation=new i.EventEmitter,this.pagerSettings=L.a.DEFAULT_PAGER_SETTINGS,this.operationFiltredList=[],this.ids=[],this.defaultItem={displayName:"None",value:null}}return e.prototype.initDataSource=function(){var e=this;this.gammeService.getListOperationsByGamme(this.idGamme).subscribe(function(t){e.ids=t,e.operationFiltredList=e.ids.slice(0),e.firstOperation.emit(e.operationFiltredList[0].id)})},e.prototype.handleFilterParentCode=function(e){this.operationFiltredList=this.ids.filter(function(t){return t.description.toLocaleLowerCase().includes(e.toLowerCase())})},e.prototype.onSelect=function(e){this.selectedOperation.emit(e)},e.prototype.ngOnInit=function(){this.initDataSource()},e}(),Rx=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Mx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,23,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,1).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,1).onReset()&&o),o},null,null)),i["\u0275did"](1,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](3,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](5,0,null,null,17,"kendo-dropdownlist",[["class","form-control"]],[[2,"k-widget",null],[2,"k-dropdown",null],[2,"k-header",null],[1,"dir",0]],[[null,"filterChange"],[null,"valueChange"]],function(e,t,n){var i=!0,o=e.component;return"filterChange"===t&&(i=!1!==o.handleFilterParentCode(n)&&i),"valueChange"===t&&(i=!1!==o.onSelect(n)&&i),i},st.i,st.d)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[dt.i]),i["\u0275prd"](6144,null,dt.m,null,[dt.i]),i["\u0275prd"](256,null,b.b,"kendo.dropdownlist",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,dt.A,dt.A,[]),i["\u0275prd"](512,null,dt.g,dt.g,[]),i["\u0275prd"](512,null,dt.h,dt.h,[dt.g]),i["\u0275prd"](512,null,dt.w,dt.w,[dt.h,dt.A]),i["\u0275did"](14,770048,null,7,dt.i,[b.c,y.g,dt.A,dt.w,dt.h,dt.g,i.NgZone,i.Renderer2,i.ElementRef,i.ChangeDetectorRef,[2,dt.E]],{data:[0,"data"],value:[1,"value"],textField:[2,"textField"],valueField:[3,"valueField"],defaultItem:[4,"defaultItem"],filterable:[5,"filterable"],valuePrimitive:[6,"valuePrimitive"]},{valueChange:"valueChange",filterChange:"filterChange"}),i["\u0275qud"](335544320,1,{itemTemplate:0}),i["\u0275qud"](335544320,2,{groupTemplate:0}),i["\u0275qud"](335544320,3,{fixedGroupTemplate:0}),i["\u0275qud"](335544320,4,{valueTemplate:0}),i["\u0275qud"](335544320,5,{headerTemplate:0}),i["\u0275qud"](335544320,6,{footerTemplate:0}),i["\u0275qud"](335544320,7,{noDataTemplate:0}),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.form),e(t,14,0,n.operationFiltredList,n.operationFiltredList[0],"description","id",n.defaultItem,!0,!0)},function(e,t){e(t,0,0,i["\u0275nov"](t,3).ngClassUntouched,i["\u0275nov"](t,3).ngClassTouched,i["\u0275nov"](t,3).ngClassPristine,i["\u0275nov"](t,3).ngClassDirty,i["\u0275nov"](t,3).ngClassValid,i["\u0275nov"](t,3).ngClassInvalid,i["\u0275nov"](t,3).ngClassPending),e(t,5,0,i["\u0275nov"](t,14).widgetClasses,i["\u0275nov"](t,14).widgetClasses,i["\u0275nov"](t,14).widgetClasses,i["\u0275nov"](t,14).dir)})}var Nx=function(){function e(){}return e.ARTICLE_FIELD="article",e.ARTICLE_TITLE="ARTICLE",e.COMPONENT_FIELD="description",e.COMPONENT_TITLE="COMPONENT",e.PRODUCT_NAME_TITLE="Article",e.PRODUCT_ARTICLE_NAME_TITLE="ARTICLE_REFERENCE",e.QUANTITE_FIELD="quantity",e.QUANTITE_TITLE="QUANTITE",e.UNITE_FIELD="unite",e.UNITE_TITLE="UNIT",e.TAUX_CHUTE_FIELD="tauxChute",e.TAUX_CHUTE_TITLE="TAUX_CHUTE",e.QUANTITY_CHUTE_FIELD="quantityChute",e.QUANTITY_CHUTE_TITLE="QUANTITY_CHUTE",e.QUANTITY_NET_FIELD="quantityNet",e.QUANTITY_NET_TITLE="QUANTITY_NET",e.BRUT_COST_TITLE="BRUT_COST",e.CHUTE_COST_TITLE="CHUTE_COST",e.NET_COST_TITLE="NET_COST",e.BRUT_COST_FIELD="brutCost",e.CHUTE_COST_FIELD="chuteCost",e.NET_COST_FIELD="netCost",e.REVENUE_COST_FIELD="revenueCost",e.REVENUE_COST_TITLE="REVENUE_COST",e.OPERATION_FIELD="operation",e.OPERATION_TITLE="OPERATION",e.PRODUCT_NAME_FIELD="productName",e.RESPONSABLE_NAME_FIELD="FullName",e.RESPONSABLE_NAME_TITLE="RESPONSABLE_NAME",e.NET_TIME_FIELD="netTime",e.NET_TIME_TITLE="NET_TIME",e.MACHINE_NAME_FIELD="description",e.MACHINE_NAME_TITLE="MACHINE_TITLE",e.NET_TIME_MACHINE_TITLE="NET_TIME_MACHINE",e.NET_TIME_MACHINE_FIELD="netTimeMachine",e.NET_COST_MACHINE_FIELD="costPerHour",e.NET_COST_MACHINE_TITLE="NET_COST_MACHINE",e.HOUR_COST_MACHINE_TITLE="HOUR_COST_MACHINE",e.NET_COST_PERSONNEL_FIELD="costPerson",e.NET_COST_PERSONNEL_TITLE="NET_COST_PERSONNEL",e.HOUR_COST_PERSONNEL_TITLE="HOUR_COST_PERSONNEL",e.NET_TIME_PERSONNEL_FIELD="netTimePersonnel",e.NET_TIME_PERSONNEL_TITLE="NET_TIME_PERSONNEL",e.PAGEABLE="list-machines-by-operation",e}(),Lx=function(){function e(e,t,n,i,o,r){var a=this;this.activatedRoute=e,this.router=t,this.gammeService=n,this.itemService=i,this.userService=o,this.companyService=r,this.nomenclature=new ut,this.hideSearch=!0,this.value="",this.operationsGamme=[],this.gamme=new Rr,this.listUsers=[],this.machineList=[],this.prNomenclaturesList=[],this.responsibleIds=[],this.typesList=[],this.data=[],this.montantTotal=0,this.listItems=[],this.size=N.a.TEN,this.size1=N.a.TEN,this.size2=N.a.TEN,this.currentPage=N.a.ZERO,this.currentPage1=N.a.ZERO,this.currentPage2=N.a.ZERO,this.nomenclatureReference="",this.spinner=!1,this.listOperations=[],this.gridData=[],this.pagerSettingsEquip=L.a.DEFAULT_PAGER_SETTINGS,this.pagerSettingsPers=L.a.DEFAULT_PAGER_SETTINGS,this.pagerSettingsProd=L.a.DEFAULT_PAGER_SETTINGS,this.selectedValue=this.typesList[N.a.ONE],this.gridStateNomenclatures={skip:0,take:this.size,filter:{logic:"and",filters:[]}},this.gridStateEquipement={skip:0,take:this.size1,filter:{logic:"and",filters:[]}},this.gridStatePersonnel={skip:0,take:this.size2,filter:{logic:"and",filters:[]}},this.columnsConfig=[{field:Nx.ARTICLE_FIELD,title:Nx.ARTICLE_TITLE,tooltip:Nx.ARTICLE_TITLE,filterable:!0},{field:Nx.REVENUE_COST_FIELD,title:Nx.REVENUE_COST_TITLE,tooltip:Nx.REVENUE_COST_TITLE,filterable:!0},{field:Nx.OPERATION_FIELD,title:Nx.OPERATION_TITLE,tooltip:Nx.OPERATION_TITLE,filterable:!0}],this.columnsConfigProducts=[{field:Nx.COMPONENT_FIELD,title:Nx.COMPONENT_TITLE,tooltip:Nx.COMPONENT_TITLE,filterable:!0,width:N.a.ONE_HUNDRED_TWENTY},{field:Nx.QUANTITE_FIELD,title:Nx.QUANTITE_TITLE,tooltip:Nx.QUANTITE_TITLE,filterable:!0,width:N.a.ONE_HUNDRED_TWENTY},{field:Nx.UNITE_FIELD,title:Nx.UNITE_TITLE,tooltip:Nx.UNITE_TITLE,filterable:!0,width:N.a.ONE_HUNDRED_TWENTY},{field:Nx.BRUT_COST_FIELD,title:Nx.BRUT_COST_TITLE,tooltip:Nx.BRUT_COST_TITLE,filterable:!0,width:N.a.ONE_HUNDRED_TWENTY},{field:Nx.QUANTITY_CHUTE_FIELD,title:Nx.QUANTITY_CHUTE_TITLE,tooltip:Nx.QUANTITY_CHUTE_TITLE,filterable:!0,width:N.a.ONE_HUNDRED_TWENTY},{field:Nx.CHUTE_COST_FIELD,title:Nx.CHUTE_COST_TITLE,tooltip:Nx.CHUTE_COST_TITLE,filterable:!0,width:N.a.ONE_HUNDRED_TWENTY},{field:Nx.QUANTITY_NET_FIELD,title:Nx.QUANTITY_NET_TITLE,tooltip:Nx.QUANTITY_NET_TITLE,filterable:!0,width:N.a.ONE_HUNDRED_TWENTY},{field:Nx.NET_COST_FIELD,title:Nx.NET_COST_TITLE,tooltip:Nx.NET_COST_TITLE,filterable:!0,width:N.a.ONE_HUNDRED_TWENTY}],this.gridSettingsNomenclatures={state:this.gridStateNomenclatures,columnsConfig:this.columnsConfigProducts},this.columnsConfigPersonnel=[{field:Nx.RESPONSABLE_NAME_FIELD,title:Nx.RESPONSABLE_NAME_TITLE,tooltip:Nx.RESPONSABLE_NAME_TITLE,filterable:!1,width:N.a.ONE_HUNDRED_TWENTY},{field:Nx.NET_COST_PERSONNEL_FIELD,title:Nx.HOUR_COST_PERSONNEL_TITLE,tooltip:Nx.HOUR_COST_PERSONNEL_TITLE,filterable:!1,width:N.a.ONE_HUNDRED_TWENTY}],this.gridPersonnelSettings={state:this.gridStatePersonnel,columnsConfig:this.columnsConfigPersonnel},this.columnsConfigEquipment=[{field:Nx.MACHINE_NAME_FIELD,title:Nx.MACHINE_NAME_TITLE,filterable:!1,width:N.a.FIFTY_FIVE},{field:Nx.NET_COST_MACHINE_FIELD,title:Nx.HOUR_COST_MACHINE_TITLE,filterable:!1,width:N.a.FIFTY_FIVE}],this.gridEquipmentSettings={state:this.gridStateEquipement,columnsConfig:this.columnsConfigEquipment},this.activatedRoute.params.subscribe(function(e){a.idGamme=+e.id||0}),this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},this.initFormGroup()}return e.prototype.initFormGroup=function(){this.formGroup=new v.FormGroup({article:new v.FormControl(""),revenueCost:new v.FormControl("")})},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe()},e.prototype.sortChange=function(){this.resetToFirstPage(),this.initGridData()},e.prototype.resetToFirstPage=function(){this.currentPage=0,this.currentPage1=0,this.currentPage2=0,this.gridEquipmentSettings.state.skip=this.currentPage1,this.gridPersonnelSettings.state.skip=this.currentPage2,this.gridSettingsNomenclatures.state.skip=this.currentPage},e.prototype.initGridData=function(e){e&&(this.currentPage=e,this.currentPage1=e,this.currentPage2=e),this.montantTotal=0,this.loadFormValues(),this.loadEquipmentDetails(),this.loadPersonnelDetails(),this.loadProductsByOperation()},e.prototype.onPageChange=function(e){this.currentPage=e.skip/e.take,this.currentPage1=e.skip/e.take,this.currentPage2=e.skip/e.take,this.size=e.take,this.size1=e.take,this.size2=e.take,this.initGridData()},e.prototype.dataStateChange=function(e){this.gridSettingsNomenclatures.state=e},e.prototype.dataStateChange1=function(e){this.gridEquipmentSettings.state=e},e.prototype.dataStateChange2=function(e){this.gridPersonnelSettings.state=e},e.prototype.ngOnInit=function(){this.initGridData(),this.getCompanyCurrency()},e.prototype.receiveOperation=function(e){this.idOperation=e,this.loadEquipmentDetails(),this.loadProductsByOperation(),this.loadPersonnelDetails()},e.prototype.receiveFirstId=function(e){this.idOperation=e,this.loadProductsByOperation(),this.loadEquipmentDetails(),this.loadPersonnelDetails()},e.prototype.getCompanyCurrency=function(){var e=this;this.companyService.getDefaultCurrencyDetails().subscribe(function(t){e.currency=t,e.formatNumberOptions={style:"decimal",maximumFractionDigits:e.currency.Precision,minimumFractionDigits:e.currency.Precision}})},e.prototype.loadPersonnelDetails=function(){var e=this;null!=this.idOperation&&(this.gammeService.getIdGammeOpByOperation(this.idGamme,this.idOperation).subscribe(function(t){e.idGammeOp=t}),this.subscription$=this.gammeService.getJavaGenericService().getEntityById(this.idGamme).subscribe(function(t){e.gamme=JSON.parse(JSON.stringify(t)),e.operationsGamme=e.operationsGamme.concat(t.gammeOperations),e.userService.getAllUserWithoutState().subscribe(function(t){e.listUsers=t.data,e.gamme.gammeOperations.forEach(function(t){t.id==e.idGammeOp&&(e.tempsNetPersonnel=t.personTimeNet,e.coutNetPersonnel=t.costPersons,e.responsibleIds=[],e.listUsers.forEach(function(n){t.responsibles.find(function(e){return e.idResponsable===n.Id})&&t.id==e.idGammeOp&&(e.responsibleIds.push({id:n.Id,FullName:n.FullName,costPerson:t.costPersons}),t.FullName=n.FullName,t.costPerson=t.costPerson)})),e.gridPersonnelSettings.gridData={data:e.responsibleIds,total:e.responsibleIds.length}})})}))},e.prototype.loadEquipmentDetails=function(){var e=this;null!=this.idOperation&&(this.gammeService.getIdGammeOpByOperation(this.idGamme,this.idOperation).subscribe(function(t){e.idGammeOp=t}),this.subscription$=this.gammeService.getJavaGenericService().sendData(Nx.PAGEABLE+"?idGamme="+this.idGamme+"&opId="+this.idOperation+"&page="+this.currentPage1+"&size="+this.size1).subscribe(function(t){e.machineList=t,e.gridEquipmentSettings.gridData={data:e.machineList.content,total:e.machineList.totalElements}}),this.gammeService.getJavaGenericService().getEntityById(this.idGamme).subscribe(function(t){e.gamme=JSON.parse(JSON.stringify(t)),e.gamme.gammeOperations.forEach(function(t){t.id==e.idGammeOp&&(e.tempsNetMachine=t.machineTimeNet,e.coutNetMachine=t.costMachines)})}))},e.prototype.loadFormValues=function(){var e=this;this.gammeService.getJavaGenericService().getEntityById(this.idGamme).subscribe(function(t){e.gamme=JSON.parse(JSON.stringify(t)),e.itemService.getById(t.articleId).subscribe(function(n){e.formGroup.patchValue({article:n.Description,revenueCost:t.costPrice})})})},e.prototype.loadProductsByOperation=function(){var e=this;null!=this.idOperation&&(this.subscription$=this.gammeService.getProductsNomenclaturesByOperation(this.idGamme,this.idOperation,this.currentPage,this.size).subscribe(function(t){e.prNomenclaturesList=t,t.content.forEach(function(t){t.quantityNet=t.quantity-t.quantityChute,Object(Je.a)(e.itemService.getModelByCondition(Ct(t.productId)),e.itemService.getById(t.productId)).subscribe(function(e){t.brutCost=(e[N.a.ZERO].CostPrice*t.quantity).toFixed(N.a.THREE),t.chuteCost=(e[N.a.ZERO].CostPrice*t.quantityChute).toFixed(N.a.THREE),t.netCost=(e[N.a.ZERO].CostPrice*(t.quantity-t.quantityChute)).toFixed(N.a.THREE),t.description=e[N.a.ZERO].Description,t.unite=e[N.a.ONE].IdUnitStockNavigation.Label})}),e.gridSettingsNomenclatures.gridData={data:e.prNomenclaturesList.content,total:e.prNomenclaturesList.totalElements}}))},e}(),Hx=i["\u0275crt"]({encapsulation:0,styles:[[".row[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{float:right}.row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{float:left}"]],data:{}});function Bx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                  ","\n                "]))],null,function(e,t){e(t,0,0,t.context.dataItem.description)})}function jx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:3rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,i["\u0275inlineInterpolate"](1,"",t.context.dataItem.quantity,""))},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function zx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","Value"],["inputType","number"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.formGroup,"Value","number")},null)}function Ux(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n              ","\n            "]))],null,function(e,t){e(t,0,0,t.context.dataItem.unite)})}function Fx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:3rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,t.context.dataItem.brutCost)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function Gx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","Value"],["inputType","number"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.formGroup,"Value","number")},null)}function qx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:3rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,t.context.dataItem.quantityChute)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function Vx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","Value"],["inputType","number"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.formGroup,"Value","number")},null)}function Wx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:3rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,t.context.dataItem.chuteCost)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function Yx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","Value"],["inputType","number"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,2,0,t.component.formGroup,"Value","number")},null)}function Xx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:3rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,t.context.dataItem.quantityNet)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function Zx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","Value"],["inputType","number"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){e(t,2,0,t.component.formGroup,"Value","number")},null)}function Jx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:3rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,t.context.dataItem.netCost)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function Kx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","Value"],["inputType","number"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){e(t,2,0,t.component.formGroup,"Value","number")},null)}function Qx(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                                  "])),(e()(),i["\u0275eld"](1,0,null,null,12,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                                      "])),(e()(),i["\u0275eld"](3,0,null,null,4,"span",[["class","name"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0  "])),(e()(),i["\u0275eld"](5,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,[" ",":  "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                                      "])),(e()(),i["\u0275eld"](9,0,null,null,3,"span",[["class","value"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0  "])),(e()(),i["\u0275eld"](11,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](12,null,["   ",""])),(e()(),i["\u0275ted"](-1,null,["\n                                  "])),(e()(),i["\u0275ted"](-1,null,["\n                                  "])),(e()(),i["\u0275eld"](15,0,null,null,12,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n                                      "])),(e()(),i["\u0275eld"](17,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0  "])),(e()(),i["\u0275eld"](19,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](20,null,[" ",":  "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                                      "])),(e()(),i["\u0275eld"](23,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0  "])),(e()(),i["\u0275eld"](25,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](26,null,["  ",""])),(e()(),i["\u0275ted"](-1,null,["\n                                  "])),(e()(),i["\u0275ted"](-1,null,["\n\n                                "]))],null,function(e,t){var n=t.component;e(t,6,0,i["\u0275unv"](t,6,0,i["\u0275nov"](t,7).transform("NET_TIME_PERSONNEL"))),e(t,12,0,n.tempsNetPersonnel),e(t,20,0,i["\u0275unv"](t,20,0,i["\u0275nov"](t,21).transform("NET_COST_PERSONNEL"))),e(t,26,0,n.coutNetPersonnel)})}function $x(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                  ","\n                "]))],null,function(e,t){e(t,0,0,t.context.dataItem.FullName)})}function eS(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:0rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,t.context.dataItem.costPerson)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function tS(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","Value"],["inputType","number"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.formGroup,"Value","number")},null)}function nS(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                                  "])),(e()(),i["\u0275eld"](1,0,null,null,12,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n                                      "])),(e()(),i["\u0275eld"](3,0,null,null,4,"span",[["class","name"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0  "])),(e()(),i["\u0275eld"](5,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",": "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                                      "])),(e()(),i["\u0275eld"](9,0,null,null,3,"span",[["class","value"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0  "])),(e()(),i["\u0275eld"](11,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](12,null,[" ",""])),(e()(),i["\u0275ted"](-1,null,["\n                                  "])),(e()(),i["\u0275ted"](-1,null,["\n                                  "])),(e()(),i["\u0275eld"](15,0,null,null,12,"div",[["class","row col-sm-12 col-md-12 col-lg-12 mt-2 k-justify-content-end"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n\n                                      "])),(e()(),i["\u0275eld"](17,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0  "])),(e()(),i["\u0275eld"](19,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](20,null,["",":   "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                                      "])),(e()(),i["\u0275eld"](23,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0  "])),(e()(),i["\u0275eld"](25,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](26,null,[" "," "])),(e()(),i["\u0275ted"](-1,null,["\n                                  "])),(e()(),i["\u0275ted"](-1,null,["\n                                "]))],null,function(e,t){var n=t.component;e(t,6,0,i["\u0275unv"](t,6,0,i["\u0275nov"](t,7).transform("NET_TIME_MACHINE"))),e(t,12,0,n.tempsNetMachine),e(t,20,0,i["\u0275unv"](t,20,0,i["\u0275nov"](t,21).transform("NET_COST_MACHINE"))),e(t,26,0,n.coutNetMachine)})}function iS(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](0,null,["\n                  ","\n                "]))],null,function(e,t){e(t,0,0,t.context.dataItem.description)})}function oS(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,6,"kendo-numerictextbox",[["class","text-right"],["style","padding-right:0rem !important"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-numerictextbox",null]],null,null,_n.e,_n.b)),i["\u0275prd"](5120,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[kn.f]),i["\u0275prd"](5120,null,v.NG_VALIDATORS,function(e){return[e]},[kn.f]),i["\u0275prd"](256,null,b.b,"kendo.numerictextbox",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275did"](6,770048,null,0,kn.f,[Dn.d,i.Renderer2,b.c,i.Injector,i.NgZone,i.ChangeDetectorRef,i.ElementRef],{readonly:[0,"readonly"],format:[1,"format"],value:[2,"value"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,6,0,!0,t.component.formatNumberOptions,t.context.dataItem.costPerHour)},function(e,t){e(t,1,0,i["\u0275nov"](t,6).direction,i["\u0275nov"](t,6).widgetClasses,i["\u0275nov"](t,6).widgetClasses)})}function rS(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](1,0,null,null,2,"app-grid-cell-input-template",[["controlName","Value"],["inputType","number"]],null,null,null,p.b,p.a)),i["\u0275did"](2,114688,null,0,f.a,[],{group:[0,"group"],controlName:[1,"controlName"],inputType:[2,"inputType"]},null),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "]))],function(e,t){e(t,2,0,t.component.formGroup,"Value","number")},null)}function aS(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{itemDropDown:0}),(e()(),i["\u0275eld"](1,0,null,null,518,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](3,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](5,0,null,null,5,"div",[["class","col-sm-12 mt-1"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](7,0,null,null,2,"h3",[["class","card-title mb-0"],["style"," float:left;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](8,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](13,0,null,null,505,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](15,0,null,null,502,"form",[["class","form-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0;return"submit"===t&&(o=!1!==i["\u0275nov"](e,17).onSubmit(n)&&o),"reset"===t&&(o=!1!==i["\u0275nov"](e,17).onReset()&&o),o},null,null)),i["\u0275did"](16,16384,null,0,v["\u0275bf"],[],null,null),i["\u0275did"](17,540672,null,0,v.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,v.ControlContainer,null,[v.FormGroupDirective]),i["\u0275did"](19,16384,null,0,v.NgControlStatusGroup,[v.ControlContainer],null,null),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](21,0,null,null,43,"div",[["class","col-lg-12 col-sm-12 col-md-12 mr-5"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](23,0,null,null,40,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](25,0,null,null,12,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](27,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](28,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](31,0,null,null,5,"input",[["class","form-control"],["disabled",""],["formControlName","article"],["name","article"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,32)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,32).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,32)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,32)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](32,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](34,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](36,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](39,0,null,null,12,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](41,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](42,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](45,0,null,null,5,"input",[["class","form-control"],["disabled",""],["formControlName","revenueCost"],["name","revenueCost"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==i["\u0275nov"](e,46)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==i["\u0275nov"](e,46).onTouched()&&o),"compositionstart"===t&&(o=!1!==i["\u0275nov"](e,46)._compositionStart()&&o),"compositionend"===t&&(o=!1!==i["\u0275nov"](e,46)._compositionEnd(n.target.value)&&o),o},null,null)),i["\u0275did"](46,16384,null,0,v.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,v.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[v.DefaultValueAccessor]),i["\u0275did"](48,671744,null,0,v.FormControlName,[[3,v.ControlContainer],[8,null],[8,null],[2,v.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),i["\u0275prd"](2048,null,v.NgControl,null,[v.FormControlName]),i["\u0275did"](50,16384,null,0,v.NgControlStatus,[v.NgControl],null,null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](53,0,null,null,9,"div",[["class","col-lg-4 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](55,0,null,null,2,"label",[["class","col-lg-12 col-md-12 col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275ted"](56,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275eld"](59,0,null,null,2,"app-operations-gamme-dropdown",[],null,[[null,"selectedOperation"],[null,"firstOperation"]],function(e,t,n){var i=!0,o=e.component;return"selectedOperation"===t&&(i=!1!==o.receiveOperation(n)&&i),"firstOperation"===t&&(i=!1!==o.receiveFirstId(n)&&i),i},Mx,Rx)),i["\u0275did"](60,114688,null,0,Px,[s.k,te.a],{form:[0,"form"],idGamme:[1,"idGamme"]},{selectedOperation:"selectedOperation",firstOperation:"firstOperation"}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n\n      "])),(e()(),i["\u0275eld"](66,0,null,null,423,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](68,0,null,null,28,"ul",[["class","nav nav-tabs"],["role","tablist"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](70,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](72,0,null,null,4,"a",[["aria-controls","home1"],["aria-selected","true"],["class","nav-link active show"],["data-toggle","tab"],["href","#home1"],["role","tab"],["style","font-size: larger;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](74,0,null,null,0,"i",[["class","cui-list"]],null,null,null,null,null)),(e()(),i["\u0275ted"](75,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](79,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](81,0,null,null,4,"a",[["aria-controls","home2"],["aria-selected","false"],["class","nav-link"],["data-toggle","tab"],["href","#home2"],["role","tab"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.loadPersonnelDetails()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](83,0,null,null,0,"i",[["class","cui-list"]],null,null,null,null,null)),(e()(),i["\u0275ted"](84,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](88,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](90,0,null,null,4,"a",[["aria-controls","home3"],["aria-selected","false"],["class","nav-link"],["data-toggle","tab"],["href","#home3"],["role","tab"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.loadEquipmentDetails()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](92,0,null,null,0,"i",[["class","cui-list"]],null,null,null,null,null)),(e()(),i["\u0275ted"](93,null,[" ","\n            "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n\n        "])),(e()(),i["\u0275eld"](98,0,null,null,390,"div",[["class","tab-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](100,0,null,null,207,"div",[["class","tab-pane active show"],["id","home1"],["role","tabpanel"]],null,null,null,null,null)),i["\u0275did"](101,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](102,{"min-height":0,"max-height":1,"overflow-y":2}),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](104,0,null,null,202,"kendo-grid",[],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](136,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],sortable:[5,"sortable"],pageable:[6,"pageable"],resizable:[7,"resizable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange"}),i["\u0275qud"](603979776,2,{columns:1}),i["\u0275qud"](603979776,3,{detailTemplateChildren:1}),i["\u0275qud"](603979776,4,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,5,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,6,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,7,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n\n               "])),(e()(),i["\u0275eld"](145,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](146,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,8,{headerTemplates:1}),i["\u0275qud"](335544320,9,{footerTemplate:0}),i["\u0275qud"](603979776,10,{columnMenuTemplates:1}),i["\u0275qud"](335544320,11,{template:0}),i["\u0275qud"](335544320,12,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,13,{groupFooterTemplate:0}),i["\u0275qud"](335544320,14,{editTemplate:0}),i["\u0275qud"](335544320,15,{filterCellTemplate:0}),i["\u0275qud"](335544320,16,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,Bx)),i["\u0275did"](160,16384,[[11,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n        \n              "])),(e()(),i["\u0275eld"](163,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](164,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,17,{headerTemplates:1}),i["\u0275qud"](335544320,18,{footerTemplate:0}),i["\u0275qud"](603979776,19,{columnMenuTemplates:1}),i["\u0275qud"](335544320,20,{template:0}),i["\u0275qud"](335544320,21,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,22,{groupFooterTemplate:0}),i["\u0275qud"](335544320,23,{editTemplate:0}),i["\u0275qud"](335544320,24,{filterCellTemplate:0}),i["\u0275qud"](335544320,25,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,jx)),i["\u0275did"](178,16384,[[20,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,zx)),i["\u0275did"](181,16384,[[23,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](184,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](185,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,26,{headerTemplates:1}),i["\u0275qud"](335544320,27,{footerTemplate:0}),i["\u0275qud"](603979776,28,{columnMenuTemplates:1}),i["\u0275qud"](335544320,29,{template:0}),i["\u0275qud"](335544320,30,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,31,{groupFooterTemplate:0}),i["\u0275qud"](335544320,32,{editTemplate:0}),i["\u0275qud"](335544320,33,{filterCellTemplate:0}),i["\u0275qud"](335544320,34,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,Ux)),i["\u0275did"](199,16384,[[29,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](202,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](203,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,35,{headerTemplates:1}),i["\u0275qud"](335544320,36,{footerTemplate:0}),i["\u0275qud"](603979776,37,{columnMenuTemplates:1}),i["\u0275qud"](335544320,38,{template:0}),i["\u0275qud"](335544320,39,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,40,{groupFooterTemplate:0}),i["\u0275qud"](335544320,41,{editTemplate:0}),i["\u0275qud"](335544320,42,{filterCellTemplate:0}),i["\u0275qud"](335544320,43,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Fx)),i["\u0275did"](217,16384,[[38,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Gx)),i["\u0275did"](220,16384,[[41,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            \n            "])),(e()(),i["\u0275eld"](223,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](224,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,44,{headerTemplates:1}),i["\u0275qud"](335544320,45,{footerTemplate:0}),i["\u0275qud"](603979776,46,{columnMenuTemplates:1}),i["\u0275qud"](335544320,47,{template:0}),i["\u0275qud"](335544320,48,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,49,{groupFooterTemplate:0}),i["\u0275qud"](335544320,50,{editTemplate:0}),i["\u0275qud"](335544320,51,{filterCellTemplate:0}),i["\u0275qud"](335544320,52,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,qx)),i["\u0275did"](238,16384,[[47,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,Vx)),i["\u0275did"](241,16384,[[50,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            \n            "])),(e()(),i["\u0275eld"](244,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](245,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,53,{headerTemplates:1}),i["\u0275qud"](335544320,54,{footerTemplate:0}),i["\u0275qud"](603979776,55,{columnMenuTemplates:1}),i["\u0275qud"](335544320,56,{template:0}),i["\u0275qud"](335544320,57,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,58,{groupFooterTemplate:0}),i["\u0275qud"](335544320,59,{editTemplate:0}),i["\u0275qud"](335544320,60,{filterCellTemplate:0}),i["\u0275qud"](335544320,61,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,Wx)),i["\u0275did"](259,16384,[[56,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](0,null,null,1,null,Yx)),i["\u0275did"](262,16384,[[59,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](265,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](266,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,62,{headerTemplates:1}),i["\u0275qud"](335544320,63,{footerTemplate:0}),i["\u0275qud"](603979776,64,{columnMenuTemplates:1}),i["\u0275qud"](335544320,65,{template:0}),i["\u0275qud"](335544320,66,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,67,{groupFooterTemplate:0}),i["\u0275qud"](335544320,68,{editTemplate:0}),i["\u0275qud"](335544320,69,{filterCellTemplate:0}),i["\u0275qud"](335544320,70,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](0,null,null,1,null,Xx)),i["\u0275did"](280,16384,[[65,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](0,null,null,1,null,Zx)),i["\u0275did"](283,16384,[[68,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        \n        "])),(e()(),i["\u0275eld"](286,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](287,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,71,{headerTemplates:1}),i["\u0275qud"](335544320,72,{footerTemplate:0}),i["\u0275qud"](603979776,73,{columnMenuTemplates:1}),i["\u0275qud"](335544320,74,{template:0}),i["\u0275qud"](335544320,75,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,76,{groupFooterTemplate:0}),i["\u0275qud"](335544320,77,{editTemplate:0}),i["\u0275qud"](335544320,78,{filterCellTemplate:0}),i["\u0275qud"](335544320,79,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[2,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](0,null,null,1,null,Jx)),i["\u0275did"](301,16384,[[74,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](0,null,null,1,null,Kx)),i["\u0275did"](304,16384,[[77,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](309,0,null,null,89,"div",[["class","tab-pane"],["id","home2"],["role","tabpanel"]],null,null,null,null,null)),i["\u0275did"](310,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](311,{"min-height":0,"max-height":1,"overflow-y":2}),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](313,0,null,null,84,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](345,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange"}),i["\u0275qud"](603979776,80,{columns:1}),i["\u0275qud"](603979776,81,{detailTemplateChildren:1}),i["\u0275qud"](603979776,82,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,83,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,84,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,85,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n\n                                "])),(e()(),i["\u0275and"](0,null,null,1,null,Qx)),i["\u0275did"](355,16384,[[84,4]],0,m._110,[[2,i.TemplateRef]],{position:[0,"position"]},null),(e()(),i["\u0275ted"](-1,null,["\n\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](358,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](359,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,86,{headerTemplates:1}),i["\u0275qud"](335544320,87,{footerTemplate:0}),i["\u0275qud"](603979776,88,{columnMenuTemplates:1}),i["\u0275qud"](335544320,89,{template:0}),i["\u0275qud"](335544320,90,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,91,{groupFooterTemplate:0}),i["\u0275qud"](335544320,92,{editTemplate:0}),i["\u0275qud"](335544320,93,{filterCellTemplate:0}),i["\u0275qud"](335544320,94,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[80,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,$x)),i["\u0275did"](373,16384,[[89,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n        \n              "])),(e()(),i["\u0275eld"](376,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](377,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,95,{headerTemplates:1}),i["\u0275qud"](335544320,96,{footerTemplate:0}),i["\u0275qud"](603979776,97,{columnMenuTemplates:1}),i["\u0275qud"](335544320,98,{template:0}),i["\u0275qud"](335544320,99,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,100,{groupFooterTemplate:0}),i["\u0275qud"](335544320,101,{editTemplate:0}),i["\u0275qud"](335544320,102,{filterCellTemplate:0}),i["\u0275qud"](335544320,103,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[80,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,eS)),i["\u0275did"](391,16384,[[98,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,tS)),i["\u0275did"](394,16384,[[101,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](400,0,null,null,87,"div",[["class","tab-pane"],["id","home3"],["role","tabpanel"]],null,null,null,null,null)),i["\u0275did"](401,278528,null,0,h.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](402,{"min-height":0,"max-height":1,"overflow-y":2}),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](404,0,null,null,82,"kendo-grid",[["filterable","menu"]],[[1,"dir",0],[2,"k-widget",null],[2,"k-grid",null],[2,"k-grid-lockedcolumns",null],[2,"k-grid-virtual",null],[2,"k-grid-column-resizing",null],[2,"k-grid-no-scrollbar",null]],[[null,"pageChange"],[null,"dataStateChange"]],function(e,t,n){var i=!0,o=e.component;return"pageChange"===t&&(i=!1!==o.onPageChange(n)&&i),"dataStateChange"===t&&(i=!1!==o.dataStateChange(n)&&i),i},g.G,g.o)),i["\u0275prd"](4608,null,m._105,m._105,[]),i["\u0275prd"](4608,null,m._84,m._84,[]),i["\u0275prd"](135680,null,m._97,m._97,[y.g,i.Renderer2,i.NgZone,m._90,b.c]),i["\u0275prd"](4608,null,m.V,m.V,[]),i["\u0275prd"](4608,null,m.W,m.W,[i.Sanitizer]),i["\u0275prd"](4608,null,m.Z,m.Z,[]),i["\u0275prd"](4608,null,m._46,m._46,[]),i["\u0275prd"](512,null,m.j,m.j,[]),i["\u0275prd"](512,null,m.T,m.T,[]),i["\u0275prd"](512,null,m._55,m._55,[]),i["\u0275prd"](131584,null,m._94,m._94,[m.T,m._55]),i["\u0275prd"](512,null,m._39,m._39,[]),i["\u0275prd"](512,null,m._42,m._42,[[2,m._98]]),i["\u0275prd"](512,null,m.o,m.o,[i.NgZone]),i["\u0275prd"](512,null,m.R,m.R,[]),i["\u0275prd"](512,null,m._3,m._3,[i.NgZone]),i["\u0275prd"](512,null,m._25,m._25,[]),i["\u0275prd"](512,null,m._70,m._70,[]),i["\u0275prd"](512,null,m._85,m._85,[]),i["\u0275prd"](512,null,m._10,m._10,[]),i["\u0275prd"](256,null,b.b,"kendo.grid",[]),i["\u0275prd"](131584,null,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275prd"](512,null,m._90,m._90,[i.NgZone,b.c]),i["\u0275prd"](512,null,m.I,m.I,[]),i["\u0275prd"](512,null,m.H,m.H,[]),i["\u0275prd"](512,null,m.w,m.w,[]),i["\u0275prd"](512,null,m._73,m._73,[]),i["\u0275prd"](512,null,m._89,m._89,[]),i["\u0275prd"](512,null,m._27,m._27,[]),i["\u0275prd"](131584,null,m._60,m._60,[i.NgZone,m.T,m._73,m._89,m._42,m.R,m._27,m._3,i.ChangeDetectorRef,b.c,[2,m._28]]),i["\u0275prd"](512,null,m._99,m._99,[]),i["\u0275did"](436,8110080,null,6,m._34,[m.j,m._94,i.ElementRef,m._39,m._42,m.o,m.R,m._3,m._25,m._70,m._85,i.Renderer2,m._10,i.NgZone,m._90,m.T,m.I,i.ChangeDetectorRef,m.H,m.w,m._60,m._99,b.c],{data:[0,"data"],pageSize:[1,"pageSize"],skip:[2,"skip"],sort:[3,"sort"],filter:[4,"filter"],filterable:[5,"filterable"],sortable:[6,"sortable"],pageable:[7,"pageable"],reorderable:[8,"reorderable"],columnMenu:[9,"columnMenu"]},{pageChange:"pageChange",dataStateChange:"dataStateChange"}),i["\u0275qud"](603979776,104,{columns:1}),i["\u0275qud"](603979776,105,{detailTemplateChildren:1}),i["\u0275qud"](603979776,106,{noRecordsTemplateChildren:1}),i["\u0275qud"](603979776,107,{pagerTemplateChildren:1}),i["\u0275qud"](603979776,108,{toolbarTemplateChildren:1}),i["\u0275qud"](603979776,109,{columnMenuTemplates:1}),i["\u0275prd"](256,null,m.k,m._1,[]),(e()(),i["\u0275ted"](-1,null,["\n                                "])),(e()(),i["\u0275and"](0,null,null,1,null,nS)),i["\u0275did"](446,16384,[[108,4]],0,m._110,[[2,i.TemplateRef]],{position:[0,"position"]},null),(e()(),i["\u0275ted"](-1,null,["\n               \n                "])),(e()(),i["\u0275eld"](448,0,null,null,16,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](449,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,110,{headerTemplates:1}),i["\u0275qud"](335544320,111,{footerTemplate:0}),i["\u0275qud"](603979776,112,{columnMenuTemplates:1}),i["\u0275qud"](335544320,113,{template:0}),i["\u0275qud"](335544320,114,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,115,{groupFooterTemplate:0}),i["\u0275qud"](335544320,116,{editTemplate:0}),i["\u0275qud"](335544320,117,{filterCellTemplate:0}),i["\u0275qud"](335544320,118,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[104,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275and"](0,null,null,1,null,iS)),i["\u0275did"](463,16384,[[113,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n        \n              "])),(e()(),i["\u0275eld"](466,0,null,null,19,"kendo-grid-column",[],null,null,null,g.z,g.h)),i["\u0275did"](467,49152,null,9,m.t,[[8,null]],{title:[0,"title"],field:[1,"field"],format:[2,"format"],filter:[3,"filter"],filterable:[4,"filterable"]},null),i["\u0275qud"](603979776,119,{headerTemplates:1}),i["\u0275qud"](335544320,120,{footerTemplate:0}),i["\u0275qud"](603979776,121,{columnMenuTemplates:1}),i["\u0275qud"](335544320,122,{template:0}),i["\u0275qud"](335544320,123,{groupHeaderTemplate:0}),i["\u0275qud"](335544320,124,{groupFooterTemplate:0}),i["\u0275qud"](335544320,125,{editTemplate:0}),i["\u0275qud"](335544320,126,{filterCellTemplate:0}),i["\u0275qud"](335544320,127,{filterMenuTemplate:0}),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),i["\u0275prd"](2048,[[104,4]],m.r,null,[m.t]),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,oS)),i["\u0275did"](481,16384,[[122,4]],0,m.n,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](0,null,null,1,null,rS)),i["\u0275did"](484,16384,[[125,4]],0,m._4,[[2,i.TemplateRef]],null,null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n           \n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](492,0,null,null,23,"div",[["class","fixed-card-footer"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](494,0,null,null,20,"div",[["class","footerStyle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](496,0,null,null,17,"footer",[["class","app-footer"],["style","margin-left: 0;"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](498,0,null,null,14,"div",[["class","w-100"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](500,0,null,null,11,"div",[["class","d-flex justify-content-end p-3 footer-content"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](502,0,null,null,8,"a",[["routerLink","/main/manufacturing/calculate_cost_price"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==i["\u0275nov"](e,503).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&o),o},null,null)),i["\u0275did"](503,671744,null,0,T.RouterLinkWithHref,[T.Router,T.ActivatedRoute,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](505,0,null,null,4,"span",[["class","btn btn-sm btn-back-to-list btn-primary"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](507,0,null,null,0,"i",[["class","fa fa-chevron-circle-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](508,null,[" ","\n                  "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,17,0,n.formGroup),e(t,34,0,"article",""),e(t,48,0,"revenueCost",""),e(t,60,0,n.formGroup,n.idGamme),e(t,101,0,e(t,102,0,"auto","auto","auto")),e(t,136,0,n.gridSettingsNomenclatures.gridData,n.gridSettingsNomenclatures.state.take,n.gridSettingsNomenclatures.state.skip,n.gridSettingsNomenclatures.state.sort,n.gridSettingsNomenclatures.state.filter,!0,n.pagerSettingsPers,!0,!0,!1),e(t,146,0,i["\u0275unv"](t,146,0,i["\u0275nov"](t,156).transform(n.gridSettingsNomenclatures.columnsConfig[0].title)),n.gridSettingsNomenclatures.columnsConfig[0].field,n.gridSettingsNomenclatures.columnsConfig[0].format,n.gridSettingsNomenclatures.columnsConfig[0].filter,n.gridSettingsNomenclatures.columnsConfig[0].filterable),e(t,164,0,i["\u0275unv"](t,164,0,i["\u0275nov"](t,174).transform(n.gridSettingsNomenclatures.columnsConfig[1].title)),n.gridSettingsNomenclatures.columnsConfig[1].field,n.gridSettingsNomenclatures.columnsConfig[1].format,n.gridSettingsNomenclatures.columnsConfig[1].filter,n.gridSettingsNomenclatures.columnsConfig[1].filterable),e(t,185,0,i["\u0275unv"](t,185,0,i["\u0275nov"](t,195).transform(n.gridSettingsNomenclatures.columnsConfig[2].title)),n.gridSettingsNomenclatures.columnsConfig[2].field,n.gridSettingsNomenclatures.columnsConfig[2].format,n.gridSettingsNomenclatures.columnsConfig[2].filter,n.gridSettingsNomenclatures.columnsConfig[2].filterable),e(t,203,0,i["\u0275unv"](t,203,0,i["\u0275nov"](t,213).transform(n.gridSettingsNomenclatures.columnsConfig[3].title)),n.gridSettingsNomenclatures.columnsConfig[3].field,n.gridSettingsNomenclatures.columnsConfig[3].format,n.gridSettingsNomenclatures.columnsConfig[3].filter,n.gridSettingsNomenclatures.columnsConfig[3].filterable),e(t,224,0,i["\u0275unv"](t,224,0,i["\u0275nov"](t,234).transform(n.gridSettingsNomenclatures.columnsConfig[4].title)),n.gridSettingsNomenclatures.columnsConfig[4].field,n.gridSettingsNomenclatures.columnsConfig[4].format,n.gridSettingsNomenclatures.columnsConfig[4].filter,n.gridSettingsNomenclatures.columnsConfig[4].filterable),e(t,245,0,i["\u0275unv"](t,245,0,i["\u0275nov"](t,255).transform(n.gridSettingsNomenclatures.columnsConfig[5].title)),n.gridSettingsNomenclatures.columnsConfig[5].field,n.gridSettingsNomenclatures.columnsConfig[5].format,n.gridSettingsNomenclatures.columnsConfig[5].filter,n.gridSettingsNomenclatures.columnsConfig[5].filterable),e(t,266,0,i["\u0275unv"](t,266,0,i["\u0275nov"](t,276).transform(n.gridSettingsNomenclatures.columnsConfig[6].title)),n.gridSettingsNomenclatures.columnsConfig[6].field,n.gridSettingsNomenclatures.columnsConfig[6].format,n.gridSettingsNomenclatures.columnsConfig[6].filter,n.gridSettingsNomenclatures.columnsConfig[6].filterable),e(t,287,0,i["\u0275unv"](t,287,0,i["\u0275nov"](t,297).transform(n.gridSettingsNomenclatures.columnsConfig[7].title)),n.gridSettingsNomenclatures.columnsConfig[7].field,n.gridSettingsNomenclatures.columnsConfig[7].format,n.gridSettingsNomenclatures.columnsConfig[7].filter,n.gridSettingsNomenclatures.columnsConfig[7].filterable),e(t,310,0,e(t,311,0,"auto","auto","auto")),e(t,345,0,n.gridPersonnelSettings.gridData,n.gridPersonnelSettings.state.take,n.gridPersonnelSettings.state.skip,n.gridPersonnelSettings.state.sort,n.gridPersonnelSettings.state.filter,"menu",!0,n.pagerSettingsPers,!0,!0),e(t,355,0,"bottom"),e(t,359,0,i["\u0275unv"](t,359,0,i["\u0275nov"](t,369).transform(n.gridPersonnelSettings.columnsConfig[0].title)),n.gridPersonnelSettings.columnsConfig[0].field,n.gridPersonnelSettings.columnsConfig[0].format,n.gridPersonnelSettings.columnsConfig[0].filter,n.gridPersonnelSettings.columnsConfig[0].filterable),e(t,377,0,i["\u0275unv"](t,377,0,i["\u0275nov"](t,387).transform(n.gridPersonnelSettings.columnsConfig[1].title)),n.gridPersonnelSettings.columnsConfig[1].field,n.gridPersonnelSettings.columnsConfig[1].format,n.gridPersonnelSettings.columnsConfig[1].filter,n.gridPersonnelSettings.columnsConfig[1].filterable),e(t,401,0,e(t,402,0,"auto","auto","auto")),e(t,436,0,n.gridEquipmentSettings.gridData,n.gridEquipmentSettings.state.take,n.gridEquipmentSettings.state.skip,n.gridEquipmentSettings.state.sort,n.gridEquipmentSettings.state.filter,"menu",!0,n.pagerSettingsEquip,!0,!0),e(t,446,0,"bottom"),e(t,449,0,i["\u0275unv"](t,449,0,i["\u0275nov"](t,459).transform(n.gridEquipmentSettings.columnsConfig[0].title)),n.gridEquipmentSettings.columnsConfig[0].field,n.gridEquipmentSettings.columnsConfig[0].format,n.gridEquipmentSettings.columnsConfig[0].filter,n.gridEquipmentSettings.columnsConfig[0].filterable),e(t,467,0,i["\u0275unv"](t,467,0,i["\u0275nov"](t,477).transform(n.gridEquipmentSettings.columnsConfig[1].title)),n.gridEquipmentSettings.columnsConfig[1].field,n.gridEquipmentSettings.columnsConfig[1].format,n.gridEquipmentSettings.columnsConfig[1].filter,n.gridEquipmentSettings.columnsConfig[1].filterable),e(t,503,0,"/main/manufacturing/calculate_cost_price")},function(e,t){e(t,8,0,i["\u0275unv"](t,8,0,i["\u0275nov"](t,9).transform("OPERATION_NEED"))),e(t,15,0,i["\u0275nov"](t,19).ngClassUntouched,i["\u0275nov"](t,19).ngClassTouched,i["\u0275nov"](t,19).ngClassPristine,i["\u0275nov"](t,19).ngClassDirty,i["\u0275nov"](t,19).ngClassValid,i["\u0275nov"](t,19).ngClassInvalid,i["\u0275nov"](t,19).ngClassPending),e(t,28,0,i["\u0275unv"](t,28,0,i["\u0275nov"](t,29).transform("ARTICLE"))),e(t,31,0,i["\u0275nov"](t,36).ngClassUntouched,i["\u0275nov"](t,36).ngClassTouched,i["\u0275nov"](t,36).ngClassPristine,i["\u0275nov"](t,36).ngClassDirty,i["\u0275nov"](t,36).ngClassValid,i["\u0275nov"](t,36).ngClassInvalid,i["\u0275nov"](t,36).ngClassPending),e(t,42,0,i["\u0275unv"](t,42,0,i["\u0275nov"](t,43).transform("REVENUE_COST"))),e(t,45,0,i["\u0275nov"](t,50).ngClassUntouched,i["\u0275nov"](t,50).ngClassTouched,i["\u0275nov"](t,50).ngClassPristine,i["\u0275nov"](t,50).ngClassDirty,i["\u0275nov"](t,50).ngClassValid,i["\u0275nov"](t,50).ngClassInvalid,i["\u0275nov"](t,50).ngClassPending),e(t,56,0,i["\u0275unv"](t,56,0,i["\u0275nov"](t,57).transform("OPERATION"))),e(t,75,0,i["\u0275unv"](t,75,0,i["\u0275nov"](t,76).transform("PRODUCTS_TITLE"))),e(t,84,0,i["\u0275unv"](t,84,0,i["\u0275nov"](t,85).transform("PERSONNEL"))),e(t,93,0,i["\u0275unv"](t,93,0,i["\u0275nov"](t,94).transform("EQUIPMENT"))),e(t,104,0,i["\u0275nov"](t,136).dir,i["\u0275nov"](t,136).hostClasses,i["\u0275nov"](t,136).hostClasses,i["\u0275nov"](t,136).lockedClasses,i["\u0275nov"](t,136).virtualClasses,i["\u0275nov"](t,136).columnResizing,i["\u0275nov"](t,136).noScrollbarClass),e(t,313,0,i["\u0275nov"](t,345).dir,i["\u0275nov"](t,345).hostClasses,i["\u0275nov"](t,345).hostClasses,i["\u0275nov"](t,345).lockedClasses,i["\u0275nov"](t,345).virtualClasses,i["\u0275nov"](t,345).columnResizing,i["\u0275nov"](t,345).noScrollbarClass),e(t,404,0,i["\u0275nov"](t,436).dir,i["\u0275nov"](t,436).hostClasses,i["\u0275nov"](t,436).hostClasses,i["\u0275nov"](t,436).lockedClasses,i["\u0275nov"](t,436).virtualClasses,i["\u0275nov"](t,436).columnResizing,i["\u0275nov"](t,436).noScrollbarClass),e(t,502,0,i["\u0275nov"](t,503).target,i["\u0275nov"](t,503).href),e(t,508,0,i["\u0275unv"](t,508,0,i["\u0275nov"](t,509).transform("BACK_TO_LIST")))})}var lS=i["\u0275ccf"]("app-needs-per-operation",Lx,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-needs-per-operation",[],null,null,null,aS,Hx)),i["\u0275did"](1,245760,null,0,Lx,[T.ActivatedRoute,T.Router,te.a,l.a,dn.a,mt.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),sS=n("bSSL"),dS=function(){return 65536*(1+Math.random())|0},cS=function(e){return JSON.stringify(e)},uS=function(){var e={hashes:{}};this.diff=function(t){var n={},i={};t=t||[];for(var o=0;o<t.length;o++){var r=t[o],a=r.id;if(!a)throw"The 'id' property must be specified for event data object";if(i.hasOwnProperty(""+a))throw"Duplicate event IDs are not allowed, id: "+a;i[""+a]=JSON.stringify(r)}return n.add=t.filter(function(t){return!e.hashes.hasOwnProperty(t.id)}),n.remove=Object.getOwnPropertyNames(e.hashes).filter(function(e){return!i.hasOwnProperty(e)}).map(function(t){return JSON.parse(e.hashes[t]).id}),n.modify=t.filter(function(t){return e.hashes.hasOwnProperty(t.id)&&e.hashes[t.id]!==i[t.id]}),n.changeCount=n.add.length+n.modify.length+n.remove.length,e.hashes=i,n}},hS=(function(){function e(){this._requestUpdateFull=!1,this._requestUpdateEvents=!1,this._requestViewChange=!1,this._eventDiff=new uS,this._visibleRange={start:null,end:null},this._eventsSet=!1,this._id="dp_"+(new Date).getTime()+dS(),this.viewChange=new i.EventEmitter}Object.defineProperty(e.prototype,"events",{get:function(){return this._events},set:function(e){this._eventsSet=!0,this._events=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngAfterViewInit=function(){this.control=new sS.a.Scheduler(this.id),this.control.internal.enableAngular2(),this.updateOptions(),this.updateEvents(),this._requestUpdateFull=!1,this._requestUpdateEvents=!1,this.control.init()},e.prototype.ngDoCheck=function(){if(this.control){this.updateOptions(),this.updateEvents();var e=this.control;if(this._requestUpdateFull?(this.control.update(),e.internal.postInit(),this._requestUpdateFull=!1,this._requestUpdateEvents=!1):this._requestUpdateEvents&&(this.control.update({events:this.events}),this._requestUpdateEvents=!1),this._requestViewChange){this._requestViewChange=!1;var t={};t.visibleRangeChanged=this._visibleRange.start!==this.control.visibleStart()||this._visibleRange.end!==this.control.visibleEnd(),this._visibleRange.start=this.control.visibleStart(),this._visibleRange.end=this.control.visibleEnd(),this.viewChange.emit(t)}}},e.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},e.prototype.updateOptions=function(){var e=cS(this.config);if(e!==this._hashOptions){var t=this.control;this.config&&this.config.resources&&t.internal.resourcesFromAttr(),t.internal.skipUpdate()?t.internal.skipped():(t.internal.loadOptions(this.config),this._requestUpdateFull=!0,this._requestViewChange=!0)}this._hashOptions=e},e.prototype.updateEvents=function(){if(this._eventsSet){var e=this._eventDiff.diff(this.events),t=this.control;t.internal.eventsFromAttr(),t.internal.skipUpdate()?t.internal.skipped():0===e.changeCount&&this.events===t.events.list||(e.changeCount<10&&this.events===t.events.list?(e.add.forEach(function(e){t.events.add(new sS.a.Event(e),null,{renderOnly:!0})}),e.modify.forEach(function(e){t.events.update(new sS.a.Event(e))}),e.remove.forEach(function(e){var n=t.events.find(e);n&&t.events.remove(n)}),t.internal.evImmediateRefresh()):(t.events.list=this.events,this._requestUpdateEvents=!0))}}}(),function(){function e(){this._requestUpdateFull=!1,this._requestUpdateEvents=!1,this._requestViewChange=!1,this._id="dp_"+(new Date).getTime()+dS(),this.viewChange=new i.EventEmitter}Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngAfterViewInit=function(){this.dispose();var e=new sS.a.Calendar(this.id);this.control=e,this.updateOptions(),this.updateEvents(),this._requestUpdateFull=!1,this._requestUpdateEvents=!1,e.init()},e.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this.updateEvents(),this._requestUpdateFull?(this.control.update(),this._requestUpdateFull=!1,this._requestUpdateEvents=!1):this._requestUpdateEvents&&(this.control.update({events:this.events}),this._requestUpdateEvents=!1),this._requestViewChange)&&(this._requestViewChange=!1,this.viewChange.emit({}))},e.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},e.prototype.updateOptions=function(){var e=cS(this.config);if(e!==this._hashOptions){var t=this.control;for(var n in this.config)t[n]=this.config[n];this._requestUpdateFull=!0,this._requestViewChange=!0}this._hashOptions=e},e.prototype.updateEvents=function(){var e=cS(this.events);e!==this._hashEvents&&(this.control.events.list=this.events,this._requestUpdateEvents=!0),this._hashEvents=e}}(),function(){function e(){this._requestUpdate=!1,this._id="dp_"+(new Date).getTime()+dS()}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngAfterViewInit=function(){this.dispose(),this.control=new sS.a.Gantt(this.id),this.updateOptions(),this._requestUpdate=!1,this.control.init()},e.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this._requestUpdate&&(this.control.update(),this._requestUpdate=!1))},e.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},e.prototype.updateOptions=function(){var e=cS(this.config);e!==this._hashOptions&&(this.control.internal.loadOptions(this.config),this._requestUpdate=!0),this._hashOptions=e},e}()),pS=(function(){function e(){this._requestUpdate=!1,this._id="dp_"+(new Date).getTime()+dS()}Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngAfterViewInit=function(){this.dispose(),this.control=new sS.a.Month(this.id),this.updateOptions(),this.updateEvents(),this._requestUpdate=!1,this.control.init()},e.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this.updateEvents(),this._requestUpdate&&(this.control.update(),this._requestUpdate=!1))},e.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},e.prototype.updateOptions=function(){var e=cS(this.config);if(e!==this._hashOptions){var t=this.control;for(var n in this.config)t[n]=this.config[n];this._requestUpdate=!0}this._hashOptions=e},e.prototype.updateEvents=function(){var e=cS(this.events);e!==this._hashEvents&&(this.control.events.list=this.events,this._requestUpdate=!0),this._hashEvents=e}}(),function(){function e(){this._requestUpdate=!1,this._id="dp_"+(new Date).getTime()+dS()}Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngAfterViewInit=function(){this.dispose(),this.control=new sS.a.Kanban(this.id),this.updateOptions(),this._requestUpdate=!1,this.control.init()},e.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this._requestUpdate&&(this.control.update(),this._requestUpdate=!1))},e.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},e.prototype.updateOptions=function(){var e=cS(this.config);e!==this._hashOptions&&(this.control.internal.loadOptions(this.config),this._requestUpdate=!0),this._hashOptions=e}}(),function(){function e(){this._requestUpdate=!1,this._onTrs=null,this._date=sS.a.Date.today(),this._dateSet=!1,this._currentDate=null,this.dateChange=new i.EventEmitter,this._id="dp_"+(new Date).getTime()+dS()}Object.defineProperty(e.prototype,"date",{get:function(){return this._date},set:function(e){this._date=e,this._dateSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngAfterViewInit=function(){this.dispose(),this.control=new sS.a.Navigator(this.id);var e=this;this.updateOptions(),this.updateEvents();var t=this.control;this.control.onTimeRangeSelected=function(n){e.dateChange.emit(n.day),e._onTrs&&e._onTrs.call(t,n)},this._requestUpdate=!1,this.control.init(),this.control.selectionDay!==sS.a.Date.today()&&e.dateChange.emit(this.control.selectionDay)},e.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this.updateEvents(),this._requestUpdate&&(this.control.update(),this._requestUpdate=!1))},e.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},e.prototype.updateOptions=function(){var e=this.control,t=cS(this.config);if(t!==this._hashOptions)for(var n in this.config)"selectionDay"!==n&&("onTimeRangeSelected"===n?this._onTrs=this.config.onTimeRangeSelected:e[n]=this.config[n],this._requestUpdate=!0);this._dateSet&&this.date&&(this._dateSet=!1,this._currentDate=e.selectionDay,e.select(this.date)),this._hashOptions=t},e.prototype.updateEvents=function(){var e=cS(this.events);e!==this._hashEvents&&(this.control.events.list=this.events,this._requestUpdate=!0),this._hashEvents=e}}(),function(){function e(e){this.element=e,this.autoFocus=!0,this.close=new i.EventEmitter,this._visibility="hidden"}Object.defineProperty(e.prototype,"visible",{get:function(){return"visible"===this._visibility},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.show=function(){this._visibility="visible";var e=this.element.nativeElement;this.autoFocus&&setTimeout(function(){var t=e.querySelector("input");t&&t.focus()})},e.prototype.hide=function(e){this._visibility="hidden",this.close.emit({result:e})}}(),function(){function e(){this._requestUpdate=!1,this._id="dp_"+(new Date).getTime()+dS()}Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngAfterViewInit=function(){this.dispose(),this.control=new sS.a.Queue(this.id),this.updateOptions(),this._requestUpdate=!1,this.control.init()},e.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this._requestUpdate&&(this.control.update(),this._requestUpdate=!1))},e.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},e.prototype.updateOptions=function(){var e=cS(this.config);e!==this._hashOptions&&(this.control.internal.loadOptions(this.config),this._requestUpdate=!0),this._hashOptions=e}}(),function(){}),fS=i["\u0275crt"]({encapsulation:0,styles:[""],data:{}});function gS(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"div",[],[[8,"id",0]],null,null,null,null))],null,function(e,t){e(t,0,0,i["\u0275inlineInterpolate"](1,"",t.component.id,""))})}var mS=function(){function e(){}return e.ENTITY_NAME="detailOperation",e.DETAIL_OPERATION_COMPONENT_URL="main/manufacturing/detailOperation/suivi/",e.LIST_OPERATIONS_BY_ID_FABRICATION_AND_LAST_STATUS="getListOperationsByIdFabricationArrangementAndLastStatus/",e.LIST_OPERATIONS_BY_ID_FABRICATION="getDetailOperationByFabricationArrangement/",e.GET_OPERATION="",e.START_OPERATION="startOperation",e.BREAK_OPERATION="breakOperation",e.CHANGER_OPERATION="changeOperation",e.RESUME_OPERATION="resumeOperation",e.END_OPERATION="endOperation",e.CALCUL_REEL_DURATION="calculReelDurationByOperation",e.COUNT_OPERATIONS_BY_GAMME="countOperationsByGammeId",e.FILTER_PARAM="?fields=id,operation.id,operation.duration,operation.description,operation.machine.description,operation.machine.responsibleId,status,createdDate",e.STATUS_OPERATION_NOT_LANCED="NOT_LANCED",e.STATUS_OPERATION_IN_PROGRESS="IN_PROGRESS",e.STATUS_OPERATION_PAUSED="PAUSED",e.STATUS_OPERATION_RESUMED="RESUMED",e.STATUS_OPERATION_FINISHED="FINISHED",e.DESCRIPTION_STATUS_OPERATION_NOT_LANCED="OPERATION_NOT_LANCED",e.DESCRIPTION_STATUS_OPERATION_IN_PROGRESS="OPERATION_IN_PROGRESS",e.DESCRIPTION_STATUS_OPERATION_PAUSED="OPERATION_PAUSED",e.DESCRIPTION_STATUS_OPERATION_RESUMED="OPERATION_RESUMED",e.DESCRIPTION_STATUS_OPERATION_FINISHED="OPERATION_FINISHED",e.END_DATE_FIELD="finishDate",e.START_DATE_FIELD="startDate",e.END_DATE_TITLE="END_DATE",e.START_DATE_TITLE="START_DATE",e.DETAIL_OPERATION_DESCRPTION_FIELD="operation.description",e.PREPARE_DETAIL_OPERATION_DATES_URL="prepareDetailOperationDates",e}(),vS=function(e){function t(t,n){return e.call(this,t,n,"manufacturing",mS.ENTITY_NAME)||this}return Object(O.__extends)(t,e),t}(P.a),yS=function(){function e(e,t){this.detailOperationService=e,this.datePipe=t,this.config={timeHeaders:[{groupBy:"Month",format:"MMMM yyyy"},{groupBy:"Day",format:"d"}],scale:"Day",start:"2020-06-04",days:60,tasks:[],links:[]}}return e.prototype.ngOnInit=function(){var e=this;this.subscription$=this.detailOperationService.getJavaGenericService().getEntityList("").subscribe(function(t){var n=[];e.extractUniqueFabsFromDetailOperation(t,n),e.prepareFabsWithDetailOperations(t,n),e.addFabToGanttDiagram(n)})},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe()},e.prototype.extractUniqueFabsFromDetailOperation=function(e,t){e.forEach(function(e){t.filter(function(t){return t.id===e.fabricationArrangement.id}).length<=0&&t.push(e.fabricationArrangement)})},e.prototype.prepareFabsWithDetailOperations=function(e,t){t.forEach(function(t){t.detailOperation=[],e.forEach(function(e){e.fabricationArrangement.id===t.id&&t.detailOperation.filter(function(t){return t.operation.id===e.operation.id}).length<=0&&t.detailOperation.push(e)})})},e.prototype.addFabToGanttDiagram=function(e){var t=this;e.forEach(function(e){var n={start:e.startDate,end:e.endDate,id:e.id,text:e.reference,complete:0,children:[]};e.detailOperation.forEach(function(i){n.children.push({start:i.startDate,end:i.finishDate,id:e.id+""+i.operation.id,text:i.operation.description,complete:0}),i.operation.operationBeforeDtos.forEach(function(n){t.config.links.push({from:e.id+""+n.id,to:e.id+""+i.operation.id,type:vt.a.GANTT_LINK_FINISH_TO_START})})}),t.config.tasks.push(n)})},e}(),bS=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function wS(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{gantt:0}),(e()(),i["\u0275eld"](1,0,null,null,1,"daypilot-gantt",[],null,null,null,gS,fS)),i["\u0275did"](2,4702208,null,0,hS,[],{config:[0,"config"]},null),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){e(t,2,0,t.component.config)},null)}var CS=i["\u0275ccf"]("app-fab-gantt-diagram",yS,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-fab-gantt-diagram",[],null,null,null,wS,bS)),i["\u0275did"](1,245760,null,0,yS,[vS,h.DatePipe],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),xS=n("GRaa"),SS=(n("owTz"),function(){function e(){}return e.MANUFACTURING="manufacturing",e.ENTITY_NAME="chart",e.URL_NBR_FAB_GAMME="nbrFabPerGamme",e.URL_NBR_FAB_STATE="nbrFabByState",e.URL_FINISHED_FAB_MOTH="finishedFabByMonth",e.LABEL_NBR_FAB_GAMME="number fabrication arrangement by range",e}()),TS=function(e){function t(t,n){return e.call(this,t,n,SS.MANUFACTURING,SS.ENTITY_NAME)||this}return Object(O.__extends)(t,e),t}(P.a),ES=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,l)}s((i=i.apply(e,t||[])).next())})},_S=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},kS=function(){function e(e){this.chartService=e,this.ClickedClass="card h-100",this.barChartOptions={scaleShowVerticalLines:!1,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0,stepValue:10,steps:0,max:20}}]}},this.barChartLabels=[],this.barChartType="bar",this.barChartLegend=!0,this.barChartData=[{data:[],label:SS.LABEL_NBR_FAB_GAMME}],this.doughnutChartLabels=[],this.doughnutChartData=[],this.chartDoughnutOptions={responsive:!0},this.doughnutChartColors=[{backgroundColor:["rgba(181,25,28,0.38)","rgba(66,181,49,0.38)","rgba(26,96,175,0.38)","rgba(107,181,255,0.38)"]}],this.chartLineType="line",this.chartLineData=[{data:[],label:"Anthracnose",fill:!1}],this.chartLineLabels=[],this.chartLineColors=[{backgroundColor:"rgba(151,36,241,0.46)",borderColor:"rgba(98,136,116,0.24)"}],this.chartLineOptions={scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]},annotation:{drawTime:"beforeDatasetsDraw",annotations:[{type:"box",id:"a-box-1",yScaleID:"y-axis-0",yMin:0,yMax:1,backgroundColor:"#4cf03b"},{type:"box",id:"a-box-2",yScaleID:"y-axis-0",yMin:1,yMax:2.7,backgroundColor:"#fefe32"},{type:"box",id:"a-box-3",yScaleID:"y-axis-0",yMin:2.7,yMax:5,backgroundColor:"#fe3232"}]}}}return e.prototype.ngOnInit=function(){return ES(this,void 0,void 0,function(){return _S(this,function(e){switch(e.label){case 0:return this.prepareDoughnutChartParams(),[4,this.prepareBarChartParams()];case 1:return e.sent(),this.prepareLineChartParams(),[2]}})})},e.prototype.prepareBarChartParams=function(){return ES(this,void 0,void 0,function(){var e=this;return _S(this,function(t){switch(t.label){case 0:return[4,this.chartService.getJavaGenericService().getEntityList(SS.URL_NBR_FAB_GAMME).toPromise().then(function(t){return ES(e,void 0,void 0,function(){var e;return _S(this,function(n){switch(n.label){case 0:return e=this,[4,Object.keys(t).forEach(function(n){e.barChartData[0].data.push(t[n]),e.barChartLabels.push(n)})];case 1:return n.sent(),[2]}})})})];case 1:return t.sent(),[2]}})})},e.prototype.prepareDoughnutChartParams=function(){var e=this;this.chartService.getJavaGenericService().getEntityList(SS.URL_NBR_FAB_STATE).subscribe(function(t){var n=e;Object.keys(t).forEach(function(e){n.doughnutChartData.push(t[e]),n.doughnutChartLabels.push(e)})})},e.prototype.prepareLineChartParams=function(){var e=this;this.chartService.getJavaGenericService().getEntityList(SS.URL_FINISHED_FAB_MOTH).subscribe(function(t){var n=e;Object.keys(t).forEach(function(e){n.chartLineData[0].data.push(t[e]),n.chartLineLabels.push(e)})})},e}(),DS=i["\u0275crt"]({encapsulation:0,styles:[["div.chart[_ngcontent-%COMP%]{width:600px;height:300px}"]],data:{}});function AS(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,134,"div",[["class","period-filter"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,131,"div",[["class","period-filter row"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,30,"div",[["class","period-filter col-xl-6 col-lg-12  col-md-12 col-sm-12 draggable-card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,27,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](8,0,null,null,17,"div",[["class","period-filter card-header"],["style","background-color: white;  border: none"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](10,0,null,null,14,"div",[["class","period-filter row justify-content-between pt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](12,0,null,null,5,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](14,0,null,null,2,"h4",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](15,null,[""," "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](19,0,null,null,4,"div",[["class","period-filter mx-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](21,0,null,null,1,"div",[["class","period-filter dropdown"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](27,0,null,null,5,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](29,0,null,null,2,"canvas",[["baseChart",""]],null,null,null,null,null)),i["\u0275did"](30,737280,null,0,xS.BaseChartDirective,[i.ElementRef],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],legend:[4,"legend"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](36,0,null,null,30,"div",[["class","period-filter col-xl-6 col-lg-12  col-md-12 col-sm-12 draggable-card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](38,0,null,null,27,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](40,0,null,null,24,"div",[["class","period-filter card-header"],["style","background-color: white;  border: none"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](42,0,null,null,14,"div",[["class","period-filter row justify-content-between pt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](44,0,null,null,5,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](46,0,null,null,2,"h4",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](47,null,[""," "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](51,0,null,null,4,"div",[["class","period-filter mx-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](53,0,null,null,1,"div",[["class","period-filter dropdown"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](58,0,null,null,5,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](60,0,null,null,2,"canvas",[["baseChart",""],["chartType","doughnut"]],null,null,null,null,null)),i["\u0275did"](61,737280,null,0,xS.BaseChartDirective,[i.ElementRef],{data:[0,"data"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"],legend:[5,"legend"]},null),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](68,0,null,null,33,"div",[["class","period-filter col-xl-6 col-lg-12  col-md-12 col-sm-12 draggable-card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](70,0,null,null,30,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](72,0,null,null,17,"div",[["class","period-filter card-header"],["style","background-color: white;  border: none"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](74,0,null,null,14,"div",[["class","period-filter row justify-content-between pt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](76,0,null,null,5,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](78,0,null,null,2,"h4",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](79,null,[""," "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](83,0,null,null,4,"div",[["class","period-filter mx-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](85,0,null,null,1,"div",[["class","period-filter dropdown"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](91,0,null,null,8,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](103,0,null,null,29,"div",[["class","period-filter col-xl-6 col-lg-12  col-md-12 col-sm-12 draggable-card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](105,0,null,null,26,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](107,0,null,null,17,"div",[["class","period-filter card-header"],["style","background-color: white;  border: none"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](109,0,null,null,14,"div",[["class","period-filter row justify-content-between pt-2"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](111,0,null,null,5,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](113,0,null,null,2,"h4",[["class","card-title mb-0"]],null,null,null,null,null)),(e()(),i["\u0275ted"](114,null,[""," "])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275eld"](118,0,null,null,4,"div",[["class","period-filter mx-3"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275eld"](120,0,null,null,1,"div",[["class","period-filter dropdown"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                    "])),(e()(),i["\u0275ted"](-1,null,["\n                  "])),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](126,0,null,null,4,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n                "])),(e()(),i["\u0275eld"](128,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["hey"])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){var n=t.component;e(t,30,0,n.barChartData,n.barChartLabels,n.barChartOptions,n.barChartType,n.barChartLegend),e(t,61,0,n.doughnutChartData,n.doughnutChartLabels,n.chartDoughnutOptions,"doughnut",n.doughnutChartColors,!0)},function(e,t){var n=t.component;e(t,6,0,i["\u0275inlineInterpolate"](1,"",n.ClickedClass,"")),e(t,15,0,i["\u0275unv"](t,15,0,i["\u0275nov"](t,16).transform("SALESTATE"))),e(t,38,0,i["\u0275inlineInterpolate"](1,"",n.ClickedClass,"")),e(t,47,0,i["\u0275unv"](t,47,0,i["\u0275nov"](t,48).transform("SALESTATE"))),e(t,70,0,i["\u0275inlineInterpolate"](1,"",n.ClickedClass,"")),e(t,79,0,i["\u0275unv"](t,79,0,i["\u0275nov"](t,80).transform("SALESTATE"))),e(t,105,0,i["\u0275inlineInterpolate"](1,"",n.ClickedClass,"")),e(t,114,0,i["\u0275unv"](t,114,0,i["\u0275nov"](t,115).transform("SALESTATE")))})}var OS=i["\u0275ccf"]("app-charts",kS,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-charts",[],null,null,null,AS,DS)),i["\u0275did"](1,114688,null,0,kS,[TS],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),IS=n("r7LQ"),PS=n("2oCo"),RS=n("cGn1"),MS=n("jgW4"),NS=n("KaNj"),LS=n("rAq4"),HS=n("hjKG"),BS=n("zI1e"),jS=n("Y9Rh"),zS=n("VJIW"),US=n("v7sp"),FS=n("y7Lt"),GS=n("PvSn"),qS=n("XarD"),VS=n("9zSU"),WS=n("7pcL"),YS=n("8NZZ"),XS=n("2lcC"),ZS=n("1AWw"),JS=n("FNT0"),KS=n("pCK4"),QS=n("Msbv"),$S=n("vNuL"),eT=n("wu+C"),tT=n("Vnuh"),nT=n("QxNR"),iT=n("+452"),oT=n("POKB"),rT=n("qt8R"),aT=n("qTgP"),lT=n("wVvc"),sT=n("Viax"),dT=n("42Tk"),cT=n("NHxm"),uT=n("Pgsn"),hT=n("/Si4"),pT=n("zew3"),fT=n("SpVh"),gT=n("lOyz"),mT=n("/Nbb"),vT=n("ycpT"),yT=n("OnRG"),bT=n("n55w"),wT=n("jiKX"),CT=n("W/M8"),xT=n("tUZ0"),ST=n("0o/F"),TT=n("jsS3"),ET=n("7IBQ"),_T=n("Oflg"),kT=n("4qxJ"),DT=n("h4vs"),AT=n("1Wt5"),OT=n("qmzJ"),IT=n("SYiH"),PT=n("0DDR"),RT=n("2MpB"),MT=n("Eqh2"),NT=n("VfSG"),LT=n("urkZ"),HT=n("iUFb"),BT=n("79nH"),jT=n("+/B2"),zT=n("TzV7"),UT=n("yH8G"),FT=n("6JqK"),GT=n("KXqr"),qT=n("SgDT"),VT=n("6nPM"),WT=n("DIrZ"),YT=n("ylVv"),XT=n("NZJF"),ZT=n("e+R8"),JT=n("cTYe"),KT=n("PpCu"),QT=n("pQV8"),$T=n("0BNV"),eE=n("cTp6"),tE=n("vBm9"),nE=n("wmhx"),iE=n("fsf7"),oE=n("hz3p"),rE=n("YPwK"),aE=n("TyoM"),lE=n("dyiJ"),sE=n("IT4f"),dE=n("qJdZ"),cE=n("tP0d"),uE=n("vlBZ"),hE=i["\u0275crt"]({encapsulation:0,styles:[["input[type=file][_ngcontent-%COMP%]{display:none}.picture-details[_ngcontent-%COMP%] > .p-grid[_ngcontent-%COMP%]{border-radius:3px;margin:.3em;text-align:center;padding:2em 0 2.25em}.picture-data[_ngcontent-%COMP%]   .picture-title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;margin-top:24px}.picture-data[_ngcontent-%COMP%]   .picture-subtitle[_ngcontent-%COMP%]{margin:.25em 0 2em}.picture-data[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5em}.picture-data[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.picture-details[_ngcontent-%COMP%] > .p-grid[_ngcontent-%COMP%]{margin-left:.6em;margin-right:.6em}.modal[_ngcontent-%COMP%]{display:block!important}.modal-dialog[_ngcontent-%COMP%]{overflow-y:initial!important}.modal-body[_ngcontent-%COMP%]{height:250px;overflow-y:auto}.codeTiers[_ngcontent-%COMP%]{background:0 0!important;border:none!important;font-size:1.3125rem!important;color:#4c9aae!important}textarea[_ngcontent-%COMP%]{overflow:scroll;overflow-x:hidden;resize:none}hr[_ngcontent-%COMP%]{color:#d9d9d9}"]],data:{}});function pE(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"td",[],[[1,"rowspan",0]],null,null,null,null)),(e()(),i["\u0275ted"](1,null,["",""]))],null,function(e,t){e(t,0,0,t.parent.parent.context.$implicit.articleChildren.length),e(t,1,0,t.parent.parent.context.$implicit.article)})}function fE(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,10,"tr",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275and"](16777216,null,null,1,null,pE)),i["\u0275did"](3,16384,null,0,h.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](5,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n              "])),(e()(),i["\u0275eld"](8,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),i["\u0275ted"](9,null,["",""])),(e()(),i["\u0275ted"](-1,null,["\n            "]))],function(e,t){e(t,3,0,0===t.context.index)},function(e,t){var n=t.component;e(t,6,0,t.context.$implicit.components),e(t,9,0,n.absoluteValue(t.context.$implicit.remaining_quantity))})}function gE(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275and"](16777216,null,null,1,null,fE)),i["\u0275did"](3,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n          "]))],function(e,t){e(t,3,0,t.context.$implicit.articleChildren)},null)}function mE(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,34,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275eld"](2,0,null,null,31,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275eld"](4,0,null,null,28,"div",[["class","table-responsive"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275eld"](6,0,null,null,25,"table",[["class","table align-items-center table-flush"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](8,0,null,null,16,"thead",[["class","thead-light"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275eld"](10,0,null,null,13,"tr",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](12,0,null,null,2,"th",[["scope","col"]],null,null,null,null,null)),(e()(),i["\u0275ted"](13,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](16,0,null,null,2,"th",[["scope","col"]],null,null,null,null,null)),(e()(),i["\u0275ted"](17,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n            "])),(e()(),i["\u0275eld"](20,0,null,null,2,"th",[["scope","col"]],null,null,null,null,null)),(e()(),i["\u0275ted"](21,null,["",""])),i["\u0275pid"](131072,s.j,[s.k,i.ChangeDetectorRef]),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275eld"](26,0,null,null,4,"tbody",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\n          "])),(e()(),i["\u0275and"](16777216,null,null,1,null,gE)),i["\u0275did"](29,802816,null,0,h.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275ted"](-1,null,["\n        "])),(e()(),i["\u0275ted"](-1,null,["\n      "])),(e()(),i["\u0275ted"](-1,null,["\n    "])),(e()(),i["\u0275ted"](-1,null,["\n  "])),(e()(),i["\u0275ted"](-1,null,["\n"])),(e()(),i["\u0275ted"](-1,null,["\n"]))],function(e,t){e(t,29,0,t.component.mpOfsDispo)},function(e,t){e(t,13,0,i["\u0275unv"](t,13,0,i["\u0275nov"](t,14).transform("article"))),e(t,17,0,i["\u0275unv"](t,17,0,i["\u0275nov"](t,18).transform("component"))),e(t,21,0,i["\u0275unv"](t,21,0,i["\u0275nov"](t,22).transform("REMAINING_QUANTITY")))})}var vE=i["\u0275ccf"]("app-modal-fabrication-arrangement",vo,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-modal-fabrication-arrangement",[],null,null,null,mE,hE)),i["\u0275did"](1,114688,null,0,vo,[],null,null)],function(e,t){e(t,1,0)},null)},{ofProductLineList:"ofProductLineList"},{},[]),yE=n("gHLK"),bE=n("z7Rf"),wE=n("ItHS"),CE=n("XHgV"),xE=n("U/+3"),SE=n("1T37"),TE=n("+j5Y"),EE=n("kINy"),_E=n("YEB1"),kE=n("Uo70"),DE=n("F1jI"),AE=n("GW5l"),OE=n("mjYb"),IE=n("+rFA"),PE=n("dKXt"),RE=n("nDV/"),ME=n("1RrJ"),NE=n("Grv2"),LE=n("z4i6"),HE=n("zXN4"),BE=n("8tOD"),jE=n("nCDb"),zE=n("6sdf"),UE=n("qJ43"),FE=n("v7E4"),GE=n("/CuN"),qE=n("F6a+"),VE=n("/9u5"),WE=n("c6rS"),YE=n("OrF3"),XE=n("Lm+9"),ZE=n("Bu2V"),JE=n("jpF3"),KE=n("Bvxj"),QE=n("otzv"),$E=n("k/cf"),e_=n("OLAy"),t_=n("8H9Y"),n_=n("xOfU"),i_=n("dohF"),o_=n("NhYR"),r_=n("qBso"),a_=n("d+eO"),l_=n("+tXH"),s_=n("mtcD"),d_=n("Gxcc"),c_=n("j6al"),u_=n("LEL2"),h_=n("qONr"),p_=n("rb86"),f_=n("yWzQ"),g_=n("PYsy"),m_=n("FCYo"),v_=n("iryO"),y_=n("0iVo"),b_=n("xOnb"),w_=n("B0x8"),C_=n("S+UG"),x_=n("3fM3"),S_=n("Y88J"),T_=n("jwja"),E_=n("Z/2/"),__=n("XolF"),k_=n("SE38"),D_=n("vIW9"),A_=n("2ZQ4"),O_=n("Gj8c"),I_=n("Ue7K"),P_=n("rtgV"),R_=n("ZD9J"),M_=n("idXu"),N_=n("tj8Q"),L_=n("Bz0K"),H_=n("HNLe"),B_=n("/wxy"),j_=n("SLuN"),z_=n("EeGV"),U_=n("uPcK"),F_=n("dwPw"),G_=n("kZnW"),q_=n("JRh3"),V_=n("flTp"),W_=n("9JZx"),Y_=n("gDZ/"),X_=n("LBin"),Z_=n("M7I1"),J_=n("4Kfx"),K_=n("RTtk"),Q_=n("seEC"),$_=n("YKd2"),ek=n("gPcy"),tk=n("gdcG"),nk=n("cW/G"),ik=n("yaJH"),ok=n("4Xhf"),rk=n("/20O"),ak=n("TdeC"),lk=n("Rk8M"),sk=n("sn1D"),dk=n("jNj6"),ck=n("mj/5"),uk=n("oUW6"),hk=n("BXQH"),pk=n("LPdu"),fk=n("vKuN"),gk=n("1Ihl"),mk=n("/0A3"),vk=n("rX+m"),yk=n("QZTF"),bk=n("xeOH"),wk=n("a8ZY"),Ck=n("VBwJ"),xk=n("WHZr"),Sk=n("JLzu"),Tk=n("aPMw"),Ek=n("M/tH"),_k=n("snIq"),kk=n("IN94"),Dk=n("gEpi"),Ak=n("Nd3a"),Ok=n("qHGa"),Ik=n("gviZ"),Pk=n("tCWe"),Rk=n("YS2C"),Mk=n("j42/"),Nk=n("gZD/"),Lk=n("ns+a"),Hk=n("wYe6"),Bk=n("Xszj"),jk=n("MTi+"),zk=n("CXHW"),Uk=n("3kwk"),Fk=n("gFLb"),Gk=n("nCuf"),qk=n("qKow"),Vk=n("cG9e"),Wk=n("ZwZs"),Yk=n("DDfv"),Xk=n("lcaH"),Zk=n("gEbu"),Jk=n("7DGp"),Kk=n("WwnU"),Qk=n("hwnt"),$k=n("c7mC"),eD=n("K0TW"),tD=n("ETCP"),nD=n("aKiW"),iD=n("v4DA"),oD=n("tyH+"),rD=n("7mHB"),aD=n("iGS9"),lD=n("vHuZ"),sD=n("1AYy"),dD=n("p4zY"),cD=n("fvCZ"),uD=n("ak9D"),hD=n("dAzJ"),pD=n("SFQZ"),fD=n("IFKx"),gD=n("Xtem"),mD=n("dJ/4"),vD=n("2lji"),yD=n("k29Z"),bD=n("7sHF"),wD=n("XUXY"),CD=n("VvdS"),xD=n("EX+o"),SD=n("C3ZL"),TD=n("mPhX"),ED=n("EXCz"),_D=n("bH8V"),kD=n("Rs8K"),DD=n("g5jc"),AD=function(){function e(){this.showActionDetails=new DD.Subject}return e.prototype.show=function(e,t){this.showActionDetails.next({value:!0,data:e,parent:t})},e.prototype.hide=function(){this.showActionDetails.next(!1)},e.prototype.getResult=function(){return this.showActionDetails.asObservable()},e}(),OD=n("3Mnn"),ID={permissions:{only:[B.a.MANUFATORINGPermissions.FABRICATION_PERMISSION],redirectTo:L.a.DASHBOARD_URL}},PD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_DISPLAY_NOMENCLATURE_PERMISSION],redirectTo:"/main/dashboard"}},RD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_ADD_NOMENCLATURE_PERMISSION],redirectTo:"/main/dashboard"}},MD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_UPDATE_NOMENCLATURE_PERMISSION],redirectTo:"/main/dashboard"}},ND={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_DISPLAY_OF_PERMISSION],redirectTo:"/main/dashboard"}},LD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_ADD_OF_PERMISSION],redirectTo:"/main/dashboard"}},HD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_EDIT_OF_PERMISSION],redirectTo:"/main/dashboard"}},BD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_LAUNCH_OF_PERMISSION],redirectTo:"/main/dashboard"}},jD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_DISPLAY_GAMME_PERMISSION],redirectTo:"/main/dashboard"}},zD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_ADD_GAMME_PERMISSION],redirectTo:"/main/dashboard"}},UD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_EDIT_GAMME_PERMISSION],redirectTo:"/main/dashboard"}},FD={permissions:{only:[B.a.MANUFATORINGPermissions.MANUFACTURING_GAMME_VISUALISATION_PERMISSION],redirectTo:"/main/dashboard"}},GD=function(){},qD=n("bkcK"),VD=n("gsbp"),WD=n("Oz7M"),YD=n("TBIh"),XD=n("704W"),ZD=n("bAMD"),JD=n("93ig"),KD=n("QxxF"),QD=n("VnqF"),$D=n("7QEy"),eA=n("Ge0X"),tA=n("qAy2"),nA=n("WtLm"),iA=n("0gB7"),oA=n("/Lzi"),rA=n("ejvV"),aA=n("ovmJ"),lA=n("zX1g"),sA=n("pOLO"),dA=n("JvcJ"),cA=n("+Bl8"),uA=n("1thP"),hA=n("mySb"),pA=n("FqS2"),fA=n("3eEW"),gA=n("KPzN"),mA=n("2T52"),vA=n("hO6f"),yA=n("WYJk"),bA=n("myl1"),wA=n("Ecz0"),CA=n("h+R6"),xA=n("0kvQ"),SA=n("zSS8"),TA=n("UHBZ"),EA=n("slB3"),_A=n("86rF"),kA=n("fAE3"),DA=n("RX2M"),AA=n("F+yc"),OA=n("vfkA"),IA=n("1Z2I"),PA=n("yDyO"),RA=n("K/oD"),MA=n("eCJc"),NA=n("/I96"),LA=n("qsK9"),HA=n("MSQt"),BA=n("UyZi"),jA=n("Ep2y"),zA=n("WKBe"),UA=n("A8b0"),FA=n("as+d"),GA=n("62nT"),qA=n("kzcK"),VA=n("d/pU"),WA=n("uXZO"),YA=n("6x0n"),XA=n("ix6A"),ZA=n("Wt1a"),JA=n("or5m"),KA=n("6jty"),QA=n("YNws"),$A=n("vtaX"),eO=n("vWWJ"),tO=n("iE7H"),nO=n("u11H"),iO=n("zhGp"),oO=n("O79P"),rO=n("unU5"),aO=n("8pIC"),lO=n("dyZj"),sO=n("AG08"),dO=n("DHmV"),cO=n("SHio"),uO=n("Rvy0"),hO=n("zi8M"),pO=n("Bjtq"),fO=n("KYMj"),gO=n("yr73"),mO=n("guUz"),vO=n("U1Kq"),yO=n("0JKu"),bO=n("oUYn"),wO=n("nJ8K"),CO=n("PEMk"),xO=n("0ExE"),SO=n("GYHV"),TO=n("3Xgb"),EO=n("Q7Qr"),_O=n("hAgD"),kO=n("3ALz"),DO=n("4zoA"),AO=n("F8JA"),OO=n("6x6P"),IO=n("Rdwp"),PO=n("xL18"),RO=n("uhbV"),MO=n("k3z3"),NO=n("iJJ8"),LO=n("XUav"),HO=n("xJC5"),BO=n("hOmO"),jO=n("SMN2"),zO=n("7P6R"),UO=n("xGuN"),FO=n("4U59"),GO=n("yT44");n.d(t,"ManufacturingModuleNgFactory",function(){return qO});var qO=i["\u0275cmf"](o,[],function(e){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[Q,nn,wn,Qn,ui,mi,Ti,qi,co,Uo,nr,cr,Tr,Na,gx,Ix,lS,CS,OS,IS.a,PS.a,RS.a,g.w,g.e,g.a,g.c,g.x,g.f,g.d,g.b,MS.a,NS.a,LS.a,HS.a,BS.a,jS.a,zS.a,US.a,FS.a,GS.a,qS.a,VS.a,WS.a,YS.a,XS.a,ZS.a,JS.a,KS.a,QS.a,$S.a,eT.a,tT.a,nT.a,iT.a,oT.a,rT.a,aT.a,lT.a,sT.a,dT.a,cT.a,uT.a,hT.a,pT.a,fT.a,gT.a,mT.a,vT.a,yT.a,bT.a,wT.a,CT.a,xT.a,ST.a,TT.a,ET.a,_T.a,kT.a,DT.a,AT.a,OT.a,IT.a,PT.a,RT.a,MT.a,NT.a,LT.a,HT.a,BT.a,jT.a,zT.a,UT.a,FT.a,GT.a,qT.a,VT.a,WT.a,YT.a,XT.a,ZT.a,JT.a,KT.a,QT.a,$T.a,eE.a,tE.a,nE.a,iE.a,oE.a,rE.a,aE.a,lE.a,sE.b,dE.b,cE.a,uE.a,vE,yE.a]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,h.NgLocalization,h.NgLocaleLocalization,[i.LOCALE_ID,[2,h["\u0275a"]]]),i["\u0275mpd"](6144,he.b,null,[h.DOCUMENT]),i["\u0275mpd"](4608,he.d,he.d,[[2,he.b]]),i["\u0275mpd"](5120,bE.d,bE.a,[[3,bE.d],[2,wE.HttpClient],jn.DomSanitizer,[2,h.DOCUMENT]]),i["\u0275mpd"](4608,CE.a,CE.a,[]),i["\u0275mpd"](4608,xE.k,xE.k,[CE.a]),i["\u0275mpd"](4608,xE.j,xE.j,[xE.k,i.NgZone,h.DOCUMENT]),i["\u0275mpd"](136192,xE.d,xE.b,[[3,xE.d],h.DOCUMENT]),i["\u0275mpd"](5120,xE.n,xE.m,[[3,xE.n],[2,xE.l],h.DOCUMENT]),i["\u0275mpd"](5120,xE.i,xE.g,[[3,xE.i],i.NgZone,CE.a]),i["\u0275mpd"](5120,SE.c,SE.a,[[3,SE.c],i.NgZone,CE.a]),i["\u0275mpd"](5120,SE.f,SE.e,[[3,SE.f],CE.a,i.NgZone]),i["\u0275mpd"](4608,TE.h,TE.h,[SE.c,SE.f,i.NgZone,h.DOCUMENT]),i["\u0275mpd"](5120,TE.d,TE.i,[[3,TE.d],h.DOCUMENT]),i["\u0275mpd"](4608,TE.g,TE.g,[SE.f,h.DOCUMENT]),i["\u0275mpd"](5120,TE.e,TE.l,[[3,TE.e],h.DOCUMENT]),i["\u0275mpd"](4608,TE.b,TE.b,[TE.h,TE.d,i.ComponentFactoryResolver,TE.g,TE.e,i.ApplicationRef,i.Injector,i.NgZone,h.DOCUMENT]),i["\u0275mpd"](5120,TE.j,TE.k,[TE.b]),i["\u0275mpd"](5120,EE.b,EE.h,[TE.b]),i["\u0275mpd"](4608,_E.f,_E.f,[]),i["\u0275mpd"](4608,kE.c,kE.c,[]),i["\u0275mpd"](5120,DE.a,DE.b,[TE.b]),i["\u0275mpd"](4608,v["\u0275i"],v["\u0275i"],[]),i["\u0275mpd"](5120,AE.b,AE.c,[TE.b]),i["\u0275mpd"](4608,AE.d,AE.d,[TE.b,i.Injector,[2,h.Location],AE.b,[2,AE.a],[3,AE.d],TE.d]),i["\u0275mpd"](4608,OE.a,IE.a,[s.k]),i["\u0275mpd"](5120,PE.a,PE.b,[TE.b]),i["\u0275mpd"](6144,RE.b,null,[i.LOCALE_ID]),i["\u0275mpd"](4608,RE.a,ME.a,[[2,RE.b]]),i["\u0275mpd"](4608,v.FormBuilder,v.FormBuilder,[]),i["\u0275mpd"](6144,Dn.d,null,[Dn.a]),i["\u0275mpd"](4608,En.i,En.i,[]),i["\u0275mpd"](4608,En.g,En.g,[]),i["\u0275mpd"](4608,En.x,En.x,[]),i["\u0275mpd"](4608,En.Q,En.Q,[Dn.d]),i["\u0275mpd"](4608,En._16,En._16,[Dn.d]),i["\u0275mpd"](4608,En._15,En._15,[Dn.d]),i["\u0275mpd"](4608,y.g,y.g,[i.ApplicationRef,i.ComponentFactoryResolver,i.Injector,[2,y.d]]),i["\u0275mpd"](135680,NE.a,NE.a,[i.NgZone]),i["\u0275mpd"](5120,wE["\u0275b"],wE["\u0275d"],[]),i["\u0275mpd"](4608,wE.JsonpClientBackend,wE.JsonpClientBackend,[wE["\u0275b"],h.DOCUMENT]),i["\u0275mpd"](5120,wE.HTTP_INTERCEPTORS,function(e){return[new wE.JsonpInterceptor(e)]},[wE.JsonpClientBackend]),i["\u0275mpd"](4608,En.W,En.W,[En.a]),i["\u0275mpd"](4608,En.j,En.j,[]),i["\u0275mpd"](4608,En.D,En.D,[Dn.d]),i["\u0275mpd"](4608,En.P,En.P,[Dn.d]),i["\u0275mpd"](4608,En._1,En._1,[Dn.d]),i["\u0275mpd"](4608,En.w,En.w,[Dn.d]),i["\u0275mpd"](4608,LE.d,LE.d,[]),i["\u0275mpd"](4608,re.a,re.a,[]),i["\u0275mpd"](4608,HE.a,HE.a,[i.ComponentFactoryResolver,re.a]),i["\u0275mpd"](5120,BE.c,BE.d,[TE.b]),i["\u0275mpd"](4608,BE.e,BE.e,[TE.b,i.Injector,[2,h.Location],[2,BE.b],BE.c,[3,BE.e],TE.d]),i["\u0275mpd"](4608,jE.c,jE.c,[]),i["\u0275mpd"](4608,zE.b,zE.b,[]),i["\u0275mpd"](4608,jn.HAMMER_GESTURE_CONFIG,kE.d,[[2,kE.f],[2,kE.i]]),i["\u0275mpd"](5120,UE.a,UE.c,[[3,UE.b]]),i["\u0275mpd"](4608,FE.a,FE.a,[]),i["\u0275mpd"](4608,GE.a,GE.a,[]),i["\u0275mpd"](4608,qE.a,qE.a,[i.ComponentFactoryResolver,i.NgZone,i.Injector,GE.a,i.ApplicationRef]),i["\u0275mpd"](4608,VE.a,VE.a,[i.RendererFactory2,qE.a]),i["\u0275mpd"](135680,b.c,b.c,[b.b,[2,b.d],[2,b.e]]),i["\u0275mpd"](4608,WE.a,WE.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,XE.a,XE.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ZE.a,ZE.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,JE.a,JE.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,KE.a,KE.a,[wE.HttpClient,YE.a,s.k]),i["\u0275mpd"](4608,QE.a,QE.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,$E.a,$E.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,e_.a,e_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,t_.a,t_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,n_.a,n_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,i_.a,i_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,o_.a,o_.a,[]),i["\u0275mpd"](4608,r_.a,r_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,a_.a,a_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,D.a,D.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Oi.a,Oi.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,l_.a,l_.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,d_.a,d_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,c_.a,c_.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,l.a,l.a,[wE.HttpClient,YE.a,s_.a,u.a]),i["\u0275mpd"](4608,u_.a,u_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,h_.a,h_.a,[]),i["\u0275mpd"](4608,dn.a,dn.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,p_.a,p_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,f_.a,f_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,d.a,d.a,[wE.HttpClient,YE.a,s_.a,u.a,s.k]),i["\u0275mpd"](4608,g_.a,g_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,m_.a,m_.a,[]),i["\u0275mpd"](4608,v_.a,v_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,y_.a,y_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,b_.a,b_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,w_.a,w_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,E.a,E.a,[s.k]),i["\u0275mpd"](4608,C_.a,C_.a,[d.a,T.Router,E.a,s.k]),i["\u0275mpd"](4608,x_.a,x_.a,[]),i["\u0275mpd"](4608,oe.a,oe.a,[HE.a,s.k,re.a]),i["\u0275mpd"](4608,S_.a,S_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,T_.a,T_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,E_.a,E_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,__.a,__.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,k_.AccountingConfigurationService,k_.AccountingConfigurationService,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,D_.FiscalYearService,D_.FiscalYearService,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,A_.AccountService,A_.AccountService,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,O_.a,O_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,I_.a,I_.a,[m_.a]),i["\u0275mpd"](4608,P_.a,P_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,de.b,de.b,[s.k,E.a]),i["\u0275mpd"](4608,R_.a,R_.a,[YE.a,u.a]),i["\u0275mpd"](4608,M_.a,M_.a,[wE.HttpClient,YE.a,R_.a,s.k,A.a,u.a]),i["\u0275mpd"](4608,N_.a,N_.a,[wE.HttpClient,YE.a,d.a]),i["\u0275mpd"](4608,L_.a,L_.a,[wE.HttpClient,YE.a,s_.a,R_.a,u.a]),i["\u0275mpd"](4608,H_.a,H_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,B_.a,B_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,j_.a,j_.a,[wE.HttpClient,YE.a,H_.a,dn.a,M_.a,N_.a,u.a,B_.a]),i["\u0275mpd"](4608,z_.a,z_.a,[wE.HttpClient,YE.a,R_.a,dn.a,Oi.a,H_.a,j_.a]),i["\u0275mpd"](4608,U_.a,U_.a,[R_.a]),i["\u0275mpd"](4608,F_.a,F_.a,[YE.a]),i["\u0275mpd"](4608,G_.a,G_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,q_.a,q_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,V_.a,V_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,W_.a,W_.a,[j_.a,s.k,H_.a,Oi.a,M_.a]),i["\u0275mpd"](4608,Y_.a,Y_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,X_.a,X_.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,Z_.a,Z_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,h.DatePipe,h.DatePipe,[i.LOCALE_ID]),i["\u0275mpd"](4608,J_.a,J_.a,[wE.HttpClient,YE.a,s.k]),i["\u0275mpd"](4608,K_.a,K_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Q_.a,Q_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,$_.a,$_.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ek.a,ek.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,tk.a,tk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,nk.a,nk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ik.a,ik.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ok.a,ok.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,rk.a,rk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ak.a,ak.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,lk.a,lk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,sk.a,sk.a,[A_.AccountService,__.a,lk.a,ak.a,s.k,oe.a,E.a,A.a,h.DatePipe]),i["\u0275mpd"](4608,dk.a,dk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ae.a,ae.a,[wE.HttpClient,YE.a,u.a,E.a]),i["\u0275mpd"](4608,ck.a,ck.a,[]),i["\u0275mpd"](4608,uk.a,uk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,hk.a,hk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,pk.a,pk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,po.a,po.a,[X_.a,v.FormBuilder]),i["\u0275mpd"](4608,fk.a,fk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,gk.a,gk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,mk.a,mk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,vk.a,vk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ne.a,ne.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,yk.a,yk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,bk.a,bk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,wk.ReportingService,wk.ReportingService,[wE.HttpClient,YE.a,v.FormBuilder,de.b]),i["\u0275mpd"](4608,Ck.a,Ck.a,[]),i["\u0275mpd"](4608,xk.a,xk.a,[A_.AccountService]),i["\u0275mpd"](4608,Sk.a,Sk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Tk.a,Tk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Ek.a,Ek.a,[]),i["\u0275mpd"](4608,_k.a,_k.a,[]),i["\u0275mpd"](4608,kk.a,kk.a,[c.a,u.a]),i["\u0275mpd"](4608,Dk.a,Dk.a,[]),i["\u0275mpd"](4608,Ak.a,Ak.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Ok.a,Ok.a,[]),i["\u0275mpd"](4608,Ik.a,Ik.a,[s.k]),i["\u0275mpd"](4608,Pk.a,Pk.a,[wE.HttpClient,YE.a,s.k]),i["\u0275mpd"](4608,Rk.a,Rk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Mk.a,Mk.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,Nk.a,Nk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Lk.a,Lk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Hk.a,Hk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,mt.a,mt.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,Bk.a,Bk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,jk.a,jk.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,zk.a,zk.a,[i.ApplicationRef,i.Injector,i.ComponentFactoryResolver,h.DOCUMENT]),i["\u0275mpd"](4608,Uk.a,Uk.a,[i.ComponentFactoryResolver,i.Injector,zk.a]),i["\u0275mpd"](4608,Fk.a,Fk.a,[]),i["\u0275mpd"](4608,Gk.a,Gk.a,[]),i["\u0275mpd"](4608,qk.a,qk.a,[]),i["\u0275mpd"](4608,Vk.a,Vk.a,[]),i["\u0275mpd"](4608,Wk.a,Wk.a,[]),i["\u0275mpd"](4608,Yk.a,Yk.a,[]),i["\u0275mpd"](4608,Xk.a,Xk.b,[]),i["\u0275mpd"](4608,Zk.a,Zk.b,[]),i["\u0275mpd"](4608,Jk.b,Jk.a,[]),i["\u0275mpd"](4608,Kk.a,Kk.b,[]),i["\u0275mpd"](4608,Qk.a,Qk.a,[]),i["\u0275mpd"](4608,$k.a,$k.a,[]),i["\u0275mpd"](4608,eD.a,eD.a,[]),i["\u0275mpd"](4608,tD.a,tD.a,[]),i["\u0275mpd"](4608,nD.a,nD.a,[]),i["\u0275mpd"](4608,iD.a,iD.a,[]),i["\u0275mpd"](4608,oD.a,oD.a,[]),i["\u0275mpd"](4608,rD.a,rD.a,[A_.AccountService]),i["\u0275mpd"](4608,aD.a,aD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,lD.a,lD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,sD.a,sD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,dD.a,dD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,cD.a,cD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,dD.b,dD.b,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,uD.a,uD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,uD.b,uD.b,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,hD.a,hD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,pD.a,pD.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,fD.a,fD.a,[T.Router,H.a]),i["\u0275mpd"](4608,gD.a,gD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,mD.a,mD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,vD.ImportDocumentService,vD.ImportDocumentService,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,yD.a,yD.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,bD.a,bD.a,[wE.HttpClient,YE.a,s_.a]),i["\u0275mpd"](4608,wD.a,wD.a,[]),i["\u0275mpd"](4608,CD.a,CD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,xD.a,xD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,SD.a,SD.a,[dn.a]),i["\u0275mpd"](4608,TD.a,TD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ED.a,ED.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,_D.a,_D.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,eo,eo,[h.DatePipe]),i["\u0275mpd"](4608,Br,Br,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ft.a,ft.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,k.a,k.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,R,R,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,yi,yi,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,yt,yt,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,kD.a,kD.a,[wE.HttpClient,YE.a,sk.a,s.k,E.a,A.a,oe.a]),i["\u0275mpd"](4608,an,an,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,sn,sn,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Mn,Mn,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,te.a,te.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Hn,Hn,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,vS,vS,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,AD,AD,[]),i["\u0275mpd"](4608,TS,TS,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,OD.a,OD.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,ie.a,ie.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Fo,Fo,[wE.HttpClient,YE.a]),i["\u0275mpd"](4608,Nr.a,Nr.a,[wE.HttpClient,YE.a]),i["\u0275mpd"](512,h.CommonModule,h.CommonModule,[]),i["\u0275mpd"](512,T.RouterModule,T.RouterModule,[[2,T["\u0275a"]],[2,T.Router]]),i["\u0275mpd"](512,GD,GD,[]),i["\u0275mpd"](512,he.a,he.a,[]),i["\u0275mpd"](256,kE.e,!0,[]),i["\u0275mpd"](512,kE.i,kE.i,[[2,kE.e]]),i["\u0275mpd"](512,bE.c,bE.c,[]),i["\u0275mpd"](512,CE.b,CE.b,[]),i["\u0275mpd"](512,xE.a,xE.a,[]),i["\u0275mpd"](512,kE.o,kE.o,[]),i["\u0275mpd"](512,qD.g,qD.g,[]),i["\u0275mpd"](512,SE.b,SE.b,[]),i["\u0275mpd"](512,TE.f,TE.f,[]),i["\u0275mpd"](512,EE.f,EE.f,[]),i["\u0275mpd"](512,VD.c,VD.c,[]),i["\u0275mpd"](512,WD.d,WD.d,[]),i["\u0275mpd"](512,_E.g,_E.g,[]),i["\u0275mpd"](512,YD.d,YD.d,[]),i["\u0275mpd"](512,XD.b,XD.b,[]),i["\u0275mpd"](512,kE.m,kE.m,[]),i["\u0275mpd"](512,kE.l,kE.l,[]),i["\u0275mpd"](512,DE.c,DE.c,[]),i["\u0275mpd"](512,v["\u0275ba"],v["\u0275ba"],[]),i["\u0275mpd"](512,v.FormsModule,v.FormsModule,[]),i["\u0275mpd"](512,ZD.a,ZD.a,[]),i["\u0275mpd"](512,JD.a,JD.a,[]),i["\u0275mpd"](512,KD.a,KD.a,[]),i["\u0275mpd"](512,KD.b,KD.b,[]),i["\u0275mpd"](512,m._96,m._96,[]),i["\u0275mpd"](512,m.U,m.U,[]),i["\u0275mpd"](512,m._40,m._40,[]),i["\u0275mpd"](512,v.ReactiveFormsModule,v.ReactiveFormsModule,[]),i["\u0275mpd"](512,kn.x,kn.x,[]),i["\u0275mpd"](512,kn.h,kn.h,[]),i["\u0275mpd"](512,Dn.c,Dn.c,[]),i["\u0275mpd"](512,En.y,En.y,[]),i["\u0275mpd"](512,En.m,En.m,[]),i["\u0275mpd"](512,En.b,En.b,[]),i["\u0275mpd"](512,En._3,En._3,[]),i["\u0275mpd"](512,En._14,En._14,[]),i["\u0275mpd"](512,En.e,En.e,[]),i["\u0275mpd"](512,y.f,y.f,[]),i["\u0275mpd"](512,En.q,En.q,[]),i["\u0275mpd"](512,m.g,m.g,[]),i["\u0275mpd"](512,NE.c,NE.c,[]),i["\u0275mpd"](512,dt.B,dt.B,[]),i["\u0275mpd"](512,dt.C,dt.C,[]),i["\u0275mpd"](512,dt.j,dt.j,[]),i["\u0275mpd"](512,dt.b,dt.b,[]),i["\u0275mpd"](512,kn.q,kn.q,[]),i["\u0275mpd"](512,kn.w,kn.w,[]),i["\u0275mpd"](512,kn.j,kn.j,[]),i["\u0275mpd"](512,kn.m,kn.m,[]),i["\u0275mpd"](512,kn.e,kn.e,[]),i["\u0275mpd"](512,kn.b,kn.b,[]),i["\u0275mpd"](512,m._95,m._95,[]),i["\u0275mpd"](512,m._86,m._86,[]),i["\u0275mpd"](512,m._22,m._22,[]),i["\u0275mpd"](512,m.E,m.E,[]),i["\u0275mpd"](512,m._44,m._44,[]),i["\u0275mpd"](512,m._30,m._30,[]),i["\u0275mpd"](512,m._76,m._76,[]),i["\u0275mpd"](512,m._35,m._35,[]),i["\u0275mpd"](512,m._69,m._69,[]),i["\u0275mpd"](512,QD.e,QD.e,[]),i["\u0275mpd"](512,m._9,m._9,[]),i["\u0275mpd"](512,dt.d,dt.d,[]),i["\u0275mpd"](512,dt.v,dt.v,[]),i["\u0275mpd"](512,dt.k,dt.k,[]),i["\u0275mpd"](512,wE.HttpClientJsonpModule,wE.HttpClientJsonpModule,[]),i["\u0275mpd"](512,s.h,s.h,[]),i["\u0275mpd"](512,$D.a,$D.a,[]),i["\u0275mpd"](512,En.T,En.T,[]),i["\u0275mpd"](512,En.f,En.f,[]),i["\u0275mpd"](512,En._7,En._7,[]),i["\u0275mpd"](512,En.s,En.s,[]),i["\u0275mpd"](512,En.n,En.n,[]),i["\u0275mpd"](512,eA.a,eA.a,[]),i["\u0275mpd"](512,tA.a,tA.a,[]),i["\u0275mpd"](512,nA.SharedModule,nA.SharedModule,[]),i["\u0275mpd"](512,iA.AccordionModule,iA.AccordionModule,[]),i["\u0275mpd"](512,oA.FieldsetModule,oA.FieldsetModule,[]),i["\u0275mpd"](512,rA.n,rA.n,[]),i["\u0275mpd"](512,rA.f,rA.f,[]),i["\u0275mpd"](512,rA.i,rA.i,[]),i["\u0275mpd"](512,aA.ButtonModule,aA.ButtonModule,[]),i["\u0275mpd"](512,lA.PickListModule,lA.PickListModule,[]),i["\u0275mpd"](512,sA.a,sA.a,[]),i["\u0275mpd"](512,dA.a,dA.a,[]),i["\u0275mpd"](512,cA.u,cA.u,[]),i["\u0275mpd"](512,cA.p,cA.p,[]),i["\u0275mpd"](512,cA.g,cA.g,[]),i["\u0275mpd"](512,uA.OrganizationChartModule,uA.OrganizationChartModule,[]),i["\u0275mpd"](512,hA.CarouselModule,hA.CarouselModule,[]),i["\u0275mpd"](512,pA.DropdownModule,pA.DropdownModule,[]),i["\u0275mpd"](512,fA.PaginatorModule,fA.PaginatorModule,[]),i["\u0275mpd"](512,gA.DataViewModule,gA.DataViewModule,[]),i["\u0275mpd"](512,mA.PanelModule,mA.PanelModule,[]),i["\u0275mpd"](512,LE.c,LE.c,[]),i["\u0275mpd"](512,UE.b,UE.b,[]),i["\u0275mpd"](512,vA.EditorModule,vA.EditorModule,[]),i["\u0275mpd"](512,yA.b,yA.b,[]),i["\u0275mpd"](512,Sn.c,Sn.c,[]),i["\u0275mpd"](512,bA.VirtualScrollModule,bA.VirtualScrollModule,[]),i["\u0275mpd"](512,BE.j,BE.j,[]),i["\u0275mpd"](512,jE.b,jE.b,[]),i["\u0275mpd"](512,wA.a,wA.a,[]),i["\u0275mpd"](512,CA.a,CA.a,[]),i["\u0275mpd"](512,xA.b,xA.b,[]),i["\u0275mpd"](512,SA.b,SA.b,[]),i["\u0275mpd"](512,TA.TabViewModule,TA.TabViewModule,[]),i["\u0275mpd"](512,EA.b,EA.b,[]),i["\u0275mpd"](512,zE.c,zE.c,[]),i["\u0275mpd"](512,_A.b,_A.b,[]),i["\u0275mpd"](512,kA.a,kA.a,[]),i["\u0275mpd"](512,DA.a,DA.a,[]),i["\u0275mpd"](512,AA.a,AA.a,[]),i["\u0275mpd"](512,OA.a,OA.a,[]),i["\u0275mpd"](512,IA.a,IA.a,[]),i["\u0275mpd"](512,PA.a,PA.a,[]),i["\u0275mpd"](512,RA.a,RA.a,[]),i["\u0275mpd"](512,MA.a,MA.a,[]),i["\u0275mpd"](512,NA.a,NA.a,[]),i["\u0275mpd"](512,LA.a,LA.a,[]),i["\u0275mpd"](512,HA.a,HA.a,[]),i["\u0275mpd"](512,BA.a,BA.a,[]),i["\u0275mpd"](512,jA.a,jA.a,[]),i["\u0275mpd"](512,zA.a,zA.a,[]),i["\u0275mpd"](512,UA.a,UA.a,[]),i["\u0275mpd"](512,FA.a,FA.a,[]),i["\u0275mpd"](512,GA.a,GA.a,[]),i["\u0275mpd"](512,qA.a,qA.a,[]),i["\u0275mpd"](512,VA.a,VA.a,[]),i["\u0275mpd"](512,WA.a,WA.a,[]),i["\u0275mpd"](512,pe.p,pe.p,[]),i["\u0275mpd"](512,pe.r,pe.r,[]),i["\u0275mpd"](512,pe.a,pe.a,[]),i["\u0275mpd"](512,YA.b,YA.b,[]),i["\u0275mpd"](512,pS,pS,[]),i["\u0275mpd"](512,XA.ScheduleModule,XA.ScheduleModule,[]),i["\u0275mpd"](512,ZA.DialogModule,ZA.DialogModule,[]),i["\u0275mpd"](512,JA.CalendarModule,JA.CalendarModule,[]),i["\u0275mpd"](512,KA.ToggleButtonModule,KA.ToggleButtonModule,[]),i["\u0275mpd"](512,QA.DragDropModule,QA.DragDropModule,[]),i["\u0275mpd"](512,$A.InputTextareaModule,$A.InputTextareaModule,[]),i["\u0275mpd"](512,eO.CheckboxModule,eO.CheckboxModule,[]),i["\u0275mpd"](512,tO.InputTextModule,tO.InputTextModule,[]),i["\u0275mpd"](512,nO.SelectButtonModule,nO.SelectButtonModule,[]),i["\u0275mpd"](512,xS.ChartsModule,xS.ChartsModule,[]),i["\u0275mpd"](512,zC,zC,[]),i["\u0275mpd"](512,UC,UC,[]),i["\u0275mpd"](512,QC,QC,[]),i["\u0275mpd"](512,$C,$C,[]),i["\u0275mpd"](512,o,o,[]),i["\u0275mpd"](1024,T.ROUTES,function(){return[[{path:"",canActivateChild:[fD.a],data:ID,children:[{path:"nomenclature",children:[{path:"",component:j,data:PD},{path:"add",component:_t,data:RD},{path:"edit/:id",component:_t,data:MD}]},{path:"machine",children:[{path:"",component:cn},{path:"add",component:zn},{path:"edit/:id",component:zn}]},{path:"operation",children:[{path:"",component:ai},{path:"add",component:hi},{path:"edit/:id",component:hi}]},{path:"section",children:[{path:"",component:bi},{path:"add",component:Ii},{path:"edit/:id",component:Ii}]},{path:"fabricationArrangement",children:[{path:"",component:to,data:ND},{path:"add",component:yo,data:LD},{path:"edit/:id",component:yo,data:HD},{path:"launch",component:Vo,data:BD}]},{path:"area",children:[{path:"",component:ir}]},{path:"gamme",children:[{path:"",component:hr,data:jD},{path:"add",component:Ur,data:zD},{path:"edit/:id",component:Ur,data:UD}]},{path:"range_visibility",children:[{path:"",component:rx,data:FD}]},{path:"calculate_cost_price",children:[{path:"",component:bx}]},{path:"needs-per-operation",children:[{path:"article/:id",component:Lx}]},{path:"timeline",children:[{path:"fabricationArrangement",component:yS}]},{path:"dashbord",component:kS}]}],[{path:"login",component:iO.a},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"main",component:oO.a,canActivate:[rO.a],resolve:{permissions:aO.a},runGuardsAndResolvers:"always",children:[{path:"profile",component:lO.a,data:{permissions:{only:["SHOW_USER"],redirectTo:"/main/dashboard"}}},{path:"profile/:id",component:lO.a,data:{permissions:{only:["SHOW_USER","UPDATE_USER"],redirectTo:"/main/dashboard"}}},{path:"user_actions",component:sO.a},{path:"notifications",component:dO.a},{path:"actions_notifications",component:cO.a},{path:"dashboard",component:uO.a},{path:"dashboard/commercial",component:uO.a,data:{permissions:{only:["PURCHASE_DASHBOARD","SALES_DASHBOARD","TREASURY_SALES_DASHBOARD","TREASURY_PURCHASE_DASHBOARD"],redirectTo:"/main/dashboard"}}},{path:"dashboard/garage",component:hO.a,data:{permissions:{only:["GARAGE_DASHBOARD"],redirectTo:"/main/dashboard"}}},{path:"dashboard/hr",component:pO.a,data:{permissions:{only:["RH_DASHBOARD"],redirectTo:"/main/dashboard"}}},{path:"error",component:fO.a},{path:"inventory",loadChildren:"app/inventory/inventory.module#InventoryModule"},{path:"purchase",loadChildren:"app/purchase/purchase.module#PurchaseModule"},{path:"rh",loadChildren:"app/rh/rh.module#RhModule"},{path:"payroll",loadChildren:"app/payroll/payroll.module#PayrollModule"},{path:"sales",loadChildren:"app/sales/sales.module#SalesModule"},{path:"payment",loadChildren:"app/payment/payment.module#PaymentModule"},{path:"immobilization",loadChildren:"app/immobilization/immobilization.module#ImmobilizationModule"},{path:"treasury",loadChildren:"app/treasury/treasury.module#TreasuryModule"},{path:"garage",loadChildren:"app/garage/garage.module#GarageModule"},{path:"administration",loadChildren:"app/administration/administration.module#AdministrationModule"},{path:"accounting",loadChildren:"app/accounting/accounting.module#AccountingModule"},{path:"manufacturing",loadChildren:"app/manufacturing/manufacturing.module#ManufacturingModule"},{path:"crm",loadChildren:"app/crm/crm.module#CrmModule"},{path:"reporting",loadChildren:"app/reporting/reporting.module#ReportingModule"},{path:"helpdesk",loadChildren:"app/helpdesk/helpdesk.module#HelpdeskModule"},{path:"mailing",loadChildren:"app/mailing/mailing.module#MailingModule"},{path:"ecommerce",loadChildren:"app/ecommerce/ecommerce.module#EcommerceModule"},{path:"stockCorrection",loadChildren:"app/stock-correction/stock-correction.module#StockCorrectionModule"},{path:"settings",loadChildren:"app/settings/settings.module#SettingsModule"},{path:"**",redirectTo:"dashboard",pathMatch:"full"}]}],[{path:"",canActivateChild:[fD.a],children:[{path:"company",data:VA.b,children:[{path:"",component:gO.a,data:VA.c}]},{path:"country",data:VA.n,children:[{path:"",component:mO.a,data:VA.y}]},{path:"city",data:VA.J,children:[{path:"",component:vO.a,data:VA.U},{path:"add",component:yO.a,canDeactivate:[Dk.a],canActivate:[fD.a],data:VA._2},{path:"edit/:id",component:yO.a,canDeactivate:[Dk.a],canActivate:[fD.a],data:VA._3}]},{path:"taxe",data:VA._4,children:[{path:"",component:bO.a,data:VA._5},{path:"AdvancedAdd",component:wO.a,canDeactivate:[Dk.a],data:VA.d},{path:"AdvancedEdit/:id",component:wO.a,canDeactivate:[Dk.a],data:VA.e}]},{path:"group-taxe",data:VA.f,children:[{path:"",component:CO.a,data:VA.g},{path:"AdvancedAdd",component:xO.a,canDeactivate:[Dk.a],data:VA.h},{path:"advancedEdit/:id",component:xO.a,canDeactivate:[Dk.a],data:VA.i}]},{path:"currency",data:VA.j,children:[{path:"",component:SO.a,data:VA.k},{path:"AdvancedAdd",component:TO.a,canDeactivate:[Dk.a],data:VA.l},{path:"AdvancedEdit/:id",component:TO.a,canDeactivate:[Dk.a],data:VA.m}]},{path:"office",data:VA.o,children:[{path:"",component:EO.a,canActivate:[fD.a],data:VA.p},{path:"add",component:_O.a,canActivate:[fD.a],canDeactivate:[Dk.a],data:VA.q},{path:"edit/:id",component:_O.a,canActivate:[fD.a],canDeactivate:[Dk.a],data:VA.r}]},{path:"language",data:VA.s,children:[{path:"",component:kO.a,canDeactivate:[Dk.a],data:VA.t}]},{path:"role",data:VA.u,children:[{path:"",component:DO.a,data:VA.v},{path:"Add",component:AO.a,canDeactivate:[Dk.a],data:VA.w},{path:"Edit/:id",component:AO.a,canDeactivate:[Dk.a],data:VA.x}]},{path:"roleAdvanced",children:[{path:"",component:OO.a,data:VA.z},{path:"Add",component:IO.a,data:VA.A},{path:"Edit/:id",component:IO.a,data:VA.B}]},{path:"roleConfig",children:[{path:"",component:PO.a,data:VA.C},{path:"Add",component:RO.a,data:VA.D},{path:"Edit/:id",component:RO.a,data:VA.E}]},{path:"user",data:VA.F,children:[{path:"",component:MO.a,data:VA.G},{path:"Add",component:NO.a,canDeactivate:[Dk.a],data:VA.H},{path:"Edit/:id",component:NO.a,canDeactivate:[Dk.a],resolve:{userPhone:SD.a},data:VA.I},{path:"EditRoles/:id",component:LO.a,data:VA.K},{path:"desactivateUser",children:[{path:"list",component:HO.a,data:VA.L}]}]},{path:"masterUsers",data:VA.M,children:[{path:"",component:MO.a,canActivate:[fD.a],data:VA.N},{path:"Add/masterUsers",component:NO.a,canActivate:[fD.a],data:VA.O},{path:"Edit/masterUsers/:id",component:NO.a,canActivate:[fD.a],data:VA.P}]},{path:"nature",data:VA.Q,children:[{path:"",component:BO.a,data:VA.R},{path:"add",component:jO.a,canDeactivate:[Dk.a],data:VA.S},{path:"edit/:id",component:jO.a,canDeactivate:[Dk.a],data:VA.T}]},{path:"period",data:VA.V,children:[{path:"",component:zO.a,data:VA.W},{path:"add",component:UO.a,canDeactivate:[Dk.a],data:VA.X},{path:"edit/:id",component:UO.a,canDeactivate:[Dk.a],data:VA.Y}]},{path:"B2bSetting",data:VA.Z},{path:"version",data:VA._0,children:[{path:"",component:FO.a,data:VA._1}]}]}]]},[]),i["\u0275mpd"](256,EE.a,{overlapTrigger:!0,xPosition:"after",yPosition:"below"},[]),i["\u0275mpd"](256,GO.a,KD.c,[]),i["\u0275mpd"](256,En._2,En._17,[]),i["\u0275mpd"](256,dt.E,dt.J,[]),i["\u0275mpd"](256,"DiagramsHierarchicalTree",bC,[]),i["\u0275mpd"](256,"DiagramsMindMap",wC,[]),i["\u0275mpd"](256,"DiagramsRadialTree",CC,[]),i["\u0275mpd"](256,"DiagramsComplexHierarchicalTree",kC,[]),i["\u0275mpd"](256,"DiagramsDataBinding",Tw,[]),i["\u0275mpd"](256,"DiagramsSnapping",fC,[]),i["\u0275mpd"](256,"DiagramsPrintAndExport",uw,[]),i["\u0275mpd"](256,"DiagramsBpmnDiagrams",nC,[]),i["\u0275mpd"](256,"DiagramsSymmetricLayout",SC,[]),i["\u0275mpd"](256,"DiagramsConnectorBridging",pC,[]),i["\u0275mpd"](256,"DiagramsUndoRedo",gC,[]),i["\u0275mpd"](256,"DiagramsLayoutAnimation",mC,[]),i["\u0275mpd"](256,"DiagramsDiagramContextMenu",tC,[]),i["\u0275mpd"](256,"DiagramsLineRouting",vC,[]),i["\u0275mpd"](256,"DiagramsConnectorEditing",Zb,[]),i["\u0275mpd"](256,"DiagramsBlazorTooltip",af,[]),i["\u0275mpd"](256,"DiagramsLineDistribution",yC,[])])})}});