<form [formGroup]="formGroupFilter" class="col-lg-12 col-md-12 col-sm-12">
  <div class="row">
    <div class="col-lg-4 col-md-5 col-sm-10">
      <label class="col-lg-5 col-md-5 col-sm-5" style="margin-top: auto;"> {{'STARTDATE'|translate}}</label>
      <kendo-datepicker formControlName="StartDate" class="form-control col-lg-6 col-md-6 col-sm-6"
        (valueChange)="changeStartDate()" [max]="maxStartDate" [popupSettings]="{ appendTo: containerRef }">
        <kendo-datepicker-messages today="{{ 'TODAY' | translate}}" toggle="{{ 'CALENDAR.MENU_TITLE' | translate}}">
        </kendo-datepicker-messages>
      </kendo-datepicker>

    </div>
    <div class="col-lg-3 col-md-5 col-sm-10">
      <label class="col-lg-5 col-md-5 col-sm-5" style="margin-top: auto;"> {{'ENDDATE'|translate}}</label>
      <kendo-datepicker formControlName="EndDate" class="form-control col-lg-6 col-md-6 col-sm-6"
        (valueChange)="changeEndDate()" [min]="minEndDate" [popupSettings]="{ appendTo: containerRef }">
        <kendo-datepicker-messages today="{{ 'TODAY' | translate}}" toggle="{{ 'CALENDAR.MENU_TITLE' | translate}}">
        </kendo-datepicker-messages>
      </kendo-datepicker>
    </div>

    <div class="col-sm-12 col-md-5 col-lg-4 row">
      <label class="col-lg-5 col-md-5 col-sm-12" style="margin-top: auto;">{{'USER'|translate}}</label>
        <app-user-dropdown [form]="formGroupFilter" [idUserColName]= "'IdUser'" style="width: 40%;"></app-user-dropdown>
  </div>

    <div class="col-sm-2 col-md-2 col-lg-1">
      <button type="button" (click)='setDataSourceWithSpecificDates()' class="btn btn-primary"
        style="background: #4c9aae; border: none;">
        <i class="fa fa-search" aria-hidden="true"></i>
      </button>
    </div>
  </div>
</form>
<div class="col-lg-12 col-md-12 col-sm-12">

  <div class="row" style="margin-top:15px ;">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <label class="col-lg-2 col-md-4 col-sm-12">
        {{'BS'|translate}}
      </label>
      <kendo-multiselect style="margin-left:-17px ;" class="col-lg-9 col-md-7 col-sm-12" [data]="filtredBsList"
        (valueChange)="filterData()" [textField]="'Code'" [valuePrimitive]="true" [filterable]="true"
        (filterChange)="handleFilter($event)" [valueField]="'Id'" [(ngModel)]="IdBs"></kendo-multiselect>
    </div>
  </div>

</div>


<br />
<kendo-grid #gridImportBs (cellClick)="editHandlerImportBs($event)" [data]="listDocumentLineBs"
  [style.maxHeight.px]="500" [pageSize]="pageSize" [skip]="skip" [pageable]="true" (pageChange)="pageChange($event)"
  [selectable]="{enabled: true, checkboxOnly: true }" [kendoGridSelectBy]="'IdDocumentLineAssociated'"
  (selectedKeysChange)="onSelectedKeysChangeBs($event)" [selectedKeys]="mySelectionBs">

  <kendo-grid-checkbox-column [width]='50'>
    <ng-template kendoGridHeaderTemplate>
      <input class="k-checkbox" id="selectAllCheckboxIdBs" kendoGridSelectAllCheckbox [state]="selectAllStateBs"
        (selectAllChange)="onSelectAllChangeBs($event)" type="checkbox">
      <label class="k-checkbox-label" for="selectAllCheckboxIdBs"></label>
    </ng-template>
  </kendo-grid-checkbox-column>

  <kendo-grid-column field="IdDocumentAssociatedNavigation.Code" title="{{'CODE'|translate}}" [width]='200'>
    <ng-template kendoGridHeaderTemplate>
      <div>
        <div class="d-flex align-items-end mb-3">{{'CODE'|translate}}</div>
        <div class="input-group">
          <input type="search" (input)="filterData()" class="form-control form-control-sm"
            placeholder="{{'SEARCH'|translate}}" style="border-bottom: 1px solid #e4e7ea !important;"
            aria-describedby="addon-wrapping" [(ngModel)]='codeSearch'>
        </div>
      </div>
    </ng-template>
  </kendo-grid-column>



  <kendo-grid-column field="IdItem" title="{{'ITEM'|translate}}" [width]='300'>

    <ng-template kendoGridHeaderTemplate>
      <div>
        <div class="d-flex align-items-end mb-3">{{'DESCRITPION'|translate}}</div>
        <div class="input-group">
          <input type="search" (input)="filterData()" class="form-control form-control-sm"
            placeholder="{{'SEARCH'|translate}}" style="border-bottom: 1px solid #e4e7ea !important;"
            aria-describedby="addon-wrapping" [(ngModel)]='descriptionSearch'>

        </div>
      </div>
    </ng-template>
    <ng-template kendoGridCellTemplate let-dataItem='dataItem'>
      {{dataItem.CodeItem}}-{{dataItem.DesignationItem}}
    </ng-template>
  </kendo-grid-column>


  <kendo-grid-column field="IdDocumentAssociatedNavigation.DocumentDate" title="{{'DOCUMENT_DATE'|translate}}"
    [width]='200'>
    <ng-template kendoGridHeaderTemplate>
      <div>
        <div style="margin-bottom: 27px;" class="d-flex align-items-end mb-3">{{'DOCUMENT_DATE'|translate}}</div>

      </div>
    </ng-template>

    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
      {{dataItem.IdDocumentAssociatedNavigation.DocumentDate|date: format_date}}
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-column field="MovementQty" title="{{'QUANTITY'|translate}}" [width]='100'>
    <ng-template kendoGridHeaderTemplate>
      <div>
        <div class="d-flex align-items-end mb-3">{{'QUANTITY'|translate}}</div>
        <div class="input-group">
          <input type="number" (input)="filterData()" class="form-control form-control-sm"
            placeholder="{{'SEARCH'|translate}}" style="border-bottom: 1px solid #e4e7ea !important;"
            aria-describedby="addon-wrapping" [(ngModel)]='qtySearch'>
        </div>
      </div>
    </ng-template>

    <ng-template kendoGridEditTemplate>
      <app-grid-cell-input-template [group]="formGroupImportBs" controlName="MovementQty" inputType="number"
        [stopInputCounter]='true' (focusout)="onFocusOutMvtQuantity()" (keydown.enter)='verifLine()'>
      </app-grid-cell-input-template>
    </ng-template>

  </kendo-grid-column>

  <kendo-grid-column field="HtUnitAmountWithCurrency" [format]="formatForSalesOptions" title="{{'PU'|translate}}"
    [width]='150' [style]='{"font-family": "Roboto, serif", "color": "#505253", "text-align":"right",
              "padding-right": "4%"}'>
    <ng-template kendoGridHeaderTemplate>
      <div>
        <div class="d-flex align-items-end mb-3">{{'PU'|translate}}</div>
        <div class="input-group">
          <input type="number" (input)="filterData()" class="form-control form-control-sm"
            placeholder="{{'SEARCH'|translate}}" style="border-bottom: 1px solid #e4e7ea !important;"
            aria-describedby="addon-wrapping" [(ngModel)]='puSearch'>
        </div>
      </div>
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-column field="HtTotalLineWithCurrency" [format]="formatForSalesOptions" title="{{'TOTAL_HT'|translate}}"
    [width]='150' [style]='{"font-family": "Roboto, serif", "color": "#505253", "text-align":"right",
              "padding-right": "4%"}'>
    <ng-template kendoGridHeaderTemplate>
      <div>
        <div class="d-flex align-items-end mb-3">{{'AMOUNTHT'|translate}}</div>
        <div class="input-group">
          <input type="number" (input)="filterData()" class="form-control form-control-sm"
            placeholder="{{'SEARCH'|translate}}" style="border-bottom: 1px solid #e4e7ea !important;"
            aria-describedby="addon-wrapping" [(ngModel)]='amountHtSearch'>
        </div>
      </div>
    </ng-template>
  </kendo-grid-column>
  <kendo-grid-column  field="CreatorFullName" title="{{'USER'|translate}}" [width]='120' [filterable]="false">
    <ng-template kendoGridHeaderTemplate>
      <div>
        <div class="header-without-filter">{{'USER'|translate}}</div>
      </div>
    </ng-template>
    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
      {{dataItem && dataItem.CreatorFullName ? dataItem.CreatorFullName : '-' }}
    </ng-template>
    <ng-template kendoGridEditTemplate let-dataItem="dataItem">
      {{dataItem && dataItem.CreatorFullName ? dataItem.CreatorFullName : '-' }}
    </ng-template>
  </kendo-grid-column>
</kendo-grid>
<hr />



<div class="row justify-content-between">
  <div class="col-lg-6 col-md-6 col-sm-6">
    <div class="row align-items-end">
      <label class="col-lg-auto col-md-12 col-sm-12">
        <span theme="light">
          {{'TOTAL_BASKET_HT'|translate}}
        </span>
      </label>
      <div class="col">
        <kendo-numerictextbox [spinners]="false" [format]="formatForSalesOptions" [step]="1" [value]="sumAllHT"
          [readonly]="true" class="important-amount num-field form-control disabledInput" style="margin-top: -5%;
                                          font-family: Roboto; border:none; color: rgb(80, 82, 83);">
        </kendo-numerictextbox>
      </div>
    </div>
  </div>
  <div class="col-lg-6 col-md-6 col-sm-6">
    <div class="row justify-content-end">
      <label class="col-lg-auto col-md-12 col-sm-12">
        <span theme="light">
          {{'Total_SELECTED'|translate}}
        </span>
      </label>
      <div class="col-auto pl-0">
        <kendo-numerictextbox [spinners]="false" [format]="formatForSalesOptions" [step]="1" [value]="sumHT"
          [readonly]="true" class="get-amount-to-right important-amount num-field form-control disabledInput"
          style="width: 152px;">
        </kendo-numerictextbox>
      </div>
    </div>
  </div>
</div>
<br />
<hr />