<div class="card full-screen-card">
  <!-- card-header -->
  <div class="card-header">
    <div class="row">
      <div class="col-sm-5 mt-1">
        <h3>{{'SEND_SMS_LIST'|translate}}</h3>
      </div>
    </div>
  </div>
  <!-- card-body -->
  <div class="card-body">
    <app-btn-grid class="col" [fileName]="'SEND_SMS_LIST'|translate" [advencedAdd]='true' [addLink]='"send-sms"'
      [cardView]="false" [relativeStyle]='true' [model]="true" [gridSettings]="gridSettings" [service]="smsTiersService"
      [isExportExcel]="true">
    </app-btn-grid>
    <kendo-grid [data]="gridSettings.gridData" [pageable]="pagerSettings" [pageSize]="gridSettings.state.take"
      [skip]="gridSettings.state.skip" [sort]="gridSettings.state.sort" [reorderable]="true" [sortable]="true"
      (dataStateChange)="dataStateChange($event)">
      <!-- Sender -->
      <kendo-grid-column [field]="columnsConfig[0].field" [filter]="columnsConfig[0].filter" [filterable]="true"
        [width]="150">
        <ng-template kendoGridHeaderTemplate>
          <span tooltip="{{gridSettings.columnsConfig[0].tooltip|translate}}"
            theme="light">{{gridSettings.columnsConfig[0].title|translate}}</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem>
          {{dataItem.Sender}}
        <span>
          <i aria-hidden="true" (click)='openDetail(dataItem)' class="pointer fa fa-info-circle fa-lg" style="color: #607d8b;">
          </i>
        </span>
        </ng-template>
      </kendo-grid-column>
      <!-- Customer -->
      <kendo-grid-column [field]="columnsConfig[1].field" [filter]="columnsConfig[1].filter" [filterable]="true"
      [width]="250" [headerStyle]="{'line-height': '1em'}" [class]="{'overflow-class': true}">
      <ng-template kendoGridHeaderTemplate>
        <span tooltip="{{gridSettings.columnsConfig[1].tooltip|translate}}"
          theme="light">{{gridSettings.columnsConfig[1].title|translate}}</span>
      </ng-template>
      <ng-template kendoGridCellTemplate let-dataItem>
        <div class="row ml-1" *ngIf="dataItem.NameTiers" style="overflow: initial;">
          <span *ngIf="dataItem.NameTiers[0]" tooltip="{{dataItem.NameTiers[0]}}"
            class="rounded-element-cell">
            {{dataItem.NameTiers[0]}}
          </span>
          <span *ngIf="dataItem.NameTiers[1]" tooltip="{{dataItem.NameTiers[1]}}"
            class="rounded-element-cell">
            {{dataItem.NameTiers[1]}}
          </span>
          <span *ngIf="dataItem.NameTiers && dataItem.NameTiers.length > 2" class="dropdown">
            <div class="show-more" type="button" id="testOfCustomer" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              +{{dataItem.NameTiers.length - 2}}
            </div>
            <div class="dropdown-menu border" aria-labelledby="testOfCustomer">
              <button class="dropdown-item disabled" 
                type="button" *ngFor="let tier of dataItem.NameTiers.slice(2)">
                  {{tier}}
              </button>
            </div>
          </span>
        </div>
        <div class="container grid-cell" *ngIf="!dataItem.NameTiers">
          ---
        </div>
      </ng-template>
    </kendo-grid-column>
      <!-- Valid receivers -->
      <kendo-grid-column [field]="columnsConfig[2].field" [filter]="columnsConfig[2].filter" [filterable]="true"
        [width]="250" [headerStyle]="{'line-height': '1em'}" [class]="{'overflow-class': true}">
        <ng-template kendoGridHeaderTemplate>
          <span tooltip="{{gridSettings.columnsConfig[2].tooltip|translate}}"
            theme="light">{{gridSettings.columnsConfig[2].title|translate}}</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem>
          <div class="row ml-1" *ngIf="dataItem.ReceiversList" style="overflow: initial;">
            <span *ngIf="dataItem.ReceiversList[0]" tooltip="{{dataItem.ReceiversList[0]}}"
              class="rounded-element-cell">
              {{dataItem.ReceiversList[0]}}
            </span>
            <span *ngIf="dataItem.ReceiversList[1]" tooltip="{{dataItem.ReceiversList[1]}}"
              class="rounded-element-cell">
              {{dataItem.ReceiversList[1]}}
            </span>
            <span *ngIf="dataItem.ReceiversList && dataItem.ReceiversList.length > 2" class="dropdown">
              <div class="show-more" type="button" id="testOfValidReceiver" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                +{{dataItem.ReceiversList.length - 2}}
              </div>
              <div class="dropdown-menu border" aria-labelledby="testOfValidReceiver">
                <button class="dropdown-item disabled" 
                  type="button" *ngFor="let ValidReceiver of dataItem.ReceiversList.slice(2)">
                    {{ValidReceiver}}
                </button>
              </div>
            </span>
          </div>
          <div class="container grid-cell" *ngIf="!dataItem.ValidReceivers">
            ---
          </div>
        </ng-template>
      </kendo-grid-column>
      <!-- invalid receivers -->
      <kendo-grid-column [field]="columnsConfig[3].field" [filter]="columnsConfig[3].filter" [filterable]="true"
        [width]="150">
        <ng-template kendoGridHeaderTemplate>
          <span tooltip="{{gridSettings.columnsConfig[3].tooltip|translate}}"
            theme="light">{{gridSettings.columnsConfig[3].title|translate}}</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem='dataItem'>
          <span *ngIf="dataItem.InvalidReceivers" class="badge badge-warning">
            {{dataItem.InvalidReceivers}}
          </span>
          <span *ngIf="!dataItem.InvalidReceivers">
            ---
          </span>
        </ng-template>
      </kendo-grid-column>
      <!-- credit removed -->
      <kendo-grid-column [field]="columnsConfig[4].field" [filter]="columnsConfig[4].filter" [filterable]="true"
        [width]="150">
        <ng-template kendoGridHeaderTemplate>
          <span tooltip="{{gridSettings.columnsConfig[4].tooltip|translate}}"
            theme="light">{{gridSettings.columnsConfig[4].title|translate}}</span>
        </ng-template>
      </kendo-grid-column>
    </kendo-grid>
  </div>
</div>