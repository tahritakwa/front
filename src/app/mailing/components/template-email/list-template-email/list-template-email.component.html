<div class="card">
  <div class="card-header " style="background-color: white; border: none; padding: 0;">
    <br>
    <div class="col-sm-5 mt-1">
      <h3 class="card-title mb-0">{{'TEMPLATE_EMAIL_LIST'|translate}}</h3>
    </div>
    <div style="margin-left:25% ;margin-top:2%;">
        <div class="input-group flex-nowrap" style="width: 56%;">
          <input type="text" class="form-control" autocomplete="on" placeholder="{{'SEARCH_TEMPLATE_Email'|translate}}"
                 name='value'
                 aria-label="Search" aria-describedby="addon-wrapping" [(ngModel)]='templateEmail'>
          <div class="input-group-prepend">
            <button class="btn btn-secondary" (click)="searchByFilter()" type="button" id="button-addon223">
              <i class="fa fa-search fa-lg" aria-hidden="true"></i>
            </button>
          </div>
        </div>
    </div>
  </div>
  <div class="card-body">
    <form class="form-horizontal">
      <ng-template #template let-anchor>
        <div class="card-header" style="background: #f4f4f4">
          <h6 style="background: transparent">
            {{'TEMPLATE_DETAILS' | translate}}
          </h6>
        </div>
        <br/>
        <div style="margin-left: 20px; font-size: 1em;">
        <span>{{ anchor.nativeElement.innerText }}</span>
        </div>
      </ng-template>
      <div kendoTooltip
           showOn="none"
           [tooltipTemplate]="template"
           filter=".k-grid td"
           tooltipClass="my-class"
           (mouseover)="showTooltip($event)">
        <kendo-grid [data]="gridSettings.gridData"
                    [pageSize]="gridSettings.state.take"
                    [skip]="gridSettings.state.skip"
                    [sortable]="true"
                    (pageChange)="onPageChange($event)"
                    [pageable]="pagerSettings"
                    [reorderable]="true"
                    [columnMenu]="true"
                    (remove)="removeHandler($event)"
                    [sort]="gridSettings.state.sort"
                    [filter]="gridSettings.state.filter"
                    (dataStateChange)="dataStateChange($event)"
                    (cellClick)="showDetails($event)">
          <!-- Head Start-->
          <ng-template kendoGridToolbarTemplate>
            <div class="row" style="float :right; margin-right: 4px;">
              <app-btn-grid [advencedAdd]='true' [add]='false' [export]='false' [addLink]="'add'"></app-btn-grid>
            </div>
          </ng-template>
          <kendo-grid-column [field]="gridSettings.columnsConfig[0].field"
                             [title]="gridSettings.columnsConfig[0].title | translate"
                             [width]="gridSettings.columnsConfig[0].width"
                             [filter]="gridSettings.columnsConfig[0].filter"
                             [filterable]="gridSettings.columnsConfig[0].filterable"
                             [format]="gridSettings.columnsConfig[0].format">
          </kendo-grid-column>
          <kendo-grid-column [field]="gridSettings.columnsConfig[1].field"
                             [title]="gridSettings.columnsConfig[1].title | translate"
                             [width]="gridSettings.columnsConfig[1].width"
                             [filter]="gridSettings.columnsConfig[1].filter"
                             [filterable]="gridSettings.columnsConfig[1].filterable"
                             [format]="gridSettings.columnsConfig[1].format">
          </kendo-grid-column>
          <kendo-grid-column [field]="gridSettings.columnsConfig[2].field"
                             [title]="gridSettings.columnsConfig[2].title | translate"
                             [width]="gridSettings.columnsConfig[2].width"
                             [filter]="gridSettings.columnsConfig[2].filter"
                             [filterable]="gridSettings.columnsConfig[2].filterable"
                             [format]="gridSettings.columnsConfig[2].format">
            <ng-template kendoGridCellTemplate let-dataItem >
              <div *ngIf="dataItem.body"><span>{{ dataItem.body| htmlToPlaintext  }}</span>
              </div>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-command-column [width]="130">
            <ng-template kendoGridCellTemplate let-isNew="isNew" let-dataItem="dataItem">
              <button class="k-button btnKendoGrid editBtn" (click)="showTemplateDetails(dataItem)">
                <i class="fa fa-chevron-circle-right"></i>
              </button>
              <button kendoGridRemoveCommand class="btnKendoGrid">
                <i class="fa fa-trash-o"></i>
              </button>
            </ng-template>
          </kendo-grid-command-column>
        </kendo-grid>
      </div>
    </form>
  </div>
</div>
<app-side-nav-template-email *ngIf="showDetailTemplate" [templateDataFromListTemplate]="templateToShowInSideNav"
                     (closeSidNav)="SidNavEvent()"></app-side-nav-template-email>
