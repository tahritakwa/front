<div class="card">
  <div class="card-header" style="background-color: white; border:none">
    <div class="col-sm-5 mt-1">
      <h3 class="card-title mb-0">{{'LIST_EXIT_EMPLOYEE'|translate}}</h3>
    </div>
  </div>

  <div class="card-body">
    <app-advanced-search [filtreFieldsColumns]="filtreFieldsColumns" [filtreFieldsInputs]="filtreFieldsInputs"
      (filtrePredicateToSend)="getFiltrePredicate($event)" (predicateOperator)="getOperatorPredicate($event)"
      (searchClickEvent)="initGridDataSource()" (resetClickEvent)="resetClickEvent()">
    </app-advanced-search>
    <div class="row d-flex justify-content-between mt-3">
      <app-btn-grid class="col" [advencedAdd]='hasAddPermission' [addLink]='"add"'
        [relativeStyle]='true' [model]="true" [gridSettings]="gridSettings"
        [fileName]="'LIST_EXIT_EMPLOYEE'|translate" [service]="exitEmployeeService" [predicate]="predicate"
        api="getDataSourcePredicate" [isExportExcel]="true">
      </app-btn-grid>
    </div>
    <kendo-grid (dataStateChange)="dataStateChange($event)"
      [data]="gridSettings.gridData" [filter]="gridSettings.state.filter" [pageSize]="gridSettings.state.take" [pageable]="pagerSettings"
      [reorderable]="true" [selectable]="true" [skip]="gridSettings.state.skip" [sort]="gridSettings.state.sort" [sortable]="true">
      <!--REGISTRATION_NUMBER-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[0].field"
                         [filter]="gridSettings.columnsConfig[0].filter"
                         [filterable]="gridSettings.columnsConfig[0].filterable"
                         [format]="gridSettings.columnsConfig[0].format"
                         [title]="gridSettings.columnsConfig[0].title | translate"
                         [width]="gridSettings.columnsConfig[0]._width">
        <ng-template kendoGridHeaderTemplate>
          <span theme="light"
                tooltip="{{gridSettings.columnsConfig[0].title|translate}}">{{gridSettings.columnsConfig[0].title|translate}}</span>
        </ng-template>
      </kendo-grid-column>
      <!--Full_Name -->
      <kendo-grid-column [field]="gridSettings.columnsConfig[1].field"
                         [filter]="gridSettings.columnsConfig[1].filter"
                         [filterable]="gridSettings.columnsConfig[1].filterable"
                         [format]="gridSettings.columnsConfig[1].format"
                         [title]="gridSettings.columnsConfig[1].title | translate"
                         [width]="gridSettings.columnsConfig[1]._width">
        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
          {{dataItem.ExitDepositDate | date:formatDate}}
        </ng-template>
        <ng-template kendoGridHeaderTemplate>
          <span theme="light"
                tooltip="{{gridSettings.columnsConfig[1].title|translate}}">{{gridSettings.columnsConfig[1].title|translate}}</span>
        </ng-template>
      </kendo-grid-column>
      <!--OFFICE_NAME-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[2].field"
                         [filter]="gridSettings.columnsConfig[2].filter"
                         [filterable]="gridSettings.columnsConfig[2].filterable"
                         [format]="gridSettings.columnsConfig[2].format"
                         [title]="gridSettings.columnsConfig[2].title | translate"
                         [width]="gridSettings.columnsConfig[2]._width">
        <ng-template kendoGridHeaderTemplate>
          <span theme="light"
                tooltip="{{gridSettings.columnsConfig[2].title|translate}}">{{gridSettings.columnsConfig[2].title|translate}}</span>
        </ng-template>
      </kendo-grid-column>
      <!--RELEASE_DATE-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[3].field"
                         [filter]="gridSettings.columnsConfig[3].filter"
                         [filterable]="gridSettings.columnsConfig[3].filterable"
                         [format]="gridSettings.columnsConfig[3].format"
                         [title]="gridSettings.columnsConfig[3].title | translate"
                         [width]="gridSettings.columnsConfig[3]._width">
        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
          {{dataItem.ReleaseDate | date:formatDate}}
        </ng-template>
        <ng-template kendoGridHeaderTemplate>
          <span theme="light"
                tooltip="{{gridSettings.columnsConfig[3].title|translate}}">{{gridSettings.columnsConfig[3].title|translate}}</span>
        </ng-template>
      </kendo-grid-column>
      <!--PHYSICAL_EXIT_DATE-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[4].field"
                         [filter]="gridSettings.columnsConfig[4].filter"
                         [filterable]="gridSettings.columnsConfig[4].filterable"
                         [format]="gridSettings.columnsConfig[4].format"
                         [title]="gridSettings.columnsConfig[4].title | translate"
                         [width]="gridSettings.columnsConfig[4]._width">
        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
          {{dataItem.ExitPhysicalDate | date:formatDate}}
        </ng-template>
        <ng-template kendoGridHeaderTemplate>
          <span theme="light"
                tooltip="{{gridSettings.columnsConfig[4].title|translate}}">{{gridSettings.columnsConfig[4].title|translate}}</span>
        </ng-template>
      </kendo-grid-column>
      <!--STATUS-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[5].field"
                         [filter]="gridSettings.columnsConfig[5].filter"
                         [filterable]="gridSettings.columnsConfig[5].filterable"
                         [format]="gridSettings.columnsConfig[5].format"
                         [title]="gridSettings.columnsConfig[5].title | translate"
                         [width]="gridSettings.columnsConfig[5]._width">
        <ng-template kendoGridHeaderTemplate>
          <span theme="light"
                tooltip="{{gridSettings.columnsConfig[5].title|translate}}">{{gridSettings.columnsConfig[5].title|translate}}</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
          <div *ngIf="dataItem.Status == statusCode.Draft">
            <span class="badge badge-primary">{{ 'DRAFT' | translate }}</span>
          </div>
          <div *ngIf="dataItem.Status == statusCode.Waiting">
            <span class="badge badge-warning">{{ 'WAITING' | translate }}</span>
          </div>
          <div *ngIf="dataItem.Status == statusCode.Accepted">
            <span class="badge badge-success">{{ 'ACCEPTED' | translate }}</span>
          </div>
          <div *ngIf="dataItem.Status == statusCode.Refused">
            <span class="badge badge-danger">{{ 'REFUSED' | translate }}</span>
          </div>
          <div *ngIf="dataItem.Status == statusCode.Canceled">
            <span class="badge badge-primary">{{ 'CANCELED' | translate }}</span>
          </div>
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column [field]="gridSettings.columnsConfig[6].field"
                         [filter]="gridSettings.columnsConfig[6].filter"
                         [filterable]="gridSettings.columnsConfig[6].filterable"
                         [format]="gridSettings.columnsConfig[6].format"
                         [title]="gridSettings.columnsConfig[6].title | translate"
                         [width]="gridSettings.columnsConfig[6]._width">
        <ng-template kendoGridHeaderTemplate>
          <span theme="light"
                tooltip="{{gridSettings.columnsConfig[6].title|translate}}">{{gridSettings.columnsConfig[6].title|translate}}</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem>
          {{ dataItem.CreationDate | date: formatDate }}
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-command-column [width]="130">
        <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-isNew="isNew">
          <!-- Update exit employee -->
          <i *ngIf="hasUpdatePermission || hasShowPermission" class="las la-pen edit-pencil cursor-pointer la-lg" (click)="goToAdvancedEdit(dataItem.Id)"
          tooltip="{{'UPDATE' | translate}}"></i>
        <!-- Remove exit employee-->
        <i *ngIf="hasDeletePermission && (dataItem.Status == statusCode.Waiting || dataItem.Status == statusCode.Draft)"
          class="las la-trash-alt text-danger cursor-pointer la-lg" tooltip="{{'DELETE' | translate}}" (click)="removeHandler(dataItem)"></i>
        </ng-template>
      </kendo-grid-command-column>
      <!--grid pdf & excel-->
      <app-grid-export [gridSettings]="gridSettings" [predicate]="predicate" [service]="exitEmployeeService"
                       excel="true" fileName="{{'LIST_EXIT_EMPLOYEE'|translate}}" pdf="true">
      </app-grid-export>
      <!--end grid pdf & excel-->
    </kendo-grid>
  </div>
</div>