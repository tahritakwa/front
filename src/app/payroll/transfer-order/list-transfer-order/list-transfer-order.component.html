<div class="col-lg-12 col-md-12 col-sm-12">
  <div class="row">
    <div class="card border-0 full-screen-card">
      <div class="card-content">

        <div class="card-header">
          <div class="col-sm-5 mt-1">
            <h3 class="card-title mb-0">{{'LIST_TRANSFER_ORDER'|translate}}</h3>
          </div>
        </div>
        <div class="card-body">
          <app-advanced-search [filtreFieldsColumns]="filtreFieldsColumns" [filtreFieldsInputs]="filtreFieldsInputs"
            (filtrePredicateToSend)="getFiltrePredicate($event)" (predicateOperator)="getOperatorPredicate($event)"
            (searchClickEvent)="initGridDataSource(false)" (resetClickEvent)="resetClickEvent()">
          </app-advanced-search>
          <div class="row d-flex justify-content-between mt-3">
            <app-search-session class="col-lg-3" (sendData)="receiveData($event)"></app-search-session>
            <app-btn-grid class="col" [advencedAdd]='hasAddPermission' [addLink]='"add"' [relativeStyle]='true' [model]="true"
              [isFromDocument]="true" [fileName]="'SUPPLIER_LIST'|translate" [service]="transferOrderService" [predicate]="predicate" [gridSettings]="gridSettings"
              [isExportExcel]="true">
            </app-btn-grid>
          </div>
          <form class="form-horizontal">
            <kendo-grid [data]="gridSettings.gridData" [pageSize]="gridSettings.state.take"
              [skip]="gridSettings.state.skip" [sortable]="true" [pageable]="pagerSettings" filterable="menu"
              [reorderable]="true" [columnMenu]="true" [sort]="gridSettings.state.sort" [selectable]="true"
              [filter]="gridSettings.state.filter" (dataStateChange)="dataStateChange($event)">
              <!-- Transfer Number -->
              <kendo-grid-column [field]="gridSettings.columnsConfig[0].field"
                [title]="gridSettings.columnsConfig[0].title | translate" [width]="gridSettings.columnsConfig[0]._width"
                [filter]="gridSettings.columnsConfig[0].filter" [filterable]="gridSettings.columnsConfig[0].filterable"
                [format]="gridSettings.columnsConfig[0].format" [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[0].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[0].title|translate}}</span>
                </ng-template>
              </kendo-grid-column>
              <!-- label -->
              <kendo-grid-column [field]="gridSettings.columnsConfig[1].field"
                [title]="gridSettings.columnsConfig[1].title | translate" [width]="gridSettings.columnsConfig[1]._width"
                [filter]="gridSettings.columnsConfig[1].filter" [filterable]="gridSettings.columnsConfig[1].filterable"
                [format]="gridSettings.columnsConfig[1].format" [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[1].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[1].title|translate}}</span>
                </ng-template>
              </kendo-grid-column>
              <!-- Month -->
              <kendo-grid-column [field]="gridSettings.columnsConfig[2].field"
                [title]="gridSettings.columnsConfig[2].title | translate" [width]="gridSettings.columnsConfig[2]._width"
                [filter]="gridSettings.columnsConfig[2].filter" [filterable]="gridSettings.columnsConfig[2].filterable"
                [format]="gridSettings.columnsConfig[2].format" [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[2].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[2].title|translate}}</span>
                </ng-template>
                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                  {{dataItem.Month | date:'MMMM' | uppercase | translate }} {{dataItem.Month | date: 'yyyy'}}
                </ng-template>
              </kendo-grid-column>
              <!-- BANK ACCOUNT -->
              <kendo-grid-column [field]="gridSettings.columnsConfig[3].field"
                [title]="gridSettings.columnsConfig[3].title | translate" [width]="gridSettings.columnsConfig[3]._width"
                [filter]="gridSettings.columnsConfig[3].filter" [filterable]="gridSettings.columnsConfig[3].filterable"
                [format]="gridSettings.columnsConfig[3].format" [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[3].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[3].title|translate}}</span>
                </ng-template>
              </kendo-grid-column>
              <!--State-->
              <kendo-grid-column [field]="gridSettings.columnsConfig[4].field"
                [title]="gridSettings.columnsConfig[4].title | translate" [width]="gridSettings.columnsConfig[4]._width"
                [filter]="gridSettings.columnsConfig[4].filter" [filterable]="gridSettings.columnsConfig[4].filterable"
                [format]="gridSettings.columnsConfig[4].format" [columnMenu]="false">
                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                  <span style="margin-left: 5% !important;" *ngIf="dataItem.State == transferOrderStatus.InProgress"
                    class="badge badge-primary">{{'INPROGRESS'|translate}}</span>
                  <span style=" margin-left: 5% !important;" *ngIf="dataItem.State == transferOrderStatus.Correct"
                    class="badge badge-success">{{'OPEN'|translate}}</span>
                  <span style="margin-left: 5% !important;" *ngIf="dataItem.State == transferOrderStatus.Wrong"
                    class="badge badge-warning">{{'WRONG'|translate}}</span>
                  <span style=" margin-left: 5% !important;" *ngIf="dataItem.State == transferOrderStatus.Closed"
                    class="badge badge-danger">{{'CLOSED'|translate}}</span>
                </ng-template>
              </kendo-grid-column>
              <!-- Command-->
              <kendo-grid-command-column [width]="170" [title]="'ACTIONS'| translate " [columnMenu]="false"
                [headerStyle]="{'text-align': 'center'}" [style]="{'text-align': 'center'}">
                <ng-template kendoGridCellTemplate let-isNew="isNew" let-dataItem="dataItem">
                  <!-- edit command directive, will be visible when not in edit mode -->
                  <div *ngIf="dataItem.State !== transferOrderStatus.Closed; then thenCanEdit  else thenCanNotEdit">
                  </div>
                  <ng-template #thenCanEdit>
                    <i *ngIf="hasShowPermission" (click)="editHandler(dataItem)" class="k-button btnKendoGrid editBtn"
                    class="las la-pen cursor-pointer edit-pencil la-lg"></i>
                    <!-- remove command directive, will be visible when not in edit mode -->
                    <i *ngIf="hasDeletePermission" (click)="removeHandler(dataItem)"
                      class="fa fa-trash-o la-lg cursor-pointer text-danger"></i>
                  </ng-template>
                  <ng-template #thenCanNotEdit>
                    <i (click)="editHandler(dataItem)"
                      class="btnKendoGrid las la-pen cursor-pointer edit-pencil la-lg"></i>
                  </ng-template>
                </ng-template>
              </kendo-grid-command-column>
              <!-- column select -->
              <kendo-grid-command-column [width]="50" [columnMenu]="true">
              </kendo-grid-command-column>
              <!--End Columns-->
              <!--grid pdf & excel-->
              <app-grid-export [gridSettings]="gridSettings" fileName="{{'LIST_TRANSFER_ORDER'|translate}}" pdf="true"
                excel="true" [service]="transferOrderService" [predicate]="predicate">
              </app-grid-export>
              <!--end grid pdf & excel-->
            </kendo-grid>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
