<div class="card full-screen-card animated fadeIn">
  <div class="row">
    <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">
      <div class="card-content">
        <div class="card-header">
          <div class="col-sm-5 mt-1">
            <h3 class="card-title mb-0">{{'PAYSLIPS_HISTORY_LIST'|translate}}</h3>
          </div>
        </div>
        <div class="card-body">
          <!-- Filters section-->
          <div class="row d-flex justify-content-center mb-3">
            <div class="col-lg-3 col-md-6 col-sm-12">
              <label class="col-lg-12 col-md-12 col-sm-12"> {{'EMPLOYEE'|translate}}</label>
              <app-employee-dropdown [form]="payslipFormGroup" (Selected)="onSelect($event)">
              </app-employee-dropdown>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12">
              <label class="col-lg-12 col-md-12 col-sm-12"> {{'START_MONTH'|translate}}</label>
              <kendo-datepicker [bottomView]="'year'" [topView]="'decade'" [format]="'MMMM yyyy'" class="form-control"
                (valueChange)="startDateValueChange($event)" [(ngModel)]="StartDate" onkeydown="return false;">
                <kendo-datepicker-messages today="{{ 'TODAY' | translate}}" toggle="Cambiar calendario">
                </kendo-datepicker-messages>
              </kendo-datepicker>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12">
              <label class="col-lg-12 col-md-12 col-sm-12"> {{'END_MONTH'|translate}}</label>
              <kendo-datepicker [bottomView]="'year'" [topView]="'decade'" [format]="'MMMM yyyy'" class="form-control"
                (valueChange)="endDateValueChange($event)" [(ngModel)]="EndDate" onkeydown="return false;">
                <kendo-datepicker-messages today="{{ 'TODAY' | translate}}" toggle="Cambiar calendario">
                </kendo-datepicker-messages>
              </kendo-datepicker>
            </div>
            <!-- Button -->
          </div>
          <div class="row d-flex justify-content-end">
            <div class="col-auto">
              <button class="generate k-button btn-secondary" tabindex="0" (click)="onShowGrid()" *ngIf="hasListPayslipPermission">
                <i class="fa fa-cogs fa-sm AddIcon"></i>
                <span>&nbsp; {{'SHOW_PAYSLIPS'|translate}}</span>
              </button>
            </div>
          </div>
          <!-- End filters section-->
          <!-- Grid section -->
          <div class="col-lg-12 col-sm-12 col-md-12" style="margin-top:20px" *ngIf="showGrid">
            <div align="right" class="col-lg-12 col-md-12 col-sm-12 col-sx-12" style="margin-bottom: 10px;">
              <button class="k-button btn-secondary ml-1" (click)="downloadAllPayslip()" *ngIf="showButton">
                <i class="fa fa-download fa-sm AddIcon"></i>
                <span>&nbsp; {{'DOWNLOAD_ALL'|translate}}</span>
              </button>
            </div>
            <kendo-grid [data]="gridSettings.gridData" [pageSize]="gridSettings.state.take"
              [skip]="gridSettings.state.skip" [sortable]="true" [pageable]="pagerSettings" filterable="menu"
              [columnMenu]="true" [reorderable]="true" [sort]="gridSettings.state.sort"
              [filter]="gridSettings.state.filter" [selectable]="true" (dataStateChange)="dataStateChange($event)">
              <!-- Contract type -->
              <kendo-grid-column [field]="gridSettings.columnsConfig[0].field"
                [filterable]="gridSettings.columnsConfig[0].filterable"
                [title]="gridSettings.columnsConfig[0].title | translate" [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[0].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[0].title|translate}}</span>
                </ng-template>
              </kendo-grid-column>
              <!-- employee full name -->
              <kendo-grid-column [field]="gridSettings.columnsConfig[1].field"
                [filterable]="gridSettings.columnsConfig[1].filterable"
                [title]="gridSettings.columnsConfig[1].title | translate" [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[1].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[1].title|translate}}</span>
                </ng-template>
              </kendo-grid-column>
              <!-- Session name -->
              <kendo-grid-column [field]="gridSettings.columnsConfig[2].field"
                [filterable]="gridSettings.columnsConfig[2].filterable"
                [title]="gridSettings.columnsConfig[2].title | translate" [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[2].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[2].title|translate}}</span>
                </ng-template>
              </kendo-grid-column>
              <!-- Payslip month -->
              <kendo-grid-column [field]=gridSettings.columnsConfig[3].field
                [title]="gridSettings.columnsConfig[3].title | translate" [width]="gridSettings.columnsConfig[3]._width"
                [filterable]="gridSettings.columnsConfig[3].filterable" [format]="gridSettings.columnsConfig[3].format"
                [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[3].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[3].title|translate}}</span>
                </ng-template>
                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                  {{dataItem.Month | date:'MMMM' | uppercase | translate }} {{dataItem.Month | date: 'yyyy'}}
                </ng-template>
              </kendo-grid-column>
              <!-- Payslip Status -->
              <kendo-grid-column [field]="gridSettings.columnsConfig[4].field"
                [filterable]="gridSettings.columnsConfig[4].filterable"
                [title]="gridSettings.columnsConfig[4].title | translate" [columnMenu]="false">
                <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[4].title|translate}}"
                    theme="light">{{gridSettings.columnsConfig[4].title|translate}}</span>
                </ng-template>
                <ng-template kendoGridCellTemplate let-dataItem>
                  <div *ngIf="dataItem.Status == payslipsStatus.Correct"><span
                      class="badge badge-success">{{'CORRECT'|translate}}</span></div>
                  <div *ngIf="dataItem.Status == payslipsStatus.Wrong"><span
                      class="badge badge-warning">{{'WRONG'|translate}}</span>
                  </div>
                  <div *ngIf="dataItem.Status == payslipsStatus.NotCalculated"><span
                      class="badge badge-danger">{{'NOT_CALCULATED'|translate}}</span></div>
                </ng-template>
              </kendo-grid-column>
              <kendo-grid-command-column [width]="130">
                <ng-template kendoGridCellTemplate let-dataItem let-isNew="isNew">
                  <button class="btnKendoGrid" data-toggle="tooltip" data-placement="top"
                    title="{{'DOWNLOAD' | translate}}" (click)="downloadPayslip(dataItem)" style="background-color: transparent;">
                    <!---->
                    <i class="fa fa-download"></i>
                  </button>
                </ng-template>
              </kendo-grid-command-column>
            </kendo-grid>
          </div>
          <!--End grid section-->
        </div>
      </div>
    </div>
  </div>
</div>
