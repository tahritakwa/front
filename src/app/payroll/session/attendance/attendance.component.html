<div class="card">
  <div class="card border-0 full-screen-card">
    <!--Begin Card eader-->
    <div class="card-header">
      <div class="row">
      <div class="col-sm-5 mt-1">
        <h3 class="card-title mb-0">{{'ATTENDANCE'|translate}}</h3>
      </div>
      <div class="col-lg-2 mt-1 ml-auto">
        <div class="row d-flex justify-content-end">
          <div class="col-auto d-flex align-items-end" style="width: 220px">
            <input class="form-control InvoiceNumber pb-0" [value]="sessionInfos?.Code">
          </div>
        </div>
      </div>
      <div class="col-lg-1 mt-3 mr-2">
        <div class="row d-flex justify-content-end">
          <h4 class="statusAlignment" *ngIf="!isClosed">
            <span class="badge badge-success">{{"OPEN" | translate }}</span>
          </h4>
          <h4 class="statusAlignment" *ngIf="isClosed">
            <span class="badge badge-danger">{{ "CLOSED" | translate }}</span>
          </h4>
        </div>
      </div>
    </div>
    </div>
    <div class="card-body">
      <form class="form-horizontal">
        <!-- Start Form-->
        <app-session-header [courantSession]="sessionInfos"></app-session-header>
        <!--End add form-->
      </form>
      <br>
      <kendo-grid [data]="gridSettings.gridData" [navigable]="true" (cellClick)="cellClickHandler($event)"
        (cellClose)="cellCloseHandler($event)" [selectable]="true" [rowSelected]="isRowSelected"
        [pageable]="pagerSettings" [pageSize]="gridSettings.state.take" [skip]="gridSettings.state.skip"
        (dataStateChange)="dataStateChange($event)" [filter]="gridSettings.state.filter"
        [sortable]="true" [sort]="gridSettings.state.sort">
        <kendo-grid-column [field]="gridSettings.columnsConfig[1].field" [filter]="gridSettings.columnsConfig[1].filter"
          [width]="gridSettings.columnsConfig[1]._width">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[1].title|translate}}"
              theme="light">{{gridSettings.columnsConfig[1].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
              {{dataItem.Matricule}}
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column [field]="gridSettings.columnsConfig[2].field" [filter]="gridSettings.columnsConfig[2].filter"
          [width]="gridSettings.columnsConfig[2]._width">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[2].title|translate}}"
              theme="light">{{gridSettings.columnsConfig[2].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <a class="employee-link" [routerLink]="['/main/payroll/employee/edit', dataItem.IdEmployee]"
              target="_blank">
              {{dataItem.FullName}}
            </a>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column [field]="gridSettings.columnsConfig[3].field" [filter]="gridSettings.columnsConfig[3].filter"
          [width]="gridSettings.columnsConfig[3]._width">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[3].title|translate}}"
              theme="light">{{gridSettings.columnsConfig[3].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
              {{dataItem.Code}}
          </ng-template>
          <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
            <app-contract-type-dropdown (selectedValue)="activateFilter($event)"></app-contract-type-dropdown>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column [field]="gridSettings.columnsConfig[4].field" [filter]="gridSettings.columnsConfig[4].filter"
          [width]="gridSettings.columnsConfig[4]._width">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[4].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[4].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem *ngIf="!hasUpdateAttendancePermission">
            {{dataItem.NumberDaysWorked}}
          </ng-template>
          <ng-template kendoGridEditTemplate *ngIf="hasUpdateAttendancePermission">
            <form [formGroup]="sessionFormGroup">
              <kendo-numerictextbox class="form-control" formControlName="NumberDaysWorked">
              </kendo-numerictextbox><br>
              <i #anchor></i>
              <app-control-message-grid-cell [group]="sessionFormGroup" controlName="NumberDaysWorked"
                [anchor]="anchor">
              </app-control-message-grid-cell>
            </form>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column [field]="gridSettings.columnsConfig[5].field" [filter]="gridSettings.columnsConfig[5].filter"
          [width]="gridSettings.columnsConfig[5]._width">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[5].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[5].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem *ngIf="!hasUpdateAttendancePermission">
            {{dataItem.NumberDaysPaidLeave}}
          </ng-template>
          <ng-template kendoGridEditTemplate *ngIf="hasUpdateAttendancePermission">
            <form [formGroup]="sessionFormGroup">
              <kendo-numerictextbox class="form-control" formControlName="NumberDaysPaidLeave">
              </kendo-numerictextbox><br>
              <i #anchor></i>
              <app-control-message-grid-cell [group]="sessionFormGroup" controlName="NumberDaysPaidLeave"
                [anchor]="anchor">
              </app-control-message-grid-cell>
            </form>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column [field]="gridSettings.columnsConfig[6].field" [filter]="gridSettings.columnsConfig[6].filter"
          [width]="gridSettings.columnsConfig[6]._width">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[6].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[6].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem *ngIf="!hasUpdateAttendancePermission">
            {{dataItem.NumberDaysNonPaidLeave}}
          </ng-template>
          <ng-template kendoGridEditTemplate *ngIf="hasUpdateAttendancePermission">
            <form [formGroup]="sessionFormGroup">
              <kendo-numerictextbox class="form-control" formControlName="NumberDaysNonPaidLeave">
              </kendo-numerictextbox><br>
              <i #anchor></i>
              <app-control-message-grid-cell [group]="sessionFormGroup" controlName="NumberDaysNonPaidLeave"
                [anchor]="anchor">
              </app-control-message-grid-cell>
            </form>
          </ng-template>
        </kendo-grid-column>
        <!-- <kendo-grid-column [field]="gridSettings.columnsConfig[7].field" [filter]="gridSettings.columnsConfig[7].filter"
        [width]="gridSettings.columnsConfig[7]._width">
        <ng-template kendoGridHeaderTemplate>
          <span theme="light">{{gridSettings.columnsConfig[7].title}}</span>
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column [field]="gridSettings.columnsConfig[8].field" [filter]="gridSettings.columnsConfig[8].filter"
        [width]="gridSettings.columnsConfig[8]._width">
        <ng-template kendoGridHeaderTemplate>
          <span theme="light">{{gridSettings.columnsConfig[8].title}}</span>
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column [field]="gridSettings.columnsConfig[9].field" [filter]="gridSettings.columnsConfig[9].filter"
        [width]="gridSettings.columnsConfig[9]._width">
        <ng-template kendoGridHeaderTemplate>
          <span theme="light">{{gridSettings.columnsConfig[9].title}}</span>
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column [field]="gridSettings.columnsConfig[10].field" [filter]="gridSettings.columnsConfig[10].filter"
        [width]="gridSettings.columnsConfig[10]._width">
        <ng-template kendoGridHeaderTemplate>
          <span theme="light">{{gridSettings.columnsConfig[10].title}}</span>
        </ng-template>
      </kendo-grid-column> -->
        <kendo-grid-command-column [width]="140">
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <i class="fa fa-info-circle fa-lg"
              style="text-align: center;padding: 0; color: #4c9aae;cursor: pointer;margin-right: 15px;"
              tooltip="{{'INFO'|translate}}" (click)="attendanceDetails(dataItem)"></i>
          </ng-template>
        </kendo-grid-command-column>
      </kendo-grid>
    </div>
    <!--Begin Card footer Start-->
    <div class="fixed-card-footer">
      <div class="footerStyle">
        <footer class="app-footer">
          <div class="w-100">
            <div class="d-flex justify-content-end p-3 footer-content">

              <a routerLink="{{'/main/payroll/session'}}">
                <span class="btn btn-sm btn-back-to-list btn-primary ">
                  <i class="fa fa-chevron-circle-left"></i> {{'BACK_TO_LIST'|translate}}
                </span>
              </a>

              <button class="btn btn-sm btn-save mx-1 previous" (click)="onPreviousClik()">
                <i class="fa fa-angle-left"></i> {{'PREVIOUS'|translate}}
              </button>
              <button class="btn btn-sm btn-primary next" (click)="onNextClick()">
                {{'NEXT'|translate}} <i class="fa fa-angle-right"></i>
              </button>

            </div>
          </div>
        </footer>
      </div>
    </div>



    <!--Begin Card footer End-->
  </div>
</div>
