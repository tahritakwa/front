<div class="col-lg-12 col-md-12 col-sm-12">
  <div class="col-lg-12">
    <div class="row justify-content-end">
        <div style="margin: 20px;">
           <button (click)="addSessionCash()" class="btn btn-sm" style="background-color: #20a8d8 !important;" type="button"
           *ngIf="haseOpenSessionCashPermission">
              <i class="fa fa-plus fa AddIcon" style="color: white"></i>
              <span style="color: white">&nbsp; {{'OPEN_CASH_REGISTER'|translate}}</span>
           </button>
        </div>
    </div>
    <kendo-grid [data]="gridSettings.gridData"
                [pageSize]="gridSettings.state.take"
                [skip]="gridSettings.state.skip"
                [sort]="gridSettings.state.sort"
                [filter]="gridSettings.state.filter"
                (dataStateChange)="dataStateChange($event)"
                [sortable]="true"
                [pageable]="pagerSettings"
                [filterable]="false"
                [reorderable]="true"
                [columnMenu]="true">
       <!--Principale cash name -->
       <kendo-grid-column *ngIf="selectedcashRegister?.Type === cashRegisterItemTypeEnumerator.Central" [field]="gridSettings.columnsConfig[0].field"
                          [title]="gridSettings.columnsConfig[0].title | translate"
                          [width]="gridSettings.columnsConfig[0]._width"
                          [filter]="gridSettings.columnsConfig[0].filter"
                          [filterable]="gridSettings.columnsConfig[0].filterable"
                          [tooltip]="gridSettings.columnsConfig[0].title"
                          [columnMenu]="false"
                          [format]="gridSettings.columnsConfig[0].format">
          <ng-template kendoGridHeaderTemplate>
              <span tooltip="{{gridSettings.columnsConfig[0].title | translate}}"
                    theme="light">{{gridSettings.columnsConfig[0].title | translate}}
              </span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <div>
              <span>{{dataItem?.IdCashRegisterNavigation?.IdParentCashNavigation?.Name}}</span>
              <span *ngIf="dataItem?.IdCashRegisterNavigation?.IdCityNavigation?.Label">
                -{{dataItem?.IdCashRegisterNavigation?.IdCityNavigation?.Label}}
              </span>
            </div>
          </ng-template>
      </kendo-grid-column>
       <!-- Cash name -->
       <kendo-grid-column *ngIf="selectedcashRegister?.Type === cashRegisterItemTypeEnumerator.Central || selectedcashRegister?.Type === cashRegisterItemTypeEnumerator.Principal"
                          [field]="gridSettings.columnsConfig[1].field"
                          [title]="gridSettings.columnsConfig[1].title | translate"
                          [width]="gridSettings.columnsConfig[1]._width"
                          [filter]="gridSettings.columnsConfig[1].filter"
                          [filterable]="gridSettings.columnsConfig[1].filterable"
                          [tooltip]="gridSettings.columnsConfig[1].title"
                          [columnMenu]="false"
                          [format]="gridSettings.columnsConfig[1].format">
          <ng-template kendoGridHeaderTemplate>
              <span tooltip="{{gridSettings.columnsConfig[1].title | translate}}"
                    theme="light">{{gridSettings.columnsConfig[1].title | translate}}
              </span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <div>
              {{dataItem?.IdCashRegisterNavigation?.Name}}
            </div>
          </ng-template>
      </kendo-grid-column>
      <!--Cashier Session-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[2].field"
                          [title]="gridSettings.columnsConfig[2].title | translate"
                          [width]="gridSettings.columnsConfig[2]._width"
                          [filter]="gridSettings.columnsConfig[2].filter"
                          [filterable]="gridSettings.columnsConfig[2].filterable"
                          [tooltip]="gridSettings.columnsConfig[2].title"
                          [columnMenu]="false"
                          [format]="gridSettings.columnsConfig[2].format">
        <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{'CASHIER' | translate}}"
                  theme="light">{{'CASHIER' | translate}}
            </span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
          <div>
            {{dataItem?.IdSellerNavigation?.FirstName + " " + dataItem?.IdSellerNavigation?.LastName}}
          </div>
        </ng-template>
      </kendo-grid-column>
       <!--Code Session-->
       <kendo-grid-column [field]="gridSettings.columnsConfig[3].field"
                          [title]="gridSettings.columnsConfig[3].title | translate"
                          [width]="gridSettings.columnsConfig[3]._width"
                          [filter]="gridSettings.columnsConfig[3].filter"
                          [filterable]="gridSettings.columnsConfig[3].filterable"
                          [tooltip]="gridSettings.columnsConfig[3].title"
                          [columnMenu]="false"
                          [format]="gridSettings.columnsConfig[3].format">
          <ng-template kendoGridHeaderTemplate>
              <span tooltip="{{gridSettings.columnsConfig[3].title | translate}}"
                    theme="light">{{gridSettings.columnsConfig[3].title | translate}}
              </span>
          </ng-template>
      </kendo-grid-column>

      <!--Opening date-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[4].field"
                         [title]="gridSettings.columnsConfig[4].title | translate"
                         [width]="gridSettings.columnsConfig[4]._width"
                         [filter]="gridSettings.columnsConfig[4].filter"
                         [filterable]="gridSettings.columnsConfig[4].filterable"
                         [tooltip]="gridSettings.columnsConfig[4].title"
                         [columnMenu]="false">
                  <ng-template kendoGridHeaderTemplate>
                        <span tooltip="{{gridSettings.columnsConfig[4].title | translate}}"
                              theme="light">{{gridSettings.columnsConfig[4].title | translate}}
                        </span>
                  </ng-template>
                  <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    <div>
                      {{dataItem.OpeningDate|date: gridSettings.columnsConfig[4].format}}
                    </div>
                  </ng-template>
      </kendo-grid-column>

      <!--Closing date-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[5].field"
                                  [title]="gridSettings.columnsConfig[5].title | translate" [filterable]="false"
                                  [tooltip]="gridSettings.columnsConfig[5].title"
                                  [width]="gridSettings.columnsConfig[5]._width"
                                  [columnMenu]="false" [style]="{'text-align': 'center'}">
                  <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[5].title | translate}}"
                        theme="light">{{gridSettings.columnsConfig[5].title | translate}}</span>
                  </ng-template>
                  <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    <div *ngIf="dataItem.ClosingDate">
                      {{dataItem.ClosingDate|date: gridSettings.columnsConfig[5].format}}
                    </div>
                    <div *ngIf="!dataItem.ClosingDate"> - </div>
                  </ng-template>
      </kendo-grid-column>

      <!--State-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[6].field"
                                  [title]="gridSettings.columnsConfig[6].title | translate" [filterable]="false"
                                  [tooltip]="gridSettings.columnsConfig[6].title"
                                  [width]="gridSettings.columnsConfig[6]._width"
                                  [columnMenu]="false" [style]="{'text-align': 'center'}">
                  <ng-template kendoGridHeaderTemplate>
                  <span tooltip="{{gridSettings.columnsConfig[6].title | translate}}"
                        theme="light">{{gridSettings.columnsConfig[6].title | translate}}</span>
                  </ng-template>
                  <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    <div>
                      <span class="badge badge-warning"
                            *ngIf="dataItem.State === cashRegisterStatus.Opened">{{'OPENED' | translate}}
                      </span>
                    </div>
                    <div>
                      <span class="badge badge-success"
                            *ngIf="dataItem.State === cashRegisterStatus.Closed">{{'CLOSED' | translate}}
                      </span>
                    </div>
                  </ng-template>
      </kendo-grid-column>

      <!--Openning amount-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[7].field"
                                   [title]="gridSettings.columnsConfig[7].title | translate"
                                   [filterable]="false"
                                   [tooltip]="gridSettings.columnsConfig[7].title"
                                   [width]="gridSettings.columnsConfig[7]._width"
                                   [columnMenu]="false"
                                   [style]='{"font-family": "Roboto, serif", "color": "#505253",
          "text-align": "right", "padding-right": "4%"}'>
                  <ng-template kendoGridHeaderTemplate>
                      <span tooltip="{{gridSettings.columnsConfig[7].title | translate}}"
                          theme="light">{{gridSettings.columnsConfig[7].title | translate}}
                      </span>
                  </ng-template>
                  <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    {{dataItem.OpeningAmount.toLocaleString(language,{minimumFractionDigits: companyCurrency.Precision})}}
                    {{companyCurrency.Symbole}}
                  </ng-template>

      </kendo-grid-column>

      <!--Closing amount-->
      <kendo-grid-column [field]="gridSettings.columnsConfig[8].field"
                                   [title]="gridSettings.columnsConfig[8].title | translate"
                                   [filterable]="false"
                                   [tooltip]="gridSettings.columnsConfig[8].title"
                                   [width]="gridSettings.columnsConfig[8]._width"
                                   [columnMenu]="false"
                                   [style]='{"font-family": "Roboto, serif", "color": "#505253",
          "text-align": "right", "padding-right": "4%"}'>
                  <ng-template kendoGridHeaderTemplate>
                    <span tooltip="{{gridSettings.columnsConfig[8].title | translate}}"
                          theme="light">{{gridSettings.columnsConfig[8].title | translate}}
                    </span>
                  </ng-template>
                  <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    <div *ngIf="dataItem.ClosingAmount">
                      {{dataItem.ClosingAmount.toLocaleString(language,{minimumFractionDigits: companyCurrency.Precision})}}
                    {{companyCurrency.Symbole}}
                    </div>
                    <div *ngIf="!dataItem.ClosingAmount"> - </div>
                  </ng-template>
      </kendo-grid-column>
      <!-- Gap -->
      <kendo-grid-column [field]="gridSettings.columnsConfig[9].field"
                                   [title]="gridSettings.columnsConfig[9].title | translate"
                                   [filterable]="false"
                                   [tooltip]="gridSettings.columnsConfig[9].title"
                                   [width]="gridSettings.columnsConfig[9]._width"
                                   [columnMenu]="false"
                                   [style]='{"font-family": "Roboto, serif", "color": "#505253",
          "text-align": "right", "padding-right": "4%"}'>
                  <ng-template kendoGridHeaderTemplate>
                    <span tooltip="{{gridSettings.columnsConfig[9].title | translate}}"
                          theme="light">{{gridSettings.columnsConfig[9].title | translate}}
                    </span>
                  </ng-template>
                  <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    <span>
                      {{(dataItem.ClosingAmount - dataItem.CalculatedTotalAmount).toLocaleString(language,{minimumFractionDigits: companyCurrency.Precision})}}
                    {{companyCurrency.Symbole}}
                    </span>

                  </ng-template>
      </kendo-grid-column>

      
      <kendo-grid-command-column [width]="127" [title]="'ACTIONS' | translate"
          [style]='{"text-align": "left"}'>
          <ng-template kendoGridHeaderTemplate style="text-align: center;">
            <span tooltip="{{'ACTIONS' | translate}}" theme="light" center>{{"ACTIONS" | translate}}</span>
          </ng-template>

          <ng-template  kendoGridCellTemplate let-isNew="isNew" let-dataItem="dataItem">

            <!--show session history  -->
            <i (click)="showSessionHistory(dataItem)" class="cursor-pointer fa fa-history fa " style="color: #20a8d8">
            </i>
          </ng-template>
    
        </kendo-grid-command-column>

    </kendo-grid>
  </div>
</div>

