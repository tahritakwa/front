<div class="card">
  <!-- card-header -->
  <div class="card-header">
    <div class="row">
      <div class="col-sm-5 mt-1">
        <h3>{{'FUNDS_TRANSFER' |translate}}</h3>
      </div>
    </div>
  </div>
  <div class="card-body">
    <!-- Advanced search-->
    <div class="col-lg-12 col-sm-12 col-md-12">
      <app-advanced-search [filtreFieldsColumns]="filterFieldsColumns" [filtreFieldsInputs]="filterFieldsInputs"
      (filtrePredicateToSend)="advancedFilterPredicateChange($event)"
      (filterFieldsInputsChange)="filterFieldsInputsChange($event)" (searchClickEvent)="searchClick()"
      (resetClickEvent)="resetClickEvent()">
      </app-advanced-search>
      <div class="row d-flex justify-content-between mt-3">
        <!-- Search Start -->
        <div class="d-flex justify-content-center" style="margin-left: 30px;">
          <!-- Search input -->
          <div class="col-12">
            <div class="form-group row">
              <div class="col-10 pl-1">
                <input type="text" class="form-control" autocomplete="off" placeholder="{{'SEARCH'|translate}}"
                  name='value' aria-label="Search" style="width: 160px;" aria-describedby="addon-wrapping"
                  [(ngModel)]='filterValue' (keyup)='doFilter()'>
              </div>
              <div class="col-2 p-1">
                <i class="fa fa-search fa-lg" aria-hidden="true" (click)='doFilter()'></i>
              </div>
            </div>
          </div>
        </div>
        <!-- Search End-->
        <app-btn-grid class="col" [fileName]="'FUNDS_TRANSFER'|translate" [advencedAdd]='hasAddPermission' [addLink]='"add"'
          [cardView]="false" [relativeStyle]='true' [model]="true" [gridSettings]="gridSettings" [isExportExcel]="true">
        </app-btn-grid>
      </div>
      <kendo-grid [data]="gridSettings.gridData" [pageable]="pagerSettings" [pageSize]="gridSettings.state.take"
        [skip]="gridSettings.state.skip" [sort]="gridSettings.state.sort" [reorderable]="true" [sortable]="true"
        (dataStateChange)="dataStateChange($event)">
        <!--Columns-->
        <!--Date Start-->
        <kendo-grid-column [field]="columnsConfig[0].field" [filter]="columnsConfig[0].filter" [filterable]="true"
          [width]="160">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[0].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[0].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>
              {{dataItem.TransferDate | date : dateFormat}}
            </span>
          </ng-template>
        </kendo-grid-column>
        <!--Date End-->
        <!--Code Start-->
        <kendo-grid-column [field]="columnsConfig[1].field" [filter]="columnsConfig[1].filter" [filterable]="true"
          [width]="150">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[1].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[1].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <span class="pointer intervention-code" (click)="goToAdvancedEdit(dataItem.Id)" theme="light">
              {{dataItem.Code}}
            </span>
          </ng-template>
        </kendo-grid-column>
        <!--Code End-->
        <!--Transfer Type Start-->
        <kendo-grid-column [field]="columnsConfig[2].field" [filter]="columnsConfig[2].filter" [filterable]="true"
          [width]="250">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[2].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[2].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <div *ngIf="dataItem.Type == fundsTransferType.Supply_Cash_Recipe">
              <span>{{'SUPPLY_CASH_RECIPE' | translate}}</span>
            </div>
            <div *ngIf="dataItem.Type == fundsTransferType.Supply_Expense_Fund">
              <span>{{'SUPPLY_EXPENSE_FUND' | translate}}</span>
            </div>
            <div *ngIf="dataItem.Type == fundsTransferType.Supply_POS">
              <span>{{'SUPPLY_POS' | translate}}</span>
            </div>
            <div *ngIf="dataItem.Type == fundsTransferType.Close_POS">
              <span>{{'CLOSE_POS' | translate}}</span>
            </div>
          </ng-template>
        </kendo-grid-column>
        <!--Transfer type End-->
        <!--Source Start-->
        <kendo-grid-column [field]="columnsConfig[3].field" [filter]="columnsConfig[3].filter" [filterable]="true"
          [width]="190">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[3].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[3].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>{{dataItem.IdSourceCashNavigation?.Name +' '+ dataItem.IdSourceCashNavigation?.Code}}</span>
          </ng-template>
        </kendo-grid-column>
        <!--Source End-->
        <!--Destination Start-->
        <kendo-grid-column [field]="columnsConfig[4].field" [filter]="columnsConfig[4].filter" [filterable]="true"
          [width]="190">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[4].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[4].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <span>{{dataItem.IdDestinationCashNavigation?.Name +' '+ dataItem.IdDestinationCashNavigation?.Code}}</span>
          </ng-template>
        </kendo-grid-column>
        <!--Destination End-->
        <!--State Start-->
        <kendo-grid-column [field]="columnsConfig[5].field" [filter]="columnsConfig[5].filter" [filterable]="true"
          [width]="140">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[5].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[5].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem>
            <div *ngIf="dataItem.Status == fundsTransferState.Supplied"><span
                class="badge badge-success">{{'SUPPLIED'|translate}}</span></div>
            <div *ngIf="dataItem.Status == fundsTransferState.Closed || !dataItem.Status"><span
                class="badge badge-warning">{{'CLOSED'|translate}}</span></div>
          </ng-template>
        </kendo-grid-column>
        <!--State End-->
        <!--Amount Start-->
        <kendo-grid-column [field]="columnsConfig[6].field" [filter]="columnsConfig[6].filter" [filterable]="true"
          [width]="150">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[6].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[6].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[5].tooltip|translate}}"
              theme="light">{{gridSettings.columnsConfig[5].title|translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <span class="pull-right" style="margin-right: 20px;">
              {{dataItem.AmountWithCurrency.toLocaleString(language,{minimumFractionDigits:
              dataItem.IdCurrencyNavigation?.Precision,
              style: 'currency', currency: dataItem.IdCurrencyNavigation?.Code, currencyDisplay:'code'})}}</span>
          </ng-template>
        </kendo-grid-column>
        <!--Amount End-->
        <!--End Columns-->
        <!--Actions-->
        <!-- Command-->
        <kendo-grid-command-column [width]="120" [title]="'ACTIONS' | translate">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{'ACTIONS' | translate}}" theme="light">{{'ACTIONS' | translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <span tooltip="{{'UPDATE' | translate}}" theme="light" *ngIf="hasUpdatePermission || hasShowPermission">
              <i class="las la-pen cursor-pointer edit-pencil la-lg ng-star-inserted"
                (click)="goToAdvancedEdit(dataItem.Id)"></i>
            </span>
            <span tooltip="{{'DELETE' | translate}}" theme="light" *ngIf="hasDeletePermission">
              <i class="fa fa-trash-o la-lg cursor-pointer text-danger ng-star-inserted"
                (click)="removeHandler(dataItem)"></i>
            </span>
          </ng-template>
        </kendo-grid-command-column>
        <!--End Actions-->
      </kendo-grid>

    </div>
  </div>
</div>
