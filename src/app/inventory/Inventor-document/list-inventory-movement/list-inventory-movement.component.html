<div class="card full-screen-card">
  <div class="card-content">
    <div class="card-header">
      <div class="col-sm-5 mt-1">
        <h3 class="card-title mb-0">{{'LIST_INVENTORY'|translate}}</h3>
      </div>
    </div>
    <div class="card-body" [formGroup]="formGroupFilter">
      <app-advanced-search [filtreFieldsColumns]="filtreFieldsColumns" [filtreFieldsInputs]="filtreFieldsInputs"
        (filtrePredicateToSend)="getFiltrePredicate($event)" (predicateOperator)="getOperatorPredicate($event)"
        (searchClickEvent)="searchClick()" (resetClickEvent)="resetClickEvent()">
      </app-advanced-search>
      <kendo-grid [data]="gridSettings.gridData" [pageSize]="gridSettings.state.take" [skip]="gridSettings.state.skip"
        [sortable]="true" [pageable]="pagerSettings" [filterable]="false" [reorderable]="true" [columnMenu]="false"
        (remove)="removeHandler($event)" [sort]="gridSettings.state.sort" [filter]="gridSettings.state.filter"
        (dataStateChange)="dataStateChange($event)" [selectable]="{enabled: true, checkboxOnly: true }"
        (selectedKeysChange)="onSelectedKeysChange($event)" [kendoGridSelectBy]="'Id'"
        [selectedKeys]="inventoryIdsSelected">
        <!-- Head Start-->
        <ng-template kendoGridToolbarTemplate>
          <div class="justify-content-end">
            <div class="row d-flex justify-content-between">
              <div class="d-flex justify-content-center">
                <div class="col-12">
                  <div class="form-group row">
                    <div class="col-10">
                      <input type="text" class="form-control" placeholder="{{'SEARCH_INVENTORY'|translate}}"
                        aria-describedby="addon-wrapping" [(ngModel)]='inventory' (keyup)='filter()'
                        [ngModelOptions]="{standalone: true}">
                    </div>
                    <div class="col-2 p-1">
                      <i class="fa fa-search fa-lg" aria-hidden="true" (click)='filter()'></i>
                    </div>
                  </div>
                </div>
              </div>
              <app-btn-grid class="d-inline-flex" [fileName]="listInventory |translate" [isPrintShow]='hasPrintPermission'
                (multiPrint)="openMassPrint()" [advencedAdd]='hasAddPermission' [add]='false' [isExportExcel]='true' [model]='true'
                [addLink]='"advancedAdd"' [gridSettings]="excelGridSettings" [predicate]="predicateInventory[0]" [service]="stockDocumentsService">
              </app-btn-grid> 
            </div>
          </div>

        </ng-template>
  <!-- checkbox start -->
  <kendo-grid-checkbox-column [width]="60">
    <ng-template kendoGridHeaderTemplate >
      <div class="checkbox-position">
        <input class="k-checkbox" id="selectAllCheckboxId" kendoGridSelectAllCheckbox [state]="selectAllState">
        <label class="k-checkbox-label" for="selectAllCheckboxId"></label>
      </div> 
    </ng-template>
    <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-idx="rowIndex">
      <span *ngIf="dataItem.IdDocumentStatus == this.statusCode.Valid">
        <input class="k-checkbox" id="CheckboxId_{{idx}}" [kendoGridSelectionCheckbox]="idx" />
        <label class="k-checkbox-label" for="CheckboxId_{{idx}}"></label>
      </span>
    </ng-template>
  </kendo-grid-checkbox-column>
  <!-- checkbox end -->

        <!-- Head end-->
        <!--Code-->
        <kendo-grid-column [field]="gridSettings.columnsConfig[0].field"
          [title]="gridSettings.columnsConfig[0].title | translate" [width]="gridSettings.columnsConfig[0]._width"
          [filter]="gridSettings.columnsConfig[0].filter" [filterable]="gridSettings.columnsConfig[0].filterable"
          [format]="gridSettings.columnsConfig[0].format">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[0].title | translate}}"
              theme="light">{{gridSettings.columnsConfig[0].title | translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">

            <span class="pointer doc-code" [ngStyle]="{'color': '#' + dataItem.IdDocumentStatusNavigation.Color}"
              (click)="goToAdvancedEdit(dataItem.Id)">{{dataItem.Code}}</span>


          </ng-template>
        </kendo-grid-column>
        <!-- Date -->
        <kendo-grid-column [field]="gridSettings.columnsConfig[1].field"
          [title]="gridSettings.columnsConfig[1].title | translate" [width]="gridSettings.columnsConfig[1]._width"
          [filter]="gridSettings.columnsConfig[1].filter" [filterable]="gridSettings.columnsConfig[1].filterable"
          [format]="gridSettings.columnsConfig[1].format" [style]="{'text-align': 'center'}"
          [headerStyle]="{'text-align': 'center'}">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[1].title | translate}}"
              theme="light">{{gridSettings.columnsConfig[1].title | translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            {{dataItem.DocumentDate|date: gridSettings.columnsConfig[1].format}}
          </ng-template>
        </kendo-grid-column>
        <!--Warehouse -->
        <kendo-grid-column [field]=gridSettings.columnsConfig[2].field [title]="WAREHOUSE | translate"
          [width]="gridSettings.columnsConfig[2]._width" [filter]="gridSettings.columnsConfig[2].filter"
          [filterable]="gridSettings.columnsConfig[2].filterable" [format]="gridSettings.columnsConfig[2].format">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{'WAREHOUSE' | translate}}" theme="light">{{'WAREHOUSE' | translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <span *ngIf="dataItem.IdWarehouseSourceNavigation"> {{dataItem.IdWarehouseSourceNavigation.WarehouseName}} </span>
            <span *ngIf="!dataItem.IdWarehouseSourceNavigation"> - </span>
          </ng-template>
        </kendo-grid-column>
        <!--SHELF-->
        <kendo-grid-column [field]="gridSettings.columnsConfig[3].field"
          [title]="gridSettings.columnsConfig[3].title| translate" [width]="gridSettings.columnsConfig[3]._width"
          [filter]="gridSettings.columnsConfig[3].filter" [filterable]="gridSettings.columnsConfig[3].filterable"
          [format]="gridSettings.columnsConfig[3].format">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[3].title | translate}}"
              theme="light">{{gridSettings.columnsConfig[3].title | translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <span *ngIf="dataItem.Shelf"> {{dataItem.Shelf}} </span>
            <span *ngIf="!dataItem.Shelf"> - </span>
          </ng-template>
        </kendo-grid-column>
        <!--SUPPLIER-->
        <kendo-grid-column [field]="gridSettings.columnsConfig[4].field"
          [title]="gridSettings.columnsConfig[4].title| translate" [width]="gridSettings.columnsConfig[4]._width"
          [filter]="gridSettings.columnsConfig[4].filter" [filterable]="gridSettings.columnsConfig[4].filterable"
          [format]="gridSettings.columnsConfig[4].format">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[4].title | translate}}"
              theme="light">{{gridSettings.columnsConfig[4].title | translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <span *ngIf="dataItem.IdTiersNavigation"> {{dataItem.IdTiersNavigation.Name}} </span>
            <span *ngIf="!dataItem.IdTiersNavigation"> - </span>
          </ng-template>
        </kendo-grid-column>
        <!--Status-->
        <kendo-grid-column [field]="gridSettings.columnsConfig[5].field"
          [title]="gridSettings.columnsConfig[5].title| translate" [width]="gridSettings.columnsConfig[5]._width"
          [filter]="gridSettings.columnsConfig[5].filter" [filterable]="gridSettings.columnsConfig[5].filterable"
          [format]="gridSettings.columnsConfig[5].format" [headerStyle]="{'text-align': 'center'}"
          [style]="{'text-align': 'center'}">
          <ng-template kendoGridHeaderTemplate>
            <span tooltip="{{gridSettings.columnsConfig[5].title | translate}}"
              theme="light">{{gridSettings.columnsConfig[5].title | translate}}</span>
          </ng-template>
          <ng-template kendoGridCellTemplate let-dataItem='dataItem'>
            <div *ngIf="dataItem.IdDocumentStatus === statusCode.Provisional"><span
                class="badge badge-warning">{{'PROVISOIRE'|translate}}</span></div>
            <div *ngIf="dataItem.IdDocumentStatus === statusCode.Valid"><span
                class="badge badge-success">{{'VALID'|translate}}</span></div>
            <div *ngIf="dataItem.IdDocumentStatus === statusCode.DRAFT">
              <span class="badge" style="color: #ffffff; background-color: #0d35a3;">{{'DRAFT'|translate}}</span>
            </div>
          </ng-template>
        </kendo-grid-column>
        <!-- Command-->
        <kendo-grid-command-column [width]="130" [title]="'ACTIONS'| translate " [columnMenu]="false"
          [headerStyle]="{'text-align': 'center'}" [style]="{'text-align': 'center'}">
          <ng-template kendoGridCellTemplate let-isNew="isNew" let-dataItem="dataItem">
            <!--Open advanced edit form -->
            <i class="las la-pen cursor-pointer edit-pencil la-lg" (click)="goToAdvancedEdit(dataItem.Id)"
              *ngIf="dataItem.IdDocumentStatusNavigation.Id == 1 && (hasShowPermission || hasUpdatePermission)"></i>
            <i class="cursor-pointer las la-pen edit-pencil la-lg" *ngIf="dataItem.IdDocumentStatusNavigation.Id !== 1 && (hasShowPermission || hasUpdatePermission)"
              [routerLink]="['edit', dataItem.Id]"></i>
            <i *ngIf="dataItem.IdDocumentStatusNavigation.Id == 1 && hasDeletePermission" class="fa fa-trash-o la-lg mx-3 text-danger"
              (click)="removeHandler(dataItem)"></i>
          </ng-template>
        </kendo-grid-command-column>
        <!--grid pdf & excel-->
        <app-grid-export [gridSettings]="gridSettings" fileName="{{'LIST_INVENTORY'|translate}}" pdf="true" excel="true"
          [service]="stockDocumentsService" [predicate]="predicateQuickSearch">
        </app-grid-export>
        <!--end grid pdf & excel-->
      </kendo-grid>
    </div>
  </div>
</div>