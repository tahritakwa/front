<div class="col-lg-12 col-md-12 col-sm-12">
  <div class="row">
    <div class="card full-screen-card">
      <div class="card-content">
        <div class="card-header">
          <div class="col-sm-5 mt-1">
            <h3 class="card-title mb-0">{{'LIST_SHELFS_AND_STORAGES'|translate}}</h3>
          </div>
        </div>
        <div class="card-body">
          <app-advanced-search [filtreFieldsColumns]="filtreFieldsColumns" [filtreFieldsInputs]="filtreFieldsInputs"
            (predicateOperator)="getOperatorPredicate($event) " (searchClickEvent)="searchClick()"
            (resetClickEvent)="resetClickEvent()" (filtrePredicateToSend)="getFiltrePredicate($event)">
          </app-advanced-search>
          <div class="row d-flex justify-content-between mt-3">
            <app-search-shelf-and-storage (sendData)="receiveData($event)"></app-search-shelf-and-storage>
            <app-btn-grid class="col" [advencedAdd]='hasAddPermission' [add]='false' [export]='true' [addLink]='"advancedAdd"'
              [model]='true' [relativeStyle]='true' [fileName]="'LIST_SHELFS_AND_STORAGES'|translate"
              [api]="'getDataWithSpecificFilter'" [gridSettings]="excelGridSettings" [service]="stockDocumentsService"
              [predicate]="predicate" [isExportExcel]="true"></app-btn-grid>
          </div>
          <kendo-grid [data]="gridSettings.gridData" [pageSize]="gridSettings.state.take"
            [skip]="gridSettings.state.skip" [sortable]="true" [pageable]="pagerSettings" filterable="false"
            [reorderable]="true" [columnMenu]="false" [sort]="gridSettings.state.sort"
            [filter]="gridSettings.state.filter" (dataStateChange)="dataStateChange($event)" [selectable]="true">

            <!--Code-->
            <kendo-grid-column [field]="gridSettings.columnsConfig[0].field"
              [title]="gridSettings.columnsConfig[0].title | translate" [width]="gridSettings.columnsConfig[0]._width"
              [filter]="gridSettings.columnsConfig[0].filter" [filterable]="gridSettings.columnsConfig[0].filterable"
              [format]="gridSettings.columnsConfig[0].format">
              <ng-template kendoGridHeaderTemplate>
                <span tooltip="{{gridSettings.columnsConfig[0].title | translate}}"
                  theme="light">{{gridSettings.columnsConfig[0].title | translate}}</span>
              </ng-template>
            </kendo-grid-column>
            <!-- Date -->
            <kendo-grid-column [field]="gridSettings.columnsConfig[1].field"
              [title]="gridSettings.columnsConfig[1].title | translate" [width]="gridSettings.columnsConfig[1]._width"
              [filter]="gridSettings.columnsConfig[1].filter" [filterable]="gridSettings.columnsConfig[1].filterable"
              [format]="gridSettings.columnsConfig[1].format"
              [style]='{"text-align": "right", "padding-right": "2%"}'>
              <ng-template kendoGridHeaderTemplate>
                <span tooltip="{{gridSettings.columnsConfig[1].title | translate}}"
                  theme="light">{{gridSettings.columnsConfig[1].title | translate}}</span>
              </ng-template>
              <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                {{dataItem.DocumentDate|date: gridSettings.columnsConfig[1].format}}
              </ng-template>
            </kendo-grid-column>
            <!--Warehouse Source-->
            <kendo-grid-column [field]=gridSettings.columnsConfig[2].field
              [title]="gridSettings.columnsConfig[2].title | translate" [width]="gridSettings.columnsConfig[2]._width"
              [filter]="gridSettings.columnsConfig[2].filter" [filterable]="gridSettings.columnsConfig[2].filterable"
              [format]="gridSettings.columnsConfig[2].format">
              <ng-template kendoGridHeaderTemplate>
                <span tooltip="{{gridSettings.columnsConfig[2].title | translate}}"
                  theme="light">{{gridSettings.columnsConfig[2].title | translate}}</span>
              </ng-template>
            </kendo-grid-column>
            <!-- Storage Source -->
            <kendo-grid-column [field]="gridSettings.columnsConfig[3].field"
              [title]="gridSettings.columnsConfig[3].title | translate" [width]="gridSettings.columnsConfig[3]._width"
              [filter]="gridSettings.columnsConfig[3].filter" [filterable]="gridSettings.columnsConfig[3].filterable"
              [format]="gridSettings.columnsConfig[3].format">
              <ng-template kendoGridHeaderTemplate>
                <span tooltip="{{gridSettings.columnsConfig[3].title | translate}}"
                  theme="light">{{gridSettings.columnsConfig[3].title | translate}}</span>
              </ng-template>
              <ng-template kendoGridCellTemplate let-dataItem='dataItem'>
                <span *ngIf="dataItem.shelfSourceLabel">{{dataItem.shelfSourceLabel}}</span>
                <span *ngIf="!dataItem.shelfSourceLabel">-</span>
              </ng-template>
            </kendo-grid-column>
            <!-- Storage Destination -->
            <kendo-grid-column [field]="gridSettings.columnsConfig[3].field"
              [title]="gridSettings.columnsConfig[4].title | translate" [width]="gridSettings.columnsConfig[4]._width"
              [filter]="gridSettings.columnsConfig[4].filter" [filterable]="gridSettings.columnsConfig[4].filterable"
              [format]="gridSettings.columnsConfig[4].format">
              <ng-template kendoGridHeaderTemplate>
                <span tooltip="{{gridSettings.columnsConfig[4].title | translate}}"
                  theme="light">{{gridSettings.columnsConfig[4].title | translate}}</span>
              </ng-template>
              <ng-template kendoGridCellTemplate let-dataItem='dataItem'>
                <span>{{dataItem?.shelfDestinationLabel}}</span>
              </ng-template>
            </kendo-grid-column>
             <!-- TransferType -->
             <kendo-grid-column [field]="gridSettings.columnsConfig[5].field"
             [title]="gridSettings.columnsConfig[5].title | translate" [width]="gridSettings.columnsConfig[5]._width"
             [filter]="gridSettings.columnsConfig[5].filter" [filterable]="gridSettings.columnsConfig[5].filterable"
             [format]="gridSettings.columnsConfig[5].format">
             <ng-template kendoGridHeaderTemplate>
               <span tooltip="{{gridSettings.columnsConfig[5].title | translate}}"
                 theme="light">{{gridSettings.columnsConfig[5].title | translate}}</span>
             </ng-template>
             <ng-template kendoGridCellTemplate let-dataItem='dataItem'>
               <span>{{dataItem.TransferType | translate}}</span>
             </ng-template>
           </kendo-grid-column>
            <!--Status-->
            <kendo-grid-column [field]="gridSettings.columnsConfig[6].field"
              [title]="gridSettings.columnsConfig[6].title| translate" [width]="gridSettings.columnsConfig[6]._width"
              [filter]="gridSettings.columnsConfig[6].filter" [filterable]="gridSettings.columnsConfig[6].filterable"
              [format]="gridSettings.columnsConfig[6].format">
              <ng-template kendoGridHeaderTemplate>
                <span tooltip="{{gridSettings.columnsConfig[6].title | translate}}"
                  theme="light">{{gridSettings.columnsConfig[6].title | translate}}</span>
              </ng-template>
              <ng-template kendoGridCellTemplate let-dataItem='dataItem'>
                <div *ngIf="dataItem.IdDocumentStatusNavigation.Id === 1"><span
                    class="badge badge-warning">{{'PROVISOIRE'|translate}}</span></div>
                <div *ngIf="dataItem.IdDocumentStatusNavigation.Id === 2"><span
                    class="badge badge-success">{{'VALID'|translate}}</span></div>
                <div *ngIf="dataItem.IdDocumentStatusNavigation.Id === 9"><span
                    class="badge badge-danger">{{'TRANSFERRED'|translate}}</span></div>
                <div *ngIf="dataItem.IdDocumentStatusNavigation.Id === 10"><span
                    class="badge badge-primary">{{'RECEIVED'|translate}}</span></div>
              </ng-template>
            </kendo-grid-column>
            <!-- Command-->
            <kendo-grid-command-column [width]="170" [title]="'ACTIONS'| translate " [columnMenu]="false">
              <ng-template kendoGridCellTemplate let-isNew="isNew" let-dataItem="dataItem">
                <!-- edit command directive, will be visible when not in edit mode -->
                <i *ngIf="dataItem.IdDocumentStatusNavigation.Id == 1 && (hasShowPermission || hasUpdatePermission)"
                  class="las la-pen cursor-pointer edit-pencil la-lg mx-3" aria-hidden="true"
                  (click)="goToAdvancedEdit(dataItem)"></i>

                <i *ngIf="dataItem.IdDocumentStatusNavigation.Id !== 1 && (hasShowPermission || hasUpdatePermission)"
                  class="las la-pen cursor-pointer edit-pencil la-lg mx-3" [routerLink]="['show', dataItem.Id]"></i>
                <!-- remove command directive, will be visible when not in edit mode -->
              <i  *ngIf = "hasDeletePermission" class="text-danger cursor-pointer fa fa-trash-o la-lg" aria-hidden="true"
                 (click)="removeHandler(dataItem)"></i>
              </ng-template>
            </kendo-grid-command-column>
            <!--grid pdf & excel-->
            <app-grid-export [gridSettings]="gridSettings" fileName="{{'LIST_SHELFS_AND_STORAGES'|translate}}"
              pdf="true" excel="true" [service]="stockDocumentsService" [predicate]="predicateQuickSearch">
            </app-grid-export>
            <!--end grid pdf & excel-->
          </kendo-grid>
        </div>
      </div>
    </div>
  </div>
</div>
